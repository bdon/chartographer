var app=function(){"use strict";function t(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(i){if("default"!==i&&!(i in t)){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}))})),Object.freeze(t)}function e(){}function i(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(i)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,i,n){t.$$.on_destroy.push(function(t,...i){if(null==t)return e;const n=t.subscribe(...i);return n.unsubscribe?()=>n.unsubscribe():n}(i,n))}function l(t,e,i,n){if(t){const a=c(t,e,i,n);return t[0](a)}}function c(t,e,i,n){return t[1]&&n?function(t,e){for(const i in e)t[i]=e[i];return t}(i.ctx.slice(),t[1](n(e))):i.ctx}function u(t,e,i,n){if(t[2]&&n){const a=t[2](n(i));if(void 0===e.dirty)return a;if("object"==typeof a){const t=[],i=Math.max(e.dirty.length,a.length);for(let n=0;n<i;n+=1)t[n]=e.dirty[n]|a[n];return t}return e.dirty|a}return e.dirty}function d(t,e,i,n,a,o){if(a){const r=c(e,i,n,o);t.p(r,a)}}function h(t){if(t.ctx.length>32){const e=[],i=t.ctx.length/32;for(let t=0;t<i;t++)e[t]=-1;return e}return-1}function p(t){return null==t?"":t}function m(t,e){t.appendChild(e)}function b(t,e,i){t.insertBefore(e,i||null)}function y(t){t.parentNode.removeChild(t)}function f(t,e){for(let i=0;i<t.length;i+=1)t[i]&&t[i].d(e)}function g(t){return document.createElement(t)}function I(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function v(t){return document.createTextNode(t)}function x(){return v(" ")}function Z(){return v("")}function G(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function w(t,e,i){null==i?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function W(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function X(t,e){t.value=null==e?"":e}function _(t,e,i,n){null===i?t.style.removeProperty(e):t.style.setProperty(e,i,n?"important":"")}function V(t,e){for(let i=0;i<t.options.length;i+=1){const n=t.options[i];if(n.__value===e)return void(n.selected=!0)}t.selectedIndex=-1}function S(t,e,i){t.classList[i?"add":"remove"](e)}let B;function L(t){B=t}function Y(){if(!B)throw new Error("Function called outside component initialization");return B}function z(t){Y().$$.on_mount.push(t)}function R(){const t=Y();return(e,i,{cancelable:n=!1}={})=>{const a=t.$$.callbacks[e];if(a){const o=function(t,e,{bubbles:i=!1,cancelable:n=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(t,i,n,e),a}(e,i,{cancelable:n});return a.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function C(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach((t=>t.call(this,e)))}const M=[],J=[],H=[],k=[],j=Promise.resolve();let F=!1;function N(t){H.push(t)}const T=new Set;let U=0;function E(){const t=B;do{for(;U<M.length;){const t=M[U];U++,L(t),A(t.$$)}for(L(null),M.length=0,U=0;J.length;)J.pop()();for(let t=0;t<H.length;t+=1){const e=H[t];T.has(e)||(T.add(e),e())}H.length=0}while(M.length);for(;k.length;)k.pop()();F=!1,T.clear(),L(t)}function A(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const O=new Set;let P;function K(){P={r:0,c:[],p:P}}function D(){P.r||a(P.c),P=P.p}function Q(t,e){t&&t.i&&(O.delete(t),t.i(e))}function q(t,e,i,n){if(t&&t.o){if(O.has(t))return;O.add(t),P.c.push((()=>{O.delete(t),n&&(i&&t.d(1),n())})),t.o(e)}}function $(t,e){t.d(1),e.delete(t.key)}function tt(t,e){q(t,1,1,(()=>{e.delete(t.key)}))}function et(t,e,i,n,a,o,r,s,l,c,u,d){let h=t.length,p=o.length,m=h;const b={};for(;m--;)b[t[m].key]=m;const y=[],f=new Map,g=new Map;for(m=p;m--;){const t=d(a,o,m),s=i(t);let l=r.get(s);l?n&&l.p(t,e):(l=c(s,t),l.c()),f.set(s,y[m]=l),s in b&&g.set(s,Math.abs(m-b[s]))}const I=new Set,v=new Set;function x(t){Q(t,1),t.m(s,u),r.set(t.key,t),u=t.first,p--}for(;h&&p;){const e=y[p-1],i=t[h-1],n=e.key,a=i.key;e===i?(u=e.first,h--,p--):f.has(a)?!r.has(n)||I.has(n)?x(e):v.has(a)?h--:g.get(n)>g.get(a)?(v.add(n),x(e)):(I.add(a),h--):(l(i,r),h--)}for(;h--;){const e=t[h];f.has(e.key)||l(e,r)}for(;p;)x(y[p-1]);return y}function it(t){t&&t.c()}function nt(t,e,n,r){const{fragment:s,on_mount:l,on_destroy:c,after_update:u}=t.$$;s&&s.m(e,n),r||N((()=>{const e=l.map(i).filter(o);c?c.push(...e):a(e),t.$$.on_mount=[]})),u.forEach(N)}function at(t,e){const i=t.$$;null!==i.fragment&&(a(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function ot(t,e){-1===t.$$.dirty[0]&&(M.push(t),F||(F=!0,j.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function rt(t,i,o,r,s,l,c,u=[-1]){const d=B;L(t);const h=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:i.target||d.$$.root};c&&c(h.root);let p=!1;if(h.ctx=o?o(t,i.props||{},((e,i,...n)=>{const a=n.length?n[0]:i;return h.ctx&&s(h.ctx[e],h.ctx[e]=a)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](a),p&&ot(t,e)),i})):[],h.update(),p=!0,a(h.before_update),h.fragment=!!r&&r(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(y)}else h.fragment&&h.fragment.c();i.intro&&Q(t.$$.fragment),nt(t,i.target,i.anchor,i.customElement),E()}L(d)}class st{$destroy(){at(this,1),this.$destroy=e}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function lt(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ct(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ut(t){let e,i,n;function a(t,n,a=0,o=t.length){if(a<o){if(0!==e(n,n))return o;do{const e=a+o>>>1;i(t[e],n)<0?a=e+1:o=e}while(a<o)}return a}return 2!==t.length?(e=lt,i=(e,i)=>lt(t(e),i),n=(e,i)=>t(e)-i):(e=t===lt||t===ct?t:dt,i=t,n=t),{left:a,center:function(t,e,i=0,o=t.length){const r=a(t,e,i,o-1);return r>i&&n(t[r-1],e)>-n(t[r],e)?r-1:r},right:function(t,n,a=0,o=t.length){if(a<o){if(0!==e(n,n))return o;do{const e=a+o>>>1;i(t[e],n)<=0?a=e+1:o=e}while(a<o)}return a}}}function dt(){return 0}const ht=ut(lt).right;ut((function(t){return null===t?NaN:+t})).center;var pt=ht;class mt extends Map{constructor(t,e=yt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,i]of t)this.set(e,i)}get(t){return super.get(bt(this,t))}has(t){return super.has(bt(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):(t.set(n,i),i)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},i){const n=e(i);t.has(n)&&(i=t.get(n),t.delete(n));return i}(this,t))}}function bt({_intern:t,_key:e},i){const n=e(i);return t.has(n)?t.get(n):i}function yt(t){return null!==t&&"object"==typeof t?t.valueOf():t}var ft=Math.sqrt(50),gt=Math.sqrt(10),It=Math.sqrt(2);function vt(t,e,i){var n=(e-t)/Math.max(0,i),a=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,a);return a>=0?(o>=ft?10:o>=gt?5:o>=It?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=ft?10:o>=gt?5:o>=It?2:1)}function xt(t,e,i){t=+t,e=+e,i=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+i;for(var n=-1,a=0|Math.max(0,Math.ceil((e-t)/i)),o=new Array(a);++n<a;)o[n]=t+n*i;return o}function Zt(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Gt(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function wt(){}var Wt=.7,Xt=1/Wt,_t="\\s*([+-]?\\d+)\\s*",Vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",St="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bt=/^#([0-9a-f]{3,8})$/,Lt=new RegExp(`^rgb\\(${_t},${_t},${_t}\\)$`),Yt=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),zt=new RegExp(`^rgba\\(${_t},${_t},${_t},${Vt}\\)$`),Rt=new RegExp(`^rgba\\(${St},${St},${St},${Vt}\\)$`),Ct=new RegExp(`^hsl\\(${Vt},${St},${St}\\)$`),Mt=new RegExp(`^hsla\\(${Vt},${St},${St},${Vt}\\)$`),Jt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ht(){return this.rgb().formatHex()}function kt(){return this.rgb().formatRgb()}function jt(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Bt.exec(t))?(i=e[1].length,e=parseInt(e[1],16),6===i?Ft(e):3===i?new Et(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===i?Nt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===i?Nt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Lt.exec(t))?new Et(e[1],e[2],e[3],1):(e=Yt.exec(t))?new Et(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=zt.exec(t))?Nt(e[1],e[2],e[3],e[4]):(e=Rt.exec(t))?Nt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ct.exec(t))?Qt(e[1],e[2]/100,e[3]/100,1):(e=Mt.exec(t))?Qt(e[1],e[2]/100,e[3]/100,e[4]):Jt.hasOwnProperty(t)?Ft(Jt[t]):"transparent"===t?new Et(NaN,NaN,NaN,0):null}function Ft(t){return new Et(t>>16&255,t>>8&255,255&t,1)}function Nt(t,e,i,n){return n<=0&&(t=e=i=NaN),new Et(t,e,i,n)}function Tt(t){return t instanceof wt||(t=jt(t)),t?new Et((t=t.rgb()).r,t.g,t.b,t.opacity):new Et}function Ut(t,e,i,n){return 1===arguments.length?Tt(t):new Et(t,e,i,null==n?1:n)}function Et(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function At(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function Ot(){const t=Pt(this.opacity);return`${1===t?"rgb(":"rgba("}${Kt(this.r)}, ${Kt(this.g)}, ${Kt(this.b)}${1===t?")":`, ${t})`}`}function Pt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Dt(t){return((t=Kt(t))<16?"0":"")+t.toString(16)}function Qt(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new $t(t,e,i,n)}function qt(t){if(t instanceof $t)return new $t(t.h,t.s,t.l,t.opacity);if(t instanceof wt||(t=jt(t)),!t)return new $t;if(t instanceof $t)return t;var e=(t=t.rgb()).r/255,i=t.g/255,n=t.b/255,a=Math.min(e,i,n),o=Math.max(e,i,n),r=NaN,s=o-a,l=(o+a)/2;return s?(r=e===o?(i-n)/s+6*(i<n):i===o?(n-e)/s+2:(e-i)/s+4,s/=l<.5?o+a:2-o-a,r*=60):s=l>0&&l<1?0:r,new $t(r,s,l,t.opacity)}function $t(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function te(t){return(t=(t||0)%360)<0?t+360:t}function ee(t){return Math.max(0,Math.min(1,t||0))}function ie(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}Zt(wt,jt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ht,formatHex:Ht,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return qt(this).formatHsl()},formatRgb:kt,toString:kt}),Zt(Et,Ut,Gt(wt,{brighter(t){return t=null==t?Xt:Math.pow(Xt,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Wt:Math.pow(Wt,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Et(Kt(this.r),Kt(this.g),Kt(this.b),Pt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:At,formatHex:At,formatHex8:function(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ot,toString:Ot})),Zt($t,(function(t,e,i,n){return 1===arguments.length?qt(t):new $t(t,e,i,null==n?1:n)}),Gt(wt,{brighter(t){return t=null==t?Xt:Math.pow(Xt,t),new $t(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Wt:Math.pow(Wt,t),new $t(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,a=2*i-n;return new Et(ie(t>=240?t-240:t+120,a,n),ie(t,a,n),ie(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new $t(te(this.h),ee(this.s),ee(this.l),Pt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Pt(this.opacity);return`${1===t?"hsl(":"hsla("}${te(this.h)}, ${100*ee(this.s)}%, ${100*ee(this.l)}%${1===t?")":`, ${t})`}`}}));var ne=t=>()=>t;function ae(t){return 1==(t=+t)?oe:function(e,i){return i-e?function(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(n){return Math.pow(t+n*e,i)}}(e,i,t):ne(isNaN(e)?i:e)}}function oe(t,e){var i=e-t;return i?function(t,e){return function(i){return t+i*e}}(t,i):ne(isNaN(t)?e:t)}var re=function t(e){var i=ae(e);function n(t,e){var n=i((t=Ut(t)).r,(e=Ut(e)).r),a=i(t.g,e.g),o=i(t.b,e.b),r=oe(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=a(e),t.b=o(e),t.opacity=r(e),t+""}}return n.gamma=t,n}(1);function se(t,e){e||(e=[]);var i,n=t?Math.min(e.length,t.length):0,a=e.slice();return function(o){for(i=0;i<n;++i)a[i]=t[i]*(1-o)+e[i]*o;return a}}function le(t,e){var i,n=e?e.length:0,a=t?Math.min(n,t.length):0,o=new Array(a),r=new Array(n);for(i=0;i<a;++i)o[i]=be(t[i],e[i]);for(;i<n;++i)r[i]=e[i];return function(t){for(i=0;i<a;++i)r[i]=o[i](t);return r}}function ce(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}}function ue(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function de(t,e){var i,n={},a={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=be(t[i],e[i]):a[i]=e[i];return function(t){for(i in n)a[i]=n[i](t);return a}}var he=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(he.source,"g");function me(t,e){var i,n,a,o=he.lastIndex=pe.lastIndex=0,r=-1,s=[],l=[];for(t+="",e+="";(i=he.exec(t))&&(n=pe.exec(e));)(a=n.index)>o&&(a=e.slice(o,a),s[r]?s[r]+=a:s[++r]=a),(i=i[0])===(n=n[0])?s[r]?s[r]+=n:s[++r]=n:(s[++r]=null,l.push({i:r,x:ue(i,n)})),o=pe.lastIndex;return o<e.length&&(a=e.slice(o),s[r]?s[r]+=a:s[++r]=a),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var i,n=0;n<e;++n)s[(i=l[n]).i]=i.x(t);return s.join("")})}function be(t,e){var i,n=typeof e;return null==e||"boolean"===n?ne(e):("number"===n?ue:"string"===n?(i=jt(e))?(e=i,re):me:e instanceof jt?re:e instanceof Date?ce:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?se:Array.isArray(e)?le:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?de:ue)(t,e)}function ye(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}const fe=Math.PI,ge=2*fe,Ie=1e-6,ve=ge-Ie;function xe(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ze(){return new xe}function Ge(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function we(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]}function We(t){return(t=we(Math.abs(t)))?t[1]:NaN}xe.prototype=Ze.prototype={constructor:xe,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(t,e,i,n,a,o){this._+="C"+ +t+","+ +e+","+ +i+","+ +n+","+(this._x1=+a)+","+(this._y1=+o)},arcTo:function(t,e,i,n,a){t=+t,e=+e,i=+i,n=+n,a=+a;var o=this._x1,r=this._y1,s=i-t,l=n-e,c=o-t,u=r-e,d=c*c+u*u;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>Ie)if(Math.abs(u*s-l*c)>Ie&&a){var h=i-o,p=n-r,m=s*s+l*l,b=h*h+p*p,y=Math.sqrt(m),f=Math.sqrt(d),g=a*Math.tan((fe-Math.acos((m+d-b)/(2*y*f)))/2),I=g/f,v=g/y;Math.abs(I-1)>Ie&&(this._+="L"+(t+I*c)+","+(e+I*u)),this._+="A"+a+","+a+",0,0,"+ +(u*h>c*p)+","+(this._x1=t+v*s)+","+(this._y1=e+v*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,i,n,a,o){t=+t,e=+e,o=!!o;var r=(i=+i)*Math.cos(n),s=i*Math.sin(n),l=t+r,c=e+s,u=1^o,d=o?n-a:a-n;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Ie||Math.abs(this._y1-c)>Ie)&&(this._+="L"+l+","+c),i&&(d<0&&(d=d%ge+ge),d>ve?this._+="A"+i+","+i+",0,1,"+u+","+(t-r)+","+(e-s)+"A"+i+","+i+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):d>Ie&&(this._+="A"+i+","+i+",0,"+ +(d>=fe)+","+u+","+(this._x1=t+i*Math.cos(a))+","+(this._y1=e+i*Math.sin(a))))},rect:function(t,e,i,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};var Xe,_e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ve(t){if(!(e=_e.exec(t)))throw new Error("invalid format: "+t);var e;return new Se({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Se(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Be(t,e){var i=we(t,e);if(!i)return t+"";var n=i[0],a=i[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}Ve.prototype=Se.prototype,Se.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Le={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Be(100*t,e),r:Be,s:function(t,e){var i=we(t,e);if(!i)return t+"";var n=i[0],a=i[1],o=a-(Xe=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,r=n.length;return o===r?n:o>r?n+new Array(o-r+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+we(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ye(t){return t}var ze,Re,Ce,Me=Array.prototype.map,Je=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function He(t){var e,i,n=void 0===t.grouping||void 0===t.thousands?Ye:(e=Me.call(t.grouping,Number),i=t.thousands+"",function(t,n){for(var a=t.length,o=[],r=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(t.substring(a-=s,a+s)),!((l+=s+1)>n));)s=e[r=(r+1)%e.length];return o.reverse().join(i)}),a=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",r=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Ye:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Me.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=Ve(t)).fill,i=t.align,d=t.sign,h=t.symbol,p=t.zero,m=t.width,b=t.comma,y=t.precision,f=t.trim,g=t.type;"n"===g?(b=!0,g="g"):Le[g]||(void 0===y&&(y=12),f=!0,g="g"),(p||"0"===e&&"="===i)&&(p=!0,e="0",i="=");var I="$"===h?a:"#"===h&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",v="$"===h?o:/[%p]/.test(g)?l:"",x=Le[g],Z=/[defgprs%]/.test(g);function G(t){var a,o,l,h=I,G=v;if("c"===g)G=x(t)+G,t="";else{var w=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),y),f&&(t=function(t){t:for(var e,i=t.length,n=1,a=-1;n<i;++n)switch(t[n]){case".":a=e=n;break;case"0":0===a&&(a=n),e=n;break;default:if(!+t[n])break t;a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(e+1):t}(t)),w&&0==+t&&"+"!==d&&(w=!1),h=(w?"("===d?d:c:"-"===d||"("===d?"":d)+h,G=("s"===g?Je[8+Xe/3]:"")+G+(w&&"("===d?")":""),Z)for(a=-1,o=t.length;++a<o;)if(48>(l=t.charCodeAt(a))||l>57){G=(46===l?r+t.slice(a+1):t.slice(a))+G,t=t.slice(0,a);break}}b&&!p&&(t=n(t,1/0));var W=h.length+t.length+G.length,X=W<m?new Array(m-W+1).join(e):"";switch(b&&p&&(t=n(X+t,X.length?m-G.length:1/0),X=""),i){case"<":t=h+t+G+X;break;case"=":t=h+X+t+G;break;case"^":t=X.slice(0,W=X.length>>1)+h+t+G+X.slice(W);break;default:t=X+h+t+G}return s(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),G.toString=function(){return t+""},G}return{format:d,formatPrefix:function(t,e){var i=d(((t=Ve(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(We(e)/3))),a=Math.pow(10,-n),o=Je[8+n/3];return function(t){return i(a*t)+o}}}}function ke(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}ze=He({thousands:",",grouping:[3],currency:["$",""]}),Re=ze.format,Ce=ze.formatPrefix;const je=Symbol("implicit");function Fe(){var t=new mt,e=[],i=[],n=je;function a(a){let o=t.get(a);if(void 0===o){if(n!==je)return n;t.set(a,o=e.push(a)-1)}return i[o%i.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new mt;for(const n of i)t.has(n)||t.set(n,e.push(n)-1);return a},a.range=function(t){return arguments.length?(i=Array.from(t),a):i.slice()},a.unknown=function(t){return arguments.length?(n=t,a):n},a.copy=function(){return Fe(e,i).unknown(n)},ke.apply(a,arguments),a}function Ne(){var t,e,i=Fe().unknown(void 0),n=i.domain,a=i.range,o=0,r=1,s=!1,l=0,c=0,u=.5;function d(){var i=n().length,d=r<o,h=d?r:o,p=d?o:r;t=(p-h)/Math.max(1,i-l+2*c),s&&(t=Math.floor(t)),h+=(p-h-t*(i-l))*u,e=t*(1-l),s&&(h=Math.round(h),e=Math.round(e));var m=xt(i).map((function(e){return h+t*e}));return a(d?m.reverse():m)}return delete i.unknown,i.domain=function(t){return arguments.length?(n(t),d()):n()},i.range=function(t){return arguments.length?([o,r]=t,o=+o,r=+r,d()):[o,r]},i.rangeRound=function(t){return[o,r]=t,o=+o,r=+r,s=!0,d()},i.bandwidth=function(){return e},i.step=function(){return t},i.round=function(t){return arguments.length?(s=!!t,d()):s},i.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),d()):l},i.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),d()):l},i.paddingOuter=function(t){return arguments.length?(c=+t,d()):c},i.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),d()):u},i.copy=function(){return Ne(n(),[o,r]).round(s).paddingInner(l).paddingOuter(c).align(u)},ke.apply(d(),arguments)}function Te(t){return+t}var Ue=[0,1];function Ee(t){return t}function Ae(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Oe(t,e,i){var n=t[0],a=t[1],o=e[0],r=e[1];return a<n?(n=Ae(a,n),o=i(r,o)):(n=Ae(n,a),o=i(o,r)),function(t){return o(n(t))}}function Pe(t,e,i){var n=Math.min(t.length,e.length)-1,a=new Array(n),o=new Array(n),r=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++r<n;)a[r]=Ae(t[r],t[r+1]),o[r]=i(e[r],e[r+1]);return function(e){var i=pt(t,e,1,n)-1;return o[i](a[i](e))}}function Ke(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function De(){var t,e,i,n,a,o,r=Ue,s=Ue,l=be,c=Ee;function u(){var t=Math.min(r.length,s.length);return c!==Ee&&(c=function(t,e){var i;return t>e&&(i=t,t=e,e=i),function(i){return Math.max(t,Math.min(e,i))}}(r[0],r[t-1])),n=t>2?Pe:Oe,a=o=null,d}function d(e){return null==e||isNaN(e=+e)?i:(a||(a=n(r.map(t),s,l)))(t(c(e)))}return d.invert=function(i){return c(e((o||(o=n(s,r.map(t),ue)))(i)))},d.domain=function(t){return arguments.length?(r=Array.from(t,Te),u()):r.slice()},d.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},d.rangeRound=function(t){return s=Array.from(t),l=ye,u()},d.clamp=function(t){return arguments.length?(c=!!t||Ee,u()):c!==Ee},d.interpolate=function(t){return arguments.length?(l=t,u()):l},d.unknown=function(t){return arguments.length?(i=t,d):i},function(i,n){return t=i,e=n,u()}}function Qe(){return De()(Ee,Ee)}function qe(t,e,i,n){var a,o=function(t,e,i){var n=Math.abs(e-t)/Math.max(0,i),a=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/a;return o>=ft?a*=10:o>=gt?a*=5:o>=It&&(a*=2),e<t?-a:a}(t,e,i);switch((n=Ve(null==n?",f":n)).type){case"s":var r=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(a=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(We(e)/3)))-We(Math.abs(t)))}(o,r))||(n.precision=a),Ce(n,r);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,We(e)-We(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(t){return Math.max(0,-We(Math.abs(t)))}(o))||(n.precision=a-2*("%"===n.type))}return Re(n)}function $e(t){var e=t.domain;return t.ticks=function(t){var i=e();return function(t,e,i){var n,a,o,r,s=-1;if(i=+i,(t=+t)==(e=+e)&&i>0)return[t];if((n=e<t)&&(a=t,t=e,e=a),0===(r=vt(t,e,i))||!isFinite(r))return[];if(r>0){let i=Math.round(t/r),n=Math.round(e/r);for(i*r<t&&++i,n*r>e&&--n,o=new Array(a=n-i+1);++s<a;)o[s]=(i+s)*r}else{r=-r;let i=Math.round(t*r),n=Math.round(e*r);for(i/r<t&&++i,n/r>e&&--n,o=new Array(a=n-i+1);++s<a;)o[s]=(i+s)/r}return n&&o.reverse(),o}(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,i){var n=e();return qe(n[0],n[n.length-1],null==t?10:t,i)},t.nice=function(i){null==i&&(i=10);var n,a,o=e(),r=0,s=o.length-1,l=o[r],c=o[s],u=10;for(c<l&&(a=l,l=c,c=a,a=r,r=s,s=a);u-- >0;){if((a=vt(l,c,i))===n)return o[r]=l,o[s]=c,e(o);if(a>0)l=Math.floor(l/a)*a,c=Math.ceil(c/a)*a;else{if(!(a<0))break;l=Math.ceil(l*a)/a,c=Math.floor(c*a)/a}n=a}return t},t}function ti(){var t=Qe();return t.copy=function(){return Ke(t,ti())},ke.apply(t,arguments),$e(t)}function ei(t){return function(){return t}}function ii(t){this._context=t}function ni(t){return new ii(t)}function ai(t){return t[0]}function oi(t){return t[1]}function ri(t,e){var i=ei(!0),n=null,a=ni,o=null;function r(r){var s,l,c,u=(r=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(r)).length,d=!1;for(null==n&&(o=a(c=Ze())),s=0;s<=u;++s)!(s<u&&i(l=r[s],s,r))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(l,s,r),+e(l,s,r));if(c)return o=null,c+""||null}return t="function"==typeof t?t:void 0===t?ai:ei(t),e="function"==typeof e?e:void 0===e?oi:ei(e),r.x=function(e){return arguments.length?(t="function"==typeof e?e:ei(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:ei(+t),r):e},r.defined=function(t){return arguments.length?(i="function"==typeof t?t:ei(!!t),r):i},r.curve=function(t){return arguments.length?(a=t,null!=n&&(o=a(n)),r):a},r.context=function(t){return arguments.length?(null==t?n=o=null:o=a(n=t),r):n},r}function si(t,e,i){this.k=t,this.x=e,this.y=i}ii.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},si.prototype={constructor:si,scale:function(t){return 1===t?this:new si(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new si(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new si(1,0,0),si.prototype;var li={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions.  The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_symbol:{type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns a [`ResolvedImage`](/mapbox-gl-js/style-spec/types/#resolvedimage) for use in [`icon-image`](/mapbox-gl-js/style-spec/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression. A [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Returns the feature properties object.  Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Returns the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},projection:{name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate Carrée projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be marked as transparent to make a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0",macos:"10.5.0"}},"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0° is directly above, at zenith, and 90° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0° is directly above, at zenith, and 90° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}},ci="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ui(t){var e={exports:{}};return t(e,e.exports),e.exports}
/*! https://mths.be/punycode v1.3.2 by @mathias */
var di=ui((function(t,e){!function(i){var n=e&&!e.nodeType&&e,a=t&&!t.nodeType&&t,o="object"==typeof ci&&ci;o.global!==o&&o.window!==o&&o.self!==o||(i=o);var r,s,l=2147483647,c=36,u=/^xn--/,d=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,b=String.fromCharCode;function y(t){throw RangeError(p[t])}function f(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function g(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+f((t=t.replace(h,".")).split("."),e).join(".")}function I(t){for(var e,i,n=[],a=0,o=t.length;a<o;)(e=t.charCodeAt(a++))>=55296&&e<=56319&&a<o?56320==(64512&(i=t.charCodeAt(a++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),a--):n.push(e);return n}function v(t){return f(t,(function(t){var e="";return t>65535&&(e+=b((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=b(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function Z(t,e,i){var n=0;for(t=i?m(t/700):t>>1,t+=m(t/e);t>455;n+=c)t=m(t/35);return m(n+36*t/(t+38))}function G(t){var e,i,n,a,o,r,s,u,d,h,p,b=[],f=t.length,g=0,I=128,x=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&y("not-basic"),b.push(t.charCodeAt(n));for(a=i>0?i+1:0;a<f;){for(o=g,r=1,s=c;a>=f&&y("invalid-input"),((u=(p=t.charCodeAt(a++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:c)>=c||u>m((l-g)/r))&&y("overflow"),g+=u*r,!(u<(d=s<=x?1:s>=x+26?26:s-x));s+=c)r>m(l/(h=c-d))&&y("overflow"),r*=h;x=Z(g-o,e=b.length+1,0==o),m(g/e)>l-I&&y("overflow"),I+=m(g/e),g%=e,b.splice(g++,0,I)}return v(b)}function w(t){var e,i,n,a,o,r,s,u,d,h,p,f,g,v,G,w=[];for(f=(t=I(t)).length,e=128,i=0,o=72,r=0;r<f;++r)(p=t[r])<128&&w.push(b(p));for(n=a=w.length,a&&w.push("-");n<f;){for(s=l,r=0;r<f;++r)(p=t[r])>=e&&p<s&&(s=p);for(s-e>m((l-i)/(g=n+1))&&y("overflow"),i+=(s-e)*g,e=s,r=0;r<f;++r)if((p=t[r])<e&&++i>l&&y("overflow"),p==e){for(u=i,d=c;!(u<(h=d<=o?1:d>=o+26?26:d-o));d+=c)G=u-h,v=c-h,w.push(b(x(h+G%v,0))),u=m(G/v);w.push(b(x(u,0))),o=Z(i,g,n==a),i=0,++n}++i,++e}return w.join("")}if(r={version:"1.3.2",ucs2:{decode:I,encode:v},decode:G,encode:w,toASCII:function(t){return g(t,(function(t){return d.test(t)?"xn--"+w(t):t}))},toUnicode:function(t){return g(t,(function(t){return u.test(t)?G(t.slice(4).toLowerCase()):t}))}},n&&a)if(t.exports==n)a.exports=r;else for(s in r)r.hasOwnProperty(s)&&(n[s]=r[s]);else i.punycode=r}(ci)})),hi=function(t){return"string"==typeof t},pi=function(t){return"object"==typeof t&&null!==t},mi=function(t){return null===t},bi=function(t){return null==t};function yi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var fi=function(t,e,i,n){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var o=/\+/g;t=t.split(e);var r=1e3;n&&"number"==typeof n.maxKeys&&(r=n.maxKeys);var s=t.length;r>0&&s>r&&(s=r);for(var l=0;l<s;++l){var c,u,d,h,p=t[l].replace(o,"%20"),m=p.indexOf(i);m>=0?(c=p.substr(0,m),u=p.substr(m+1)):(c=p,u=""),d=decodeURIComponent(c),h=decodeURIComponent(u),yi(a,d)?Array.isArray(a[d])?a[d].push(h):a[d]=[a[d],h]:a[d]=h}return a},gi=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},Ii=function(t,e,i,n){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var a=encodeURIComponent(gi(n))+i;return Array.isArray(t[n])?t[n].map((function(t){return a+encodeURIComponent(gi(t))})).join(e):a+encodeURIComponent(gi(t[n]))})).join(e):n?encodeURIComponent(gi(n))+i+encodeURIComponent(gi(t)):""},vi=ui((function(t,e){e.decode=e.parse=fi,e.encode=e.stringify=Ii})),xi=ki,Zi=function(t,e){return ki(t,!1,!0).resolve(e)},Gi=function(t,e){return t?ki(t,!1,!0).resolveObject(e):e},wi=function(t){hi(t)&&(t=ki(t));return t instanceof Xi?t.format():Xi.prototype.format.call(t)},Wi=Xi;function Xi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var _i=/^([a-z0-9.+-]+:)/i,Vi=/:[0-9]*$/,Si=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Bi=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Li=["'"].concat(Bi),Yi=["%","/","?",";","#"].concat(Li),zi=["/","?","#"],Ri=/^[+a-z0-9A-Z_-]{0,63}$/,Ci=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Mi={javascript:!0,"javascript:":!0},Ji={javascript:!0,"javascript:":!0},Hi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ki(t,e,i){if(t&&pi(t)&&t instanceof Xi)return t;var n=new Xi;return n.parse(t,e,i),n}Xi.prototype.parse=function(t,e,i){if(!hi(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),a=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(a);o[0]=o[0].replace(/\\/g,"/");var r=t=o.join(a);if(r=r.trim(),!i&&1===t.split("#").length){var s=Si.exec(r);if(s)return this.path=r,this.href=r,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?vi.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=_i.exec(r);if(l){var c=(l=l[0]).toLowerCase();this.protocol=c,r=r.substr(l.length)}if(i||l||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===r.substr(0,2);!u||l&&Ji[l]||(r=r.substr(2),this.slashes=!0)}if(!Ji[l]&&(u||l&&!Hi[l])){for(var d,h,p=-1,m=0;m<zi.length;m++){-1!==(b=r.indexOf(zi[m]))&&(-1===p||b<p)&&(p=b)}-1!==(h=-1===p?r.lastIndexOf("@"):r.lastIndexOf("@",p))&&(d=r.slice(0,h),r=r.slice(h+1),this.auth=decodeURIComponent(d)),p=-1;for(m=0;m<Yi.length;m++){var b;-1!==(b=r.indexOf(Yi[m]))&&(-1===p||b<p)&&(p=b)}-1===p&&(p=r.length),this.host=r.slice(0,p),r=r.slice(p),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var f=this.hostname.split(/\./),g=(m=0,f.length);m<g;m++){var I=f[m];if(I&&!I.match(Ri)){for(var v="",x=0,Z=I.length;x<Z;x++)I.charCodeAt(x)>127?v+="x":v+=I[x];if(!v.match(Ri)){var G=f.slice(0,m),w=f.slice(m+1),W=I.match(Ci);W&&(G.push(W[1]),w.unshift(W[2])),w.length&&(r="/"+w.join(".")+r),this.hostname=G.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=di.toASCII(this.hostname));var X=this.port?":"+this.port:"",_=this.hostname||"";this.host=_+X,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!Mi[c])for(m=0,g=Li.length;m<g;m++){var V=Li[m];if(-1!==r.indexOf(V)){var S=encodeURIComponent(V);S===V&&(S=escape(V)),r=r.split(V).join(S)}}var B=r.indexOf("#");-1!==B&&(this.hash=r.substr(B),r=r.slice(0,B));var L=r.indexOf("?");if(-1!==L?(this.search=r.substr(L),this.query=r.substr(L+1),e&&(this.query=vi.parse(this.query)),r=r.slice(0,L)):e&&(this.search="",this.query={}),r&&(this.pathname=r),Hi[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){X=this.pathname||"";var Y=this.search||"";this.path=X+Y}return this.href=this.format(),this},Xi.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",a=!1,o="";this.host?a=t+this.host:this.hostname&&(a=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&pi(this.query)&&Object.keys(this.query).length&&(o=vi.stringify(this.query));var r=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||Hi[e])&&!1!==a?(a="//"+(a||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),e+a+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(r=r.replace("#","%23"))+n},Xi.prototype.resolve=function(t){return this.resolveObject(ki(t,!1,!0)).format()},Xi.prototype.resolveObject=function(t){if(hi(t)){var e=new Xi;e.parse(t,!1,!0),t=e}for(var i=new Xi,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var r=Object.keys(t),s=0;s<r.length;s++){var l=r[s];"protocol"!==l&&(i[l]=t[l])}return Hi[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!Hi[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||Ji[t.protocol])i.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),i.pathname=h.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var p=i.pathname||"",m=i.search||"";i.path=p+m}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var b=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=y||b||i.host&&t.pathname,g=f,I=i.pathname&&i.pathname.split("/")||[],v=(h=t.pathname&&t.pathname.split("/")||[],i.protocol&&!Hi[i.protocol]);if(v&&(i.hostname="",i.port=null,i.host&&(""===I[0]?I[0]=i.host:I.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),f=f&&(""===h[0]||""===I[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,I=h;else if(h.length)I||(I=[]),I.pop(),I=I.concat(h),i.search=t.search,i.query=t.query;else if(!bi(t.search)){if(v)i.hostname=i.host=I.shift(),(W=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=W.shift(),i.host=i.hostname=W.shift());return i.search=t.search,i.query=t.query,mi(i.pathname)&&mi(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!I.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var x=I.slice(-1)[0],Z=(i.host||t.host||I.length>1)&&("."===x||".."===x)||""===x,G=0,w=I.length;w>=0;w--)"."===(x=I[w])?I.splice(w,1):".."===x?(I.splice(w,1),G++):G&&(I.splice(w,1),G--);if(!f&&!g)for(;G--;G)I.unshift("..");!f||""===I[0]||I[0]&&"/"===I[0].charAt(0)||I.unshift(""),Z&&"/"!==I.join("/").substr(-1)&&I.push("");var W,X=""===I[0]||I[0]&&"/"===I[0].charAt(0);v&&(i.hostname=i.host=X?"":I.length?I.shift():"",(W=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=W.shift(),i.host=i.hostname=W.shift()));return(f=f||i.host&&I.length)&&!X&&I.unshift(""),I.length?i.pathname=I.join("/"):(i.pathname=null,i.path=null),mi(i.pathname)&&mi(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},Xi.prototype.parseHost=function(){var t=this.host,e=Vi.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var ji={parse:xi,resolve:Zi,resolveObject:Gi,format:wi,Url:Wi};function Fi(t){for(let e=0;e<li.layout.length;e++)for(const i in li[li.layout[e]])if(i===t)return li[li.layout[e]][i];for(let e=0;e<li.paint.length;e++)for(const i in li[li.paint[e]])if(i===t)return li[li.paint[e]][i];return null}function Ni(t,e){for(const i of t.layers)e(i)}function Ti(t,e,i){function n(t,e){const n=t[e];n&&Object.keys(n).forEach((a=>{i({path:[t.id,e,a],key:a,value:n[a],reference:Fi(a),set(t){n[a]=t}})}))}Ni(t,(t=>{e.paint&&n(t,"paint"),e.layout&&n(t,"layout")}))}function Ui(t,e){for(const i in t)0===i.indexOf("layout")&&e(t[i],i)}function Ei(t,e){for(const i in t)0===i.indexOf("paint")&&e(t[i],i)}function Ai(t,e){return"string"==typeof e&&"@"===e[0]?Ai(t,t.constants[e]):e}function Oi(t,e,i){t[i]=t[e],delete t[e]}function Pi(t){t.version=8,function(t,e){for(const i in t.sources)e(t.sources[i])}(t,(t=>{"video"===t.type&&void 0!==t.url&&Oi(t,"url","urls"),"video"===t.type&&t.coordinates.forEach((t=>t.reverse()))})),Ni(t,(t=>{Ui(t,(t=>{void 0!==t["symbol-min-distance"]&&Oi(t,"symbol-min-distance","symbol-spacing")})),Ei(t,(t=>{void 0!==t["background-image"]&&Oi(t,"background-image","background-pattern"),void 0!==t["line-image"]&&Oi(t,"line-image","line-pattern"),void 0!==t["fill-image"]&&Oi(t,"fill-image","fill-pattern")}))})),Ti(t,{paint:!0,layout:!0},(e=>{const i=Ai(t,e.value);(function(t){return Array.isArray(t.stops)})(i)&&i.stops.forEach((e=>{e[1]=Ai(t,e[1])})),e.set(i)})),delete t.constants,Ni(t,(t=>{Ui(t,(t=>{delete t["text-max-size"],delete t["icon-max-size"]})),Ei(t,(e=>{e["text-size"]&&(t.layout||(t.layout={}),t.layout["text-size"]=e["text-size"],delete e["text-size"]),e["icon-size"]&&(t.layout||(t.layout={}),t.layout["icon-size"]=e["icon-size"],delete e["icon-size"])}))})),t.glyphs&&(t.glyphs=function(t){const e=ji.parse(t),i=e.pathname.split("/");return"mapbox:"!==e.protocol?t:"fontstack"===e.hostname?"mapbox://fonts/mapbox/{fontstack}/{range}.pbf":"fonts"===e.hostname?`mapbox://fonts/${i[2]}/{fontstack}/{range}.pbf`:void 0}(t.glyphs)),Ni(t,(t=>{Ui(t,(t=>{t["text-font"]&&(t["text-font"]=function(t){function e(t){return t.split(",").map((t=>t.trim()))}if(Array.isArray(t))return t;if("string"==typeof t)return e(t);if("object"==typeof t)return t.stops.forEach((t=>{t[1]=e(t[1])})),t;throw new Error("unexpected font value")}(t["text-font"]))}))}));let e=0;for(let i=t.layers.length-1;i>=0;i--){if("symbol"!==t.layers[i].type){e=i+1;break}}const i=t.layers.splice(e);return i.reverse(),t.layers=t.layers.concat(i),t}function Ki(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}class Di extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var Qi=Di;class qi{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,i]of e)this.bindings[t]=i}concat(t){return new qi(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var $i=qi;const tn={kind:"null"},en={kind:"number"},nn={kind:"string"},an={kind:"boolean"},on={kind:"color"},rn={kind:"object"},sn={kind:"value"},ln={kind:"collator"},cn={kind:"formatted"},un={kind:"resolvedImage"};function dn(t,e){return{kind:"array",itemType:t,N:e}}function hn(t){if("array"===t.kind){const e=hn(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const pn=[tn,en,nn,an,on,cn,rn,dn(sn),un];function mn(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!mn(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of pn)if(!mn(t,e))return null}return`Expected ${hn(t)} but found ${hn(e)} instead.`}function bn(t,e){return e.some((e=>e.kind===t.kind))}function yn(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var fn=ui((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function a(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function r(t){return"%"===t[t.length-1]?a(parseFloat(t)/100):a(parseFloat(t))}function s(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,a=t.replace(/ /g,"").toLowerCase();if(a in i)return i[a].slice();if("#"===a[0])return 4===a.length?(e=parseInt(a.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===a.length&&(e=parseInt(a.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=a.indexOf("("),c=a.indexOf(")");if(-1!==l&&c+1===a.length){var u=a.substr(0,l),d=a.substr(l+1,c-(l+1)).split(","),h=1;switch(u){case"rgba":if(4!==d.length)return null;h=r(d.pop());case"rgb":return 3!==d.length?null:[o(d[0]),o(d[1]),o(d[2]),h];case"hsla":if(4!==d.length)return null;h=r(d.pop());case"hsl":if(3!==d.length)return null;var p=(parseFloat(d[0])%360+360)%360/360,m=r(d[1]),b=r(d[2]),y=b<=.5?b*(m+1):b+m-b*m,f=2*b-y;return[n(255*s(f,y,p+1/3)),n(255*s(f,y,p)),n(255*s(f,y,p-1/3)),h];default:return null}}return null}}catch(t){}}));class gn{constructor(t,e,i,n=1){this.r=t,this.g=e,this.b=i,this.a=n}static parse(t){if(!t)return;if(t instanceof gn)return t;if("string"!=typeof t)return;const e=fn.parseCSSColor(t);return e?new gn(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${n})`}toArray(){const{r:t,g:e,b:i,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*i/n,n]}toArray01(){const{r:t,g:e,b:i,a:n}=this;return 0===n?[0,0,0,0]:[t/n,e/n,i/n,n]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:i,a:n}=this;return[t,e,i,n]}}gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1),gn.blue=new gn(0,0,1,1);var In=gn;class vn{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class xn{constructor(t,e,i,n,a){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=a}}class Zn{constructor(t){this.sections=t}static fromString(t){return new Zn([new xn(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Zn?t:Zn.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const i={};e.fontStack&&(i["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(i["font-scale"]=e.scale),e.textColor&&(i["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(i)}return t}}class Gn{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Gn({name:t,available:!1}):null}serialize(){return["image",this.name]}}function wn(t,e,i,n){if(!("number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255)){return`Invalid rgba value [${("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}return void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,i,n].join(", ")}]: 'a' must be between 0 and 1.`}function Wn(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof In)return!0;if(t instanceof vn)return!0;if(t instanceof Zn)return!0;if(t instanceof Gn)return!0;if(Array.isArray(t)){for(const e of t)if(!Wn(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Wn(t[e]))return!1;return!0}return!1}function Xn(t){if(null===t)return tn;if("string"==typeof t)return nn;if("boolean"==typeof t)return an;if("number"==typeof t)return en;if(t instanceof In)return on;if(t instanceof vn)return ln;if(t instanceof Zn)return cn;if(t instanceof Gn)return un;if(Array.isArray(t)){const e=t.length;let i;for(const e of t){const t=Xn(e);if(i){if(i===t)continue;i=sn;break}i=t}return dn(i||sn,e)}return rn}function _n(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof In||t instanceof Zn||t instanceof Gn?t.toString():JSON.stringify(t)}class Vn{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Wn(t[1]))return e.error("invalid value");const i=t[1];let n=Xn(i);const a=e.expectedType;return"array"!==n.kind||0!==n.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(n=a),new Vn(n,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof In?["rgba"].concat(this.value.toArray()):this.value instanceof Zn?this.value.serialize():this.value}}var Sn=Vn;var Bn=class{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const Ln={string:nn,number:en,boolean:an,object:rn};class Yn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,n=1;const a=t[0];if("array"===a){let a,o;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in Ln)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=Ln[i],n++}else a=sn;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}i=dn(a,o)}else i=Ln[a];const o=[];for(;n<t.length;n++){const i=e.parse(t[n],n,sn);if(!i)return null;o.push(i)}return new Yn(i,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!mn(this.type,Xn(i)))return i;if(e===this.args.length-1)throw new Bn(`Expected value to be of type ${hn(this.type)}, but found ${hn(Xn(i))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((t=>t.serialize())))}}var zn=Yn;class Rn{constructor(t){this.type=cn,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const n=[];let a=!1;for(let i=1;i<=t.length-1;++i){const o=t[i];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,en),!t))return null;let i=null;if(o["text-font"]&&(i=e.parse(o["text-font"],1,dn(nn)),!i))return null;let r=null;if(o["text-color"]&&(r=e.parse(o["text-color"],1,on),!r))return null;const s=n[n.length-1];s.scale=t,s.font=i,s.textColor=r}else{const o=e.parse(t[i],1,sn);if(!o)return null;const r=o.type.kind;if("string"!==r&&"value"!==r&&"null"!==r&&"resolvedImage"!==r)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,n.push({content:o,scale:null,font:null,textColor:null})}}return new Rn(n)}evaluate(t){return new Zn(this.sections.map((e=>{const i=e.content.evaluate(t);return Xn(i)===un?new xn("",i,null,null,null):new xn(_n(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const i={};e.scale&&(i["font-scale"]=e.scale.serialize()),e.font&&(i["text-font"]=e.font.serialize()),e.textColor&&(i["text-color"]=e.textColor.serialize()),t.push(i)}return t}}class Cn{constructor(t){this.type=un,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,nn);return i?new Cn(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=Gn.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Mn={"to-boolean":an,"to-color":on,"to-number":en,"to-string":nn};class Jn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const n=Mn[i],a=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],i,sn);if(!n)return null;a.push(n)}return new Jn(n,a)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,i;for(const n of this.args){if(e=n.evaluate(t),i=null,e instanceof In)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:wn(e[0],e[1],e[2],e[3]),!i))return new In(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Bn(i||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new Bn(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Zn.fromString(_n(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Gn.fromString(_n(this.args[0].evaluate(t))):_n(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Rn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Cn(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Hn=Jn;const kn=["Unknown","Point","LineString","Polygon"];var jn=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?kn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:i,y:n}=this.featureTileCoord,a=i*e-t[0],o=n*e-t[1];return this.featureDistanceData.bearing[0]*a+this.featureDistanceData.bearing[1]*o}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=In.parse(t)),e}};class Fn{constructor(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const i=t[0],n=Fn.definitions[i];if(!n)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,r=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[n,o]of r){s=new ba(e.registry,e.path,null,e.scope);const r=[];let l=!1;for(let e=1;e<t.length;e++){const i=t[e],a=Array.isArray(n)?n[e-1]:n.type,o=s.parse(i,1+r.length,a);if(!o){l=!0;break}r.push(o)}if(!l)if(Array.isArray(n)&&n.length!==r.length)s.error(`Expected ${n.length} arguments, but found ${r.length} instead.`);else{for(let t=0;t<r.length;t++){const e=Array.isArray(n)?n[t]:n.type,i=r[t];s.concat(t+1).checkSubtype(e,i.type)}if(0===s.errors.length)return new Fn(i,a,o,r)}}if(1===r.length)e.errors.push(...s.errors);else{const i=(r.length?r:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(hn).join(", ")})`:`(${hn(e.type)}...)`;var e})).join(" | "),n=[];for(let i=1;i<t.length;i++){const a=e.parse(t[i],1+n.length);if(!a)return null;n.push(hn(a.type))}e.error(`Expected arguments of type ${i}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){Fn.definitions=e;for(const i in e)t[i]=Fn}}var Nn=Fn;class Tn{constructor(t,e,i){this.type=ln,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,an);if(!n)return null;const a=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,an);if(!a)return null;let o=null;return i.locale&&(o=e.parse(i.locale,1,nn),!o)?null:new Tn(n,a,o)}evaluate(t){return new vn(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Un=8192;function En(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function An(t,e){return!(t[0]<=e[0])&&(!(t[2]>=e[2])&&(!(t[1]<=e[1])&&!(t[3]>=e[3])))}function On(t,e){const i=(180+t[0])/360;const n=(a=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360);var a;const o=Math.pow(2,e.z);return[Math.round(i*o*Un),Math.round(n*o*Un)]}function Pn(t,e,i){const n=t[0]-e[0],a=t[1]-e[1],o=t[0]-i[0],r=t[1]-i[1];return n*r-o*a==0&&n*o<=0&&a*r<=0}function Kn(t,e){let i=!1;for(let r=0,s=e.length;r<s;r++){const s=e[r];for(let e=0,r=s.length;e<r-1;e++){if(Pn(t,s[e],s[e+1]))return!1;n=t,a=s[e],o=s[e+1],a[1]>n[1]!=o[1]>n[1]&&n[0]<(o[0]-a[0])*(n[1]-a[1])/(o[1]-a[1])+a[0]&&(i=!i)}}var n,a,o;return i}function Dn(t,e){for(let i=0;i<e.length;i++)if(Kn(t,e[i]))return!0;return!1}function Qn(t,e,i,n){const a=t[0]-i[0],o=t[1]-i[1],r=e[0]-i[0],s=e[1]-i[1],l=n[0]-i[0],c=n[1]-i[1],u=a*c-l*o,d=r*c-l*s;return u>0&&d<0||u<0&&d>0}function qn(t,e,i,n){const a=[e[0]-t[0],e[1]-t[1]],o=[n[0]-i[0],n[1]-i[1]];return 0!=(r=o)[0]*(s=a)[1]-r[1]*s[0]&&!(!Qn(t,e,i,n)||!Qn(i,n,t,e));var r,s}function $n(t,e,i){for(const n of i)for(let i=0;i<n.length-1;++i)if(qn(t,e,n[i],n[i+1]))return!0;return!1}function ta(t,e){for(let i=0;i<t.length;++i)if(!Kn(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if($n(t[i],t[i+1],e))return!1;return!0}function ea(t,e){for(let i=0;i<e.length;i++)if(ta(t,e[i]))return!0;return!1}function ia(t,e,i){const n=[];for(let a=0;a<t.length;a++){const o=[];for(let n=0;n<t[a].length;n++){const r=On(t[a][n],i);En(e,r),o.push(r)}n.push(o)}return n}function na(t,e,i){const n=[];for(let a=0;a<t.length;a++){const o=ia(t[a],e,i);n.push(o)}return n}function aa(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){const e=.5*n;let a=t[0]-i[0]>e?-n:i[0]-t[0]>e?n:0;0===a&&(a=t[0]-i[2]>e?-n:i[2]-t[0]>e?n:0),t[0]+=a}En(e,t)}function oa(t,e,i,n){const a=Math.pow(2,n.z)*Un,o=[n.x*Un,n.y*Un],r=[];if(!t)return r;for(const n of t)for(const t of n){const n=[t.x+o[0],t.y+o[1]];aa(n,e,i,a),r.push(n)}return r}function ra(t,e,i,n){const a=Math.pow(2,n.z)*Un,o=[n.x*Un,n.y*Un],r=[];if(!t)return r;for(const i of t){const t=[];for(const n of i){const i=[n.x+o[0],n.y+o[1]];En(e,i),t.push(i)}r.push(t)}if(e[2]-e[0]<=a/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of r)for(const n of t)aa(n,e,i,a)}var s;return r}class sa{constructor(t,e){this.type=an,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Wn(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const i=e.features[t].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new sa(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new sa(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new sa(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if(!a)return!1;if("Polygon"===e.type){const o=ia(e.coordinates,n,a),r=oa(t.geometry(),i,n,a);if(!An(i,n))return!1;for(const t of r)if(!Kn(t,o))return!1}if("MultiPolygon"===e.type){const o=na(e.coordinates,n,a),r=oa(t.geometry(),i,n,a);if(!An(i,n))return!1;for(const t of r)if(!Dn(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if(!a)return!1;if("Polygon"===e.type){const o=ia(e.coordinates,n,a),r=ra(t.geometry(),i,n,a);if(!An(i,n))return!1;for(const t of r)if(!ta(t,o))return!1}if("MultiPolygon"===e.type){const o=na(e.coordinates,n,a),r=ra(t.geometry(),i,n,a);if(!An(i,n))return!1;for(const t of r)if(!ea(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var la=sa;function ca(t){if(t instanceof Nn){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof la)return!1;let e=!0;return t.eachChild((t=>{e&&!ca(t)&&(e=!1)})),e}function ua(t){if(t instanceof Nn&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ua(t)&&(e=!1)})),e}function da(t,e){if(t instanceof Nn&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild((t=>{i&&!da(t,e)&&(i=!1)})),i}class ha{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new ha(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var pa=ha;class ma{constructor(t,e=[],i,n=new $i,a=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=n,this.errors=a,this.expectedType=i}parse(t,e,i,n,a={}){return e?this.concat(e,i,n)._parse(t,a):this._parse(t,a)}_parse(t,e){function i(t,e,i){return"assert"===i?new zn(e,[t]):"coerce"===i?new Hn(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[n];if(a){let n=a.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,a=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==a.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(t,a))return null}else n=i(n,t,e.typeAnnotation||"coerce");else n=i(n,t,e.typeAnnotation||"assert")}if(!(n instanceof Sn)&&"resolvedImage"!==n.type.kind&&ya(n)){const t=new jn;try{n=new Sn(n.type,n.evaluate(t))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const n="number"==typeof t?this.path.concat(t):this.path,a=i?this.scope.concat(i):this.scope;return new ma(this.registry,n,e||null,a,this.errors)}error(t,...e){const i=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new Qi(i,t))}checkSubtype(t,e){const i=mn(t,e);return i&&this.error(i),i}}var ba=ma;function ya(t){if(t instanceof pa)return ya(t.boundExpression);if(t instanceof Nn&&"error"===t.name)return!1;if(t instanceof Tn)return!1;if(t instanceof la)return!1;const e=t instanceof Hn||t instanceof zn;let i=!0;return t.eachChild((t=>{i=e?i&&ya(t):i&&t instanceof Sn})),!!i&&(ca(t)&&da(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}function fa(t,e){const i=t.length-1;let n,a,o=0,r=i,s=0;for(;o<=r;)if(s=Math.floor((o+r)/2),n=t[s],a=t[s+1],n<=e){if(s===i||e<a)return s;o=s+1}else{if(!(n>e))throw new Bn("Input is not a number.");r=s-1}return 0}class ga{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,en);if(!i)return null;const n=[];let a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let i=1;i<t.length;i+=2){const o=1===i?-1/0:t[i],r=t[i+1],s=i,l=i+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(r,l,a);if(!c)return null;a=a||c.type,n.push([o,c])}return new ga(a,i,n)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const a=e.length;if(n>=e[a-1])return i[a-1].evaluate(t);return i[fa(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var Ia=ga,va=xa;function xa(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}function Za(t,e,i){return t*(1-i)+e*i}xa.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},xa.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},xa.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},xa.prototype.solveCurveX=function(t,e){var i,n,a,o,r;for(void 0===e&&(e=1e-6),a=t,r=0;r<8;r++){if(o=this.sampleCurveX(a)-t,Math.abs(o)<e)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a-=o/s}if((a=t)<(i=0))return i;if(a>(n=1))return n;for(;i<n;){if(o=this.sampleCurveX(a),Math.abs(o-t)<e)return a;t>o?i=a:n=a,a=.5*(n-i)+i}return a},xa.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Ga=Object.freeze({__proto__:null,number:Za,color:function(t,e,i){return new In(Za(t.r,e.r,i),Za(t.g,e.g,i),Za(t.b,e.b,i),Za(t.a,e.a,i))},array:function(t,e,i){return t.map(((t,n)=>Za(t,e[n],i)))}});const wa=.95047,Wa=1.08883,Xa=4/29,_a=6/29,Va=3*_a*_a,Sa=Math.PI/180,Ba=180/Math.PI;function La(t){return t>.008856451679035631?Math.pow(t,1/3):t/Va+Xa}function Ya(t){return t>_a?t*t*t:Va*(t-Xa)}function za(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ra(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ca(t){const e=Ra(t.r),i=Ra(t.g),n=Ra(t.b),a=La((.4124564*e+.3575761*i+.1804375*n)/wa),o=La((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(a-o),b:200*(o-La((.0193339*e+.119192*i+.9503041*n)/Wa)),alpha:t.a}}function Ma(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Ya(e),i=wa*Ya(i),n=Wa*Ya(n),new In(za(3.2404542*i-1.5371385*e-.4985314*n),za(-.969266*i+1.8760108*e+.041556*n),za(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function Ja(t,e,i){const n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}const Ha={forward:Ca,reverse:Ma,interpolate:function(t,e,i){return{l:Za(t.l,e.l,i),a:Za(t.a,e.a,i),b:Za(t.b,e.b,i),alpha:Za(t.alpha,e.alpha,i)}}},ka={forward:function(t){const{l:e,a:i,b:n}=Ca(t),a=Math.atan2(n,i)*Ba;return{h:a<0?a+360:a,c:Math.sqrt(i*i+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Sa,i=t.c;return Ma({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:Ja(t.h,e.h,i),c:Za(t.c,e.c,i),l:Za(t.l,e.l,i),alpha:Za(t.alpha,e.alpha,i)}}};class ja{constructor(t,e,i,n,a){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of a)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,i,n){let a=0;if("exponential"===t.name)a=Fa(e,t.base,i,n);else if("linear"===t.name)a=Fa(e,1,i,n);else if("cubic-bezier"===t.name){const o=t.controlPoints;a=new va(o[0],o[1],o[2],o[3]).solve(Fa(e,1,i,n))}return a}static parse(t,e){let[i,n,a,...o]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(a=e.parse(a,2,en),!a)return null;const r=[];let s=null;"interpolate-hcl"===i||"interpolate-lab"===i?s=on:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const i=o[t],n=o[t+1],a=t+3,l=t+4;if("number"!=typeof i)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=i)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',a);const c=e.parse(n,l,s);if(!c)return null;s=s||c.type,r.push([i,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new ja(s,i,n,a,r):e.error(`Type ${hn(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const a=e.length;if(n>=e[a-1])return i[a-1].evaluate(t);const o=fa(e,n),r=e[o],s=e[o+1],l=ja.interpolationFactor(this.interpolation,n,r,s),c=i[o].evaluate(t),u=i[o+1].evaluate(t);return"interpolate"===this.operator?Ga[this.type.kind.toLowerCase()](c,u,l):"interpolate-hcl"===this.operator?ka.reverse(ka.interpolate(ka.forward(c),ka.forward(u),l)):Ha.reverse(Ha.interpolate(Ha.forward(c),Ha.forward(u),l))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function Fa(t,e,i,n){const a=n-i,o=t-i;return 0===a?0:1===e?o/a:(Math.pow(e,o)-1)/(Math.pow(e,a)-1)}var Na=ja;class Ta{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const n=e.expectedType;n&&"value"!==n.kind&&(i=n);const a=[];for(const n of t.slice(1)){const t=e.parse(n,1+a.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,a.push(t)}const o=n&&a.some((t=>mn(n,t.type)));return new Ta(o?sn:i,a)}evaluate(t){let e,i=null,n=0;for(const a of this.args){if(n++,i=a.evaluate(t),i&&i instanceof Gn&&!i.available&&(e||(e=i),i=null,n===this.args.length))return e;if(null!==i)break}return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var Ua=Ta;class Ea{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let n=1;n<t.length-1;n+=2){const a=t[n];if("string"!=typeof a)return e.error(`Expected string, but found ${typeof a} instead.`,n);if(/[^a-zA-Z0-9_]/.test(a))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=e.parse(t[n+1],n+1);if(!o)return null;i.push([a,o])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return n?new Ea(i,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,i]of this.bindings)t.push(e,i.serialize());return t.push(this.result.serialize()),t}}var Aa=Ea;class Oa{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,en),n=e.parse(t[2],2,dn(e.expectedType||sn));if(!i||!n)return null;const a=n.type;return new Oa(a.itemType,i,n)}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new Bn(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new Bn(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new Bn(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Pa=Oa;class Ka{constructor(t,e){this.type=an,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,sn),n=e.parse(t[2],2,sn);return i&&n?bn(i.type,[an,nn,en,tn,sn])?new Ka(i,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${hn(i.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(null==i)return!1;if(!yn(e,["boolean","string","number","null"]))throw new Bn(`Expected first argument to be of type boolean, string, number or null, but found ${hn(Xn(e))} instead.`);if(!yn(i,["string","array"]))throw new Bn(`Expected second argument to be of type array or string, but found ${hn(Xn(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Da=Ka;class Qa{constructor(t,e,i){this.type=en,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,sn),n=e.parse(t[2],2,sn);if(!i||!n)return null;if(!bn(i.type,[an,nn,en,tn,sn]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${hn(i.type)} instead`);if(4===t.length){const a=e.parse(t[3],3,en);return a?new Qa(i,n,a):null}return new Qa(i,n)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!yn(e,["boolean","string","number","null"]))throw new Bn(`Expected first argument to be of type boolean, string, number or null, but found ${hn(Xn(e))} instead.`);if(!yn(i,["string","array"]))throw new Bn(`Expected second argument to be of type array or string, but found ${hn(Xn(i))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var qa=Qa;class $a{constructor(t,e,i,n,a,o){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=a,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const a={},o=[];for(let r=2;r<t.length-1;r+=2){let s=t[r];const l=t[r+1];Array.isArray(s)||(s=[s]);const c=e.concat(r);if(0===s.length)return c.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,Xn(t)))return null}else i=Xn(t);if(void 0!==a[String(t)])return c.error("Branch labels must be unique.");a[String(t)]=o.length}const u=e.parse(l,r,n);if(!u)return null;n=n||u.type,o.push(u)}const r=e.parse(t[1],1,sn);if(!r)return null;const s=e.parse(t[t.length-1],t.length-1,n);return s?"value"!==r.type.kind&&e.concat(1).checkSubtype(i,r.type)?null:new $a(i,n,r,a,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(Xn(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),i=[],n={};for(const t of e){const e=n[this.cases[t]];void 0===e?(n[this.cases[t]]=i.length,i.push([this.cases[t],[t]])):i[e][1].push(t)}const a=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,n]of i)1===n.length?t.push(a(n[0])):t.push(n.map(a)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}var to=$a;class eo{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const n=[];for(let a=1;a<t.length-1;a+=2){const o=e.parse(t[a],a,an);if(!o)return null;const r=e.parse(t[a+1],a+1,i);if(!r)return null;n.push([o,r]),i=i||r.type}const a=e.parse(t[t.length-1],t.length-1,i);return a?new eo(i,n,a):null}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}var io=eo;class no{constructor(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,sn),n=e.parse(t[2],2,en);if(!i||!n)return null;if(!bn(i.type,[dn(sn),nn,sn]))return e.error(`Expected first argument to be of type array or string, but found ${hn(i.type)} instead`);if(4===t.length){const a=e.parse(t[3],3,en);return a?new no(i.type,i,n,a):null}return new no(i.type,i,n)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!yn(e,["string","array"]))throw new Bn(`Expected first argument to be of type array or string, but found ${hn(Xn(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var ao=no;function oo(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ro(t,e,i,n){return 0===n.compare(e,i)}function so(t,e,i){const n="=="!==t&&"!="!==t;return class a{constructor(t,e,i){this.type=an,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let o=e.parse(t[1],1,sn);if(!o)return null;if(!oo(i,o.type))return e.concat(1).error(`"${i}" comparisons are not supported for type '${hn(o.type)}'.`);let r=e.parse(t[2],2,sn);if(!r)return null;if(!oo(i,r.type))return e.concat(2).error(`"${i}" comparisons are not supported for type '${hn(r.type)}'.`);if(o.type.kind!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return e.error(`Cannot compare types '${hn(o.type)}' and '${hn(r.type)}'.`);n&&("value"===o.type.kind&&"value"!==r.type.kind?o=new zn(r.type,[o]):"value"!==o.type.kind&&"value"===r.type.kind&&(r=new zn(o.type,[r])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,ln),!s)return null}return new a(o,r,s)}evaluate(a){const o=this.lhs.evaluate(a),r=this.rhs.evaluate(a);if(n&&this.hasUntypedArgument){const e=Xn(o),i=Xn(r);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new Bn(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${i.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=Xn(o),i=Xn(r);if("string"!==t.kind||"string"!==i.kind)return e(a,o,r)}return this.collator?i(a,o,r,this.collator.evaluate(a)):e(a,o,r)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const lo=so("==",(function(t,e,i){return e===i}),ro),co=so("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!ro(0,e,i,n)})),uo=so("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),ho=so(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),po=so("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0})),mo=so(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0}));class bo{constructor(t,e,i,n,a){this.type=nn,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=a}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,en);if(!i)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let a=null;if(n.locale&&(a=e.parse(n.locale,1,nn),!a))return null;let o=null;if(n.currency&&(o=e.parse(n.currency,1,nn),!o))return null;let r=null;if(n["min-fraction-digits"]&&(r=e.parse(n["min-fraction-digits"],1,en),!r))return null;let s=null;return n["max-fraction-digits"]&&(s=e.parse(n["max-fraction-digits"],1,en),!s)?null:new bo(i,a,o,r,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class yo{constructor(t){this.type=en,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${hn(i.type)} instead.`):new yo(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Bn(`Expected value to be of type string or array, but found ${hn(Xn(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const fo={"==":lo,"!=":co,">":ho,"<":uo,">=":mo,"<=":po,array:zn,at:Pa,boolean:zn,case:io,coalesce:Ua,collator:Tn,format:Rn,image:Cn,in:Da,"index-of":qa,interpolate:Na,"interpolate-hcl":Na,"interpolate-lab":Na,length:yo,let:Aa,literal:Sn,match:to,number:zn,"number-format":bo,object:zn,slice:ao,step:Ia,string:zn,"to-boolean":Hn,"to-color":Hn,"to-number":Hn,"to-string":Hn,var:pa,within:la};function go(t,[e,i,n,a]){e=e.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);const o=a?a.evaluate(t):1,r=wn(e,i,n,o);if(r)throw new Bn(r);return new In(e/255*o,i/255*o,n/255*o,o)}function Io(t,e){return t in e}function vo(t,e){const i=e[t];return void 0===i?null:i}function xo(t){return{type:t}}Nn.register(fo,{error:[{kind:"error"},[nn],(t,[e])=>{throw new Bn(e.evaluate(t))}],typeof:[nn,[sn],(t,[e])=>hn(Xn(e.evaluate(t)))],"to-rgba":[dn(en,4),[on],(t,[e])=>e.evaluate(t).toArray()],rgb:[on,[en,en,en],go],rgba:[on,[en,en,en,en],go],has:{type:an,overloads:[[[nn],(t,[e])=>Io(e.evaluate(t),t.properties())],[[nn,rn],(t,[e,i])=>Io(e.evaluate(t),i.evaluate(t))]]},get:{type:sn,overloads:[[[nn],(t,[e])=>vo(e.evaluate(t),t.properties())],[[nn,rn],(t,[e,i])=>vo(e.evaluate(t),i.evaluate(t))]]},"feature-state":[sn,[nn],(t,[e])=>vo(e.evaluate(t),t.featureState||{})],properties:[rn,[],t=>t.properties()],"geometry-type":[nn,[],t=>t.geometryType()],id:[sn,[],t=>t.id()],zoom:[en,[],t=>t.globals.zoom],pitch:[en,[],t=>t.globals.pitch||0],"distance-from-center":[en,[],t=>t.distanceFromCenter()],"heatmap-density":[en,[],t=>t.globals.heatmapDensity||0],"line-progress":[en,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[en,[],t=>t.globals.skyRadialProgress||0],accumulated:[sn,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[en,xo(en),(t,e)=>{let i=0;for(const n of e)i+=n.evaluate(t);return i}],"*":[en,xo(en),(t,e)=>{let i=1;for(const n of e)i*=n.evaluate(t);return i}],"-":{type:en,overloads:[[[en,en],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[en],(t,[e])=>-e.evaluate(t)]]},"/":[en,[en,en],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[en,[en,en],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[en,[],()=>Math.LN2],pi:[en,[],()=>Math.PI],e:[en,[],()=>Math.E],"^":[en,[en,en],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[en,[en],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[en,[en],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[en,[en],(t,[e])=>Math.log(e.evaluate(t))],log2:[en,[en],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[en,[en],(t,[e])=>Math.sin(e.evaluate(t))],cos:[en,[en],(t,[e])=>Math.cos(e.evaluate(t))],tan:[en,[en],(t,[e])=>Math.tan(e.evaluate(t))],asin:[en,[en],(t,[e])=>Math.asin(e.evaluate(t))],acos:[en,[en],(t,[e])=>Math.acos(e.evaluate(t))],atan:[en,[en],(t,[e])=>Math.atan(e.evaluate(t))],min:[en,xo(en),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[en,xo(en),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[en,[en],(t,[e])=>Math.abs(e.evaluate(t))],round:[en,[en],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[en,[en],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[en,[en],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[an,[nn,sn],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[an,[sn],(t,[e])=>t.id()===e.value],"filter-type-==":[an,[nn],(t,[e])=>t.geometryType()===e.value],"filter-<":[an,[nn,sn],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n<a}],"filter-id-<":[an,[sn],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<n}],"filter->":[an,[nn,sn],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n>a}],"filter-id->":[an,[sn],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>n}],"filter-<=":[an,[nn,sn],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[an,[sn],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<=n}],"filter->=":[an,[nn,sn],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[an,[sn],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>=n}],"filter-has":[an,[sn],(t,[e])=>e.value in t.properties()],"filter-has-id":[an,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[an,[dn(nn)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[an,[dn(sn)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[an,[nn,dn(sn)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[an,[nn,dn(sn)],(t,[e,i])=>function(t,e,i,n){for(;i<=n;){const a=i+n>>1;if(e[a]===t)return!0;e[a]>t?n=a-1:i=a+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:an,overloads:[[[an,an],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[xo(an),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:an,overloads:[[[an,an],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[xo(an),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[an,[an],(t,[e])=>!e.evaluate(t)],"is-supported-script":[an,[nn],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[nn,[nn],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[nn,[nn],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[nn,xo(sn),(t,e)=>e.map((e=>_n(e.evaluate(t)))).join("")],"resolved-locale":[nn,[ln],(t,[e])=>e.evaluate(t).resolvedLocale()]});var Zo=fo;function Go(t){return{result:"success",value:t}}function wo(t){return{result:"error",value:t}}function Wo(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Xo(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function _o(t){return!!t.expression&&t.expression.interpolated}function Vo(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function So(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}class Bo{constructor(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new jn,this._defaultValue=e?"color"===(i=e).type&&(So(i.default)||Array.isArray(i.default))?new In(0,0,0,0):"color"===i.type?In.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,n,a,o,r,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,n,a,o,r,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=r||null,this._evaluator.featureDistanceData=s||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Bn(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Lo(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Zo}function Yo(t,e){const i=new ba(Zo,[],e?function(t){const e={color:on,string:nn,number:en,enum:nn,boolean:an,formatted:cn,resolvedImage:un};if("array"===t.type)return dn(e[t.value]||sn,t.length);return e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Go(new Bo(n,e)):wo(i.errors)}class zo{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ua(e.expression)}evaluateWithoutErrorHandling(t,e,i,n,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,a,o)}evaluate(t,e,i,n,a,o){return this._styleExpression.evaluate(t,e,i,n,a,o)}}class Ro{constructor(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ua(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,i,n,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,a,o)}evaluate(t,e,i,n,a,o){return this._styleExpression.evaluate(t,e,i,n,a,o)}interpolationFactor(t,e,i){return this.interpolationType?Na.interpolationFactor(this.interpolationType,t,e,i):0}}function Co(t,e){if("error"===(t=Yo(t,e)).result)return t;const i=t.value.expression,n=ca(i);if(!n&&!Wo(e))return wo([new Qi("","data expressions not supported")]);const a=da(i,["zoom","pitch","distance-from-center"]);if(!a&&!Xo(e))return wo([new Qi("","zoom expressions not supported")]);const o=Mo(i);if(!o&&!a)return wo([new Qi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof Qi)return wo([o]);if(o instanceof Na&&!_o(e))return wo([new Qi("",'"interpolate" expressions cannot be used with this property')]);if(!o)return Go(new zo(n?"constant":"source",t.value));const r=o instanceof Na?o.interpolation:void 0;return Go(new Ro(n?"camera":"composite",t.value,o.labels,r))}function Mo(t){let e=null;if(t instanceof Aa)e=Mo(t.result);else if(t instanceof Ua){for(const i of t.args)if(e=Mo(i),e)break}else(t instanceof Ia||t instanceof Na)&&t.input instanceof Nn&&"zoom"===t.input.name&&(e=t);return e instanceof Qi||t.eachChild((t=>{const i=Mo(t);i instanceof Qi?e=i:!e&&i?e=new Qi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Qi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Jo(t){return"object"==typeof t?["literal",t]:t}function Ho(t,e){let i=t.stops;if(!i)return function(t,e){const i=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",i]:i;if("enum"===e.type)return["match",i,Object.keys(e.values),i,t.default];{const n=["color"===e.type?"to-color":e.type,i,Jo(t.default)];return"array"===e.type&&n.splice(1,0,e.value,e.length||null),n}}(t,e);const n=i&&"object"==typeof i[0][0],a=n||void 0!==t.property,o=n||!a;return i=i.map((t=>!a&&e.tokens&&"string"==typeof t[1]?[t[0],Eo(t[1])]:[t[0],Jo(t[1])])),n?function(t,e,i){const n={},a={},o=[];for(let e=0;e<i.length;e++){const r=i[e],s=r[0].zoom;void 0===n[s]&&(n[s]={zoom:s,type:t.type,property:t.property,default:t.default},a[s]=[],o.push(s)),a[s].push([r[0].value,r[1]])}if("exponential"===Uo({},e)){const i=[ko(t),["linear"],["zoom"]];for(const t of o){To(i,t,Fo(n[t],e,a[t]),!1)}return i}{const t=["step",["zoom"]];for(const i of o){To(t,i,Fo(n[i],e,a[i]),!0)}return No(t),t}}(t,e,i):o?function(t,e,i,n=["zoom"]){const a=Uo(t,e);let o,r=!1;if("interval"===a)o=["step",n],r=!0;else{if("exponential"!==a)throw new Error(`Unknown zoom function type "${a}"`);{const e=void 0!==t.base?t.base:1;o=[ko(t),1===e?["linear"]:["exponential",e],n]}}for(const t of i)To(o,t[0],t[1],r);return No(o),o}(t,e,i):Fo(t,e,i)}function ko(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function jo(t,e){const i=Jo((n=t.default,a=e.default,void 0!==n?n:void 0!==a?a:void 0));var n,a;return void 0===i&&"resolvedImage"===e.type?"":i}function Fo(t,e,i){const n=Uo(t,e),a=["get",t.property];if("categorical"===n&&"boolean"==typeof i[0][0]){const n=["case"];for(const t of i)n.push(["==",a,t[0]],t[1]);return n.push(jo(t,e)),n}if("categorical"===n){const n=["match",a];for(const t of i)To(n,t[0],t[1],!1);return n.push(jo(t,e)),n}if("interval"===n){const e=["step",["number",a]];for(const t of i)To(e,t[0],t[1],!0);return No(e),void 0===t.default?e:["case",["==",["typeof",a],"number"],e,Jo(t.default)]}if("exponential"===n){const e=void 0!==t.base?t.base:1,n=[ko(t),1===e?["linear"]:["exponential",e],["number",a]];for(const t of i)To(n,t[0],t[1],!1);return void 0===t.default?n:["case",["==",["typeof",a],"number"],n,Jo(t.default)]}throw new Error(`Unknown property function type ${n}`)}function No(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function To(t,e,i,n){t.length>3&&e===t[t.length-2]||(n&&2===t.length||t.push(e),t.push(i))}function Uo(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function Eo(t){const e=["concat"],i=/{([^{}]+)}/g;let n=0;for(let a=i.exec(t);null!==a;a=i.exec(t)){const o=t.slice(n,i.lastIndex-a[0].length);n=i.lastIndex,o.length>0&&e.push(o),e.push(["get",a[1]])}if(1===e.length)return t;if(n<t.length)e.push(t.slice(n));else if(2===e.length)return["to-string",e[1]];return e}function Ao(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Oo(t){if(Array.isArray(t))return t.map(Oo);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=Oo(t[i]);return e}return Ao(t)}function Po(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Po(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function Ko(t){return Do(t,{})}function Do(t,e){if(Po(t))return t;if(!t)return!0;const i=t[0];if(t.length<=1)return"any"!==i;let n;if("=="===i||"!="===i||"<"===i||">"===i||"<="===i||">="===i){const[,a,o]=t;n=function(t,e,i,n){let a;if("$type"===t)return[i,["geometry-type"],e];a="$id"===t?["id"]:["get",t];if(n&&null!==e){const i=typeof e;n[t]=i}if("=="===i&&"$id"!==t&&null===e)return["all",["has",t],["==",a,null]];if("!="===i&&"$id"!==t&&null===e)return["any",["!",["has",t]],["!=",a,null]];return[i,a,e]}(a,o,i,e)}else{if("any"===i){const e=t.slice(1).map((t=>{const e={},i=Do(t,e),n=function(t){const e=[];for(const i in t){const n="$id"===i?["id"]:["get",i];e.push(["==",["typeof",n],t[i]])}return 0===e.length||(1===e.length?e[0]:["all"].concat(e))}(e);return!0===n?i:["case",n,i,!1]}));return["any"].concat(e)}if("all"===i){const i=t.slice(1).map((t=>Do(t,e)));return i.length>1?["all"].concat(i):[].concat(...i)}if("none"===i)return["!",Do(["any"].concat(t.slice(1)),{})];n="in"===i?Qo(t[1],t.slice(2)):"!in"===i?Qo(t[1],t.slice(2),!0):"has"===i?qo(t[1]):"!has"!==i||["!",qo(t[1])]}return n}function Qo(t,e,i=!1){if(0===e.length)return i;let n;n="$type"===t?["geometry-type"]:"$id"===t?["id"]:["get",t];let a=!0;const o=typeof e[0];for(const t of e)if(typeof t!==o){a=!1;break}if(a&&("string"===o||"number"===o)){const t=e.sort().filter(((t,i)=>0===i||e[i-1]!==t));return["match",n,t,!i,i]}return[i?"all":"any"].concat(e.map((t=>[i?"!=":"==",n,t])))}function qo(t){return"$type"===t||("$id"===t?["!=",["id"],null]:["has",t])}function $o(t){let e=!1;if(7===t.version&&(t=Pi(t),e=!0),8===t.version&&(e=function(t){const e=[];return Ni(t,(t=>{t.filter&&(t.filter=Ko(t.filter))})),Ti(t,{paint:!0,layout:!0},(({path:t,value:i,reference:n,set:a})=>{Lo(i)||("object"!=typeof i||Array.isArray(i)?n.tokens&&"string"==typeof i&&a(Eo(i)):(a(Ho(i,n)),e.push(t.join("."))))})),t}(t),e=!0),!e)throw new Error("cannot migrate from",t.version);return t}class tr{constructor(t,e,i,n){this.message=(t?`${t}: `:"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)}}class er{constructor(t){this.error=t,this.message=t.message;const e=t.message.match(/line (\d+)/);this.line=e?parseInt(e[1],10):0}}function ir(t){const e=t.key,i=t.value,n=t.valueSpec||{},a=t.objectElementValidators||{},o=t.style,r=t.styleSpec;let s=[];const l=Vo(i);if("object"!==l)return[new tr(e,i,`object expected, ${l} found`)];for(const t in i){const l=t.split(".")[0],c=n[l]||n["*"];let u;a[l]?u=a[l]:n[l]?u=br:a["*"]?u=a["*"]:n["*"]&&(u=br),u?s=s.concat(u({key:(e?`${e}.`:e)+t,value:i[t],valueSpec:c,style:o,styleSpec:r,object:i,objectKey:t},i)):s.push(new tr(e,i[t],`unknown property "${t}"`))}for(const t in n)a[t]||n[t].required&&void 0===n[t].default&&void 0===i[t]&&s.push(new tr(e,i,`missing required property "${t}"`));return s}function nr(t){const e=t.value,i=t.valueSpec,n=t.style,a=t.styleSpec,o=t.key,r=t.arrayElementValidator||br;if("array"!==Vo(e))return[new tr(o,e,`array expected, ${Vo(e)} found`)];if(i.length&&e.length!==i.length)return[new tr(o,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new tr(o,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let s={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum,function:void 0};a.$version<7&&(s.function=i.function),"object"===Vo(i.value)&&(s=i.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(r({array:e,arrayIndex:t,value:e[t],valueSpec:s,style:n,styleSpec:a,key:`${o}[${t}]`}));return l}function ar(t){const e=t.key,i=t.value,n=t.valueSpec;let a=Vo(i);if("number"===a&&i!=i&&(a="NaN"),"number"!==a)return[new tr(e,i,`number expected, ${a} found`)];if("minimum"in n){let a=n.minimum;if("array"===Vo(n.minimum)){const e=t.arrayIndex;a=n.minimum[e]}if(i<a)return[new tr(e,i,`${i} is less than the minimum value ${a}`)]}if("maximum"in n){let a=n.maximum;if("array"===Vo(n.maximum)){const e=t.arrayIndex;a=n.maximum[e]}if(i>a)return[new tr(e,i,`${i} is greater than the maximum value ${a}`)]}return[]}function or(t){const e=t.valueSpec,i=Ao(t.value.type);let n,a,o,r={};const s="categorical"!==i&&void 0===t.value.property,l=!s,c="array"===Vo(t.value.stops)&&"array"===Vo(t.value.stops[0])&&"object"===Vo(t.value.stops[0][0]),u=ir({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new tr(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;e=e.concat(nr({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:d})),"array"===Vo(n)&&0===n.length&&e.push(new tr(t.key,n,"array must have at least one stop"));return e},default:function(t){return br({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&s&&u.push(new tr(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new tr(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!_o(t.valueSpec)&&u.push(new tr(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Wo(t.valueSpec)?u.push(new tr(t.key,t.value,"property functions not supported")):s&&!Xo(t.valueSpec)&&u.push(new tr(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==t.value.property||u.push(new tr(t.key,t.value,'"property" property is required')),u;function d(t){let i=[];const n=t.value,s=t.key;if("array"!==Vo(n))return[new tr(s,n,`array expected, ${Vo(n)} found`)];if(2!==n.length)return[new tr(s,n,`array length 2 expected, length ${n.length} found`)];if(c){if("object"!==Vo(n[0]))return[new tr(s,n,`object expected, ${Vo(n[0])} found`)];if(void 0===n[0].zoom)return[new tr(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new tr(s,n,"object stop key must have value")];const e=Ao(n[0].zoom);if("number"!=typeof e)return[new tr(s,n[0].zoom,"stop zoom values must be numbers")];if(o&&o>e)return[new tr(s,n[0].zoom,"stop zoom values must appear in ascending order")];e!==o&&(o=e,a=void 0,r={}),i=i.concat(ir({key:`${s}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:ar,value:h}}))}else i=i.concat(h({key:`${s}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return Lo(Oo(n[1]))?i.concat([new tr(`${s}[1]`,n[1],"expressions are not allowed in function stops.")]):i.concat(br({key:`${s}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function h(t,o){const s=Vo(t.value),l=Ao(t.value),c=null!==t.value?t.value:o;if(n){if(s!==n)return[new tr(t.key,c,`${s} stop domain type must match previous stop domain type ${n}`)]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new tr(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){let n=`number expected, ${s} found`;return Wo(e)&&void 0===i&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tr(t.key,c,n)]}return"categorical"!==i||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&"number"==typeof l&&"number"==typeof a&&void 0!==a&&l<a?[new tr(t.key,c,"stop domain values must appear in ascending order")]:(a=l,"categorical"===i&&l in r?[new tr(t.key,c,"stop domain values must be unique")]:(r[l]=!0,[])):[new tr(t.key,c,`integer expected, found ${String(l)}`)]}}function rr(t){const e=("property"===t.expressionContext?Co:Yo)(Oo(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new tr(`${t.key}${e.key}`,t.value,e.message)));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new tr(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ua(i))return[new tr(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return sr(i,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!da(i,["zoom","feature-state"]))return[new tr(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ca(i))return[new tr(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function sr(t,e){const i=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const t of e.valueSpec.expression.parameters)i.delete(t);if(0===i.size)return[];const n=[];return t instanceof Nn&&i.has(t.name)?[new tr(e.key,e.value,`["${t.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(t.eachChild((t=>{n.push(...sr(t,e))})),n)}function lr(t){const e=t.key,i=t.value,n=t.valueSpec,a=[];return Array.isArray(n.values)?-1===n.values.indexOf(Ao(i))&&a.push(new tr(e,i,`expected one of [${n.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(n.values).indexOf(Ao(i))&&a.push(new tr(e,i,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(i)} found`)),a}function cr(t){if(Po(Oo(t.value))){const e=t.layerType||"fill";return rr(Ki({},t,{expressionContext:"filter",valueSpec:t.styleSpec[`filter_${e}`]}))}return ur(t)}function ur(t){const e=t.value,i=t.key;if("array"!==Vo(e))return[new tr(i,e,`array expected, ${Vo(e)} found`)];const n=t.styleSpec;let a,o=[];if(e.length<1)return[new tr(i,e,"filter array must have at least 1 element")];switch(o=o.concat(lr({key:`${i}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),Ao(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Ao(e[1])&&o.push(new tr(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new tr(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(a=Vo(e[1]),"string"!==a&&o.push(new tr(`${i}[1]`,e[1],`string expected, ${a} found`)));for(let r=2;r<e.length;r++)a=Vo(e[r]),"$type"===Ao(e[1])?o=o.concat(lr({key:`${i}[${r}]`,value:e[r],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new tr(`${i}[${r}]`,e[r],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let n=1;n<e.length;n++)o=o.concat(ur({key:`${i}[${n}]`,value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":a=Vo(e[1]),2!==e.length?o.push(new tr(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==a&&o.push(new tr(`${i}[1]`,e[1],`string expected, ${a} found`));break;case"within":a=Vo(e[1]),2!==e.length?o.push(new tr(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==a&&o.push(new tr(`${i}[1]`,e[1],`object expected, ${a} found`))}return o}function dr(t,e){const i=t.key,n=t.style,a=t.styleSpec,o=t.value,r=t.objectKey,s=a[`${e}_${t.layerType}`];if(!s)return[];const l=r.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return br({key:i,value:o,valueSpec:a.transition,style:n,styleSpec:a});const c=t.valueSpec||s[r];if(!c)return[new tr(i,o,`unknown property "${r}"`)];let u;if("string"===Vo(o)&&Wo(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new tr(i,o,`"${r}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const d=[];return"symbol"===t.layerType&&("text-field"===r&&n&&!n.glyphs&&d.push(new tr(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===r&&So(Oo(o))&&"identity"===Ao(o.type)&&d.push(new tr(i,o,'"text-font" does not support identity functions'))),d.concat(br({key:t.key,value:o,valueSpec:c,style:n,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:r}))}function hr(t){const e=t.value,i=t.key,n=Vo(e);return"string"!==n?[new tr(i,e,`string expected, ${n} found`)]:[]}const pr={promoteId:function({key:t,value:e}){if("string"===Vo(e))return hr({key:t,value:e});{const i=[];for(const n in e)i.push(...hr({key:`${t}.${n}`,value:e[n]}));return i}}};const mr={"*":()=>[],array:nr,boolean:function(t){const e=t.value,i=t.key,n=Vo(e);return"boolean"!==n?[new tr(i,e,`boolean expected, ${n} found`)]:[]},number:ar,color:function(t){const e=t.key,i=t.value,n=Vo(i);return"string"!==n?[new tr(e,i,`color expected, ${n} found`)]:null===fn.parseCSSColor(i)?[new tr(e,i,`color expected, "${i}" found`)]:[]},enum:lr,filter:cr,function:or,layer:function(t){let e=[];const i=t.value,n=t.key,a=t.style,o=t.styleSpec;i.type||i.ref||e.push(new tr(n,i,'either "type" or "ref" is required'));let r=Ao(i.type);const s=Ao(i.ref);if(i.id){const o=Ao(i.id);for(let r=0;r<t.arrayIndex;r++){const t=a.layers[r];Ao(t.id)===o&&e.push(new tr(n,i.id,`duplicate layer id "${i.id}", previously used at line ${t.id.__line__}`))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in i&&e.push(new tr(n,i[t],`"${t}" is prohibited for ref layers`))})),a.layers.forEach((e=>{Ao(e.id)===s&&(t=e)})),t?t.ref?e.push(new tr(n,i.ref,"ref cannot reference another ref layer")):r=Ao(t.type):"string"==typeof s&&e.push(new tr(n,i.ref,`ref layer "${s}" not found`))}else if("background"!==r&&"sky"!==r)if(i.source){const t=a.sources&&a.sources[i.source],o=t&&Ao(t.type);t?"vector"===o&&"raster"===r?e.push(new tr(n,i.source,`layer "${i.id}" requires a raster source`)):"raster"===o&&"raster"!==r?e.push(new tr(n,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==r?e.push(new tr(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==r||!i.paint||!i.paint["line-gradient"]&&!i.paint["line-trim-offset"]||"geojson"===o&&t.lineMetrics||e.push(new tr(n,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new tr(n,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new tr(n,i.source,`source "${i.source}" not found`))}else e.push(new tr(n,i,'missing required property "source"'));return e=e.concat(ir({key:n,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>br({key:`${n}.type`,value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"}),filter:t=>cr(Ki({layerType:r},t)),layout:t=>ir({layer:i,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>function(t){return dr(t,"layout")}(Ki({layerType:r},t))}}),paint:t=>ir({layer:i,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>function(t){return dr(t,"paint")}(Ki({layerType:r},t))}})}})),e},object:ir,source:function(t){const e=t.value,i=t.key,n=t.styleSpec,a=t.style;if(!e.type)return[new tr(i,e,'"type" is required')];const o=Ao(e.type);let r;switch(o){case"vector":case"raster":case"raster-dem":return r=ir({key:i,value:e,valueSpec:n[`source_${o.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:pr}),r;case"geojson":if(r=ir({key:i,value:e,valueSpec:n.source_geojson,style:a,styleSpec:n,objectElementValidators:pr}),e.cluster)for(const t in e.clusterProperties){const[n,a]=e.clusterProperties[t],o="string"==typeof n?[n,["accumulated"],["get",t]]:n;r.push(...rr({key:`${i}.${t}.map`,value:a,expressionContext:"cluster-map"})),r.push(...rr({key:`${i}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return r;case"video":return ir({key:i,value:e,valueSpec:n.source_video,style:a,styleSpec:n});case"image":return ir({key:i,value:e,valueSpec:n.source_image,style:a,styleSpec:n});case"canvas":return[new tr(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return lr({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:n})}},light:function(t){const e=t.value,i=t.styleSpec,n=i.light,a=t.style;let o=[];const r=Vo(e);if(void 0===e)return o;if("object"!==r)return o=o.concat([new tr("light",e,`object expected, ${r} found`)]),o;for(const t in e){const r=t.match(/^(.*)-transition$/);o=r&&n[r[1]]&&n[r[1]].transition?o.concat(br({key:t,value:e[t],valueSpec:i.transition,style:a,styleSpec:i})):n[t]?o.concat(br({key:t,value:e[t],valueSpec:n[t],style:a,styleSpec:i})):o.concat([new tr(t,e[t],`unknown property "${t}"`)])}return o},terrain:function(t){const e=t.value,i=t.key,n=t.style,a=t.styleSpec,o=a.terrain;let r=[];const s=Vo(e);if(void 0===e)return r;if("object"!==s)return r=r.concat([new tr("terrain",e,`object expected, ${s} found`)]),r;for(const t in e){const i=t.match(/^(.*)-transition$/);r=i&&o[i[1]]&&o[i[1]].transition?r.concat(br({key:t,value:e[t],valueSpec:a.transition,style:n,styleSpec:a})):o[t]?r.concat(br({key:t,value:e[t],valueSpec:o[t],style:n,styleSpec:a})):r.concat([new tr(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=n.sources&&n.sources[e.source],a=t&&Ao(t.type);t?"raster-dem"!==a&&r.push(new tr(i,e.source,`terrain cannot be used with a source of type ${String(a)}, it only be used with a "raster-dem" source type`)):r.push(new tr(i,e.source,`source "${e.source}" not found`))}else r.push(new tr(i,e,'terrain is missing required property "source"'));return r},fog:function(t){const e=t.value,i=t.style,n=t.styleSpec,a=n.fog;let o=[];const r=Vo(e);if(void 0===e)return o;if("object"!==r)return o=o.concat([new tr("fog",e,`object expected, ${r} found`)]),o;for(const t in e){const r=t.match(/^(.*)-transition$/);o=r&&a[r[1]]&&a[r[1]].transition?o.concat(br({key:t,value:e[t],valueSpec:n.transition,style:i,styleSpec:n})):a[t]?o.concat(br({key:t,value:e[t],valueSpec:a[t],style:i,styleSpec:n})):o.concat([new tr(t,e[t],`unknown property "${t}"`)])}return o},string:hr,formatted:function(t){return 0===hr(t).length?[]:rr(t)},resolvedImage:function(t){return 0===hr(t).length?[]:rr(t)},projection:function(t){const e=t.value,i=t.styleSpec,n=i.projection,a=t.style;let o=[];const r=Vo(e);if("object"===r)for(const t in e)o=o.concat(br({key:t,value:e[t],valueSpec:n[t],style:a,styleSpec:i}));else"string"!==r&&(o=o.concat([new tr("projection",e,`object or string expected, ${r} found`)]));return o}};function br(t){const e=t.value,i=t.valueSpec,n=t.styleSpec;if(i.expression&&So(Ao(e)))return or(t);if(i.expression&&Lo(Oo(e)))return rr(t);if(i.type&&mr[i.type])return mr[i.type](t);return ir(Ki({},t,{valueSpec:i.type?n[i.type]:i}))}function yr(t){const e=t.value,i=t.key,n=hr(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new tr(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new tr(i,e,'"glyphs" url must include a "{range}" token'))),n}var fr=ui((function(t,e){var i=function(){var t=function(t,e,i,n){for(i=i||{},n=t.length;n--;i[t[n]]=e);return i},e=[1,12],i=[1,13],n=[1,9],a=[1,10],o=[1,11],r=[1,14],s=[1,15],l=[14,18,22,24],c=[18,22],u=[22,24],d={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,i,n,a,o,r){var s=o.length-1;switch(a){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(t),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:a,11:o,12:1,13:2,15:7,16:8,17:r,23:s},{1:[3]},{14:[1,16]},t(l,[2,7]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,3]),t(l,[2,4]),t(l,[2,5]),t([14,18,21,22,24],[2,1]),t(l,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:a,11:o,13:23,15:7,16:8,17:r,23:s,24:[1,21],25:22},{1:[2,6]},t(l,[2,13]),{18:[1,24],22:[1,25]},t(c,[2,16]),{21:[1,26]},t(l,[2,18]),{22:[1,28],24:[1,27]},t(u,[2,20]),t(l,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:a,11:o,13:30,15:7,16:8,17:r,23:s},t(l,[2,19]),{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:a,11:o,13:31,15:7,16:8,17:r,23:s},t(c,[2,17]),t(c,[2,15]),t(u,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,i=[0],n=[null],a=[],o=this.table,r="",s=0,l=0,c=2,u=1,d=a.slice.call(arguments,1),h=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);h.setInput(t,p.yy),p.yy.lexer=h,p.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var b=h.yylloc;a.push(b);var y=h.options&&h.options.ranges;function f(){var t;return"number"!=typeof(t=h.lex()||u)&&(t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,I,v,x,Z,G,w,W,X={};;){if(I=i[i.length-1],this.defaultActions[I]?v=this.defaultActions[I]:(null==g&&(g=f()),v=o[I]&&o[I][g]),void 0===v||!v.length||!v[0]){var _="";for(Z in W=[],o[I])this.terminals_[Z]&&Z>c&&W.push("'"+this.terminals_[Z]+"'");_=h.showPosition?"Parse error on line "+(s+1)+":\n"+h.showPosition()+"\nExpecting "+W.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(s+1)+": Unexpected "+(g==u?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(_,{text:h.match,token:this.terminals_[g]||g,line:h.yylineno,loc:b,expected:W})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+I+", token: "+g);switch(v[0]){case 1:i.push(g),n.push(h.yytext),a.push(h.yylloc),i.push(v[1]),g=null,l=h.yyleng,r=h.yytext,s=h.yylineno,b=h.yylloc;break;case 2:if(G=this.productions_[v[1]][1],X.$=n[n.length-G],X._$={first_line:a[a.length-(G||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(G||1)].first_column,last_column:a[a.length-1].last_column},y&&(X._$.range=[a[a.length-(G||1)].range[0],a[a.length-1].range[1]]),void 0!==(x=this.performAction.apply(X,[r,l,s,p.yy,v[1],n,a].concat(d))))return x;G&&(i=i.slice(0,-1*G*2),n=n.slice(0,-1*G),a=a.slice(0,-1*G)),i.push(this.productions_[v[1]][0]),n.push(X.$),a.push(X._$),w=o[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},h=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,n,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var o in a)this[o]=a[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,i,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length;o++)if((i=this._input.match(this.rules[a[o]]))&&(!e||i[0].length>e[0].length)){if(e=i,n=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,n){switch(i){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return t}();function p(){this.yy={}}return d.lexer=h,p.prototype=d,d.Parser=p,new p}();e.parser=i,e.Parser=i.Parser,e.parse=function(){return i.parse.apply(i,arguments)}})),gr=fr;function Ir(t,e=li){let i=t;try{i=function(t){if(t instanceof String||"string"==typeof t||t instanceof Buffer)try{return gr.parse(t.toString())}catch(t){throw new er(t)}return t}(i)}catch(t){return[t]}return function(t,e=li){return i=br({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:yr,"*":()=>[]}}),i.slice().sort(((t,e)=>t.line&&e.line?t.line-e.line:0));var i}(i,e)}var vr={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"maplibre-demotiles":{type:"vector",url:"https://demotiles.maplibre.org/tiles/tiles.json"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:` and `https:`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by MapLibre GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like MapLibre GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image",{"!":"icon-overlap"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{doc:"The icon will be hidden if it collides with any other previously drawn symbol."},always:{doc:"The icon will be visible even if it collides with any other previously drawn symbol."},cooperative:{doc:"If the icon collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new icon is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new icon is visible."}},doc:"Allows for control over whether to show an icon when it overlaps other symbols on the map. If `icon-overlap` is not set, `icon-allow-overlap` is used instead.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"2.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"viewport-glyph":{doc:"When `symbol-placement` is set to `point`, aligns text to the x-axis of the viewport. When `symbol-placement` is set to `line` or `line-center`, aligns glyphs to the x-axis of the viewport and places them along the line."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"},"`viewport-glyph` value":{js:"2.1.8"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field",{"!":"text-overlap"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{doc:"The text will be hidden if it collides with any other previously drawn symbol."},always:{doc:"The text will be visible even if it collides with any other previously drawn symbol."},cooperative:{doc:"If the text collides with another previously drawn symbol, the overlap mode for that symbol is checked. If the previous symbol was placed using `never` overlap mode, the new text is hidden. If the previous symbol was placed using `always` or `cooperative` overlap mode, the new text is visible."}},doc:"Allows for control over whether to show symbol text when it overlaps other symbols on the map. If `text-overlap` is not set, `text-allow-overlap` is used instead",requires:["text-field"],"sdk-support":{"basic functionality":{js:"2.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `["get", "building_type"]`). Each label must be either:\n - a single literal value; or\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `["c", "b"]`). The input matches if any of the values in the array matches, similar to the `"in"` operator.\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. When `source.promoteId` is not provided, features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. When `source.promoteId` is provided, features are identified by their `promoteId` property, which may be a number, string, or any primitive data type. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in MapLibre GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}},xr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Zr={},Gr={exports:{}};!function(t,e){!function(i){var n=e&&!e.nodeType&&e,a=t&&!t.nodeType&&t,o="object"==typeof xr&&xr;o.global!==o&&o.window!==o&&o.self!==o||(i=o);var r,s,l=2147483647,c=36,u=/^xn--/,d=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,b=String.fromCharCode;function y(t){throw RangeError(p[t])}function f(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function g(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+f((t=t.replace(h,".")).split("."),e).join(".")}function I(t){for(var e,i,n=[],a=0,o=t.length;a<o;)(e=t.charCodeAt(a++))>=55296&&e<=56319&&a<o?56320==(64512&(i=t.charCodeAt(a++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),a--):n.push(e);return n}function v(t){return f(t,(function(t){var e="";return t>65535&&(e+=b((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=b(t)})).join("")}function x(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function Z(t,e,i){var n=0;for(t=i?m(t/700):t>>1,t+=m(t/e);t>455;n+=c)t=m(t/35);return m(n+36*t/(t+38))}function G(t){var e,i,n,a,o,r,s,u,d,h,p,b=[],f=t.length,g=0,I=128,x=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&y("not-basic"),b.push(t.charCodeAt(n));for(a=i>0?i+1:0;a<f;){for(o=g,r=1,s=c;a>=f&&y("invalid-input"),((u=(p=t.charCodeAt(a++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:c)>=c||u>m((l-g)/r))&&y("overflow"),g+=u*r,!(u<(d=s<=x?1:s>=x+26?26:s-x));s+=c)r>m(l/(h=c-d))&&y("overflow"),r*=h;x=Z(g-o,e=b.length+1,0==o),m(g/e)>l-I&&y("overflow"),I+=m(g/e),g%=e,b.splice(g++,0,I)}return v(b)}function w(t){var e,i,n,a,o,r,s,u,d,h,p,f,g,v,G,w=[];for(f=(t=I(t)).length,e=128,i=0,o=72,r=0;r<f;++r)(p=t[r])<128&&w.push(b(p));for(n=a=w.length,a&&w.push("-");n<f;){for(s=l,r=0;r<f;++r)(p=t[r])>=e&&p<s&&(s=p);for(s-e>m((l-i)/(g=n+1))&&y("overflow"),i+=(s-e)*g,e=s,r=0;r<f;++r)if((p=t[r])<e&&++i>l&&y("overflow"),p==e){for(u=i,d=c;!(u<(h=d<=o?1:d>=o+26?26:d-o));d+=c)G=u-h,v=c-h,w.push(b(x(h+G%v,0))),u=m(G/v);w.push(b(x(u,0))),o=Z(i,g,n==a),i=0,++n}++i,++e}return w.join("")}if(r={version:"1.3.2",ucs2:{decode:I,encode:v},decode:G,encode:w,toASCII:function(t){return g(t,(function(t){return d.test(t)?"xn--"+w(t):t}))},toUnicode:function(t){return g(t,(function(t){return u.test(t)?G(t.slice(4).toLowerCase()):t}))}},n&&a)if(t.exports==n)a.exports=r;else for(s in r)r.hasOwnProperty(s)&&(n[s]=r[s]);else i.punycode=r}(xr)}(Gr,Gr.exports);var wr={};function Wr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Xr=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};wr.decode=wr.parse=function(t,e,i,n){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var o=/\+/g;t=t.split(e);var r=1e3;n&&"number"==typeof n.maxKeys&&(r=n.maxKeys);var s=t.length;r>0&&s>r&&(s=r);for(var l=0;l<s;++l){var c,u,d,h,p=t[l].replace(o,"%20"),m=p.indexOf(i);m>=0?(c=p.substr(0,m),u=p.substr(m+1)):(c=p,u=""),d=decodeURIComponent(c),h=decodeURIComponent(u),Wr(a,d)?Array.isArray(a[d])?a[d].push(h):a[d]=[a[d],h]:a[d]=h}return a},wr.encode=wr.stringify=function(t,e,i,n){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var a=encodeURIComponent(Xr(n))+i;return Array.isArray(t[n])?t[n].map((function(t){return a+encodeURIComponent(Xr(t))})).join(e):a+encodeURIComponent(Xr(t[n]))})).join(e):n?encodeURIComponent(Xr(n))+i+encodeURIComponent(Xr(t)):""};var _r=Gr.exports,Vr={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}};function Sr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Zr.parse=Tr,Zr.resolve=function(t,e){return Tr(t,!1,!0).resolve(e)},Zr.resolveObject=function(t,e){return t?Tr(t,!1,!0).resolveObject(e):e},Zr.format=function(t){Vr.isString(t)&&(t=Tr(t));return t instanceof Sr?t.format():Sr.prototype.format.call(t)},Zr.Url=Sr;var Br=/^([a-z0-9.+-]+:)/i,Lr=/:[0-9]*$/,Yr=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,zr=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Rr=["'"].concat(zr),Cr=["%","/","?",";","#"].concat(Rr),Mr=["/","?","#"],Jr=/^[+a-z0-9A-Z_-]{0,63}$/,Hr=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,kr={javascript:!0,"javascript:":!0},jr={javascript:!0,"javascript:":!0},Fr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Nr=wr;function Tr(t,e,i){if(t&&Vr.isObject(t)&&t instanceof Sr)return t;var n=new Sr;return n.parse(t,e,i),n}function Ur(t){for(let e=0;e<vr.layout.length;e++)for(const i in vr[vr.layout[e]])if(i===t)return vr[vr.layout[e]][i];for(let e=0;e<vr.paint.length;e++)for(const i in vr[vr.paint[e]])if(i===t)return vr[vr.paint[e]][i];return null}function Er(t,e){for(const i of t.layers)e(i)}function Ar(t,e,i){function n(t,e){const n=t[e];n&&Object.keys(n).forEach((a=>{i({path:[t.id,e,a],key:a,value:n[a],reference:Ur(a),set(t){n[a]=t}})}))}Er(t,(t=>{e.paint&&n(t,"paint"),e.layout&&n(t,"layout")}))}function Or(t,e){for(const i in t)0===i.indexOf("layout")&&e(t[i],i)}function Pr(t,e){for(const i in t)0===i.indexOf("paint")&&e(t[i],i)}function Kr(t,e){return"string"==typeof e&&"@"===e[0]?Kr(t,t.constants[e]):e}function Dr(t,e,i){t[i]=t[e],delete t[e]}function Qr(t){t.version=8,function(t,e){for(const i in t.sources)e(t.sources[i])}(t,(t=>{"video"===t.type&&void 0!==t.url&&Dr(t,"url","urls"),"video"===t.type&&t.coordinates.forEach((t=>t.reverse()))})),Er(t,(t=>{Or(t,(t=>{void 0!==t["symbol-min-distance"]&&Dr(t,"symbol-min-distance","symbol-spacing")})),Pr(t,(t=>{void 0!==t["background-image"]&&Dr(t,"background-image","background-pattern"),void 0!==t["line-image"]&&Dr(t,"line-image","line-pattern"),void 0!==t["fill-image"]&&Dr(t,"fill-image","fill-pattern")}))})),Ar(t,{paint:!0,layout:!0},(e=>{const i=Kr(t,e.value);(function(t){return Array.isArray(t.stops)})(i)&&i.stops.forEach((e=>{e[1]=Kr(t,e[1])})),e.set(i)})),delete t.constants,Er(t,(t=>{Or(t,(t=>{delete t["text-max-size"],delete t["icon-max-size"]})),Pr(t,(e=>{e["text-size"]&&(t.layout||(t.layout={}),t.layout["text-size"]=e["text-size"],delete e["text-size"]),e["icon-size"]&&(t.layout||(t.layout={}),t.layout["icon-size"]=e["icon-size"],delete e["icon-size"])}))})),t.glyphs&&(t.glyphs=function(t){const e=Zr.parse(t),i=e.pathname.split("/");if("mapbox:"!==e.protocol)return t;if("fontstack"===e.hostname)return n("/{fontstack}/{range}.pbf"===decodeURI(e.pathname)),"mapbox://fonts/mapbox/{fontstack}/{range}.pbf";if("fonts"===e.hostname)return n("v1"===i[1]),n("{fontstack}"===decodeURI(i[3])),n("{range}.pbf"===decodeURI(i[4])),`mapbox://fonts/${i[2]}/{fontstack}/{range}.pbf`;function n(e){if(!e)throw new Error(`Invalid font url: "${t}"`)}n(!1)}(t.glyphs)),Er(t,(t=>{Or(t,(t=>{t["text-font"]&&(t["text-font"]=function(t){function e(t){return t.split(",").map((t=>t.trim()))}if(Array.isArray(t))return t;if("string"==typeof t)return e(t);if("object"==typeof t)return t.stops.forEach((t=>{t[1]=e(t[1])})),t;throw new Error("unexpected font value")}(t["text-font"]))}))}));let e=0;for(let i=t.layers.length-1;i>=0;i--){if("symbol"!==t.layers[i].type){e=i+1;break}}const i=t.layers.splice(e);return i.reverse(),t.layers=t.layers.concat(i),t}Sr.prototype.parse=function(t,e,i){if(!Vr.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),a=-1!==n&&n<t.indexOf("#")?"?":"#",o=t.split(a);o[0]=o[0].replace(/\\/g,"/");var r=t=o.join(a);if(r=r.trim(),!i&&1===t.split("#").length){var s=Yr.exec(r);if(s)return this.path=r,this.href=r,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?Nr.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=Br.exec(r);if(l){var c=(l=l[0]).toLowerCase();this.protocol=c,r=r.substr(l.length)}if(i||l||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===r.substr(0,2);!u||l&&jr[l]||(r=r.substr(2),this.slashes=!0)}if(!jr[l]&&(u||l&&!Fr[l])){for(var d,h,p=-1,m=0;m<Mr.length;m++){-1!==(b=r.indexOf(Mr[m]))&&(-1===p||b<p)&&(p=b)}-1!==(h=-1===p?r.lastIndexOf("@"):r.lastIndexOf("@",p))&&(d=r.slice(0,h),r=r.slice(h+1),this.auth=decodeURIComponent(d)),p=-1;for(m=0;m<Cr.length;m++){var b;-1!==(b=r.indexOf(Cr[m]))&&(-1===p||b<p)&&(p=b)}-1===p&&(p=r.length),this.host=r.slice(0,p),r=r.slice(p),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var f=this.hostname.split(/\./),g=(m=0,f.length);m<g;m++){var I=f[m];if(I&&!I.match(Jr)){for(var v="",x=0,Z=I.length;x<Z;x++)I.charCodeAt(x)>127?v+="x":v+=I[x];if(!v.match(Jr)){var G=f.slice(0,m),w=f.slice(m+1),W=I.match(Hr);W&&(G.push(W[1]),w.unshift(W[2])),w.length&&(r="/"+w.join(".")+r),this.hostname=G.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=_r.toASCII(this.hostname));var X=this.port?":"+this.port:"",_=this.hostname||"";this.host=_+X,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!kr[c])for(m=0,g=Rr.length;m<g;m++){var V=Rr[m];if(-1!==r.indexOf(V)){var S=encodeURIComponent(V);S===V&&(S=escape(V)),r=r.split(V).join(S)}}var B=r.indexOf("#");-1!==B&&(this.hash=r.substr(B),r=r.slice(0,B));var L=r.indexOf("?");if(-1!==L?(this.search=r.substr(L),this.query=r.substr(L+1),e&&(this.query=Nr.parse(this.query)),r=r.slice(0,L)):e&&(this.search="",this.query={}),r&&(this.pathname=r),Fr[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){X=this.pathname||"";var Y=this.search||"";this.path=X+Y}return this.href=this.format(),this},Sr.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",a=!1,o="";this.host?a=t+this.host:this.hostname&&(a=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&Vr.isObject(this.query)&&Object.keys(this.query).length&&(o=Nr.stringify(this.query));var r=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||Fr[e])&&!1!==a?(a="//"+(a||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):a||(a=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),e+a+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(r=r.replace("#","%23"))+n},Sr.prototype.resolve=function(t){return this.resolveObject(Tr(t,!1,!0)).format()},Sr.prototype.resolveObject=function(t){if(Vr.isString(t)){var e=new Sr;e.parse(t,!1,!0),t=e}for(var i=new Sr,n=Object.keys(this),a=0;a<n.length;a++){var o=n[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var r=Object.keys(t),s=0;s<r.length;s++){var l=r[s];"protocol"!==l&&(i[l]=t[l])}return Fr[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!Fr[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||jr[t.protocol])i.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),i.pathname=h.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var p=i.pathname||"",m=i.search||"";i.path=p+m}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var b=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=y||b||i.host&&t.pathname,g=f,I=i.pathname&&i.pathname.split("/")||[],v=(h=t.pathname&&t.pathname.split("/")||[],i.protocol&&!Fr[i.protocol]);if(v&&(i.hostname="",i.port=null,i.host&&(""===I[0]?I[0]=i.host:I.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),f=f&&(""===h[0]||""===I[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,I=h;else if(h.length)I||(I=[]),I.pop(),I=I.concat(h),i.search=t.search,i.query=t.query;else if(!Vr.isNullOrUndefined(t.search)){if(v)i.hostname=i.host=I.shift(),(W=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=W.shift(),i.host=i.hostname=W.shift());return i.search=t.search,i.query=t.query,Vr.isNull(i.pathname)&&Vr.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!I.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var x=I.slice(-1)[0],Z=(i.host||t.host||I.length>1)&&("."===x||".."===x)||""===x,G=0,w=I.length;w>=0;w--)"."===(x=I[w])?I.splice(w,1):".."===x?(I.splice(w,1),G++):G&&(I.splice(w,1),G--);if(!f&&!g)for(;G--;G)I.unshift("..");!f||""===I[0]||I[0]&&"/"===I[0].charAt(0)||I.unshift(""),Z&&"/"!==I.join("/").substr(-1)&&I.push("");var W,X=""===I[0]||I[0]&&"/"===I[0].charAt(0);v&&(i.hostname=i.host=X?"":I.length?I.shift():"",(W=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=W.shift(),i.host=i.hostname=W.shift()));return(f=f||i.host&&I.length)&&!X&&I.unshift(""),I.length?i.pathname=I.join("/"):(i.pathname=null,i.path=null),Vr.isNull(i.pathname)&&Vr.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},Sr.prototype.parseHost=function(){var t=this.host,e=Lr.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var qr={exports:{}},$r=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,es=Object.prototype.propertyIsEnumerable;function is(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ns=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==n.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(t){a[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,n,a=is(t),o=1;o<arguments.length;o++){for(var r in i=Object(arguments[o]))ts.call(i,r)&&(a[r]=i[r]);if($r){n=$r(i);for(var s=0;s<n.length;s++)es.call(i,n[s])&&(a[n[s]]=i[n[s]])}}return a},as={},os=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},rs={exports:{}};"function"==typeof Object.create?rs.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:rs.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},function(t){var e=/%[sdj%]/g;t.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(a(arguments[n]));return i.join(" ")}n=1;for(var o=arguments,r=o.length,s=String(t).replace(e,(function(t){if("%%"===t)return"%";if(n>=r)return t;switch(t){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return t}})),l=o[n];n<r;l=o[++n])h(l)||!f(l)?s+=" "+l:s+=" "+a(l);return s},t.deprecate=function(e,i){if(b(xr.process))return function(){return t.deprecate(e,i).apply(this,arguments)};if(!0===process.noDeprecation)return e;var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(i);process.traceDeprecation?console.trace(i):console.error(i),n=!0}return e.apply(this,arguments)}};var i,n={};function a(e,i){var n={seen:[],stylize:r};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(i)?n.showHidden=i:i&&t._extend(n,i),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),s(n,e,n.depth)}function o(t,e){var i=a.styles[e];return i?"["+a.colors[i][0]+"m"+t+"["+a.colors[i][1]+"m":t}function r(t,e){return t}function s(e,i,n){if(e.customInspect&&i&&v(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var a=i.inspect(n,e);return m(a)||(a=s(e,a,n)),a}var o=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}if(p(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(h(e))return t.stylize("null","null")}(e,i);if(o)return o;var r=Object.keys(i),f=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(r);if(e.showHidden&&(r=Object.getOwnPropertyNames(i)),I(i)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return l(i);if(0===r.length){if(v(i)){var x=i.name?": "+i.name:"";return e.stylize("[Function"+x+"]","special")}if(y(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(g(i))return e.stylize(Date.prototype.toString.call(i),"date");if(I(i))return l(i)}var Z,G="",w=!1,X=["{","}"];(u(i)&&(w=!0,X=["[","]"]),v(i))&&(G=" [Function"+(i.name?": "+i.name:"")+"]");return y(i)&&(G=" "+RegExp.prototype.toString.call(i)),g(i)&&(G=" "+Date.prototype.toUTCString.call(i)),I(i)&&(G=" "+l(i)),0!==r.length||w&&0!=i.length?n<0?y(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),Z=w?function(t,e,i,n,a){for(var o=[],r=0,s=e.length;r<s;++r)W(e,String(r))?o.push(c(t,e,i,n,String(r),!0)):o.push("");return a.forEach((function(a){a.match(/^\d+$/)||o.push(c(t,e,i,n,a,!0))})),o}(e,i,n,f,r):r.map((function(t){return c(e,i,n,f,t,w)})),e.seen.pop(),function(t,e,i){if(t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1];return i[0]+e+" "+t.join(", ")+" "+i[1]}(Z,G,X)):X[0]+G+X[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,i,n,a,o){var r,l,c;if((c=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]}).get?l=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(l=t.stylize("[Setter]","special")),W(n,a)||(r="["+a+"]"),l||(t.seen.indexOf(c.value)<0?(l=h(i)?s(t,c.value,null):s(t,c.value,i-1)).indexOf("\n")>-1&&(l=o?l.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+l.split("\n").map((function(t){return"   "+t})).join("\n")):l=t.stylize("[Circular]","special")),b(r)){if(o&&a.match(/^\d+$/))return l;(r=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=t.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=t.stylize(r,"string"))}return r+": "+l}function u(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function h(t){return null===t}function p(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return void 0===t}function y(t){return f(t)&&"[object RegExp]"===x(t)}function f(t){return"object"==typeof t&&null!==t}function g(t){return f(t)&&"[object Date]"===x(t)}function I(t){return f(t)&&("[object Error]"===x(t)||t instanceof Error)}function v(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function Z(t){return t<10?"0"+t.toString(10):t.toString(10)}t.debuglog=function(e){if(b(i)&&(i=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!n[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var a=process.pid;n[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,a,i)}}else n[e]=function(){};return n[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=u,t.isBoolean=d,t.isNull=h,t.isNullOrUndefined=function(t){return null==t},t.isNumber=p,t.isString=m,t.isSymbol=function(t){return"symbol"==typeof t},t.isUndefined=b,t.isRegExp=y,t.isObject=f,t.isDate=g,t.isError=I,t.isFunction=v,t.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},t.isBuffer=os;var G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function w(){var t=new Date,e=[Z(t.getHours()),Z(t.getMinutes()),Z(t.getSeconds())].join(":");return[t.getDate(),G[t.getMonth()],e].join(" ")}function W(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.log=function(){console.log("%s - %s",w(),t.format.apply(t,arguments))},t.inherits=rs.exports,t._extend=function(t,e){if(!e||!f(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}(as);var ss=ns;function ls(t,e){if(t===e)return 0;for(var i=t.length,n=e.length,a=0,o=Math.min(i,n);a<o;++a)if(t[a]!==e[a]){i=t[a],n=e[a];break}return i<n?-1:n<i?1:0}function cs(t){return xr.Buffer&&"function"==typeof xr.Buffer.isBuffer?xr.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var us=as,ds=Object.prototype.hasOwnProperty,hs=Array.prototype.slice,ps="foo"===function(){}.name;function ms(t){return Object.prototype.toString.call(t)}function bs(t){return!cs(t)&&("function"==typeof xr.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var ys=qr.exports=Zs,fs=/\s*function\s+([^\(\s]*)\s*/;function gs(t){if(us.isFunction(t)){if(ps)return t.name;var e=t.toString().match(fs);return e&&e[1]}}function Is(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function vs(t){if(ps||!us.isFunction(t))return us.inspect(t);var e=gs(t);return"[Function"+(e?": "+e:"")+"]"}function xs(t,e,i,n,a){throw new ys.AssertionError({message:i,actual:t,expected:e,operator:n,stackStartFunction:a})}function Zs(t,e){t||xs(t,!0,e,"==",ys.ok)}function Gs(t,e,i,n){if(t===e)return!0;if(cs(t)&&cs(e))return 0===ls(t,e);if(us.isDate(t)&&us.isDate(e))return t.getTime()===e.getTime();if(us.isRegExp(t)&&us.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(bs(t)&&bs(e)&&ms(t)===ms(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===ls(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(cs(t)!==cs(e))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,i,n){if(null==t||null==e)return!1;if(us.isPrimitive(t)||us.isPrimitive(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var a=ws(t),o=ws(e);if(a&&!o||!a&&o)return!1;if(a)return Gs(t=hs.call(t),e=hs.call(e),i);var r,s,l=_s(t),c=_s(e);if(l.length!==c.length)return!1;for(l.sort(),c.sort(),s=l.length-1;s>=0;s--)if(l[s]!==c[s])return!1;for(s=l.length-1;s>=0;s--)if(!Gs(t[r=l[s]],e[r],i,n))return!1;return!0}(t,e,i,n))}return i?t===e:t==e}function ws(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function Ws(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function Xs(t,e,i,n){var a;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(n=i,i=null),a=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),t&&!a&&xs(a,i,"Missing expected exception"+n);var o="string"==typeof n,r=!t&&a&&!i;if((!t&&us.isError(a)&&o&&Ws(a,i)||r)&&xs(a,i,"Got unwanted exception"+n),t&&a&&i&&!Ws(a,i)||!t&&a)throw a}ys.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return Is(vs(t.actual),128)+" "+t.operator+" "+Is(vs(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||xs;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var i=new Error;if(i.stack){var n=i.stack,a=gs(e),o=n.indexOf("\n"+a);if(o>=0){var r=n.indexOf("\n",o+1);n=n.substring(r+1)}this.stack=n}}},us.inherits(ys.AssertionError,Error),ys.fail=xs,ys.ok=Zs,ys.equal=function(t,e,i){t!=e&&xs(t,e,i,"==",ys.equal)},ys.notEqual=function(t,e,i){t==e&&xs(t,e,i,"!=",ys.notEqual)},ys.deepEqual=function(t,e,i){Gs(t,e,!1)||xs(t,e,i,"deepEqual",ys.deepEqual)},ys.deepStrictEqual=function(t,e,i){Gs(t,e,!0)||xs(t,e,i,"deepStrictEqual",ys.deepStrictEqual)},ys.notDeepEqual=function(t,e,i){Gs(t,e,!1)&&xs(t,e,i,"notDeepEqual",ys.notDeepEqual)},ys.notDeepStrictEqual=function t(e,i,n){Gs(e,i,!0)&&xs(e,i,n,"notDeepStrictEqual",t)},ys.strictEqual=function(t,e,i){t!==e&&xs(t,e,i,"===",ys.strictEqual)},ys.notStrictEqual=function(t,e,i){t===e&&xs(t,e,i,"!==",ys.notStrictEqual)},ys.throws=function(t,e,i){Xs(!0,t,e,i)},ys.doesNotThrow=function(t,e,i){Xs(!1,t,e,i)},ys.ifError=function(t){if(t)throw t},ys.strict=ss((function t(e,i){e||xs(e,!0,i,"==",t)}),ys,{equal:ys.strictEqual,deepEqual:ys.deepStrictEqual,notEqual:ys.notStrictEqual,notDeepEqual:ys.notDeepStrictEqual}),ys.strict.strict=ys.strict;var _s=Object.keys||function(t){var e=[];for(var i in t)ds.call(t,i)&&e.push(i);return e},Vs=qr.exports;function Ss(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}class Bs extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class Ls{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,i]of e)this.bindings[t]=i}concat(t){return new Ls(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Ys={kind:"null"},zs={kind:"number"},Rs={kind:"string"},Cs={kind:"boolean"},Ms={kind:"color"},Js={kind:"object"},Hs={kind:"value"},ks={kind:"collator"},js={kind:"formatted"},Fs={kind:"resolvedImage"};function Ns(t,e){return{kind:"array",itemType:t,N:e}}function Ts(t){if("array"===t.kind){const e=Ts(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const Us=[Ys,zs,Rs,Cs,Ms,js,Js,Ns(Hs),Fs];function Es(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Es(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of Us)if(!Es(t,e))return null}return`Expected ${Ts(t)} but found ${Ts(e)} instead.`}function As(t,e){return e.some((e=>e.kind===t.kind))}function Os(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Ps,Ks={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ds(t){return(t=Math.round(t))<0?0:t>255?255:t}function Qs(t){return t<0?0:t>1?1:t}function qs(t){return"%"===t[t.length-1]?Ds(parseFloat(t)/100*255):Ds(parseInt(t))}function $s(t){return"%"===t[t.length-1]?Qs(parseFloat(t)/100):Qs(parseFloat(t))}function tl(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{Ps={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in Ks)return Ks[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=i.indexOf("("),a=i.indexOf(")");if(-1!==n&&a+1===i.length){var o=i.substr(0,n),r=i.substr(n+1,a-(n+1)).split(","),s=1;switch(o){case"rgba":if(4!==r.length)return null;s=$s(r.pop());case"rgb":return 3!==r.length?null:[qs(r[0]),qs(r[1]),qs(r[2]),s];case"hsla":if(4!==r.length)return null;s=$s(r.pop());case"hsl":if(3!==r.length)return null;var l=(parseFloat(r[0])%360+360)%360/360,c=$s(r[1]),u=$s(r[2]),d=u<=.5?u*(c+1):u+c-u*c,h=2*u-d;return[Ds(255*tl(h,d,l+1/3)),Ds(255*tl(h,d,l)),Ds(255*tl(h,d,l-1/3)),s];default:return null}}return null}}catch(Pu){}class el{constructor(t,e,i,n=1){this.r=t,this.g=e,this.b=i,this.a=n}static parse(t){if(!t)return;if(t instanceof el)return t;if("string"!=typeof t)return;const e=Ps(t);return e?new el(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${n})`}toArray(){const{r:t,g:e,b:i,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*i/n,n]}}el.black=new el(0,0,0,1),el.white=new el(1,1,1,1),el.transparent=new el(0,0,0,0),el.red=new el(1,0,0,1);class il{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class nl{constructor(t,e,i,n,a){this.text=t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=a}}class al{constructor(t){this.sections=t}static fromString(t){return new al([new nl(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof al?t:al.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const i={};e.fontStack&&(i["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(i["font-scale"]=e.scale),e.textColor&&(i["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(i)}return t}}class ol{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new ol({name:t,available:!1}):null}serialize(){return["image",this.name]}}function rl(t,e,i,n){if(!("number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255)){return`Invalid rgba value [${("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}return void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,i,n].join(", ")}]: 'a' must be between 0 and 1.`}function sl(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof el)return!0;if(t instanceof il)return!0;if(t instanceof al)return!0;if(t instanceof ol)return!0;if(Array.isArray(t)){for(const e of t)if(!sl(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!sl(t[e]))return!1;return!0}return!1}function ll(t){if(null===t)return Ys;if("string"==typeof t)return Rs;if("boolean"==typeof t)return Cs;if("number"==typeof t)return zs;if(t instanceof el)return Ms;if(t instanceof il)return ks;if(t instanceof al)return js;if(t instanceof ol)return Fs;if(Array.isArray(t)){const e=t.length;let i;for(const e of t){const t=ll(e);if(i){if(i===t)continue;i=Hs;break}i=t}return Ns(i||Hs,e)}return Vs("object"==typeof t),Js}function cl(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof el||t instanceof al||t instanceof ol?t.toString():JSON.stringify(t)}class ul{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!sl(t[1]))return e.error("invalid value");const i=t[1];let n=ll(i);const a=e.expectedType;return"array"!==n.kind||0!==n.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(n=a),new ul(n,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof el?["rgba"].concat(this.value.toArray()):this.value instanceof al?this.value.serialize():(Vs(null===this.value||"string"==typeof this.value||"number"==typeof this.value||"boolean"==typeof this.value),this.value)}}class dl{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const hl={string:Rs,number:zs,boolean:Cs,object:Js};class pl{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,n=1;const a=t[0];if("array"===a){let a,o;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in hl)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=hl[i],n++}else a=Hs;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}i=Ns(a,o)}else Vs(hl[a],a),i=hl[a];const o=[];for(;n<t.length;n++){const i=e.parse(t[n],n,Hs);if(!i)return null;o.push(i)}return new pl(i,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!Es(this.type,ll(i)))return i;if(e===this.args.length-1)throw new dl(`Expected value to be of type ${Ts(this.type)}, but found ${Ts(ll(i))} instead.`)}return Vs(!1),null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);const n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((t=>t.serialize())))}}class ml{constructor(t){this.type=js,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const n=[];let a=!1;for(let i=1;i<=t.length-1;++i){const o=t[i];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,zs),!t))return null;let i=null;if(o["text-font"]&&(i=e.parse(o["text-font"],1,Ns(Rs)),!i))return null;let r=null;if(o["text-color"]&&(r=e.parse(o["text-color"],1,Ms),!r))return null;const s=n[n.length-1];s.scale=t,s.font=i,s.textColor=r}else{const o=e.parse(t[i],1,Hs);if(!o)return null;const r=o.type.kind;if("string"!==r&&"value"!==r&&"null"!==r&&"resolvedImage"!==r)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,n.push({content:o,scale:null,font:null,textColor:null})}}return new ml(n)}evaluate(t){return new al(this.sections.map((e=>{const i=e.content.evaluate(t);return ll(i)===Fs?new nl("",i,null,null,null):new nl(cl(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const i={};e.scale&&(i["font-scale"]=e.scale.serialize()),e.font&&(i["text-font"]=e.font.serialize()),e.textColor&&(i["text-color"]=e.textColor.serialize()),t.push(i)}return t}}class bl{constructor(t){this.type=Fs,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,Rs);return i?new bl(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=ol.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const yl={"to-boolean":Cs,"to-color":Ms,"to-number":zs,"to-string":Rs};class fl{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(Vs(yl[i],i),("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const n=yl[i],a=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],i,Hs);if(!n)return null;a.push(n)}return new fl(n,a)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,i;for(const n of this.args){if(e=n.evaluate(t),i=null,e instanceof el)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:rl(e[0],e[1],e[2],e[3]),!i))return new el(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new dl(i||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new dl(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?al.fromString(cl(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ol.fromString(cl(this.args[0].evaluate(t))):cl(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new ml([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new bl(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const gl=["Unknown","Point","LineString","Polygon"];class Il{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?gl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=el.parse(t)),e}}class vl{constructor(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const i=t[0],n=vl.definitions[i];if(!n)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,r=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[n,o]of r){s=new Ul(e.registry,e.path,null,e.scope);const r=[];let l=!1;for(let e=1;e<t.length;e++){const i=t[e],a=Array.isArray(n)?n[e-1]:n.type,o=s.parse(i,1+r.length,a);if(!o){l=!0;break}r.push(o)}if(!l)if(Array.isArray(n)&&n.length!==r.length)s.error(`Expected ${n.length} arguments, but found ${r.length} instead.`);else{for(let t=0;t<r.length;t++){const e=Array.isArray(n)?n[t]:n.type,i=r[t];s.concat(t+1).checkSubtype(e,i.type)}if(0===s.errors.length)return new vl(i,a,o,r)}}if(Vs(!s||s.errors.length>0),1===r.length)e.errors.push(...s.errors);else{const i=(r.length?r:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(Ts).join(", ")})`:`(${Ts(e.type)}...)`;var e})).join(" | "),n=[];for(let i=1;i<t.length;i++){const a=e.parse(t[i],1+n.length);if(!a)return null;n.push(Ts(a.type))}e.error(`Expected arguments of type ${i}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){Vs(!vl.definitions),vl.definitions=e;for(const i in e)t[i]=vl}}class xl{constructor(t,e,i){this.type=ks,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Cs);if(!n)return null;const a=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Cs);if(!a)return null;let o=null;return i.locale&&(o=e.parse(i.locale,1,Rs),!o)?null:new xl(n,a,o)}evaluate(t){return new il(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Zl=8192;function Gl(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function wl(t,e){return!(t[0]<=e[0])&&(!(t[2]>=e[2])&&(!(t[1]<=e[1])&&!(t[3]>=e[3])))}function Wl(t,e){const i=(180+t[0])/360;const n=(a=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360);var a;const o=Math.pow(2,e.z);return[Math.round(i*o*Zl),Math.round(n*o*Zl)]}function Xl(t,e,i){const n=t[0]-e[0],a=t[1]-e[1],o=t[0]-i[0],r=t[1]-i[1];return n*r-o*a==0&&n*o<=0&&a*r<=0}function _l(t,e){let i=!1;for(let r=0,s=e.length;r<s;r++){const s=e[r];for(let e=0,r=s.length;e<r-1;e++){if(Xl(t,s[e],s[e+1]))return!1;n=t,a=s[e],o=s[e+1],a[1]>n[1]!=o[1]>n[1]&&n[0]<(o[0]-a[0])*(n[1]-a[1])/(o[1]-a[1])+a[0]&&(i=!i)}}var n,a,o;return i}function Vl(t,e){for(let i=0;i<e.length;i++)if(_l(t,e[i]))return!0;return!1}function Sl(t,e,i,n){const a=t[0]-i[0],o=t[1]-i[1],r=e[0]-i[0],s=e[1]-i[1],l=n[0]-i[0],c=n[1]-i[1],u=a*c-l*o,d=r*c-l*s;return u>0&&d<0||u<0&&d>0}function Bl(t,e,i,n){const a=[e[0]-t[0],e[1]-t[1]],o=[n[0]-i[0],n[1]-i[1]];return 0!=(r=o)[0]*(s=a)[1]-r[1]*s[0]&&!(!Sl(t,e,i,n)||!Sl(i,n,t,e));var r,s}function Ll(t,e,i){for(const n of i)for(let i=0;i<n.length-1;++i)if(Bl(t,e,n[i],n[i+1]))return!0;return!1}function Yl(t,e){for(let i=0;i<t.length;++i)if(!_l(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(Ll(t[i],t[i+1],e))return!1;return!0}function zl(t,e){for(let i=0;i<e.length;i++)if(Yl(t,e[i]))return!0;return!1}function Rl(t,e,i){const n=[];for(let a=0;a<t.length;a++){const o=[];for(let n=0;n<t[a].length;n++){const r=Wl(t[a][n],i);Gl(e,r),o.push(r)}n.push(o)}return n}function Cl(t,e,i){const n=[];for(let a=0;a<t.length;a++){const o=Rl(t[a],e,i);n.push(o)}return n}function Ml(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){const e=.5*n;let a=t[0]-i[0]>e?-n:i[0]-t[0]>e?n:0;0===a&&(a=t[0]-i[2]>e?-n:i[2]-t[0]>e?n:0),t[0]+=a}Gl(e,t)}function Jl(t,e,i,n){const a=Math.pow(2,n.z)*Zl,o=[n.x*Zl,n.y*Zl],r=[];for(const n of t)for(const t of n){const n=[t.x+o[0],t.y+o[1]];Ml(n,e,i,a),r.push(n)}return r}function Hl(t,e,i,n){const a=Math.pow(2,n.z)*Zl,o=[n.x*Zl,n.y*Zl],r=[];for(const i of t){const t=[];for(const n of i){const i=[n.x+o[0],n.y+o[1]];Gl(e,i),t.push(i)}r.push(t)}if(e[2]-e[0]<=a/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of r)for(const n of t)Ml(n,e,i,a)}var s;return r}class kl{constructor(t,e){this.type=Cs,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(sl(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const i=e.features[t].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new kl(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new kl(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new kl(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if("Polygon"===e.type){const o=Rl(e.coordinates,n,a),r=Jl(t.geometry(),i,n,a);if(!wl(i,n))return!1;for(const t of r)if(!_l(t,o))return!1}if("MultiPolygon"===e.type){const o=Cl(e.coordinates,n,a),r=Jl(t.geometry(),i,n,a);if(!wl(i,n))return!1;for(const t of r)if(!Vl(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if("Polygon"===e.type){const o=Rl(e.coordinates,n,a),r=Hl(t.geometry(),i,n,a);if(!wl(i,n))return!1;for(const t of r)if(!Yl(t,o))return!1}if("MultiPolygon"===e.type){const o=Cl(e.coordinates,n,a),r=Hl(t.geometry(),i,n,a);if(!wl(i,n))return!1;for(const t of r)if(!zl(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function jl(t){if(t instanceof vl){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof kl)return!1;let e=!0;return t.eachChild((t=>{e&&!jl(t)&&(e=!1)})),e}function Fl(t){if(t instanceof vl&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!Fl(t)&&(e=!1)})),e}function Nl(t,e){if(t instanceof vl&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild((t=>{i&&!Nl(t,e)&&(i=!1)})),i}class Tl{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new Tl(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Ul{constructor(t,e=[],i,n=new Ls,a=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=n,this.errors=a,this.expectedType=i}parse(t,e,i,n,a={}){return e?this.concat(e,i,n)._parse(t,a):this._parse(t,a)}_parse(t,e){function i(t,e,i){return"assert"===i?new pl(e,[t]):"coerce"===i?new fl(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[n];if(a){let n=a.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,a=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==a.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(t,a))return null}else n=i(n,t,e.typeAnnotation||"coerce");else n=i(n,t,e.typeAnnotation||"assert")}if(!(n instanceof ul)&&"resolvedImage"!==n.type.kind&&El(n)){const t=new Il;try{n=new ul(n.type,n.evaluate(t))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const n="number"==typeof t?this.path.concat(t):this.path,a=i?this.scope.concat(i):this.scope;return new Ul(this.registry,n,e||null,a,this.errors)}error(t,...e){const i=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new Bs(i,t))}checkSubtype(t,e){const i=Es(t,e);return i&&this.error(i),i}}function El(t){if(t instanceof Tl)return El(t.boundExpression);if(t instanceof vl&&"error"===t.name)return!1;if(t instanceof xl)return!1;if(t instanceof kl)return!1;const e=t instanceof fl||t instanceof pl;let i=!0;return t.eachChild((t=>{i=e?i&&El(t):i&&t instanceof ul})),!!i&&(jl(t)&&Nl(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}function Al(t,e){const i=t.length-1;let n,a,o=0,r=i,s=0;for(;o<=r;)if(s=Math.floor((o+r)/2),n=t[s],a=t[s+1],n<=e){if(s===i||e<a)return s;o=s+1}else{if(!(n>e))throw new dl("Input is not a number.");r=s-1}return 0}class Ol{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,zs);if(!i)return null;const n=[];let a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let i=1;i<t.length;i+=2){const o=1===i?-1/0:t[i],r=t[i+1],s=i,l=i+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(r,l,a);if(!c)return null;a=a||c.type,n.push([o,c])}return new Ol(a,i,n)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const a=e.length;if(n>=e[a-1])return i[a-1].evaluate(t);return i[Al(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var Pl=Kl;function Kl(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=n}function Dl(t,e,i){return t*(1-i)+e*i}Kl.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,n=0;n<8;n++){var a=this.sampleCurveX(i)-t;if(Math.abs(a)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i-=a/o}var r=0,s=1;for(i=t,n=0;n<20&&(a=this.sampleCurveX(i),!(Math.abs(a-t)<e));n++)t>a?r=i:s=i,i=.5*(s-r)+r;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};var Ql=Object.freeze({__proto__:null,number:Dl,color:function(t,e,i){return new el(Dl(t.r,e.r,i),Dl(t.g,e.g,i),Dl(t.b,e.b,i),Dl(t.a,e.a,i))},array:function(t,e,i){return t.map(((t,n)=>Dl(t,e[n],i)))}});const ql=.95047,$l=1.08883,tc=4/29,ec=6/29,ic=3*ec*ec,nc=Math.PI/180,ac=180/Math.PI;function oc(t){return t>.008856451679035631?Math.pow(t,1/3):t/ic+tc}function rc(t){return t>ec?t*t*t:ic*(t-tc)}function sc(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function lc(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function cc(t){const e=lc(t.r),i=lc(t.g),n=lc(t.b),a=oc((.4124564*e+.3575761*i+.1804375*n)/ql),o=oc((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(a-o),b:200*(o-oc((.0193339*e+.119192*i+.9503041*n)/$l)),alpha:t.a}}function uc(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*rc(e),i=ql*rc(i),n=$l*rc(n),new el(sc(3.2404542*i-1.5371385*e-.4985314*n),sc(-.969266*i+1.8760108*e+.041556*n),sc(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function dc(t,e,i){const n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}const hc={forward:cc,reverse:uc,interpolate:function(t,e,i){return{l:Dl(t.l,e.l,i),a:Dl(t.a,e.a,i),b:Dl(t.b,e.b,i),alpha:Dl(t.alpha,e.alpha,i)}}},pc={forward:function(t){const{l:e,a:i,b:n}=cc(t),a=Math.atan2(n,i)*ac;return{h:a<0?a+360:a,c:Math.sqrt(i*i+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*nc,i=t.c;return uc({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:dc(t.h,e.h,i),c:Dl(t.c,e.c,i),l:Dl(t.l,e.l,i),alpha:Dl(t.alpha,e.alpha,i)}}};class mc{constructor(t,e,i,n,a){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of a)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,i,n){let a=0;if("exponential"===t.name)a=bc(e,t.base,i,n);else if("linear"===t.name)a=bc(e,1,i,n);else if("cubic-bezier"===t.name){const o=t.controlPoints;a=new Pl(o[0],o[1],o[2],o[3]).solve(bc(e,1,i,n))}return a}static parse(t,e){let[i,n,a,...o]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(a=e.parse(a,2,zs),!a)return null;const r=[];let s=null;"interpolate-hcl"===i||"interpolate-lab"===i?s=Ms:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const i=o[t],n=o[t+1],a=t+3,l=t+4;if("number"!=typeof i)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=i)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',a);const c=e.parse(n,l,s);if(!c)return null;s=s||c.type,r.push([i,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new mc(s,i,n,a,r):e.error(`Type ${Ts(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const a=e.length;if(n>=e[a-1])return i[a-1].evaluate(t);const o=Al(e,n),r=e[o],s=e[o+1],l=mc.interpolationFactor(this.interpolation,n,r,s),c=i[o].evaluate(t),u=i[o+1].evaluate(t);return"interpolate"===this.operator?Ql[this.type.kind.toLowerCase()](c,u,l):"interpolate-hcl"===this.operator?pc.reverse(pc.interpolate(pc.forward(c),pc.forward(u),l)):hc.reverse(hc.interpolate(hc.forward(c),hc.forward(u),l))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function bc(t,e,i,n){const a=n-i,o=t-i;return 0===a?0:1===e?o/a:(Math.pow(e,o)-1)/(Math.pow(e,a)-1)}class yc{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const n=e.expectedType;n&&"value"!==n.kind&&(i=n);const a=[];for(const n of t.slice(1)){const t=e.parse(n,1+a.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,a.push(t)}Vs(i);const o=n&&a.some((t=>Es(n,t.type)));return new yc(o?Hs:i,a)}evaluate(t){let e,i=null,n=0;for(const a of this.args)if(n++,i=a.evaluate(t),i&&i instanceof ol&&!i.available&&(e||(e=i.name),i=null,n===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class fc{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let n=1;n<t.length-1;n+=2){const a=t[n];if("string"!=typeof a)return e.error(`Expected string, but found ${typeof a} instead.`,n);if(/[^a-zA-Z0-9_]/.test(a))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=e.parse(t[n+1],n+1);if(!o)return null;i.push([a,o])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return n?new fc(i,n):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,i]of this.bindings)t.push(e,i.serialize());return t.push(this.result.serialize()),t}}class gc{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,zs),n=e.parse(t[2],2,Ns(e.expectedType||Hs));if(!i||!n)return null;const a=n.type;return new gc(a.itemType,i,n)}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new dl(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new dl(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new dl(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Ic{constructor(t,e){this.type=Cs,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Hs),n=e.parse(t[2],2,Hs);return i&&n?As(i.type,[Cs,Rs,zs,Ys,Hs])?new Ic(i,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ts(i.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Os(e,["boolean","string","number","null"]))throw new dl(`Expected first argument to be of type boolean, string, number or null, but found ${Ts(ll(e))} instead.`);if(!Os(i,["string","array"]))throw new dl(`Expected second argument to be of type array or string, but found ${Ts(ll(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class vc{constructor(t,e,i){this.type=zs,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Hs),n=e.parse(t[2],2,Hs);if(!i||!n)return null;if(!As(i.type,[Cs,Rs,zs,Ys,Hs]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ts(i.type)} instead`);if(4===t.length){const a=e.parse(t[3],3,zs);return a?new vc(i,n,a):null}return new vc(i,n)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Os(e,["boolean","string","number","null"]))throw new dl(`Expected first argument to be of type boolean, string, number or null, but found ${Ts(ll(e))} instead.`);if(!Os(i,["string","array"]))throw new dl(`Expected second argument to be of type array or string, but found ${Ts(ll(i))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class xc{constructor(t,e,i,n,a,o){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=a,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const a={},o=[];for(let r=2;r<t.length-1;r+=2){let s=t[r];const l=t[r+1];Array.isArray(s)||(s=[s]);const c=e.concat(r);if(0===s.length)return c.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,ll(t)))return null}else i=ll(t);if(void 0!==a[String(t)])return c.error("Branch labels must be unique.");a[String(t)]=o.length}const u=e.parse(l,r,n);if(!u)return null;n=n||u.type,o.push(u)}const r=e.parse(t[1],1,Hs);if(!r)return null;const s=e.parse(t[t.length-1],t.length-1,n);return s?(Vs(i&&n),"value"!==r.type.kind&&e.concat(1).checkSubtype(i,r.type)?null:new xc(i,n,r,a,o,s)):null}evaluate(t){const e=this.input.evaluate(t);return(ll(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),i=[],n={};for(const t of e){const e=n[this.cases[t]];void 0===e?(n[this.cases[t]]=i.length,i.push([this.cases[t],[t]])):i[e][1].push(t)}const a=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,n]of i)1===n.length?t.push(a(n[0])):t.push(n.map(a)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class Zc{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const n=[];for(let a=1;a<t.length-1;a+=2){const o=e.parse(t[a],a,Cs);if(!o)return null;const r=e.parse(t[a+1],a+1,i);if(!r)return null;n.push([o,r]),i=i||r.type}const a=e.parse(t[t.length-1],t.length-1,i);return a?(Vs(i),new Zc(i,n,a)):null}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Gc{constructor(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,Hs),n=e.parse(t[2],2,zs);if(!i||!n)return null;if(!As(i.type,[Ns(Hs),Rs,Hs]))return e.error(`Expected first argument to be of type array or string, but found ${Ts(i.type)} instead`);if(4===t.length){const a=e.parse(t[3],3,zs);return a?new Gc(i.type,i,n,a):null}return new Gc(i.type,i,n)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!Os(e,["string","array"]))throw new dl(`Expected first argument to be of type array or string, but found ${Ts(ll(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function wc(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Wc(t,e,i,n){return 0===n.compare(e,i)}function Xc(t,e,i){const n="=="!==t&&"!="!==t;return class a{constructor(t,e,i){this.type=Cs,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let o=e.parse(t[1],1,Hs);if(!o)return null;if(!wc(i,o.type))return e.concat(1).error(`"${i}" comparisons are not supported for type '${Ts(o.type)}'.`);let r=e.parse(t[2],2,Hs);if(!r)return null;if(!wc(i,r.type))return e.concat(2).error(`"${i}" comparisons are not supported for type '${Ts(r.type)}'.`);if(o.type.kind!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return e.error(`Cannot compare types '${Ts(o.type)}' and '${Ts(r.type)}'.`);n&&("value"===o.type.kind&&"value"!==r.type.kind?o=new pl(r.type,[o]):"value"!==o.type.kind&&"value"===r.type.kind&&(r=new pl(o.type,[r])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,ks),!s)return null}return new a(o,r,s)}evaluate(a){const o=this.lhs.evaluate(a),r=this.rhs.evaluate(a);if(n&&this.hasUntypedArgument){const e=ll(o),i=ll(r);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new dl(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${i.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=ll(o),i=ll(r);if("string"!==t.kind||"string"!==i.kind)return e(a,o,r)}return this.collator?i(a,o,r,this.collator.evaluate(a)):e(a,o,r)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const _c=Xc("==",(function(t,e,i){return e===i}),Wc),Vc=Xc("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!Wc(0,e,i,n)})),Sc=Xc("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),Bc=Xc(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),Lc=Xc("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0})),Yc=Xc(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0}));class zc{constructor(t,e,i,n,a){this.type=Rs,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=a}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,zs);if(!i)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let a=null;if(n.locale&&(a=e.parse(n.locale,1,Rs),!a))return null;let o=null;if(n.currency&&(o=e.parse(n.currency,1,Rs),!o))return null;let r=null;if(n["min-fraction-digits"]&&(r=e.parse(n["min-fraction-digits"],1,zs),!r))return null;let s=null;return n["max-fraction-digits"]&&(s=e.parse(n["max-fraction-digits"],1,zs),!s)?null:new zc(i,a,o,r,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Rc{constructor(t){this.type=zs,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${Ts(i.type)} instead.`):new Rc(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new dl(`Expected value to be of type string or array, but found ${Ts(ll(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Cc={"==":_c,"!=":Vc,">":Bc,"<":Sc,">=":Yc,"<=":Lc,array:pl,at:gc,boolean:pl,case:Zc,coalesce:yc,collator:xl,format:ml,image:bl,in:Ic,"index-of":vc,interpolate:mc,"interpolate-hcl":mc,"interpolate-lab":mc,length:Rc,let:fc,literal:ul,match:xc,number:pl,"number-format":zc,object:pl,slice:Gc,step:Ol,string:pl,"to-boolean":fl,"to-color":fl,"to-number":fl,"to-string":fl,var:Tl,within:kl};function Mc(t,[e,i,n,a]){e=e.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);const o=a?a.evaluate(t):1,r=rl(e,i,n,o);if(r)throw new dl(r);return new el(e/255*o,i/255*o,n/255*o,o)}function Jc(t,e){return t in e}function Hc(t,e){const i=e[t];return void 0===i?null:i}function kc(t){return{type:t}}function jc(t){return{result:"success",value:t}}function Fc(t){return{result:"error",value:t}}function Nc(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Tc(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Uc(t){return!!t.expression&&t.expression.interpolated}function Ec(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Ac(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}vl.register(Cc,{error:[{kind:"error"},[Rs],(t,[e])=>{throw new dl(e.evaluate(t))}],typeof:[Rs,[Hs],(t,[e])=>Ts(ll(e.evaluate(t)))],"to-rgba":[Ns(zs,4),[Ms],(t,[e])=>e.evaluate(t).toArray()],rgb:[Ms,[zs,zs,zs],Mc],rgba:[Ms,[zs,zs,zs,zs],Mc],has:{type:Cs,overloads:[[[Rs],(t,[e])=>Jc(e.evaluate(t),t.properties())],[[Rs,Js],(t,[e,i])=>Jc(e.evaluate(t),i.evaluate(t))]]},get:{type:Hs,overloads:[[[Rs],(t,[e])=>Hc(e.evaluate(t),t.properties())],[[Rs,Js],(t,[e,i])=>Hc(e.evaluate(t),i.evaluate(t))]]},"feature-state":[Hs,[Rs],(t,[e])=>Hc(e.evaluate(t),t.featureState||{})],properties:[Js,[],t=>t.properties()],"geometry-type":[Rs,[],t=>t.geometryType()],id:[Hs,[],t=>t.id()],zoom:[zs,[],t=>t.globals.zoom],"heatmap-density":[zs,[],t=>t.globals.heatmapDensity||0],"line-progress":[zs,[],t=>t.globals.lineProgress||0],accumulated:[Hs,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[zs,kc(zs),(t,e)=>{let i=0;for(const n of e)i+=n.evaluate(t);return i}],"*":[zs,kc(zs),(t,e)=>{let i=1;for(const n of e)i*=n.evaluate(t);return i}],"-":{type:zs,overloads:[[[zs,zs],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[zs],(t,[e])=>-e.evaluate(t)]]},"/":[zs,[zs,zs],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[zs,[zs,zs],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[zs,[],()=>Math.LN2],pi:[zs,[],()=>Math.PI],e:[zs,[],()=>Math.E],"^":[zs,[zs,zs],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[zs,[zs],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[zs,[zs],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[zs,[zs],(t,[e])=>Math.log(e.evaluate(t))],log2:[zs,[zs],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[zs,[zs],(t,[e])=>Math.sin(e.evaluate(t))],cos:[zs,[zs],(t,[e])=>Math.cos(e.evaluate(t))],tan:[zs,[zs],(t,[e])=>Math.tan(e.evaluate(t))],asin:[zs,[zs],(t,[e])=>Math.asin(e.evaluate(t))],acos:[zs,[zs],(t,[e])=>Math.acos(e.evaluate(t))],atan:[zs,[zs],(t,[e])=>Math.atan(e.evaluate(t))],min:[zs,kc(zs),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[zs,kc(zs),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[zs,[zs],(t,[e])=>Math.abs(e.evaluate(t))],round:[zs,[zs],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[zs,[zs],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[zs,[zs],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Cs,[Rs,Hs],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[Cs,[Hs],(t,[e])=>t.id()===e.value],"filter-type-==":[Cs,[Rs],(t,[e])=>t.geometryType()===e.value],"filter-<":[Cs,[Rs,Hs],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n<a}],"filter-id-<":[Cs,[Hs],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<n}],"filter->":[Cs,[Rs,Hs],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n>a}],"filter-id->":[Cs,[Hs],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>n}],"filter-<=":[Cs,[Rs,Hs],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[Cs,[Hs],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<=n}],"filter->=":[Cs,[Rs,Hs],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[Cs,[Hs],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>=n}],"filter-has":[Cs,[Hs],(t,[e])=>e.value in t.properties()],"filter-has-id":[Cs,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Cs,[Ns(Rs)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Cs,[Ns(Hs)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Cs,[Rs,Ns(Hs)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Cs,[Rs,Ns(Hs)],(t,[e,i])=>function(t,e,i,n){for(;i<=n;){const a=i+n>>1;if(e[a]===t)return!0;e[a]>t?n=a-1:i=a+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:Cs,overloads:[[[Cs,Cs],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[kc(Cs),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:Cs,overloads:[[[Cs,Cs],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[kc(Cs),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[Cs,[Cs],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Cs,[Rs],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[Rs,[Rs],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Rs,[Rs],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Rs,kc(Hs),(t,e)=>e.map((e=>cl(e.evaluate(t)))).join("")],"resolved-locale":[Rs,[ks],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Oc{constructor(t,e){var i;this.expression=t,this._warningHistory={},this._evaluator=new Il,this._defaultValue=e?"color"===(i=e).type&&Ac(i.default)?new el(0,0,0,0):"color"===i.type?el.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,n,a,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,n,a,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new dl(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Pc(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Cc}function Kc(t,e){const i=new Ul(Cc,[],e?function(t){const e={color:Ms,string:Rs,number:zs,enum:Rs,boolean:Cs,formatted:js,resolvedImage:Fs};if("array"===t.type)return Ns(e[t.value]||Hs,t.length);return e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?jc(new Oc(n,e)):(Vs(i.errors.length>0),Fc(i.errors))}class Dc{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Fl(e.expression)}evaluateWithoutErrorHandling(t,e,i,n,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,a,o)}evaluate(t,e,i,n,a,o){return this._styleExpression.evaluate(t,e,i,n,a,o)}}class Qc{constructor(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Fl(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,i,n,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,a,o)}evaluate(t,e,i,n,a,o){return this._styleExpression.evaluate(t,e,i,n,a,o)}interpolationFactor(t,e,i){return this.interpolationType?mc.interpolationFactor(this.interpolationType,t,e,i):0}}function qc(t,e){const i=Kc(t,e);if("error"===i.result)return i;const n=i.value.expression,a=jl(n);if(!a&&!Nc(e))return Fc([new Bs("","data expressions not supported")]);const o=Nl(n,["zoom"]);if(!o&&!Tc(e))return Fc([new Bs("","zoom expressions not supported")]);const r=$c(n);if(!r&&!o)return Fc([new Bs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(r instanceof Bs)return Fc([r]);if(r instanceof mc&&!Uc(e))return Fc([new Bs("",'"interpolate" expressions cannot be used with this property')]);if(!r)return jc(new Dc(a?"constant":"source",i.value));const s=r instanceof mc?r.interpolation:void 0;return jc(new Qc(a?"camera":"composite",i.value,r.labels,s))}function $c(t){let e=null;if(t instanceof fc)e=$c(t.result);else if(t instanceof yc){for(const i of t.args)if(e=$c(i),e)break}else(t instanceof Ol||t instanceof mc)&&t.input instanceof vl&&"zoom"===t.input.name&&(e=t);return e instanceof Bs||t.eachChild((t=>{const i=$c(t);i instanceof Bs?e=i:!e&&i?e=new Bs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Bs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function tu(t){return"object"==typeof t?["literal",t]:t}function eu(t,e){let i=t.stops;if(!i)return function(t,e){const i=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",i]:i;if("enum"===e.type)return["match",i,Object.keys(e.values),i,t.default];{const n=["color"===e.type?"to-color":e.type,i,tu(t.default)];return"array"===e.type&&n.splice(1,0,e.value,e.length||null),n}}(t,e);const n=i&&"object"==typeof i[0][0],a=n||void 0!==t.property,o=n||!a;return i=i.map((t=>!a&&e.tokens&&"string"==typeof t[1]?[t[0],lu(t[1])]:[t[0],tu(t[1])])),n?function(t,e,i){const n={},a={},o=[];for(let e=0;e<i.length;e++){const r=i[e],s=r[0].zoom;void 0===n[s]&&(n[s]={zoom:s,type:t.type,property:t.property,default:t.default},a[s]=[],o.push(s)),a[s].push([r[0].value,r[1]])}if("exponential"===su({},e)){const i=[iu(t),["linear"],["zoom"]];for(const t of o){ru(i,t,au(n[t],e,a[t]),!1)}return i}{const t=["step",["zoom"]];for(const i of o){ru(t,i,au(n[i],e,a[i]),!0)}return ou(t),t}}(t,e,i):o?function(t,e,i,n=["zoom"]){const a=su(t,e);let o,r=!1;if("interval"===a)o=["step",n],r=!0;else{if("exponential"!==a)throw new Error(`Unknown zoom function type "${a}"`);{const e=void 0!==t.base?t.base:1;o=[iu(t),1===e?["linear"]:["exponential",e],n]}}for(const t of i)ru(o,t[0],t[1],r);return ou(o),o}(t,e,i):au(t,e,i)}function iu(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function nu(t,e){const i=tu((n=t.default,a=e.default,void 0!==n?n:void 0!==a?a:void 0));var n,a;return void 0===i&&"resolvedImage"===e.type?"":i}function au(t,e,i){const n=su(t,e),a=["get",t.property];if("categorical"===n&&"boolean"==typeof i[0][0]){Vs(t.stops.length>0&&t.stops.length<=2);const n=["case"];for(const t of i)n.push(["==",a,t[0]],t[1]);return n.push(nu(t,e)),n}if("categorical"===n){const n=["match",a];for(const t of i)ru(n,t[0],t[1],!1);return n.push(nu(t,e)),n}if("interval"===n){const e=["step",["number",a]];for(const t of i)ru(e,t[0],t[1],!0);return ou(e),void 0===t.default?e:["case",["==",["typeof",a],"number"],e,tu(t.default)]}if("exponential"===n){const e=void 0!==t.base?t.base:1,n=[iu(t),1===e?["linear"]:["exponential",e],["number",a]];for(const t of i)ru(n,t[0],t[1],!1);return void 0===t.default?n:["case",["==",["typeof",a],"number"],n,tu(t.default)]}throw new Error(`Unknown property function type ${n}`)}function ou(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function ru(t,e,i,n){t.length>3&&e===t[t.length-2]||(n&&2===t.length||t.push(e),t.push(i))}function su(t,e){return t.type?t.type:(Vs(e.expression),e.expression.interpolated?"exponential":"interval")}function lu(t){const e=["concat"],i=/{([^{}]+)}/g;let n=0;for(let a=i.exec(t);null!==a;a=i.exec(t)){const o=t.slice(n,i.lastIndex-a[0].length);n=i.lastIndex,o.length>0&&e.push(o),e.push(["get",a[1]])}if(1===e.length)return t;if(n<t.length)e.push(t.slice(n));else if(2===e.length)return["to-string",e[1]];return e}function cu(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!cu(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function uu(t){return du(t,{})}function du(t,e){if(cu(t))return t;if(!t)return!0;const i=t[0];if(t.length<=1)return"any"!==i;let n;if("=="===i||"!="===i||"<"===i||">"===i||"<="===i||">="===i){const[,a,o]=t;n=function(t,e,i,n){let a;if("$type"===t)return[i,["geometry-type"],e];a="$id"===t?["id"]:["get",t];if(n&&null!==e){const i=typeof e;n[t]=i}if("=="===i&&"$id"!==t&&null===e)return["all",["has",t],["==",a,null]];if("!="===i&&"$id"!==t&&null===e)return["any",["!",["has",t]],["!=",a,null]];return[i,a,e]}(a,o,i,e)}else{if("any"===i){const e=t.slice(1).map((t=>{const e={},i=du(t,e),n=function(t){const e=[];for(const i in t){const n="$id"===i?["id"]:["get",i];e.push(["==",["typeof",n],t[i]])}return 0===e.length||(1===e.length?e[0]:["all"].concat(e))}(e);return!0===n?i:["case",n,i,!1]}));return["any"].concat(e)}if("all"===i){const i=t.slice(1).map((t=>du(t,e)));return i.length>1?["all"].concat(i):[].concat(...i)}if("none"===i)return["!",du(["any"].concat(t.slice(1)),{})];n="in"===i?hu(t[1],t.slice(2)):"!in"===i?hu(t[1],t.slice(2),!0):"has"===i?pu(t[1]):"!has"!==i||["!",pu(t[1])]}return n}function hu(t,e,i=!1){if(0===e.length)return i;let n;n="$type"===t?["geometry-type"]:"$id"===t?["id"]:["get",t];let a=!0;const o=typeof e[0];for(const t of e)if(typeof t!==o){a=!1;break}if(a&&("string"===o||"number"===o)){const t=e.sort().filter(((t,i)=>0===i||e[i-1]!==t));return["match",n,t,!i,i]}return[i?"all":"any"].concat(e.map((t=>[i?"!=":"==",n,t])))}function pu(t){return"$type"===t||("$id"===t?["!=",["id"],null]:["has",t])}function mu(t){let e=!1;if(7===t.version&&(t=Qr(t),e=!0),8===t.version&&(e=!!function(t){const e=[];return Er(t,(t=>{t.filter&&(t.filter=uu(t.filter))})),Ar(t,{paint:!0,layout:!0},(({path:t,value:i,reference:n,set:a})=>{Pc(i)||("object"!=typeof i||Array.isArray(i)?n.tokens&&"string"==typeof i&&a(lu(i)):(a(eu(i,n)),e.push(t.join("."))))})),t}(t),e=!0),!e)throw new Error(`Cannot migrate from ${t.version}`);return t}class bu{constructor(t,e,i,n){this.message=(t?`${t}: `:"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)}}class yu{constructor(t){this.error=t,this.message=t.message;const e=t.message.match(/line (\d+)/);this.line=e?parseInt(e[1],10):0}}function fu(t){const e=t.key,i=t.value;return i?[new bu(e,i,"constants have been deprecated as of v8")]:[]}function gu(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Iu(t){if(Array.isArray(t))return t.map(Iu);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=Iu(t[i]);return e}return gu(t)}function vu(t){const e=t.key,i=t.value,n=t.valueSpec||{},a=t.objectElementValidators||{},o=t.style,r=t.styleSpec;let s=[];const l=Ec(i);if("object"!==l)return[new bu(e,i,`object expected, ${l} found`)];for(const t in i){const l=t.split(".")[0],c=n[l]||n["*"];let u;if(a[l])u=a[l];else if(n[l])u=Ju;else if(a["*"])u=a["*"];else{if(!n["*"]){s.push(new bu(e,i[t],`unknown property "${t}"`));continue}u=Ju}s=s.concat(u({key:(e?`${e}.`:e)+t,value:i[t],valueSpec:c,style:o,styleSpec:r,object:i,objectKey:t},i))}for(const t in n)a[t]||n[t].required&&void 0===n[t].default&&void 0===i[t]&&s.push(new bu(e,i,`missing required property "${t}"`));return s}function xu(t){const e=t.value,i=t.valueSpec,n=t.style,a=t.styleSpec,o=t.key,r=t.arrayElementValidator||Ju;if("array"!==Ec(e))return[new bu(o,e,`array expected, ${Ec(e)} found`)];if(i.length&&e.length!==i.length)return[new bu(o,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new bu(o,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let s={type:i.value,values:i.values};a.$version<7&&(s.function=i.function),"object"===Ec(i.value)&&(s=i.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(r({array:e,arrayIndex:t,value:e[t],valueSpec:s,style:n,styleSpec:a,key:`${o}[${t}]`}));return l}function Zu(t){const e=t.key,i=t.value,n=t.valueSpec;let a=Ec(i);return"number"===a&&i!=i&&(a="NaN"),"number"!==a?[new bu(e,i,`number expected, ${a} found`)]:"minimum"in n&&i<n.minimum?[new bu(e,i,`${i} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&i>n.maximum?[new bu(e,i,`${i} is greater than the maximum value ${n.maximum}`)]:[]}function Gu(t){const e=t.valueSpec,i=gu(t.value.type);let n,a,o,r={};const s="categorical"!==i&&void 0===t.value.property,l=!s,c="array"===Ec(t.value.stops)&&"array"===Ec(t.value.stops[0])&&"object"===Ec(t.value.stops[0][0]),u=vu({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new bu(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;e=e.concat(xu({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:d})),"array"===Ec(n)&&0===n.length&&e.push(new bu(t.key,n,"array must have at least one stop"));return e},default:function(t){return Ju({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&s&&u.push(new bu(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new bu(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!Uc(t.valueSpec)&&u.push(new bu(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Nc(t.valueSpec)?u.push(new bu(t.key,t.value,"property functions not supported")):s&&!Tc(t.valueSpec)&&u.push(new bu(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==t.value.property||u.push(new bu(t.key,t.value,'"property" property is required')),u;function d(t){let i=[];const n=t.value,s=t.key;if("array"!==Ec(n))return[new bu(s,n,`array expected, ${Ec(n)} found`)];if(2!==n.length)return[new bu(s,n,`array length 2 expected, length ${n.length} found`)];if(c){if("object"!==Ec(n[0]))return[new bu(s,n,`object expected, ${Ec(n[0])} found`)];if(void 0===n[0].zoom)return[new bu(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new bu(s,n,"object stop key must have value")];if(o&&o>gu(n[0].zoom))return[new bu(s,n[0].zoom,"stop zoom values must appear in ascending order")];gu(n[0].zoom)!==o&&(o=gu(n[0].zoom),a=void 0,r={}),i=i.concat(vu({key:`${s}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Zu,value:h}}))}else i=i.concat(h({key:`${s}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return Pc(Iu(n[1]))?i.concat([new bu(`${s}[1]`,n[1],"expressions are not allowed in function stops.")]):i.concat(Ju({key:`${s}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function h(t,o){const s=Ec(t.value),l=gu(t.value),c=null!==t.value?t.value:o;if(n){if(s!==n)return[new bu(t.key,c,`${s} stop domain type must match previous stop domain type ${n}`)]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new bu(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){let n=`number expected, ${s} found`;return Nc(e)&&void 0===i&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new bu(t.key,c,n)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==a&&l<a?[new bu(t.key,c,"stop domain values must appear in ascending order")]:(a=l,"categorical"===i&&l in r?[new bu(t.key,c,"stop domain values must be unique")]:(r[l]=!0,[])):[new bu(t.key,c,`integer expected, found ${l}`)]}}function wu(t){const e=("property"===t.expressionContext?qc:Kc)(Iu(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new bu(`${t.key}${e.key}`,t.value,e.message)));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new bu(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Fl(i))return[new bu(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Fl(i))return[new bu(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Nl(i,["zoom","feature-state"]))return[new bu(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!jl(i))return[new bu(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wu(t){const e=t.key,i=t.value,n=t.valueSpec,a=[];return Array.isArray(n.values)?-1===n.values.indexOf(gu(i))&&a.push(new bu(e,i,`expected one of [${n.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(n.values).indexOf(gu(i))&&a.push(new bu(e,i,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(i)} found`)),a}function Xu(t){return cu(Iu(t.value))?wu(Ss({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):_u(t)}function _u(t){const e=t.value,i=t.key;if("array"!==Ec(e))return[new bu(i,e,`array expected, ${Ec(e)} found`)];const n=t.styleSpec;let a,o=[];if(e.length<1)return[new bu(i,e,"filter array must have at least 1 element")];switch(o=o.concat(Wu({key:`${i}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),gu(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===gu(e[1])&&o.push(new bu(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new bu(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(a=Ec(e[1]),"string"!==a&&o.push(new bu(`${i}[1]`,e[1],`string expected, ${a} found`)));for(let r=2;r<e.length;r++)a=Ec(e[r]),"$type"===gu(e[1])?o=o.concat(Wu({key:`${i}[${r}]`,value:e[r],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new bu(`${i}[${r}]`,e[r],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let n=1;n<e.length;n++)o=o.concat(_u({key:`${i}[${n}]`,value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":a=Ec(e[1]),2!==e.length?o.push(new bu(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==a&&o.push(new bu(`${i}[1]`,e[1],`string expected, ${a} found`));break;case"within":a=Ec(e[1]),2!==e.length?o.push(new bu(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==a&&o.push(new bu(`${i}[1]`,e[1],`object expected, ${a} found`))}return o}function Vu(t,e){const i=t.key,n=t.style,a=t.styleSpec,o=t.value,r=t.objectKey,s=a[`${e}_${t.layerType}`];if(!s)return[];const l=r.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Ju({key:i,value:o,valueSpec:a.transition,style:n,styleSpec:a});const c=t.valueSpec||s[r];if(!c)return[new bu(i,o,`unknown property "${r}"`)];let u;if("string"===Ec(o)&&Nc(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new bu(i,o,`"${r}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const d=[];return"symbol"===t.layerType&&("text-field"===r&&n&&!n.glyphs&&d.push(new bu(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===r&&Ac(Iu(o))&&"identity"===gu(o.type)&&d.push(new bu(i,o,'"text-font" does not support identity functions'))),d.concat(Ju({key:t.key,value:o,valueSpec:c,style:n,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:r}))}function Su(t){return Vu(t,"paint")}function Bu(t){return Vu(t,"layout")}function Lu(t){let e=[];const i=t.value,n=t.key,a=t.style,o=t.styleSpec;i.type||i.ref||e.push(new bu(n,i,'either "type" or "ref" is required'));let r=gu(i.type);const s=gu(i.ref);if(i.id){const o=gu(i.id);for(let r=0;r<t.arrayIndex;r++){const t=a.layers[r];gu(t.id)===o&&e.push(new bu(n,i.id,`duplicate layer id "${i.id}", previously used at line ${t.id.__line__}`))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in i&&e.push(new bu(n,i[t],`"${t}" is prohibited for ref layers`))})),a.layers.forEach((e=>{gu(e.id)===s&&(t=e)})),t?t.ref?e.push(new bu(n,i.ref,"ref cannot reference another ref layer")):r=gu(t.type):e.push(new bu(n,i.ref,`ref layer "${s}" not found`))}else if("background"!==r)if(i.source){const t=a.sources&&a.sources[i.source],o=t&&gu(t.type);t?"vector"===o&&"raster"===r?e.push(new bu(n,i.source,`layer "${i.id}" requires a raster source`)):"raster"===o&&"raster"!==r?e.push(new bu(n,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==r?e.push(new bu(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==r||!i.paint||!i.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new bu(n,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new bu(n,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new bu(n,i.source,`source "${i.source}" not found`))}else e.push(new bu(n,i,'missing required property "source"'));return e=e.concat(vu({key:n,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ju({key:`${n}.type`,value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"}),filter:Xu,layout:t=>vu({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Bu(Ss({layerType:r},t))}}),paint:t=>vu({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Su(Ss({layerType:r},t))}})}})),e}function Yu(t){const e=t.value,i=t.key,n=Ec(e);return"string"!==n?[new bu(i,e,`string expected, ${n} found`)]:[]}const zu={promoteId:function({key:t,value:e}){if("string"===Ec(e))return Yu({key:t,value:e});{const i=[];for(const n in e)i.push(...Yu({key:`${t}.${n}`,value:e[n]}));return i}}};function Ru(t){const e=t.value,i=t.key,n=t.styleSpec,a=t.style;if(!e.type)return[new bu(i,e,'"type" is required')];const o=gu(e.type);let r;switch(o){case"vector":case"raster":case"raster-dem":return r=vu({key:i,value:e,valueSpec:n[`source_${o.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:zu}),r;case"geojson":if(r=vu({key:i,value:e,valueSpec:n.source_geojson,style:a,styleSpec:n,objectElementValidators:zu}),e.cluster)for(const t in e.clusterProperties){const[n,a]=e.clusterProperties[t],o="string"==typeof n?[n,["accumulated"],["get",t]]:n;r.push(...wu({key:`${i}.${t}.map`,value:a,expressionContext:"cluster-map"})),r.push(...wu({key:`${i}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return r;case"video":return vu({key:i,value:e,valueSpec:n.source_video,style:a,styleSpec:n});case"image":return vu({key:i,value:e,valueSpec:n.source_image,style:a,styleSpec:n});case"canvas":return[new bu(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Wu({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:n})}}function Cu(t){const e=t.value,i=t.styleSpec,n=i.light,a=t.style;let o=[];const r=Ec(e);if(void 0===e)return o;if("object"!==r)return o=o.concat([new bu("light",e,`object expected, ${r} found`)]),o;for(const t in e){const r=t.match(/^(.*)-transition$/);o=r&&n[r[1]]&&n[r[1]].transition?o.concat(Ju({key:t,value:e[t],valueSpec:i.transition,style:a,styleSpec:i})):n[t]?o.concat(Ju({key:t,value:e[t],valueSpec:n[t],style:a,styleSpec:i})):o.concat([new bu(t,e[t],`unknown property "${t}"`)])}return o}const Mu={"*":()=>[],array:xu,boolean:function(t){const e=t.value,i=t.key,n=Ec(e);return"boolean"!==n?[new bu(i,e,`boolean expected, ${n} found`)]:[]},number:Zu,color:function(t){const e=t.key,i=t.value,n=Ec(i);return"string"!==n?[new bu(e,i,`color expected, ${n} found`)]:null===Ps(i)?[new bu(e,i,`color expected, "${i}" found`)]:[]},constants:fu,enum:Wu,filter:Xu,function:Gu,layer:Lu,object:vu,source:Ru,light:Cu,string:Yu,formatted:function(t){return 0===Yu(t).length?[]:wu(t)},resolvedImage:function(t){return 0===Yu(t).length?[]:wu(t)}};function Ju(t){const e=t.value,i=t.valueSpec,n=t.styleSpec;if(i.expression&&Ac(gu(e)))return Gu(t);if(i.expression&&Pc(Iu(e)))return wu(t);if(i.type&&Mu[i.type])return Mu[i.type](t);return vu(Ss({},t,{valueSpec:i.type?n[i.type]:i}))}function Hu(t){const e=t.value,i=t.key,n=Yu(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new bu(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new bu(i,e,'"glyphs" url must include a "{range}" token'))),n}function ku(t,e=vr){let i=[];return i=i.concat(Ju({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Hu,"*":()=>[]}})),t.constants&&(i=i.concat(fu({key:"constants",value:t.constants,style:t,styleSpec:e}))),ju(i)}function ju(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function Fu(t){return function(...e){return ju(t.apply(this,e))}}ku.source=Fu(Ru),ku.light=Fu(Cu),ku.layer=Fu(Lu),ku.filter=Fu(Xu),ku.paintProperty=Fu(Su),ku.layoutProperty=Fu(Bu);var Nu,Tu,Uu={};function Eu(t,e=vr){let i=t;try{i=function(t){if(t instanceof String||"string"==typeof t||t instanceof Buffer)try{return Uu.parse(t.toString())}catch(t){throw new yu(t)}return t}(i)}catch(t){return[t]}return ku(i,e)}Nu=Uu,Tu=function(){var t=function(t,e,i,n){for(i=i||{},n=t.length;n--;i[t[n]]=e);return i},e=[1,12],i=[1,13],n=[1,9],a=[1,10],o=[1,11],r=[1,14],s=[1,15],l=[14,18,22,24],c=[18,22],u=[22,24],d={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,i,n,a,o,r){var s=o.length-1;switch(a){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(t),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=o[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:a,11:o,12:1,13:2,15:7,16:8,17:r,23:s},{1:[3]},{14:[1,16]},t(l,[2,7]),t(l,[2,8]),t(l,[2,9]),t(l,[2,10]),t(l,[2,11]),t(l,[2,12]),t(l,[2,3]),t(l,[2,4]),t(l,[2,5]),t([14,18,21,22,24],[2,1]),t(l,[2,2]),{3:20,4:e,18:[1,17],19:18,20:19},{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:a,11:o,13:23,15:7,16:8,17:r,23:s,24:[1,21],25:22},{1:[2,6]},t(l,[2,13]),{18:[1,24],22:[1,25]},t(c,[2,16]),{21:[1,26]},t(l,[2,18]),{22:[1,28],24:[1,27]},t(u,[2,20]),t(l,[2,14]),{3:20,4:e,20:29},{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:a,11:o,13:30,15:7,16:8,17:r,23:s},t(l,[2,19]),{3:5,4:e,5:6,6:i,7:3,8:n,9:4,10:a,11:o,13:31,15:7,16:8,17:r,23:s},t(c,[2,17]),t(c,[2,15]),t(u,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,i=[0],n=[null],a=[],o=this.table,r="",s=0,l=0,c=2,u=1,d=a.slice.call(arguments,1),h=Object.create(this.lexer),p={yy:{}};for(var m in this.yy)Object.prototype.hasOwnProperty.call(this.yy,m)&&(p.yy[m]=this.yy[m]);h.setInput(t,p.yy),p.yy.lexer=h,p.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var b=h.yylloc;a.push(b);var y=h.options&&h.options.ranges;function f(){var t;return"number"!=typeof(t=h.lex()||u)&&(t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,I,v,x,Z,G,w,W,X={};;){if(I=i[i.length-1],this.defaultActions[I]?v=this.defaultActions[I]:(null==g&&(g=f()),v=o[I]&&o[I][g]),void 0===v||!v.length||!v[0]){var _="";for(Z in W=[],o[I])this.terminals_[Z]&&Z>c&&W.push("'"+this.terminals_[Z]+"'");_=h.showPosition?"Parse error on line "+(s+1)+":\n"+h.showPosition()+"\nExpecting "+W.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(s+1)+": Unexpected "+(g==u?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(_,{text:h.match,token:this.terminals_[g]||g,line:h.yylineno,loc:b,expected:W})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+I+", token: "+g);switch(v[0]){case 1:i.push(g),n.push(h.yytext),a.push(h.yylloc),i.push(v[1]),g=null,l=h.yyleng,r=h.yytext,s=h.yylineno,b=h.yylloc;break;case 2:if(G=this.productions_[v[1]][1],X.$=n[n.length-G],X._$={first_line:a[a.length-(G||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(G||1)].first_column,last_column:a[a.length-1].last_column},y&&(X._$.range=[a[a.length-(G||1)].range[0],a[a.length-1].range[1]]),void 0!==(x=this.performAction.apply(X,[r,l,s,p.yy,v[1],n,a].concat(d))))return x;G&&(i=i.slice(0,-1*G*2),n=n.slice(0,-1*G),a=a.slice(0,-1*G)),i.push(this.productions_[v[1]][0]),n.push(X.$),a.push(X._$),w=o[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},h=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,n,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var o in a)this[o]=a[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,i,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length;o++)if((i=this._input.match(this.rules[a[o]]))&&(!e||i[0].length>e[0].length)){if(e=i,n=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,a[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,a[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,i,n){switch(i){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return t}();function p(){this.yy={}}return d.lexer=h,p.prototype=d,d.Parser=p,new p}(),Nu.parser=Tu,Nu.Parser=Tu.Parser,Nu.parse=function(){return Tu.parse.apply(Tu,arguments)};const Au=parseFloat;function Ou(t,e=";"){let i;if(Array.isArray(t))i=t.filter((t=>t));else{i=[];for(const e in t)t[e]&&i.push(`${e}:${t[e]}`)}return i.join(e)}var Pu=[],Ku=[];function Du(t,e){if(t&&"undefined"!=typeof document){var i,n=!0===e.prepend?"prepend":"append",a=!0===e.singleTag,o="string"==typeof e.container?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(a){var r=Pu.indexOf(o);-1===r&&(r=Pu.push(o)-1,Ku[r]={}),i=Ku[r]&&Ku[r][n]?Ku[r][n]:Ku[r][n]=s()}else i=s();65279===t.charCodeAt(0)&&(t=t.substring(1)),i.styleSheet?i.styleSheet.cssText+=t:i.appendChild(document.createTextNode(t))}function s(){var t=document.createElement("style");if(t.setAttribute("type","text/css"),e.attributes)for(var i=Object.keys(e.attributes),a=0;a<i.length;a++)t.setAttribute(i[a],e.attributes[i[a]]);var r="prepend"===n?"afterbegin":"beforeend";return o.insertAdjacentElement(r,t),t}}function Qu(t){let e,i,n,a,o,r,s;function l(t,e){return"string"==typeof t[7][4]?$u:qu}let c=l(t),u=c(t);return{c(){e=I("svg"),i=I("g"),n=I("g"),u.c(),w(n,"transform",t[10]),w(i,"transform",a=`translate(${t[7][0]/2} ${t[7][1]/2})`),w(i,"transform-origin",o=t[7][0]/4+" 0"),w(e,"id",t[0]),w(e,"class",r=p(t[8])+" svelte-1cj2gr0"),w(e,"style",t[9]),w(e,"viewBox",s=`0 0 ${t[7][0]} ${t[7][1]}`),w(e,"aria-hidden","true"),w(e,"role","img"),w(e,"xmlns","http://www.w3.org/2000/svg")},m(t,a){b(t,e,a),m(e,i),m(i,n),u.m(n,null)},p(t,d){c===(c=l(t))&&u?u.p(t,d):(u.d(1),u=c(t),u&&(u.c(),u.m(n,null))),1024&d&&w(n,"transform",t[10]),128&d&&a!==(a=`translate(${t[7][0]/2} ${t[7][1]/2})`)&&w(i,"transform",a),128&d&&o!==(o=t[7][0]/4+" 0")&&w(i,"transform-origin",o),1&d&&w(e,"id",t[0]),256&d&&r!==(r=p(t[8])+" svelte-1cj2gr0")&&w(e,"class",r),512&d&&w(e,"style",t[9]),128&d&&s!==(s=`0 0 ${t[7][0]} ${t[7][1]}`)&&w(e,"viewBox",s)},d(t){t&&y(e),u.d()}}}function qu(t){let e,i,n,a,o,r,s,l,c,u;return{c(){e=I("path"),r=I("path"),w(e,"d",i=t[7][4][0]),w(e,"fill",n=t[3]||t[1]||"currentColor"),w(e,"fill-opacity",a=0!=t[6]?t[4]:t[5]),w(e,"transform",o=`translate(${t[7][0]/-2} ${t[7][1]/-2})`),w(r,"d",s=t[7][4][1]),w(r,"fill",l=t[2]||t[1]||"currentColor"),w(r,"fill-opacity",c=0!=t[6]?t[5]:t[4]),w(r,"transform",u=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(t,i){b(t,e,i),b(t,r,i)},p(t,d){128&d&&i!==(i=t[7][4][0])&&w(e,"d",i),10&d&&n!==(n=t[3]||t[1]||"currentColor")&&w(e,"fill",n),112&d&&a!==(a=0!=t[6]?t[4]:t[5])&&w(e,"fill-opacity",a),128&d&&o!==(o=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&w(e,"transform",o),128&d&&s!==(s=t[7][4][1])&&w(r,"d",s),6&d&&l!==(l=t[2]||t[1]||"currentColor")&&w(r,"fill",l),112&d&&c!==(c=0!=t[6]?t[5]:t[4])&&w(r,"fill-opacity",c),128&d&&u!==(u=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&w(r,"transform",u)},d(t){t&&y(e),t&&y(r)}}}function $u(t){let e,i,n,a;return{c(){e=I("path"),w(e,"d",i=t[7][4]),w(e,"fill",n=t[1]||t[2]||"currentColor"),w(e,"transform",a=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(t,i){b(t,e,i)},p(t,o){128&o&&i!==(i=t[7][4])&&w(e,"d",i),6&o&&n!==(n=t[1]||t[2]||"currentColor")&&w(e,"fill",n),128&o&&a!==(a=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&w(e,"transform",a)},d(t){t&&y(e)}}}function td(t){let i,n=t[7][4]&&Qu(t);return{c(){n&&n.c(),i=Z()},m(t,e){n&&n.m(t,e),b(t,i,e)},p(t,[e]){t[7][4]?n?n.p(t,e):(n=Qu(t),n.c(),n.m(i.parentNode,i)):n&&(n.d(1),n=null)},i:e,o:e,d(t){n&&n.d(t),t&&y(i)}}}function ed(t,e,i){let n,a,o,r,{class:s=""}=e,{id:l=""}=e,{style:c=""}=e,{icon:u}=e,{size:d=""}=e,{color:h=""}=e,{fw:p=!1}=e,{pull:m=""}=e,{scale:b=1}=e,{translateX:y=0}=e,{translateY:f=0}=e,{rotate:g=""}=e,{flip:I=!1}=e,{spin:v=!1}=e,{pulse:x=!1}=e,{primaryColor:Z=""}=e,{secondaryColor:G=""}=e,{primaryOpacity:w=1}=e,{secondaryOpacity:W=.4}=e,{swapOpacity:X=!1}=e;return t.$$set=t=>{"class"in t&&i(11,s=t.class),"id"in t&&i(0,l=t.id),"style"in t&&i(12,c=t.style),"icon"in t&&i(13,u=t.icon),"size"in t&&i(14,d=t.size),"color"in t&&i(1,h=t.color),"fw"in t&&i(15,p=t.fw),"pull"in t&&i(16,m=t.pull),"scale"in t&&i(17,b=t.scale),"translateX"in t&&i(18,y=t.translateX),"translateY"in t&&i(19,f=t.translateY),"rotate"in t&&i(20,g=t.rotate),"flip"in t&&i(21,I=t.flip),"spin"in t&&i(22,v=t.spin),"pulse"in t&&i(23,x=t.pulse),"primaryColor"in t&&i(2,Z=t.primaryColor),"secondaryColor"in t&&i(3,G=t.secondaryColor),"primaryOpacity"in t&&i(4,w=t.primaryOpacity),"secondaryOpacity"in t&&i(5,W=t.secondaryOpacity),"swapOpacity"in t&&i(6,X=t.swapOpacity)},t.$$.update=()=>{8192&t.$$.dirty&&i(7,n=u&&u.icon||[0,0,"",[],""]),12584960&t.$$.dirty&&i(8,a=Ou([s,"svelte-fa",v&&"spin",x&&"pulse"]," ")),118784&t.$$.dirty&&i(9,o=function(t,e,i,n){let a,o,r,s,l,c="-.125em";return n&&(l="center",o="1.25em"),i&&(a=i),e&&("lg"==e?(s="1.33333em",r=".75em",c="-.225em"):s="xs"==e?".75em":"sm"==e?".875em":e.replace("x","em")),Ou([Ou({float:a,width:o,height:"1em","line-height":r,"font-size":s,"text-align":l,"vertical-align":c,"transform-origin":"center",overflow:"visible"}),t])}(c,d,m,p)),4063232&t.$$.dirty&&i(10,r=function(t,e,i,n,a,o=1,r="",s=""){let l=1,c=1;return a&&("horizontal"==a?l=-1:"vertical"==a?c=-1:l=c=-1),Ou([`translate(${Au(e)*o}${r},${Au(i)*o}${r})`,`scale(${l*Au(t)},${c*Au(t)})`,n&&`rotate(${n}${s})`]," ")}(b,y,f,g,I,512))},[l,h,Z,G,w,W,X,n,a,o,r,s,c,u,d,p,m,b,y,f,g,I,v,x]}Du(".spin.svelte-1cj2gr0{animation:svelte-1cj2gr0-spin 2s 0s infinite linear}.pulse.svelte-1cj2gr0{animation:svelte-1cj2gr0-spin 1s infinite steps(8)}@keyframes svelte-1cj2gr0-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}",{});var id=class extends st{constructor(t){super(),rt(this,t,ed,td,r,{class:11,id:0,style:12,icon:13,size:14,color:1,fw:15,pull:16,scale:17,translateX:18,translateY:19,rotate:20,flip:21,spin:22,pulse:23,primaryColor:2,secondaryColor:3,primaryOpacity:4,secondaryOpacity:5,swapOpacity:6})}},nd={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9898,9899,11044,61708,61915,9679],"f111","M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256z"]},ad={prefix:"fas",iconName:"download",icon:[512,512,[],"f019","M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"]},od={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM394.8 466.1C393.2 492.3 372.3 512 346.9 512H101.1C75.75 512 54.77 492.3 53.19 466.1L31.1 128H416L394.8 466.1z"]};
/*!
     * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     * Copyright 2022 Fonticons, Inc.
     */function rd(t){let i;return{c(){i=g("div"),w(i,"class","circle svelte-14upwad"),_(i,"--size",t[3]+t[1]),_(i,"--color",t[0]),_(i,"--duration",t[2])},m(t,e){b(t,i,e)},p(t,[e]){10&e&&_(i,"--size",t[3]+t[1]),1&e&&_(i,"--color",t[0]),4&e&&_(i,"--duration",t[2])},i:e,o:e,d(t){t&&y(i)}}}function sd(t,e,i){let{color:n="#FF3E00"}=e,{unit:a="px"}=e,{duration:o="0.75s"}=e,{size:r="60"}=e;return t.$$set=t=>{"color"in t&&i(0,n=t.color),"unit"in t&&i(1,a=t.unit),"duration"in t&&i(2,o=t.duration),"size"in t&&i(3,r=t.size)},[n,a,o,r]}Du(".circle.svelte-14upwad{height:var(--size);width:var(--size);border-color:var(--color) transparent var(--color) var(--color);border-width:calc(var(--size) / 15);border-style:solid;border-image:initial;border-radius:50%;animation:var(--duration) linear 0s infinite normal none running svelte-14upwad-rotate}@keyframes svelte-14upwad-rotate{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}",{});class ld extends st{constructor(t){super(),rt(this,t,sd,rd,r,{color:0,unit:1,duration:2,size:3})}}Du('.circle.svelte-1vclic6{width:var(--size);height:var(--size);box-sizing:border-box;position:relative;border:3px solid transparent;border-top-color:var(--colorOuter);border-radius:50%;animation:svelte-1vclic6-circleSpin var(--durationOuter) linear infinite}.circle.svelte-1vclic6:before,.circle.svelte-1vclic6:after{content:"";box-sizing:border-box;position:absolute;border:3px solid transparent;border-radius:50%}.circle.svelte-1vclic6:after{border-top-color:var(--colorInner);top:9px;left:9px;right:9px;bottom:9px;animation:svelte-1vclic6-circleSpin var(--durationInner) linear infinite}.circle.svelte-1vclic6:before{border-top-color:var(--colorCenter);top:3px;left:3px;right:3px;bottom:3px;animation:svelte-1vclic6-circleSpin var(--durationCenter) linear infinite}@keyframes svelte-1vclic6-circleSpin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}',{});Du(".wrapper.svelte-1vf8im1{width:var(--size);height:var(--size);display:flex;justify-content:center;align-items:center;line-height:0;box-sizing:border-box}.inner.svelte-1vf8im1{transform:scale(calc(var(--floatSize) / 52))}.ball-container.svelte-1vf8im1{animation:svelte-1vf8im1-ballTwo var(--duration) infinite;width:44px;height:44px;flex-shrink:0;position:relative}.single-ball.svelte-1vf8im1{width:44px;height:44px;position:absolute}.ball.svelte-1vf8im1{width:20px;height:20px;border-radius:50%;position:absolute;animation:svelte-1vf8im1-ballOne var(--duration) infinite ease}.ball-top-left.svelte-1vf8im1{background-color:var(--ballTopLeftColor);top:0;left:0}.ball-top-right.svelte-1vf8im1{background-color:var(--ballTopRightColor);top:0;left:24px}.ball-bottom-left.svelte-1vf8im1{background-color:var(--ballBottomLeftColor);top:24px;left:0}.ball-bottom-right.svelte-1vf8im1{background-color:var(--ballBottomRightColor);top:24px;left:24px}@keyframes svelte-1vf8im1-ballOne{0%{position:absolute}50%{top:12px;left:12px;position:absolute;opacity:0.5}100%{position:absolute}}@keyframes svelte-1vf8im1-ballTwo{0%{transform:rotate(0deg) scale(1)}50%{transform:rotate(360deg) scale(1.3)}100%{transform:rotate(720deg) scale(1)}}",{});Du(".wrapper.svelte-h1a2xs{position:relative;width:var(--size);height:var(--size)}.circle.svelte-h1a2xs{position:absolute;width:var(--size);height:var(--size);background-color:var(--color);border-radius:100%;opacity:0.6;top:0;left:0;animation-fill-mode:both;animation-name:svelte-h1a2xs-bounce !important}@keyframes svelte-h1a2xs-bounce{0%,100%{transform:scale(0)}50%{transform:scale(1)}}",{});Du('.svelte-1exboqr{overflow:hidden;position:relative;text-indent:-9999px;display:inline-block;background:#f86;border-radius:50%;transform:rotateZ(90deg);transform-origin:50% 50%;animation:svelte-1exboqr-plus-loader-background var(--duration) infinite ease-in-out}.svelte-1exboqr:after{background:#f86;border-radius:50% 0 0 50%;content:"";position:absolute;right:50%;top:0;width:50%;height:100%;transform-origin:100% 50%;animation:svelte-1exboqr-plus-loader-top var(--duration) infinite linear}.svelte-1exboqr:before{background:#fc6;border-radius:50% 0 0 50%;content:"";position:absolute;right:50%;top:0;width:50%;height:100%;transform-origin:100% 50%;animation:svelte-1exboqr-plus-loader-bottom var(--duration) infinite linear}@keyframes svelte-1exboqr-plus-loader-top{2.5%{background:#f86;transform:rotateY(0deg);animation-timing-function:ease-in}13.75%{background:#ff430d;transform:rotateY(90deg);animation-timing-function:step-start}13.76%{background:#ffae0d;transform:rotateY(90deg);animation-timing-function:ease-out}25%{background:#fc6;transform:rotateY(180deg)}27.5%{background:#fc6;transform:rotateY(180deg);animation-timing-function:ease-in}41.25%{background:#ffae0d;transform:rotateY(90deg);animation-timing-function:step-start}41.26%{background:#2cc642;transform:rotateY(90deg);animation-timing-function:ease-out}50%{background:#6d7;transform:rotateY(0deg)}52.5%{background:#6d7;transform:rotateY(0deg);animation-timing-function:ease-in}63.75%{background:#2cc642;transform:rotateY(90deg);animation-timing-function:step-start}63.76%{background:#1386d2;transform:rotateY(90deg);animation-timing-function:ease-out}75%{background:#4ae;transform:rotateY(180deg)}77.5%{background:#4ae;transform:rotateY(180deg);animation-timing-function:ease-in}91.25%{background:#1386d2;transform:rotateY(90deg);animation-timing-function:step-start}91.26%{background:#ff430d;transform:rotateY(90deg);animation-timing-function:ease-in}100%{background:#f86;transform:rotateY(0deg);animation-timing-function:step-start}}@keyframes svelte-1exboqr-plus-loader-bottom{0%{background:#fc6;animation-timing-function:step-start}50%{background:#fc6;animation-timing-function:step-start}75%{background:#4ae;animation-timing-function:step-start}100%{background:#4ae;animation-timing-function:step-start}}@keyframes svelte-1exboqr-plus-loader-background{0%{background:#f86;transform:rotateZ(180deg)}25%{background:#f86;transform:rotateZ(180deg);animation-timing-function:step-start}27.5%{background:#6d7;transform:rotateZ(90deg)}50%{background:#6d7;transform:rotateZ(90deg);animation-timing-function:step-start}52.5%{background:#6d7;transform:rotateZ(0deg)}75%{background:#6d7;transform:rotateZ(0deg);animation-timing-function:step-start}77.5%{background:#f86;transform:rotateZ(270deg)}100%{background:#f86;transform:rotateZ(270deg);animation-timing-function:step-start}}',{});Du(".wrapper.svelte-9juun5{width:var(--size);height:var(--size)}.circle.svelte-9juun5{width:var(--size);height:var(--size);background-color:var(--color);animation-duration:var(--duration);border-radius:100%;display:inline-block;animation:svelte-9juun5-scaleOut var(--duration) ease-in-out infinite}@keyframes svelte-9juun5-scaleOut{0%{transform:scale(0)}100%{transform:scale(1);opacity:0}}",{});Du(".wrapper.svelte-1wp57lu{width:var(--size);height:var(--stroke);transform:scale(calc(var(--floatSize) / 75));display:flex;justify-content:center;align-items:center}.line.svelte-1wp57lu{width:var(--size);height:var(--stroke);background:var(--color);border-radius:var(--stroke);transform-origin:center center;animation:svelte-1wp57lu-spineLine var(--duration) ease infinite}@keyframes svelte-1wp57lu-spineLine{0%{transform:rotate(-20deg);height:5px;width:75px}5%{height:5px;width:75px}30%{transform:rotate(380deg);height:5px;width:75px}40%{transform:rotate(360deg);height:5px;width:75px}55%{transform:rotate(0deg);height:5px;width:5px}65%{transform:rotate(0deg);height:5px;width:85px}68%{transform:rotate(0deg);height:5px}75%{transform:rotate(0deg);height:5px;width:1px}78%{height:5px;width:5px}90%{height:5px;width:75px;transform:rotate(0deg)}99%,100%{height:5px;width:75px;transform:rotate(-20deg)}}",{});Du(".wrapper.svelte-1uxpkwt{height:var(--size);width:var(--size);display:inline-block;text-align:center;font-size:10px}.rect.svelte-1uxpkwt{height:100%;width:10%;display:inline-block;margin-right:4px;background-color:var(--color);animation:svelte-1uxpkwt-stretch var(--duration) ease-in-out infinite}@keyframes svelte-1uxpkwt-stretch{0%,40%,100%{transform:scaleY(0.4)}20%{transform:scaleY(1)}}",{});Du(".wrapper.svelte-vhcw6{height:calc(var(--size) / 15);width:calc(var(--size) * 2);background-color:var(--rgba);position:relative;overflow:hidden;background-clip:padding-box}.lines.svelte-vhcw6{height:calc(var(--size) / 15);background-color:var(--color)}.small-lines.svelte-vhcw6{position:absolute;overflow:hidden;background-clip:padding-box;display:block;border-radius:2px;will-change:left, right;animation-fill-mode:forwards}.small-lines.\\31 .svelte-vhcw6{animation:var(--duration) cubic-bezier(0.65, 0.815, 0.735, 0.395) 0s\r\n      infinite normal none running svelte-vhcw6-long}.small-lines.\\32 .svelte-vhcw6{animation:var(--duration) cubic-bezier(0.165, 0.84, 0.44, 1)\r\n      calc((var(--duration)+0.1) / 2) infinite normal none running svelte-vhcw6-short}@keyframes svelte-vhcw6-long{0%{left:-35%;right:100%}60%{left:100%;right:-90%}100%{left:100%;right:-90%}}@keyframes svelte-vhcw6-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}100%{left:107%;right:-8%}}",{});Du(".wrapper.svelte-1cy66mt{width:var(--size);height:var(--size)}.circle.svelte-1cy66mt{border-radius:100%;animation-fill-mode:both;position:absolute;opacity:0;width:var(--size);height:var(--size);background-color:var(--color);animation:svelte-1cy66mt-bounce var(--duration) linear infinite}@keyframes svelte-1cy66mt-bounce{0%{opacity:0;transform:scale(0)}5%{opacity:1}100%{opacity:0;transform:scale(1)}}",{});Du(".wrapper.svelte-17ey38u{position:relative;width:var(--size);height:var(--size)}.border.svelte-17ey38u{border-color:var(--color);position:absolute;top:0px;left:0px;width:var(--size);height:var(--size);opacity:0.4;perspective:800px;border-width:6px;border-style:solid;border-image:initial;border-radius:100%}.border.\\31 .svelte-17ey38u{animation:var(--duration) linear 0s infinite normal none running svelte-17ey38u-ringOne}.border.\\32 .svelte-17ey38u{animation:var(--duration) linear 0s infinite normal none running svelte-17ey38u-ringTwo}@keyframes svelte-17ey38u-ringOne{0%{transform:rotateX(0deg) rotateY(0deg) rotateZ(0deg)}100%{transform:rotateX(360deg) rotateY(180deg) rotateZ(360deg)}}@keyframes svelte-17ey38u-ringTwo{0%{transform:rotateX(0deg) rotateY(0deg) rotateZ(0deg)}100%{transform:rotateX(180deg) rotateY(360deg) rotateZ(360deg)}}",{});Du(".wrapper.svelte-14w6xk7{height:var(--size);width:var(--size);display:flex;align-items:center;justify-content:center}.dot.svelte-14w6xk7{height:var(--dotSize);width:var(--dotSize);background-color:var(--color);margin:2px;display:inline-block;border-radius:100%;animation:svelte-14w6xk7-sync var(--duration) ease-in-out infinite alternate both running}@-webkit-keyframes svelte-14w6xk7-sync{33%{-webkit-transform:translateY(10px);transform:translateY(10px)}66%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes svelte-14w6xk7-sync{33%{-webkit-transform:translateY(10px);transform:translateY(10px)}66%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}100%{-webkit-transform:translateY(0);transform:translateY(0)}}",{});Du(".wrapper.svelte-1fuumrt{width:var(--size);height:calc(var(--size) / 2);overflow:hidden}.rainbow.svelte-1fuumrt{width:var(--size);height:var(--size);border-left-color:transparent;border-bottom-color:transparent;border-top-color:var(--color);border-right-color:var(--color);box-sizing:border-box;transform:rotate(-200deg);border-radius:50%;border-style:solid;animation:var(--duration) ease-in-out 0s infinite normal none running\r\n      svelte-1fuumrt-rotate}@keyframes svelte-1fuumrt-rotate{0%{border-width:10px}25%{border-width:3px}50%{transform:rotate(115deg);border-width:10px}75%{border-width:3px}100%{border-width:10px}}",{});Du(".wrapper.svelte-8cmcz4{position:relative;display:flex;justify-content:center;align-items:center;width:calc(var(--size) * 2.5);height:var(--size);overflow:hidden}.bar.svelte-8cmcz4{position:absolute;top:calc(var(--size) / 10);width:calc(var(--size) / 5);height:calc(var(--size) / 10);margin-top:calc(var(--size) - var(--size) / 10);transform:skewY(0deg);background-color:var(--color);animation:svelte-8cmcz4-motion var(--duration) ease-in-out infinite}@keyframes svelte-8cmcz4-motion{25%{transform:skewY(25deg)}50%{height:100%;margin-top:0}75%{transform:skewY(-25deg)}}",{});Du(".wrapper.svelte-1x2s7pr{width:calc(var(--size) * 1.3);height:calc(var(--size) * 1.3);display:flex;justify-content:center;align-items:center}.firework.svelte-1x2s7pr{border:calc(var(--size) / 10) dotted var(--color);width:var(--size);height:var(--size);border-radius:50%;animation:svelte-1x2s7pr-fire var(--duration) cubic-bezier(0.165, 0.84, 0.44, 1) infinite}@keyframes svelte-1x2s7pr-fire{0%{opacity:1;transform:scale(0.1)}25%{opacity:0.85}100%{transform:scale(1);opacity:0}}",{});Du(".wrapper.svelte-446r86{position:relative;display:flex;justify-content:center;align-items:center;width:var(--size);height:calc(var(--size) / 2.5)}.cube.svelte-446r86{position:absolute;top:0px;width:calc(var(--size) / 5);height:calc(var(--size) / 2.5);background-color:var(--color);animation:svelte-446r86-motion var(--duration) cubic-bezier(0.895, 0.03, 0.685, 0.22)\r\n      infinite}@keyframes svelte-446r86-motion{0%{opacity:1}50%{opacity:0}100%{opacity:1}}",{});Du(".wrapper.svelte-1v1mfqa{position:relative;display:flex;justify-content:center;align-items:center;width:var(--size);height:var(--size)}.ring.svelte-1v1mfqa{position:absolute;border:2px solid var(--color);border-radius:50%;background-color:transparent;animation:svelte-1v1mfqa-motion var(--duration) ease infinite}@keyframes svelte-1v1mfqa-motion{0%{transform:translateY(var(--motionOne))}50%{transform:translateY(var(--motionTwo))}100%{transform:translateY(var(--motionThree))}}",{});Du(".wrapper.svelte-1unnvn6{height:var(--size);width:var(--size);display:flex;justify-content:center;align-items:center}.spinner.svelte-1unnvn6{height:var(--size);width:var(--size);animation:svelte-1unnvn6-rotate var(--duration) infinite linear}.dot.svelte-1unnvn6{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:var(--color);border-radius:100%;animation:svelte-1unnvn6-bounce var(--duration) infinite ease-in-out}@keyframes svelte-1unnvn6-rotate{100%{transform:rotate(360deg)}}@keyframes svelte-1unnvn6-bounce{0%,100%{transform:scale(0)}50%{transform:scale(1)}}",{});Du(".wrapper.svelte-tycttu{position:relative;display:flex;justify-content:center;align-items:center;width:var(--size);height:var(--size)}.shadow.svelte-tycttu{color:var(--color);font-size:var(--size);overflow:hidden;width:var(--size);height:var(--size);border-radius:50%;margin:28px auto;position:relative;transform:translateZ(0);animation:svelte-tycttu-load var(--duration) infinite ease,\r\n      svelte-tycttu-round var(--duration) infinite ease}@keyframes svelte-tycttu-load{0%{box-shadow:0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em,\r\n        0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em}5%,95%{box-shadow:0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em,\r\n        0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em}10%,59%{box-shadow:0 -0.83em 0 -0.4em, -0.087em -0.825em 0 -0.42em,\r\n        -0.173em -0.812em 0 -0.44em, -0.256em -0.789em 0 -0.46em,\r\n        -0.297em -0.775em 0 -0.477em}20%{box-shadow:0 -0.83em 0 -0.4em, -0.338em -0.758em 0 -0.42em,\r\n        -0.555em -0.617em 0 -0.44em, -0.671em -0.488em 0 -0.46em,\r\n        -0.749em -0.34em 0 -0.477em}38%{box-shadow:0 -0.83em 0 -0.4em, -0.377em -0.74em 0 -0.42em,\r\n        -0.645em -0.522em 0 -0.44em, -0.775em -0.297em 0 -0.46em,\r\n        -0.82em -0.09em 0 -0.477em}100%{box-shadow:0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em,\r\n        0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em}}@keyframes svelte-tycttu-round{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}",{});Du(".square.svelte-btmyrn{height:var(--size);width:var(--size);background-color:var(--color);animation:svelte-btmyrn-squareDelay var(--duration) 0s infinite\r\n      cubic-bezier(0.09, 0.57, 0.49, 0.9);animation-fill-mode:both;perspective:100px;display:inline-block}@keyframes svelte-btmyrn-squareDelay{25%{-webkit-transform:rotateX(180deg) rotateY(0);transform:rotateX(180deg) rotateY(0)}50%{-webkit-transform:rotateX(180deg) rotateY(180deg);transform:rotateX(180deg) rotateY(180deg)}75%{-webkit-transform:rotateX(0) rotateY(180deg);transform:rotateX(0) rotateY(180deg)}100%{-webkit-transform:rotateX(0) rotateY(0);transform:rotateX(0) rotateY(0)}}",{});Du(".wrapper.svelte-nlgli4{height:var(--size);width:var(--size);border-radius:100%;animation:svelte-nlgli4-moonStretchDelay var(--duration) 0s infinite linear;animation-fill-mode:forwards;position:relative}.circle-one.svelte-nlgli4{top:var(--moonSize);background-color:var(--color);width:calc(var(--size) / 7);height:calc(var(--size) / 7);border-radius:100%;animation:svelte-nlgli4-moonStretchDelay var(--duration) 0s infinite linear;animation-fill-mode:forwards;opacity:0.8;position:absolute}.circle-two.svelte-nlgli4{opacity:0.1;border:calc(var(--size) / 7) solid var(--color);height:var(--size);width:var(--size);border-radius:100%;box-sizing:border-box}@keyframes svelte-nlgli4-moonStretchDelay{100%{transform:rotate(360deg)}}",{});Du(".wrapper.svelte-1sqavxm.svelte-1sqavxm{height:var(--size);width:var(--size);position:relative;display:flex;justify-content:center;align-items:center}.wrapper.svelte-1sqavxm .svelte-1sqavxm{line-height:0;box-sizing:border-box}.spinner-inner.svelte-1sqavxm.svelte-1sqavxm{height:var(--size);width:var(--size);transform:scale(calc(var(--size) / 70))}.mask.svelte-1sqavxm.svelte-1sqavxm{position:absolute;border-radius:2px;overflow:hidden;perspective:1000;backface-visibility:hidden}.plane.svelte-1sqavxm.svelte-1sqavxm{background:var(--color);width:400%;height:100%;position:absolute;z-index:100;perspective:1000;backface-visibility:hidden}#top.svelte-1sqavxm .plane.svelte-1sqavxm{z-index:2000;animation:svelte-1sqavxm-trans1 var(--duration) ease-in infinite 0s backwards}#middle.svelte-1sqavxm .plane.svelte-1sqavxm{transform:translate3d(0px, 0, 0);background:var(--rgba);animation:svelte-1sqavxm-trans2 var(--duration) linear infinite calc(var(--duration) / 4)\r\n      backwards}#bottom.svelte-1sqavxm .plane.svelte-1sqavxm{z-index:2000;animation:svelte-1sqavxm-trans3 var(--duration) ease-out infinite\r\n      calc(var(--duration) / 2) backwards}#top.svelte-1sqavxm.svelte-1sqavxm{width:53px;height:20px;left:20px;top:5px;transform:skew(-15deg, 0);z-index:100}#middle.svelte-1sqavxm.svelte-1sqavxm{width:33px;height:20px;left:20px;top:21px;transform:skew(-15deg, 40deg)}#bottom.svelte-1sqavxm.svelte-1sqavxm{width:53px;height:20px;top:35px;transform:skew(-15deg, 0)}@keyframes svelte-1sqavxm-trans1{from{transform:translate3d(53px, 0, 0)}to{transform:translate3d(-250px, 0, 0)}}@keyframes svelte-1sqavxm-trans2{from{transform:translate3d(-160px, 0, 0)}to{transform:translate3d(53px, 0, 0)}}@keyframes svelte-1sqavxm-trans3{from{transform:translate3d(53px, 0, 0)}to{transform:translate3d(-220px, 0, 0)}}",{});Du("span.svelte-evhfle{width:var(--size);height:calc(var(--size) / 4);position:relative;display:block}div.svelte-evhfle{width:calc(var(--size) / 4);height:calc(var(--size) / 4);position:absolute;left:0;top:0;border-radius:2px;background:var(--color);transform:translateX(-50%) rotate(45deg) scale(0);animation:svelte-evhfle-diamonds var(--duration) linear infinite}div.svelte-evhfle:nth-child(1){animation-delay:calc(var(--duration) * 2 / 3 * -1)}div.svelte-evhfle:nth-child(2){animation-delay:calc(var(--duration) * 2 / 3 * -2)}div.svelte-evhfle:nth-child(3){animation-delay:calc(var(--duration) * 2 / 3 * -3)}@keyframes svelte-evhfle-diamonds{50%{left:50%;transform:translateX(-50%) rotate(45deg) scale(1)}100%{left:100%;transform:translateX(-50%) rotate(45deg) scale(0)}}",{});Du('div.svelte-1cgj772{position:relative;width:var(--size);height:var(--size);background-color:transparent;box-shadow:inset 0px 0px 0px 2px var(--color);border-radius:50%}div.svelte-1cgj772::before,div.svelte-1cgj772:after{position:absolute;content:"";background-color:var(--color)}div.svelte-1cgj772:after{width:calc(var(--size) / 2.4);height:2px;top:calc(var(--size) / 2);left:calc(var(--size) / 2);transform-origin:1px 1px;animation:svelte-1cgj772-rotate calc(var(--duration) / 4) linear infinite}div.svelte-1cgj772:before{width:calc(var(--size) / 3);height:2px;top:calc((var(--size) / 2));left:calc((var(--size) / 2));transform-origin:1px 1px;animation:svelte-1cgj772-rotate var(--duration) linear infinite}@keyframes svelte-1cgj772-rotate{100%{transform:rotate(360deg)}}',{});function cd(t){let i,n,a,o,r,s=t[0][0].toUpperCase()+t[0].substring(1)+"";return{c(){i=g("div"),n=v(s),w(i,"class",a="tab "+(t[1]?"selected":"")+" svelte-c8a31t")},m(e,a){b(e,i,a),m(i,n),o||(r=G(i,"click",t[2]),o=!0)},p(t,[e]){1&e&&s!==(s=t[0][0].toUpperCase()+t[0].substring(1)+"")&&W(n,s),2&e&&a!==(a="tab "+(t[1]?"selected":"")+" svelte-c8a31t")&&w(i,"class",a)},i:e,o:e,d(t){t&&y(i),o=!1,r()}}}function ud(t,e,i){let{label:n}=e,{selected:a}=e;const o=R();return t.$$set=t=>{"label"in t&&i(0,n=t.label),"selected"in t&&i(1,a=t.selected)},[n,a,function(){o("tabchange",{tab:n})}]}Du(".tab.svelte-c8a31t{margin-right:1em;cursor:pointer}.selected.svelte-c8a31t{text-decoration:underline}",{});class dd extends st{constructor(t){super(),rt(this,t,ud,cd,r,{label:0,selected:1})}}function hd(t){let e,i,n,a,o,r,s;return i=new dd({props:{label:"fill",selected:"fill"===t[0]}}),i.$on("tabchange",t[1]),a=new dd({props:{label:"lines",selected:"lines"===t[0]}}),a.$on("tabchange",t[2]),r=new dd({props:{label:"typography",selected:"typography"===t[0]}}),r.$on("tabchange",t[3]),{c(){e=g("div"),it(i.$$.fragment),n=x(),it(a.$$.fragment),o=x(),it(r.$$.fragment),w(e,"class","tabs svelte-1fkp8yf")},m(t,l){b(t,e,l),nt(i,e,null),m(e,n),nt(a,e,null),m(e,o),nt(r,e,null),s=!0},p(t,[e]){const n={};1&e&&(n.selected="fill"===t[0]),i.$set(n);const o={};1&e&&(o.selected="lines"===t[0]),a.$set(o);const s={};1&e&&(s.selected="typography"===t[0]),r.$set(s)},i(t){s||(Q(i.$$.fragment,t),Q(a.$$.fragment,t),Q(r.$$.fragment,t),s=!0)},o(t){q(i.$$.fragment,t),q(a.$$.fragment,t),q(r.$$.fragment,t),s=!1},d(t){t&&y(e),at(i),at(a),at(r)}}}function pd(t,e,i){let{selectedTab:n}=e;return t.$$set=t=>{"selectedTab"in t&&i(0,n=t.selectedTab)},[n,function(e){C.call(this,t,e)},function(e){C.call(this,t,e)},function(e){C.call(this,t,e)}]}Du(".tabs.svelte-1fkp8yf{display:flex;justify-content:space-between;font-weight:bold}",{});class md extends st{constructor(t){super(),rt(this,t,pd,hd,r,{selectedTab:0})}}function bd(t){let i,n,a;return{c(){i=g("button"),i.textContent="×",w(i,"class","close-button svelte-1aqii99")},m(e,o){b(e,i,o),n||(a=G(i,"click",t[3]),n=!0)},p:e,d(t){t&&y(i),n=!1,a()}}}function yd(t){let e,i,n,a,o,r,s,c,p,f=t[2]&&bd(t);const I=t[5].default,Z=l(I,t,t[4],null);return{c(){e=g("div"),f&&f.c(),i=x(),n=g("pre"),a=v("    "),o=g("code"),r=v("\n      "),Z&&Z.c(),s=v("\n    "),c=v("\n  "),w(e,"class","tooltip svelte-1aqii99"),_(e,"left",t[0]+"px"),_(e,"top",t[1]+"px")},m(t,l){b(t,e,l),f&&f.m(e,null),m(e,i),m(e,n),m(n,a),m(n,o),m(o,r),Z&&Z.m(o,null),m(o,s),m(n,c),p=!0},p(t,[n]){t[2]?f?f.p(t,n):(f=bd(t),f.c(),f.m(e,i)):f&&(f.d(1),f=null),Z&&Z.p&&(!p||16&n)&&d(Z,I,t,t[4],p?u(I,t[4],n,null):h(t[4]),null),(!p||1&n)&&_(e,"left",t[0]+"px"),(!p||2&n)&&_(e,"top",t[1]+"px")},i(t){p||(Q(Z,t),p=!0)},o(t){q(Z,t),p=!1},d(t){t&&y(e),f&&f.d(),Z&&Z.d(t)}}}function fd(t,e,i){let{$$slots:n={},$$scope:a}=e;const o=R();let{left:r}=e,{top:s}=e,{showCloseButton:l=!0}=e;return t.$$set=t=>{"left"in t&&i(0,r=t.left),"top"in t&&i(1,s=t.top),"showCloseButton"in t&&i(2,l=t.showCloseButton),"$$scope"in t&&i(4,a=t.$$scope)},[r,s,l,function(){o("close")},a,n]}Du(".tooltip.svelte-1aqii99{background:white;border:1px solid black;padding:1em;position:absolute}.close-button.svelte-1aqii99{background:none;border:none;float:right;margin:0;margin-right:-0.5em;margin-top:-0.5em;padding:0.5em}",{});class gd extends st{constructor(t){super(),rt(this,t,fd,yd,r,{left:0,top:1,showCloseButton:2})}}function Id(t){const[e]=t;if("step"===e)return function(t){return e=>{const i=t.slice(2).reverse();for(let t=0;t<i.length;t++){const n=i[t];if(e>=(i[t+1]||0))return n}return i[0]}}(t);if("interpolate"===e){if("linear"===t[1][0])return function(t){const[e,[i],[n],...a]=t;return t=>t<a[0]?a[1]:t>a[a.length-2]?a[a.length-1]:ti(a.filter(((t,e)=>e%2==0)),a.filter(((t,e)=>e%2==1)))(t)}(t)}return()=>{}}function vd(t,e,i=null){return null==t?i:"number"==typeof t?t:Array.isArray(t)?Id(t)(e):i}let xd=24,Zd=1e3,Gd=25,wd=250,Wd=50,Xd=25;const _d=100,Vd=[{name:"Mapbox GL",value:"mapbox-gl"},{name:"Maplibre GL",value:"maplibre-gl"}],Sd=t=>Array.isArray(t)&&"literal"===t[0]?t[1]:Array.isArray(t)?t.map(Sd):t,Bd=t=>{if(!Array.isArray(t))return!1;switch(t[0]){case"step":{const[,[e]]=t;if("zoom"===e)return!0;break}case"interpolate":{const[,[e],[i]]=t;if("linear"===e&&"zoom"===i)return!0;break}default:return!1}},Ld=t=>{if(!Bd(t))return[];if("interpolate"===t[0])return t.slice(3);let e=t.slice(2);return e.unshift(.1),e=e.reduce(((t,i,n)=>(n%2==0&&0!==n?(t.push(Number(i)-.01,e[n-1]),t.push(i)):t.push(i),t)),[]),e},Yd=(t,e)=>{let i=[];const n=t.minzoom||0,a=t.maxzoom||xd;let o,r,s,l=0;if("none"===t?.layout?.visibility)return{gradients:i,color:{color:"rgba(0, 0, 0, 0)",strokeColor:"rgba(0, 0, 0, 0)",strokeWidth:l}};switch(t.type){case"fill":o=t?.paint?.["fill-color"],r=t?.paint?.["fill-opacity"],s=t?.paint?.["fill-outline-color"],s&&(l=1);break;case"background":o=t?.paint?.["background-color"];break;case"line":o=t?.paint?.["line-color"],r=t?.paint?.["line-opacity"];break;case"symbol":o=t?.paint?.["text-color"],r=t?.paint?.["text-opacity"]}o=Sd(o)||"black",r=void 0!==r?Sd(r):1;const c=(({layerId:t,color:e,opacity:i,minZoom:n,maxZoom:a,xScale:o})=>{const r=Bd(e)&&e[0],s=Bd(i)&&i[0],l=[];if(r||s){const c=o(n),u=o(a)-o(n);let d=Ld(e),h=Ld(i);d.concat(h).filter(((t,e)=>e%2==0)).sort(((t,e)=>t-e)).forEach((n=>{let a=r?vd(e,n,null):e,d=s?vd(i,n,null):i;Array.isArray(a)&&(console.warn(`${t}: Unhandled data expression, ${JSON.stringify(a,null,2)}`),a="black"),Array.isArray(d)&&(console.warn(`${t}: Unhandled data expression, ${JSON.stringify(d,null,2)}`),d=1),d=parseFloat(d.toFixed(2)),l.push({offset:(o(n)-c)/u*100,stopColor:a,stopOpacity:d})}))}return l})({layerId:t.id,color:o,opacity:r,minZoom:n,maxZoom:a,xScale:e});if(c.length>1){const e=(t=>{const e=['"'," ","'"];let i=t;for(const t of e)i=i.replaceAll(t,"");return i})(t.id);i=[{id:e,stops:c.map((t=>({offset:`${t.offset}%`,stopColor:t.stopColor,stopOpacity:t.stopOpacity})))}],o=`url(#${e})`}return{gradients:i,color:{color:o,strokeColor:s,strokeWidth:l}}},zd=[];function Rd(t,i=e){let n;const a=new Set;function o(e){if(r(t,e)&&(t=e,n)){const e=!zd.length;for(const e of a)e[1](),zd.push(e,t);if(e){for(let t=0;t<zd.length;t+=2)zd[t][0](zd[t+1]);zd.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(r,s=e){const l=[r,s];return a.add(l),1===a.size&&(n=i(o)||e),r(t),()=>{a.delete(l),0===a.size&&(n(),n=null)}}}}const Cd=Rd(null),Md=Rd(10),Jd=Rd({loading:!1,progress:null}),Hd={style:null,layers:[],limitHit:[]},kd=Rd(Hd),jd={fills:{background:null,svgs:[],gradients:[],chartHeight:null,yScale:null,adjustedYScale:null},lines:{background:null,svgs:[],gradients:[],chartHeight:null,yScale:null,adjustedYScale:null}},Fd=Rd(jd);let Nd=Rd("mapbox-gl");function Td(t){let e;const i=t[2].default,n=l(i,t,t[1],null);return{c(){n&&n.c()},m(t,i){n&&n.m(t,i),e=!0},p(t,[a]){n&&n.p&&(!e||2&a)&&d(n,i,t,t[1],e?u(i,t[1],a,null):h(t[1]),null)},i(t){e||(Q(n,t),e=!0)},o(t){q(n,t),e=!1},d(t){n&&n.d(t)}}}function Ud(t,e,i){let{$$slots:n={},$$scope:a}=e;const o=R();let{index:r}=e;return z((()=>{o("load",r)})),t.$$set=t=>{"index"in t&&i(0,r=t.index),"$$scope"in t&&i(1,a=t.$$scope)},[r,a,n]}class Ed extends st{constructor(t){super(),rt(this,t,Ud,Td,r,{index:0})}}function Ad(t,e,i){const n=t.slice();return n[28]=e[i],n}function Od(t,e,i){const n=t.slice();return n[31]=e[i],n[33]=i,n}function Pd(t,e,i){const n=t.slice();return n[34]=e[i],n[36]=i,n}function Kd(t,e,i){const n=t.slice();return n[37]=e[i],n}function Dd(t,e,i){const n=t.slice();return n[40]=e[i],n}function Qd(t){let e,i,n,a;return{c(){e=I("stop"),w(e,"offset",i=t[40].offset),w(e,"stop-color",n=t[40].stopColor),w(e,"stop-opacity",a=t[40].stopOpacity)},m(t,i){b(t,e,i)},p(t,o){128&o[0]&&i!==(i=t[40].offset)&&w(e,"offset",i),128&o[0]&&n!==(n=t[40].stopColor)&&w(e,"stop-color",n),128&o[0]&&a!==(a=t[40].stopOpacity)&&w(e,"stop-opacity",a)},d(t){t&&y(e)}}}function qd(t,e){let i,n,a=e[37].stops,o=[];for(let t=0;t<a.length;t+=1)o[t]=Qd(Dd(e,a,t));return{key:t,first:null,c(){i=I("linearGradient");for(let t=0;t<o.length;t+=1)o[t].c();w(i,"id",n=e[37].id),this.first=i},m(t,e){b(t,i,e);for(let t=0;t<o.length;t+=1)o[t].m(i,null)},p(t,r){if(e=t,128&r[0]){let t;for(a=e[37].stops,t=0;t<a.length;t+=1){const n=Dd(e,a,t);o[t]?o[t].p(n,r):(o[t]=Qd(n),o[t].c(),o[t].m(i,null))}for(;t<o.length;t+=1)o[t].d(1);o.length=a.length}128&r[0]&&n!==(n=e[37].id)&&w(i,"id",n)},d(t){t&&y(i),f(o,t)}}}function $d(t){let e,i,n,a,o,r,s,l;return{c(){e=I("rect"),w(e,"x",i=t[4].x),w(e,"y",n=t[4].y),w(e,"width",a=t[4].width),w(e,"height",o=t[1]-Xd-Gd),w(e,"fill",r=t[4].fill),w(e,"stroke",s=t[4].stroke),w(e,"strokewidth",l=t[4].strokeWidth),w(e,"rx","20")},m(t,i){b(t,e,i)},p(t,c){16&c[0]&&i!==(i=t[4].x)&&w(e,"x",i),16&c[0]&&n!==(n=t[4].y)&&w(e,"y",n),16&c[0]&&a!==(a=t[4].width)&&w(e,"width",a),2&c[0]&&o!==(o=t[1]-Xd-Gd)&&w(e,"height",o),16&c[0]&&r!==(r=t[4].fill)&&w(e,"fill",r),16&c[0]&&s!==(s=t[4].stroke)&&w(e,"stroke",s),16&c[0]&&l!==(l=t[4].strokeWidth)&&w(e,"strokewidth",l)},d(t){t&&y(e)}}}function th(t){let e,i,n;function o(){return t[18](t[34],t[31])}return{c(){e=I("circle"),w(e,"cx","6"),w(e,"cy","-6"),w(e,"r","6"),w(e,"fill","red")},m(a,r){b(a,e,r),i||(n=[G(e,"mouseover",o),G(e,"mouseout",t[11])],i=!0)},p(e,i){t=e},d(t){t&&y(e),i=!1,a(n)}}}function eh(t){let e,i,n,a,o,r=0===t[36]&&t[8].includes(t[34]),s=t[34]+"",l=r&&th(t),c=t[36]>0&&function(t){let e;return{c(){e=v("↳")},m(t,i){b(t,e,i)},d(t){t&&y(e)}}}();return{c(){e=I("g"),l&&l.c(),i=I("text"),c&&c.c(),n=v(s),w(i,"y",a=18*t[36]),w(i,"x",o=(t[36]>0?18:0)+t[8].includes(t[34])?18:0),w(i,"class","svelte-rpuqmp")},m(t,a){b(t,e,a),l&&l.m(e,null),m(e,i),c&&c.m(i,null),m(i,n)},p(t,a){1&a[0]&&(r=0===t[36]&&t[8].includes(t[34])),r?l?l.p(t,a):(l=th(t),l.c(),l.m(e,i)):l&&(l.d(1),l=null),1&a[0]&&s!==(s=t[34]+"")&&W(n,s),1&a[0]&&o!==(o=(t[36]>0?18:0)+t[8].includes(t[34])?18:0)&&w(i,"x",o)},d(t){t&&y(e),l&&l.d(),c&&c.d()}}}function ih(t){let e,i,n,a,o,r,s,l,c,u,d,h,p;function m(){return t[17](t[31])}let g=t[31].layer.id.split("/"),v=[];for(let e=0;e<g.length;e+=1)v[e]=eh(Pd(t,g,e));return{c(){e=I("rect"),c=x(),u=I("g");for(let t=0;t<v.length;t+=1)v[t].c();w(e,"x",i=t[31].x),w(e,"y",n=t[31].y),w(e,"width",a=t[31].width),w(e,"height",o=t[31].height),w(e,"fill",r=t[31].fill),w(e,"stroke",s=t[31].stroke),w(e,"strokewidth",l=t[31].strokeWidth),w(e,"rx","20"),w(u,"class","y-axis tick svelte-rpuqmp"),w(u,"opacity","1"),w(u,"transform",d="translate(0,\n        "+(t[3](t[31].layer.id)+t[2].bandwidth()/2)+")")},m(t,i){b(t,e,i),b(t,c,i),b(t,u,i);for(let t=0;t<v.length;t+=1)v[t].m(u,null);h||(p=G(e,"click",m),h=!0)},p(c,h){if(t=c,1&h[0]&&i!==(i=t[31].x)&&w(e,"x",i),1&h[0]&&n!==(n=t[31].y)&&w(e,"y",n),1&h[0]&&a!==(a=t[31].width)&&w(e,"width",a),1&h[0]&&o!==(o=t[31].height)&&w(e,"height",o),1&h[0]&&r!==(r=t[31].fill)&&w(e,"fill",r),1&h[0]&&s!==(s=t[31].stroke)&&w(e,"stroke",s),1&h[0]&&l!==(l=t[31].strokeWidth)&&w(e,"strokewidth",l),10497&h[0]){let e;for(g=t[31].layer.id.split("/"),e=0;e<g.length;e+=1){const i=Pd(t,g,e);v[e]?v[e].p(i,h):(v[e]=eh(i),v[e].c(),v[e].m(u,null))}for(;e<v.length;e+=1)v[e].d(1);v.length=g.length}13&h[0]&&d!==(d="translate(0,\n        "+(t[3](t[31].layer.id)+t[2].bandwidth()/2)+")")&&w(u,"transform",d)},d(t){t&&y(e),t&&y(c),t&&y(u),f(v,t),h=!1,p()}}}function nh(t,e){let i,n,a;return n=new Ed({props:{index:e[33],$$slots:{default:[ih]},$$scope:{ctx:e}}}),n.$on("load",e[19]),{key:t,first:null,c(){i=Z(),it(n.$$.fragment),this.first=i},m(t,e){b(t,i,e),nt(n,t,e),a=!0},p(t,i){e=t;const a={};1&i[0]&&(a.index=e[33]),13&i[0]|4096&i[1]&&(a.$$scope={dirty:i,ctx:e}),n.$set(a)},i(t){a||(Q(n.$$.fragment,t),a=!0)},o(t){q(n.$$.fragment,t),a=!1},d(t){t&&y(i),at(n,t)}}}function ah(t){let i,n,a,o,r=t[28]+"";return{c(){i=I("g"),n=I("text"),a=v(r),w(n,"y","9"),w(n,"class","svelte-rpuqmp"),w(i,"class","tick"),w(i,"opacity","1"),w(i,"transform",o="translate("+t[10](t[28])+", 0)")},m(t,e){b(t,i,e),m(i,n),m(n,a)},p:e,d(t){t&&y(i)}}}function oh(t){let e,i;return e=new gd({props:{left:t[6].left,top:t[6].top,$$slots:{default:[rh]},$$scope:{ctx:t}}}),e.$on("close",t[11]),{c(){it(e.$$.fragment)},m(t,n){nt(e,t,n),i=!0},p(t,i){const n={};64&i[0]&&(n.left=t[6].left),64&i[0]&&(n.top=t[6].top),64&i[0]|4096&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(Q(e.$$.fragment,t),i=!0)},o(t){q(e.$$.fragment,t),i=!1},d(t){at(e,t)}}}function rh(t){let e,i=(t[6].text||"")+"";return{c(){e=v(i)},m(t,i){b(t,e,i)},p(t,n){64&n[0]&&i!==(i=(t[6].text||"")+"")&&W(e,i)},d(t){t&&y(e)}}}function sh(t){let e,i,n,a,o,r,s,l,c,u=[],d=new Map,h=[],p=new Map,v=Object.keys(t[6]).length>0,G=t[7];const W=t=>t[37].id;for(let e=0;e<G.length;e+=1){let i=Kd(t,G,e),n=W(i);d.set(n,u[e]=qd(n,i))}let X=t[4]&&$d(t),_=t[0];const V=t=>t[31].layer.id;for(let e=0;e<_.length;e+=1){let i=Od(t,_,e),n=V(i);p.set(n,h[e]=nh(n,i))}let S=t[9],B=[];for(let e=0;e<S.length;e+=1)B[e]=ah(Ad(t,S,e));let L=v&&oh(t);return{c(){e=g("div"),i=I("svg"),n=I("defs");for(let t=0;t<u.length;t+=1)u[t].c();a=I("g"),X&&X.c(),o=Z();for(let t=0;t<h.length;t+=1)h[t].c();r=I("g");for(let t=0;t<B.length;t+=1)B[t].c();l=x(),L&&L.c(),w(r,"transform",s="translate(0, "+(Xd+t[5])+")"),w(r,"class","x-axis svelte-rpuqmp"),w(i,"id","fill"),w(i,"width",Zd),w(i,"height",t[1]),w(e,"class","fills-chart")},m(t,s){b(t,e,s),m(e,i),m(i,n);for(let t=0;t<u.length;t+=1)u[t].m(n,null);m(i,a),X&&X.m(a,null),m(a,o);for(let t=0;t<h.length;t+=1)h[t].m(a,null);m(i,r);for(let t=0;t<B.length;t+=1)B[t].m(r,null);m(e,l),L&&L.m(e,null),c=!0},p(t,l){if(128&l[0]&&(G=t[7],u=et(u,l,W,1,t,G,d,n,$,qd,null,Kd)),t[4]?X?X.p(t,l):(X=$d(t),X.c(),X.m(a,o)):X&&(X.d(1),X=null),30989&l[0]&&(_=t[0],K(),h=et(h,l,V,1,t,_,p,a,tt,nh,null,Od),D()),1536&l[0]){let e;for(S=t[9],e=0;e<S.length;e+=1){const i=Ad(t,S,e);B[e]?B[e].p(i,l):(B[e]=ah(i),B[e].c(),B[e].m(r,null))}for(;e<B.length;e+=1)B[e].d(1);B.length=S.length}(!c||32&l[0]&&s!==(s="translate(0, "+(Xd+t[5])+")"))&&w(r,"transform",s),(!c||2&l[0])&&w(i,"height",t[1]),64&l[0]&&(v=Object.keys(t[6]).length>0),v?L?(L.p(t,l),64&l[0]&&Q(L,1)):(L=oh(t),L.c(),Q(L,1),L.m(e,null)):L&&(K(),q(L,1,1,(()=>{L=null})),D())},i(t){if(!c){for(let t=0;t<_.length;t+=1)Q(h[t]);Q(L),c=!0}},o(t){for(let t=0;t<h.length;t+=1)q(h[t]);q(L),c=!1},d(t){t&&y(e);for(let t=0;t<u.length;t+=1)u[t].d();X&&X.d();for(let t=0;t<h.length;t+=1)h[t].d();f(B,t),L&&L.d()}}}function lh(t,e,i){let n,a,o,r,l,c;s(t,Jd,(t=>i(21,o=t))),s(t,Md,(t=>i(22,r=t))),s(t,kd,(t=>i(23,l=t))),s(t,Fd,(t=>i(24,c=t)));let{style:u}=e,d=c?.fills?.chartHeight,h=c?.fills?.yScale,p=c?.fills?.adjustedYScale,m=c?.fills?.gradients??[],b=c?.fills?.svgs??[],y=c?.fills?.background,f=l?.layers??[],g=l?.limitHit??[],I=xt(0,25,1),v=0,x=ti([0,xd],[wd,Zd-Wd]),Z=b.length?b.slice(0,_d):[];const G=()=>i(6,a={});function w(t){i(6,a={text:JSON.stringify(t.paint,null,2),left:x(xd)+10,top:p(t.id)+h.bandwidth()})}function W(t,e){i(6,a={text:`${t} had too many possible property/value combinations and has been limited to showing ${r} for performance.`,left:24,top:p(e)+.75*h.bandwidth()})}z((()=>{document.addEventListener("scroll",(()=>i(5,v=window.scrollY)))}));const X=t=>{const e=0!==t&&t%99==0,n=t===b.length-1;(e||n)&&setTimeout((()=>i(0,Z=b.slice(0,t+1+_d))),250)};return t.$$set=t=>{"style"in t&&i(15,u=t.style)},t.$$.update=()=>{1&t.$$.dirty[0]&&i(7,n=Z.map((t=>t.gradients)).flat(1/0)),32768&t.$$.dirty[0]&&G(),65536&t.$$.dirty[0]&&f&&!b.length&&(()=>{let t=f;i(1,d=65*t.length),i(2,h=Ne(t.map((({id:t})=>t)),[Xd,d-Gd]).padding(.25));const e=t.reduce(((t,e)=>(t[e.id]=h(e.id),t)),{});let n=0;for(let i=0;i<t.length;i++){const a=t[i],o=18;let r=e[a.id];const s=t?.[i-1]?.id?.split("/")?.length;n+=s?(s-1)*o:0;const l=r+n;e[a.id]=l,i===t.length-1&&(n+=a.id.split("/").length*o)}i(1,d+=n),i(3,p=t=>e[t]),t=t.map((t=>{const{color:e,gradients:i}=Yd(t,x),{color:n,strokeColor:a,strokeWidth:o}=e;return m=m.concat(i),{...t,fill:n,stroke:a,strokeWidth:o,gradients:i}})),i(16,b=t.map(((t,e)=>({x:x(t.minzoom||0),y:p(t.id),height:h.bandwidth(),width:x(t.maxzoom||xd)-x(t.minzoom||0),fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,layer:t,gradients:t.gradients})))),i(4,y=b.find((t=>"background"===t.layer.type))),Fd.update((t=>({...t,fills:{background:y,svgs:b,gradients:m,chartHeight:d,yScale:h,adjustedYScale:p}}))),i(0,Z=b.slice(0,_d))})(),65537&t.$$.dirty[0]&&((t,e)=>{const i=t<e;i!==o.loading&&(i?Jd.set({loading:!0,progress:null}):Jd.set({loading:!1,progress:null}))})(Z.length,b.length)},i(6,a={}),[Z,d,h,p,y,v,a,n,g,I,x,G,w,W,X,u,b,t=>w(t.layer),(t,e)=>W(t,e.layer.id),t=>X(t.detail)]}Du(".x-axis.svelte-rpuqmp text.svelte-rpuqmp{font-size:0.9em;text-anchor:middle}.y-axis.svelte-rpuqmp text.svelte-rpuqmp{font-size:0.9em}",{});class ch extends st{constructor(t){super(),rt(this,t,lh,sh,r,{style:15},null,[-1,-1])}}const uh=t=>{const e=JSON.parse(JSON.stringify(t));if("number"==typeof e)return[e];const i=[];switch(e.hasOwnProperty("stops")?"legacy":e[0]){case"case":{let t=e.slice(1);const n=t.pop();t.forEach(((t,e)=>e%2!=0&&i.push(t))),i.push(n);break}case"match":{let t=e.slice(2);const n=t.pop();t.forEach(((t,e)=>e%2!=0&&i.push(t))),i.push(n);break}case"interpolate":e.slice(3).forEach(((t,e)=>e%2!=0&&i.push(t)));break;case"step":{let t=e.slice(2);const n=t.pop();t.forEach(((t,e)=>e%2==0&&i.push(t))),i.push(n);break}case"legacy":e.stops.forEach((t=>i.push(t[1])));break;default:return e}return i.some((t=>Array.isArray(t)))?i.reduce(((t,e)=>t=Array.isArray(e)?t.concat(uh(e)):t.concat([e])),[]):i};function dh(t,e,i){const n=t.slice();return n[31]=e[i],n}function hh(t,e,i){const n=t.slice();return n[34]=e[i],n[36]=i,n}function ph(t,e,i){const n=t.slice();return n[37]=e[i],n[39]=i,n}function mh(t,e,i){const n=t.slice();return n[40]=e[i],n}function bh(t,e,i){const n=t.slice();return n[43]=e[i],n}function yh(t){let e,i,n,a;return{c(){e=I("stop"),w(e,"offset",i=t[43].offset),w(e,"stop-color",n=t[43].stopColor),w(e,"stop-opacity",a=t[43].stopOpacity)},m(t,i){b(t,e,i)},p(t,o){128&o[0]&&i!==(i=t[43].offset)&&w(e,"offset",i),128&o[0]&&n!==(n=t[43].stopColor)&&w(e,"stop-color",n),128&o[0]&&a!==(a=t[43].stopOpacity)&&w(e,"stop-opacity",a)},d(t){t&&y(e)}}}function fh(t,e){let i,n,a=e[40].stops,o=[];for(let t=0;t<a.length;t+=1)o[t]=yh(bh(e,a,t));return{key:t,first:null,c(){i=I("linearGradient");for(let t=0;t<o.length;t+=1)o[t].c();w(i,"id",n=e[40].id),this.first=i},m(t,e){b(t,i,e);for(let t=0;t<o.length;t+=1)o[t].m(i,null)},p(t,r){if(e=t,128&r[0]){let t;for(a=e[40].stops,t=0;t<a.length;t+=1){const n=bh(e,a,t);o[t]?o[t].p(n,r):(o[t]=yh(n),o[t].c(),o[t].m(i,null))}for(;t<o.length;t+=1)o[t].d(1);o.length=a.length}128&r[0]&&n!==(n=e[40].id)&&w(i,"id",n)},d(t){t&&y(i),f(o,t)}}}function gh(t){let e,i,n,a,o,r,s,l;return{c(){e=I("rect"),w(e,"x",i=t[0].x),w(e,"y",n=t[0].y),w(e,"width",a=t[0].width),w(e,"height",o=t[2]-Xd-Gd),w(e,"fill",r=t[0].fill),w(e,"stroke",s=t[0].stroke),w(e,"strokewidth",l=t[0].strokeWidth),w(e,"rx","20")},m(t,i){b(t,e,i)},p(t,c){1&c[0]&&i!==(i=t[0].x)&&w(e,"x",i),1&c[0]&&n!==(n=t[0].y)&&w(e,"y",n),1&c[0]&&a!==(a=t[0].width)&&w(e,"width",a),4&c[0]&&o!==(o=t[2]-Xd-Gd)&&w(e,"height",o),1&c[0]&&r!==(r=t[0].fill)&&w(e,"fill",r),1&c[0]&&s!==(s=t[0].stroke)&&w(e,"stroke",s),1&c[0]&&l!==(l=t[0].strokeWidth)&&w(e,"strokewidth",l)},d(t){t&&y(e)}}}function Ih(t){let e,i,n;function o(){return t[18](t[37],t[34])}return{c(){e=I("circle"),w(e,"cx","6"),w(e,"cy","-6"),w(e,"r","6"),w(e,"fill","red")},m(a,r){b(a,e,r),i||(n=[G(e,"mouseover",o),G(e,"mouseout",t[11])],i=!0)},p(e,i){t=e},d(t){t&&y(e),i=!1,a(n)}}}function vh(t){let e,i,n,a,o,r=0===t[39]&&t[8].includes(t[37]),s=t[37]+"",l=r&&Ih(t),c=t[39]>0&&function(t){let e;return{c(){e=v("↳")},m(t,i){b(t,e,i)},d(t){t&&y(e)}}}();return{c(){e=I("g"),l&&l.c(),i=I("text"),c&&c.c(),n=v(s),w(i,"y",a=18*t[39]),w(i,"x",o=(t[39]>0?18:0)+t[8].includes(t[37])?18:0),w(i,"class","svelte-rpuqmp")},m(t,a){b(t,e,a),l&&l.m(e,null),m(e,i),c&&c.m(i,null),m(i,n)},p(t,a){2&a[0]&&(r=0===t[39]&&t[8].includes(t[37])),r?l?l.p(t,a):(l=Ih(t),l.c(),l.m(e,i)):l&&(l.d(1),l=null),2&a[0]&&s!==(s=t[37]+"")&&W(n,s),2&a[0]&&o!==(o=(t[39]>0?18:0)+t[8].includes(t[37])?18:0)&&w(i,"x",o)},d(t){t&&y(e),l&&l.d(),c&&c.d()}}}function xh(t){let e,i,n,a,o,r,s,l,c,u,d;function h(){return t[17](t[34])}let p=t[34].id.split("/"),m=[];for(let e=0;e<p.length;e+=1)m[e]=vh(ph(t,p,e));return{c(){e=I("path"),r=x(),s=I("g");for(let t=0;t<m.length;t+=1)m[t].c();c=x(),w(e,"d",i=t[34].path),w(e,"fill",n=t[34].fill),w(e,"stroke",a=t[34].stroke),w(e,"strokewidth",o=t[34].strokeWidth),w(s,"class","y-axis tick svelte-rpuqmp"),w(s,"opacity","1"),w(s,"transform",l="translate(0,\n          "+(t[4](t[34].id)+t[3].bandwidth()/2)+")")},m(t,i){b(t,e,i),b(t,r,i),b(t,s,i);for(let t=0;t<m.length;t+=1)m[t].m(s,null);b(t,c,i),u||(d=G(e,"click",h),u=!0)},p(r,c){if(t=r,2&c[0]&&i!==(i=t[34].path)&&w(e,"d",i),2&c[0]&&n!==(n=t[34].fill)&&w(e,"fill",n),2&c[0]&&a!==(a=t[34].stroke)&&w(e,"stroke",a),2&c[0]&&o!==(o=t[34].strokeWidth)&&w(e,"strokewidth",o),10498&c[0]){let e;for(p=t[34].id.split("/"),e=0;e<p.length;e+=1){const i=ph(t,p,e);m[e]?m[e].p(i,c):(m[e]=vh(i),m[e].c(),m[e].m(s,null))}for(;e<m.length;e+=1)m[e].d(1);m.length=p.length}26&c[0]&&l!==(l="translate(0,\n          "+(t[4](t[34].id)+t[3].bandwidth()/2)+")")&&w(s,"transform",l)},d(t){t&&y(e),t&&y(r),t&&y(s),f(m,t),t&&y(c),u=!1,d()}}}function Zh(t,e){let i,n,a;return n=new Ed({props:{index:e[36],$$slots:{default:[xh]},$$scope:{ctx:e}}}),n.$on("load",e[19]),{key:t,first:null,c(){i=Z(),it(n.$$.fragment),this.first=i},m(t,e){b(t,i,e),nt(n,t,e),a=!0},p(t,i){e=t;const a={};2&i[0]&&(a.index=e[36]),26&i[0]|32768&i[1]&&(a.$$scope={dirty:i,ctx:e}),n.$set(a)},i(t){a||(Q(n.$$.fragment,t),a=!0)},o(t){q(n.$$.fragment,t),a=!1},d(t){t&&y(i),at(n,t)}}}function Gh(t){let i,n,a,o,r=t[31]+"";return{c(){i=I("g"),n=I("text"),a=v(r),w(n,"y","9"),w(n,"class","svelte-rpuqmp"),w(i,"class","tick"),w(i,"opacity","1"),w(i,"transform",o="translate("+t[10](t[31])+", 0)")},m(t,e){b(t,i,e),m(i,n),m(n,a)},p:e,d(t){t&&y(i)}}}function wh(t){let e,i;return e=new gd({props:{left:t[6].left,top:t[6].top,$$slots:{default:[Wh]},$$scope:{ctx:t}}}),e.$on("close",t[11]),{c(){it(e.$$.fragment)},m(t,n){nt(e,t,n),i=!0},p(t,i){const n={};64&i[0]&&(n.left=t[6].left),64&i[0]&&(n.top=t[6].top),64&i[0]|32768&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(Q(e.$$.fragment,t),i=!0)},o(t){q(e.$$.fragment,t),i=!1},d(t){at(e,t)}}}function Wh(t){let e,i=(t[6].text||"")+"";return{c(){e=v(i)},m(t,i){b(t,e,i)},p(t,n){64&n[0]&&i!==(i=(t[6].text||"")+"")&&W(e,i)},d(t){t&&y(e)}}}function Xh(t){let e,i,n,a,o,r,s,l,c,u=[],d=new Map,h=[],p=new Map,v=Object.keys(t[6]).length>0,G=t[7];const W=t=>t[40].id;for(let e=0;e<G.length;e+=1){let i=mh(t,G,e),n=W(i);d.set(n,u[e]=fh(n,i))}let X=t[0]&&gh(t),_=t[1];const V=t=>t[34].id;for(let e=0;e<_.length;e+=1){let i=hh(t,_,e),n=V(i);p.set(n,h[e]=Zh(n,i))}let S=t[9],B=[];for(let e=0;e<S.length;e+=1)B[e]=Gh(dh(t,S,e));let L=v&&wh(t);return{c(){e=g("div"),i=I("svg"),n=I("defs");for(let t=0;t<u.length;t+=1)u[t].c();a=I("g"),X&&X.c(),o=Z();for(let t=0;t<h.length;t+=1)h[t].c();r=I("g");for(let t=0;t<B.length;t+=1)B[t].c();l=x(),L&&L.c(),w(r,"transform",s="translate(0, "+(Xd+t[5])+")"),w(r,"class","x-axis svelte-rpuqmp"),w(i,"id","lines"),w(i,"width",Zd),w(i,"height",t[2]),w(e,"class","fills-chart")},m(t,s){b(t,e,s),m(e,i),m(i,n);for(let t=0;t<u.length;t+=1)u[t].m(n,null);m(i,a),X&&X.m(a,null),m(a,o);for(let t=0;t<h.length;t+=1)h[t].m(a,null);m(i,r);for(let t=0;t<B.length;t+=1)B[t].m(r,null);m(e,l),L&&L.m(e,null),c=!0},p(t,l){if(128&l[0]&&(G=t[7],u=et(u,l,W,1,t,G,d,n,$,fh,null,mh)),t[0]?X?X.p(t,l):(X=gh(t),X.c(),X.m(a,o)):X&&(X.d(1),X=null),31002&l[0]&&(_=t[1],K(),h=et(h,l,V,1,t,_,p,a,tt,Zh,null,hh),D()),1536&l[0]){let e;for(S=t[9],e=0;e<S.length;e+=1){const i=dh(t,S,e);B[e]?B[e].p(i,l):(B[e]=Gh(i),B[e].c(),B[e].m(r,null))}for(;e<B.length;e+=1)B[e].d(1);B.length=S.length}(!c||32&l[0]&&s!==(s="translate(0, "+(Xd+t[5])+")"))&&w(r,"transform",s),(!c||4&l[0])&&w(i,"height",t[2]),64&l[0]&&(v=Object.keys(t[6]).length>0),v?L?(L.p(t,l),64&l[0]&&Q(L,1)):(L=wh(t),L.c(),Q(L,1),L.m(e,null)):L&&(K(),q(L,1,1,(()=>{L=null})),D())},i(t){if(!c){for(let t=0;t<_.length;t+=1)Q(h[t]);Q(L),c=!0}},o(t){for(let t=0;t<h.length;t+=1)q(h[t]);q(L),c=!1},d(t){t&&y(e);for(let t=0;t<u.length;t+=1)u[t].d();X&&X.d();for(let t=0;t<h.length;t+=1)h[t].d();f(B,t),L&&L.d()}}}function _h(t,e,i){let n,a,o,r,l,c;s(t,Jd,(t=>i(21,o=t))),s(t,Md,(t=>i(22,r=t))),s(t,Fd,(t=>i(23,l=t))),s(t,kd,(t=>i(24,c=t)));let{style:u}=e,d=l?.lines?.chartHeight,h=l?.lines?.yScale,p=l?.lines?.adjustedYScale,m=l?.lines?.gradients??[],b=l?.lines?.svgs??[],y=l?.lines?.background??l?.fills?.background,f=c?.layers??[],g=c?.limitHit??[],I=xt(0,25,1),v=0,x=ti([0,xd],[wd,Zd-Wd]),Z=b.length?b.slice(0,_d):[];const G=()=>i(6,a={});function w(t){const e=t?.paint?.["line-width"];if(!e)return 1;let i=uh(e);return i.every((t=>"number"==typeof t))||(console.warn("Outputs of line-width expression contain non-numerical values. This indicates a problem in expanding layers."),i=[1]),Math.max(...i)}const W=t=>{const{color:e,gradients:i}=Yd(t,x),{color:n,strokeColor:a,strokeWidth:o}=e;m=m.concat(i);const r=function(t){const e=t.paint?t.paint["line-width"]:null,i=t.maxzoom||xd,n=void 0!==t.minzoom?t.minzoom:0,a=[],o=[];let r,s,l;if(Array.isArray(e)){const[i,[l,c],[u]]=e;if("interpolate"===i&&"linear"===l&&"zoom"===u){const i=e.slice(3);a.push([x(n),p(t.id)+h.bandwidth()/2]);for(let e=0;e<i.length;e+=2){const r=i[e],s=i[e+1];r<n||(a.push([x(r),p(t.id)-s/2+h.bandwidth()/2]),s>0&&o.push([x(r),p(t.id)+s/2+h.bandwidth()/2]))}[r,s]=i.slice(-2)}else"exponential"===l||console.log("array but not linear",e)}else if(e&&e.stops)e.stops.forEach((e=>{const[i,n]=e;a.push([x(i),p(t.id)-n/2+h.bandwidth()/2]),n>0&&o.push([x(i),p(t.id)+n/2+h.bandwidth()/2])})),[r,s]=e.stops.slice(-1)[0];else if(!e){let e=1;a.push([x(n),p(t.id)-e/2+h.bandwidth()/2]),a.push([x(i),p(t.id)-e/2+h.bandwidth()/2]),o.push([x(n),p(t.id)+e/2+h.bandwidth()/2]),o.push([x(i),p(t.id)+e/2+h.bandwidth()/2])}return a.length&&(i>r&&(a.push([x(i),p(t.id)-s/2+h.bandwidth()/2]),s>0&&o.push([x(i),p(t.id)+s/2+h.bandwidth()/2])),l=a.concat(o.reverse())),l}(t);return{...t,path:ri()(r||[]),fill:n,stroke:a,strokeWidth:o,gradients:i}};function X(t){i(6,a={text:JSON.stringify(t.paint,null,2),left:x(xd)+10,top:p(t.id)+h.bandwidth()})}function _(t,e){i(6,a={text:`${t} had too many possible property/value combinations and has been limited to showing ${r} for performance.`,left:24,top:p(e)+.75*h.bandwidth()})}z((()=>{document.addEventListener("scroll",(()=>i(5,v=window.scrollY)))}));const V=t=>{const e=0!==t&&t%99==0,n=t===b.length-1;(e||n)&&setTimeout((()=>i(1,Z=b.slice(0,t+1+_d))),250)};return t.$$set=t=>{"style"in t&&i(15,u=t.style)},t.$$.update=()=>{3&t.$$.dirty[0]&&i(7,n=Z.concat([y]).filter(Boolean).map((t=>t.gradients)).flat(1/0)),32768&t.$$.dirty[0]&&G(),65536&t.$$.dirty[0]&&f&&!b.length&&(()=>{let t=f.filter((t=>"line"===t.type));i(2,d=65*t.length),i(3,h=Ne(t.map((({id:t})=>t)),[Xd,d-Gd]).padding(.25));const e=t.reduce(((t,e)=>(t[e.id]=h(e.id),t)),{});let n=0;for(let i=0;i<t.length;i++){const a=t[i];let o=e[a.id];n+=(t[i-1]?w(t[i-1]):1)/2;const r=w(a),s=18,l=t?.[i-1]?.id?.split("/")?.length,c=l?(l-1)*s:0;n+=c>r?c:r/2;const u=o+n;e[a.id]=u,i===t.length-1&&(n+=a.id.split("/").length*s)}i(2,d+=n),i(4,p=t=>e[t]),i(16,b=t.map(W)),i(0,y=l?.fills?.background),y?.gradients?.length&&(m=m.concat(y.gradients)),Fd.update((t=>({...t,lines:{svgs:b,gradients:m,background:y,chartHeight:d,yScale:h,adjustedYScale:p}}))),i(1,Z=b.slice(0,_d))})(),65538&t.$$.dirty[0]&&((t,e)=>{const i=t<e;i!==o.loading&&(i?Jd.set({loading:!0,progress:null}):Jd.set({loading:!1,progress:null}))})(Z.length,b.length)},i(6,a={}),[y,Z,d,h,p,v,a,n,g,I,x,G,X,_,V,u,b,t=>X(t),(t,e)=>_(t,e.id),t=>V(t.detail)]}Du(".x-axis.svelte-rpuqmp text.svelte-rpuqmp{font-size:0.9em;text-anchor:middle}.y-axis.svelte-rpuqmp text.svelte-rpuqmp{font-size:0.9em}",{});class Vh extends st{constructor(t){super(),rt(this,t,_h,Xh,r,{style:15},null,[-1,-1])}}function Sh(t){let e,i;return e=new gd({props:{left:t[1].left,top:t[1].top,$$slots:{default:[Yh]},$$scope:{ctx:t}}}),e.$on("close",t[5]),{c(){it(e.$$.fragment)},m(t,n){nt(e,t,n),i=!0},p(t,i){const n={};2&i[0]&&(n.left=t[1].left),2&i[0]&&(n.top=t[1].top),26&i[0]|16&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(Q(e.$$.fragment,t),i=!0)},o(t){q(e.$$.fragment,t),i=!1},d(t){at(e,t)}}}function Bh(t){let i,n,a,o;return{c(){i=g("div"),n=g("button"),n.textContent="Edit label",w(i,"class","edit-button svelte-gfr88e")},m(e,r){b(e,i,r),m(i,n),a||(o=G(n,"click",t[13]),a=!0)},p:e,d(t){t&&y(i),a=!1,o()}}}function Lh(t){let e,i,n,o,r,s,l;return{c(){e=g("div"),i=g("input"),n=g("button"),o=v("Submit"),w(n,"class","submit-button svelte-gfr88e"),n.disabled=r=!t[4],w(e,"class","edit-button svelte-gfr88e")},m(a,r){b(a,e,r),m(e,i),X(i,t[4]),m(e,n),m(n,o),s||(l=[G(i,"input",t[14]),G(n,"click",t[6])],s=!0)},p(t,e){16&e[0]&&i.value!==t[4]&&X(i,t[4]),16&e[0]&&r!==(r=!t[4])&&(n.disabled=r)},d(t){t&&y(e),s=!1,a(l)}}}function Yh(t){let e,i,n,a,o=(t[1].text||"")+"",r=!t[3]&&Bh(t),s=t[3]&&Lh(t);return{c(){r&&r.c(),e=x(),s&&s.c(),i=x(),n=g("p"),a=v(o)},m(t,o){r&&r.m(t,o),b(t,e,o),s&&s.m(t,o),b(t,i,o),b(t,n,o),m(n,a)},p(t,n){t[3]?r&&(r.d(1),r=null):r?r.p(t,n):(r=Bh(t),r.c(),r.m(e.parentNode,e)),t[3]?s?s.p(t,n):(s=Lh(t),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null),2&n[0]&&o!==(o=(t[1].text||"")+"")&&W(a,o)},d(t){r&&r.d(t),t&&y(e),s&&s.d(t),t&&y(i),t&&y(n)}}}function zh(t){let e,i;return e=new gd({props:{left:t[2].left,top:t[2].top,showCloseButton:!1,$$slots:{default:[Rh]},$$scope:{ctx:t}}}),{c(){it(e.$$.fragment)},m(t,n){nt(e,t,n),i=!0},p(t,i){const n={};4&i[0]&&(n.left=t[2].left),4&i[0]&&(n.top=t[2].top),4&i[0]|16&i[1]&&(n.$$scope={dirty:i,ctx:t}),e.$set(n)},i(t){i||(Q(e.$$.fragment,t),i=!0)},o(t){q(e.$$.fragment,t),i=!1},d(t){at(e,t)}}}function Rh(t){let e,i=(t[2].text||"")+"";return{c(){e=v(i)},m(t,i){b(t,e,i)},p(t,n){4&n[0]&&i!==(i=(t[2].text||"")+"")&&W(e,i)},d(t){t&&y(e)}}}function Ch(t){let e,i,n,a,o,r=Object.keys(t[1]).length>0,s=Object.keys(t[2]).length>0,l=r&&Sh(t),c=s&&zh(t);return{c(){e=g("div"),i=g("div"),n=x(),l&&l.c(),a=x(),c&&c.c(),_(i,"width",Mh+"px"),_(i,"height",t[0]+"px"),w(i,"id","map"),w(e,"class","typography-chart")},m(t,r){b(t,e,r),m(e,i),m(e,n),l&&l.m(e,null),m(e,a),c&&c.m(e,null),o=!0},p(t,n){(!o||1&n[0])&&_(i,"height",t[0]+"px"),2&n[0]&&(r=Object.keys(t[1]).length>0),r?l?(l.p(t,n),2&n[0]&&Q(l,1)):(l=Sh(t),l.c(),Q(l,1),l.m(e,a)):l&&(K(),q(l,1,1,(()=>{l=null})),D()),4&n[0]&&(s=Object.keys(t[2]).length>0),s?c?(c.p(t,n),4&n[0]&&Q(c,1)):(c=zh(t),c.c(),Q(c,1),c.m(e,null)):c&&(K(),q(c,1,1,(()=>{c=null})),D())},i(t){o||(Q(l),Q(c),o=!0)},o(t){q(l),q(c),o=!1},d(t){t&&y(e),l&&l.d(),c&&c.d()}}}Du(".edit-button.svelte-gfr88e{position:absolute;top:12px;left:12px}.submit-button.svelte-gfr88e{margin-left:6px}.submit-button.svelte-gfr88e:disabled{pointer-events:none}",{});const Mh=2500;function Jh(t){return Array.isArray(t)?"get"===t[0]?t:t.map(Jh).filter((t=>!!t)):null}function Hh(t){if(t.id.indexOf("shield")>=0)return 80;const e=t.layout["text-field"];return e?Array.isArray(e)?(i=e,Jh(i).flat(1/0).filter((t=>"get"!==t)))?.[0]??e:e:t.id;var i}function kh(t,e,i){let n;s(t,kd,(t=>i(20,n=t)));let a,o,r,l,c,u,d,{style:h}=e,{minZoom:p=0}=e,{maxZoom:m=24}=e,{rendererLib:b}=e,y={},f={},g=null,I=!1,v="",x=xt(p,m+1,2);const Z=()=>{g=null,i(3,I=!1),i(4,v=""),i(1,y={})},G=()=>i(2,f={}),w=["icon-text-fit-padding","symbol-spacing","text-fit-padding","text-padding"];function W(t){const e=a.queryRenderedFeatures(t.point)[0];if(!e)return void Z();const n=e.layer.id,o=c.filter((t=>t.id===n))[0],r=a.getStyle().layers.find((t=>t.id===n));if(G(),Z(),o){if(r){const t=r?.layout?.["text-field"];i(4,v=Array.isArray(t)&&"get"===t[0]&&"label"===t[1]?e?.properties?.label:t)}i(1,y={text:JSON.stringify({layout:o.layout,paint:o.paint},null,2),left:t.point.x,top:t.point.y}),g=o.id}}function X(t){const e=a.queryRenderedFeatures(t.point)[0];if(!e)return void G();const n=e.layer.id;if(!c.filter((t=>t.id===n))[0])return void G();let o=e.layer.metadata.parentId?e.layer.metadata.parentId:e.layer.id;const{conditions:r}=e.layer.metadata;r?r.forEach((({conditionType:t,type:e,key:i,value:n,input:a})=>{o+=`\n${e}.${i}: `,"case"===t&&(o+=`${n}`),"match"===t&&(o+=`${JSON.stringify(a)} == ${JSON.stringify(n)}`)})):e.layer.metadata.descriptor&&(o+=`\n\n${e.layer.metadata.descriptor}`),i(2,f={text:o,left:t.point.x+25,top:t.point.y})}function _(){const t=a.getBounds(),e=.08*Math.abs(t.getEast()-t.getWest()),i=.01*Math.abs(t.getNorth()-t.getSouth());r=ti([p,m],[t.getWest()+e,t.getEast()-e]),l=Ne(["x-axis",...c.map((({id:t})=>t))],[t.getNorth(),t.getSouth()+i]),function(){const t=x.map((t=>({type:"Feature",properties:{label:`${t}`},geometry:{type:"Point",coordinates:[r(t),l("x-axis")]}})));a.addSource("x-axis",{type:"geojson",data:{type:"FeatureCollection",features:t}}),a.addLayer({id:"x-axis",source:"x-axis",layout:{"text-font":u,"icon-allow-overlap":!0,"symbol-placement":"point","text-allow-overlap":!0,"text-field":"{label}","text-size":10},paint:{"text-color":"black"},type:"symbol"})}(),function(){let t=c.map((t=>{let e=t?.paint?.["icon-color"];return e||(e=t?.paint?.["text-color"]),e||(e="black"),{type:"Feature",properties:{color:e},geometry:{type:"LineString",coordinates:[[r(t.minzoom||p),l(t.id)],[r(t.maxzoom||m),l(t.id)]]}}}));a.addSource("lines",{type:"geojson",data:{type:"FeatureCollection",features:t}}),a.addLayer({id:"lines",source:"lines",paint:{"line-width":15,"line-color":["get","color"],"line-opacity":.1},layout:{},type:"line"})}(),c.forEach((t=>{let e=[];x.forEach((i=>{(function(t,e){return!(t.minzoom&&e<t.minzoom||t.maxzoom&&e>t.maxzoom)})(t,i)&&e.push({type:"Feature",properties:{label:Hh(t),zoom:i},geometry:{type:"Point",coordinates:[r(i),l(t.id)]}})})),a.addSource(t.id,{type:"geojson",data:{type:"FeatureCollection",features:e}});let i={};t.paint&&(i=JSON.parse(JSON.stringify(t.paint).replaceAll('["zoom"]','["get", "zoom"]')));let n={};t.layout&&(n=Object.fromEntries(Object.entries(t.layout).map((([t,e])=>w.indexOf(t)>=0?[t,e]:[t,JSON.parse(JSON.stringify(e).replaceAll('["zoom"]','["get", "zoom"]'))]))),n={...n,"icon-allow-overlap":!0,"symbol-placement":"point","text-allow-overlap":!0},t.layout["text-field"]&&"format"!==t.layout["text-field"][0]&&(n["text-field"]=["get","label"])),a.addLayer({id:t.id,source:t.id,paint:i,layout:n,type:t.type,metadata:{...t.metadata,parentId:t.metadata&&t.metadata.parentId?t.metadata.parentId:t.id}})}))}z((async()=>{await(async()=>{"maplibre-gl"===b?(await Promise.resolve().then((function(){return Jp})),d=await Promise.resolve().then((function(){return kp}))):(await Promise.resolve().then((function(){return Fp})),d=await Promise.resolve().then((function(){return Tp})))})(),function(t){i(11,a=new d.Map({container:"map",style:{version:8,glyphs:t.glyphs,sprite:t.sprite,sources:{},layers:t.layers.filter((t=>"background"===t.type))},boxZoom:!1,doubleClickZoom:!1,dragPan:!1,scrollZoom:!1,center:[0,10],zoom:14})),a.on("load",_),a.on("click",W),a.on("mousemove",X)}(h)}));return t.$$set=t=>{"style"in t&&i(7,h=t.style),"minZoom"in t&&i(8,p=t.minZoom),"maxZoom"in t&&i(9,m=t.maxZoom),"rendererLib"in t&&i(10,b=t.rendererLib)},t.$$.update=()=>{6272&t.$$.dirty[0]&&(i(12,c=function(t){const e=n.layers.filter((t=>"symbol"===t.type));return e}()),i(0,o=45*c.length),a&&a.isStyleLoaded()&&_()),4096&t.$$.dirty[0]&&(u=c.filter((t=>t.layout&&t.layout["text-font"]))[0].layout["text-font"])},[o,y,f,I,v,Z,()=>{if(g){let t=v;a.setLayoutProperty(g,"text-field",t)}Z()},h,p,m,b,a,c,()=>{i(3,I=!0)},function(){v=this.value,i(4,v)}]}class jh extends st{constructor(t){super(),rt(this,t,kh,Ch,r,{style:7,minZoom:8,maxZoom:9,rendererLib:10},null,[-1,-1])}}function Fh(t){let i,n,a=t[2],o=Uh(t);return{c(){o.c(),i=Z()},m(t,e){o.m(t,e),b(t,i,e),n=!0},p(t,n){4&n&&r(a,a=t[2])?(K(),q(o,1,1,e),D(),o=Uh(t),o.c(),Q(o,1),o.m(i.parentNode,i)):o.p(t,n)},i(t){n||(Q(o),n=!0)},o(t){q(o),n=!1},d(t){t&&y(i),o.d(t)}}}function Nh(t){let e,i;return e=new Vh({props:{style:t[1]}}),{c(){it(e.$$.fragment)},m(t,n){nt(e,t,n),i=!0},p(t,i){const n={};2&i&&(n.style=t[1]),e.$set(n)},i(t){i||(Q(e.$$.fragment,t),i=!0)},o(t){q(e.$$.fragment,t),i=!1},d(t){at(e,t)}}}function Th(t){let e,i;return e=new ch({props:{style:t[1]}}),{c(){it(e.$$.fragment)},m(t,n){nt(e,t,n),i=!0},p(t,i){const n={};2&i&&(n.style=t[1]),e.$set(n)},i(t){i||(Q(e.$$.fragment,t),i=!0)},o(t){q(e.$$.fragment,t),i=!1},d(t){at(e,t)}}}function Uh(t){let e,i;return e=new jh({props:{style:t[1],rendererLib:t[2]}}),{c(){it(e.$$.fragment)},m(t,n){nt(e,t,n),i=!0},p(t,i){const n={};2&i&&(n.style=t[1]),4&i&&(n.rendererLib=t[2]),e.$set(n)},i(t){i||(Q(e.$$.fragment,t),i=!0)},o(t){q(e.$$.fragment,t),i=!1},d(t){at(e,t)}}}function Eh(t){let e,i,n,a;const o=[Th,Nh,Fh],r=[];function s(t,e){return"fill"===t[0]?0:"lines"===t[0]?1:"typography"===t[0]?2:-1}return~(i=s(t))&&(n=r[i]=o[i](t)),{c(){e=g("div"),n&&n.c(),w(e,"class","tabs-content svelte-1hc7bk")},m(t,n){b(t,e,n),~i&&r[i].m(e,null),a=!0},p(t,[a]){let l=i;i=s(t),i===l?~i&&r[i].p(t,a):(n&&(K(),q(r[l],1,1,(()=>{r[l]=null})),D()),~i?(n=r[i],n?n.p(t,a):(n=r[i]=o[i](t),n.c()),Q(n,1),n.m(e,null)):n=null)},i(t){a||(Q(n),a=!0)},o(t){q(n),a=!1},d(t){t&&y(e),~i&&r[i].d()}}}function Ah(t,e,i){let n,{selectedTab:a}=e,{style:o}=e,{updateBackgroundRect:r}=e,{backgroundSvgData:s}=e;return Nd.subscribe((t=>i(2,n=t))),t.$$set=t=>{"selectedTab"in t&&i(0,a=t.selectedTab),"style"in t&&i(1,o=t.style),"updateBackgroundRect"in t&&i(3,r=t.updateBackgroundRect),"backgroundSvgData"in t&&i(4,s=t.backgroundSvgData)},[a,o,n,r,s]}Du(".tabs-content.svelte-1hc7bk{display:flex;margin-top:2.5em;padding:var(--app-padding)}",{});class Oh extends st{constructor(t){super(),rt(this,t,Ah,Eh,r,{selectedTab:0,style:1,updateBackgroundRect:3,backgroundSvgData:4})}}function Ph(t){let i,n,a,o,r,s,l,c;return{c(){i=g("div"),n=g("div"),a=x(),o=g("div"),o.textContent="Loading ...",r=x(),s=g("div"),l=g("div"),w(n,"class","grayed-out svelte-1h09j0i"),w(o,"class","loading-text svelte-1h09j0i"),w(l,"class","progress svelte-1h09j0i"),w(l,"style",c=`width: ${t[0]}px`),w(s,"class","progress-bar svelte-1h09j0i"),w(i,"class","container svelte-1h09j0i")},m(t,e){b(t,i,e),m(i,n),m(i,a),m(i,o),m(i,r),m(i,s),m(s,l)},p(t,[e]){1&e&&c!==(c=`width: ${t[0]}px`)&&w(l,"style",c)},i:e,o:e,d(t){t&&y(i)}}}function Kh(t,e,i){let n,a,{progress:o}=e;return t.$$set=t=>{"progress"in t&&i(1,o=t.progress)},t.$$.update=()=>{6&t.$$.dirty&&i(0,a=null!==o&&n*o)},i(2,n=360),[a,o,n]}Du(".container.svelte-1h09j0i{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column}.grayed-out.svelte-1h09j0i{background-color:gray;opacity:60%;width:100%;height:100%;position:absolute;z-index:0}.loading-text.svelte-1h09j0i{margin-bottom:12px;font-size:24px;color:white;z-index:1}.progress-bar.svelte-1h09j0i{width:360px;height:24px;border-radius:24px;border:2px solid white;z-index:1;padding:3px}.progress.svelte-1h09j0i{height:100%;background-color:white;transition:all ease 0.1s;border-radius:18px}",{});class Dh extends st{constructor(t){super(),rt(this,t,Kh,Ph,r,{progress:1})}}const Qh=(t,e)=>{let i;const n=()=>window.removeEventListener("keydown",i),a=()=>{n(),e&&(i=i=>{!!e.alt==i.altKey&&!!e.shift==i.shiftKey&&!!e.control==(i.ctrlKey||i.metaKey)&&e.code==i.code&&(i.preventDefault(),e.callback?e.callback():t.click())},window.addEventListener("keydown",i))};return a(),{update:a,destroy:n}};var qh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function $h(t){var e={exports:{}};return t(e,e.exports),e.exports}var tp=$h((function(t,e){var i="__lodash_hash_undefined__",n=9007199254740991,a="[object Arguments]",o="[object Array]",r="[object Boolean]",s="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",h="[object Object]",p="[object Promise]",m="[object RegExp]",b="[object Set]",y="[object String]",f="[object Symbol]",g="[object WeakMap]",I="[object ArrayBuffer]",v="[object DataView]",x=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,G={};G["[object Float32Array]"]=G["[object Float64Array]"]=G["[object Int8Array]"]=G["[object Int16Array]"]=G["[object Int32Array]"]=G["[object Uint8Array]"]=G["[object Uint8ClampedArray]"]=G["[object Uint16Array]"]=G["[object Uint32Array]"]=!0,G[a]=G[o]=G[I]=G[r]=G[v]=G[s]=G[l]=G[c]=G[u]=G[d]=G[h]=G[m]=G[b]=G[y]=G[g]=!1;var w="object"==typeof qh&&qh&&qh.Object===Object&&qh,W="object"==typeof self&&self&&self.Object===Object&&self,X=w||W||Function("return this")(),_=e&&!e.nodeType&&e,V=_&&t&&!t.nodeType&&t,S=V&&V.exports===_,B=S&&w.process,L=function(){try{return B&&B.binding&&B.binding("util")}catch(t){}}(),Y=L&&L.isTypedArray;function z(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function R(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function C(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var M,J=Array.prototype,H=Function.prototype,k=Object.prototype,j=X["__core-js_shared__"],F=H.toString,N=k.hasOwnProperty,T=(M=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",U=k.toString,E=RegExp("^"+F.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=S?X.Buffer:void 0,O=X.Symbol,P=X.Uint8Array,K=k.propertyIsEnumerable,D=J.splice,Q=O?O.toStringTag:void 0,q=Object.getOwnPropertySymbols,$=A?A.isBuffer:void 0,tt=function(t,e){return function(i){return t(e(i))}}(Object.keys,Object),et=St(X,"DataView"),it=St(X,"Map"),nt=St(X,"Promise"),at=St(X,"Set"),ot=St(X,"WeakMap"),rt=St(Object,"create"),st=zt(et),lt=zt(it),ct=zt(nt),ut=zt(at),dt=zt(ot),ht=O?O.prototype:void 0,pt=ht?ht.valueOf:void 0;function mt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function bt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function yt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function ft(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new yt;++e<i;)this.add(t[e])}function gt(t){var e=this.__data__=new bt(t);this.size=e.size}function It(t,e){var i=Mt(t),n=!i&&Ct(t),a=!i&&!n&&Jt(t),o=!i&&!n&&!a&&Nt(t),r=i||n||a||o,s=r?function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],l=s.length;for(var c in t)!e&&!N.call(t,c)||r&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Yt(c,l))||s.push(c);return s}function vt(t,e){for(var i=t.length;i--;)if(Rt(t[i][0],e))return i;return-1}function xt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Q&&Q in Object(t)?function(t){var e=N.call(t,Q),i=t[Q];try{t[Q]=void 0;var n=!0}catch(t){}var a=U.call(t);n&&(e?t[Q]=i:delete t[Q]);return a}(t):function(t){return U.call(t)}(t)}function Zt(t){return Ft(t)&&xt(t)==a}function Gt(t,e,i,n,c){return t===e||(null==t||null==e||!Ft(t)&&!Ft(e)?t!=t&&e!=e:function(t,e,i,n,c,p){var g=Mt(t),x=Mt(e),Z=g?o:Lt(t),G=x?o:Lt(e),w=(Z=Z==a?h:Z)==h,W=(G=G==a?h:G)==h,X=Z==G;if(X&&Jt(t)){if(!Jt(e))return!1;g=!0,w=!1}if(X&&!w)return p||(p=new gt),g||Nt(t)?Xt(t,e,i,n,c,p):function(t,e,i,n,a,o,c){switch(i){case v:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case I:return!(t.byteLength!=e.byteLength||!o(new P(t),new P(e)));case r:case s:case d:return Rt(+t,+e);case l:return t.name==e.name&&t.message==e.message;case m:case y:return t==e+"";case u:var h=R;case b:var p=1&n;if(h||(h=C),t.size!=e.size&&!p)return!1;var g=c.get(t);if(g)return g==e;n|=2,c.set(t,e);var x=Xt(h(t),h(e),n,a,o,c);return c.delete(t),x;case f:if(pt)return pt.call(t)==pt.call(e)}return!1}(t,e,Z,i,n,c,p);if(!(1&i)){var _=w&&N.call(t,"__wrapped__"),V=W&&N.call(e,"__wrapped__");if(_||V){var S=_?t.value():t,B=V?e.value():e;return p||(p=new gt),c(S,B,i,n,p)}}if(!X)return!1;return p||(p=new gt),function(t,e,i,n,a,o){var r=1&i,s=_t(t),l=s.length,c=_t(e).length;if(l!=c&&!r)return!1;var u=l;for(;u--;){var d=s[u];if(!(r?d in e:N.call(e,d)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var p=!0;o.set(t,e),o.set(e,t);var m=r;for(;++u<l;){var b=t[d=s[u]],y=e[d];if(n)var f=r?n(y,b,d,e,t,o):n(b,y,d,t,e,o);if(!(void 0===f?b===y||a(b,y,i,n,o):f)){p=!1;break}m||(m="constructor"==d)}if(p&&!m){var g=t.constructor,I=e.constructor;g==I||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof I&&I instanceof I||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,i,n,c,p)}(t,e,i,n,Gt,c))}function wt(t){return!(!jt(t)||function(t){return!!T&&T in t}(t))&&(Ht(t)?E:x).test(zt(t))}function Wt(t){if(i=(e=t)&&e.constructor,n="function"==typeof i&&i.prototype||k,e!==n)return tt(t);var e,i,n,a=[];for(var o in Object(t))N.call(t,o)&&"constructor"!=o&&a.push(o);return a}function Xt(t,e,i,n,a,o){var r=1&i,s=t.length,l=e.length;if(s!=l&&!(r&&l>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var u=-1,d=!0,h=2&i?new ft:void 0;for(o.set(t,e),o.set(e,t);++u<s;){var p=t[u],m=e[u];if(n)var b=r?n(m,p,u,e,t,o):n(p,m,u,t,e,o);if(void 0!==b){if(b)continue;d=!1;break}if(h){if(!z(e,(function(t,e){if(r=e,!h.has(r)&&(p===t||a(p,t,i,n,o)))return h.push(e);var r}))){d=!1;break}}else if(p!==m&&!a(p,m,i,n,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function _t(t){return function(t,e,i){var n=e(t);return Mt(t)?n:function(t,e){for(var i=-1,n=e.length,a=t.length;++i<n;)t[a+i]=e[i];return t}(n,i(t))}(t,Tt,Bt)}function Vt(t,e){var i,n,a=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?a["string"==typeof e?"string":"hash"]:a.map}function St(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return wt(i)?i:void 0}mt.prototype.clear=function(){this.__data__=rt?rt(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(rt){var n=e[t];return n===i?void 0:n}return N.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return rt?void 0!==e[t]:N.call(e,t)},mt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=rt&&void 0===e?i:e,this},bt.prototype.clear=function(){this.__data__=[],this.size=0},bt.prototype.delete=function(t){var e=this.__data__,i=vt(e,t);return!(i<0)&&(i==e.length-1?e.pop():D.call(e,i,1),--this.size,!0)},bt.prototype.get=function(t){var e=this.__data__,i=vt(e,t);return i<0?void 0:e[i][1]},bt.prototype.has=function(t){return vt(this.__data__,t)>-1},bt.prototype.set=function(t,e){var i=this.__data__,n=vt(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},yt.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(it||bt),string:new mt}},yt.prototype.delete=function(t){var e=Vt(this,t).delete(t);return this.size-=e?1:0,e},yt.prototype.get=function(t){return Vt(this,t).get(t)},yt.prototype.has=function(t){return Vt(this,t).has(t)},yt.prototype.set=function(t,e){var i=Vt(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},ft.prototype.add=ft.prototype.push=function(t){return this.__data__.set(t,i),this},ft.prototype.has=function(t){return this.__data__.has(t)},gt.prototype.clear=function(){this.__data__=new bt,this.size=0},gt.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},gt.prototype.get=function(t){return this.__data__.get(t)},gt.prototype.has=function(t){return this.__data__.has(t)},gt.prototype.set=function(t,e){var i=this.__data__;if(i instanceof bt){var n=i.__data__;if(!it||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new yt(n)}return i.set(t,e),this.size=i.size,this};var Bt=q?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,n=null==t?0:t.length,a=0,o=[];++i<n;){var r=t[i];e(r,i,t)&&(o[a++]=r)}return o}(q(t),(function(e){return K.call(t,e)})))}:function(){return[]},Lt=xt;function Yt(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||Z.test(t))&&t>-1&&t%1==0&&t<e}function zt(t){if(null!=t){try{return F.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Rt(t,e){return t===e||t!=t&&e!=e}(et&&Lt(new et(new ArrayBuffer(1)))!=v||it&&Lt(new it)!=u||nt&&Lt(nt.resolve())!=p||at&&Lt(new at)!=b||ot&&Lt(new ot)!=g)&&(Lt=function(t){var e=xt(t),i=e==h?t.constructor:void 0,n=i?zt(i):"";if(n)switch(n){case st:return v;case lt:return u;case ct:return p;case ut:return b;case dt:return g}return e});var Ct=Zt(function(){return arguments}())?Zt:function(t){return Ft(t)&&N.call(t,"callee")&&!K.call(t,"callee")},Mt=Array.isArray;var Jt=$||function(){return!1};function Ht(t){if(!jt(t))return!1;var e=xt(t);return e==c||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function kt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function jt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ft(t){return null!=t&&"object"==typeof t}var Nt=Y?function(t){return function(e){return t(e)}}(Y):function(t){return Ft(t)&&kt(t.length)&&!!G[xt(t)]};function Tt(t){return null!=(e=t)&&kt(e.length)&&!Ht(e)?It(t):Wt(t);var e}t.exports=function(t,e){return Gt(t,e)}}));Object.keys(li).reduce(((t,e)=>(e.includes("paint")&&Object.keys(li[e]).forEach((i=>{"color"===li[e][i].type&&t.push(i)})),t)),[]),Object.keys(li.expression_name.values);const ep=(t,e)=>!(t&&!e||e&&!t)&&(!t&&!e||(t=$o(t),e=$o(e),tp(t,e)));function ip(t){let e,i;return{c(){e=g("div"),i=v(t[2]),w(e,"class","error-message svelte-154gapw")},m(t,n){b(t,e,n),m(e,i)},p(t,e){4&e&&W(i,t[2])},d(t){t&&y(e)}}}function np(t){let i,n,r,s,l,c,u,d,h,p,f=!!t[2]&&ip(t);return{c(){i=g("div"),f&&f.c(),n=x(),r=g("div"),s=g("input"),l=x(),c=g("button"),u=v("Submit"),w(s,"placeholder","enter a url to a style"),s.disabled=t[0],w(s,"class","svelte-154gapw"),S(s,"input-error",t[2]),c.disabled=d=t[3]===t[1]||t[0],w(r,"class","custom-input svelte-154gapw"),w(i,"class","map-style-input svelte-154gapw")},m(a,d){var y;b(a,i,d),f&&f.m(i,null),m(i,n),m(i,r),m(r,s),X(s,t[1]),m(r,l),m(r,c),m(c,u),h||(p=[G(s,"input",t[9]),G(s,"focus",t[6]),G(s,"blur",t[7]),(y=Qh.call(null,c,{code:"Enter",callback:t[5]}),y&&o(y.destroy)?y.destroy:e),G(c,"click",t[4])],h=!0)},p(t,[e]){t[2]?f?f.p(t,e):(f=ip(t),f.c(),f.m(i,n)):f&&(f.d(1),f=null),1&e&&(s.disabled=t[0]),2&e&&s.value!==t[1]&&X(s,t[1]),4&e&&S(s,"input-error",t[2]),11&e&&d!==(d=t[3]===t[1]||t[0])&&(c.disabled=d)},i:e,o:e,d(t){t&&y(i),f&&f.d(),h=!1,a(p)}}}function ap(t,e,i){const n=R();let a,{activeStyle:o}=e,{disabled:r=!1}=e,s="",l=!1,c=null,u=!0,d="";var h;h=()=>{u=!1},Y().$$.on_destroy.push(h);const p=t=>{const e=t=>{if(!u||!t||d!==t)return!1;if(!ep(a,o))return!1;const e=new RegExp("^(?:[a-z+]+:)?//","i");return t.includes("localhost")||!e.test(t)};e(t)&&setTimeout((()=>e(t)&&m(t)),3e3)},m=async t=>{let e;try{const i=await(async t=>{const e=await fetch(t);return await e.json()})(t);if(i&&"object"==typeof i)return e=i,p(t),a=e,n("styleload",{style:e}),{status:"200"}}catch(t){return i(2,c=new Error("Style was not found.")),{status:"404"}}},b=async()=>{let t=s;if(t.includes("localhost")){const[e,i]=t.split("localhost");e||(t=`http://localhost${i}`)}(async t=>{const{status:e}=await m(t);"200"===e&&(i(3,d=t),p(t))})(t)};return t.$$set=t=>{"activeStyle"in t&&i(8,o=t.activeStyle),"disabled"in t&&i(0,r=t.disabled)},t.$$.update=()=>{2&t.$$.dirty&&(t=>{c&&void 0!==t&&i(2,c=null)})(s),256&t.$$.dirty&&(ep(a,o)||i(1,s=""))},[r,s,c,d,b,()=>{l&&b()},()=>{l=!0},()=>{l=!1,c&&i(1,s="")},o,function(){s=this.value,i(1,s)}]}Du(".map-style-input.svelte-154gapw{display:flex}.custom-input.svelte-154gapw{margin-top:0px}.input-error.svelte-154gapw:focus{outline:none;border-color:red}.error-message.svelte-154gapw{background-color:lightcoral;border-style:solid;border-color:red;border-width:1px;border-radius:4px;padding:6px;color:white;margin-right:6px;height:18px}",{});class op extends st{constructor(t){super(),rt(this,t,ap,np,r,{activeStyle:8,disabled:0})}}var rp=$h((function(t,e){!function(t){var e=Array.prototype.forEach;function i(t){var n,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("No element specified.");o.recursive&&(a=t.children,e).call(a,(function(t){i(t,o)}));var r=getComputedStyle(t);(n=o.properties||r,e).call(n,(function(e){t.style[e]=r.getPropertyValue(e)}))}t.exports=i}(t)})),sp=null;try{var lp="undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof __non_webpack_require__&&__non_webpack_require__("worker_threads")||"function"==typeof require&&require("worker_threads");sp=lp.Worker}catch(Pu){}function cp(t,e,i){var n=void 0===e?null:e,a=function(t,e){return Buffer.from(t,"base64").toString(e?"utf16":"utf8")}(t,void 0!==i&&i),o=a.indexOf("\n",10)+1,r=a.substring(o)+(n?"//# sourceMappingURL="+n:"");return function(t){return new sp(r,Object.assign({},t,{eval:!0}))}}function up(t,e,i){var n=void 0===e?null:e,a=function(t,e){var i=atob(t);if(e){for(var n=new Uint8Array(i.length),a=0,o=i.length;a<o;++a)n[a]=i.charCodeAt(a);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return i}(t,void 0!==i&&i),o=a.indexOf("\n",10)+1,r=a.substring(o)+(n?"//# sourceMappingURL="+n:""),s=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(s)}var dp="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);var hp,pp,mp,bp=(hp="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7dmFyIGU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9e30scj0wO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspe3ZhciBvPWFyZ3VtZW50c1tyXTtmb3IodmFyIG4gaW4gbyl0LmNhbGwobyxuKSYmKGVbbl09b1tuXSl9cmV0dXJuIGV9LHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTt2YXIgcj1mdW5jdGlvbihlKXt2YXIgdCxyLGksYT1bXTtpZihBcnJheS5pc0FycmF5KGUpKXI9W10sdD1lLmxlbmd0aC0xO2Vsc2V7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKCJFeHBlY3RpbmcgYW4gQXJyYXkgb3IgYW4gT2JqZWN0LCBidXQgYCIrKG51bGw9PT1lPyJudWxsIjp0eXBlb2YgZSkrImAgcHJvdmlkZWQuIik7cj17fSxpPU9iamVjdC5rZXlzKGUpLHQ9aS5sZW5ndGgtMX1yZXR1cm4gZnVuY3Rpb24gcihzLGwpe3ZhciB1LGMscDtmb3IoYz1pP2lbbF06bCxBcnJheS5pc0FycmF5KGVbY10pfHwodm9pZCAwPT09ZVtjXT9lW2NdPVtdOmVbY109W2VbY11dKSx1PTA7dTxlW2NdLmxlbmd0aDt1KyspbihwPW8ocyksZVtjXVt1XSxjKSxsPj10P2EucHVzaChwKTpyKHAsbCsxKX0ociwwKSxhfTtmdW5jdGlvbiBvKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHQpP1tdLmNvbmNhdCh0KTplKHQpfWZ1bmN0aW9uIG4oZSx0LHIpe0FycmF5LmlzQXJyYXkoZSk/ZS5wdXNoKHQpOmVbcl09dH12YXIgaT0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIGEoZSl7dmFyIHQ9e2V4cG9ydHM6e319O3JldHVybiBlKHQsdC5leHBvcnRzKSx0LmV4cG9ydHN9dmFyIHM9YSgoZnVuY3Rpb24oZSx0KXt2YXIgcj0iX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyIsbz05MDA3MTk5MjU0NzQwOTkxLG49IltvYmplY3QgQXJndW1lbnRzXSIsYT0iW29iamVjdCBGdW5jdGlvbl0iLHM9IltvYmplY3QgT2JqZWN0XSIsbD0vXlxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXF0kLyx1PS9eKD86MHxbMS05XVxkKikkLyxjPXt9O2NbIltvYmplY3QgRmxvYXQzMkFycmF5XSJdPWNbIltvYmplY3QgRmxvYXQ2NEFycmF5XSJdPWNbIltvYmplY3QgSW50OEFycmF5XSJdPWNbIltvYmplY3QgSW50MTZBcnJheV0iXT1jWyJbb2JqZWN0IEludDMyQXJyYXldIl09Y1siW29iamVjdCBVaW50OEFycmF5XSJdPWNbIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIl09Y1siW29iamVjdCBVaW50MTZBcnJheV0iXT1jWyJbb2JqZWN0IFVpbnQzMkFycmF5XSJdPSEwLGNbbl09Y1siW29iamVjdCBBcnJheV0iXT1jWyJbb2JqZWN0IEFycmF5QnVmZmVyXSJdPWNbIltvYmplY3QgQm9vbGVhbl0iXT1jWyJbb2JqZWN0IERhdGFWaWV3XSJdPWNbIltvYmplY3QgRGF0ZV0iXT1jWyJbb2JqZWN0IEVycm9yXSJdPWNbYV09Y1siW29iamVjdCBNYXBdIl09Y1siW29iamVjdCBOdW1iZXJdIl09Y1tzXT1jWyJbb2JqZWN0IFJlZ0V4cF0iXT1jWyJbb2JqZWN0IFNldF0iXT1jWyJbb2JqZWN0IFN0cmluZ10iXT1jWyJbb2JqZWN0IFdlYWtNYXBdIl09ITE7dmFyIHA9Im9iamVjdCI9PXR5cGVvZiBpJiZpJiZpLk9iamVjdD09PU9iamVjdCYmaSxkPSJvYmplY3QiPT10eXBlb2Ygc2VsZiYmc2VsZiYmc2VsZi5PYmplY3Q9PT1PYmplY3QmJnNlbGYsaD1wfHxkfHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpLGY9dCYmIXQubm9kZVR5cGUmJnQseT1mJiZlJiYhZS5ub2RlVHlwZSYmZSxtPXkmJnkuZXhwb3J0cz09PWYsZz1tJiZwLnByb2Nlc3Msdj1mdW5jdGlvbigpe3RyeXt2YXIgZT15JiZ5LnJlcXVpcmUmJnkucmVxdWlyZSgidXRpbCIpLnR5cGVzO3JldHVybiBlfHxnJiZnLmJpbmRpbmcmJmcuYmluZGluZygidXRpbCIpfWNhdGNoKGUpe319KCksYj12JiZ2LmlzVHlwZWRBcnJheTtmdW5jdGlvbiB4KGUsdCxyKXtzd2l0Y2goci5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gZS5jYWxsKHQpO2Nhc2UgMTpyZXR1cm4gZS5jYWxsKHQsclswXSk7Y2FzZSAyOnJldHVybiBlLmNhbGwodCxyWzBdLHJbMV0pO2Nhc2UgMzpyZXR1cm4gZS5jYWxsKHQsclswXSxyWzFdLHJbMl0pfXJldHVybiBlLmFwcGx5KHQscil9dmFyIHcsayxqLHo9QXJyYXkucHJvdG90eXBlLFQ9RnVuY3Rpb24ucHJvdG90eXBlLF89T2JqZWN0LnByb3RvdHlwZSxTPWhbIl9fY29yZS1qc19zaGFyZWRfXyJdLEE9VC50b1N0cmluZyxJPV8uaGFzT3duUHJvcGVydHksQz0odz0vW14uXSskLy5leGVjKFMmJlMua2V5cyYmUy5rZXlzLklFX1BST1RPfHwiIikpPyJTeW1ib2woc3JjKV8xLiIrdzoiIixPPV8udG9TdHJpbmcsRT1BLmNhbGwoT2JqZWN0KSxxPVJlZ0V4cCgiXiIrQS5jYWxsKEkpLnJlcGxhY2UoL1tcXF4kLiorPygpW1xde318XS9nLCJcXCQmIikucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXCgpfCBmb3IgLis/KD89XFxcXSkvZywiJDEuKj8iKSsiJCIpLE09bT9oLkJ1ZmZlcjp2b2lkIDAsTj1oLlN5bWJvbCxSPWguVWludDhBcnJheSxEPU0/TS5hbGxvY1Vuc2FmZTp2b2lkIDAsUD0oaz1PYmplY3QuZ2V0UHJvdG90eXBlT2Ysaj1PYmplY3QsZnVuY3Rpb24oZSl7cmV0dXJuIGsoaihlKSl9KSxGPU9iamVjdC5jcmVhdGUsTD1fLnByb3BlcnR5SXNFbnVtZXJhYmxlLCQ9ei5zcGxpY2UsVT1OP04udG9TdHJpbmdUYWc6dm9pZCAwLEo9ZnVuY3Rpb24oKXt0cnl7dmFyIGU9eWUoT2JqZWN0LCJkZWZpbmVQcm9wZXJ0eSIpO3JldHVybiBlKHt9LCIiLHt9KSxlfWNhdGNoKGUpe319KCksVz1NP00uaXNCdWZmZXI6dm9pZCAwLEc9TWF0aC5tYXgsQj1EYXRlLm5vdyxWPXllKGgsIk1hcCIpLEg9eWUoT2JqZWN0LCJjcmVhdGUiKSxaPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZnVuY3Rpb24odCl7aWYoIVNlKHQpKXJldHVybnt9O2lmKEYpcmV0dXJuIEYodCk7ZS5wcm90b3R5cGU9dDt2YXIgcj1uZXcgZTtyZXR1cm4gZS5wcm90b3R5cGU9dm9pZCAwLHJ9fSgpO2Z1bmN0aW9uIFgoZSl7dmFyIHQ9LTEscj1udWxsPT1lPzA6ZS5sZW5ndGg7Zm9yKHRoaXMuY2xlYXIoKTsrK3Q8cjspe3ZhciBvPWVbdF07dGhpcy5zZXQob1swXSxvWzFdKX19ZnVuY3Rpb24gSyhlKXt2YXIgdD0tMSxyPW51bGw9PWU/MDplLmxlbmd0aDtmb3IodGhpcy5jbGVhcigpOysrdDxyOyl7dmFyIG89ZVt0XTt0aGlzLnNldChvWzBdLG9bMV0pfX1mdW5jdGlvbiBZKGUpe3ZhciB0PS0xLHI9bnVsbD09ZT8wOmUubGVuZ3RoO2Zvcih0aGlzLmNsZWFyKCk7Kyt0PHI7KXt2YXIgbz1lW3RdO3RoaXMuc2V0KG9bMF0sb1sxXSl9fWZ1bmN0aW9uIFEoZSl7dmFyIHQ9dGhpcy5fX2RhdGFfXz1uZXcgSyhlKTt0aGlzLnNpemU9dC5zaXplfWZ1bmN0aW9uIGVlKGUsdCl7dmFyIHI9a2UoZSksbz0hciYmd2UoZSksbj0hciYmIW8mJnplKGUpLGk9IXImJiFvJiYhbiYmSWUoZSksYT1yfHxvfHxufHxpLHM9YT9mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0tMSxvPUFycmF5KGUpOysrcjxlOylvW3JdPXQocik7cmV0dXJuIG99KGUubGVuZ3RoLFN0cmluZyk6W10sbD1zLmxlbmd0aDtmb3IodmFyIHUgaW4gZSkhdCYmIUkuY2FsbChlLHUpfHxhJiYoImxlbmd0aCI9PXV8fG4mJigib2Zmc2V0Ij09dXx8InBhcmVudCI9PXUpfHxpJiYoImJ1ZmZlciI9PXV8fCJieXRlTGVuZ3RoIj09dXx8ImJ5dGVPZmZzZXQiPT11KXx8bWUodSxsKSl8fHMucHVzaCh1KTtyZXR1cm4gc31mdW5jdGlvbiB0ZShlLHQscil7KHZvaWQgMCE9PXImJiF4ZShlW3RdLHIpfHx2b2lkIDA9PT1yJiYhKHQgaW4gZSkpJiZuZShlLHQscil9ZnVuY3Rpb24gcmUoZSx0LHIpe3ZhciBvPWVbdF07SS5jYWxsKGUsdCkmJnhlKG8scikmJih2b2lkIDAhPT1yfHx0IGluIGUpfHxuZShlLHQscil9ZnVuY3Rpb24gb2UoZSx0KXtmb3IodmFyIHI9ZS5sZW5ndGg7ci0tOylpZih4ZShlW3JdWzBdLHQpKXJldHVybiByO3JldHVybi0xfWZ1bmN0aW9uIG5lKGUsdCxyKXsiX19wcm90b19fIj09dCYmSj9KKGUsdCx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6cix3cml0YWJsZTohMH0pOmVbdF09cn1YLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX19kYXRhX189SD9IKG51bGwpOnt9LHRoaXMuc2l6ZT0wfSxYLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5oYXMoZSkmJmRlbGV0ZSB0aGlzLl9fZGF0YV9fW2VdO3JldHVybiB0aGlzLnNpemUtPXQ/MTowLHR9LFgucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9fZGF0YV9fO2lmKEgpe3ZhciBvPXRbZV07cmV0dXJuIG89PT1yP3ZvaWQgMDpvfXJldHVybiBJLmNhbGwodCxlKT90W2VdOnZvaWQgMH0sWC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX19kYXRhX187cmV0dXJuIEg/dm9pZCAwIT09dFtlXTpJLmNhbGwodCxlKX0sWC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG89dGhpcy5fX2RhdGFfXztyZXR1cm4gdGhpcy5zaXplKz10aGlzLmhhcyhlKT8wOjEsb1tlXT1IJiZ2b2lkIDA9PT10P3I6dCx0aGlzfSxLLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX19kYXRhX189W10sdGhpcy5zaXplPTB9LEsucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9fZGF0YV9fLHI9b2UodCxlKTtyZXR1cm4hKHI8MCkmJihyPT10Lmxlbmd0aC0xP3QucG9wKCk6JC5jYWxsKHQsciwxKSwtLXRoaXMuc2l6ZSwhMCl9LEsucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9fZGF0YV9fLHI9b2UodCxlKTtyZXR1cm4gcjwwP3ZvaWQgMDp0W3JdWzFdfSxLLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSl7cmV0dXJuIG9lKHRoaXMuX19kYXRhX18sZSk+LTF9LEsucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX19kYXRhX18sbz1vZShyLGUpO3JldHVybiBvPDA/KCsrdGhpcy5zaXplLHIucHVzaChbZSx0XSkpOnJbb11bMV09dCx0aGlzfSxZLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuc2l6ZT0wLHRoaXMuX19kYXRhX189e2hhc2g6bmV3IFgsbWFwOm5ldyhWfHxLKSxzdHJpbmc6bmV3IFh9fSxZLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZmUodGhpcyxlKS5kZWxldGUoZSk7cmV0dXJuIHRoaXMuc2l6ZS09dD8xOjAsdH0sWS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBmZSh0aGlzLGUpLmdldChlKX0sWS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiBmZSh0aGlzLGUpLmhhcyhlKX0sWS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZmUodGhpcyxlKSxvPXIuc2l6ZTtyZXR1cm4gci5zZXQoZSx0KSx0aGlzLnNpemUrPXIuc2l6ZT09bz8wOjEsdGhpc30sUS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPW5ldyBLLHRoaXMuc2l6ZT0wfSxRLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fX2RhdGFfXyxyPXQuZGVsZXRlKGUpO3JldHVybiB0aGlzLnNpemU9dC5zaXplLHJ9LFEucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQoZSl9LFEucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXMoZSl9LFEucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX19kYXRhX187aWYociBpbnN0YW5jZW9mIEspe3ZhciBvPXIuX19kYXRhX187aWYoIVZ8fG8ubGVuZ3RoPDE5OSlyZXR1cm4gby5wdXNoKFtlLHRdKSx0aGlzLnNpemU9KytyLnNpemUsdGhpcztyPXRoaXMuX19kYXRhX189bmV3IFkobyl9cmV0dXJuIHIuc2V0KGUsdCksdGhpcy5zaXplPXIuc2l6ZSx0aGlzfTt2YXIgaWUsYWU9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbz0tMSxuPU9iamVjdChlKSxpPXIoZSksYT1pLmxlbmd0aDthLS07KXt2YXIgcz1pW2llP2E6KytvXTtpZighMT09PXQobltzXSxzLG4pKWJyZWFrfXJldHVybiBlfTtmdW5jdGlvbiBzZShlKXtyZXR1cm4gbnVsbD09ZT92b2lkIDA9PT1lPyJbb2JqZWN0IFVuZGVmaW5lZF0iOiJbb2JqZWN0IE51bGxdIjpVJiZVIGluIE9iamVjdChlKT9mdW5jdGlvbihlKXt2YXIgdD1JLmNhbGwoZSxVKSxyPWVbVV07dHJ5e2VbVV09dm9pZCAwO3ZhciBvPSEwfWNhdGNoKGUpe312YXIgbj1PLmNhbGwoZSk7byYmKHQ/ZVtVXT1yOmRlbGV0ZSBlW1VdKTtyZXR1cm4gbn0oZSk6ZnVuY3Rpb24oZSl7cmV0dXJuIE8uY2FsbChlKX0oZSl9ZnVuY3Rpb24gbGUoZSl7cmV0dXJuIEFlKGUpJiZzZShlKT09bn1mdW5jdGlvbiB1ZShlKXtyZXR1cm4hKCFTZShlKXx8ZnVuY3Rpb24oZSl7cmV0dXJuISFDJiZDIGluIGV9KGUpKSYmKFRlKGUpP3E6bCkudGVzdChmdW5jdGlvbihlKXtpZihudWxsIT1lKXt0cnl7cmV0dXJuIEEuY2FsbChlKX1jYXRjaChlKXt9dHJ5e3JldHVybiBlKyIifWNhdGNoKGUpe319cmV0dXJuIiJ9KGUpKX1mdW5jdGlvbiBjZShlKXtpZighU2UoZSkpcmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PVtdO2lmKG51bGwhPWUpZm9yKHZhciByIGluIE9iamVjdChlKSl0LnB1c2gocik7cmV0dXJuIHR9KGUpO3ZhciB0PWdlKGUpLHI9W107Zm9yKHZhciBvIGluIGUpKCJjb25zdHJ1Y3RvciIhPW98fCF0JiZJLmNhbGwoZSxvKSkmJnIucHVzaChvKTtyZXR1cm4gcn1mdW5jdGlvbiBwZShlLHQscixvLG4pe2UhPT10JiZhZSh0LChmdW5jdGlvbihpLGEpe2lmKG58fChuPW5ldyBRKSxTZShpKSkhZnVuY3Rpb24oZSx0LHIsbyxuLGksYSl7dmFyIGw9dmUoZSxyKSx1PXZlKHQsciksYz1hLmdldCh1KTtpZihjKXJldHVybiB2b2lkIHRlKGUscixjKTt2YXIgcD1pP2kobCx1LHIrIiIsZSx0LGEpOnZvaWQgMCxkPXZvaWQgMD09PXA7aWYoZCl7dmFyIGg9a2UodSksZj0haCYmemUodSkseT0haCYmIWYmJkllKHUpO3A9dSxofHxmfHx5P2tlKGwpP3A9bDpBZSh4PWwpJiZqZSh4KT9wPWZ1bmN0aW9uKGUsdCl7dmFyIHI9LTEsbz1lLmxlbmd0aDt0fHwodD1BcnJheShvKSk7Zm9yKDsrK3I8bzspdFtyXT1lW3JdO3JldHVybiB0fShsKTpmPyhkPSExLHA9ZnVuY3Rpb24oZSx0KXtpZih0KXJldHVybiBlLnNsaWNlKCk7dmFyIHI9ZS5sZW5ndGgsbz1EP0Qocik6bmV3IGUuY29uc3RydWN0b3Iocik7cmV0dXJuIGUuY29weShvKSxvfSh1LCEwKSk6eT8oZD0hMSxtPXUsZz0hMD8odj1tLmJ1ZmZlcixiPW5ldyB2LmNvbnN0cnVjdG9yKHYuYnl0ZUxlbmd0aCksbmV3IFIoYikuc2V0KG5ldyBSKHYpKSxiKTptLmJ1ZmZlcixwPW5ldyBtLmNvbnN0cnVjdG9yKGcsbS5ieXRlT2Zmc2V0LG0ubGVuZ3RoKSk6cD1bXTpmdW5jdGlvbihlKXtpZighQWUoZSl8fHNlKGUpIT1zKXJldHVybiExO3ZhciB0PVAoZSk7aWYobnVsbD09PXQpcmV0dXJuITA7dmFyIHI9SS5jYWxsKHQsImNvbnN0cnVjdG9yIikmJnQuY29uc3RydWN0b3I7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHImJnIgaW5zdGFuY2VvZiByJiZBLmNhbGwocik9PUV9KHUpfHx3ZSh1KT8ocD1sLHdlKGwpP3A9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyLG8pe3ZhciBuPSFyO3J8fChyPXt9KTt2YXIgaT0tMSxhPXQubGVuZ3RoO2Zvcig7KytpPGE7KXt2YXIgcz10W2ldLGw9bz9vKHJbc10sZVtzXSxzLHIsZSk6dm9pZCAwO3ZvaWQgMD09PWwmJihsPWVbc10pLG4/bmUocixzLGwpOnJlKHIscyxsKX1yZXR1cm4gcn0oZSxDZShlKSl9KGwpOlNlKGwpJiYhVGUobCl8fChwPWZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiIhPXR5cGVvZiBlLmNvbnN0cnVjdG9yfHxnZShlKT97fTpaKFAoZSkpfSh1KSkpOmQ9ITF9dmFyIG0sZyx2LGI7dmFyIHg7ZCYmKGEuc2V0KHUscCksbihwLHUsbyxpLGEpLGEuZGVsZXRlKHUpKTt0ZShlLHIscCl9KGUsdCxhLHIscGUsbyxuKTtlbHNle3ZhciBsPW8/byh2ZShlLGEpLGksYSsiIixlLHQsbik6dm9pZCAwO3ZvaWQgMD09PWwmJihsPWkpLHRlKGUsYSxsKX19KSxDZSl9ZnVuY3Rpb24gZGUoZSx0KXtyZXR1cm4gYmUoZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0PUcodm9pZCAwPT09dD9lLmxlbmd0aC0xOnQsMCksZnVuY3Rpb24oKXtmb3IodmFyIG89YXJndW1lbnRzLG49LTEsaT1HKG8ubGVuZ3RoLXQsMCksYT1BcnJheShpKTsrK248aTspYVtuXT1vW3Qrbl07bj0tMTtmb3IodmFyIHM9QXJyYXkodCsxKTsrK248dDspc1tuXT1vW25dO3JldHVybiBzW3RdPXIoYSkseChlLHRoaXMscyl9fShlLHQscWUpLGUrIiIpfXZhciBoZT1KP2Z1bmN0aW9uKGUsdCl7cmV0dXJuIEooZSwidG9TdHJpbmciLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx2YWx1ZToocj10LGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSx3cml0YWJsZTohMH0pO3ZhciByfTpxZTtmdW5jdGlvbiBmZShlLHQpe3ZhciByLG8sbj1lLl9fZGF0YV9fO3JldHVybigic3RyaW5nIj09KG89dHlwZW9mKHI9dCkpfHwibnVtYmVyIj09b3x8InN5bWJvbCI9PW98fCJib29sZWFuIj09bz8iX19wcm90b19fIiE9PXI6bnVsbD09PXIpP25bInN0cmluZyI9PXR5cGVvZiB0PyJzdHJpbmciOiJoYXNoIl06bi5tYXB9ZnVuY3Rpb24geWUoZSx0KXt2YXIgcj1mdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1lP3ZvaWQgMDplW3RdfShlLHQpO3JldHVybiB1ZShyKT9yOnZvaWQgMH1mdW5jdGlvbiBtZShlLHQpe3ZhciByPXR5cGVvZiBlO3JldHVybiEhKHQ9bnVsbD09dD9vOnQpJiYoIm51bWJlciI9PXJ8fCJzeW1ib2wiIT1yJiZ1LnRlc3QoZSkpJiZlPi0xJiZlJTE9PTAmJmU8dH1mdW5jdGlvbiBnZShlKXt2YXIgdD1lJiZlLmNvbnN0cnVjdG9yO3JldHVybiBlPT09KCJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LnByb3RvdHlwZXx8Xyl9ZnVuY3Rpb24gdmUoZSx0KXtpZigoImNvbnN0cnVjdG9yIiE9PXR8fCJmdW5jdGlvbiIhPXR5cGVvZiBlW3RdKSYmIl9fcHJvdG9fXyIhPXQpcmV0dXJuIGVbdF19dmFyIGJlPWZ1bmN0aW9uKGUpe3ZhciB0PTAscj0wO3JldHVybiBmdW5jdGlvbigpe3ZhciBvPUIoKSxuPTE2LShvLXIpO2lmKHI9byxuPjApe2lmKCsrdD49ODAwKXJldHVybiBhcmd1bWVudHNbMF19ZWxzZSB0PTA7cmV0dXJuIGUuYXBwbHkodm9pZCAwLGFyZ3VtZW50cyl9fShoZSk7ZnVuY3Rpb24geGUoZSx0KXtyZXR1cm4gZT09PXR8fGUhPWUmJnQhPXR9dmFyIHdlPWxlKGZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c30oKSk/bGU6ZnVuY3Rpb24oZSl7cmV0dXJuIEFlKGUpJiZJLmNhbGwoZSwiY2FsbGVlIikmJiFMLmNhbGwoZSwiY2FsbGVlIil9LGtlPUFycmF5LmlzQXJyYXk7ZnVuY3Rpb24gamUoZSl7cmV0dXJuIG51bGwhPWUmJl9lKGUubGVuZ3RoKSYmIVRlKGUpfXZhciB6ZT1XfHxmdW5jdGlvbigpe3JldHVybiExfTtmdW5jdGlvbiBUZShlKXtpZighU2UoZSkpcmV0dXJuITE7dmFyIHQ9c2UoZSk7cmV0dXJuIHQ9PWF8fCJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSI9PXR8fCJbb2JqZWN0IEFzeW5jRnVuY3Rpb25dIj09dHx8IltvYmplY3QgUHJveHldIj09dH1mdW5jdGlvbiBfZShlKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmU+LTEmJmUlMT09MCYmZTw9b31mdW5jdGlvbiBTZShlKXt2YXIgdD10eXBlb2YgZTtyZXR1cm4gbnVsbCE9ZSYmKCJvYmplY3QiPT10fHwiZnVuY3Rpb24iPT10KX1mdW5jdGlvbiBBZShlKXtyZXR1cm4gbnVsbCE9ZSYmIm9iamVjdCI9PXR5cGVvZiBlfXZhciBJZT1iP2Z1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZSh0KX19KGIpOmZ1bmN0aW9uKGUpe3JldHVybiBBZShlKSYmX2UoZS5sZW5ndGgpJiYhIWNbc2UoZSldfTtmdW5jdGlvbiBDZShlKXtyZXR1cm4gamUoZSk/ZWUoZSwhMCk6Y2UoZSl9dmFyIE9lLEVlPShPZT1mdW5jdGlvbihlLHQscixvKXtwZShlLHQscixvKX0sZGUoKGZ1bmN0aW9uKGUsdCl7dmFyIHI9LTEsbz10Lmxlbmd0aCxuPW8+MT90W28tMV06dm9pZCAwLGk9bz4yP3RbMl06dm9pZCAwO2ZvcihuPU9lLmxlbmd0aD4zJiYiZnVuY3Rpb24iPT10eXBlb2Ygbj8oby0tLG4pOnZvaWQgMCxpJiZmdW5jdGlvbihlLHQscil7aWYoIVNlKHIpKXJldHVybiExO3ZhciBvPXR5cGVvZiB0O3JldHVybiEhKCJudW1iZXIiPT1vP2plKHIpJiZtZSh0LHIubGVuZ3RoKToic3RyaW5nIj09byYmdCBpbiByKSYmeGUoclt0XSxlKX0odFswXSx0WzFdLGkpJiYobj1vPDM/dm9pZCAwOm4sbz0xKSxlPU9iamVjdChlKTsrK3I8bzspe3ZhciBhPXRbcl07YSYmT2UoZSxhLHIsbil9cmV0dXJuIGV9KSkpO2Z1bmN0aW9uIHFlKGUpe3JldHVybiBlfWUuZXhwb3J0cz1FZX0pKTtmdW5jdGlvbiBsKCl7fVByb21pc2UucmVzb2x2ZSgpO2NvbnN0IHU9W107Y29uc3QgYz1mdW5jdGlvbihlLHQ9bCl7bGV0IHI7Y29uc3Qgbz1uZXcgU2V0O2Z1bmN0aW9uIG4odCl7aWYoaT10LCgobj1lKSE9bj9pPT1pOm4hPT1pfHxuJiYib2JqZWN0Ij09dHlwZW9mIG58fCJmdW5jdGlvbiI9PXR5cGVvZiBuKSYmKGU9dCxyKSl7Y29uc3QgdD0hdS5sZW5ndGg7Zm9yKGNvbnN0IHQgb2Ygbyl0WzFdKCksdS5wdXNoKHQsZSk7aWYodCl7Zm9yKGxldCBlPTA7ZTx1Lmxlbmd0aDtlKz0yKXVbZV1bMF0odVtlKzFdKTt1Lmxlbmd0aD0wfX12YXIgbixpfXJldHVybntzZXQ6bix1cGRhdGU6ZnVuY3Rpb24odCl7bih0KGUpKX0sc3Vic2NyaWJlOmZ1bmN0aW9uKGksYT1sKXtjb25zdCBzPVtpLGFdO3JldHVybiBvLmFkZChzKSwxPT09by5zaXplJiYocj10KG4pfHxsKSxpKGUpLCgpPT57by5kZWxldGUocyksMD09PW8uc2l6ZSYmKHIoKSxyPW51bGwpfX19fSgxMCk7dmFyIHA9eyR2ZXJzaW9uOjgsJHJvb3Q6e3ZlcnNpb246e3JlcXVpcmVkOiEwLHR5cGU6ImVudW0iLHZhbHVlczpbOF0sZG9jOiJTdHlsZSBzcGVjaWZpY2F0aW9uIHZlcnNpb24gbnVtYmVyLiBNdXN0IGJlIDguIixleGFtcGxlOjh9LG5hbWU6e3R5cGU6InN0cmluZyIsZG9jOiJBIGh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoZSBzdHlsZS4iLGV4YW1wbGU6IkJyaWdodCJ9LG1ldGFkYXRhOnt0eXBlOiIqIixkb2M6IkFyYml0cmFyeSBwcm9wZXJ0aWVzIHVzZWZ1bCB0byB0cmFjayB3aXRoIHRoZSBzdHlsZXNoZWV0LCBidXQgZG8gbm90IGluZmx1ZW5jZSByZW5kZXJpbmcuIFByb3BlcnRpZXMgc2hvdWxkIGJlIHByZWZpeGVkIHRvIGF2b2lkIGNvbGxpc2lvbnMsIGxpa2UgJ21hcGJveDonLiJ9LGNlbnRlcjp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGRvYzoiRGVmYXVsdCBtYXAgY2VudGVyIGluIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUuICBUaGUgc3R5bGUgY2VudGVyIHdpbGwgYmUgdXNlZCBvbmx5IGlmIHRoZSBtYXAgaGFzIG5vdCBiZWVuIHBvc2l0aW9uZWQgYnkgb3RoZXIgbWVhbnMgKGUuZy4gbWFwIG9wdGlvbnMgb3IgdXNlciBpbnRlcmFjdGlvbikuIixleGFtcGxlOlstNzMuOTc0OSw0MC43NzM2XX0sem9vbTp7dHlwZToibnVtYmVyIixkb2M6IkRlZmF1bHQgem9vbSBsZXZlbC4gIFRoZSBzdHlsZSB6b29tIHdpbGwgYmUgdXNlZCBvbmx5IGlmIHRoZSBtYXAgaGFzIG5vdCBiZWVuIHBvc2l0aW9uZWQgYnkgb3RoZXIgbWVhbnMgKGUuZy4gbWFwIG9wdGlvbnMgb3IgdXNlciBpbnRlcmFjdGlvbikuIixleGFtcGxlOjEyLjV9LGJlYXJpbmc6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLHBlcmlvZDozNjAsdW5pdHM6ImRlZ3JlZXMiLGRvYzonRGVmYXVsdCBiZWFyaW5nLCBpbiBkZWdyZWVzLiBUaGUgYmVhcmluZyBpcyB0aGUgY29tcGFzcyBkaXJlY3Rpb24gdGhhdCBpcyAidXAiOyBmb3IgZXhhbXBsZSwgYSBiZWFyaW5nIG9mIDkwwrAgb3JpZW50cyB0aGUgbWFwIHNvIHRoYXQgZWFzdCBpcyB1cC4gVGhpcyB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSBpZiB0aGUgbWFwIGhhcyBub3QgYmVlbiBwb3NpdGlvbmVkIGJ5IG90aGVyIG1lYW5zIChlLmcuIG1hcCBvcHRpb25zIG9yIHVzZXIgaW50ZXJhY3Rpb24pLicsZXhhbXBsZToyOX0scGl0Y2g6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLHVuaXRzOiJkZWdyZWVzIixkb2M6IkRlZmF1bHQgcGl0Y2gsIGluIGRlZ3JlZXMuIFplcm8gaXMgcGVycGVuZGljdWxhciB0byB0aGUgc3VyZmFjZSwgZm9yIGEgbG9vayBzdHJhaWdodCBkb3duIGF0IHRoZSBtYXAsIHdoaWxlIGEgZ3JlYXRlciB2YWx1ZSBsaWtlIDYwIGxvb2tzIGFoZWFkIHRvd2FyZHMgdGhlIGhvcml6b24uIFRoZSBzdHlsZSBwaXRjaCB3aWxsIGJlIHVzZWQgb25seSBpZiB0aGUgbWFwIGhhcyBub3QgYmVlbiBwb3NpdGlvbmVkIGJ5IG90aGVyIG1lYW5zIChlLmcuIG1hcCBvcHRpb25zIG9yIHVzZXIgaW50ZXJhY3Rpb24pLiIsZXhhbXBsZTo1MH0sbGlnaHQ6e3R5cGU6ImxpZ2h0Iixkb2M6IlRoZSBnbG9iYWwgbGlnaHQgc291cmNlLiIsZXhhbXBsZTp7YW5jaG9yOiJ2aWV3cG9ydCIsY29sb3I6IndoaXRlIixpbnRlbnNpdHk6LjR9fSx0ZXJyYWluOnt0eXBlOiJ0ZXJyYWluIixkb2M6IkEgZ2xvYmFsIG1vZGlmaWVyIHRoYXQgZWxldmF0ZXMgbGF5ZXJzIGFuZCBtYXJrZXJzIGJhc2VkIG9uIGEgREVNIGRhdGEgc291cmNlLiJ9LGZvZzp7dHlwZToiZm9nIixkb2M6IkEgZ2xvYmFsIGVmZmVjdCB0aGF0IGZhZGVzIGxheWVycyBhbmQgbWFya2VycyBiYXNlZCBvbiB0aGVpciBkaXN0YW5jZSB0byB0aGUgY2FtZXJhLiBUaGUgZm9nIGNhbiBiZSB1c2VkIHRvIGFwcHJveGltYXRlIHRoZSBlZmZlY3Qgb2YgYXRtb3NwaGVyZSBvbiBkaXN0YW50IG9iamVjdHMgYW5kIGVuaGFuY2UgdGhlIGRlcHRoIHBlcmNlcHRpb24gb2YgdGhlIG1hcCB3aGVuIHVzZWQgd2l0aCB0ZXJyYWluIG9yIDNEIGZlYXR1cmVzLiBOb3RlOiBmb2cgaXMgcmVuYW1lZCB0byBhdG1vc3BoZXJlIGluIHRoZSBBbmRyb2lkIGFuZCBpT1MgU0RLcyBhbmQgcGxhbm5lZCB0byBiZSBjaGFuZ2VkIGluIEdMLUpTIHYuMy4wLjAuIn0sc291cmNlczp7cmVxdWlyZWQ6ITAsdHlwZToic291cmNlcyIsZG9jOiJEYXRhIHNvdXJjZSBzcGVjaWZpY2F0aW9ucy4iLGV4YW1wbGU6eyJtYXBib3gtc3RyZWV0cyI6e3R5cGU6InZlY3RvciIsdXJsOiJtYXBib3g6Ly9tYXBib3gubWFwYm94LXN0cmVldHMtdjYifX19LHNwcml0ZTp7dHlwZToic3RyaW5nIixkb2M6IkEgYmFzZSBVUkwgZm9yIHJldHJpZXZpbmcgdGhlIHNwcml0ZSBpbWFnZSBhbmQgbWV0YWRhdGEuIFRoZSBleHRlbnNpb25zIGAucG5nYCwgYC5qc29uYCBhbmQgc2NhbGUgZmFjdG9yIGBAMngucG5nYCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgYXBwZW5kZWQuIFRoaXMgcHJvcGVydHkgaXMgcmVxdWlyZWQgaWYgYW55IGxheWVyIHVzZXMgdGhlIGBiYWNrZ3JvdW5kLXBhdHRlcm5gLCBgZmlsbC1wYXR0ZXJuYCwgYGxpbmUtcGF0dGVybmAsIGBmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuYCwgb3IgYGljb24taW1hZ2VgIHByb3BlcnRpZXMuIFRoZSBVUkwgbXVzdCBiZSBhYnNvbHV0ZSwgY29udGFpbmluZyB0aGUgW3NjaGVtZSwgYXV0aG9yaXR5IGFuZCBwYXRoIGNvbXBvbmVudHNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VSTCNTeW50YXgpLiIsZXhhbXBsZToibWFwYm94Oi8vc3ByaXRlcy9tYXBib3gvYnJpZ2h0LXY4In0sZ2x5cGhzOnt0eXBlOiJzdHJpbmciLGRvYzoiQSBVUkwgdGVtcGxhdGUgZm9yIGxvYWRpbmcgc2lnbmVkLWRpc3RhbmNlLWZpZWxkIGdseXBoIHNldHMgaW4gUEJGIGZvcm1hdC4gVGhlIFVSTCBtdXN0IGluY2x1ZGUgYHtmb250c3RhY2t9YCBhbmQgYHtyYW5nZX1gIHRva2Vucy4gVGhpcyBwcm9wZXJ0eSBpcyByZXF1aXJlZCBpZiBhbnkgbGF5ZXIgdXNlcyB0aGUgYHRleHQtZmllbGRgIGxheW91dCBwcm9wZXJ0eS4gVGhlIFVSTCBtdXN0IGJlIGFic29sdXRlLCBjb250YWluaW5nIHRoZSBbc2NoZW1lLCBhdXRob3JpdHkgYW5kIHBhdGggY29tcG9uZW50c10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVJMI1N5bnRheCkuIixleGFtcGxlOiJtYXBib3g6Ly9mb250cy9tYXBib3gve2ZvbnRzdGFja30ve3JhbmdlfS5wYmYifSx0cmFuc2l0aW9uOnt0eXBlOiJ0cmFuc2l0aW9uIixkb2M6IkEgZ2xvYmFsIHRyYW5zaXRpb24gZGVmaW5pdGlvbiB0byB1c2UgYXMgYSBkZWZhdWx0IGFjcm9zcyBwcm9wZXJ0aWVzLCB0byBiZSB1c2VkIGZvciB0aW1pbmcgdHJhbnNpdGlvbnMgYmV0d2VlbiBvbmUgdmFsdWUgYW5kIHRoZSBuZXh0IHdoZW4gbm8gcHJvcGVydHktc3BlY2lmaWMgdHJhbnNpdGlvbiBpcyBzZXQuIENvbGxpc2lvbi1iYXNlZCBzeW1ib2wgZmFkaW5nIGlzIGNvbnRyb2xsZWQgaW5kZXBlbmRlbnRseSBvZiB0aGUgc3R5bGUncyBgdHJhbnNpdGlvbmAgcHJvcGVydHkuIixleGFtcGxlOntkdXJhdGlvbjozMDAsZGVsYXk6MH19LHByb2plY3Rpb246e3R5cGU6InByb2plY3Rpb24iLGRvYzoiVGhlIHByb2plY3Rpb24gdGhlIG1hcCBzaG91bGQgYmUgcmVuZGVyZWQgaW4uIFN1cHBvcnRlZCBwcm9qZWN0aW9ucyBhcmUgTWVyY2F0b3IsIEdsb2JlLCBBbGJlcnMsIEVxdWFsIEVhcnRoLCBFcXVpcmVjdGFuZ3VsYXIgKFdHUzg0KSwgTGFtYmVydCBjb25mb3JtYWwgY29uaWMsIE5hdHVyYWwgRWFydGgsIGFuZCBXaW5rZWwgVHJpcGVsLiBUZXJyYWluLCBza3kgYW5kIGZvZyBhcmUgc3VwcG9ydGVkIGJ5IG9ubHkgTWVyY2F0b3IgYW5kIGdsb2JlLiBDdXN0b21MYXllckludGVyZmFjZSBpcyBub3Qgc3VwcG9ydGVkIG91dHNpZGUgb2YgTWVyY2F0b3IuIixleGFtcGxlOntuYW1lOiJhbGJlcnMiLGNlbnRlcjpbLTE1NCw1MF0scGFyYWxsZWxzOls1NSw2NV19fSxsYXllcnM6e3JlcXVpcmVkOiEwLHR5cGU6ImFycmF5Iix2YWx1ZToibGF5ZXIiLGRvYzoiTGF5ZXJzIHdpbGwgYmUgZHJhd24gaW4gdGhlIG9yZGVyIG9mIHRoaXMgYXJyYXkuIixleGFtcGxlOlt7aWQ6IndhdGVyIixzb3VyY2U6Im1hcGJveC1zdHJlZXRzIiwic291cmNlLWxheWVyIjoid2F0ZXIiLHR5cGU6ImZpbGwiLHBhaW50OnsiZmlsbC1jb2xvciI6IiMwMGZmZmYifX1dfX0sc291cmNlczp7IioiOnt0eXBlOiJzb3VyY2UiLGRvYzoiU3BlY2lmaWNhdGlvbiBvZiBhIGRhdGEgc291cmNlLiBGb3IgdmVjdG9yIGFuZCByYXN0ZXIgc291cmNlcywgZWl0aGVyIFRpbGVKU09OIG9yIGEgVVJMIHRvIGEgVGlsZUpTT04gbXVzdCBiZSBwcm92aWRlZC4gRm9yIGltYWdlIGFuZCB2aWRlbyBzb3VyY2VzLCBhIFVSTCBtdXN0IGJlIHByb3ZpZGVkLiBGb3IgR2VvSlNPTiBzb3VyY2VzLCBhIFVSTCBvciBpbmxpbmUgR2VvSlNPTiBtdXN0IGJlIHByb3ZpZGVkLiJ9fSxzb3VyY2U6WyJzb3VyY2VfdmVjdG9yIiwic291cmNlX3Jhc3RlciIsInNvdXJjZV9yYXN0ZXJfZGVtIiwic291cmNlX2dlb2pzb24iLCJzb3VyY2VfdmlkZW8iLCJzb3VyY2VfaW1hZ2UiXSxzb3VyY2VfdmVjdG9yOnt0eXBlOntyZXF1aXJlZDohMCx0eXBlOiJlbnVtIix2YWx1ZXM6e3ZlY3Rvcjp7ZG9jOiJBIHZlY3RvciB0aWxlIHNvdXJjZS4ifX0sZG9jOiJUaGUgdHlwZSBvZiB0aGUgc291cmNlLiJ9LHVybDp7dHlwZToic3RyaW5nIixkb2M6IkEgVVJMIHRvIGEgVGlsZUpTT04gcmVzb3VyY2UuIFN1cHBvcnRlZCBwcm90b2NvbHMgYXJlIGBodHRwOmAsIGBodHRwczpgLCBhbmQgYG1hcGJveDovLzxUaWxlc2V0IElEPmAuIn0sdGlsZXM6e3R5cGU6ImFycmF5Iix2YWx1ZToic3RyaW5nIixkb2M6IkFuIGFycmF5IG9mIG9uZSBvciBtb3JlIHRpbGUgc291cmNlIFVSTHMsIGFzIGluIHRoZSBUaWxlSlNPTiBzcGVjLiJ9LGJvdW5kczp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGxlbmd0aDo0LGRlZmF1bHQ6Wy0xODAsLTg1LjA1MTEyOSwxODAsODUuMDUxMTI5XSxkb2M6IkFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUgb2YgdGhlIHNvdXRod2VzdCBhbmQgbm9ydGhlYXN0IGNvcm5lcnMgb2YgdGhlIHNvdXJjZSdzIGJvdW5kaW5nIGJveCBpbiB0aGUgZm9sbG93aW5nIG9yZGVyOiBgW3N3LmxuZywgc3cubGF0LCBuZS5sbmcsIG5lLmxhdF1gLiBXaGVuIHRoaXMgcHJvcGVydHkgaXMgaW5jbHVkZWQgaW4gYSBzb3VyY2UsIG5vIHRpbGVzIG91dHNpZGUgb2YgdGhlIGdpdmVuIGJvdW5kcyBhcmUgcmVxdWVzdGVkIGJ5IE1hcGJveCBHTC4ifSxzY2hlbWU6e3R5cGU6ImVudW0iLHZhbHVlczp7eHl6Ontkb2M6IlNsaXBweSBtYXAgdGlsZW5hbWVzIHNjaGVtZS4ifSx0bXM6e2RvYzoiT1NHZW8gc3BlYyBzY2hlbWUuIn19LGRlZmF1bHQ6Inh5eiIsZG9jOiJJbmZsdWVuY2VzIHRoZSB5IGRpcmVjdGlvbiBvZiB0aGUgdGlsZSBjb29yZGluYXRlcy4gVGhlIGdsb2JhbC1tZXJjYXRvciAoYWthIFNwaGVyaWNhbCBNZXJjYXRvcikgcHJvZmlsZSBpcyBhc3N1bWVkLiJ9LG1pbnpvb206e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLGRvYzoiTWluaW11bSB6b29tIGxldmVsIGZvciB3aGljaCB0aWxlcyBhcmUgYXZhaWxhYmxlLCBhcyBpbiB0aGUgVGlsZUpTT04gc3BlYy4ifSxtYXh6b29tOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MjIsZG9jOiJNYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHdoaWNoIHRpbGVzIGFyZSBhdmFpbGFibGUsIGFzIGluIHRoZSBUaWxlSlNPTiBzcGVjLiBEYXRhIGZyb20gdGlsZXMgYXQgdGhlIG1heHpvb20gYXJlIHVzZWQgd2hlbiBkaXNwbGF5aW5nIHRoZSBtYXAgYXQgaGlnaGVyIHpvb20gbGV2ZWxzLiJ9LGF0dHJpYnV0aW9uOnt0eXBlOiJzdHJpbmciLGRvYzoiQ29udGFpbnMgYW4gYXR0cmlidXRpb24gdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlIG1hcCBpcyBzaG93biB0byBhIHVzZXIuIn0scHJvbW90ZUlkOnt0eXBlOiJwcm9tb3RlSWQiLGRvYzoiQSBwcm9wZXJ0eSB0byB1c2UgYXMgYSBmZWF0dXJlIGlkIChmb3IgZmVhdHVyZSBzdGF0ZSkuIEVpdGhlciBhIHByb3BlcnR5IG5hbWUsIG9yIGFuIG9iamVjdCBvZiB0aGUgZm9ybSBgezxzb3VyY2VMYXllcj46IDxwcm9wZXJ0eU5hbWU+fWAuIElmIHNwZWNpZmllZCBhcyBhIHN0cmluZyBmb3IgYSB2ZWN0b3IgdGlsZSBzb3VyY2UsIHRoZSBzYW1lIHByb3BlcnR5IGlzIHVzZWQgYWNyb3NzIGFsbCBpdHMgc291cmNlIGxheWVycy4ifSx2b2xhdGlsZTp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IkEgc2V0dGluZyB0byBkZXRlcm1pbmUgd2hldGhlciBhIHNvdXJjZSdzIHRpbGVzIGFyZSBjYWNoZWQgbG9jYWxseS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7YW5kcm9pZDoiOS4zLjAiLGlvczoiNS4xMC4wIn19fSwiKiI6e3R5cGU6IioiLGRvYzoiT3RoZXIga2V5cyB0byBjb25maWd1cmUgdGhlIGRhdGEgc291cmNlLiJ9fSxzb3VyY2VfcmFzdGVyOnt0eXBlOntyZXF1aXJlZDohMCx0eXBlOiJlbnVtIix2YWx1ZXM6e3Jhc3Rlcjp7ZG9jOiJBIHJhc3RlciB0aWxlIHNvdXJjZS4ifX0sZG9jOiJUaGUgdHlwZSBvZiB0aGUgc291cmNlLiJ9LHVybDp7dHlwZToic3RyaW5nIixkb2M6IkEgVVJMIHRvIGEgVGlsZUpTT04gcmVzb3VyY2UuIFN1cHBvcnRlZCBwcm90b2NvbHMgYXJlIGBodHRwOmAsIGBodHRwczpgLCBhbmQgYG1hcGJveDovLzxUaWxlc2V0IElEPmAuIn0sdGlsZXM6e3R5cGU6ImFycmF5Iix2YWx1ZToic3RyaW5nIixkb2M6IkFuIGFycmF5IG9mIG9uZSBvciBtb3JlIHRpbGUgc291cmNlIFVSTHMsIGFzIGluIHRoZSBUaWxlSlNPTiBzcGVjLiJ9LGJvdW5kczp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGxlbmd0aDo0LGRlZmF1bHQ6Wy0xODAsLTg1LjA1MTEyOSwxODAsODUuMDUxMTI5XSxkb2M6IkFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUgb2YgdGhlIHNvdXRod2VzdCBhbmQgbm9ydGhlYXN0IGNvcm5lcnMgb2YgdGhlIHNvdXJjZSdzIGJvdW5kaW5nIGJveCBpbiB0aGUgZm9sbG93aW5nIG9yZGVyOiBgW3N3LmxuZywgc3cubGF0LCBuZS5sbmcsIG5lLmxhdF1gLiBXaGVuIHRoaXMgcHJvcGVydHkgaXMgaW5jbHVkZWQgaW4gYSBzb3VyY2UsIG5vIHRpbGVzIG91dHNpZGUgb2YgdGhlIGdpdmVuIGJvdW5kcyBhcmUgcmVxdWVzdGVkIGJ5IE1hcGJveCBHTC4ifSxtaW56b29tOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxkb2M6Ik1pbmltdW0gem9vbSBsZXZlbCBmb3Igd2hpY2ggdGlsZXMgYXJlIGF2YWlsYWJsZSwgYXMgaW4gdGhlIFRpbGVKU09OIHNwZWMuIn0sbWF4em9vbTp7dHlwZToibnVtYmVyIixkZWZhdWx0OjIyLGRvYzoiTWF4aW11bSB6b29tIGxldmVsIGZvciB3aGljaCB0aWxlcyBhcmUgYXZhaWxhYmxlLCBhcyBpbiB0aGUgVGlsZUpTT04gc3BlYy4gRGF0YSBmcm9tIHRpbGVzIGF0IHRoZSBtYXh6b29tIGFyZSB1c2VkIHdoZW4gZGlzcGxheWluZyB0aGUgbWFwIGF0IGhpZ2hlciB6b29tIGxldmVscy4ifSx0aWxlU2l6ZTp7dHlwZToibnVtYmVyIixkZWZhdWx0OjUxMix1bml0czoicGl4ZWxzIixkb2M6IlRoZSBtaW5pbXVtIHZpc3VhbCBzaXplIHRvIGRpc3BsYXkgdGlsZXMgZm9yIHRoaXMgbGF5ZXIuIE9ubHkgY29uZmlndXJhYmxlIGZvciByYXN0ZXIgbGF5ZXJzLiJ9LHNjaGVtZTp7dHlwZToiZW51bSIsdmFsdWVzOnt4eXo6e2RvYzoiU2xpcHB5IG1hcCB0aWxlbmFtZXMgc2NoZW1lLiJ9LHRtczp7ZG9jOiJPU0dlbyBzcGVjIHNjaGVtZS4ifX0sZGVmYXVsdDoieHl6Iixkb2M6IkluZmx1ZW5jZXMgdGhlIHkgZGlyZWN0aW9uIG9mIHRoZSB0aWxlIGNvb3JkaW5hdGVzLiBUaGUgZ2xvYmFsLW1lcmNhdG9yIChha2EgU3BoZXJpY2FsIE1lcmNhdG9yKSBwcm9maWxlIGlzIGFzc3VtZWQuIn0sYXR0cmlidXRpb246e3R5cGU6InN0cmluZyIsZG9jOiJDb250YWlucyBhbiBhdHRyaWJ1dGlvbiB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgbWFwIGlzIHNob3duIHRvIGEgdXNlci4ifSx2b2xhdGlsZTp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IkEgc2V0dGluZyB0byBkZXRlcm1pbmUgd2hldGhlciBhIHNvdXJjZSdzIHRpbGVzIGFyZSBjYWNoZWQgbG9jYWxseS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7YW5kcm9pZDoiOS4zLjAiLGlvczoiNS4xMC4wIn19fSwiKiI6e3R5cGU6IioiLGRvYzoiT3RoZXIga2V5cyB0byBjb25maWd1cmUgdGhlIGRhdGEgc291cmNlLiJ9fSxzb3VyY2VfcmFzdGVyX2RlbTp7dHlwZTp7cmVxdWlyZWQ6ITAsdHlwZToiZW51bSIsdmFsdWVzOnsicmFzdGVyLWRlbSI6e2RvYzoiQSBSR0ItZW5jb2RlZCByYXN0ZXIgREVNIHNvdXJjZSJ9fSxkb2M6IlRoZSB0eXBlIG9mIHRoZSBzb3VyY2UuIn0sdXJsOnt0eXBlOiJzdHJpbmciLGRvYzoiQSBVUkwgdG8gYSBUaWxlSlNPTiByZXNvdXJjZS4gU3VwcG9ydGVkIHByb3RvY29scyBhcmUgYGh0dHA6YCwgYGh0dHBzOmAsIGFuZCBgbWFwYm94Oi8vPFRpbGVzZXQgSUQ+YC4ifSx0aWxlczp7dHlwZToiYXJyYXkiLHZhbHVlOiJzdHJpbmciLGRvYzoiQW4gYXJyYXkgb2Ygb25lIG9yIG1vcmUgdGlsZSBzb3VyY2UgVVJMcywgYXMgaW4gdGhlIFRpbGVKU09OIHNwZWMuIn0sYm91bmRzOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjQsZGVmYXVsdDpbLTE4MCwtODUuMDUxMTI5LDE4MCw4NS4wNTExMjldLGRvYzoiQW4gYXJyYXkgY29udGFpbmluZyB0aGUgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSBvZiB0aGUgc291dGh3ZXN0IGFuZCBub3J0aGVhc3QgY29ybmVycyBvZiB0aGUgc291cmNlJ3MgYm91bmRpbmcgYm94IGluIHRoZSBmb2xsb3dpbmcgb3JkZXI6IGBbc3cubG5nLCBzdy5sYXQsIG5lLmxuZywgbmUubGF0XWAuIFdoZW4gdGhpcyBwcm9wZXJ0eSBpcyBpbmNsdWRlZCBpbiBhIHNvdXJjZSwgbm8gdGlsZXMgb3V0c2lkZSBvZiB0aGUgZ2l2ZW4gYm91bmRzIGFyZSByZXF1ZXN0ZWQgYnkgTWFwYm94IEdMLiJ9LG1pbnpvb206e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLGRvYzoiTWluaW11bSB6b29tIGxldmVsIGZvciB3aGljaCB0aWxlcyBhcmUgYXZhaWxhYmxlLCBhcyBpbiB0aGUgVGlsZUpTT04gc3BlYy4ifSxtYXh6b29tOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MjIsZG9jOiJNYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHdoaWNoIHRpbGVzIGFyZSBhdmFpbGFibGUsIGFzIGluIHRoZSBUaWxlSlNPTiBzcGVjLiBEYXRhIGZyb20gdGlsZXMgYXQgdGhlIG1heHpvb20gYXJlIHVzZWQgd2hlbiBkaXNwbGF5aW5nIHRoZSBtYXAgYXQgaGlnaGVyIHpvb20gbGV2ZWxzLiJ9LHRpbGVTaXplOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6NTEyLHVuaXRzOiJwaXhlbHMiLGRvYzoiVGhlIG1pbmltdW0gdmlzdWFsIHNpemUgdG8gZGlzcGxheSB0aWxlcyBmb3IgdGhpcyBsYXllci4gT25seSBjb25maWd1cmFibGUgZm9yIHJhc3RlciBsYXllcnMuIn0sYXR0cmlidXRpb246e3R5cGU6InN0cmluZyIsZG9jOiJDb250YWlucyBhbiBhdHRyaWJ1dGlvbiB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgbWFwIGlzIHNob3duIHRvIGEgdXNlci4ifSxlbmNvZGluZzp7dHlwZToiZW51bSIsdmFsdWVzOnt0ZXJyYXJpdW06e2RvYzoiVGVycmFyaXVtIGZvcm1hdCBQTkcgdGlsZXMuIFNlZSBodHRwczovL2F3cy5hbWF6b24uY29tL2VzL3B1YmxpYy1kYXRhc2V0cy90ZXJyYWluLyBmb3IgbW9yZSBpbmZvLiJ9LG1hcGJveDp7ZG9jOiJNYXBib3ggVGVycmFpbiBSR0IgdGlsZXMuIFNlZSBodHRwczovL3d3dy5tYXBib3guY29tL2hlbHAvYWNjZXNzLWVsZXZhdGlvbi1kYXRhLyNtYXBib3gtdGVycmFpbi1yZ2IgZm9yIG1vcmUgaW5mby4ifX0sZGVmYXVsdDoibWFwYm94Iixkb2M6IlRoZSBlbmNvZGluZyB1c2VkIGJ5IHRoaXMgc291cmNlLiBNYXBib3ggVGVycmFpbiBSR0IgaXMgdXNlZCBieSBkZWZhdWx0In0sdm9sYXRpbGU6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITEsZG9jOiJBIHNldHRpbmcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBzb3VyY2UncyB0aWxlcyBhcmUgY2FjaGVkIGxvY2FsbHkuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2FuZHJvaWQ6IjkuMy4wIixpb3M6IjUuMTAuMCJ9fX0sIioiOnt0eXBlOiIqIixkb2M6Ik90aGVyIGtleXMgdG8gY29uZmlndXJlIHRoZSBkYXRhIHNvdXJjZS4ifX0sc291cmNlX2dlb2pzb246e3R5cGU6e3JlcXVpcmVkOiEwLHR5cGU6ImVudW0iLHZhbHVlczp7Z2VvanNvbjp7ZG9jOiJBIEdlb0pTT04gZGF0YSBzb3VyY2UuIn19LGRvYzoiVGhlIGRhdGEgdHlwZSBvZiB0aGUgR2VvSlNPTiBzb3VyY2UuIn0sZGF0YTp7dHlwZToiKiIsZG9jOiJBIFVSTCB0byBhIEdlb0pTT04gZmlsZSwgb3IgaW5saW5lIEdlb0pTT04uIn0sbWF4em9vbTp7dHlwZToibnVtYmVyIixkZWZhdWx0OjE4LGRvYzoiTWF4aW11bSB6b29tIGxldmVsIGF0IHdoaWNoIHRvIGNyZWF0ZSB2ZWN0b3IgdGlsZXMgKGhpZ2hlciBtZWFucyBncmVhdGVyIGRldGFpbCBhdCBoaWdoIHpvb20gbGV2ZWxzKS4ifSxhdHRyaWJ1dGlvbjp7dHlwZToic3RyaW5nIixkb2M6IkNvbnRhaW5zIGFuIGF0dHJpYnV0aW9uIHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSBtYXAgaXMgc2hvd24gdG8gYSB1c2VyLiJ9LGJ1ZmZlcjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEyOCxtYXhpbXVtOjUxMixtaW5pbXVtOjAsZG9jOiJTaXplIG9mIHRoZSB0aWxlIGJ1ZmZlciBvbiBlYWNoIHNpZGUuIEEgdmFsdWUgb2YgMCBwcm9kdWNlcyBubyBidWZmZXIuIEEgdmFsdWUgb2YgNTEyIHByb2R1Y2VzIGEgYnVmZmVyIGFzIHdpZGUgYXMgdGhlIHRpbGUgaXRzZWxmLiBMYXJnZXIgdmFsdWVzIHByb2R1Y2UgZmV3ZXIgcmVuZGVyaW5nIGFydGlmYWN0cyBuZWFyIHRpbGUgZWRnZXMgYW5kIHNsb3dlciBwZXJmb3JtYW5jZS4ifSxmaWx0ZXI6e3R5cGU6IioiLGRvYzoiQW4gZXhwcmVzc2lvbiBmb3IgZmlsdGVyaW5nIGZlYXR1cmVzIHByaW9yIHRvIHByb2Nlc3NpbmcgdGhlbSBmb3IgcmVuZGVyaW5nLiJ9LHRvbGVyYW5jZTp7dHlwZToibnVtYmVyIixkZWZhdWx0Oi4zNzUsZG9jOiJEb3VnbGFzLVBldWNrZXIgc2ltcGxpZmljYXRpb24gdG9sZXJhbmNlIChoaWdoZXIgbWVhbnMgc2ltcGxlciBnZW9tZXRyaWVzIGFuZCBmYXN0ZXIgcGVyZm9ybWFuY2UpLiJ9LGNsdXN0ZXI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITEsZG9jOiJJZiB0aGUgZGF0YSBpcyBhIGNvbGxlY3Rpb24gb2YgcG9pbnQgZmVhdHVyZXMsIHNldHRpbmcgdGhpcyB0byB0cnVlIGNsdXN0ZXJzIHRoZSBwb2ludHMgYnkgcmFkaXVzIGludG8gZ3JvdXBzLiBDbHVzdGVyIGdyb3VwcyBiZWNvbWUgbmV3IGBQb2ludGAgZmVhdHVyZXMgaW4gdGhlIHNvdXJjZSB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllczpcbiAqIGBjbHVzdGVyYCBJcyBgdHJ1ZWAgaWYgdGhlIHBvaW50IGlzIGEgY2x1c3RlciBcbiAqIGBjbHVzdGVyX2lkYCBBIHVucWl1ZSBpZCBmb3IgdGhlIGNsdXN0ZXIgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBbY2x1c3RlciBpbnNwZWN0aW9uIG1ldGhvZHNdKGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vbWFwYm94LWdsLWpzL2FwaS8jZ2VvanNvbnNvdXJjZSNnZXRjbHVzdGVyZXhwYW5zaW9uem9vbSlcbiAqIGBwb2ludF9jb3VudGAgTnVtYmVyIG9mIG9yaWdpbmFsIHBvaW50cyBncm91cGVkIGludG8gdGhpcyBjbHVzdGVyXG4gKiBgcG9pbnRfY291bnRfYWJicmV2aWF0ZWRgIEFuIGFiYnJldmlhdGVkIHBvaW50IGNvdW50In0sY2x1c3RlclJhZGl1czp7dHlwZToibnVtYmVyIixkZWZhdWx0OjUwLG1pbmltdW06MCxkb2M6IlJhZGl1cyBvZiBlYWNoIGNsdXN0ZXIgaWYgY2x1c3RlcmluZyBpcyBlbmFibGVkLiBBIHZhbHVlIG9mIDUxMiBpbmRpY2F0ZXMgYSByYWRpdXMgZXF1YWwgdG8gdGhlIHdpZHRoIG9mIGEgdGlsZS4ifSxjbHVzdGVyTWF4Wm9vbTp7dHlwZToibnVtYmVyIixkb2M6Ik1heCB6b29tIG9uIHdoaWNoIHRvIGNsdXN0ZXIgcG9pbnRzIGlmIGNsdXN0ZXJpbmcgaXMgZW5hYmxlZC4gRGVmYXVsdHMgdG8gb25lIHpvb20gbGVzcyB0aGFuIG1heHpvb20gKHNvIHRoYXQgbGFzdCB6b29tIGZlYXR1cmVzIGFyZSBub3QgY2x1c3RlcmVkKS4gQ2x1c3RlcnMgYXJlIHJlLWV2YWx1YXRlZCBhdCBpbnRlZ2VyIHpvb20gbGV2ZWxzIHNvIHNldHRpbmcgY2x1c3Rlck1heFpvb20gdG8gMTQgbWVhbnMgdGhlIGNsdXN0ZXJzIHdpbGwgYmUgZGlzcGxheWVkIHVudGlsIHoxNS4ifSxjbHVzdGVyTWluUG9pbnRzOnt0eXBlOiJudW1iZXIiLGRvYzoiTWluaW11bSBudW1iZXIgb2YgcG9pbnRzIG5lY2Vzc2FyeSB0byBmb3JtIGEgY2x1c3RlciBpZiBjbHVzdGVyaW5nIGlzIGVuYWJsZWQuIERlZmF1bHRzIHRvIGAyYC4ifSxjbHVzdGVyUHJvcGVydGllczp7dHlwZToiKiIsZG9jOidBbiBvYmplY3QgZGVmaW5pbmcgY3VzdG9tIHByb3BlcnRpZXMgb24gdGhlIGdlbmVyYXRlZCBjbHVzdGVycyBpZiBjbHVzdGVyaW5nIGlzIGVuYWJsZWQsIGFnZ3JlZ2F0aW5nIHZhbHVlcyBmcm9tIGNsdXN0ZXJlZCBwb2ludHMuIEhhcyB0aGUgZm9ybSBgeyJwcm9wZXJ0eV9uYW1lIjogW29wZXJhdG9yLCBtYXBfZXhwcmVzc2lvbl19YC4gYG9wZXJhdG9yYCBpcyBhbnkgZXhwcmVzc2lvbiBmdW5jdGlvbiB0aGF0IGFjY2VwdHMgYXQgbGVhc3QgMiBvcGVyYW5kcyAoZS5nLiBgIisiYCBvciBgIm1heCJgKSDigJQgaXQgYWNjdW11bGF0ZXMgdGhlIHByb3BlcnR5IHZhbHVlIGZyb20gY2x1c3RlcnMvcG9pbnRzIHRoZSBjbHVzdGVyIGNvbnRhaW5zOyBgbWFwX2V4cHJlc3Npb25gIHByb2R1Y2VzIHRoZSB2YWx1ZSBvZiBhIHNpbmdsZSBwb2ludC5cblxuRXhhbXBsZTogYHsic3VtIjogWyIrIiwgWyJnZXQiLCAic2NhbGVyYW5rIl1dfWAuXG5cbkZvciBtb3JlIGFkdmFuY2VkIHVzZSBjYXNlcywgaW4gcGxhY2Ugb2YgYG9wZXJhdG9yYCwgeW91IGNhbiB1c2UgYSBjdXN0b20gcmVkdWNlIGV4cHJlc3Npb24gdGhhdCByZWZlcmVuY2VzIGEgc3BlY2lhbCBgWyJhY2N1bXVsYXRlZCJdYCB2YWx1ZSwgZS5nLjpcbmB7InN1bSI6IFtbIisiLCBbImFjY3VtdWxhdGVkIl0sIFsiZ2V0IiwgInN1bSJdXSwgWyJnZXQiLCAic2NhbGVyYW5rIl1dfWAnfSxsaW5lTWV0cmljczp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IldoZXRoZXIgdG8gY2FsY3VsYXRlIGxpbmUgZGlzdGFuY2UgbWV0cmljcy4gVGhpcyBpcyByZXF1aXJlZCBmb3IgbGluZSBsYXllcnMgdGhhdCBzcGVjaWZ5IGBsaW5lLWdyYWRpZW50YCB2YWx1ZXMuIn0sZ2VuZXJhdGVJZDp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IldoZXRoZXIgdG8gZ2VuZXJhdGUgaWRzIGZvciB0aGUgZ2VvanNvbiBmZWF0dXJlcy4gV2hlbiBlbmFibGVkLCB0aGUgYGZlYXR1cmUuaWRgIHByb3BlcnR5IHdpbGwgYmUgYXV0byBhc3NpZ25lZCBiYXNlZCBvbiBpdHMgaW5kZXggaW4gdGhlIGBmZWF0dXJlc2AgYXJyYXksIG92ZXItd3JpdGluZyBhbnkgcHJldmlvdXMgdmFsdWVzLiJ9LHByb21vdGVJZDp7dHlwZToicHJvbW90ZUlkIixkb2M6IkEgcHJvcGVydHkgdG8gdXNlIGFzIGEgZmVhdHVyZSBpZCAoZm9yIGZlYXR1cmUgc3RhdGUpLiBFaXRoZXIgYSBwcm9wZXJ0eSBuYW1lLCBvciBhbiBvYmplY3Qgb2YgdGhlIGZvcm0gYHs8c291cmNlTGF5ZXI+OiA8cHJvcGVydHlOYW1lPn1gLiJ9fSxzb3VyY2VfdmlkZW86e3R5cGU6e3JlcXVpcmVkOiEwLHR5cGU6ImVudW0iLHZhbHVlczp7dmlkZW86e2RvYzoiQSB2aWRlbyBkYXRhIHNvdXJjZS4ifX0sZG9jOiJUaGUgZGF0YSB0eXBlIG9mIHRoZSB2aWRlbyBzb3VyY2UuIn0sdXJsczp7cmVxdWlyZWQ6ITAsdHlwZToiYXJyYXkiLHZhbHVlOiJzdHJpbmciLGRvYzoiVVJMcyB0byB2aWRlbyBjb250ZW50IGluIG9yZGVyIG9mIHByZWZlcnJlZCBmb3JtYXQuIn0sY29vcmRpbmF0ZXM6e3JlcXVpcmVkOiEwLGRvYzoiQ29ybmVycyBvZiB2aWRlbyBzcGVjaWZpZWQgaW4gbG9uZ2l0dWRlLCBsYXRpdHVkZSBwYWlycy4iLHR5cGU6ImFycmF5IixsZW5ndGg6NCx2YWx1ZTp7dHlwZToiYXJyYXkiLGxlbmd0aDoyLHZhbHVlOiJudW1iZXIiLGRvYzoiQSBzaW5nbGUgbG9uZ2l0dWRlLCBsYXRpdHVkZSBwYWlyLiJ9fX0sc291cmNlX2ltYWdlOnt0eXBlOntyZXF1aXJlZDohMCx0eXBlOiJlbnVtIix2YWx1ZXM6e2ltYWdlOntkb2M6IkFuIGltYWdlIGRhdGEgc291cmNlLiJ9fSxkb2M6IlRoZSBkYXRhIHR5cGUgb2YgdGhlIGltYWdlIHNvdXJjZS4ifSx1cmw6e3JlcXVpcmVkOiEwLHR5cGU6InN0cmluZyIsZG9jOiJVUkwgdGhhdCBwb2ludHMgdG8gYW4gaW1hZ2UuIn0sY29vcmRpbmF0ZXM6e3JlcXVpcmVkOiEwLGRvYzoiQ29ybmVycyBvZiBpbWFnZSBzcGVjaWZpZWQgaW4gbG9uZ2l0dWRlLCBsYXRpdHVkZSBwYWlycy4iLHR5cGU6ImFycmF5IixsZW5ndGg6NCx2YWx1ZTp7dHlwZToiYXJyYXkiLGxlbmd0aDoyLHZhbHVlOiJudW1iZXIiLGRvYzoiQSBzaW5nbGUgbG9uZ2l0dWRlLCBsYXRpdHVkZSBwYWlyLiJ9fX0sbGF5ZXI6e2lkOnt0eXBlOiJzdHJpbmciLGRvYzoiVW5pcXVlIGxheWVyIG5hbWUuIixyZXF1aXJlZDohMH0sdHlwZTp7dHlwZToiZW51bSIsdmFsdWVzOntmaWxsOntkb2M6IkEgZmlsbGVkIHBvbHlnb24gd2l0aCBhbiBvcHRpb25hbCBzdHJva2VkIGJvcmRlci4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fX0sbGluZTp7ZG9jOiJBIHN0cm9rZWQgbGluZS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fX0sc3ltYm9sOntkb2M6IkFuIGljb24gb3IgYSB0ZXh0IGxhYmVsLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19fSxjaXJjbGU6e2RvYzoiQSBmaWxsZWQgY2lyY2xlLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19fSxoZWF0bWFwOntkb2M6IkEgaGVhdG1hcC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sImZpbGwtZXh0cnVzaW9uIjp7ZG9jOiJBbiBleHRydWRlZCAoM0QpIHBvbHlnb24uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX19LHJhc3Rlcjp7ZG9jOiJSYXN0ZXIgbWFwIHRleHR1cmVzIHN1Y2ggYXMgc2F0ZWxsaXRlIGltYWdlcnkuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX19LGhpbGxzaGFkZTp7ZG9jOiJDbGllbnQtc2lkZSBoaWxsc2hhZGluZyB2aXN1YWxpemF0aW9uIGJhc2VkIG9uIERFTSBkYXRhLiBDdXJyZW50bHksIHRoZSBpbXBsZW1lbnRhdGlvbiBvbmx5IHN1cHBvcnRzIE1hcGJveCBUZXJyYWluIFJHQiBhbmQgTWFwemVuIFRlcnJhcml1bSB0aWxlcy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDMuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sYmFja2dyb3VuZDp7ZG9jOiJUaGUgYmFja2dyb3VuZCBjb2xvciBvciBwYXR0ZXJuIG9mIHRoZSBtYXAuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX19LHNreTp7ZG9jOiJBIHNwaGVyaWNhbCBkb21lIGFyb3VuZCB0aGUgbWFwIHRoYXQgaXMgYWx3YXlzIHJlbmRlcmVkIGJlaGluZCBhbGwgb3RoZXIgbGF5ZXJzLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifX19fSxkb2M6IlJlbmRlcmluZyB0eXBlIG9mIHRoaXMgbGF5ZXIuIixyZXF1aXJlZDohMH0sbWV0YWRhdGE6e3R5cGU6IioiLGRvYzoiQXJiaXRyYXJ5IHByb3BlcnRpZXMgdXNlZnVsIHRvIHRyYWNrIHdpdGggdGhlIGxheWVyLCBidXQgZG8gbm90IGluZmx1ZW5jZSByZW5kZXJpbmcuIFByb3BlcnRpZXMgc2hvdWxkIGJlIHByZWZpeGVkIHRvIGF2b2lkIGNvbGxpc2lvbnMsIGxpa2UgJ21hcGJveDonLiJ9LHNvdXJjZTp7dHlwZToic3RyaW5nIixkb2M6Ik5hbWUgb2YgYSBzb3VyY2UgZGVzY3JpcHRpb24gdG8gYmUgdXNlZCBmb3IgdGhpcyBsYXllci4gUmVxdWlyZWQgZm9yIGFsbCBsYXllciB0eXBlcyBleGNlcHQgYGJhY2tncm91bmRgLiJ9LCJzb3VyY2UtbGF5ZXIiOnt0eXBlOiJzdHJpbmciLGRvYzoiTGF5ZXIgdG8gdXNlIGZyb20gYSB2ZWN0b3IgdGlsZSBzb3VyY2UuIFJlcXVpcmVkIGZvciB2ZWN0b3IgdGlsZSBzb3VyY2VzOyBwcm9oaWJpdGVkIGZvciBhbGwgb3RoZXIgc291cmNlIHR5cGVzLCBpbmNsdWRpbmcgR2VvSlNPTiBzb3VyY2VzLiJ9LG1pbnpvb206e3R5cGU6Im51bWJlciIsbWluaW11bTowLG1heGltdW06MjQsZG9jOiJUaGUgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgbGF5ZXIuIEF0IHpvb20gbGV2ZWxzIGxlc3MgdGhhbiB0aGUgbWluem9vbSwgdGhlIGxheWVyIHdpbGwgYmUgaGlkZGVuLiJ9LG1heHpvb206e3R5cGU6Im51bWJlciIsbWluaW11bTowLG1heGltdW06MjQsZG9jOiJUaGUgbWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgbGF5ZXIuIEF0IHpvb20gbGV2ZWxzIGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbiB0aGUgbWF4em9vbSwgdGhlIGxheWVyIHdpbGwgYmUgaGlkZGVuLiJ9LGZpbHRlcjp7dHlwZToiZmlsdGVyIixkb2M6J0FuIGV4cHJlc3Npb24gc3BlY2lmeWluZyBjb25kaXRpb25zIG9uIHNvdXJjZSBmZWF0dXJlcy4gT25seSBmZWF0dXJlcyB0aGF0IG1hdGNoIHRoZSBmaWx0ZXIgYXJlIGRpc3BsYXllZC4gWm9vbSBleHByZXNzaW9ucyBpbiBmaWx0ZXJzIGFyZSBvbmx5IGV2YWx1YXRlZCBhdCBpbnRlZ2VyIHpvb20gbGV2ZWxzLiBUaGUgYFsiZmVhdHVyZS1zdGF0ZSIsIC4uLl1gIGV4cHJlc3Npb24gaXMgbm90IHN1cHBvcnRlZCBpbiBmaWx0ZXIgZXhwcmVzc2lvbnMuICBUaGUgYFsicGl0Y2giXWAgYW5kIGBbImRpc3RhbmNlLWZyb20tY2VudGVyIl1gIGV4cHJlc3Npb25zIGFyZSBzdXBwb3J0ZWQgb25seSBmb3IgZmlsdGVyIGV4cHJlc3Npb25zIG9uIHRoZSBzeW1ib2wgbGF5ZXIuJ30sbGF5b3V0Ont0eXBlOiJsYXlvdXQiLGRvYzoiTGF5b3V0IHByb3BlcnRpZXMgZm9yIHRoZSBsYXllci4ifSxwYWludDp7dHlwZToicGFpbnQiLGRvYzoiRGVmYXVsdCBwYWludCBwcm9wZXJ0aWVzIGZvciB0aGlzIGxheWVyLiJ9fSxsYXlvdXQ6WyJsYXlvdXRfZmlsbCIsImxheW91dF9saW5lIiwibGF5b3V0X2NpcmNsZSIsImxheW91dF9oZWF0bWFwIiwibGF5b3V0X2ZpbGwtZXh0cnVzaW9uIiwibGF5b3V0X3N5bWJvbCIsImxheW91dF9yYXN0ZXIiLCJsYXlvdXRfaGlsbHNoYWRlIiwibGF5b3V0X2JhY2tncm91bmQiLCJsYXlvdXRfc2t5Il0sbGF5b3V0X2JhY2tncm91bmQ6e3Zpc2liaWxpdHk6e3R5cGU6ImVudW0iLHZhbHVlczp7dmlzaWJsZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgc2hvd24uIn0sbm9uZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgbm90IHNob3duLiJ9fSxkZWZhdWx0OiJ2aXNpYmxlIixkb2M6IldoZXRoZXIgdGhpcyBsYXllciBpcyBkaXNwbGF5ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSxsYXlvdXRfc2t5Ont2aXNpYmlsaXR5Ont0eXBlOiJlbnVtIix2YWx1ZXM6e3Zpc2libGU6e2RvYzoiVGhlIGxheWVyIGlzIHNob3duLiJ9LG5vbmU6e2RvYzoiVGhlIGxheWVyIGlzIG5vdCBzaG93bi4ifX0sZGVmYXVsdDoidmlzaWJsZSIsZG9jOiJXaGV0aGVyIHRoaXMgbGF5ZXIgaXMgZGlzcGxheWVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSxsYXlvdXRfZmlsbDp7ImZpbGwtc29ydC1rZXkiOnt0eXBlOiJudW1iZXIiLGRvYzoiU29ydHMgZmVhdHVyZXMgaW4gYXNjZW5kaW5nIG9yZGVyIGJhc2VkIG9uIHRoaXMgdmFsdWUuIEZlYXR1cmVzIHdpdGggYSBoaWdoZXIgc29ydCBrZXkgd2lsbCBhcHBlYXIgYWJvdmUgZmVhdHVyZXMgd2l0aCBhIGxvd2VyIHNvcnQga2V5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMS4yLjAiLGFuZHJvaWQ6IjkuMS4wIixpb3M6IjUuOC4wIixtYWNvczoiMC4xNS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMS4yLjAiLGFuZHJvaWQ6IjkuMS4wIixpb3M6IjUuOC4wIixtYWNvczoiMC4xNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LHZpc2liaWxpdHk6e3R5cGU6ImVudW0iLHZhbHVlczp7dmlzaWJsZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgc2hvd24uIn0sbm9uZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgbm90IHNob3duLiJ9fSxkZWZhdWx0OiJ2aXNpYmxlIixkb2M6IldoZXRoZXIgdGhpcyBsYXllciBpcyBkaXNwbGF5ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSxsYXlvdXRfY2lyY2xlOnsiY2lyY2xlLXNvcnQta2V5Ijp7dHlwZToibnVtYmVyIixkb2M6IlNvcnRzIGZlYXR1cmVzIGluIGFzY2VuZGluZyBvcmRlciBiYXNlZCBvbiB0aGlzIHZhbHVlLiBGZWF0dXJlcyB3aXRoIGEgaGlnaGVyIHNvcnQga2V5IHdpbGwgYXBwZWFyIGFib3ZlIGZlYXR1cmVzIHdpdGggYSBsb3dlciBzb3J0IGtleS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjEuMi4wIixhbmRyb2lkOiI5LjIuMCIsaW9zOiI1LjkuMCIsbWFjb3M6IjAuMTYuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjEuMi4wIixhbmRyb2lkOiI5LjIuMCIsaW9zOiI1LjkuMCIsbWFjb3M6IjAuMTYuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSx2aXNpYmlsaXR5Ont0eXBlOiJlbnVtIix2YWx1ZXM6e3Zpc2libGU6e2RvYzoiVGhlIGxheWVyIGlzIHNob3duLiJ9LG5vbmU6e2RvYzoiVGhlIGxheWVyIGlzIG5vdCBzaG93bi4ifX0sZGVmYXVsdDoidmlzaWJsZSIsZG9jOiJXaGV0aGVyIHRoaXMgbGF5ZXIgaXMgZGlzcGxheWVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LCJwcm9wZXJ0eS10eXBlIjoiY29uc3RhbnQifX0sbGF5b3V0X2hlYXRtYXA6e3Zpc2liaWxpdHk6e3R5cGU6ImVudW0iLHZhbHVlczp7dmlzaWJsZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgc2hvd24uIn0sbm9uZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgbm90IHNob3duLiJ9fSxkZWZhdWx0OiJ2aXNpYmxlIixkb2M6IldoZXRoZXIgdGhpcyBsYXllciBpcyBkaXNwbGF5ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSwibGF5b3V0X2ZpbGwtZXh0cnVzaW9uIjp7dmlzaWJpbGl0eTp7dHlwZToiZW51bSIsdmFsdWVzOnt2aXNpYmxlOntkb2M6IlRoZSBsYXllciBpcyBzaG93bi4ifSxub25lOntkb2M6IlRoZSBsYXllciBpcyBub3Qgc2hvd24uIn19LGRlZmF1bHQ6InZpc2libGUiLGRvYzoiV2hldGhlciB0aGlzIGxheWVyIGlzIGRpc3BsYXllZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjcuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSwicHJvcGVydHktdHlwZSI6ImNvbnN0YW50In19LGxheW91dF9saW5lOnsibGluZS1jYXAiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e2J1dHQ6e2RvYzoiQSBjYXAgd2l0aCBhIHNxdWFyZWQtb2ZmIGVuZCB3aGljaCBpcyBkcmF3biB0byB0aGUgZXhhY3QgZW5kcG9pbnQgb2YgdGhlIGxpbmUuIn0scm91bmQ6e2RvYzoiQSBjYXAgd2l0aCBhIHJvdW5kZWQgZW5kIHdoaWNoIGlzIGRyYXduIGJleW9uZCB0aGUgZW5kcG9pbnQgb2YgdGhlIGxpbmUgYXQgYSByYWRpdXMgb2Ygb25lLWhhbGYgb2YgdGhlIGxpbmUncyB3aWR0aCBhbmQgY2VudGVyZWQgb24gdGhlIGVuZHBvaW50IG9mIHRoZSBsaW5lLiJ9LHNxdWFyZTp7ZG9jOiJBIGNhcCB3aXRoIGEgc3F1YXJlZC1vZmYgZW5kIHdoaWNoIGlzIGRyYXduIGJleW9uZCB0aGUgZW5kcG9pbnQgb2YgdGhlIGxpbmUgYXQgYSBkaXN0YW5jZSBvZiBvbmUtaGFsZiBvZiB0aGUgbGluZSdzIHdpZHRoLiJ9fSxkZWZhdWx0OiJidXR0Iixkb2M6IlRoZSBkaXNwbGF5IG9mIGxpbmUgZW5kaW5ncy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjIuMy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJsaW5lLWpvaW4iOnt0eXBlOiJlbnVtIix2YWx1ZXM6e2JldmVsOntkb2M6IkEgam9pbiB3aXRoIGEgc3F1YXJlZC1vZmYgZW5kIHdoaWNoIGlzIGRyYXduIGJleW9uZCB0aGUgZW5kcG9pbnQgb2YgdGhlIGxpbmUgYXQgYSBkaXN0YW5jZSBvZiBvbmUtaGFsZiBvZiB0aGUgbGluZSdzIHdpZHRoLiJ9LHJvdW5kOntkb2M6IkEgam9pbiB3aXRoIGEgcm91bmRlZCBlbmQgd2hpY2ggaXMgZHJhd24gYmV5b25kIHRoZSBlbmRwb2ludCBvZiB0aGUgbGluZSBhdCBhIHJhZGl1cyBvZiBvbmUtaGFsZiBvZiB0aGUgbGluZSdzIHdpZHRoIGFuZCBjZW50ZXJlZCBvbiB0aGUgZW5kcG9pbnQgb2YgdGhlIGxpbmUuIn0sbWl0ZXI6e2RvYzoiQSBqb2luIHdpdGggYSBzaGFycCwgYW5nbGVkIGNvcm5lciB3aGljaCBpcyBkcmF3biB3aXRoIHRoZSBvdXRlciBzaWRlcyBiZXlvbmQgdGhlIGVuZHBvaW50IG9mIHRoZSBwYXRoIHVudGlsIHRoZXkgbWVldC4ifX0sZGVmYXVsdDoibWl0ZXIiLGRvYzoiVGhlIGRpc3BsYXkgb2YgbGluZXMgd2hlbiBqb2luaW5nLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC40MC4wIixhbmRyb2lkOiI1LjIuMCIsaW9zOiIzLjcuMCIsbWFjb3M6IjAuNi4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJsaW5lLW1pdGVyLWxpbWl0Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjIsZG9jOiJVc2VkIHRvIGF1dG9tYXRpY2FsbHkgY29udmVydCBtaXRlciBqb2lucyB0byBiZXZlbCBqb2lucyBmb3Igc2hhcnAgYW5nbGVzLiIscmVxdWlyZXM6W3sibGluZS1qb2luIjoibWl0ZXIifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwibGluZS1yb3VuZC1saW1pdCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxLjA1LGRvYzoiVXNlZCB0byBhdXRvbWF0aWNhbGx5IGNvbnZlcnQgcm91bmQgam9pbnMgdG8gbWl0ZXIgam9pbnMgZm9yIHNoYWxsb3cgYW5nbGVzLiIscmVxdWlyZXM6W3sibGluZS1qb2luIjoicm91bmQifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwibGluZS1zb3J0LWtleSI6e3R5cGU6Im51bWJlciIsZG9jOiJTb3J0cyBmZWF0dXJlcyBpbiBhc2NlbmRpbmcgb3JkZXIgYmFzZWQgb24gdGhpcyB2YWx1ZS4gRmVhdHVyZXMgd2l0aCBhIGhpZ2hlciBzb3J0IGtleSB3aWxsIGFwcGVhciBhYm92ZSBmZWF0dXJlcyB3aXRoIGEgbG93ZXIgc29ydCBrZXkuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIxLjIuMCIsYW5kcm9pZDoiOS4xLjAiLGlvczoiNS44LjAiLG1hY29zOiIwLjE1LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIxLjIuMCIsYW5kcm9pZDoiOS4xLjAiLGlvczoiNS44LjAiLG1hY29zOiIwLjE1LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sdmlzaWJpbGl0eTp7dHlwZToiZW51bSIsdmFsdWVzOnt2aXNpYmxlOntkb2M6IlRoZSBsYXllciBpcyBzaG93bi4ifSxub25lOntkb2M6IlRoZSBsYXllciBpcyBub3Qgc2hvd24uIn19LGRlZmF1bHQ6InZpc2libGUiLGRvYzoiV2hldGhlciB0aGlzIGxheWVyIGlzIGRpc3BsYXllZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSwicHJvcGVydHktdHlwZSI6ImNvbnN0YW50In19LGxheW91dF9zeW1ib2w6eyJzeW1ib2wtcGxhY2VtZW50Ijp7dHlwZToiZW51bSIsdmFsdWVzOntwb2ludDp7ZG9jOiJUaGUgbGFiZWwgaXMgcGxhY2VkIGF0IHRoZSBwb2ludCB3aGVyZSB0aGUgZ2VvbWV0cnkgaXMgbG9jYXRlZC4ifSxsaW5lOntkb2M6IlRoZSBsYWJlbCBpcyBwbGFjZWQgYWxvbmcgdGhlIGxpbmUgb2YgdGhlIGdlb21ldHJ5LiBDYW4gb25seSBiZSB1c2VkIG9uIGBMaW5lU3RyaW5nYCBhbmQgYFBvbHlnb25gIGdlb21ldHJpZXMuIn0sImxpbmUtY2VudGVyIjp7ZG9jOiJUaGUgbGFiZWwgaXMgcGxhY2VkIGF0IHRoZSBjZW50ZXIgb2YgdGhlIGxpbmUgb2YgdGhlIGdlb21ldHJ5LiBDYW4gb25seSBiZSB1c2VkIG9uIGBMaW5lU3RyaW5nYCBhbmQgYFBvbHlnb25gIGdlb21ldHJpZXMuIE5vdGUgdGhhdCBhIHNpbmdsZSBmZWF0dXJlIGluIGEgdmVjdG9yIHRpbGUgbWF5IGNvbnRhaW4gbXVsdGlwbGUgbGluZSBnZW9tZXRyaWVzLiJ9fSxkZWZhdWx0OiJwb2ludCIsZG9jOiJMYWJlbCBwbGFjZW1lbnQgcmVsYXRpdmUgdG8gaXRzIGdlb21ldHJ5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImBsaW5lLWNlbnRlcmAgdmFsdWUiOntqczoiMC40Ny4wIixhbmRyb2lkOiI2LjQuMCIsaW9zOiI0LjMuMCIsbWFjb3M6IjAuMTAuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInN5bWJvbC1zcGFjaW5nIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjI1MCxtaW5pbXVtOjEsdW5pdHM6InBpeGVscyIsZG9jOiJEaXN0YW5jZSBiZXR3ZWVuIHR3byBzeW1ib2wgYW5jaG9ycy4iLHJlcXVpcmVzOlt7InN5bWJvbC1wbGFjZW1lbnQiOiJsaW5lIn1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInN5bWJvbC1hdm9pZC1lZGdlcyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITEsZG9jOiJJZiB0cnVlLCB0aGUgc3ltYm9scyB3aWxsIG5vdCBjcm9zcyB0aWxlIGVkZ2VzIHRvIGF2b2lkIG11dHVhbCBjb2xsaXNpb25zLiBSZWNvbW1lbmRlZCBpbiBsYXllcnMgdGhhdCBkb24ndCBoYXZlIGVub3VnaCBwYWRkaW5nIGluIHRoZSB2ZWN0b3IgdGlsZSB0byBwcmV2ZW50IGNvbGxpc2lvbnMsIG9yIGlmIGl0IGlzIGEgcG9pbnQgc3ltYm9sIGxheWVyIHBsYWNlZCBhZnRlciBhIGxpbmUgc3ltYm9sIGxheWVyLiBXaGVuIHVzaW5nIGEgY2xpZW50IHRoYXQgc3VwcG9ydHMgZ2xvYmFsIGNvbGxpc2lvbiBkZXRlY3Rpb24sIGxpa2UgTWFwYm94IEdMIEpTIHZlcnNpb24gMC40Mi4wIG9yIGdyZWF0ZXIsIGVuYWJsaW5nIHRoaXMgcHJvcGVydHkgaXMgbm90IG5lZWRlZCB0byBwcmV2ZW50IGNsaXBwZWQgbGFiZWxzIGF0IHRpbGUgYm91bmRhcmllcy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInN5bWJvbC1zb3J0LWtleSI6e3R5cGU6Im51bWJlciIsZG9jOiJTb3J0cyBmZWF0dXJlcyBpbiBhc2NlbmRpbmcgb3JkZXIgYmFzZWQgb24gdGhpcyB2YWx1ZS4gRmVhdHVyZXMgd2l0aCBsb3dlciBzb3J0IGtleXMgYXJlIGRyYXduIGFuZCBwbGFjZWQgZmlyc3QuICBXaGVuIGBpY29uLWFsbG93LW92ZXJsYXBgIG9yIGB0ZXh0LWFsbG93LW92ZXJsYXBgIGlzIGBmYWxzZWAsIGZlYXR1cmVzIHdpdGggYSBsb3dlciBzb3J0IGtleSB3aWxsIGhhdmUgcHJpb3JpdHkgZHVyaW5nIHBsYWNlbWVudC4gV2hlbiBgaWNvbi1hbGxvdy1vdmVybGFwYCBvciBgdGV4dC1hbGxvdy1vdmVybGFwYCBpcyBzZXQgdG8gYHRydWVgLCBmZWF0dXJlcyB3aXRoIGEgaGlnaGVyIHNvcnQga2V5IHdpbGwgb3ZlcmxhcCBvdmVyIGZlYXR1cmVzIHdpdGggYSBsb3dlciBzb3J0IGtleS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNTMuMCIsYW5kcm9pZDoiNy40LjAiLGlvczoiNC4xMS4wIixtYWNvczoiMC4xNC4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC41My4wIixhbmRyb2lkOiI3LjQuMCIsaW9zOiI0LjExLjAiLG1hY29zOiIwLjE0LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sInN5bWJvbC16LW9yZGVyIjp7dHlwZToiZW51bSIsdmFsdWVzOnthdXRvOntkb2M6IlNvcnRzIHN5bWJvbHMgYnkgYHN5bWJvbC1zb3J0LWtleWAgaWYgc2V0LiBPdGhlcndpc2UsIHNvcnRzIHN5bWJvbHMgYnkgdGhlaXIgeS1wb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgaWYgYGljb24tYWxsb3ctb3ZlcmxhcGAgb3IgYHRleHQtYWxsb3ctb3ZlcmxhcGAgaXMgc2V0IHRvIGB0cnVlYCBvciBgaWNvbi1pZ25vcmUtcGxhY2VtZW50YCBvciBgdGV4dC1pZ25vcmUtcGxhY2VtZW50YCBpcyBgZmFsc2VgLiJ9LCJ2aWV3cG9ydC15Ijp7ZG9jOiJTb3J0cyBzeW1ib2xzIGJ5IHRoZWlyIHktcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGlmIGBpY29uLWFsbG93LW92ZXJsYXBgIG9yIGB0ZXh0LWFsbG93LW92ZXJsYXBgIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGljb24taWdub3JlLXBsYWNlbWVudGAgb3IgYHRleHQtaWdub3JlLXBsYWNlbWVudGAgaXMgYGZhbHNlYC4ifSxzb3VyY2U6e2RvYzoiU29ydHMgc3ltYm9scyBieSBgc3ltYm9sLXNvcnQta2V5YCBpZiBzZXQuIE90aGVyd2lzZSwgbm8gc29ydGluZyBpcyBhcHBsaWVkOyBzeW1ib2xzIGFyZSByZW5kZXJlZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGUgc291cmNlIGRhdGEuIn19LGRlZmF1bHQ6ImF1dG8iLGRvYzoiRGV0ZXJtaW5lcyB3aGV0aGVyIG92ZXJsYXBwaW5nIHN5bWJvbHMgaW4gdGhlIHNhbWUgbGF5ZXIgYXJlIHJlbmRlcmVkIGluIHRoZSBvcmRlciB0aGF0IHRoZXkgYXBwZWFyIGluIHRoZSBkYXRhIHNvdXJjZSBvciBieSB0aGVpciB5LXBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC4gVG8gY29udHJvbCB0aGUgb3JkZXIgYW5kIHByaW9yaXRpemF0aW9uIG9mIHN5bWJvbHMgb3RoZXJ3aXNlLCB1c2UgYHN5bWJvbC1zb3J0LWtleWAuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQ5LjAiLGFuZHJvaWQ6IjYuNi4wIixpb3M6IjQuNS4wIixtYWNvczoiMC4xMi4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaWNvbi1hbGxvdy1vdmVybGFwIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IklmIHRydWUsIHRoZSBpY29uIHdpbGwgYmUgdmlzaWJsZSBldmVuIGlmIGl0IGNvbGxpZGVzIHdpdGggb3RoZXIgcHJldmlvdXNseSBkcmF3biBzeW1ib2xzLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaWNvbi1pZ25vcmUtcGxhY2VtZW50Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IklmIHRydWUsIG90aGVyIHN5bWJvbHMgY2FuIGJlIHZpc2libGUgZXZlbiBpZiB0aGV5IGNvbGxpZGUgd2l0aCB0aGUgaWNvbi4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImljb24tb3B0aW9uYWwiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiExLGRvYzoiSWYgdHJ1ZSwgdGV4dCB3aWxsIGRpc3BsYXkgd2l0aG91dCB0aGVpciBjb3JyZXNwb25kaW5nIGljb25zIHdoZW4gdGhlIGljb24gY29sbGlkZXMgd2l0aCBvdGhlciBzeW1ib2xzIGFuZCB0aGUgdGV4dCBkb2VzIG5vdC4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSIsInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6e3R5cGU6ImVudW0iLHZhbHVlczp7bWFwOntkb2M6IldoZW4gYHN5bWJvbC1wbGFjZW1lbnRgIGlzIHNldCB0byBgcG9pbnRgLCBhbGlnbnMgaWNvbnMgZWFzdC13ZXN0LiBXaGVuIGBzeW1ib2wtcGxhY2VtZW50YCBpcyBzZXQgdG8gYGxpbmVgIG9yIGBsaW5lLWNlbnRlcmAsIGFsaWducyBpY29uIHgtYXhlcyB3aXRoIHRoZSBsaW5lLiJ9LHZpZXdwb3J0Ontkb2M6IlByb2R1Y2VzIGljb25zIHdob3NlIHgtYXhlcyBhcmUgYWxpZ25lZCB3aXRoIHRoZSB4LWF4aXMgb2YgdGhlIHZpZXdwb3J0LCByZWdhcmRsZXNzIG9mIHRoZSB2YWx1ZSBvZiBgc3ltYm9sLXBsYWNlbWVudGAuIn0sYXV0bzp7ZG9jOiJXaGVuIGBzeW1ib2wtcGxhY2VtZW50YCBpcyBzZXQgdG8gYHBvaW50YCwgdGhpcyBpcyBlcXVpdmFsZW50IHRvIGB2aWV3cG9ydGAuIFdoZW4gYHN5bWJvbC1wbGFjZW1lbnRgIGlzIHNldCB0byBgbGluZWAgb3IgYGxpbmUtY2VudGVyYCwgdGhpcyBpcyBlcXVpdmFsZW50IHRvIGBtYXBgLiJ9fSxkZWZhdWx0OiJhdXRvIixkb2M6IkluIGNvbWJpbmF0aW9uIHdpdGggYHN5bWJvbC1wbGFjZW1lbnRgLCBkZXRlcm1pbmVzIHRoZSByb3RhdGlvbiBiZWhhdmlvciBvZiBpY29ucy4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJgYXV0b2AgdmFsdWUiOntqczoiMC4yNS4wIixhbmRyb2lkOiI0LjIuMCIsaW9zOiIzLjQuMCIsbWFjb3M6IjAuMy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaWNvbi1zaXplIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEsbWluaW11bTowLHVuaXRzOiJmYWN0b3Igb2YgdGhlIG9yaWdpbmFsIGljb24gc2l6ZSIsZG9jOiJTY2FsZXMgdGhlIG9yaWdpbmFsIHNpemUgb2YgdGhlIGljb24gYnkgdGhlIHByb3ZpZGVkIGZhY3Rvci4gVGhlIG5ldyBwaXhlbCBzaXplIG9mIHRoZSBpbWFnZSB3aWxsIGJlIHRoZSBvcmlnaW5hbCBwaXhlbCBzaXplIG11bHRpcGxpZWQgYnkgYGljb24tc2l6ZWAuIDEgaXMgdGhlIG9yaWdpbmFsIHNpemU7IDMgdHJpcGxlcyB0aGUgc2l6ZSBvZiB0aGUgaW1hZ2UuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjM1LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImljb24tdGV4dC1maXQiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e25vbmU6e2RvYzoiVGhlIGljb24gaXMgZGlzcGxheWVkIGF0IGl0cyBpbnRyaW5zaWMgYXNwZWN0IHJhdGlvLiJ9LHdpZHRoOntkb2M6IlRoZSBpY29uIGlzIHNjYWxlZCBpbiB0aGUgeC1kaW1lbnNpb24gdG8gZml0IHRoZSB3aWR0aCBvZiB0aGUgdGV4dC4ifSxoZWlnaHQ6e2RvYzoiVGhlIGljb24gaXMgc2NhbGVkIGluIHRoZSB5LWRpbWVuc2lvbiB0byBmaXQgdGhlIGhlaWdodCBvZiB0aGUgdGV4dC4ifSxib3RoOntkb2M6IlRoZSBpY29uIGlzIHNjYWxlZCBpbiBib3RoIHgtIGFuZCB5LWRpbWVuc2lvbnMuIn19LGRlZmF1bHQ6Im5vbmUiLGRvYzoiU2NhbGVzIHRoZSBpY29uIHRvIGZpdCBhcm91bmQgdGhlIGFzc29jaWF0ZWQgdGV4dC4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSIsInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjIxLjAiLGFuZHJvaWQ6IjQuMi4wIixpb3M6IjMuNC4wIixtYWNvczoiMC4yLjEifSwic3RyZXRjaGFibGUgaWNvbnMiOntqczoiMS42LjAiLGFuZHJvaWQ6IjkuMi4wIixpb3M6IjUuOC4wIixtYWNvczoiMC4xNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaWNvbi10ZXh0LWZpdC1wYWRkaW5nIjp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGxlbmd0aDo0LGRlZmF1bHQ6WzAsMCwwLDBdLHVuaXRzOiJwaXhlbHMiLGRvYzoiU2l6ZSBvZiB0aGUgYWRkaXRpb25hbCBhcmVhIGFkZGVkIHRvIGRpbWVuc2lvbnMgZGV0ZXJtaW5lZCBieSBgaWNvbi10ZXh0LWZpdGAsIGluIGNsb2Nrd2lzZSBvcmRlcjogdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LiIscmVxdWlyZXM6WyJpY29uLWltYWdlIiwidGV4dC1maWVsZCIseyJpY29uLXRleHQtZml0IjpbImJvdGgiLCJ3aWR0aCIsImhlaWdodCJdfV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yMS4wIixhbmRyb2lkOiI0LjIuMCIsaW9zOiIzLjQuMCIsbWFjb3M6IjAuMi4xIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaWNvbi1pbWFnZSI6e3R5cGU6InJlc29sdmVkSW1hZ2UiLGRvYzoiTmFtZSBvZiBpbWFnZSBpbiBzcHJpdGUgdG8gdXNlIGZvciBkcmF3aW5nIGFuIGltYWdlIGJhY2tncm91bmQuIix0b2tlbnM6ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zNS4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJpY29uLXJvdGF0ZSI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLHBlcmlvZDozNjAsdW5pdHM6ImRlZ3JlZXMiLGRvYzoiUm90YXRlcyB0aGUgaWNvbiBjbG9ja3dpc2UuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjIxLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImljb24tcGFkZGluZyI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoyLG1pbmltdW06MCx1bml0czoicGl4ZWxzIixkb2M6IlNpemUgb2YgdGhlIGFkZGl0aW9uYWwgYXJlYSBhcm91bmQgdGhlIGljb24gYm91bmRpbmcgYm94IHVzZWQgZm9yIGRldGVjdGluZyBzeW1ib2wgY29sbGlzaW9ucy4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImljb24ta2VlcC11cHJpZ2h0Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IklmIHRydWUsIHRoZSBpY29uIG1heSBiZSBmbGlwcGVkIHRvIHByZXZlbnQgaXQgZnJvbSBiZWluZyByZW5kZXJlZCB1cHNpZGUtZG93bi4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSIseyJpY29uLXJvdGF0aW9uLWFsaWdubWVudCI6Im1hcCJ9LHsic3ltYm9sLXBsYWNlbWVudCI6WyJsaW5lIiwibGluZS1jZW50ZXIiXX1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImljb24tb2Zmc2V0Ijp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGxlbmd0aDoyLGRlZmF1bHQ6WzAsMF0sZG9jOiJPZmZzZXQgZGlzdGFuY2Ugb2YgaWNvbiBmcm9tIGl0cyBhbmNob3IuIFBvc2l0aXZlIHZhbHVlcyBpbmRpY2F0ZSByaWdodCBhbmQgZG93biwgd2hpbGUgbmVnYXRpdmUgdmFsdWVzIGluZGljYXRlIGxlZnQgYW5kIHVwLiBFYWNoIGNvbXBvbmVudCBpcyBtdWx0aXBsaWVkIGJ5IHRoZSB2YWx1ZSBvZiBgaWNvbi1zaXplYCB0byBvYnRhaW4gdGhlIGZpbmFsIG9mZnNldCBpbiBwaXhlbHMuIFdoZW4gY29tYmluZWQgd2l0aCBgaWNvbi1yb3RhdGVgIHRoZSBvZmZzZXQgd2lsbCBiZSBhcyBpZiB0aGUgcm90YXRlZCBkaXJlY3Rpb24gd2FzIHVwLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yOS4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJpY29uLWFuY2hvciI6e3R5cGU6ImVudW0iLHZhbHVlczp7Y2VudGVyOntkb2M6IlRoZSBjZW50ZXIgb2YgdGhlIGljb24gaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSxsZWZ0Ontkb2M6IlRoZSBsZWZ0IHNpZGUgb2YgdGhlIGljb24gaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSxyaWdodDp7ZG9jOiJUaGUgcmlnaHQgc2lkZSBvZiB0aGUgaWNvbiBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LHRvcDp7ZG9jOiJUaGUgdG9wIG9mIHRoZSBpY29uIGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sYm90dG9tOntkb2M6IlRoZSBib3R0b20gb2YgdGhlIGljb24gaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSwidG9wLWxlZnQiOntkb2M6IlRoZSB0b3AgbGVmdCBjb3JuZXIgb2YgdGhlIGljb24gaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSwidG9wLXJpZ2h0Ijp7ZG9jOiJUaGUgdG9wIHJpZ2h0IGNvcm5lciBvZiB0aGUgaWNvbiBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJib3R0b20tbGVmdCI6e2RvYzoiVGhlIGJvdHRvbSBsZWZ0IGNvcm5lciBvZiB0aGUgaWNvbiBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJib3R0b20tcmlnaHQiOntkb2M6IlRoZSBib3R0b20gcmlnaHQgY29ybmVyIG9mIHRoZSBpY29uIGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn19LGRlZmF1bHQ6ImNlbnRlciIsZG9jOiJQYXJ0IG9mIHRoZSBpY29uIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQwLjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjQwLjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImljb24tcGl0Y2gtYWxpZ25tZW50Ijp7dHlwZToiZW51bSIsdmFsdWVzOnttYXA6e2RvYzoiVGhlIGljb24gaXMgYWxpZ25lZCB0byB0aGUgcGxhbmUgb2YgdGhlIG1hcC4ifSx2aWV3cG9ydDp7ZG9jOiJUaGUgaWNvbiBpcyBhbGlnbmVkIHRvIHRoZSBwbGFuZSBvZiB0aGUgdmlld3BvcnQuIn0sYXV0bzp7ZG9jOiJBdXRvbWF0aWNhbGx5IG1hdGNoZXMgdGhlIHZhbHVlIG9mIGBpY29uLXJvdGF0aW9uLWFsaWdubWVudGAuIn19LGRlZmF1bHQ6ImF1dG8iLGRvYzoiT3JpZW50YXRpb24gb2YgaWNvbiB3aGVuIG1hcCBpcyBwaXRjaGVkLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4zOS4wIixhbmRyb2lkOiI1LjIuMCIsaW9zOiIzLjcuMCIsbWFjb3M6IjAuNi4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC1waXRjaC1hbGlnbm1lbnQiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgdGV4dCBpcyBhbGlnbmVkIHRvIHRoZSBwbGFuZSBvZiB0aGUgbWFwLiJ9LHZpZXdwb3J0Ontkb2M6IlRoZSB0ZXh0IGlzIGFsaWduZWQgdG8gdGhlIHBsYW5lIG9mIHRoZSB2aWV3cG9ydC4ifSxhdXRvOntkb2M6IkF1dG9tYXRpY2FsbHkgbWF0Y2hlcyB0aGUgdmFsdWUgb2YgYHRleHQtcm90YXRpb24tYWxpZ25tZW50YC4ifX0sZGVmYXVsdDoiYXV0byIsZG9jOiJPcmllbnRhdGlvbiBvZiB0ZXh0IHdoZW4gbWFwIGlzIHBpdGNoZWQuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjIxLjAiLGFuZHJvaWQ6IjQuMi4wIixpb3M6IjMuNC4wIixtYWNvczoiMC4yLjEifSwiYGF1dG9gIHZhbHVlIjp7anM6IjAuMjUuMCIsYW5kcm9pZDoiNC4yLjAiLGlvczoiMy40LjAiLG1hY29zOiIwLjMuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtcm90YXRpb24tYWxpZ25tZW50Ijp7dHlwZToiZW51bSIsdmFsdWVzOnttYXA6e2RvYzoiV2hlbiBgc3ltYm9sLXBsYWNlbWVudGAgaXMgc2V0IHRvIGBwb2ludGAsIGFsaWducyB0ZXh0IGVhc3Qtd2VzdC4gV2hlbiBgc3ltYm9sLXBsYWNlbWVudGAgaXMgc2V0IHRvIGBsaW5lYCBvciBgbGluZS1jZW50ZXJgLCBhbGlnbnMgdGV4dCB4LWF4ZXMgd2l0aCB0aGUgbGluZS4ifSx2aWV3cG9ydDp7ZG9jOiJQcm9kdWNlcyBnbHlwaHMgd2hvc2UgeC1heGVzIGFyZSBhbGlnbmVkIHdpdGggdGhlIHgtYXhpcyBvZiB0aGUgdmlld3BvcnQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHZhbHVlIG9mIGBzeW1ib2wtcGxhY2VtZW50YC4ifSxhdXRvOntkb2M6IldoZW4gYHN5bWJvbC1wbGFjZW1lbnRgIGlzIHNldCB0byBgcG9pbnRgLCB0aGlzIGlzIGVxdWl2YWxlbnQgdG8gYHZpZXdwb3J0YC4gV2hlbiBgc3ltYm9sLXBsYWNlbWVudGAgaXMgc2V0IHRvIGBsaW5lYCBvciBgbGluZS1jZW50ZXJgLCB0aGlzIGlzIGVxdWl2YWxlbnQgdG8gYG1hcGAuIn19LGRlZmF1bHQ6ImF1dG8iLGRvYzoiSW4gY29tYmluYXRpb24gd2l0aCBgc3ltYm9sLXBsYWNlbWVudGAsIGRldGVybWluZXMgdGhlIHJvdGF0aW9uIGJlaGF2aW9yIG9mIHRoZSBpbmRpdmlkdWFsIGdseXBocyBmb3JtaW5nIHRoZSB0ZXh0LiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImBhdXRvYCB2YWx1ZSI6e2pzOiIwLjI1LjAiLGFuZHJvaWQ6IjQuMi4wIixpb3M6IjMuNC4wIixtYWNvczoiMC4zLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJ0ZXh0LWZpZWxkIjp7dHlwZToiZm9ybWF0dGVkIixkZWZhdWx0OiIiLHRva2VuczohMCxkb2M6IlZhbHVlIHRvIHVzZSBmb3IgYSB0ZXh0IGxhYmVsLiBJZiBhIHBsYWluIGBzdHJpbmdgIGlzIHByb3ZpZGVkLCBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSBgZm9ybWF0dGVkYCB3aXRoIGRlZmF1bHQvaW5oZXJpdGVkIGZvcm1hdHRpbmcgb3B0aW9ucy4gU0RGIGltYWdlcyBhcmUgbm90IHN1cHBvcnRlZCBpbiBmb3JtYXR0ZWQgdGV4dCBhbmQgd2lsbCBiZSBpZ25vcmVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LWZvbnQiOnt0eXBlOiJhcnJheSIsdmFsdWU6InN0cmluZyIsZGVmYXVsdDpbIk9wZW4gU2FucyBSZWd1bGFyIiwiQXJpYWwgVW5pY29kZSBNUyBSZWd1bGFyIl0sZG9jOiJGb250IHN0YWNrIHRvIHVzZSBmb3IgZGlzcGxheWluZyB0ZXh0LiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC40My4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LXNpemUiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MTYsbWluaW11bTowLHVuaXRzOiJwaXhlbHMiLGRvYzoiRm9udCBzaXplLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zNS4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LW1heC13aWR0aCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxMCxtaW5pbXVtOjAsdW5pdHM6ImVtcyIsZG9jOiJUaGUgbWF4aW11bSBsaW5lIHdpZHRoIGZvciB0ZXh0IHdyYXBwaW5nLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIix7InN5bWJvbC1wbGFjZW1lbnQiOlsicG9pbnQiXX1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuNDAuMCIsYW5kcm9pZDoiNS4yLjAiLGlvczoiMy43LjAiLG1hY29zOiIwLjYuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1saW5lLWhlaWdodCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxLjIsdW5pdHM6ImVtcyIsZG9jOiJUZXh0IGxlYWRpbmcgdmFsdWUgZm9yIG11bHRpLWxpbmUgdGV4dC4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjIuMy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LWxldHRlci1zcGFjaW5nIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsdW5pdHM6ImVtcyIsZG9jOiJUZXh0IHRyYWNraW5nIGFtb3VudC4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuNDAuMCIsYW5kcm9pZDoiNS4yLjAiLGlvczoiMy43LjAiLG1hY29zOiIwLjYuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1qdXN0aWZ5Ijp7dHlwZToiZW51bSIsdmFsdWVzOnthdXRvOntkb2M6IlRoZSB0ZXh0IGlzIGFsaWduZWQgdG93YXJkcyB0aGUgYW5jaG9yIHBvc2l0aW9uLiJ9LGxlZnQ6e2RvYzoiVGhlIHRleHQgaXMgYWxpZ25lZCB0byB0aGUgbGVmdC4ifSxjZW50ZXI6e2RvYzoiVGhlIHRleHQgaXMgY2VudGVyZWQuIn0scmlnaHQ6e2RvYzoiVGhlIHRleHQgaXMgYWxpZ25lZCB0byB0aGUgcmlnaHQuIn19LGRlZmF1bHQ6ImNlbnRlciIsZG9jOiJUZXh0IGp1c3RpZmljYXRpb24gb3B0aW9ucy4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzkuMCIsYW5kcm9pZDoiNS4yLjAiLGlvczoiMy43LjAiLG1hY29zOiIwLjYuMCJ9LGF1dG86e2pzOiIwLjU0LjAiLGFuZHJvaWQ6IjcuNC4wIixpb3M6IjQuMTAuMCIsbWFjb3M6IjAuMTQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1yYWRpYWwtb2Zmc2V0Ijp7dHlwZToibnVtYmVyIix1bml0czoiZW1zIixkZWZhdWx0OjAsZG9jOiJSYWRpYWwgb2Zmc2V0IG9mIHRleHQsIGluIHRoZSBkaXJlY3Rpb24gb2YgdGhlIHN5bWJvbCdzIGFuY2hvci4gVXNlZnVsIGluIGNvbWJpbmF0aW9uIHdpdGggYHRleHQtdmFyaWFibGUtYW5jaG9yYCwgd2hpY2ggZGVmYXVsdHMgdG8gdXNpbmcgdGhlIHR3by1kaW1lbnNpb25hbCBgdGV4dC1vZmZzZXRgIGlmIHByZXNlbnQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjU0LjAiLGFuZHJvaWQ6IjcuNC4wIixpb3M6IjQuMTAuMCIsbWFjb3M6IjAuMTQuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuNTQuMCIsYW5kcm9pZDoiNy40LjAiLGlvczoiNC4xMC4wIixtYWNvczoiMC4xNC4wIn19LHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4iLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX19LCJ0ZXh0LXZhcmlhYmxlLWFuY2hvciI6e3R5cGU6ImFycmF5Iix2YWx1ZToiZW51bSIsdmFsdWVzOntjZW50ZXI6e2RvYzoiVGhlIGNlbnRlciBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LGxlZnQ6e2RvYzoiVGhlIGxlZnQgc2lkZSBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LHJpZ2h0Ontkb2M6IlRoZSByaWdodCBzaWRlIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sdG9wOntkb2M6IlRoZSB0b3Agb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSxib3R0b206e2RvYzoiVGhlIGJvdHRvbSBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJ0b3AtbGVmdCI6e2RvYzoiVGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJ0b3AtcmlnaHQiOntkb2M6IlRoZSB0b3AgcmlnaHQgY29ybmVyIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sImJvdHRvbS1sZWZ0Ijp7ZG9jOiJUaGUgYm90dG9tIGxlZnQgY29ybmVyIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sImJvdHRvbS1yaWdodCI6e2RvYzoiVGhlIGJvdHRvbSByaWdodCBjb3JuZXIgb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifX0scmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIix7InN5bWJvbC1wbGFjZW1lbnQiOlsicG9pbnQiXX1dLGRvYzoiVG8gaW5jcmVhc2UgdGhlIGNoYW5jZSBvZiBwbGFjaW5nIGhpZ2gtcHJpb3JpdHkgbGFiZWxzIG9uIHRoZSBtYXAsIHlvdSBjYW4gcHJvdmlkZSBhbiBhcnJheSBvZiBgdGV4dC1hbmNob3JgIGxvY2F0aW9uczogdGhlIHJlbmRlcmVyIHdpbGwgYXR0ZW1wdCB0byBwbGFjZSB0aGUgbGFiZWwgYXQgZWFjaCBsb2NhdGlvbiwgaW4gb3JkZXIsIGJlZm9yZSBtb3Zpbmcgb250byB0aGUgbmV4dCBsYWJlbC4gVXNlIGB0ZXh0LWp1c3RpZnk6IGF1dG9gIHRvIGNob29zZSBqdXN0aWZpY2F0aW9uIGJhc2VkIG9uIGFuY2hvciBwb3NpdGlvbi4gVG8gYXBwbHkgYW4gb2Zmc2V0LCB1c2UgdGhlIGB0ZXh0LXJhZGlhbC1vZmZzZXRgIG9yIHRoZSB0d28tZGltZW5zaW9uYWwgYHRleHQtb2Zmc2V0YC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNTQuMCIsYW5kcm9pZDoiNy40LjAiLGlvczoiNC4xMC4wIixtYWNvczoiMC4xNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC1hbmNob3IiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e2NlbnRlcjp7ZG9jOiJUaGUgY2VudGVyIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sbGVmdDp7ZG9jOiJUaGUgbGVmdCBzaWRlIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0scmlnaHQ6e2RvYzoiVGhlIHJpZ2h0IHNpZGUgb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSx0b3A6e2RvYzoiVGhlIHRvcCBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LGJvdHRvbTp7ZG9jOiJUaGUgYm90dG9tIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sInRvcC1sZWZ0Ijp7ZG9jOiJUaGUgdG9wIGxlZnQgY29ybmVyIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sInRvcC1yaWdodCI6e2RvYzoiVGhlIHRvcCByaWdodCBjb3JuZXIgb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSwiYm90dG9tLWxlZnQiOntkb2M6IlRoZSBib3R0b20gbGVmdCBjb3JuZXIgb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSwiYm90dG9tLXJpZ2h0Ijp7ZG9jOiJUaGUgYm90dG9tIHJpZ2h0IGNvcm5lciBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9fSxkZWZhdWx0OiJjZW50ZXIiLGRvYzoiUGFydCBvZiB0aGUgdGV4dCBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIix7IiEiOiJ0ZXh0LXZhcmlhYmxlLWFuY2hvciJ9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjM5LjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sInRleHQtbWF4LWFuZ2xlIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjQ1LHVuaXRzOiJkZWdyZWVzIixkb2M6Ik1heGltdW0gYW5nbGUgY2hhbmdlIGJldHdlZW4gYWRqYWNlbnQgY2hhcmFjdGVycy4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCIseyJzeW1ib2wtcGxhY2VtZW50IjpbImxpbmUiLCJsaW5lLWNlbnRlciJdfV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC13cml0aW5nLW1vZGUiOnt0eXBlOiJhcnJheSIsdmFsdWU6ImVudW0iLHZhbHVlczp7aG9yaXpvbnRhbDp7ZG9jOiJJZiBhIHRleHQncyBsYW5ndWFnZSBzdXBwb3J0cyBob3Jpem9udGFsIHdyaXRpbmcgbW9kZSwgc3ltYm9scyB3b3VsZCBiZSBsYWlkIG91dCBob3Jpem9udGFsbHkuIn0sdmVydGljYWw6e2RvYzoiSWYgYSB0ZXh0J3MgbGFuZ3VhZ2Ugc3VwcG9ydHMgdmVydGljYWwgd3JpdGluZyBtb2RlLCBzeW1ib2xzIHdvdWxkIGJlIGxhaWQgb3V0IHZlcnRpY2FsbHkuIn19LGRvYzoiVGhlIHByb3BlcnR5IGFsbG93cyBjb250cm9sIG92ZXIgYSBzeW1ib2wncyBvcmllbnRhdGlvbi4gTm90ZSB0aGF0IHRoZSBwcm9wZXJ0eSB2YWx1ZXMgYWN0IGFzIGEgaGludCwgc28gdGhhdCBhIHN5bWJvbCB3aG9zZSBsYW5ndWFnZSBkb2VzbuKAmXQgc3VwcG9ydCB0aGUgcHJvdmlkZWQgb3JpZW50YXRpb24gd2lsbCBiZSBsYWlkIG91dCBpbiBpdHMgbmF0dXJhbCBvcmllbnRhdGlvbi4gRXhhbXBsZTogRW5nbGlzaCBwb2ludCBzeW1ib2wgd2lsbCBiZSByZW5kZXJlZCBob3Jpem9udGFsbHkgZXZlbiBpZiBhcnJheSB2YWx1ZSBjb250YWlucyBzaW5nbGUgJ3ZlcnRpY2FsJyBlbnVtIHZhbHVlLiBGb3Igc3ltYm9sIHdpdGggcG9pbnQgcGxhY2VtZW50LCB0aGUgb3JkZXIgb2YgZWxlbWVudHMgaW4gYW4gYXJyYXkgZGVmaW5lIHByaW9yaXR5IG9yZGVyIGZvciB0aGUgcGxhY2VtZW50IG9mIGFuIG9yaWVudGF0aW9uIHZhcmlhbnQuIEZvciBzeW1ib2wgd2l0aCBsaW5lIHBsYWNlbWVudCwgdGhlIGRlZmF1bHQgdGV4dCB3cml0aW5nIG1vZGUgaXMgZWl0aGVyIFsnaG9yaXpvbnRhbCcsICd2ZXJ0aWNhbCddIG9yIFsndmVydGljYWwnLCAnaG9yaXpvbnRhbCddLCB0aGUgb3JkZXIgZG9lc24ndCBhZmZlY3QgdGhlIHBsYWNlbWVudC4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjEuMy4wIixhbmRyb2lkOiI4LjMuMCIsaW9zOiI1LjMuMCIsbWFjb3M6IjAuMTUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtcm90YXRlIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAscGVyaW9kOjM2MCx1bml0czoiZGVncmVlcyIsZG9jOiJSb3RhdGVzIHRoZSB0ZXh0IGNsb2Nrd2lzZS4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzUuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1wYWRkaW5nIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjIsbWluaW11bTowLHVuaXRzOiJwaXhlbHMiLGRvYzoiU2l6ZSBvZiB0aGUgYWRkaXRpb25hbCBhcmVhIGFyb3VuZCB0aGUgdGV4dCBib3VuZGluZyBib3ggdXNlZCBmb3IgZGV0ZWN0aW5nIHN5bWJvbCBjb2xsaXNpb25zLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC1rZWVwLXVwcmlnaHQiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiEwLGRvYzoiSWYgdHJ1ZSwgdGhlIHRleHQgbWF5IGJlIGZsaXBwZWQgdmVydGljYWxseSB0byBwcmV2ZW50IGl0IGZyb20gYmVpbmcgcmVuZGVyZWQgdXBzaWRlLWRvd24uIixyZXF1aXJlczpbInRleHQtZmllbGQiLHsidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiJtYXAifSx7InN5bWJvbC1wbGFjZW1lbnQiOlsibGluZSIsImxpbmUtY2VudGVyIl19XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJ0ZXh0LXRyYW5zZm9ybSI6e3R5cGU6ImVudW0iLHZhbHVlczp7bm9uZTp7ZG9jOiJUaGUgdGV4dCBpcyBub3QgYWx0ZXJlZC4ifSx1cHBlcmNhc2U6e2RvYzoiRm9yY2VzIGFsbCBsZXR0ZXJzIHRvIGJlIGRpc3BsYXllZCBpbiB1cHBlcmNhc2UuIn0sbG93ZXJjYXNlOntkb2M6IkZvcmNlcyBhbGwgbGV0dGVycyB0byBiZSBkaXNwbGF5ZWQgaW4gbG93ZXJjYXNlLiJ9fSxkZWZhdWx0OiJub25lIixkb2M6IlNwZWNpZmllcyBob3cgdG8gY2FwaXRhbGl6ZSB0ZXh0LCBzaW1pbGFyIHRvIHRoZSBDU1MgYHRleHQtdHJhbnNmb3JtYCBwcm9wZXJ0eS4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzMuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1vZmZzZXQiOnt0eXBlOiJhcnJheSIsZG9jOiJPZmZzZXQgZGlzdGFuY2Ugb2YgdGV4dCBmcm9tIGl0cyBhbmNob3IuIFBvc2l0aXZlIHZhbHVlcyBpbmRpY2F0ZSByaWdodCBhbmQgZG93biwgd2hpbGUgbmVnYXRpdmUgdmFsdWVzIGluZGljYXRlIGxlZnQgYW5kIHVwLiBJZiB1c2VkIHdpdGggdGV4dC12YXJpYWJsZS1hbmNob3IsIGlucHV0IHZhbHVlcyB3aWxsIGJlIHRha2VuIGFzIGFic29sdXRlIHZhbHVlcy4gT2Zmc2V0cyBhbG9uZyB0aGUgeC0gYW5kIHktYXhpcyB3aWxsIGJlIGFwcGxpZWQgYXV0b21hdGljYWxseSBiYXNlZCBvbiB0aGUgYW5jaG9yIHBvc2l0aW9uLiIsdmFsdWU6Im51bWJlciIsdW5pdHM6ImVtcyIsbGVuZ3RoOjIsZGVmYXVsdDpbMCwwXSxyZXF1aXJlczpbInRleHQtZmllbGQiLHsiISI6InRleHQtcmFkaWFsLW9mZnNldCJ9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjM1LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sInRleHQtYWxsb3ctb3ZlcmxhcCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITEsZG9jOiJJZiB0cnVlLCB0aGUgdGV4dCB3aWxsIGJlIHZpc2libGUgZXZlbiBpZiBpdCBjb2xsaWRlcyB3aXRoIG90aGVyIHByZXZpb3VzbHkgZHJhd24gc3ltYm9scy4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtaWdub3JlLXBsYWNlbWVudCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITEsZG9jOiJJZiB0cnVlLCBvdGhlciBzeW1ib2xzIGNhbiBiZSB2aXNpYmxlIGV2ZW4gaWYgdGhleSBjb2xsaWRlIHdpdGggdGhlIHRleHQuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJ0ZXh0LW9wdGlvbmFsIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IklmIHRydWUsIGljb25zIHdpbGwgZGlzcGxheSB3aXRob3V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgdGV4dCB3aGVuIHRoZSB0ZXh0IGNvbGxpZGVzIHdpdGggb3RoZXIgc3ltYm9scyBhbmQgdGhlIGljb24gZG9lcyBub3QuIixyZXF1aXJlczpbInRleHQtZmllbGQiLCJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSx2aXNpYmlsaXR5Ont0eXBlOiJlbnVtIix2YWx1ZXM6e3Zpc2libGU6e2RvYzoiVGhlIGxheWVyIGlzIHNob3duLiJ9LG5vbmU6e2RvYzoiVGhlIGxheWVyIGlzIG5vdCBzaG93bi4ifX0sZGVmYXVsdDoidmlzaWJsZSIsZG9jOiJXaGV0aGVyIHRoaXMgbGF5ZXIgaXMgZGlzcGxheWVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LCJwcm9wZXJ0eS10eXBlIjoiY29uc3RhbnQifX0sbGF5b3V0X3Jhc3Rlcjp7dmlzaWJpbGl0eTp7dHlwZToiZW51bSIsdmFsdWVzOnt2aXNpYmxlOntkb2M6IlRoZSBsYXllciBpcyBzaG93bi4ifSxub25lOntkb2M6IlRoZSBsYXllciBpcyBub3Qgc2hvd24uIn19LGRlZmF1bHQ6InZpc2libGUiLGRvYzoiV2hldGhlciB0aGlzIGxheWVyIGlzIGRpc3BsYXllZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSwicHJvcGVydHktdHlwZSI6ImNvbnN0YW50In19LGxheW91dF9oaWxsc2hhZGU6e3Zpc2liaWxpdHk6e3R5cGU6ImVudW0iLHZhbHVlczp7dmlzaWJsZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgc2hvd24uIn0sbm9uZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgbm90IHNob3duLiJ9fSxkZWZhdWx0OiJ2aXNpYmxlIixkb2M6IldoZXRoZXIgdGhpcyBsYXllciBpcyBkaXNwbGF5ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQzLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSxmaWx0ZXI6e3R5cGU6ImFycmF5Iix2YWx1ZToiKiIsZG9jOiJBIGZpbHRlciBzZWxlY3RzIHNwZWNpZmljIGZlYXR1cmVzIGZyb20gYSBsYXllci4ifSxmaWx0ZXJfc3ltYm9sOnt0eXBlOiJib29sZWFuIixkb2M6J0V4cHJlc3Npb24gd2hpY2ggZGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0byBkaXNwbGF5IGEgc3ltYm9sLiBTeW1ib2xzIHN1cHBvcnQgZHluYW1pYyBmaWx0ZXJpbmcsIG1lYW5pbmcgdGhpcyBleHByZXNzaW9uIGNhbiB1c2UgdGhlIGBbInBpdGNoIl1gIGFuZCBgWyJkaXN0YW5jZS1mcm9tLWNlbnRlciJdYCBleHByZXNzaW9ucyB0byByZWZlcmVuY2UgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHZpZXcuJyxkZWZhdWx0OiExLHRyYW5zaXRpb246ITEsInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsInBpdGNoIiwiZGlzdGFuY2UtZnJvbS1jZW50ZXIiXX19LGZpbHRlcl9maWxsOnt0eXBlOiJib29sZWFuIixkb2M6J0V4cHJlc3Npb24gd2hpY2ggZGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0byBkaXNwbGF5IGEgcG9seWdvbi4gRmlsbCBsYXllciBkb2VzIE5PVCBzdXBwb3J0IGR5bmFtaWMgZmlsdGVyaW5nLCBtZWFuaW5nIHRoaXMgZXhwcmVzc2lvbiBjYW4gTk9UIHVzZSB0aGUgYFsicGl0Y2giXWAgYW5kIGBbImRpc3RhbmNlLWZyb20tY2VudGVyIl1gIGV4cHJlc3Npb25zIHRvIHJlZmVyZW5jZSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgdmlldy4nLGRlZmF1bHQ6ITEsdHJhbnNpdGlvbjohMSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19fSxmaWx0ZXJfbGluZTp7dHlwZToiYm9vbGVhbiIsZG9jOidFeHByZXNzaW9uIHdoaWNoIGRldGVybWluZXMgd2hldGhlciBvciBub3QgdG8gZGlzcGxheSBhIFBvbHlnb24gb3IgTGluZVN0cmluZy4gTGluZSBsYXllciBkb2VzIE5PVCBzdXBwb3J0IGR5bmFtaWMgZmlsdGVyaW5nLCBtZWFuaW5nIHRoaXMgZXhwcmVzc2lvbiBjYW4gTk9UIHVzZSB0aGUgYFsicGl0Y2giXWAgYW5kIGBbImRpc3RhbmNlLWZyb20tY2VudGVyIl1gIGV4cHJlc3Npb25zIHRvIHJlZmVyZW5jZSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgdmlldy4nLGRlZmF1bHQ6ITEsdHJhbnNpdGlvbjohMSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19fSxmaWx0ZXJfY2lyY2xlOnt0eXBlOiJib29sZWFuIixkb2M6J0V4cHJlc3Npb24gd2hpY2ggZGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0byBkaXNwbGF5IGEgY2lyY2xlLiBDaXJjbGUgbGF5ZXIgZG9lcyBOT1Qgc3VwcG9ydCBkeW5hbWljIGZpbHRlcmluZywgbWVhbmluZyB0aGlzIGV4cHJlc3Npb24gY2FuIE5PVCB1c2UgdGhlIGBbInBpdGNoIl1gIGFuZCBgWyJkaXN0YW5jZS1mcm9tLWNlbnRlciJdYCBleHByZXNzaW9ucyB0byByZWZlcmVuY2UgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHZpZXcuJyxkZWZhdWx0OiExLHRyYW5zaXRpb246ITEsInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiIsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfX0sImZpbHRlcl9maWxsLWV4dHJ1c2lvbiI6e3R5cGU6ImJvb2xlYW4iLGRvYzonRXhwcmVzc2lvbiB3aGljaCBkZXRlcm1pbmVzIHdoZXRoZXIgb3Igbm90IHRvIGRpc3BsYXkgYSBQb2x5Z29uLiBGaWxsLWV4dHJ1c2lvbiBsYXllciBkb2VzIE5PVCBzdXBwb3J0IGR5bmFtaWMgZmlsdGVyaW5nLCBtZWFuaW5nIHRoaXMgZXhwcmVzc2lvbiBjYW4gTk9UIHVzZSB0aGUgYFsicGl0Y2giXWAgYW5kIGBbImRpc3RhbmNlLWZyb20tY2VudGVyIl1gIGV4cHJlc3Npb25zIHRvIHJlZmVyZW5jZSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgdmlldy4nLGRlZmF1bHQ6ITEsdHJhbnNpdGlvbjohMSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19fSxmaWx0ZXJfaGVhdG1hcDp7dHlwZToiYm9vbGVhbiIsZG9jOidFeHByZXNzaW9uIHVzZWQgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBwb2ludCBpcyBiZWluZyBkaXNwbGF5ZWQgb3Igbm90LiBIZWF0bWFwIGxheWVyIGRvZXMgTk9UIHN1cHBvcnQgZHluYW1pYyBmaWx0ZXJpbmcsIG1lYW5pbmcgdGhpcyBleHByZXNzaW9uIGNhbiBOT1QgdXNlIHRoZSBgWyJwaXRjaCJdYCBhbmQgYFsiZGlzdGFuY2UtZnJvbS1jZW50ZXIiXWAgZXhwcmVzc2lvbnMgdG8gcmVmZXJlbmNlIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSB2aWV3LicsZGVmYXVsdDohMSx0cmFuc2l0aW9uOiExLCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4iLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX19LGZpbHRlcl9vcGVyYXRvcjp7dHlwZToiZW51bSIsdmFsdWVzOnsiPT0iOntkb2M6J2BbIj09Iiwga2V5LCB2YWx1ZV1gIGVxdWFsaXR5OiBgZmVhdHVyZVtrZXldID0gdmFsdWVgJ30sIiE9Ijp7ZG9jOidgWyIhPSIsIGtleSwgdmFsdWVdYCBpbmVxdWFsaXR5OiBgZmVhdHVyZVtrZXldIOKJoCB2YWx1ZWAnfSwiPiI6e2RvYzonYFsiPiIsIGtleSwgdmFsdWVdYCBncmVhdGVyIHRoYW46IGBmZWF0dXJlW2tleV0gPiB2YWx1ZWAnfSwiPj0iOntkb2M6J2BbIj49Iiwga2V5LCB2YWx1ZV1gIGdyZWF0ZXIgdGhhbiBvciBlcXVhbDogYGZlYXR1cmVba2V5XSDiiaUgdmFsdWVgJ30sIjwiOntkb2M6J2BbIjwiLCBrZXksIHZhbHVlXWAgbGVzcyB0aGFuOiBgZmVhdHVyZVtrZXldIDwgdmFsdWVgJ30sIjw9Ijp7ZG9jOidgWyI8PSIsIGtleSwgdmFsdWVdYCBsZXNzIHRoYW4gb3IgZXF1YWw6IGBmZWF0dXJlW2tleV0g4omkIHZhbHVlYCd9LGluOntkb2M6J2BbImluIiwga2V5LCB2MCwgLi4uLCB2bl1gIHNldCBpbmNsdXNpb246IGBmZWF0dXJlW2tleV0g4oiIIHt2MCwgLi4uLCB2bn1gJ30sIiFpbiI6e2RvYzonYFsiIWluIiwga2V5LCB2MCwgLi4uLCB2bl1gIHNldCBleGNsdXNpb246IGBmZWF0dXJlW2tleV0g4oiJIHt2MCwgLi4uLCB2bn1gJ30sYWxsOntkb2M6J2BbImFsbCIsIGYwLCAuLi4sIGZuXWAgbG9naWNhbCBgQU5EYDogYGYwIOKIpyAuLi4g4oinIGZuYCd9LGFueTp7ZG9jOidgWyJhbnkiLCBmMCwgLi4uLCBmbl1gIGxvZ2ljYWwgYE9SYDogYGYwIOKIqCAuLi4g4oioIGZuYCd9LG5vbmU6e2RvYzonYFsibm9uZSIsIGYwLCAuLi4sIGZuXWAgbG9naWNhbCBgTk9SYDogYMKsZjAg4oinIC4uLiDiiKcgwqxmbmAnfSxoYXM6e2RvYzonYFsiaGFzIiwga2V5XWAgYGZlYXR1cmVba2V5XWAgZXhpc3RzJ30sIiFoYXMiOntkb2M6J2BbIiFoYXMiLCBrZXldYCBgZmVhdHVyZVtrZXldYCBkb2VzIG5vdCBleGlzdCd9LHdpdGhpbjp7ZG9jOidgWyJ3aXRoaW4iLCBvYmplY3RdYCBmZWF0dXJlIGdlb21ldHJ5IGlzIHdpdGhpbiBvYmplY3QgZ2VvbWV0cnknfX0sZG9jOiJUaGUgZmlsdGVyIG9wZXJhdG9yLiJ9LGdlb21ldHJ5X3R5cGU6e3R5cGU6ImVudW0iLHZhbHVlczp7UG9pbnQ6e2RvYzoiRmlsdGVyIHRvIHBvaW50IGdlb21ldHJpZXMuIn0sTGluZVN0cmluZzp7ZG9jOiJGaWx0ZXIgdG8gbGluZSBnZW9tZXRyaWVzLiJ9LFBvbHlnb246e2RvYzoiRmlsdGVyIHRvIHBvbHlnb24gZ2VvbWV0cmllcy4ifX0sZG9jOiJUaGUgZ2VvbWV0cnkgdHlwZSBmb3IgdGhlIGZpbHRlciB0byBzZWxlY3QuIn0sZnVuY3Rpb246e2V4cHJlc3Npb246e3R5cGU6ImV4cHJlc3Npb24iLGRvYzoiQW4gZXhwcmVzc2lvbi4ifSxzdG9wczp7dHlwZToiYXJyYXkiLGRvYzoiQW4gYXJyYXkgb2Ygc3RvcHMuIix2YWx1ZToiZnVuY3Rpb25fc3RvcCJ9LGJhc2U6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxLG1pbmltdW06MCxkb2M6IlRoZSBleHBvbmVudGlhbCBiYXNlIG9mIHRoZSBpbnRlcnBvbGF0aW9uIGN1cnZlLiBJdCBjb250cm9scyB0aGUgcmF0ZSBhdCB3aGljaCB0aGUgcmVzdWx0IGluY3JlYXNlcy4gSGlnaGVyIHZhbHVlcyBtYWtlIHRoZSByZXN1bHQgaW5jcmVhc2UgbW9yZSB0b3dhcmRzIHRoZSBoaWdoIGVuZCBvZiB0aGUgcmFuZ2UuIFdpdGggYDFgIHRoZSBzdG9wcyBhcmUgaW50ZXJwb2xhdGVkIGxpbmVhcmx5LiJ9LHByb3BlcnR5Ont0eXBlOiJzdHJpbmciLGRvYzoiVGhlIG5hbWUgb2YgYSBmZWF0dXJlIHByb3BlcnR5IHRvIHVzZSBhcyB0aGUgZnVuY3Rpb24gaW5wdXQuIixkZWZhdWx0OiIkem9vbSJ9LHR5cGU6e3R5cGU6ImVudW0iLHZhbHVlczp7aWRlbnRpdHk6e2RvYzoiUmV0dXJuIHRoZSBpbnB1dCB2YWx1ZSBhcyB0aGUgb3V0cHV0IHZhbHVlLiJ9LGV4cG9uZW50aWFsOntkb2M6IkdlbmVyYXRlIGFuIG91dHB1dCBieSBpbnRlcnBvbGF0aW5nIGJldHdlZW4gc3RvcHMganVzdCBsZXNzIHRoYW4gYW5kIGp1c3QgZ3JlYXRlciB0aGFuIHRoZSBmdW5jdGlvbiBpbnB1dC4ifSxpbnRlcnZhbDp7ZG9jOiJSZXR1cm4gdGhlIG91dHB1dCB2YWx1ZSBvZiB0aGUgc3RvcCBqdXN0IGxlc3MgdGhhbiB0aGUgZnVuY3Rpb24gaW5wdXQuIn0sY2F0ZWdvcmljYWw6e2RvYzoiUmV0dXJuIHRoZSBvdXRwdXQgdmFsdWUgb2YgdGhlIHN0b3AgZXF1YWwgdG8gdGhlIGZ1bmN0aW9uIGlucHV0LiJ9fSxkb2M6IlRoZSBpbnRlcnBvbGF0aW9uIHN0cmF0ZWd5IHRvIHVzZSBpbiBmdW5jdGlvbiBldmFsdWF0aW9uLiIsZGVmYXVsdDoiZXhwb25lbnRpYWwifSxjb2xvclNwYWNlOnt0eXBlOiJlbnVtIix2YWx1ZXM6e3JnYjp7ZG9jOiJVc2UgdGhlIFJHQiBjb2xvciBzcGFjZSB0byBpbnRlcnBvbGF0ZSBjb2xvciB2YWx1ZXMifSxsYWI6e2RvYzoiVXNlIHRoZSBMQUIgY29sb3Igc3BhY2UgdG8gaW50ZXJwb2xhdGUgY29sb3IgdmFsdWVzLiJ9LGhjbDp7ZG9jOiJVc2UgdGhlIEhDTCBjb2xvciBzcGFjZSB0byBpbnRlcnBvbGF0ZSBjb2xvciB2YWx1ZXMsIGludGVycG9sYXRpbmcgdGhlIEh1ZSwgQ2hyb21hLCBhbmQgTHVtaW5hbmNlIGNoYW5uZWxzIGluZGl2aWR1YWxseS4ifX0sZG9jOiJUaGUgY29sb3Igc3BhY2UgaW4gd2hpY2ggY29sb3JzIGludGVycG9sYXRlZC4gSW50ZXJwb2xhdGluZyBjb2xvcnMgaW4gcGVyY2VwdHVhbCBjb2xvciBzcGFjZXMgbGlrZSBMQUIgYW5kIEhDTCB0ZW5kIHRvIHByb2R1Y2UgY29sb3IgcmFtcHMgdGhhdCBsb29rIG1vcmUgY29uc2lzdGVudCBhbmQgcHJvZHVjZSBjb2xvcnMgdGhhdCBjYW4gYmUgZGlmZmVyZW50aWF0ZWQgbW9yZSBlYXNpbHkgdGhhbiB0aG9zZSBpbnRlcnBvbGF0ZWQgaW4gUkdCIHNwYWNlLiIsZGVmYXVsdDoicmdiIn0sZGVmYXVsdDp7dHlwZToiKiIscmVxdWlyZWQ6ITEsZG9jOiJBIHZhbHVlIHRvIHNlcnZlIGFzIGEgZmFsbGJhY2sgZnVuY3Rpb24gcmVzdWx0IHdoZW4gYSB2YWx1ZSBpc24ndCBvdGhlcndpc2UgYXZhaWxhYmxlLiBJdCBpcyB1c2VkIGluIHRoZSBmb2xsb3dpbmcgY2lyY3Vtc3RhbmNlczpcbiogSW4gY2F0ZWdvcmljYWwgZnVuY3Rpb25zLCB3aGVuIHRoZSBmZWF0dXJlIHZhbHVlIGRvZXMgbm90IG1hdGNoIGFueSBvZiB0aGUgc3RvcCBkb21haW4gdmFsdWVzLlxuKiBJbiBwcm9wZXJ0eSBhbmQgem9vbS1hbmQtcHJvcGVydHkgZnVuY3Rpb25zLCB3aGVuIGEgZmVhdHVyZSBkb2VzIG5vdCBjb250YWluIGEgdmFsdWUgZm9yIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuXG4qIEluIGlkZW50aXR5IGZ1bmN0aW9ucywgd2hlbiB0aGUgZmVhdHVyZSB2YWx1ZSBpcyBub3QgdmFsaWQgZm9yIHRoZSBzdHlsZSBwcm9wZXJ0eSAoZm9yIGV4YW1wbGUsIGlmIHRoZSBmdW5jdGlvbiBpcyBiZWluZyB1c2VkIGZvciBhIGBjaXJjbGUtY29sb3JgIHByb3BlcnR5IGJ1dCB0aGUgZmVhdHVyZSBwcm9wZXJ0eSB2YWx1ZSBpcyBub3QgYSBzdHJpbmcgb3Igbm90IGEgdmFsaWQgY29sb3IpLlxuKiBJbiBpbnRlcnZhbCBvciBleHBvbmVudGlhbCBwcm9wZXJ0eSBhbmQgem9vbS1hbmQtcHJvcGVydHkgZnVuY3Rpb25zLCB3aGVuIHRoZSBmZWF0dXJlIHZhbHVlIGlzIG5vdCBudW1lcmljLlxuSWYgbm8gZGVmYXVsdCBpcyBwcm92aWRlZCwgdGhlIHN0eWxlIHByb3BlcnR5J3MgZGVmYXVsdCBpcyB1c2VkIGluIHRoZXNlIGNpcmN1bXN0YW5jZXMuIn19LGZ1bmN0aW9uX3N0b3A6e3R5cGU6ImFycmF5IixtaW5pbXVtOjAsbWF4aW11bToyNCx2YWx1ZTpbIm51bWJlciIsImNvbG9yIl0sbGVuZ3RoOjIsZG9jOiJab29tIGxldmVsIGFuZCB2YWx1ZSBwYWlyLiJ9LGV4cHJlc3Npb246e3R5cGU6ImFycmF5Iix2YWx1ZToiKiIsbWluaW11bToxLGRvYzoiQW4gZXhwcmVzc2lvbiBkZWZpbmVzIGEgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCBmb3IgZGF0YS1kcml2ZW4gc3R5bGUgcHJvcGVydGllcyBvciBmZWF0dXJlIGZpbHRlcnMuIn0sZXhwcmVzc2lvbl9uYW1lOntkb2M6IiIsdHlwZToiZW51bSIsdmFsdWVzOntsZXQ6e2RvYzonQmluZHMgZXhwcmVzc2lvbnMgdG8gbmFtZWQgdmFyaWFibGVzLCB3aGljaCBjYW4gdGhlbiBiZSByZWZlcmVuY2VkIGluIHRoZSByZXN1bHQgZXhwcmVzc2lvbiB1c2luZyBbInZhciIsICJ2YXJpYWJsZV9uYW1lIl0uJyxncm91cDoiVmFyaWFibGUgYmluZGluZyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSx2YXI6e2RvYzonUmVmZXJlbmNlcyB2YXJpYWJsZSBib3VuZCB1c2luZyAibGV0Ii4nLGdyb3VwOiJWYXJpYWJsZSBiaW5kaW5nIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGxpdGVyYWw6e2RvYzoiUHJvdmlkZXMgYSBsaXRlcmFsIGFycmF5IG9yIG9iamVjdCB2YWx1ZS4iLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxhcnJheTp7ZG9jOiJBc3NlcnRzIHRoYXQgdGhlIGlucHV0IGlzIGFuIGFycmF5IChvcHRpb25hbGx5IHdpdGggYSBzcGVjaWZpYyBpdGVtIHR5cGUgYW5kIGxlbmd0aCkuICBJZiwgd2hlbiB0aGUgaW5wdXQgZXhwcmVzc2lvbiBpcyBldmFsdWF0ZWQsIGl0IGlzIG5vdCBvZiB0aGUgYXNzZXJ0ZWQgdHlwZSwgdGhlbiB0aGlzIGFzc2VydGlvbiB3aWxsIGNhdXNlIHRoZSB3aG9sZSBleHByZXNzaW9uIHRvIGJlIGFib3J0ZWQuIixncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sYXQ6e2RvYzoiUmV0cmlldmVzIGFuIGl0ZW0gZnJvbSBhbiBhcnJheS4iLGdyb3VwOiJMb29rdXAiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0saW46e2RvYzoiRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGl0ZW0gZXhpc3RzIGluIGFuIGFycmF5IG9yIGEgc3Vic3RyaW5nIGV4aXN0cyBpbiBhIHN0cmluZy4gSW4gdGhlIHNwZWNpZmljIGNhc2Ugd2hlbiB0aGUgc2Vjb25kIGFuZCB0aGlyZCBhcmd1bWVudHMgYXJlIHN0cmluZyBsaXRlcmFscywgeW91IG11c3Qgd3JhcCBhdCBsZWFzdCBvbmUgb2YgdGhlbSBpbiBhIFtgbGl0ZXJhbGBdKCN0eXBlcy1saXRlcmFsKSBleHByZXNzaW9uIHRvIGhpbnQgY29ycmVjdCBpbnRlcnByZXRhdGlvbiB0byB0aGUgW3R5cGUgc3lzdGVtXSgjdHlwZS1zeXN0ZW0pLiIsZ3JvdXA6Ikxvb2t1cCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMS42LjAiLGFuZHJvaWQ6IjkuMS4wIixpb3M6IjUuOC4wIixtYWNvczoiMC4xNS4wIn19fSwiaW5kZXgtb2YiOntkb2M6IlJldHVybnMgdGhlIGZpcnN0IHBvc2l0aW9uIGF0IHdoaWNoIGFuIGl0ZW0gY2FuIGJlIGZvdW5kIGluIGFuIGFycmF5IG9yIGEgc3Vic3RyaW5nIGNhbiBiZSBmb3VuZCBpbiBhIHN0cmluZywgb3IgYC0xYCBpZiB0aGUgaW5wdXQgY2Fubm90IGJlIGZvdW5kLiBBY2NlcHRzIGFuIG9wdGlvbmFsIGluZGV4IGZyb20gd2hlcmUgdG8gYmVnaW4gdGhlIHNlYXJjaC4iLGdyb3VwOiJMb29rdXAiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjEuMTAuMCJ9fX0sc2xpY2U6e2RvYzoiUmV0dXJucyBhbiBpdGVtIGZyb20gYW4gYXJyYXkgb3IgYSBzdWJzdHJpbmcgZnJvbSBhIHN0cmluZyBmcm9tIGEgc3BlY2lmaWVkIHN0YXJ0IGluZGV4LCBvciBiZXR3ZWVuIGEgc3RhcnQgaW5kZXggYW5kIGFuIGVuZCBpbmRleCBpZiBzZXQuIFRoZSByZXR1cm4gdmFsdWUgaXMgaW5jbHVzaXZlIG9mIHRoZSBzdGFydCBpbmRleCBidXQgbm90IG9mIHRoZSBlbmQgaW5kZXguIixncm91cDoiTG9va3VwIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIxLjEwLjAifX19LGNhc2U6e2RvYzoiU2VsZWN0cyB0aGUgZmlyc3Qgb3V0cHV0IHdob3NlIGNvcnJlc3BvbmRpbmcgdGVzdCBjb25kaXRpb24gZXZhbHVhdGVzIHRvIHRydWUsIG9yIHRoZSBmYWxsYmFjayB2YWx1ZSBvdGhlcndpc2UuIixncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sbWF0Y2g6e2RvYzonU2VsZWN0cyB0aGUgb3V0cHV0IGZvciB3aGljaCB0aGUgbGFiZWwgdmFsdWUgbWF0Y2hlcyB0aGUgaW5wdXQgdmFsdWUsIG9yIHRoZSBmYWxsYmFjayB2YWx1ZSBpZiBubyBtYXRjaCBpcyBmb3VuZC4gVGhlIGlucHV0IGNhbiBiZSBhbnkgZXhwcmVzc2lvbiAoZm9yIGV4YW1wbGUsIGBbImdldCIsICJidWlsZGluZ190eXBlIl1gKS4gRWFjaCBsYWJlbCBtdXN0IGJlIHVuaXF1ZSwgYW5kIG11c3QgYmUgZWl0aGVyOlxuIC0gYSBzaW5nbGUgbGl0ZXJhbCB2YWx1ZTsgb3JcbiAtIGFuIGFycmF5IG9mIGxpdGVyYWwgdmFsdWVzLCB0aGUgdmFsdWVzIG9mIHdoaWNoIG11c3QgYmUgYWxsIHN0cmluZ3Mgb3IgYWxsIG51bWJlcnMgKGZvciBleGFtcGxlIGBbMTAwLCAxMDFdYCBvciBgWyJjIiwgImIiXWApLlxuXG5UaGUgaW5wdXQgbWF0Y2hlcyBpZiBhbnkgb2YgdGhlIHZhbHVlcyBpbiB0aGUgYXJyYXkgbWF0Y2hlcyB1c2luZyBzdHJpY3QgZXF1YWxpdHksIHNpbWlsYXIgdG8gdGhlIGAiaW4iYCBvcGVyYXRvci5cbklmIHRoZSBpbnB1dCB0eXBlIGRvZXMgbm90IG1hdGNoIHRoZSB0eXBlIG9mIHRoZSBsYWJlbHMsIHRoZSByZXN1bHQgd2lsbCBiZSB0aGUgZmFsbGJhY2sgdmFsdWUuJyxncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sY29hbGVzY2U6e2RvYzoiRXZhbHVhdGVzIGVhY2ggZXhwcmVzc2lvbiBpbiB0dXJuIHVudGlsIHRoZSBmaXJzdCB2YWxpZCB2YWx1ZSBpcyBvYnRhaW5lZC4gSW52YWxpZCB2YWx1ZXMgYXJlIGBudWxsYCBhbmQgW2AnaW1hZ2UnYF0oI3R5cGVzLWltYWdlKSBleHByZXNzaW9ucyB0aGF0IGFyZSB1bmF2YWlsYWJsZSBpbiB0aGUgc3R5bGUuIElmIGFsbCB2YWx1ZXMgYXJlIGludmFsaWQsIGBjb2FsZXNjZWAgcmV0dXJucyB0aGUgZmlyc3QgdmFsdWUgbGlzdGVkLiIsZ3JvdXA6IkRlY2lzaW9uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHN0ZXA6e2RvYzonUHJvZHVjZXMgZGlzY3JldGUsIHN0ZXBwZWQgcmVzdWx0cyBieSBldmFsdWF0aW5nIGEgcGllY2V3aXNlLWNvbnN0YW50IGZ1bmN0aW9uIGRlZmluZWQgYnkgcGFpcnMgb2YgaW5wdXQgYW5kIG91dHB1dCB2YWx1ZXMgKCJzdG9wcyIpLiBUaGUgYGlucHV0YCBtYXkgYmUgYW55IG51bWVyaWMgZXhwcmVzc2lvbiAoZS5nLiwgYFsiZ2V0IiwgInBvcHVsYXRpb24iXWApLiBTdG9wIGlucHV0cyBtdXN0IGJlIG51bWVyaWMgbGl0ZXJhbHMgaW4gc3RyaWN0bHkgYXNjZW5kaW5nIG9yZGVyLiBSZXR1cm5zIHRoZSBvdXRwdXQgdmFsdWUgb2YgdGhlIHN0b3AganVzdCBsZXNzIHRoYW4gdGhlIGlucHV0LCBvciB0aGUgZmlyc3Qgb3V0cHV0IGlmIHRoZSBpbnB1dCBpcyBsZXNzIHRoYW4gdGhlIGZpcnN0IHN0b3AuJyxncm91cDoiUmFtcHMsIHNjYWxlcywgY3VydmVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQyLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGludGVycG9sYXRlOntkb2M6J1Byb2R1Y2VzIGNvbnRpbnVvdXMsIHNtb290aCByZXN1bHRzIGJ5IGludGVycG9sYXRpbmcgYmV0d2VlbiBwYWlycyBvZiBpbnB1dCBhbmQgb3V0cHV0IHZhbHVlcyAoInN0b3BzIikuIFRoZSBgaW5wdXRgIG1heSBiZSBhbnkgbnVtZXJpYyBleHByZXNzaW9uIChlLmcuLCBgWyJnZXQiLCAicG9wdWxhdGlvbiJdYCkuIFN0b3AgaW5wdXRzIG11c3QgYmUgbnVtZXJpYyBsaXRlcmFscyBpbiBzdHJpY3RseSBhc2NlbmRpbmcgb3JkZXIuIFRoZSBvdXRwdXQgdHlwZSBtdXN0IGJlIGBudW1iZXJgLCBgYXJyYXk8bnVtYmVyPmAsIG9yIGBjb2xvcmAuXG5cbkludGVycG9sYXRpb24gdHlwZXM6XG4tIGBbImxpbmVhciJdYDogSW50ZXJwb2xhdGVzIGxpbmVhcmx5IGJldHdlZW4gdGhlIHBhaXIgb2Ygc3RvcHMganVzdCBsZXNzIHRoYW4gYW5kIGp1c3QgZ3JlYXRlciB0aGFuIHRoZSBpbnB1dC5cbi0gYFsiZXhwb25lbnRpYWwiLCBiYXNlXWA6IEludGVycG9sYXRlcyBleHBvbmVudGlhbGx5IGJldHdlZW4gdGhlIHN0b3BzIGp1c3QgbGVzcyB0aGFuIGFuZCBqdXN0IGdyZWF0ZXIgdGhhbiB0aGUgaW5wdXQuIGBiYXNlYCBjb250cm9scyB0aGUgcmF0ZSBhdCB3aGljaCB0aGUgb3V0cHV0IGluY3JlYXNlczogaGlnaGVyIHZhbHVlcyBtYWtlIHRoZSBvdXRwdXQgaW5jcmVhc2UgbW9yZSB0b3dhcmRzIHRoZSBoaWdoIGVuZCBvZiB0aGUgcmFuZ2UuIFdpdGggdmFsdWVzIGNsb3NlIHRvIDEgdGhlIG91dHB1dCBpbmNyZWFzZXMgbGluZWFybHkuXG4tIGBbImN1YmljLWJlemllciIsIHgxLCB5MSwgeDIsIHkyXWA6IEludGVycG9sYXRlcyB1c2luZyB0aGUgY3ViaWMgYmV6aWVyIGN1cnZlIGRlZmluZWQgYnkgdGhlIGdpdmVuIGNvbnRyb2wgcG9pbnRzLicsZ3JvdXA6IlJhbXBzLCBzY2FsZXMsIGN1cnZlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40Mi4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiaW50ZXJwb2xhdGUtaGNsIjp7ZG9jOidQcm9kdWNlcyBjb250aW51b3VzLCBzbW9vdGggcmVzdWx0cyBieSBpbnRlcnBvbGF0aW5nIGJldHdlZW4gcGFpcnMgb2YgaW5wdXQgYW5kIG91dHB1dCB2YWx1ZXMgKCJzdG9wcyIpLiBXb3JrcyBsaWtlIGBpbnRlcnBvbGF0ZWAsIGJ1dCB0aGUgb3V0cHV0IHR5cGUgbXVzdCBiZSBgY29sb3JgLCBhbmQgdGhlIGludGVycG9sYXRpb24gaXMgcGVyZm9ybWVkIGluIHRoZSBIdWUtQ2hyb21hLUx1bWluYW5jZSBjb2xvciBzcGFjZS4nLGdyb3VwOiJSYW1wcywgc2NhbGVzLCBjdXJ2ZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDkuMCJ9fX0sImludGVycG9sYXRlLWxhYiI6e2RvYzonUHJvZHVjZXMgY29udGludW91cywgc21vb3RoIHJlc3VsdHMgYnkgaW50ZXJwb2xhdGluZyBiZXR3ZWVuIHBhaXJzIG9mIGlucHV0IGFuZCBvdXRwdXQgdmFsdWVzICgic3RvcHMiKS4gV29ya3MgbGlrZSBgaW50ZXJwb2xhdGVgLCBidXQgdGhlIG91dHB1dCB0eXBlIG11c3QgYmUgYGNvbG9yYCwgYW5kIHRoZSBpbnRlcnBvbGF0aW9uIGlzIHBlcmZvcm1lZCBpbiB0aGUgQ0lFTEFCIGNvbG9yIHNwYWNlLicsZ3JvdXA6IlJhbXBzLCBzY2FsZXMsIGN1cnZlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40OS4wIn19fSxsbjI6e2RvYzoiUmV0dXJucyBtYXRoZW1hdGljYWwgY29uc3RhbnQgbG4oMikuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxwaTp7ZG9jOiJSZXR1cm5zIHRoZSBtYXRoZW1hdGljYWwgY29uc3RhbnQgcGkuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxlOntkb2M6IlJldHVybnMgdGhlIG1hdGhlbWF0aWNhbCBjb25zdGFudCBlLiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sdHlwZW9mOntkb2M6IlJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSBvZiB0aGUgZ2l2ZW4gdmFsdWUuIixncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sc3RyaW5nOntkb2M6IkFzc2VydHMgdGhhdCB0aGUgaW5wdXQgdmFsdWUgaXMgYSBzdHJpbmcuIElmIG11bHRpcGxlIHZhbHVlcyBhcmUgcHJvdmlkZWQsIGVhY2ggb25lIGlzIGV2YWx1YXRlZCBpbiBvcmRlciB1bnRpbCBhIHN0cmluZyBpcyBvYnRhaW5lZC4gSWYgbm9uZSBvZiB0aGUgaW5wdXRzIGFyZSBzdHJpbmdzLCB0aGUgZXhwcmVzc2lvbiBpcyBhbiBlcnJvci4iLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxudW1iZXI6e2RvYzoiQXNzZXJ0cyB0aGF0IHRoZSBpbnB1dCB2YWx1ZSBpcyBhIG51bWJlci4gSWYgbXVsdGlwbGUgdmFsdWVzIGFyZSBwcm92aWRlZCwgZWFjaCBvbmUgaXMgZXZhbHVhdGVkIGluIG9yZGVyIHVudGlsIGEgbnVtYmVyIGlzIG9idGFpbmVkLiBJZiBub25lIG9mIHRoZSBpbnB1dHMgYXJlIG51bWJlcnMsIHRoZSBleHByZXNzaW9uIGlzIGFuIGVycm9yLiIsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGJvb2xlYW46e2RvYzoiQXNzZXJ0cyB0aGF0IHRoZSBpbnB1dCB2YWx1ZSBpcyBhIGJvb2xlYW4uIElmIG11bHRpcGxlIHZhbHVlcyBhcmUgcHJvdmlkZWQsIGVhY2ggb25lIGlzIGV2YWx1YXRlZCBpbiBvcmRlciB1bnRpbCBhIGJvb2xlYW4gaXMgb2J0YWluZWQuIElmIG5vbmUgb2YgdGhlIGlucHV0cyBhcmUgYm9vbGVhbnMsIHRoZSBleHByZXNzaW9uIGlzIGFuIGVycm9yLiIsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LG9iamVjdDp7ZG9jOiJBc3NlcnRzIHRoYXQgdGhlIGlucHV0IHZhbHVlIGlzIGFuIG9iamVjdC4gSWYgbXVsdGlwbGUgdmFsdWVzIGFyZSBwcm92aWRlZCwgZWFjaCBvbmUgaXMgZXZhbHVhdGVkIGluIG9yZGVyIHVudGlsIGFuIG9iamVjdCBpcyBvYnRhaW5lZC4gSWYgbm9uZSBvZiB0aGUgaW5wdXRzIGFyZSBvYmplY3RzLCB0aGUgZXhwcmVzc2lvbiBpcyBhbiBlcnJvci4iLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxjb2xsYXRvcjp7ZG9jOiJSZXR1cm5zIGEgYGNvbGxhdG9yYCBmb3IgdXNlIGluIGxvY2FsZS1kZXBlbmRlbnQgY29tcGFyaXNvbiBvcGVyYXRpb25zLiBUaGUgYGNhc2Utc2Vuc2l0aXZlYCBhbmQgYGRpYWNyaXRpYy1zZW5zaXRpdmVgIG9wdGlvbnMgZGVmYXVsdCB0byBgZmFsc2VgLiBUaGUgYGxvY2FsZWAgYXJndW1lbnQgc3BlY2lmaWVzIHRoZSBJRVRGIGxhbmd1YWdlIHRhZyBvZiB0aGUgbG9jYWxlIHRvIHVzZS4gSWYgbm9uZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgbG9jYWxlIGlzIHVzZWQuIElmIHRoZSByZXF1ZXN0ZWQgbG9jYWxlIGlzIG5vdCBhdmFpbGFibGUsIHRoZSBgY29sbGF0b3JgIHdpbGwgdXNlIGEgc3lzdGVtLWRlZmluZWQgZmFsbGJhY2sgbG9jYWxlLiBVc2UgYHJlc29sdmVkLWxvY2FsZWAgdG8gdGVzdCB0aGUgcmVzdWx0cyBvZiBsb2NhbGUgZmFsbGJhY2sgYmVoYXZpb3IuIixncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi41LjAiLGlvczoiNC4yLjAiLG1hY29zOiIwLjkuMCJ9fX0sZm9ybWF0Ontkb2M6J1JldHVybnMgYSBgZm9ybWF0dGVkYCBzdHJpbmcgZm9yIGRpc3BsYXlpbmcgbWl4ZWQtZm9ybWF0IHRleHQgaW4gdGhlIGB0ZXh0LWZpZWxkYCBwcm9wZXJ0eS4gVGhlIGlucHV0IG1heSBjb250YWluIGEgc3RyaW5nIGxpdGVyYWwgb3IgZXhwcmVzc2lvbiwgaW5jbHVkaW5nIGFuIFtgXCdpbWFnZVwnYF0oI3R5cGVzLWltYWdlKSBleHByZXNzaW9uLiBTdHJpbmdzIG1heSBiZSBmb2xsb3dlZCBieSBhIHN0eWxlIG92ZXJyaWRlIG9iamVjdCB0aGF0IHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbi0gYCJ0ZXh0LWZvbnQiYDogT3ZlcnJpZGVzIHRoZSBmb250IHN0YWNrIHNwZWNpZmllZCBieSB0aGUgcm9vdCBsYXlvdXQgcHJvcGVydHkuXG4tIGAidGV4dC1jb2xvciJgOiBPdmVycmlkZXMgdGhlIGNvbG9yIHNwZWNpZmllZCBieSB0aGUgcm9vdCBwYWludCBwcm9wZXJ0eS5cbi0gYCJmb250LXNjYWxlImA6IEFwcGxpZXMgYSBzY2FsaW5nIGZhY3RvciBvbiBgdGV4dC1zaXplYCBhcyBzcGVjaWZpZWQgYnkgdGhlIHJvb3QgbGF5b3V0IHByb3BlcnR5LicsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQ4LjAiLGFuZHJvaWQ6IjYuNy4wIixpb3M6IjQuNi4wIixtYWNvczoiMC4xMi4wIn0sInRleHQtZm9udCI6e2pzOiIwLjQ4LjAiLGFuZHJvaWQ6IjYuNy4wIixpb3M6IjQuNi4wIixtYWNvczoiMC4xMi4wIn0sImZvbnQtc2NhbGUiOntqczoiMC40OC4wIixhbmRyb2lkOiI2LjcuMCIsaW9zOiI0LjYuMCIsbWFjb3M6IjAuMTIuMCJ9LCJ0ZXh0LWNvbG9yIjp7anM6IjEuMy4wIixhbmRyb2lkOiI3LjMuMCIsaW9zOiI0LjEwLjAiLG1hY29zOiIwLjE0LjAifSxpbWFnZTp7anM6IjEuNi4wIixhbmRyb2lkOiI4LjYuMCIsaW9zOiI1LjcuMCIsbWFjb3M6IjAuMTUuMCJ9fX0saW1hZ2U6e2RvYzoiUmV0dXJucyBhIFtgUmVzb2x2ZWRJbWFnZWBdKC9tYXBib3gtZ2wtanMvc3R5bGUtc3BlYy90eXBlcy8jcmVzb2x2ZWRpbWFnZSkgZm9yIHVzZSBpbiBbYGljb24taW1hZ2VgXSgvbWFwYm94LWdsLWpzL3N0eWxlLXNwZWMvbGF5ZXJzLyNsYXlvdXQtc3ltYm9sLWljb24taW1hZ2UpLCBgKi1wYXR0ZXJuYCBlbnRyaWVzLCBhbmQgYXMgYSBzZWN0aW9uIGluIHRoZSBbYCdmb3JtYXQnYF0oI3R5cGVzLWZvcm1hdCkgZXhwcmVzc2lvbi4gQSBbYCdjb2FsZXNjZSdgXSgjY29hbGVzY2UpIGV4cHJlc3Npb24gY29udGFpbmluZyBgaW1hZ2VgIGV4cHJlc3Npb25zIHdpbGwgZXZhbHVhdGUgdG8gdGhlIGZpcnN0IGxpc3RlZCBpbWFnZSB0aGF0IGlzIGN1cnJlbnRseSBpbiB0aGUgc3R5bGUuIFRoaXMgdmFsaWRhdGlvbiBwcm9jZXNzIGlzIHN5bmNocm9ub3VzIGFuZCByZXF1aXJlcyB0aGUgaW1hZ2UgdG8gaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBzdHlsZSBiZWZvcmUgcmVxdWVzdGluZyBpdCBpbiB0aGUgYCdpbWFnZSdgIGFyZ3VtZW50LiIsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIxLjQuMCIsYW5kcm9pZDoiOC42LjAiLGlvczoiNS43LjAiLG1hY29zOiIwLjE1LjAifX19LCJudW1iZXItZm9ybWF0Ijp7ZG9jOiJDb252ZXJ0cyB0aGUgaW5wdXQgbnVtYmVyIGludG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gdXNpbmcgdGhlIHByb3ZpZGluZyBmb3JtYXR0aW5nIHJ1bGVzLiBJZiBzZXQsIHRoZSBgbG9jYWxlYCBhcmd1bWVudCBzcGVjaWZpZXMgdGhlIGxvY2FsZSB0byB1c2UsIGFzIGEgQkNQIDQ3IGxhbmd1YWdlIHRhZy4gSWYgc2V0LCB0aGUgYGN1cnJlbmN5YCBhcmd1bWVudCBzcGVjaWZpZXMgYW4gSVNPIDQyMTcgY29kZSB0byB1c2UgZm9yIGN1cnJlbmN5LXN0eWxlIGZvcm1hdHRpbmcuIElmIHNldCwgdGhlIGBtaW4tZnJhY3Rpb24tZGlnaXRzYCBhbmQgYG1heC1mcmFjdGlvbi1kaWdpdHNgIGFyZ3VtZW50cyBzcGVjaWZ5IHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIG51bWJlciBvZiBmcmFjdGlvbmFsIGRpZ2l0cyB0byBpbmNsdWRlLiIsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjU0LjAiLGFuZHJvaWQ6IjguNC4wIixpb3M6IjUuNC4wIixtYWNvczoiMC4xNS4wIn19fSwidG8tc3RyaW5nIjp7ZG9jOidDb252ZXJ0cyB0aGUgaW5wdXQgdmFsdWUgdG8gYSBzdHJpbmcuIElmIHRoZSBpbnB1dCBpcyBgbnVsbGAsIHRoZSByZXN1bHQgaXMgYCIiYC4gSWYgdGhlIGlucHV0IGlzIGEgW2Bib29sZWFuYF0oI3R5cGVzLWJvb2xlYW4pLCB0aGUgcmVzdWx0IGlzIGAidHJ1ZSJgIG9yIGAiZmFsc2UiYC4gSWYgdGhlIGlucHV0IGlzIGEgbnVtYmVyLCBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgYXMgc3BlY2lmaWVkIGJ5IHRoZSBbIk51bWJlclRvU3RyaW5nIiBhbGdvcml0aG1dKGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvc3RyaW5nLWFwcGxpZWQtdG8tdGhlLW51bWJlci10eXBlKSBvZiB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBTcGVjaWZpY2F0aW9uLiBJZiB0aGUgaW5wdXQgaXMgYSBbYGNvbG9yYF0oI2NvbG9yKSwgaXQgaXMgY29udmVydGVkIHRvIGEgc3RyaW5nIG9mIHRoZSBmb3JtIGAicmdiYShyLGcsYixhKSJgLCB3aGVyZSBgcmAsIGBnYCwgYW5kIGBiYCBhcmUgbnVtZXJhbHMgcmFuZ2luZyBmcm9tIDAgdG8gMjU1LCBhbmQgYGFgIHJhbmdlcyBmcm9tIDAgdG8gMS4gSWYgdGhlIGlucHV0IGlzIGFuIFtgXCdpbWFnZVwnYF0oI3R5cGVzLWltYWdlKSBleHByZXNzaW9uLCBgXCd0by1zdHJpbmdcJ2AgcmV0dXJucyB0aGUgaW1hZ2UgbmFtZS4gT3RoZXJ3aXNlLCB0aGUgaW5wdXQgaXMgY29udmVydGVkIHRvIGEgc3RyaW5nIGluIHRoZSBmb3JtYXQgc3BlY2lmaWVkIGJ5IHRoZSBbYEpTT04uc3RyaW5naWZ5YF0oaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtanNvbi5zdHJpbmdpZnkpIGZ1bmN0aW9uIG9mIHRoZSBFQ01BU2NyaXB0IExhbmd1YWdlIFNwZWNpZmljYXRpb24uJyxncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sInRvLW51bWJlciI6e2RvYzonQ29udmVydHMgdGhlIGlucHV0IHZhbHVlIHRvIGEgbnVtYmVyLCBpZiBwb3NzaWJsZS4gSWYgdGhlIGlucHV0IGlzIGBudWxsYCBvciBgZmFsc2VgLCB0aGUgcmVzdWx0IGlzIDAuIElmIHRoZSBpbnB1dCBpcyBgdHJ1ZWAsIHRoZSByZXN1bHQgaXMgMS4gSWYgdGhlIGlucHV0IGlzIGEgc3RyaW5nLCBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBudW1iZXIgYXMgc3BlY2lmaWVkIGJ5IHRoZSBbIlRvTnVtYmVyIEFwcGxpZWQgdG8gdGhlIFN0cmluZyBUeXBlIiBhbGdvcml0aG1dKGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXRvbnVtYmVyLWFwcGxpZWQtdG8tdGhlLXN0cmluZy10eXBlKSBvZiB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBTcGVjaWZpY2F0aW9uLiBJZiBtdWx0aXBsZSB2YWx1ZXMgYXJlIHByb3ZpZGVkLCBlYWNoIG9uZSBpcyBldmFsdWF0ZWQgaW4gb3JkZXIgdW50aWwgdGhlIGZpcnN0IHN1Y2Nlc3NmdWwgY29udmVyc2lvbiBpcyBvYnRhaW5lZC4gSWYgbm9uZSBvZiB0aGUgaW5wdXRzIGNhbiBiZSBjb252ZXJ0ZWQsIHRoZSBleHByZXNzaW9uIGlzIGFuIGVycm9yLicsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LCJ0by1ib29sZWFuIjp7ZG9jOiJDb252ZXJ0cyB0aGUgaW5wdXQgdmFsdWUgdG8gYSBib29sZWFuLiBUaGUgcmVzdWx0IGlzIGBmYWxzZWAgd2hlbiB0aGVuIGlucHV0IGlzIGFuIGVtcHR5IHN0cmluZywgMCwgYGZhbHNlYCwgYG51bGxgLCBvciBgTmFOYDsgb3RoZXJ3aXNlIGl0IGlzIGB0cnVlYC4iLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwidG8tcmdiYSI6e2RvYzoiUmV0dXJucyBhIGZvdXItZWxlbWVudCBhcnJheSBjb250YWluaW5nIHRoZSBpbnB1dCBjb2xvcidzIHJlZCwgZ3JlZW4sIGJsdWUsIGFuZCBhbHBoYSBjb21wb25lbnRzLCBpbiB0aGF0IG9yZGVyLiIsZ3JvdXA6IkNvbG9yIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LCJ0by1jb2xvciI6e2RvYzoiQ29udmVydHMgdGhlIGlucHV0IHZhbHVlIHRvIGEgY29sb3IuIElmIG11bHRpcGxlIHZhbHVlcyBhcmUgcHJvdmlkZWQsIGVhY2ggb25lIGlzIGV2YWx1YXRlZCBpbiBvcmRlciB1bnRpbCB0aGUgZmlyc3Qgc3VjY2Vzc2Z1bCBjb252ZXJzaW9uIGlzIG9idGFpbmVkLiBJZiBub25lIG9mIHRoZSBpbnB1dHMgY2FuIGJlIGNvbnZlcnRlZCwgdGhlIGV4cHJlc3Npb24gaXMgYW4gZXJyb3IuIixncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0scmdiOntkb2M6IkNyZWF0ZXMgYSBjb2xvciB2YWx1ZSBmcm9tIHJlZCwgZ3JlZW4sIGFuZCBibHVlIGNvbXBvbmVudHMsIHdoaWNoIG11c3QgcmFuZ2UgYmV0d2VlbiAwIGFuZCAyNTUsIGFuZCBhbiBhbHBoYSBjb21wb25lbnQgb2YgMS4gSWYgYW55IGNvbXBvbmVudCBpcyBvdXQgb2YgcmFuZ2UsIHRoZSBleHByZXNzaW9uIGlzIGFuIGVycm9yLiIsZ3JvdXA6IkNvbG9yIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHJnYmE6e2RvYzoiQ3JlYXRlcyBhIGNvbG9yIHZhbHVlIGZyb20gcmVkLCBncmVlbiwgYmx1ZSBjb21wb25lbnRzLCB3aGljaCBtdXN0IHJhbmdlIGJldHdlZW4gMCBhbmQgMjU1LCBhbmQgYW4gYWxwaGEgY29tcG9uZW50IHdoaWNoIG11c3QgcmFuZ2UgYmV0d2VlbiAwIGFuZCAxLiBJZiBhbnkgY29tcG9uZW50IGlzIG91dCBvZiByYW5nZSwgdGhlIGV4cHJlc3Npb24gaXMgYW4gZXJyb3IuIixncm91cDoiQ29sb3IiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sZ2V0Ontkb2M6IlJldHJpZXZlcyBhIHByb3BlcnR5IHZhbHVlIGZyb20gdGhlIGN1cnJlbnQgZmVhdHVyZSdzIHByb3BlcnRpZXMsIG9yIGZyb20gYW5vdGhlciBvYmplY3QgaWYgYSBzZWNvbmQgYXJndW1lbnQgaXMgcHJvdmlkZWQuIFJldHVybnMgYG51bGxgIGlmIHRoZSByZXF1ZXN0ZWQgcHJvcGVydHkgaXMgbWlzc2luZy4iLGdyb3VwOiJMb29rdXAiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0saGFzOntkb2M6IlRlc3RzIGZvciB0aGUgcHJlc2VuY2Ugb2YgYW4gcHJvcGVydHkgdmFsdWUgaW4gdGhlIGN1cnJlbnQgZmVhdHVyZSdzIHByb3BlcnRpZXMsIG9yIGZyb20gYW5vdGhlciBvYmplY3QgaWYgYSBzZWNvbmQgYXJndW1lbnQgaXMgcHJvdmlkZWQuIixncm91cDoiTG9va3VwIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGxlbmd0aDp7ZG9jOiJSZXR1cm5zIHRoZSBsZW5ndGggb2YgYW4gYXJyYXkgb3Igc3RyaW5nLiIsZ3JvdXA6Ikxvb2t1cCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxwcm9wZXJ0aWVzOntkb2M6J1JldHVybnMgdGhlIGZlYXR1cmUgcHJvcGVydGllcyBvYmplY3QuICBOb3RlIHRoYXQgaW4gc29tZSBjYXNlcywgaXQgbWF5IGJlIG1vcmUgZWZmaWNpZW50IHRvIHVzZSBgWyJnZXQiLCAicHJvcGVydHlfbmFtZSJdYCBkaXJlY3RseS4nLGdyb3VwOiJGZWF0dXJlIGRhdGEiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sImZlYXR1cmUtc3RhdGUiOntkb2M6IlJldHJpZXZlcyBhIHByb3BlcnR5IHZhbHVlIGZyb20gdGhlIGN1cnJlbnQgZmVhdHVyZSdzIHN0YXRlLiBSZXR1cm5zIGBudWxsYCBpZiB0aGUgcmVxdWVzdGVkIHByb3BlcnR5IGlzIG5vdCBwcmVzZW50IG9uIHRoZSBmZWF0dXJlJ3Mgc3RhdGUuIEEgZmVhdHVyZSdzIHN0YXRlIGlzIG5vdCBwYXJ0IG9mIHRoZSBHZW9KU09OIG9yIHZlY3RvciB0aWxlIGRhdGEsIGFuZCBtdXN0IGJlIHNldCBwcm9ncmFtbWF0aWNhbGx5IG9uIGVhY2ggZmVhdHVyZS4gRmVhdHVyZXMgYXJlIGlkZW50aWZpZWQgYnkgdGhlaXIgYGlkYCBhdHRyaWJ1dGUsIHdoaWNoIG11c3QgYmUgYW4gaW50ZWdlciBvciBhIHN0cmluZyB0aGF0IGNhbiBiZSBjYXN0IHRvIGFuIGludGVnZXIuIE5vdGUgdGhhdCBbXCJmZWF0dXJlLXN0YXRlXCJdIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBwYWludCBwcm9wZXJ0aWVzIHRoYXQgc3VwcG9ydCBkYXRhLWRyaXZlbiBzdHlsaW5nLiIsZ3JvdXA6IkZlYXR1cmUgZGF0YSIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40Ni4wIn19fSwiZ2VvbWV0cnktdHlwZSI6e2RvYzoiUmV0dXJucyB0aGUgZmVhdHVyZSdzIGdlb21ldHJ5IHR5cGU6IGBQb2ludGAsIGBNdWx0aVBvaW50YCwgYExpbmVTdHJpbmdgLCBgTXVsdGlMaW5lU3RyaW5nYCwgYFBvbHlnb25gLCBgTXVsdGlQb2x5Z29uYC4gYE11bHRpKmAgZmVhdHVyZSB0eXBlcyBhcmUgb25seSByZXR1cm5lZCBpbiBHZW9KU09OIHNvdXJjZXMuIFdoZW4gd29ya2luZyB3aXRoIHZlY3RvciB0aWxlIHNvdXJjZXMsIHVzZSB0aGUgc2luZ3VsYXIgZm9ybXMuIixncm91cDoiRmVhdHVyZSBkYXRhIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGlkOntkb2M6IlJldHVybnMgdGhlIGZlYXR1cmUncyBpZCwgaWYgaXQgaGFzIG9uZS4iLGdyb3VwOiJGZWF0dXJlIGRhdGEiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sem9vbTp7ZG9jOidSZXR1cm5zIHRoZSBjdXJyZW50IHpvb20gbGV2ZWwuICBOb3RlIHRoYXQgaW4gc3R5bGUgbGF5b3V0IGFuZCBwYWludCBwcm9wZXJ0aWVzLCBbInpvb20iXSBtYXkgb25seSBhcHBlYXIgYXMgdGhlIGlucHV0IHRvIGEgdG9wLWxldmVsICJzdGVwIiBvciAiaW50ZXJwb2xhdGUiIGV4cHJlc3Npb24uJyxncm91cDoiQ2FtZXJhIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHBpdGNoOntkb2M6J1JldHVybnMgdGhlIGN1cnJlbnQgcGl0Y2ggaW4gZGVncmVlcy4gYFsicGl0Y2giXWAgbWF5IG9ubHkgYmUgdXNlZCBpbiB0aGUgYGZpbHRlcmAgZXhwcmVzc2lvbiBmb3IgYSBgc3ltYm9sYCBsYXllci4nLGdyb3VwOiJDYW1lcmEiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjIuNi4wIn19fSwiZGlzdGFuY2UtZnJvbS1jZW50ZXIiOntkb2M6J1JldHVybnMgdGhlIGRpc3RhbmNlIG9mIGEgYHN5bWJvbGAgaW5zdGFuY2UgZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBtYXAuIFRoZSBkaXN0YW5jZSBpcyBtZWFzdXJlZCBpbiBwaXhlbHMgZGl2aWRlZCBieSB0aGUgaGVpZ2h0IG9mIHRoZSBtYXAgY29udGFpbmVyLiBJdCBtZWFzdXJlcyAwIGF0IHRoZSBjZW50ZXIsIGRlY3JlYXNlcyB0b3dhcmRzIHRoZSBjYW1lcmEgYW5kIGluY3JlYXNlIGF3YXkgZnJvbSB0aGUgY2FtZXJhLiBGb3IgZXhhbXBsZSwgaWYgdGhlIGhlaWdodCBvZiB0aGUgbWFwIGlzIDEwMDBweCwgYSB2YWx1ZSBvZiAtMSBtZWFucyAxMDAwcHggYXdheSBmcm9tIHRoZSBjZW50ZXIgdG93YXJkcyB0aGUgY2FtZXJhLCBhbmQgYSB2YWx1ZSBvZiAxIG1lYW5zIGEgZGlzdGFuY2Ugb2YgMTAwMHB4IGF3YXkgZnJvbSB0aGUgY2FtZXJhIGZyb20gdGhlIGNlbnRlci4gYFsiZGlzdGFuY2UtZnJvbS1jZW50ZXIiXWAgbWF5IG9ubHkgYmUgdXNlZCBpbiB0aGUgYGZpbHRlcmAgZXhwcmVzc2lvbiBmb3IgYSBgc3ltYm9sYCBsYXllci4nLGdyb3VwOiJDYW1lcmEiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjIuNi4wIn19fSwiaGVhdG1hcC1kZW5zaXR5Ijp7ZG9jOiJSZXR1cm5zIHRoZSBrZXJuZWwgZGVuc2l0eSBlc3RpbWF0aW9uIG9mIGEgcGl4ZWwgaW4gYSBoZWF0bWFwIGxheWVyLCB3aGljaCBpcyBhIHJlbGF0aXZlIG1lYXN1cmUgb2YgaG93IG1hbnkgZGF0YSBwb2ludHMgYXJlIGNyb3dkZWQgYXJvdW5kIGEgcGFydGljdWxhciBwaXhlbC4gQ2FuIG9ubHkgYmUgdXNlZCBpbiB0aGUgYGhlYXRtYXAtY29sb3JgIHByb3BlcnR5LiIsZ3JvdXA6IkhlYXRtYXAiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sImxpbmUtcHJvZ3Jlc3MiOntkb2M6IlJldHVybnMgdGhlIHByb2dyZXNzIGFsb25nIGEgZ3JhZGllbnQgbGluZS4gQ2FuIG9ubHkgYmUgdXNlZCBpbiB0aGUgYGxpbmUtZ3JhZGllbnRgIHByb3BlcnR5LiIsZ3JvdXA6IkZlYXR1cmUgZGF0YSIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjUuMCIsaW9zOiI0LjYuMCIsbWFjb3M6IjAuMTIuMCJ9fX0sInNreS1yYWRpYWwtcHJvZ3Jlc3MiOntkb2M6IlJldHVybnMgdGhlIGRpc3RhbmNlIG9mIGEgcG9pbnQgb24gdGhlIHNreSBmcm9tIHRoZSBzdW4gcG9zaXRpb24uIFJldHVybnMgMCBhdCBzdW4gcG9zaXRpb24gYW5kIDEgd2hlbiB0aGUgZGlzdGFuY2UgcmVhY2hlcyBgc2t5LWdyYWRpZW50LXJhZGl1c2AuIENhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGBza3ktZ3JhZGllbnRgIHByb3BlcnR5LiIsZ3JvdXA6InNreSIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifX19LGFjY3VtdWxhdGVkOntkb2M6IlJldHVybnMgdGhlIHZhbHVlIG9mIGEgY2x1c3RlciBwcm9wZXJ0eSBhY2N1bXVsYXRlZCBzbyBmYXIuIENhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGBjbHVzdGVyUHJvcGVydGllc2Agb3B0aW9uIG9mIGEgY2x1c3RlcmVkIEdlb0pTT04gc291cmNlLiIsZ3JvdXA6IkZlYXR1cmUgZGF0YSIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC41My4wIixhbmRyb2lkOiI4LjQuMCIsaW9zOiI1LjUuMCIsbWFjb3M6IjAuMTUuMCJ9fX0sIisiOntkb2M6IlJldHVybnMgdGhlIHN1bSBvZiB0aGUgaW5wdXRzLiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sIioiOntkb2M6IlJldHVybnMgdGhlIHByb2R1Y3Qgb2YgdGhlIGlucHV0cy4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LCItIjp7ZG9jOiJGb3IgdHdvIGlucHV0cywgcmV0dXJucyB0aGUgcmVzdWx0IG9mIHN1YnRyYWN0aW5nIHRoZSBzZWNvbmQgaW5wdXQgZnJvbSB0aGUgZmlyc3QuIEZvciBhIHNpbmdsZSBpbnB1dCwgcmV0dXJucyB0aGUgcmVzdWx0IG9mIHN1YnRyYWN0aW5nIGl0IGZyb20gMC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LCIvIjp7ZG9jOiJSZXR1cm5zIHRoZSByZXN1bHQgb2YgZmxvYXRpbmcgcG9pbnQgZGl2aXNpb24gb2YgdGhlIGZpcnN0IGlucHV0IGJ5IHRoZSBzZWNvbmQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiJSI6e2RvYzoiUmV0dXJucyB0aGUgcmVtYWluZGVyIGFmdGVyIGludGVnZXIgZGl2aXNpb24gb2YgdGhlIGZpcnN0IGlucHV0IGJ5IHRoZSBzZWNvbmQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiXiI6e2RvYzoiUmV0dXJucyB0aGUgcmVzdWx0IG9mIHJhaXNpbmcgdGhlIGZpcnN0IGlucHV0IHRvIHRoZSBwb3dlciBzcGVjaWZpZWQgYnkgdGhlIHNlY29uZC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHNxcnQ6e2RvYzoiUmV0dXJucyB0aGUgc3F1YXJlIHJvb3Qgb2YgdGhlIGlucHV0LiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDIuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sbG9nMTA6e2RvYzoiUmV0dXJucyB0aGUgYmFzZS10ZW4gbG9nYXJpdGhtIG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGxuOntkb2M6IlJldHVybnMgdGhlIG5hdHVyYWwgbG9nYXJpdGhtIG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGxvZzI6e2RvYzoiUmV0dXJucyB0aGUgYmFzZS10d28gbG9nYXJpdGhtIG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHNpbjp7ZG9jOiJSZXR1cm5zIHRoZSBzaW5lIG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGNvczp7ZG9jOiJSZXR1cm5zIHRoZSBjb3NpbmUgb2YgdGhlIGlucHV0LiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sdGFuOntkb2M6IlJldHVybnMgdGhlIHRhbmdlbnQgb2YgdGhlIGlucHV0LiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sYXNpbjp7ZG9jOiJSZXR1cm5zIHRoZSBhcmNzaW5lIG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGFjb3M6e2RvYzoiUmV0dXJucyB0aGUgYXJjY29zaW5lIG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGF0YW46e2RvYzoiUmV0dXJucyB0aGUgYXJjdGFuZ2VudCBvZiB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxtaW46e2RvYzoiUmV0dXJucyB0aGUgbWluaW11bSB2YWx1ZSBvZiB0aGUgaW5wdXRzLiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sbWF4Ontkb2M6IlJldHVybnMgdGhlIG1heGltdW0gdmFsdWUgb2YgdGhlIGlucHV0cy4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHJvdW5kOntkb2M6J1JvdW5kcyB0aGUgaW5wdXQgdG8gdGhlIG5lYXJlc3QgaW50ZWdlci4gSGFsZndheSB2YWx1ZXMgYXJlIHJvdW5kZWQgYXdheSBmcm9tIHplcm8uIEZvciBleGFtcGxlLCBgWyJyb3VuZCIsIC0xLjVdYCBldmFsdWF0ZXMgdG8gLTIuJyxncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxhYnM6e2RvYzoiUmV0dXJucyB0aGUgYWJzb2x1dGUgdmFsdWUgb2YgdGhlIGlucHV0LiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sY2VpbDp7ZG9jOiJSZXR1cm5zIHRoZSBzbWFsbGVzdCBpbnRlZ2VyIHRoYXQgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQ1LjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGZsb29yOntkb2M6IlJldHVybnMgdGhlIGxhcmdlc3QgaW50ZWdlciB0aGF0IGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxkaXN0YW5jZTp7ZG9jOiJSZXR1cm5zIHRoZSBzaG9ydGVzdCBkaXN0YW5jZSBpbiBtZXRlcnMgYmV0d2VlbiB0aGUgZXZhbHVhdGVkIGZlYXR1cmUgYW5kIHRoZSBpbnB1dCBnZW9tZXRyeS4gVGhlIGlucHV0IHZhbHVlIGNhbiBiZSBhIHZhbGlkIEdlb0pTT04gb2YgdHlwZSBgUG9pbnRgLCBgTXVsdGlQb2ludGAsIGBMaW5lU3RyaW5nYCwgYE11bHRpTGluZVN0cmluZ2AsIGBQb2x5Z29uYCwgYE11bHRpUG9seWdvbmAsIGBGZWF0dXJlYCwgb3IgYEZlYXR1cmVDb2xsZWN0aW9uYC4gRGlzdGFuY2UgdmFsdWVzIHJldHVybmVkIG1heSB2YXJ5IGluIHByZWNpc2lvbiBkdWUgdG8gbG9zcyBpbiBwcmVjaXNpb24gZnJvbSBlbmNvZGluZyBnZW9tZXRyaWVzLCBwYXJ0aWN1bGFybHkgYmVsb3cgem9vbSBsZXZlbCAxMy4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2FuZHJvaWQ6IjkuMi4wIixpb3M6IjUuOS4wIixtYWNvczoiMC4xNi4wIn19fSwiPT0iOntkb2M6IlJldHVybnMgYHRydWVgIGlmIHRoZSBpbnB1dCB2YWx1ZXMgYXJlIGVxdWFsLCBgZmFsc2VgIG90aGVyd2lzZS4gVGhlIGNvbXBhcmlzb24gaXMgc3RyaWN0bHkgdHlwZWQ6IHZhbHVlcyBvZiBkaWZmZXJlbnQgcnVudGltZSB0eXBlcyBhcmUgYWx3YXlzIGNvbnNpZGVyZWQgdW5lcXVhbC4gQ2FzZXMgd2hlcmUgdGhlIHR5cGVzIGFyZSBrbm93biB0byBiZSBkaWZmZXJlbnQgYXQgcGFyc2UgdGltZSBhcmUgY29uc2lkZXJlZCBpbnZhbGlkIGFuZCB3aWxsIHByb2R1Y2UgYSBwYXJzZSBlcnJvci4gQWNjZXB0cyBhbiBvcHRpb25hbCBgY29sbGF0b3JgIGFyZ3VtZW50IHRvIGNvbnRyb2wgbG9jYWxlLWRlcGVuZGVudCBzdHJpbmcgY29tcGFyaXNvbnMuIixncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9LGNvbGxhdG9yOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjUuMCIsaW9zOiI0LjIuMCIsbWFjb3M6IjAuOS4wIn19fSwiIT0iOntkb2M6IlJldHVybnMgYHRydWVgIGlmIHRoZSBpbnB1dCB2YWx1ZXMgYXJlIG5vdCBlcXVhbCwgYGZhbHNlYCBvdGhlcndpc2UuIFRoZSBjb21wYXJpc29uIGlzIHN0cmljdGx5IHR5cGVkOiB2YWx1ZXMgb2YgZGlmZmVyZW50IHJ1bnRpbWUgdHlwZXMgYXJlIGFsd2F5cyBjb25zaWRlcmVkIHVuZXF1YWwuIENhc2VzIHdoZXJlIHRoZSB0eXBlcyBhcmUga25vd24gdG8gYmUgZGlmZmVyZW50IGF0IHBhcnNlIHRpbWUgYXJlIGNvbnNpZGVyZWQgaW52YWxpZCBhbmQgd2lsbCBwcm9kdWNlIGEgcGFyc2UgZXJyb3IuIEFjY2VwdHMgYW4gb3B0aW9uYWwgYGNvbGxhdG9yYCBhcmd1bWVudCB0byBjb250cm9sIGxvY2FsZS1kZXBlbmRlbnQgc3RyaW5nIGNvbXBhcmlzb25zLiIsZ3JvdXA6IkRlY2lzaW9uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifSxjb2xsYXRvcjp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi41LjAiLGlvczoiNC4yLjAiLG1hY29zOiIwLjkuMCJ9fX0sIj4iOntkb2M6IlJldHVybnMgYHRydWVgIGlmIHRoZSBmaXJzdCBpbnB1dCBpcyBzdHJpY3RseSBncmVhdGVyIHRoYW4gdGhlIHNlY29uZCwgYGZhbHNlYCBvdGhlcndpc2UuIFRoZSBhcmd1bWVudHMgYXJlIHJlcXVpcmVkIHRvIGJlIGVpdGhlciBib3RoIHN0cmluZ3Mgb3IgYm90aCBudW1iZXJzOyBpZiBkdXJpbmcgZXZhbHVhdGlvbiB0aGV5IGFyZSBub3QsIGV4cHJlc3Npb24gZXZhbHVhdGlvbiBwcm9kdWNlcyBhbiBlcnJvci4gQ2FzZXMgd2hlcmUgdGhpcyBjb25zdHJhaW50IGlzIGtub3duIG5vdCB0byBob2xkIGF0IHBhcnNlIHRpbWUgYXJlIGNvbnNpZGVyZWQgaW4gdmFsaWQgYW5kIHdpbGwgcHJvZHVjZSBhIHBhcnNlIGVycm9yLiBBY2NlcHRzIGFuIG9wdGlvbmFsIGBjb2xsYXRvcmAgYXJndW1lbnQgdG8gY29udHJvbCBsb2NhbGUtZGVwZW5kZW50IHN0cmluZyBjb21wYXJpc29ucy4iLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn0sY29sbGF0b3I6e2pzOiIwLjQ1LjAiLGFuZHJvaWQ6IjYuNS4wIixpb3M6IjQuMi4wIixtYWNvczoiMC45LjAifX19LCI8Ijp7ZG9jOiJSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmlyc3QgaW5wdXQgaXMgc3RyaWN0bHkgbGVzcyB0aGFuIHRoZSBzZWNvbmQsIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGUgYXJndW1lbnRzIGFyZSByZXF1aXJlZCB0byBiZSBlaXRoZXIgYm90aCBzdHJpbmdzIG9yIGJvdGggbnVtYmVyczsgaWYgZHVyaW5nIGV2YWx1YXRpb24gdGhleSBhcmUgbm90LCBleHByZXNzaW9uIGV2YWx1YXRpb24gcHJvZHVjZXMgYW4gZXJyb3IuIENhc2VzIHdoZXJlIHRoaXMgY29uc3RyYWludCBpcyBrbm93biBub3QgdG8gaG9sZCBhdCBwYXJzZSB0aW1lIGFyZSBjb25zaWRlcmVkIGluIHZhbGlkIGFuZCB3aWxsIHByb2R1Y2UgYSBwYXJzZSBlcnJvci4gQWNjZXB0cyBhbiBvcHRpb25hbCBgY29sbGF0b3JgIGFyZ3VtZW50IHRvIGNvbnRyb2wgbG9jYWxlLWRlcGVuZGVudCBzdHJpbmcgY29tcGFyaXNvbnMuIixncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9LGNvbGxhdG9yOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjUuMCIsaW9zOiI0LjIuMCIsbWFjb3M6IjAuOS4wIn19fSwiPj0iOntkb2M6IlJldHVybnMgYHRydWVgIGlmIHRoZSBmaXJzdCBpbnB1dCBpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlY29uZCwgYGZhbHNlYCBvdGhlcndpc2UuIFRoZSBhcmd1bWVudHMgYXJlIHJlcXVpcmVkIHRvIGJlIGVpdGhlciBib3RoIHN0cmluZ3Mgb3IgYm90aCBudW1iZXJzOyBpZiBkdXJpbmcgZXZhbHVhdGlvbiB0aGV5IGFyZSBub3QsIGV4cHJlc3Npb24gZXZhbHVhdGlvbiBwcm9kdWNlcyBhbiBlcnJvci4gQ2FzZXMgd2hlcmUgdGhpcyBjb25zdHJhaW50IGlzIGtub3duIG5vdCB0byBob2xkIGF0IHBhcnNlIHRpbWUgYXJlIGNvbnNpZGVyZWQgaW4gdmFsaWQgYW5kIHdpbGwgcHJvZHVjZSBhIHBhcnNlIGVycm9yLiBBY2NlcHRzIGFuIG9wdGlvbmFsIGBjb2xsYXRvcmAgYXJndW1lbnQgdG8gY29udHJvbCBsb2NhbGUtZGVwZW5kZW50IHN0cmluZyBjb21wYXJpc29ucy4iLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn0sY29sbGF0b3I6e2pzOiIwLjQ1LjAiLGFuZHJvaWQ6IjYuNS4wIixpb3M6IjQuMi4wIixtYWNvczoiMC45LjAifX19LCI8PSI6e2RvYzoiUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZpcnN0IGlucHV0IGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgc2Vjb25kLCBgZmFsc2VgIG90aGVyd2lzZS4gVGhlIGFyZ3VtZW50cyBhcmUgcmVxdWlyZWQgdG8gYmUgZWl0aGVyIGJvdGggc3RyaW5ncyBvciBib3RoIG51bWJlcnM7IGlmIGR1cmluZyBldmFsdWF0aW9uIHRoZXkgYXJlIG5vdCwgZXhwcmVzc2lvbiBldmFsdWF0aW9uIHByb2R1Y2VzIGFuIGVycm9yLiBDYXNlcyB3aGVyZSB0aGlzIGNvbnN0cmFpbnQgaXMga25vd24gbm90IHRvIGhvbGQgYXQgcGFyc2UgdGltZSBhcmUgY29uc2lkZXJlZCBpbiB2YWxpZCBhbmQgd2lsbCBwcm9kdWNlIGEgcGFyc2UgZXJyb3IuIEFjY2VwdHMgYW4gb3B0aW9uYWwgYGNvbGxhdG9yYCBhcmd1bWVudCB0byBjb250cm9sIGxvY2FsZS1kZXBlbmRlbnQgc3RyaW5nIGNvbXBhcmlzb25zLiIsZ3JvdXA6IkRlY2lzaW9uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifSxjb2xsYXRvcjp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi41LjAiLGlvczoiNC4yLjAiLG1hY29zOiIwLjkuMCJ9fX0sYWxsOntkb2M6IlJldHVybnMgYHRydWVgIGlmIGFsbCB0aGUgaW5wdXRzIGFyZSBgdHJ1ZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGUgaW5wdXRzIGFyZSBldmFsdWF0ZWQgaW4gb3JkZXIsIGFuZCBldmFsdWF0aW9uIGlzIHNob3J0LWNpcmN1aXRpbmc6IG9uY2UgYW4gaW5wdXQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYGZhbHNlYCwgdGhlIHJlc3VsdCBpcyBgZmFsc2VgIGFuZCBubyBmdXJ0aGVyIGlucHV0IGV4cHJlc3Npb25zIGFyZSBldmFsdWF0ZWQuIixncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sYW55Ontkb2M6IlJldHVybnMgYHRydWVgIGlmIGFueSBvZiB0aGUgaW5wdXRzIGFyZSBgdHJ1ZWAsIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGUgaW5wdXRzIGFyZSBldmFsdWF0ZWQgaW4gb3JkZXIsIGFuZCBldmFsdWF0aW9uIGlzIHNob3J0LWNpcmN1aXRpbmc6IG9uY2UgYW4gaW5wdXQgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8gYHRydWVgLCB0aGUgcmVzdWx0IGlzIGB0cnVlYCBhbmQgbm8gZnVydGhlciBpbnB1dCBleHByZXNzaW9ucyBhcmUgZXZhbHVhdGVkLiIsZ3JvdXA6IkRlY2lzaW9uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LCIhIjp7ZG9jOiJMb2dpY2FsIG5lZ2F0aW9uLiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgaW5wdXQgaXMgYGZhbHNlYCwgYW5kIGBmYWxzZWAgaWYgdGhlIGlucHV0IGlzIGB0cnVlYC4iLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSx3aXRoaW46e2RvYzoiUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGV2YWx1YXRlZCBmZWF0dXJlIGlzIGZ1bGx5IGNvbnRhaW5lZCBpbnNpZGUgYSBib3VuZGFyeSBvZiB0aGUgaW5wdXQgZ2VvbWV0cnksIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGUgaW5wdXQgdmFsdWUgY2FuIGJlIGEgdmFsaWQgR2VvSlNPTiBvZiB0eXBlIGBQb2x5Z29uYCwgYE11bHRpUG9seWdvbmAsIGBGZWF0dXJlYCwgb3IgYEZlYXR1cmVDb2xsZWN0aW9uYC4gU3VwcG9ydGVkIGZlYXR1cmVzIGZvciBldmFsdWF0aW9uOlxuLSBgUG9pbnRgOiBSZXR1cm5zIGBmYWxzZWAgaWYgYSBwb2ludCBpcyBvbiB0aGUgYm91bmRhcnkgb3IgZmFsbHMgb3V0c2lkZSB0aGUgYm91bmRhcnkuXG4tIGBMaW5lU3RyaW5nYDogUmV0dXJucyBgZmFsc2VgIGlmIGFueSBwYXJ0IG9mIGEgbGluZSBmYWxscyBvdXRzaWRlIHRoZSBib3VuZGFyeSwgdGhlIGxpbmUgaW50ZXJzZWN0cyB0aGUgYm91bmRhcnksIG9yIGEgbGluZSdzIGVuZHBvaW50IGlzIG9uIHRoZSBib3VuZGFyeS4iLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMS45LjAiLGFuZHJvaWQ6IjkuMS4wIixpb3M6IjUuOC4wIixtYWNvczoiMC4xNS4wIn19fSwiaXMtc3VwcG9ydGVkLXNjcmlwdCI6e2RvYzoiUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGlucHV0IHN0cmluZyBpcyBleHBlY3RlZCB0byByZW5kZXIgbGVnaWJseS4gUmV0dXJucyBgZmFsc2VgIGlmIHRoZSBpbnB1dCBzdHJpbmcgY29udGFpbnMgc2VjdGlvbnMgdGhhdCBjYW5ub3QgYmUgcmVuZGVyZWQgd2l0aG91dCBwb3RlbnRpYWwgbG9zcyBvZiBtZWFuaW5nIChlLmcuIEluZGljIHNjcmlwdHMgdGhhdCByZXF1aXJlIGNvbXBsZXggdGV4dCBzaGFwaW5nLCBvciByaWdodC10by1sZWZ0IHNjcmlwdHMgaWYgdGhlIHRoZSBgbWFwYm94LWdsLXJ0bC10ZXh0YCBwbHVnaW4gaXMgbm90IGluIHVzZSBpbiBNYXBib3ggR0wgSlMpLiIsZ3JvdXA6IlN0cmluZyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjYuMCJ9fX0sdXBjYXNlOntkb2M6IlJldHVybnMgdGhlIGlucHV0IHN0cmluZyBjb252ZXJ0ZWQgdG8gdXBwZXJjYXNlLiBGb2xsb3dzIHRoZSBVbmljb2RlIERlZmF1bHQgQ2FzZSBDb252ZXJzaW9uIGFsZ29yaXRobSBhbmQgdGhlIGxvY2FsZS1pbnNlbnNpdGl2ZSBjYXNlIG1hcHBpbmdzIGluIHRoZSBVbmljb2RlIENoYXJhY3RlciBEYXRhYmFzZS4iLGdyb3VwOiJTdHJpbmciLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sZG93bmNhc2U6e2RvYzoiUmV0dXJucyB0aGUgaW5wdXQgc3RyaW5nIGNvbnZlcnRlZCB0byBsb3dlcmNhc2UuIEZvbGxvd3MgdGhlIFVuaWNvZGUgRGVmYXVsdCBDYXNlIENvbnZlcnNpb24gYWxnb3JpdGhtIGFuZCB0aGUgbG9jYWxlLWluc2Vuc2l0aXZlIGNhc2UgbWFwcGluZ3MgaW4gdGhlIFVuaWNvZGUgQ2hhcmFjdGVyIERhdGFiYXNlLiIsZ3JvdXA6IlN0cmluZyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxjb25jYXQ6e2RvYzoiUmV0dXJucyBhIGBzdHJpbmdgIGNvbnNpc3Rpbmcgb2YgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlIGlucHV0cy4gRWFjaCBpbnB1dCBpcyBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgYXMgaWYgYnkgYHRvLXN0cmluZ2AuIixncm91cDoiU3RyaW5nIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LCJyZXNvbHZlZC1sb2NhbGUiOntkb2M6IlJldHVybnMgdGhlIElFVEYgbGFuZ3VhZ2UgdGFnIG9mIHRoZSBsb2NhbGUgYmVpbmcgdXNlZCBieSB0aGUgcHJvdmlkZWQgYGNvbGxhdG9yYC4gVGhpcyBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGRlZmF1bHQgc3lzdGVtIGxvY2FsZSwgb3IgdG8gZGV0ZXJtaW5lIGlmIGEgcmVxdWVzdGVkIGxvY2FsZSB3YXMgc3VjY2Vzc2Z1bGx5IGxvYWRlZC4iLGdyb3VwOiJTdHJpbmciLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi41LjAiLGlvczoiNC4yLjAiLG1hY29zOiIwLjkuMCJ9fX19fSxmb2c6e3JhbmdlOnt0eXBlOiJhcnJheSIsZGVmYXVsdDpbLjUsMTBdLG1pbmltdW06LTIwLG1heGltdW06MjAsbGVuZ3RoOjIsdmFsdWU6Im51bWJlciIsInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50Iix0cmFuc2l0aW9uOiEwLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSxkb2M6IlRoZSBzdGFydCBhbmQgZW5kIGRpc3RhbmNlIHJhbmdlIGluIHdoaWNoIGZvZyBmYWRlcyBmcm9tIGZ1bGx5IHRyYW5zcGFyZW50IHRvIGZ1bGx5IG9wYXF1ZS4gVGhlIGRpc3RhbmNlIHRvIHRoZSBwb2ludCBhdCB0aGUgY2VudGVyIG9mIHRoZSBtYXAgaXMgZGVmaW5lZCBhcyB6ZXJvLCBzbyB0aGF0IG5lZ2F0aXZlIHJhbmdlIHZhbHVlcyBhcmUgY2xvc2VyIHRvIHRoZSBjYW1lcmEsIGFuZCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIGZhcnRoZXIgYXdheS4iLGV4YW1wbGU6Wy41LDEwXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIyLjMuMCIsYW5kcm9pZDoiMTAuNi4wIixpb3M6IjEwLjYuMCJ9fX0sY29sb3I6e3R5cGU6ImNvbG9yIiwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLGRlZmF1bHQ6IiNmZmZmZmYiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSx0cmFuc2l0aW9uOiEwLGRvYzoiVGhlIGNvbG9yIG9mIHRoZSBhdG1vc3BoZXJlIHJlZ2lvbiBpbW1lZGlhdGVseSBiZWxvdyB0aGUgaG9yaXpvbiBhbmQgd2l0aGluIHRoZSBgcmFuZ2VgIGFuZCBhYm92ZSB0aGUgaG9yaXpvbiBhbmQgd2l0aGluIGBob3Jpem9uLWJsZW5kYC4gVXNpbmcgb3BhY2l0eSBpcyByZWNvbW1lbmRlZCBvbmx5IGZvciBzbW9vdGhseSB0cmFuc2l0aW9uaW5nIGZvZyBvbi9vZmYgYXMgYW55dGhpbmcgbGVzcyB0aGFuIDEwMCUgb3BhY2l0eSByZXN1bHRzIGluIG1vcmUgdGlsZXMgbG9hZGVkIGFuZCBkcmF3bi4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjIuMy4wIixhbmRyb2lkOiIxMC42LjAiLGlvczoiMTAuNi4wIn19fSwiaGlnaC1jb2xvciI6e3R5cGU6ImNvbG9yIiwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLGRlZmF1bHQ6IiMyNDVjZGYiLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSx0cmFuc2l0aW9uOiEwLGRvYzoiVGhlIGNvbG9yIG9mIHRoZSBhdG1vc3BoZXJlIHJlZ2lvbiBhYm92ZSB0aGUgaG9yaXpvbiwgYGhpZ2gtY29sb3JgIGV4dGVuZHMgZnVydGhlciBhYm92ZSB0aGUgaG9yaXpvbiB0aGFuIHRoZSBgY29sb3JgIHByb3BlcnR5IGFuZCBpdHMgc3ByZWFkIGNhbiBiZSBjb250cm9sbGVkIHdpdGggYGhvcml6b24tYmxlbmRgLiBUaGUgb3BhY2l0eSBjYW4gYmUgc2V0IHRvIGAwYCB0byByZW1vdmUgdGhlIGhpZ2ggYXRtb3NwaGVyZSBjb2xvciBjb250cmlidXRpb24uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIyLjkuMCIsYW5kcm9pZDoiMTAuNi4wIixpb3M6IjEwLjYuMCJ9fX0sInNwYWNlLWNvbG9yIjp7dHlwZToiY29sb3IiLCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCIsZGVmYXVsdDpbImludGVycG9sYXRlIixbImxpbmVhciJdLFsiem9vbSJdLDQsIiMwMTBiMTkiLDcsIiMzNjdhYjkiXSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sdHJhbnNpdGlvbjohMCxkb2M6IlRoZSBjb2xvciBvZiB0aGUgcmVnaW9uIGFib3ZlIHRoZSBob3Jpem9uIGFuZCBhZnRlciB0aGUgZW5kIG9mIHRoZSBgaG9yaXpvbi1ibGVuZGAgY29udHJpYnV0aW9uLiBUaGUgb3BhY2l0eSBjYW4gYmUgc2V0IHRvIGAwYCB0byBoYXZlIGEgdHJhbnNwYXJlbnQgYmFja2dyb3VuZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjIuOS4wIixhbmRyb2lkOiIxMC42LjAiLGlvczoiMTAuNi4wIn19fSwiaG9yaXpvbi1ibGVuZCI6e3R5cGU6Im51bWJlciIsInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50IixkZWZhdWx0OlsiaW50ZXJwb2xhdGUiLFsibGluZWFyIl0sWyJ6b29tIl0sNCwuMiw3LC4xXSxtaW5pbXVtOjAsbWF4aW11bToxLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSx0cmFuc2l0aW9uOiEwLGRvYzoiSG9yaXpvbiBibGVuZCBhcHBsaWVzIGEgc21vb3RoIGZhZGUgZnJvbSB0aGUgY29sb3Igb2YgdGhlIGF0bW9zcGhlcmUgdG8gdGhlIGNvbG9yIG9mIHNwYWNlLiBBIHZhbHVlIG9mIHplcm8gbGVhdmVzIGEgc2hhcnAgdHJhbnNpdGlvbiBmcm9tIGF0bW9zcGhlcmUgdG8gc3BhY2UuIEluY3JlYXNpbmcgdGhlIHZhbHVlIGJsZW5kcyB0aGUgY29sb3Igb2YgYXRtb3NwaGVyZSBpbnRvIGluY3JlYXNpbmdseSBoaWdoIGFuZ2xlcyBvZiB0aGUgc2t5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4zLjAiLGFuZHJvaWQ6IjEwLjYuMCIsaW9zOiIxMC42LjAifX19LCJzdGFyLWludGVuc2l0eSI6e3R5cGU6Im51bWJlciIsInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50IixkZWZhdWx0OlsiaW50ZXJwb2xhdGUiLFsibGluZWFyIl0sWyJ6b29tIl0sNSwuMzUsNiwwXSxtaW5pbXVtOjAsbWF4aW11bToxLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSx0cmFuc2l0aW9uOiEwLGRvYzoiQSB2YWx1ZSBjb250cm9sbGluZyB0aGUgc3RhciBpbnRlbnNpdHkgd2hlcmUgYDBgIHdpbGwgc2hvdyBubyBzdGFycyBhbmQgYDFgIHdpbGwgc2hvdyBzdGFycyBhdCB0aGVpciBtYXhpbXVtIGludGVuc2l0eS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjIuOS4wIixhbmRyb2lkOiIxMC42LjAiLGlvczoiMTAuNi4wIn19fX0sbGlnaHQ6e2FuY2hvcjp7dHlwZToiZW51bSIsZGVmYXVsdDoidmlld3BvcnQiLHZhbHVlczp7bWFwOntkb2M6IlRoZSBwb3NpdGlvbiBvZiB0aGUgbGlnaHQgc291cmNlIGlzIGFsaWduZWQgdG8gdGhlIHJvdGF0aW9uIG9mIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIHBvc2l0aW9uIG9mIHRoZSBsaWdodCBzb3VyY2UgaXMgYWxpZ25lZCB0byB0aGUgcm90YXRpb24gb2YgdGhlIHZpZXdwb3J0LiJ9fSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLHRyYW5zaXRpb246ITEsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LGRvYzoiV2hldGhlciBleHRydWRlZCBnZW9tZXRyaWVzIGFyZSBsaXQgcmVsYXRpdmUgdG8gdGhlIG1hcCBvciB2aWV3cG9ydC4iLGV4YW1wbGU6Im1hcCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19fSxwb3NpdGlvbjp7dHlwZToiYXJyYXkiLGRlZmF1bHQ6WzEuMTUsMjEwLDMwXSxsZW5ndGg6Myx2YWx1ZToibnVtYmVyIiwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LGRvYzoiUG9zaXRpb24gb2YgdGhlIGxpZ2h0IHNvdXJjZSByZWxhdGl2ZSB0byBsaXQgKGV4dHJ1ZGVkKSBnZW9tZXRyaWVzLCBpbiBbciByYWRpYWwgY29vcmRpbmF0ZSwgYSBhemltdXRoYWwgYW5nbGUsIHAgcG9sYXIgYW5nbGVdIHdoZXJlIHIgaW5kaWNhdGVzIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIGJhc2Ugb2YgYW4gb2JqZWN0IHRvIGl0cyBsaWdodCwgYSBpbmRpY2F0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaWdodCByZWxhdGl2ZSB0byAwwrAgKDDCsCB3aGVuIGBsaWdodC5hbmNob3JgIGlzIHNldCB0byBgdmlld3BvcnRgIGNvcnJlc3BvbmRzIHRvIHRoZSB0b3Agb2YgdGhlIHZpZXdwb3J0LCBvciAwwrAgd2hlbiBgbGlnaHQuYW5jaG9yYCBpcyBzZXQgdG8gYG1hcGAgY29ycmVzcG9uZHMgdG8gZHVlIG5vcnRoLCBhbmQgZGVncmVlcyBwcm9jZWVkIGNsb2Nrd2lzZSksIGFuZCBwIGluZGljYXRlcyB0aGUgaGVpZ2h0IG9mIHRoZSBsaWdodCAoZnJvbSAwwrAsIGRpcmVjdGx5IGFib3ZlLCB0byAxODDCsCwgZGlyZWN0bHkgYmVsb3cpLiIsZXhhbXBsZTpbMS41LDkwLDgwXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX19LGNvbG9yOnt0eXBlOiJjb2xvciIsInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50IixkZWZhdWx0OiIjZmZmZmZmIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sdHJhbnNpdGlvbjohMCxkb2M6IkNvbG9yIHRpbnQgZm9yIGxpZ2h0aW5nIGV4dHJ1ZGVkIGdlb21ldHJpZXMuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX19LGludGVuc2l0eTp7dHlwZToibnVtYmVyIiwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLGRlZmF1bHQ6LjUsbWluaW11bTowLG1heGltdW06MSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sdHJhbnNpdGlvbjohMCxkb2M6IkludGVuc2l0eSBvZiBsaWdodGluZyAob24gYSBzY2FsZSBmcm9tIDAgdG8gMSkuIEhpZ2hlciBudW1iZXJzIHdpbGwgcHJlc2VudCBhcyBtb3JlIGV4dHJlbWUgY29udHJhc3QuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX19fSxwcm9qZWN0aW9uOntuYW1lOnt0eXBlOiJlbnVtIix2YWx1ZXM6e2FsYmVyczp7ZG9jOiJBbiBBbGJlcnMgZXF1YWwtYXJlYSBwcm9qZWN0aW9uIGNlbnRlcmVkIG9uIHRoZSBjb250aW5lbnRhbCBVbml0ZWQgU3RhdGVzLiBZb3UgY2FuIGNvbmZpZ3VyZSB0aGUgcHJvamVjdGlvbiBmb3IgYSBkaWZmZXJlbnQgcmVnaW9uIGJ5IHNldHRpbmcgYGNlbnRlcmAgYW5kIGBwYXJhbGxlbHNgIHByb3BlcnRpZXMuIFlvdSBtYXkgd2FudCB0byBzZXQgbWF4IGJvdW5kcyB0byBjb25zdHJhaW4gdGhlIG1hcCB0byB0aGUgcmVsZXZhbnQgcmVnaW9uLiJ9LGVxdWFsRWFydGg6e2RvYzoiQW4gRXF1YWwgRWFydGggcHJvamVjdGlvbi4ifSxlcXVpcmVjdGFuZ3VsYXI6e2RvYzoiQW4gRXF1aXJlY3Rhbmd1bGFyIHByb2plY3Rpb24uIFRoaXMgcHJvamVjdGlvbiBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhlIFBsYXRlIENhcnLDqWUgcHJvamVjdGlvbi4ifSxsYW1iZXJ0Q29uZm9ybWFsQ29uaWM6e2RvYzoiQSBMYW1iZXJ0IGNvbmZvcm1hbCBjb25pYyBwcm9qZWN0aW9uLiBZb3UgY2FuIGNvbmZpZ3VyZSB0aGUgcHJvamVjdGlvbiBmb3IgYSByZWdpb24gYnkgc2V0dGluZyBgY2VudGVyYCBhbmQgYHBhcmFsbGVsc2AgcHJvcGVydGllcy4gWW91IG1heSB3YW50IHRvIHNldCBtYXggYm91bmRzIHRvIGNvbnN0cmFpbiB0aGUgbWFwIHRvIHRoZSByZWxldmFudCByZWdpb24uIn0sbWVyY2F0b3I6e2RvYzoiVGhlIE1lcmNhdG9yIHByb2plY3Rpb24gaXMgdGhlIGRlZmF1bHQgcHJvamVjdGlvbi4ifSxuYXR1cmFsRWFydGg6e2RvYzoiQSBOYXR1cmFsIEVhcnRoIHByb2plY3Rpb24uIn0sd2lua2VsVHJpcGVsOntkb2M6IkEgV2lua2VsIFRyaXBlbCBwcm9qZWN0aW9uLiJ9LGdsb2JlOntkb2M6IkEgZ2xvYmUgcHJvamVjdGlvbi4ifX0sZGVmYXVsdDoibWVyY2F0b3IiLGRvYzoiVGhlIG5hbWUgb2YgdGhlIHByb2plY3Rpb24gdG8gYmUgdXNlZCBmb3IgcmVuZGVyaW5nIHRoZSBtYXAuIixyZXF1aXJlZDohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIyLjYuMCJ9fX0sY2VudGVyOnt0eXBlOiJhcnJheSIsbGVuZ3RoOjIsdmFsdWU6Im51bWJlciIsInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50IixtaW5pbXVtOlstMTgwLC05MF0sbWF4aW11bTpbMTgwLDkwXSx0cmFuc2l0aW9uOiExLGRvYzoiVGhlIHJlZmVyZW5jZSBsb25naXR1ZGUgYW5kIGxhdGl0dWRlIG9mIHRoZSBwcm9qZWN0aW9uLiBgY2VudGVyYCB0YWtlcyB0aGUgZm9ybSBvZiBbbG5nLCBsYXRdLiBUaGlzIHByb3BlcnR5IGlzIG9ubHkgY29uZmlndXJhYmxlIGZvciBjb25pYyBwcm9qZWN0aW9ucyAoQWxiZXJzIGFuZCBMYW1iZXJ0IENvbmZvcm1hbCBDb25pYykuIEFsbCBvdGhlciBwcm9qZWN0aW9ucyBhcmUgY2VudGVyZWQgb24gWzAsIDBdLiIsZXhhbXBsZTpbLTk2LDM3LjVdLHJlcXVpcmVzOlt7bmFtZTpbImFsYmVycyIsImxhbWJlcnRDb25mb3JtYWxDb25pYyJdfV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi42LjAifX19LHBhcmFsbGVsczp7dHlwZToiYXJyYXkiLGxlbmd0aDoyLHZhbHVlOiJudW1iZXIiLCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCIsbWluaW11bTpbLTkwLC05MF0sbWF4aW11bTpbOTAsOTBdLHRyYW5zaXRpb246ITEsZG9jOiJUaGUgc3RhbmRhcmQgcGFyYWxsZWxzIG9mIHRoZSBwcm9qZWN0aW9uLCBkZW5vdGluZyB0aGUgZGVzaXJlZCBsYXRpdHVkZSByYW5nZSB3aXRoIG1pbmltYWwgZGlzdG9ydGlvbi4gYHBhcmFsbGVsc2AgdGFrZXMgdGhlIGZvcm0gb2YgW2xhdDAsIGxhdDFdLiBUaGlzIHByb3BlcnR5IGlzIG9ubHkgY29uZmlndXJhYmxlIGZvciBjb25pYyBwcm9qZWN0aW9ucyAoQWxiZXJzIGFuZCBMYW1iZXJ0IENvbmZvcm1hbCBDb25pYykuIixleGFtcGxlOlsyOS41LDQ1LjVdLHJlcXVpcmVzOlt7bmFtZTpbImFsYmVycyIsImxhbWJlcnRDb25mb3JtYWxDb25pYyJdfV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi42LjAifX19fSx0ZXJyYWluOntzb3VyY2U6e3R5cGU6InN0cmluZyIsZG9jOiJOYW1lIG9mIGEgc291cmNlIG9mIGByYXN0ZXJfZGVtYCB0eXBlIHRvIGJlIHVzZWQgZm9yIHRlcnJhaW4gZWxldmF0aW9uLiIscmVxdWlyZWQ6ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifX19LGV4YWdnZXJhdGlvbjp7dHlwZToibnVtYmVyIiwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxZTMsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LHRyYW5zaXRpb246ITAsZG9jOiJFeGFnZ2VyYXRlcyB0aGUgZWxldmF0aW9uIG9mIHRoZSB0ZXJyYWluIGJ5IG11bHRpcGx5aW5nIHRoZSBkYXRhIGZyb20gdGhlIERFTSB3aXRoIHRoaXMgdmFsdWUuIixyZXF1aXJlczpbInNvdXJjZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjIuMC4wIixpb3M6IjEwLjAuMCIsYW5kcm9pZDoiMTAuMC4wIn19fX0scGFpbnQ6WyJwYWludF9maWxsIiwicGFpbnRfbGluZSIsInBhaW50X2NpcmNsZSIsInBhaW50X2hlYXRtYXAiLCJwYWludF9maWxsLWV4dHJ1c2lvbiIsInBhaW50X3N5bWJvbCIsInBhaW50X3Jhc3RlciIsInBhaW50X2hpbGxzaGFkZSIsInBhaW50X2JhY2tncm91bmQiLCJwYWludF9za3kiXSxwYWludF9maWxsOnsiZmlsbC1hbnRpYWxpYXMiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiEwLGRvYzoiV2hldGhlciBvciBub3QgdGhlIGZpbGwgc2hvdWxkIGJlIGFudGlhbGlhc2VkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiZmlsbC1vcGFjaXR5Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSxkb2M6IlRoZSBvcGFjaXR5IG9mIHRoZSBlbnRpcmUgZmlsbCBsYXllci4gSW4gY29udHJhc3QgdG8gdGhlIGBmaWxsLWNvbG9yYCwgdGhpcyB2YWx1ZSB3aWxsIGFsc28gYWZmZWN0IHRoZSAxcHggc3Ryb2tlIGFyb3VuZCB0aGUgZmlsbCwgaWYgdGhlIHN0cm9rZSBpcyB1c2VkLiIsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjIxLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJmaWxsLWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6IiMwMDAwMDAiLGRvYzoiVGhlIGNvbG9yIG9mIHRoZSBmaWxsZWQgcGFydCBvZiB0aGlzIGxheWVyLiBUaGlzIGNvbG9yIGNhbiBiZSBzcGVjaWZpZWQgYXMgYHJnYmFgIHdpdGggYW4gYWxwaGEgY29tcG9uZW50IGFuZCB0aGUgY29sb3IncyBvcGFjaXR5IHdpbGwgbm90IGFmZmVjdCB0aGUgb3BhY2l0eSBvZiB0aGUgMXB4IHN0cm9rZSwgaWYgaXQgaXMgdXNlZC4iLHRyYW5zaXRpb246ITAscmVxdWlyZXM6W3siISI6ImZpbGwtcGF0dGVybiJ9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjE5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJmaWxsLW91dGxpbmUtY29sb3IiOnt0eXBlOiJjb2xvciIsZG9jOiJUaGUgb3V0bGluZSBjb2xvciBvZiB0aGUgZmlsbC4gTWF0Y2hlcyB0aGUgdmFsdWUgb2YgYGZpbGwtY29sb3JgIGlmIHVuc3BlY2lmaWVkLiIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbeyIhIjoiZmlsbC1wYXR0ZXJuIn0seyJmaWxsLWFudGlhbGlhcyI6ITB9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjE5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJmaWxsLXRyYW5zbGF0ZSI6e3R5cGU6ImFycmF5Iix2YWx1ZToibnVtYmVyIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJUaGUgZ2VvbWV0cnkncyBvZmZzZXQuIFZhbHVlcyBhcmUgW3gsIHldIHdoZXJlIG5lZ2F0aXZlcyBpbmRpY2F0ZSBsZWZ0IGFuZCB1cCwgcmVzcGVjdGl2ZWx5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiZmlsbC10cmFuc2xhdGUtYW5jaG9yIjp7dHlwZToiZW51bSIsdmFsdWVzOnttYXA6e2RvYzoiVGhlIGZpbGwgaXMgdHJhbnNsYXRlZCByZWxhdGl2ZSB0byB0aGUgbWFwLiJ9LHZpZXdwb3J0Ontkb2M6IlRoZSBmaWxsIGlzIHRyYW5zbGF0ZWQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LiJ9fSxkb2M6IkNvbnRyb2xzIHRoZSBmcmFtZSBvZiByZWZlcmVuY2UgZm9yIGBmaWxsLXRyYW5zbGF0ZWAuIixkZWZhdWx0OiJtYXAiLHJlcXVpcmVzOlsiZmlsbC10cmFuc2xhdGUiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJmaWxsLXBhdHRlcm4iOnt0eXBlOiJyZXNvbHZlZEltYWdlIix0cmFuc2l0aW9uOiEwLGRvYzoiTmFtZSBvZiBpbWFnZSBpbiBzcHJpdGUgdG8gdXNlIGZvciBkcmF3aW5nIGltYWdlIGZpbGxzLiBGb3Igc2VhbWxlc3MgcGF0dGVybnMsIGltYWdlIHdpZHRoIGFuZCBoZWlnaHQgbXVzdCBiZSBhIGZhY3RvciBvZiB0d28gKDIsIDQsIDgsIC4uLiwgNTEyKS4gTm90ZSB0aGF0IHpvb20tZGVwZW5kZW50IGV4cHJlc3Npb25zIHdpbGwgYmUgZXZhbHVhdGVkIG9ubHkgYXQgaW50ZWdlciB6b29tIGxldmVscy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuNDkuMCIsYW5kcm9pZDoiNi41LjAiLG1hY29zOiIwLjExLjAiLGlvczoiNC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImNyb3NzLWZhZGVkLWRhdGEtZHJpdmVuIn19LCJwYWludF9maWxsLWV4dHJ1c2lvbiI6eyJmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSxkb2M6IlRoZSBvcGFjaXR5IG9mIHRoZSBlbnRpcmUgZmlsbCBleHRydXNpb24gbGF5ZXIuIFRoaXMgaXMgcmVuZGVyZWQgb24gYSBwZXItbGF5ZXIsIG5vdCBwZXItZmVhdHVyZSwgYmFzaXMsIGFuZCBkYXRhLWRyaXZlbiBzdHlsaW5nIGlzIG5vdCBhdmFpbGFibGUuIix0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjcuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImZpbGwtZXh0cnVzaW9uLWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6IiMwMDAwMDAiLGRvYzoiVGhlIGJhc2UgY29sb3Igb2YgdGhlIGV4dHJ1ZGVkIGZpbGwuIFRoZSBleHRydXNpb24ncyBzdXJmYWNlcyB3aWxsIGJlIHNoYWRlZCBkaWZmZXJlbnRseSBiYXNlZCBvbiB0aGlzIGNvbG9yIGluIGNvbWJpbmF0aW9uIHdpdGggdGhlIHJvb3QgYGxpZ2h0YCBzZXR0aW5ncy4gSWYgdGhpcyBjb2xvciBpcyBzcGVjaWZpZWQgYXMgYHJnYmFgIHdpdGggYW4gYWxwaGEgY29tcG9uZW50LCB0aGUgYWxwaGEgY29tcG9uZW50IHdpbGwgYmUgaWdub3JlZDsgdXNlIGBmaWxsLWV4dHJ1c2lvbi1vcGFjaXR5YCB0byBzZXQgbGF5ZXIgb3BhY2l0eS4iLHRyYW5zaXRpb246ITAscmVxdWlyZXM6W3siISI6ImZpbGwtZXh0cnVzaW9uLXBhdHRlcm4ifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlIjp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGxlbmd0aDoyLGRlZmF1bHQ6WzAsMF0sdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IlRoZSBnZW9tZXRyeSdzIG9mZnNldC4gVmFsdWVzIGFyZSBbeCwgeV0gd2hlcmUgbmVnYXRpdmVzIGluZGljYXRlIGxlZnQgYW5kIHVwIChvbiB0aGUgZmxhdCBwbGFuZSksIHJlc3BlY3RpdmVseS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjcuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZS1hbmNob3IiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgZmlsbCBleHRydXNpb24gaXMgdHJhbnNsYXRlZCByZWxhdGl2ZSB0byB0aGUgbWFwLiJ9LHZpZXdwb3J0Ontkb2M6IlRoZSBmaWxsIGV4dHJ1c2lvbiBpcyB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC4ifX0sZG9jOiJDb250cm9scyB0aGUgZnJhbWUgb2YgcmVmZXJlbmNlIGZvciBgZmlsbC1leHRydXNpb24tdHJhbnNsYXRlYC4iLGRlZmF1bHQ6Im1hcCIscmVxdWlyZXM6WyJmaWxsLWV4dHJ1c2lvbi10cmFuc2xhdGUiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuIjp7dHlwZToicmVzb2x2ZWRJbWFnZSIsdHJhbnNpdGlvbjohMCxkb2M6Ik5hbWUgb2YgaW1hZ2UgaW4gc3ByaXRlIHRvIHVzZSBmb3IgZHJhd2luZyBpbWFnZXMgb24gZXh0cnVkZWQgZmlsbHMuIEZvciBzZWFtbGVzcyBwYXR0ZXJucywgaW1hZ2Ugd2lkdGggYW5kIGhlaWdodCBtdXN0IGJlIGEgZmFjdG9yIG9mIHR3byAoMiwgNCwgOCwgLi4uLCA1MTIpLiBOb3RlIHRoYXQgem9vbS1kZXBlbmRlbnQgZXhwcmVzc2lvbnMgd2lsbCBiZSBldmFsdWF0ZWQgb25seSBhdCBpbnRlZ2VyIHpvb20gbGV2ZWxzLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC40OS4wIixhbmRyb2lkOiI2LjUuMCIsbWFjb3M6IjAuMTEuMCIsaW9zOiI0LjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiY3Jvc3MtZmFkZWQtZGF0YS1kcml2ZW4ifSwiZmlsbC1leHRydXNpb24taGVpZ2h0Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsbWluaW11bTowLHVuaXRzOiJtZXRlcnMiLGRvYzoiVGhlIGhlaWdodCB3aXRoIHdoaWNoIHRvIGV4dHJ1ZGUgdGhpcyBsYXllci4iLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiZmlsbC1leHRydXNpb24tYmFzZSI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLG1pbmltdW06MCx1bml0czoibWV0ZXJzIixkb2M6IlRoZSBoZWlnaHQgd2l0aCB3aGljaCB0byBleHRydWRlIHRoZSBiYXNlIG9mIHRoaXMgbGF5ZXIuIE11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBmaWxsLWV4dHJ1c2lvbi1oZWlnaHRgLiIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbImZpbGwtZXh0cnVzaW9uLWhlaWdodCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjcuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjcuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImZpbGwtZXh0cnVzaW9uLXZlcnRpY2FsLWdyYWRpZW50Ijp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMCxkb2M6IldoZXRoZXIgdG8gYXBwbHkgYSB2ZXJ0aWNhbCBncmFkaWVudCB0byB0aGUgc2lkZXMgb2YgYSBmaWxsLWV4dHJ1c2lvbiBsYXllci4gSWYgdHJ1ZSwgc2lkZXMgd2lsbCBiZSBzaGFkZWQgc2xpZ2h0bHkgZGFya2VyIGZhcnRoZXIgZG93bi4iLHRyYW5zaXRpb246ITEsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC41MC4wIixhbmRyb2lkOiI3LjAuMCIsaW9zOiI0LjcuMCIsbWFjb3M6IjAuMTMuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In19LHBhaW50X2xpbmU6eyJsaW5lLW9wYWNpdHkiOnt0eXBlOiJudW1iZXIiLGRvYzoiVGhlIG9wYWNpdHkgYXQgd2hpY2ggdGhlIGxpbmUgd2lsbCBiZSBkcmF3bi4iLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yOS4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwibGluZS1jb2xvciI6e3R5cGU6ImNvbG9yIixkb2M6IlRoZSBjb2xvciB3aXRoIHdoaWNoIHRoZSBsaW5lIHdpbGwgYmUgZHJhd24uIixkZWZhdWx0OiIjMDAwMDAwIix0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOlt7IiEiOiJsaW5lLXBhdHRlcm4ifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwibGluZS10cmFuc2xhdGUiOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjIsZGVmYXVsdDpbMCwwXSx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiVGhlIGdlb21ldHJ5J3Mgb2Zmc2V0LiBWYWx1ZXMgYXJlIFt4LCB5XSB3aGVyZSBuZWdhdGl2ZXMgaW5kaWNhdGUgbGVmdCBhbmQgdXAsIHJlc3BlY3RpdmVseS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImxpbmUtdHJhbnNsYXRlLWFuY2hvciI6e3R5cGU6ImVudW0iLHZhbHVlczp7bWFwOntkb2M6IlRoZSBsaW5lIGlzIHRyYW5zbGF0ZWQgcmVsYXRpdmUgdG8gdGhlIG1hcC4ifSx2aWV3cG9ydDp7ZG9jOiJUaGUgbGluZSBpcyB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC4ifX0sZG9jOiJDb250cm9scyB0aGUgZnJhbWUgb2YgcmVmZXJlbmNlIGZvciBgbGluZS10cmFuc2xhdGVgLiIsZGVmYXVsdDoibWFwIixyZXF1aXJlczpbImxpbmUtdHJhbnNsYXRlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwibGluZS13aWR0aCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiU3Ryb2tlIHRoaWNrbmVzcy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzkuMCIsYW5kcm9pZDoiNS4yLjAiLGlvczoiMy43LjAiLG1hY29zOiIwLjYuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImxpbmUtZ2FwLXdpZHRoIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsbWluaW11bTowLGRvYzoiRHJhd3MgYSBsaW5lIGNhc2luZyBvdXRzaWRlIG9mIGEgbGluZSdzIGFjdHVhbCBwYXRoLiBWYWx1ZSBpbmRpY2F0ZXMgdGhlIHdpZHRoIG9mIHRoZSBpbm5lciBnYXAuIix0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImxpbmUtb2Zmc2V0Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsZG9jOiJUaGUgbGluZSdzIG9mZnNldC4gRm9yIGxpbmVhciBmZWF0dXJlcywgYSBwb3NpdGl2ZSB2YWx1ZSBvZmZzZXRzIHRoZSBsaW5lIHRvIHRoZSByaWdodCwgcmVsYXRpdmUgdG8gdGhlIGRpcmVjdGlvbiBvZiB0aGUgbGluZSwgYW5kIGEgbmVnYXRpdmUgdmFsdWUgdG8gdGhlIGxlZnQuIEZvciBwb2x5Z29uIGZlYXR1cmVzLCBhIHBvc2l0aXZlIHZhbHVlIHJlc3VsdHMgaW4gYW4gaW5zZXQsIGFuZCBhIG5lZ2F0aXZlIHZhbHVlIHJlc3VsdHMgaW4gYW4gb3V0c2V0LiIsdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEyLjEiLGFuZHJvaWQ6IjMuMC4wIixpb3M6IjMuMS4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJsaW5lLWJsdXIiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IkJsdXIgYXBwbGllZCB0byB0aGUgbGluZSwgaW4gcGl4ZWxzLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yOS4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwibGluZS1kYXNoYXJyYXkiOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsZG9jOiJTcGVjaWZpZXMgdGhlIGxlbmd0aHMgb2YgdGhlIGFsdGVybmF0aW5nIGRhc2hlcyBhbmQgZ2FwcyB0aGF0IGZvcm0gdGhlIGRhc2ggcGF0dGVybi4gVGhlIGxlbmd0aHMgYXJlIGxhdGVyIHNjYWxlZCBieSB0aGUgbGluZSB3aWR0aC4gVG8gY29udmVydCBhIGRhc2ggbGVuZ3RoIHRvIHBpeGVscywgbXVsdGlwbHkgdGhlIGxlbmd0aCBieSB0aGUgY3VycmVudCBsaW5lIHdpZHRoLiBOb3RlIHRoYXQgR2VvSlNPTiBzb3VyY2VzIHdpdGggYGxpbmVNZXRyaWNzOiB0cnVlYCBzcGVjaWZpZWQgd29uJ3QgcmVuZGVyIGRhc2hlZCBsaW5lcyB0byB0aGUgZXhwZWN0ZWQgc2NhbGUuIEFsc28gbm90ZSB0aGF0IHpvb20tZGVwZW5kZW50IGV4cHJlc3Npb25zIHdpbGwgYmUgZXZhbHVhdGVkIG9ubHkgYXQgaW50ZWdlciB6b29tIGxldmVscy4iLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOiJsaW5lIHdpZHRocyIscmVxdWlyZXM6W3siISI6ImxpbmUtcGF0dGVybiJ9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIyLjMuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiY3Jvc3MtZmFkZWQtZGF0YS1kcml2ZW4ifSwibGluZS1wYXR0ZXJuIjp7dHlwZToicmVzb2x2ZWRJbWFnZSIsdHJhbnNpdGlvbjohMCxkb2M6Ik5hbWUgb2YgaW1hZ2UgaW4gc3ByaXRlIHRvIHVzZSBmb3IgZHJhd2luZyBpbWFnZSBsaW5lcy4gRm9yIHNlYW1sZXNzIHBhdHRlcm5zLCBpbWFnZSB3aWR0aCBtdXN0IGJlIGEgZmFjdG9yIG9mIHR3byAoMiwgNCwgOCwgLi4uLCA1MTIpLiBOb3RlIHRoYXQgem9vbS1kZXBlbmRlbnQgZXhwcmVzc2lvbnMgd2lsbCBiZSBldmFsdWF0ZWQgb25seSBhdCBpbnRlZ2VyIHpvb20gbGV2ZWxzLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC40OS4wIixhbmRyb2lkOiI2LjUuMCIsbWFjb3M6IjAuMTEuMCIsaW9zOiI0LjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiY3Jvc3MtZmFkZWQtZGF0YS1kcml2ZW4ifSwibGluZS1ncmFkaWVudCI6e3R5cGU6ImNvbG9yIixkb2M6J0RlZmluZXMgYSBncmFkaWVudCB3aXRoIHdoaWNoIHRvIGNvbG9yIGEgbGluZSBmZWF0dXJlLiBDYW4gb25seSBiZSB1c2VkIHdpdGggR2VvSlNPTiBzb3VyY2VzIHRoYXQgc3BlY2lmeSBgImxpbmVNZXRyaWNzIjogdHJ1ZWAuJyx0cmFuc2l0aW9uOiExLHJlcXVpcmVzOlt7IiEiOiJsaW5lLXBhdHRlcm4ifSx7c291cmNlOiJnZW9qc29uIixoYXM6e2xpbmVNZXRyaWNzOiEwfX1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi41LjAiLGlvczoiNC40LjAiLG1hY29zOiIwLjExLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e319LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsibGluZS1wcm9ncmVzcyJdfSwicHJvcGVydHktdHlwZSI6ImNvbG9yLXJhbXAifSwibGluZS10cmltLW9mZnNldCI6e3R5cGU6ImFycmF5Iix2YWx1ZToibnVtYmVyIixkb2M6IlRoZSBsaW5lIHBhcnQgYmV0d2VlbiBbdHJpbS1zdGFydCwgdHJpbS1lbmRdIHdpbGwgYmUgbWFya2VkIGFzIHRyYW5zcGFyZW50IHRvIG1ha2UgYSByb3V0ZSB2YW5pc2hpbmcgZWZmZWN0LiBUaGUgbGluZSB0cmltLW9mZiBvZmZzZXQgaXMgYmFzZWQgb24gdGhlIHdob2xlIGxpbmUgcmFuZ2UgWzAuMCwgMS4wXS4iLGxlbmd0aDoyLGRlZmF1bHQ6WzAsMF0sbWluaW11bTpbMCwwXSxtYXhpbXVtOlsxLDFdLHRyYW5zaXRpb246ITEscmVxdWlyZXM6W3tzb3VyY2U6Imdlb2pzb24iLGhhczp7bGluZU1ldHJpY3M6ITB9fV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi45LjAiLGFuZHJvaWQ6IjEwLjUuMCIsaW9zOiIxMC41LjAiLG1hY29zOiIxMC41LjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSxwYWludF9jaXJjbGU6eyJjaXJjbGUtcmFkaXVzIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjUsbWluaW11bTowLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJDaXJjbGUgcmFkaXVzLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4xOC4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiY2lyY2xlLWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6IiMwMDAwMDAiLGRvYzoiVGhlIGZpbGwgY29sb3Igb2YgdGhlIGNpcmNsZS4iLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4xOC4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiY2lyY2xlLWJsdXIiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxkb2M6IkFtb3VudCB0byBibHVyIHRoZSBjaXJjbGUuIDEgYmx1cnMgdGhlIGNpcmNsZSBzdWNoIHRoYXQgb25seSB0aGUgY2VudGVycG9pbnQgaXMgZnVsbCBvcGFjaXR5LiIsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjIwLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJjaXJjbGUtb3BhY2l0eSI6e3R5cGU6Im51bWJlciIsZG9jOiJUaGUgb3BhY2l0eSBhdCB3aGljaCB0aGUgY2lyY2xlIHdpbGwgYmUgZHJhd24uIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjAuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImNpcmNsZS10cmFuc2xhdGUiOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjIsZGVmYXVsdDpbMCwwXSx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiVGhlIGdlb21ldHJ5J3Mgb2Zmc2V0LiBWYWx1ZXMgYXJlIFt4LCB5XSB3aGVyZSBuZWdhdGl2ZXMgaW5kaWNhdGUgbGVmdCBhbmQgdXAsIHJlc3BlY3RpdmVseS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImNpcmNsZS10cmFuc2xhdGUtYW5jaG9yIjp7dHlwZToiZW51bSIsdmFsdWVzOnttYXA6e2RvYzoiVGhlIGNpcmNsZSBpcyB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIGNpcmNsZSBpcyB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC4ifX0sZG9jOiJDb250cm9scyB0aGUgZnJhbWUgb2YgcmVmZXJlbmNlIGZvciBgY2lyY2xlLXRyYW5zbGF0ZWAuIixkZWZhdWx0OiJtYXAiLHJlcXVpcmVzOlsiY2lyY2xlLXRyYW5zbGF0ZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImNpcmNsZS1waXRjaC1zY2FsZSI6e3R5cGU6ImVudW0iLHZhbHVlczp7bWFwOntkb2M6IkNpcmNsZXMgYXJlIHNjYWxlZCBhY2NvcmRpbmcgdG8gdGhlaXIgYXBwYXJlbnQgZGlzdGFuY2UgdG8gdGhlIGNhbWVyYS4ifSx2aWV3cG9ydDp7ZG9jOiJDaXJjbGVzIGFyZSBub3Qgc2NhbGVkLiJ9fSxkZWZhdWx0OiJtYXAiLGRvYzoiQ29udHJvbHMgdGhlIHNjYWxpbmcgYmVoYXZpb3Igb2YgdGhlIGNpcmNsZSB3aGVuIHRoZSBtYXAgaXMgcGl0Y2hlZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjEuMCIsYW5kcm9pZDoiNC4yLjAiLGlvczoiMy40LjAiLG1hY29zOiIwLjIuMSJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImNpcmNsZS1waXRjaC1hbGlnbm1lbnQiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgY2lyY2xlIGlzIGFsaWduZWQgdG8gdGhlIHBsYW5lIG9mIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIGNpcmNsZSBpcyBhbGlnbmVkIHRvIHRoZSBwbGFuZSBvZiB0aGUgdmlld3BvcnQuIn19LGRlZmF1bHQ6InZpZXdwb3J0Iixkb2M6Ik9yaWVudGF0aW9uIG9mIGNpcmNsZSB3aGVuIG1hcCBpcyBwaXRjaGVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4zOS4wIixhbmRyb2lkOiI1LjIuMCIsaW9zOiIzLjcuMCIsbWFjb3M6IjAuNi4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiY2lyY2xlLXN0cm9rZS13aWR0aCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiVGhlIHdpZHRoIG9mIHRoZSBjaXJjbGUncyBzdHJva2UuIFN0cm9rZXMgYXJlIHBsYWNlZCBvdXRzaWRlIG9mIHRoZSBgY2lyY2xlLXJhZGl1c2AuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJjaXJjbGUtc3Ryb2tlLWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6IiMwMDAwMDAiLGRvYzoiVGhlIHN0cm9rZSBjb2xvciBvZiB0aGUgY2lyY2xlLiIsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJjaXJjbGUtc3Ryb2tlLW9wYWNpdHkiOnt0eXBlOiJudW1iZXIiLGRvYzoiVGhlIG9wYWNpdHkgb2YgdGhlIGNpcmNsZSdzIHN0cm9rZS4iLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yOS4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yOS4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifX0scGFpbnRfaGVhdG1hcDp7ImhlYXRtYXAtcmFkaXVzIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjMwLG1pbmltdW06MSx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiUmFkaXVzIG9mIGluZmx1ZW5jZSBvZiBvbmUgaGVhdG1hcCBwb2ludCBpbiBwaXhlbHMuIEluY3JlYXNpbmcgdGhlIHZhbHVlIG1ha2VzIHRoZSBoZWF0bWFwIHNtb290aGVyLCBidXQgbGVzcyBkZXRhaWxlZC4gYHF1ZXJ5UmVuZGVyZWRGZWF0dXJlc2Agb24gaGVhdG1hcCBsYXllcnMgd2lsbCByZXR1cm4gcG9pbnRzIHdpdGhpbiB0aGlzIHJhZGl1cy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuNDMuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImhlYXRtYXAtd2VpZ2h0Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEsbWluaW11bTowLHRyYW5zaXRpb246ITEsZG9jOiJBIG1lYXN1cmUgb2YgaG93IG11Y2ggYW4gaW5kaXZpZHVhbCBwb2ludCBjb250cmlidXRlcyB0byB0aGUgaGVhdG1hcC4gQSB2YWx1ZSBvZiAxMCB3b3VsZCBiZSBlcXVpdmFsZW50IHRvIGhhdmluZyAxMCBwb2ludHMgb2Ygd2VpZ2h0IDEgaW4gdGhlIHNhbWUgc3BvdC4gRXNwZWNpYWxseSB1c2VmdWwgd2hlbiBjb21iaW5lZCB3aXRoIGNsdXN0ZXJpbmcuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJoZWF0bWFwLWludGVuc2l0eSI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLGRvYzoiU2ltaWxhciB0byBgaGVhdG1hcC13ZWlnaHRgIGJ1dCBjb250cm9scyB0aGUgaW50ZW5zaXR5IG9mIHRoZSBoZWF0bWFwIGdsb2JhbGx5LiBQcmltYXJpbHkgdXNlZCBmb3IgYWRqdXN0aW5nIHRoZSBoZWF0bWFwIGJhc2VkIG9uIHpvb20gbGV2ZWwuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJoZWF0bWFwLWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6WyJpbnRlcnBvbGF0ZSIsWyJsaW5lYXIiXSxbImhlYXRtYXAtZGVuc2l0eSJdLDAsInJnYmEoMCwgMCwgMjU1LCAwKSIsLjEsInJveWFsYmx1ZSIsLjMsImN5YW4iLC41LCJsaW1lIiwuNywieWVsbG93IiwxLCJyZWQiXSxkb2M6J0RlZmluZXMgdGhlIGNvbG9yIG9mIGVhY2ggcGl4ZWwgYmFzZWQgb24gaXRzIGRlbnNpdHkgdmFsdWUgaW4gYSBoZWF0bWFwLiAgU2hvdWxkIGJlIGFuIGV4cHJlc3Npb24gdGhhdCB1c2VzIGBbImhlYXRtYXAtZGVuc2l0eSJdYCBhcyBpbnB1dC4nLHRyYW5zaXRpb246ITEsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOnt9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbImhlYXRtYXAtZGVuc2l0eSJdfSwicHJvcGVydHktdHlwZSI6ImNvbG9yLXJhbXAifSwiaGVhdG1hcC1vcGFjaXR5Ijp7dHlwZToibnVtYmVyIixkb2M6IlRoZSBnbG9iYWwgb3BhY2l0eSBhdCB3aGljaCB0aGUgaGVhdG1hcCBsYXllciB3aWxsIGJlIGRyYXduLiIsZGVmYXVsdDoxLG1pbmltdW06MCxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9fSxwYWludF9zeW1ib2w6eyJpY29uLW9wYWNpdHkiOntkb2M6IlRoZSBvcGFjaXR5IGF0IHdoaWNoIHRoZSBpY29uIHdpbGwgYmUgZHJhd24uIix0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiaWNvbi1jb2xvciI6e3R5cGU6ImNvbG9yIixkZWZhdWx0OiIjMDAwMDAwIix0cmFuc2l0aW9uOiEwLGRvYzoiVGhlIGNvbG9yIG9mIHRoZSBpY29uLiBUaGlzIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCBbU0RGIGljb25zXSgvaGVscC90cm91Ymxlc2hvb3RpbmcvdXNpbmctcmVjb2xvcmFibGUtaW1hZ2VzLWluLW1hcGJveC1tYXBzLykuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjMzLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJpY29uLWhhbG8tY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoicmdiYSgwLCAwLCAwLCAwKSIsdHJhbnNpdGlvbjohMCxkb2M6IlRoZSBjb2xvciBvZiB0aGUgaWNvbidzIGhhbG8uIEljb24gaGFsb3MgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIFtTREYgaWNvbnNdKC9oZWxwL3Ryb3VibGVzaG9vdGluZy91c2luZy1yZWNvbG9yYWJsZS1pbWFnZXMtaW4tbWFwYm94LW1hcHMvKS4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzMuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImljb24taGFsby13aWR0aCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiRGlzdGFuY2Ugb2YgaGFsbyB0byB0aGUgaWNvbiBvdXRsaW5lLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiaWNvbi1oYWxvLWJsdXIiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IkZhZGUgb3V0IHRoZSBoYWxvIHRvd2FyZHMgdGhlIG91dHNpZGUuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjMzLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJpY29uLXRyYW5zbGF0ZSI6e3R5cGU6ImFycmF5Iix2YWx1ZToibnVtYmVyIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJEaXN0YW5jZSB0aGF0IHRoZSBpY29uJ3MgYW5jaG9yIGlzIG1vdmVkIGZyb20gaXRzIG9yaWdpbmFsIHBsYWNlbWVudC4gUG9zaXRpdmUgdmFsdWVzIGluZGljYXRlIHJpZ2h0IGFuZCBkb3duLCB3aGlsZSBuZWdhdGl2ZSB2YWx1ZXMgaW5kaWNhdGUgbGVmdCBhbmQgdXAuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJpY29uLXRyYW5zbGF0ZS1hbmNob3IiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJJY29ucyBhcmUgdHJhbnNsYXRlZCByZWxhdGl2ZSB0byB0aGUgbWFwLiJ9LHZpZXdwb3J0Ontkb2M6Ikljb25zIGFyZSB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC4ifX0sZG9jOiJDb250cm9scyB0aGUgZnJhbWUgb2YgcmVmZXJlbmNlIGZvciBgaWNvbi10cmFuc2xhdGVgLiIsZGVmYXVsdDoibWFwIixyZXF1aXJlczpbImljb24taW1hZ2UiLCJpY29uLXRyYW5zbGF0ZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtb3BhY2l0eSI6e3R5cGU6Im51bWJlciIsZG9jOiJUaGUgb3BhY2l0eSBhdCB3aGljaCB0aGUgdGV4dCB3aWxsIGJlIGRyYXduLiIsZGVmYXVsdDoxLG1pbmltdW06MCxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjMzLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LWNvbG9yIjp7dHlwZToiY29sb3IiLGRvYzoiVGhlIGNvbG9yIHdpdGggd2hpY2ggdGhlIHRleHQgd2lsbCBiZSBkcmF3bi4iLGRlZmF1bHQ6IiMwMDAwMDAiLHRyYW5zaXRpb246ITAsb3ZlcnJpZGFibGU6ITAscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1oYWxvLWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6InJnYmEoMCwgMCwgMCwgMCkiLHRyYW5zaXRpb246ITAsZG9jOiJUaGUgY29sb3Igb2YgdGhlIHRleHQncyBoYWxvLCB3aGljaCBoZWxwcyBpdCBzdGFuZCBvdXQgZnJvbSBiYWNrZ3JvdW5kcy4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzMuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sInRleHQtaGFsby13aWR0aCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiRGlzdGFuY2Ugb2YgaGFsbyB0byB0aGUgZm9udCBvdXRsaW5lLiBNYXggdGV4dCBoYWxvIHdpZHRoIGlzIDEvNCBvZiB0aGUgZm9udC1zaXplLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1oYWxvLWJsdXIiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IlRoZSBoYWxvJ3MgZmFkZW91dCBkaXN0YW5jZSB0b3dhcmRzIHRoZSBvdXRzaWRlLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC10cmFuc2xhdGUiOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjIsZGVmYXVsdDpbMCwwXSx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiRGlzdGFuY2UgdGhhdCB0aGUgdGV4dCdzIGFuY2hvciBpcyBtb3ZlZCBmcm9tIGl0cyBvcmlnaW5hbCBwbGFjZW1lbnQuIFBvc2l0aXZlIHZhbHVlcyBpbmRpY2F0ZSByaWdodCBhbmQgZG93biwgd2hpbGUgbmVnYXRpdmUgdmFsdWVzIGluZGljYXRlIGxlZnQgYW5kIHVwLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC10cmFuc2xhdGUtYW5jaG9yIjp7dHlwZToiZW51bSIsdmFsdWVzOnttYXA6e2RvYzoiVGhlIHRleHQgaXMgdHJhbnNsYXRlZCByZWxhdGl2ZSB0byB0aGUgbWFwLiJ9LHZpZXdwb3J0Ontkb2M6IlRoZSB0ZXh0IGlzIHRyYW5zbGF0ZWQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LiJ9fSxkb2M6IkNvbnRyb2xzIHRoZSBmcmFtZSBvZiByZWZlcmVuY2UgZm9yIGB0ZXh0LXRyYW5zbGF0ZWAuIixkZWZhdWx0OiJtYXAiLHJlcXVpcmVzOlsidGV4dC1maWVsZCIsInRleHQtdHJhbnNsYXRlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifX0scGFpbnRfcmFzdGVyOnsicmFzdGVyLW9wYWNpdHkiOnt0eXBlOiJudW1iZXIiLGRvYzoiVGhlIG9wYWNpdHkgYXQgd2hpY2ggdGhlIGltYWdlIHdpbGwgYmUgZHJhd24uIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInJhc3Rlci1odWUtcm90YXRlIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAscGVyaW9kOjM2MCx0cmFuc2l0aW9uOiEwLHVuaXRzOiJkZWdyZWVzIixkb2M6IlJvdGF0ZXMgaHVlcyBhcm91bmQgdGhlIGNvbG9yIHdoZWVsLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwicmFzdGVyLWJyaWdodG5lc3MtbWluIjp7dHlwZToibnVtYmVyIixkb2M6IkluY3JlYXNlIG9yIHJlZHVjZSB0aGUgYnJpZ2h0bmVzcyBvZiB0aGUgaW1hZ2UuIFRoZSB2YWx1ZSBpcyB0aGUgbWluaW11bSBicmlnaHRuZXNzLiIsZGVmYXVsdDowLG1pbmltdW06MCxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJyYXN0ZXItYnJpZ2h0bmVzcy1tYXgiOnt0eXBlOiJudW1iZXIiLGRvYzoiSW5jcmVhc2Ugb3IgcmVkdWNlIHRoZSBicmlnaHRuZXNzIG9mIHRoZSBpbWFnZS4gVGhlIHZhbHVlIGlzIHRoZSBtYXhpbXVtIGJyaWdodG5lc3MuIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInJhc3Rlci1zYXR1cmF0aW9uIjp7dHlwZToibnVtYmVyIixkb2M6IkluY3JlYXNlIG9yIHJlZHVjZSB0aGUgc2F0dXJhdGlvbiBvZiB0aGUgaW1hZ2UuIixkZWZhdWx0OjAsbWluaW11bTotMSxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJyYXN0ZXItY29udHJhc3QiOnt0eXBlOiJudW1iZXIiLGRvYzoiSW5jcmVhc2Ugb3IgcmVkdWNlIHRoZSBjb250cmFzdCBvZiB0aGUgaW1hZ2UuIixkZWZhdWx0OjAsbWluaW11bTotMSxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJyYXN0ZXItcmVzYW1wbGluZyI6e3R5cGU6ImVudW0iLGRvYzoiVGhlIHJlc2FtcGxpbmcvaW50ZXJwb2xhdGlvbiBtZXRob2QgdG8gdXNlIGZvciBvdmVyc2NhbGluZywgYWxzbyBrbm93biBhcyB0ZXh0dXJlIG1hZ25pZmljYXRpb24gZmlsdGVyIix2YWx1ZXM6e2xpbmVhcjp7ZG9jOiIoQmkpbGluZWFyIGZpbHRlcmluZyBpbnRlcnBvbGF0ZXMgcGl4ZWwgdmFsdWVzIHVzaW5nIHRoZSB3ZWlnaHRlZCBhdmVyYWdlIG9mIHRoZSBmb3VyIGNsb3Nlc3Qgb3JpZ2luYWwgc291cmNlIHBpeGVscyBjcmVhdGluZyBhIHNtb290aCBidXQgYmx1cnJ5IGxvb2sgd2hlbiBvdmVyc2NhbGVkIn0sbmVhcmVzdDp7ZG9jOiJOZWFyZXN0IG5laWdoYm9yIGZpbHRlcmluZyBpbnRlcnBvbGF0ZXMgcGl4ZWwgdmFsdWVzIHVzaW5nIHRoZSBuZWFyZXN0IG9yaWdpbmFsIHNvdXJjZSBwaXhlbCBjcmVhdGluZyBhIHNoYXJwIGJ1dCBwaXhlbGF0ZWQgbG9vayB3aGVuIG92ZXJzY2FsZWQifX0sZGVmYXVsdDoibGluZWFyIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQ3LjAiLGFuZHJvaWQ6IjYuMy4wIixpb3M6IjQuMi4wIixtYWNvczoiMC45LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJyYXN0ZXItZmFkZS1kdXJhdGlvbiI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDozMDAsbWluaW11bTowLHRyYW5zaXRpb246ITEsdW5pdHM6Im1pbGxpc2Vjb25kcyIsZG9jOiJGYWRlIGR1cmF0aW9uIHdoZW4gYSBuZXcgdGlsZSBpcyBhZGRlZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In19LHBhaW50X2hpbGxzaGFkZTp7ImhpbGxzaGFkZS1pbGx1bWluYXRpb24tZGlyZWN0aW9uIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjMzNSxtaW5pbXVtOjAsbWF4aW11bTozNTksZG9jOiJUaGUgZGlyZWN0aW9uIG9mIHRoZSBsaWdodCBzb3VyY2UgdXNlZCB0byBnZW5lcmF0ZSB0aGUgaGlsbHNoYWRpbmcgd2l0aCAwIGFzIHRoZSB0b3Agb2YgdGhlIHZpZXdwb3J0IGlmIGBoaWxsc2hhZGUtaWxsdW1pbmF0aW9uLWFuY2hvcmAgaXMgc2V0IHRvIGB2aWV3cG9ydGAgYW5kIGR1ZSBub3J0aCBpZiBgaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1hbmNob3JgIGlzIHNldCB0byBgbWFwYC4iLHRyYW5zaXRpb246ITEsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40My4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1hbmNob3IiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgaGlsbHNoYWRlIGlsbHVtaW5hdGlvbiBpcyByZWxhdGl2ZSB0byB0aGUgbm9ydGggZGlyZWN0aW9uLiJ9LHZpZXdwb3J0Ontkb2M6IlRoZSBoaWxsc2hhZGUgaWxsdW1pbmF0aW9uIGlzIHJlbGF0aXZlIHRvIHRoZSB0b3Agb2YgdGhlIHZpZXdwb3J0LiJ9fSxkZWZhdWx0OiJ2aWV3cG9ydCIsZG9jOiJEaXJlY3Rpb24gb2YgbGlnaHQgc291cmNlIHdoZW4gbWFwIGlzIHJvdGF0ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQzLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJoaWxsc2hhZGUtZXhhZ2dlcmF0aW9uIjp7dHlwZToibnVtYmVyIixkb2M6IkludGVuc2l0eSBvZiB0aGUgaGlsbHNoYWRlIixkZWZhdWx0Oi41LG1pbmltdW06MCxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQzLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJoaWxsc2hhZGUtc2hhZG93LWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6IiMwMDAwMDAiLGRvYzoiVGhlIHNoYWRpbmcgY29sb3Igb2YgYXJlYXMgdGhhdCBmYWNlIGF3YXkgZnJvbSB0aGUgbGlnaHQgc291cmNlLiIsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQzLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJoaWxsc2hhZGUtaGlnaGxpZ2h0LWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6IiNGRkZGRkYiLGRvYzoiVGhlIHNoYWRpbmcgY29sb3Igb2YgYXJlYXMgdGhhdCBmYWNlcyB0b3dhcmRzIHRoZSBsaWdodCBzb3VyY2UuIix0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDMuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImhpbGxzaGFkZS1hY2NlbnQtY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoiIzAwMDAwMCIsZG9jOiJUaGUgc2hhZGluZyBjb2xvciB1c2VkIHRvIGFjY2VudHVhdGUgcnVnZ2VkIHRlcnJhaW4gbGlrZSBzaGFycCBjbGlmZnMgYW5kIGdvcmdlcy4iLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40My4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifX0scGFpbnRfYmFja2dyb3VuZDp7ImJhY2tncm91bmQtY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoiIzAwMDAwMCIsZG9jOiJUaGUgY29sb3Igd2l0aCB3aGljaCB0aGUgYmFja2dyb3VuZCB3aWxsIGJlIGRyYXduLiIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbeyIhIjoiYmFja2dyb3VuZC1wYXR0ZXJuIn1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImJhY2tncm91bmQtcGF0dGVybiI6e3R5cGU6InJlc29sdmVkSW1hZ2UiLHRyYW5zaXRpb246ITAsZG9jOiJOYW1lIG9mIGltYWdlIGluIHNwcml0ZSB0byB1c2UgZm9yIGRyYXdpbmcgYW4gaW1hZ2UgYmFja2dyb3VuZC4gRm9yIHNlYW1sZXNzIHBhdHRlcm5zLCBpbWFnZSB3aWR0aCBhbmQgaGVpZ2h0IG11c3QgYmUgYSBmYWN0b3Igb2YgdHdvICgyLCA0LCA4LCAuLi4sIDUxMikuIE5vdGUgdGhhdCB6b29tLWRlcGVuZGVudCBleHByZXNzaW9ucyB3aWxsIGJlIGV2YWx1YXRlZCBvbmx5IGF0IGludGVnZXIgem9vbSBsZXZlbHMuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e319LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImNyb3NzLWZhZGVkIn0sImJhY2tncm91bmQtb3BhY2l0eSI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxLG1pbmltdW06MCxtYXhpbXVtOjEsZG9jOiJUaGUgb3BhY2l0eSBhdCB3aGljaCB0aGUgYmFja2dyb3VuZCB3aWxsIGJlIGRyYXduLiIsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9fSxwYWludF9za3k6eyJza3ktdHlwZSI6e3R5cGU6ImVudW0iLHZhbHVlczp7Z3JhZGllbnQ6e2RvYzoiUmVuZGVycyB0aGUgc2t5IHdpdGggYSBncmFkaWVudCB0aGF0IGNhbiBiZSBjb25maWd1cmVkIHdpdGggYHNreS1ncmFkaWVudC1yYWRpdXNgIGFuZCBgc2t5LWdyYWRpZW50YC4ifSxhdG1vc3BoZXJlOntkb2M6IlJlbmRlcnMgdGhlIHNreSB3aXRoIGEgc2ltdWxhdGVkIGF0bW9zcGhlcmljIHNjYXR0ZXJpbmcgYWxnb3JpdGhtLCB0aGUgc3VuIGRpcmVjdGlvbiBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGxpZ2h0IHBvc2l0aW9uIG9yIGV4cGxpY2l0bHkgc2V0IHRocm91Z2ggYHNreS1hdG1vc3BoZXJlLXN1bmAuIn19LGRlZmF1bHQ6ImF0bW9zcGhlcmUiLGRvYzoiVGhlIHR5cGUgb2YgdGhlIHNreSIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJza3ktYXRtb3NwaGVyZS1zdW4iOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjIsdW5pdHM6ImRlZ3JlZXMiLG1pbmltdW06WzAsMF0sbWF4aW11bTpbMzYwLDE4MF0sdHJhbnNpdGlvbjohMSxkb2M6IlBvc2l0aW9uIG9mIHRoZSBzdW4gY2VudGVyIFthIGF6aW11dGhhbCBhbmdsZSwgcCBwb2xhciBhbmdsZV0uIFRoZSBhemltdXRoYWwgYW5nbGUgaW5kaWNhdGVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgc3VuIHJlbGF0aXZlIHRvIDDCsCBub3J0aCwgd2hlcmUgZGVncmVlcyBwcm9jZWVkIGNsb2Nrd2lzZS4gVGhlIHBvbGFyIGFuZ2xlIGluZGljYXRlcyB0aGUgaGVpZ2h0IG9mIHRoZSBzdW4sIHdoZXJlIDDCsCBpcyBkaXJlY3RseSBhYm92ZSwgYXQgemVuaXRoLCBhbmQgOTDCsCBhdCB0aGUgaG9yaXpvbi4gV2hlbiB0aGlzIHByb3BlcnR5IGlzIG9tbWl0dGVkLCB0aGUgc3VuIGNlbnRlciBpcyBkaXJlY3RseSBpbmhlcml0ZWQgZnJvbSB0aGUgbGlnaHQgcG9zaXRpb24uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIyLjAuMCIsaW9zOiIxMC4wLjAiLGFuZHJvaWQ6IjEwLjAuMCJ9fSxyZXF1aXJlczpbeyJza3ktdHlwZSI6ImF0bW9zcGhlcmUifV0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJza3ktYXRtb3NwaGVyZS1zdW4taW50ZW5zaXR5Ijp7dHlwZToibnVtYmVyIixyZXF1aXJlczpbeyJza3ktdHlwZSI6ImF0bW9zcGhlcmUifV0sZGVmYXVsdDoxMCxtaW5pbXVtOjAsbWF4aW11bToxMDAsdHJhbnNpdGlvbjohMSxkb2M6IkludGVuc2l0eSBvZiB0aGUgc3VuIGFzIGEgbGlnaHQgc291cmNlIGluIHRoZSBhdG1vc3BoZXJlIChvbiBhIHNjYWxlIGZyb20gMCB0byBhIDEwMCkuIFNldHRpbmcgaGlnaGVyIHZhbHVlcyB3aWxsIGJyaWdodGVuIHVwIHRoZSBza3kuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIyLjAuMCIsaW9zOiIxMC4wLjAiLGFuZHJvaWQ6IjEwLjAuMCJ9fSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwic2t5LWdyYWRpZW50LWNlbnRlciI6e3R5cGU6ImFycmF5IixyZXF1aXJlczpbeyJza3ktdHlwZSI6ImdyYWRpZW50In1dLHZhbHVlOiJudW1iZXIiLGRlZmF1bHQ6WzAsMF0sbGVuZ3RoOjIsdW5pdHM6ImRlZ3JlZXMiLG1pbmltdW06WzAsMF0sbWF4aW11bTpbMzYwLDE4MF0sdHJhbnNpdGlvbjohMSxkb2M6IlBvc2l0aW9uIG9mIHRoZSBncmFkaWVudCBjZW50ZXIgW2EgYXppbXV0aGFsIGFuZ2xlLCBwIHBvbGFyIGFuZ2xlXS4gVGhlIGF6aW11dGhhbCBhbmdsZSBpbmRpY2F0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBncmFkaWVudCBjZW50ZXIgcmVsYXRpdmUgdG8gMMKwIG5vcnRoLCB3aGVyZSBkZWdyZWVzIHByb2NlZWQgY2xvY2t3aXNlLiBUaGUgcG9sYXIgYW5nbGUgaW5kaWNhdGVzIHRoZSBoZWlnaHQgb2YgdGhlIGdyYWRpZW50IGNlbnRlciwgd2hlcmUgMMKwIGlzIGRpcmVjdGx5IGFib3ZlLCBhdCB6ZW5pdGgsIGFuZCA5MMKwIGF0IHRoZSBob3Jpem9uLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJza3ktZ3JhZGllbnQtcmFkaXVzIjp7dHlwZToibnVtYmVyIixyZXF1aXJlczpbeyJza3ktdHlwZSI6ImdyYWRpZW50In1dLGRlZmF1bHQ6OTAsbWluaW11bTowLG1heGltdW06MTgwLHRyYW5zaXRpb246ITEsZG9jOiJUaGUgYW5ndWxhciBkaXN0YW5jZSAobWVhc3VyZWQgaW4gZGVncmVlcykgZnJvbSBgc2t5LWdyYWRpZW50LWNlbnRlcmAgdXAgdG8gd2hpY2ggdGhlIGdyYWRpZW50IGV4dGVuZHMuIEEgdmFsdWUgb2YgMTgwIGNhdXNlcyB0aGUgZ3JhZGllbnQgdG8gd3JhcCBhcm91bmQgdG8gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiBmcm9tIGBza3ktZ3JhZGllbnQtY2VudGVyYC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjIuMC4wIixpb3M6IjEwLjAuMCIsYW5kcm9pZDoiMTAuMC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwic2t5LWdyYWRpZW50Ijp7dHlwZToiY29sb3IiLGRlZmF1bHQ6WyJpbnRlcnBvbGF0ZSIsWyJsaW5lYXIiXSxbInNreS1yYWRpYWwtcHJvZ3Jlc3MiXSwuOCwiIzg3Y2VlYiIsMSwid2hpdGUiXSxkb2M6IkRlZmluZXMgYSByYWRpYWwgY29sb3IgZ3JhZGllbnQgd2l0aCB3aGljaCB0byBjb2xvciB0aGUgc2t5LiBUaGUgY29sb3IgdmFsdWVzIGNhbiBiZSBpbnRlcnBvbGF0ZWQgd2l0aCBhbiBleHByZXNzaW9uIHVzaW5nIGBza3ktcmFkaWFsLXByb2dyZXNzYC4gVGhlIHJhbmdlIFswLCAxXSBmb3IgdGhlIGludGVycG9sYW50IGNvdmVycyBhIHJhZGlhbCBkaXN0YW5jZSAoaW4gZGVncmVlcykgb2YgWzAsIGBza3ktZ3JhZGllbnQtcmFkaXVzYF0gY2VudGVyZWQgYXQgdGhlIHBvc2l0aW9uIHNwZWNpZmllZCBieSBgc2t5LWdyYWRpZW50LWNlbnRlcmAuIix0cmFuc2l0aW9uOiExLHJlcXVpcmVzOlt7InNreS10eXBlIjoiZ3JhZGllbnQifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e319LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsic2t5LXJhZGlhbC1wcm9ncmVzcyJdfSwicHJvcGVydHktdHlwZSI6ImNvbG9yLXJhbXAifSwic2t5LWF0bW9zcGhlcmUtaGFsby1jb2xvciI6e3R5cGU6ImNvbG9yIixkZWZhdWx0OiJ3aGl0ZSIsZG9jOiJBIGNvbG9yIGFwcGxpZWQgdG8gdGhlIGF0bW9zcGhlcmUgc3VuIGhhbG8uIFRoZSBhbHBoYSBjaGFubmVsIGRlc2NyaWJlcyBob3cgc3Ryb25nbHkgdGhlIHN1biBoYWxvIGlzIHJlcHJlc2VudGVkIGluIGFuIGF0bW9zcGhlcmUgc2t5IGxheWVyLiIsdHJhbnNpdGlvbjohMSxyZXF1aXJlczpbeyJza3ktdHlwZSI6ImF0bW9zcGhlcmUifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInNreS1hdG1vc3BoZXJlLWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6IndoaXRlIixkb2M6IkEgY29sb3IgdXNlZCB0byB0d2VhayB0aGUgbWFpbiBhdG1vc3BoZXJpYyBzY2F0dGVyaW5nIGNvZWZmaWNpZW50cy4gVXNpbmcgd2hpdGUgYXBwbGllcyB0aGUgZGVmYXVsdCBjb2VmZmljaWVudHMgZ2l2aW5nIHRoZSBuYXR1cmFsIGJsdWUgY29sb3IgdG8gdGhlIGF0bW9zcGhlcmUuIFRoaXMgY29sb3IgYWZmZWN0cyBob3cgaGVhdmlseSB0aGUgY29ycmVzcG9uZGluZyB3YXZlbGVuZ3RoIGlzIHJlcHJlc2VudGVkIGR1cmluZyBzY2F0dGVyaW5nLiBUaGUgYWxwaGEgY2hhbm5lbCBkZXNjcmliZXMgdGhlIGRlbnNpdHkgb2YgdGhlIGF0bW9zcGhlcmUsIHdpdGggMSBtYXhpbXVtIGRlbnNpdHkgYW5kIDAgbm8gZGVuc2l0eS4iLHRyYW5zaXRpb246ITEscmVxdWlyZXM6W3sic2t5LXR5cGUiOiJhdG1vc3BoZXJlIn1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjIuMC4wIixpb3M6IjEwLjAuMCIsYW5kcm9pZDoiMTAuMC4wIn19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJza3ktb3BhY2l0eSI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxLG1pbmltdW06MCxtYXhpbXVtOjEsZG9jOiJUaGUgb3BhY2l0eSBvZiB0aGUgZW50aXJlIHNreSBsYXllci4iLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMi4wLjAiLGlvczoiMTAuMC4wIixhbmRyb2lkOiIxMC4wLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9fSx0cmFuc2l0aW9uOntkdXJhdGlvbjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjMwMCxtaW5pbXVtOjAsdW5pdHM6Im1pbGxpc2Vjb25kcyIsZG9jOiJUaW1lIGFsbG90dGVkIGZvciB0cmFuc2l0aW9ucyB0byBjb21wbGV0ZS4ifSxkZWxheTp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsbWluaW11bTowLHVuaXRzOiJtaWxsaXNlY29uZHMiLGRvYzoiTGVuZ3RoIG9mIHRpbWUgYmVmb3JlIGEgdHJhbnNpdGlvbiBiZWdpbnMuIn19LCJwcm9wZXJ0eS10eXBlIjp7ImRhdGEtZHJpdmVuIjp7dHlwZToicHJvcGVydHktdHlwZSIsZG9jOiJQcm9wZXJ0eSBpcyBpbnRlcnBvbGFibGUgYW5kIGNhbiBiZSByZXByZXNlbnRlZCB1c2luZyBhIHByb3BlcnR5IGV4cHJlc3Npb24uIn0sImNyb3NzLWZhZGVkIjp7dHlwZToicHJvcGVydHktdHlwZSIsZG9jOiJQcm9wZXJ0eSBpcyBub24taW50ZXJwb2xhYmxlOyByYXRoZXIsIGl0cyB2YWx1ZXMgd2lsbCBiZSBjcm9zcy1mYWRlZCB0byBzbW9vdGhseSB0cmFuc2l0aW9uIGJldHdlZW4gaW50ZWdlciB6b29tcy4ifSwiY3Jvc3MtZmFkZWQtZGF0YS1kcml2ZW4iOnt0eXBlOiJwcm9wZXJ0eS10eXBlIixkb2M6IlByb3BlcnR5IGlzIG5vbi1pbnRlcnBvbGFibGU7IHJhdGhlciwgaXRzIHZhbHVlcyB3aWxsIGJlIGNyb3NzLWZhZGVkIHRvIHNtb290aGx5IHRyYW5zaXRpb24gYmV0d2VlbiBpbnRlZ2VyIHpvb21zLiBJdCBjYW4gYmUgcmVwcmVzZW50ZWQgdXNpbmcgYSBwcm9wZXJ0eSBleHByZXNzaW9uLiJ9LCJjb2xvci1yYW1wIjp7dHlwZToicHJvcGVydHktdHlwZSIsZG9jOiJQcm9wZXJ0eSBzaG91bGQgYmUgc3BlY2lmaWVkIHVzaW5nIGEgY29sb3IgcmFtcCBmcm9tIHdoaWNoIHRoZSBvdXRwdXQgY29sb3IgY2FuIGJlIHNhbXBsZWQgYmFzZWQgb24gYSBwcm9wZXJ0eSBjYWxjdWxhdGlvbi4ifSwiZGF0YS1jb25zdGFudCI6e3R5cGU6InByb3BlcnR5LXR5cGUiLGRvYzoiUHJvcGVydHkgaXMgaW50ZXJwb2xhYmxlIGJ1dCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgdXNpbmcgYSBwcm9wZXJ0eSBleHByZXNzaW9uLiJ9LGNvbnN0YW50Ont0eXBlOiJwcm9wZXJ0eS10eXBlIixkb2M6IlByb3BlcnR5IGlzIGNvbnN0YW50IGFjcm9zcyBhbGwgem9vbSBsZXZlbHMgYW5kIHByb3BlcnR5IHZhbHVlcy4ifX0scHJvbW90ZUlkOnsiKiI6e3R5cGU6InN0cmluZyIsZG9jOiJBIG5hbWUgb2YgYSBmZWF0dXJlIHByb3BlcnR5IHRvIHVzZSBhcyBJRCBmb3IgZmVhdHVyZSBzdGF0ZS4ifX19LGQ9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp7fTtmdW5jdGlvbiBoKGUpe3ZhciB0PXtleHBvcnRzOnt9fTtyZXR1cm4gZSh0LHQuZXhwb3J0cyksdC5leHBvcnRzfWZ1bmN0aW9uIGYoZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9Ci8qISBodHRwczovL210aHMuYmUvcHVueWNvZGUgdjEuMy4yIGJ5IEBtYXRoaWFzICovCmgoKGZ1bmN0aW9uKGUsdCl7IWZ1bmN0aW9uKHIpe3ZhciBvPXQmJiF0Lm5vZGVUeXBlJiZ0LG49ZSYmIWUubm9kZVR5cGUmJmUsaT0ib2JqZWN0Ij09dHlwZW9mIGQmJmQ7aS5nbG9iYWwhPT1pJiZpLndpbmRvdyE9PWkmJmkuc2VsZiE9PWl8fChyPWkpO3ZhciBhLHMsbD0yMTQ3NDgzNjQ3LHU9MzYsYz0vXnhuLS0vLHA9L1teXHgyMC1ceDdFXS8saD0vW1x4MkVcdTMwMDJcdUZGMEVcdUZGNjFdL2csZj17b3ZlcmZsb3c6Ik92ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzIiwibm90LWJhc2ljIjoiSWxsZWdhbCBpbnB1dCA+PSAweDgwIChub3QgYSBiYXNpYyBjb2RlIHBvaW50KSIsImludmFsaWQtaW5wdXQiOiJJbnZhbGlkIGlucHV0In0seT1NYXRoLmZsb29yLG09U3RyaW5nLmZyb21DaGFyQ29kZTtmdW5jdGlvbiBnKGUpe3Rocm93IFJhbmdlRXJyb3IoZltlXSl9ZnVuY3Rpb24gdihlLHQpe2Zvcih2YXIgcj1lLmxlbmd0aCxvPVtdO3ItLTspb1tyXT10KGVbcl0pO3JldHVybiBvfWZ1bmN0aW9uIGIoZSx0KXt2YXIgcj1lLnNwbGl0KCJAIiksbz0iIjtyZXR1cm4gci5sZW5ndGg+MSYmKG89clswXSsiQCIsZT1yWzFdKSxvK3YoKGU9ZS5yZXBsYWNlKGgsIi4iKSkuc3BsaXQoIi4iKSx0KS5qb2luKCIuIil9ZnVuY3Rpb24geChlKXtmb3IodmFyIHQscixvPVtdLG49MCxpPWUubGVuZ3RoO248aTspKHQ9ZS5jaGFyQ29kZUF0KG4rKykpPj01NTI5NiYmdDw9NTYzMTkmJm48aT81NjMyMD09KDY0NTEyJihyPWUuY2hhckNvZGVBdChuKyspKSk/by5wdXNoKCgoMTAyMyZ0KTw8MTApKygxMDIzJnIpKzY1NTM2KTooby5wdXNoKHQpLG4tLSk6by5wdXNoKHQpO3JldHVybiBvfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIHYoZSwoZnVuY3Rpb24oZSl7dmFyIHQ9IiI7cmV0dXJuIGU+NjU1MzUmJih0Kz1tKChlLT02NTUzNik+Pj4xMCYxMDIzfDU1Mjk2KSxlPTU2MzIwfDEwMjMmZSksdCs9bShlKX0pKS5qb2luKCIiKX1mdW5jdGlvbiBrKGUsdCl7cmV0dXJuIGUrMjIrNzUqKGU8MjYpLSgoMCE9dCk8PDUpfWZ1bmN0aW9uIGooZSx0LHIpe3ZhciBvPTA7Zm9yKGU9cj95KGUvNzAwKTplPj4xLGUrPXkoZS90KTtlPjQ1NTtvKz11KWU9eShlLzM1KTtyZXR1cm4geShvKzM2KmUvKGUrMzgpKX1mdW5jdGlvbiB6KGUpe3ZhciB0LHIsbyxuLGksYSxzLGMscCxkLGgsZj1bXSxtPWUubGVuZ3RoLHY9MCxiPTEyOCx4PTcyO2Zvcigocj1lLmxhc3RJbmRleE9mKCItIikpPDAmJihyPTApLG89MDtvPHI7KytvKWUuY2hhckNvZGVBdChvKT49MTI4JiZnKCJub3QtYmFzaWMiKSxmLnB1c2goZS5jaGFyQ29kZUF0KG8pKTtmb3Iobj1yPjA/cisxOjA7bjxtOyl7Zm9yKGk9dixhPTEscz11O24+PW0mJmcoImludmFsaWQtaW5wdXQiKSwoKGM9KGg9ZS5jaGFyQ29kZUF0KG4rKykpLTQ4PDEwP2gtMjI6aC02NTwyNj9oLTY1OmgtOTc8MjY/aC05Nzp1KT49dXx8Yz55KChsLXYpL2EpKSYmZygib3ZlcmZsb3ciKSx2Kz1jKmEsIShjPChwPXM8PXg/MTpzPj14KzI2PzI2OnMteCkpO3MrPXUpYT55KGwvKGQ9dS1wKSkmJmcoIm92ZXJmbG93IiksYSo9ZDt4PWoodi1pLHQ9Zi5sZW5ndGgrMSwwPT1pKSx5KHYvdCk+bC1iJiZnKCJvdmVyZmxvdyIpLGIrPXkodi90KSx2JT10LGYuc3BsaWNlKHYrKywwLGIpfXJldHVybiB3KGYpfWZ1bmN0aW9uIFQoZSl7dmFyIHQscixvLG4saSxhLHMsYyxwLGQsaCxmLHYsYix3LHo9W107Zm9yKGY9KGU9eChlKSkubGVuZ3RoLHQ9MTI4LHI9MCxpPTcyLGE9MDthPGY7KythKShoPWVbYV0pPDEyOCYmei5wdXNoKG0oaCkpO2ZvcihvPW49ei5sZW5ndGgsbiYmei5wdXNoKCItIik7bzxmOyl7Zm9yKHM9bCxhPTA7YTxmOysrYSkoaD1lW2FdKT49dCYmaDxzJiYocz1oKTtmb3Iocy10PnkoKGwtcikvKHY9bysxKSkmJmcoIm92ZXJmbG93Iikscis9KHMtdCkqdix0PXMsYT0wO2E8ZjsrK2EpaWYoKGg9ZVthXSk8dCYmKytyPmwmJmcoIm92ZXJmbG93IiksaD09dCl7Zm9yKGM9cixwPXU7IShjPChkPXA8PWk/MTpwPj1pKzI2PzI2OnAtaSkpO3ArPXUpdz1jLWQsYj11LWQsei5wdXNoKG0oayhkK3clYiwwKSkpLGM9eSh3L2IpO3oucHVzaChtKGsoYywwKSkpLGk9aihyLHYsbz09bikscj0wLCsrb30rK3IsKyt0fXJldHVybiB6LmpvaW4oIiIpfWlmKGE9e3ZlcnNpb246IjEuMy4yIix1Y3MyOntkZWNvZGU6eCxlbmNvZGU6d30sZGVjb2RlOnosZW5jb2RlOlQsdG9BU0NJSTpmdW5jdGlvbihlKXtyZXR1cm4gYihlLChmdW5jdGlvbihlKXtyZXR1cm4gcC50ZXN0KGUpPyJ4bi0tIitUKGUpOmV9KSl9LHRvVW5pY29kZTpmdW5jdGlvbihlKXtyZXR1cm4gYihlLChmdW5jdGlvbihlKXtyZXR1cm4gYy50ZXN0KGUpP3ooZS5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKTplfSkpfX0sbyYmbilpZihlLmV4cG9ydHM9PW8pbi5leHBvcnRzPWE7ZWxzZSBmb3IocyBpbiBhKWEuaGFzT3duUHJvcGVydHkocykmJihvW3NdPWFbc10pO2Vsc2Ugci5wdW55Y29kZT1hfShkKX0pKTt2YXIgeT1mdW5jdGlvbihlLHQscixvKXt0PXR8fCImIixyPXJ8fCI9Ijt2YXIgbj17fTtpZigic3RyaW5nIiE9dHlwZW9mIGV8fDA9PT1lLmxlbmd0aClyZXR1cm4gbjt2YXIgaT0vXCsvZztlPWUuc3BsaXQodCk7dmFyIGE9MWUzO28mJiJudW1iZXIiPT10eXBlb2Ygby5tYXhLZXlzJiYoYT1vLm1heEtleXMpO3ZhciBzPWUubGVuZ3RoO2E+MCYmcz5hJiYocz1hKTtmb3IodmFyIGw9MDtsPHM7KytsKXt2YXIgdSxjLHAsZCxoPWVbbF0ucmVwbGFjZShpLCIlMjAiKSx5PWguaW5kZXhPZihyKTt5Pj0wPyh1PWguc3Vic3RyKDAseSksYz1oLnN1YnN0cih5KzEpKToodT1oLGM9IiIpLHA9ZGVjb2RlVVJJQ29tcG9uZW50KHUpLGQ9ZGVjb2RlVVJJQ29tcG9uZW50KGMpLGYobixwKT9BcnJheS5pc0FycmF5KG5bcF0pP25bcF0ucHVzaChkKTpuW3BdPVtuW3BdLGRdOm5bcF09ZH1yZXR1cm4gbn0sbT1mdW5jdGlvbihlKXtzd2l0Y2godHlwZW9mIGUpe2Nhc2Uic3RyaW5nIjpyZXR1cm4gZTtjYXNlImJvb2xlYW4iOnJldHVybiBlPyJ0cnVlIjoiZmFsc2UiO2Nhc2UibnVtYmVyIjpyZXR1cm4gaXNGaW5pdGUoZSk/ZToiIjtkZWZhdWx0OnJldHVybiIifX0sZz1mdW5jdGlvbihlLHQscixvKXtyZXR1cm4gdD10fHwiJiIscj1yfHwiPSIsbnVsbD09PWUmJihlPXZvaWQgMCksIm9iamVjdCI9PXR5cGVvZiBlP09iamVjdC5rZXlzKGUpLm1hcCgoZnVuY3Rpb24obyl7dmFyIG49ZW5jb2RlVVJJQ29tcG9uZW50KG0obykpK3I7cmV0dXJuIEFycmF5LmlzQXJyYXkoZVtvXSk/ZVtvXS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBuK2VuY29kZVVSSUNvbXBvbmVudChtKGUpKX0pKS5qb2luKHQpOm4rZW5jb2RlVVJJQ29tcG9uZW50KG0oZVtvXSkpfSkpLmpvaW4odCk6bz9lbmNvZGVVUklDb21wb25lbnQobShvKSkrcitlbmNvZGVVUklDb21wb25lbnQobShlKSk6IiJ9O2Z1bmN0aW9uIHYoZSwuLi50KXtmb3IoY29uc3QgciBvZiB0KWZvcihjb25zdCB0IGluIHIpZVt0XT1yW3RdO3JldHVybiBlfWgoKGZ1bmN0aW9uKGUsdCl7dC5kZWNvZGU9dC5wYXJzZT15LHQuZW5jb2RlPXQuc3RyaW5naWZ5PWd9KSk7Y2xhc3MgYiBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIodCksdGhpcy5tZXNzYWdlPXQsdGhpcy5rZXk9ZX19dmFyIHg9YjtjbGFzcyB3e2NvbnN0cnVjdG9yKGUsdD1bXSl7dGhpcy5wYXJlbnQ9ZSx0aGlzLmJpbmRpbmdzPXt9O2Zvcihjb25zdFtlLHJdb2YgdCl0aGlzLmJpbmRpbmdzW2VdPXJ9Y29uY2F0KGUpe3JldHVybiBuZXcgdyh0aGlzLGUpfWdldChlKXtpZih0aGlzLmJpbmRpbmdzW2VdKXJldHVybiB0aGlzLmJpbmRpbmdzW2VdO2lmKHRoaXMucGFyZW50KXJldHVybiB0aGlzLnBhcmVudC5nZXQoZSk7dGhyb3cgbmV3IEVycm9yKGAke2V9IG5vdCBmb3VuZCBpbiBzY29wZS5gKX1oYXMoZSl7cmV0dXJuISF0aGlzLmJpbmRpbmdzW2VdfHwhIXRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5oYXMoZSl9fXZhciBrPXc7Y29uc3Qgaj17a2luZDoibnVsbCJ9LHo9e2tpbmQ6Im51bWJlciJ9LFQ9e2tpbmQ6InN0cmluZyJ9LF89e2tpbmQ6ImJvb2xlYW4ifSxTPXtraW5kOiJjb2xvciJ9LEE9e2tpbmQ6Im9iamVjdCJ9LEk9e2tpbmQ6InZhbHVlIn0sQz17a2luZDoiY29sbGF0b3IifSxPPXtraW5kOiJmb3JtYXR0ZWQifSxFPXtraW5kOiJyZXNvbHZlZEltYWdlIn07ZnVuY3Rpb24gcShlLHQpe3JldHVybntraW5kOiJhcnJheSIsaXRlbVR5cGU6ZSxOOnR9fWZ1bmN0aW9uIE0oZSl7aWYoImFycmF5Ij09PWUua2luZCl7Y29uc3QgdD1NKGUuaXRlbVR5cGUpO3JldHVybiJudW1iZXIiPT10eXBlb2YgZS5OP2BhcnJheTwke3R9LCAke2UuTn0+YDoidmFsdWUiPT09ZS5pdGVtVHlwZS5raW5kPyJhcnJheSI6YGFycmF5PCR7dH0+YH1yZXR1cm4gZS5raW5kfWNvbnN0IE49W2oseixULF8sUyxPLEEscShJKSxFXTtmdW5jdGlvbiBSKGUsdCl7aWYoImVycm9yIj09PXQua2luZClyZXR1cm4gbnVsbDtpZigiYXJyYXkiPT09ZS5raW5kKXtpZigiYXJyYXkiPT09dC5raW5kJiYoMD09PXQuTiYmInZhbHVlIj09PXQuaXRlbVR5cGUua2luZHx8IVIoZS5pdGVtVHlwZSx0Lml0ZW1UeXBlKSkmJigibnVtYmVyIiE9dHlwZW9mIGUuTnx8ZS5OPT09dC5OKSlyZXR1cm4gbnVsbH1lbHNle2lmKGUua2luZD09PXQua2luZClyZXR1cm4gbnVsbDtpZigidmFsdWUiPT09ZS5raW5kKWZvcihjb25zdCBlIG9mIE4paWYoIVIoZSx0KSlyZXR1cm4gbnVsbH1yZXR1cm5gRXhwZWN0ZWQgJHtNKGUpfSBidXQgZm91bmQgJHtNKHQpfSBpbnN0ZWFkLmB9ZnVuY3Rpb24gRChlLHQpe3JldHVybiB0LnNvbWUoKHQ9PnQua2luZD09PWUua2luZCkpfWZ1bmN0aW9uIFAoZSx0KXtyZXR1cm4gdC5zb21lKCh0PT4ibnVsbCI9PT10P251bGw9PT1lOiJhcnJheSI9PT10P0FycmF5LmlzQXJyYXkoZSk6Im9iamVjdCI9PT10P2UmJiFBcnJheS5pc0FycmF5KGUpJiYib2JqZWN0Ij09dHlwZW9mIGU6dD09PXR5cGVvZiBlKSl9dmFyIEY9aCgoZnVuY3Rpb24oZSx0KXt2YXIgcj17dHJhbnNwYXJlbnQ6WzAsMCwwLDBdLGFsaWNlYmx1ZTpbMjQwLDI0OCwyNTUsMV0sYW50aXF1ZXdoaXRlOlsyNTAsMjM1LDIxNSwxXSxhcXVhOlswLDI1NSwyNTUsMV0sYXF1YW1hcmluZTpbMTI3LDI1NSwyMTIsMV0sYXp1cmU6WzI0MCwyNTUsMjU1LDFdLGJlaWdlOlsyNDUsMjQ1LDIyMCwxXSxiaXNxdWU6WzI1NSwyMjgsMTk2LDFdLGJsYWNrOlswLDAsMCwxXSxibGFuY2hlZGFsbW9uZDpbMjU1LDIzNSwyMDUsMV0sYmx1ZTpbMCwwLDI1NSwxXSxibHVldmlvbGV0OlsxMzgsNDMsMjI2LDFdLGJyb3duOlsxNjUsNDIsNDIsMV0sYnVybHl3b29kOlsyMjIsMTg0LDEzNSwxXSxjYWRldGJsdWU6Wzk1LDE1OCwxNjAsMV0sY2hhcnRyZXVzZTpbMTI3LDI1NSwwLDFdLGNob2NvbGF0ZTpbMjEwLDEwNSwzMCwxXSxjb3JhbDpbMjU1LDEyNyw4MCwxXSxjb3JuZmxvd2VyYmx1ZTpbMTAwLDE0OSwyMzcsMV0sY29ybnNpbGs6WzI1NSwyNDgsMjIwLDFdLGNyaW1zb246WzIyMCwyMCw2MCwxXSxjeWFuOlswLDI1NSwyNTUsMV0sZGFya2JsdWU6WzAsMCwxMzksMV0sZGFya2N5YW46WzAsMTM5LDEzOSwxXSxkYXJrZ29sZGVucm9kOlsxODQsMTM0LDExLDFdLGRhcmtncmF5OlsxNjksMTY5LDE2OSwxXSxkYXJrZ3JlZW46WzAsMTAwLDAsMV0sZGFya2dyZXk6WzE2OSwxNjksMTY5LDFdLGRhcmtraGFraTpbMTg5LDE4MywxMDcsMV0sZGFya21hZ2VudGE6WzEzOSwwLDEzOSwxXSxkYXJrb2xpdmVncmVlbjpbODUsMTA3LDQ3LDFdLGRhcmtvcmFuZ2U6WzI1NSwxNDAsMCwxXSxkYXJrb3JjaGlkOlsxNTMsNTAsMjA0LDFdLGRhcmtyZWQ6WzEzOSwwLDAsMV0sZGFya3NhbG1vbjpbMjMzLDE1MCwxMjIsMV0sZGFya3NlYWdyZWVuOlsxNDMsMTg4LDE0MywxXSxkYXJrc2xhdGVibHVlOls3Miw2MSwxMzksMV0sZGFya3NsYXRlZ3JheTpbNDcsNzksNzksMV0sZGFya3NsYXRlZ3JleTpbNDcsNzksNzksMV0sZGFya3R1cnF1b2lzZTpbMCwyMDYsMjA5LDFdLGRhcmt2aW9sZXQ6WzE0OCwwLDIxMSwxXSxkZWVwcGluazpbMjU1LDIwLDE0NywxXSxkZWVwc2t5Ymx1ZTpbMCwxOTEsMjU1LDFdLGRpbWdyYXk6WzEwNSwxMDUsMTA1LDFdLGRpbWdyZXk6WzEwNSwxMDUsMTA1LDFdLGRvZGdlcmJsdWU6WzMwLDE0NCwyNTUsMV0sZmlyZWJyaWNrOlsxNzgsMzQsMzQsMV0sZmxvcmFsd2hpdGU6WzI1NSwyNTAsMjQwLDFdLGZvcmVzdGdyZWVuOlszNCwxMzksMzQsMV0sZnVjaHNpYTpbMjU1LDAsMjU1LDFdLGdhaW5zYm9ybzpbMjIwLDIyMCwyMjAsMV0sZ2hvc3R3aGl0ZTpbMjQ4LDI0OCwyNTUsMV0sZ29sZDpbMjU1LDIxNSwwLDFdLGdvbGRlbnJvZDpbMjE4LDE2NSwzMiwxXSxncmF5OlsxMjgsMTI4LDEyOCwxXSxncmVlbjpbMCwxMjgsMCwxXSxncmVlbnllbGxvdzpbMTczLDI1NSw0NywxXSxncmV5OlsxMjgsMTI4LDEyOCwxXSxob25leWRldzpbMjQwLDI1NSwyNDAsMV0saG90cGluazpbMjU1LDEwNSwxODAsMV0saW5kaWFucmVkOlsyMDUsOTIsOTIsMV0saW5kaWdvOls3NSwwLDEzMCwxXSxpdm9yeTpbMjU1LDI1NSwyNDAsMV0sa2hha2k6WzI0MCwyMzAsMTQwLDFdLGxhdmVuZGVyOlsyMzAsMjMwLDI1MCwxXSxsYXZlbmRlcmJsdXNoOlsyNTUsMjQwLDI0NSwxXSxsYXduZ3JlZW46WzEyNCwyNTIsMCwxXSxsZW1vbmNoaWZmb246WzI1NSwyNTAsMjA1LDFdLGxpZ2h0Ymx1ZTpbMTczLDIxNiwyMzAsMV0sbGlnaHRjb3JhbDpbMjQwLDEyOCwxMjgsMV0sbGlnaHRjeWFuOlsyMjQsMjU1LDI1NSwxXSxsaWdodGdvbGRlbnJvZHllbGxvdzpbMjUwLDI1MCwyMTAsMV0sbGlnaHRncmF5OlsyMTEsMjExLDIxMSwxXSxsaWdodGdyZWVuOlsxNDQsMjM4LDE0NCwxXSxsaWdodGdyZXk6WzIxMSwyMTEsMjExLDFdLGxpZ2h0cGluazpbMjU1LDE4MiwxOTMsMV0sbGlnaHRzYWxtb246WzI1NSwxNjAsMTIyLDFdLGxpZ2h0c2VhZ3JlZW46WzMyLDE3OCwxNzAsMV0sbGlnaHRza3libHVlOlsxMzUsMjA2LDI1MCwxXSxsaWdodHNsYXRlZ3JheTpbMTE5LDEzNiwxNTMsMV0sbGlnaHRzbGF0ZWdyZXk6WzExOSwxMzYsMTUzLDFdLGxpZ2h0c3RlZWxibHVlOlsxNzYsMTk2LDIyMiwxXSxsaWdodHllbGxvdzpbMjU1LDI1NSwyMjQsMV0sbGltZTpbMCwyNTUsMCwxXSxsaW1lZ3JlZW46WzUwLDIwNSw1MCwxXSxsaW5lbjpbMjUwLDI0MCwyMzAsMV0sbWFnZW50YTpbMjU1LDAsMjU1LDFdLG1hcm9vbjpbMTI4LDAsMCwxXSxtZWRpdW1hcXVhbWFyaW5lOlsxMDIsMjA1LDE3MCwxXSxtZWRpdW1ibHVlOlswLDAsMjA1LDFdLG1lZGl1bW9yY2hpZDpbMTg2LDg1LDIxMSwxXSxtZWRpdW1wdXJwbGU6WzE0NywxMTIsMjE5LDFdLG1lZGl1bXNlYWdyZWVuOls2MCwxNzksMTEzLDFdLG1lZGl1bXNsYXRlYmx1ZTpbMTIzLDEwNCwyMzgsMV0sbWVkaXVtc3ByaW5nZ3JlZW46WzAsMjUwLDE1NCwxXSxtZWRpdW10dXJxdW9pc2U6WzcyLDIwOSwyMDQsMV0sbWVkaXVtdmlvbGV0cmVkOlsxOTksMjEsMTMzLDFdLG1pZG5pZ2h0Ymx1ZTpbMjUsMjUsMTEyLDFdLG1pbnRjcmVhbTpbMjQ1LDI1NSwyNTAsMV0sbWlzdHlyb3NlOlsyNTUsMjI4LDIyNSwxXSxtb2NjYXNpbjpbMjU1LDIyOCwxODEsMV0sbmF2YWpvd2hpdGU6WzI1NSwyMjIsMTczLDFdLG5hdnk6WzAsMCwxMjgsMV0sb2xkbGFjZTpbMjUzLDI0NSwyMzAsMV0sb2xpdmU6WzEyOCwxMjgsMCwxXSxvbGl2ZWRyYWI6WzEwNywxNDIsMzUsMV0sb3JhbmdlOlsyNTUsMTY1LDAsMV0sb3JhbmdlcmVkOlsyNTUsNjksMCwxXSxvcmNoaWQ6WzIxOCwxMTIsMjE0LDFdLHBhbGVnb2xkZW5yb2Q6WzIzOCwyMzIsMTcwLDFdLHBhbGVncmVlbjpbMTUyLDI1MSwxNTIsMV0scGFsZXR1cnF1b2lzZTpbMTc1LDIzOCwyMzgsMV0scGFsZXZpb2xldHJlZDpbMjE5LDExMiwxNDcsMV0scGFwYXlhd2hpcDpbMjU1LDIzOSwyMTMsMV0scGVhY2hwdWZmOlsyNTUsMjE4LDE4NSwxXSxwZXJ1OlsyMDUsMTMzLDYzLDFdLHBpbms6WzI1NSwxOTIsMjAzLDFdLHBsdW06WzIyMSwxNjAsMjIxLDFdLHBvd2RlcmJsdWU6WzE3NiwyMjQsMjMwLDFdLHB1cnBsZTpbMTI4LDAsMTI4LDFdLHJlYmVjY2FwdXJwbGU6WzEwMiw1MSwxNTMsMV0scmVkOlsyNTUsMCwwLDFdLHJvc3licm93bjpbMTg4LDE0MywxNDMsMV0scm95YWxibHVlOls2NSwxMDUsMjI1LDFdLHNhZGRsZWJyb3duOlsxMzksNjksMTksMV0sc2FsbW9uOlsyNTAsMTI4LDExNCwxXSxzYW5keWJyb3duOlsyNDQsMTY0LDk2LDFdLHNlYWdyZWVuOls0NiwxMzksODcsMV0sc2Vhc2hlbGw6WzI1NSwyNDUsMjM4LDFdLHNpZW5uYTpbMTYwLDgyLDQ1LDFdLHNpbHZlcjpbMTkyLDE5MiwxOTIsMV0sc2t5Ymx1ZTpbMTM1LDIwNiwyMzUsMV0sc2xhdGVibHVlOlsxMDYsOTAsMjA1LDFdLHNsYXRlZ3JheTpbMTEyLDEyOCwxNDQsMV0sc2xhdGVncmV5OlsxMTIsMTI4LDE0NCwxXSxzbm93OlsyNTUsMjUwLDI1MCwxXSxzcHJpbmdncmVlbjpbMCwyNTUsMTI3LDFdLHN0ZWVsYmx1ZTpbNzAsMTMwLDE4MCwxXSx0YW46WzIxMCwxODAsMTQwLDFdLHRlYWw6WzAsMTI4LDEyOCwxXSx0aGlzdGxlOlsyMTYsMTkxLDIxNiwxXSx0b21hdG86WzI1NSw5OSw3MSwxXSx0dXJxdW9pc2U6WzY0LDIyNCwyMDgsMV0sdmlvbGV0OlsyMzgsMTMwLDIzOCwxXSx3aGVhdDpbMjQ1LDIyMiwxNzksMV0sd2hpdGU6WzI1NSwyNTUsMjU1LDFdLHdoaXRlc21va2U6WzI0NSwyNDUsMjQ1LDFdLHllbGxvdzpbMjU1LDI1NSwwLDFdLHllbGxvd2dyZWVuOlsxNTQsMjA1LDUwLDFdfTtmdW5jdGlvbiBvKGUpe3JldHVybihlPU1hdGgucm91bmQoZSkpPDA/MDplPjI1NT8yNTU6ZX1mdW5jdGlvbiBuKGUpe3JldHVybiBlPDA/MDplPjE/MTplfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIiUiPT09ZVtlLmxlbmd0aC0xXT9vKHBhcnNlRmxvYXQoZSkvMTAwKjI1NSk6byhwYXJzZUludChlKSl9ZnVuY3Rpb24gYShlKXtyZXR1cm4iJSI9PT1lW2UubGVuZ3RoLTFdP24ocGFyc2VGbG9hdChlKS8xMDApOm4ocGFyc2VGbG9hdChlKSl9ZnVuY3Rpb24gcyhlLHQscil7cmV0dXJuIHI8MD9yKz0xOnI+MSYmKHItPTEpLDYqcjwxP2UrKHQtZSkqcio2OjIqcjwxP3Q6MypyPDI/ZSsodC1lKSooMi8zLXIpKjY6ZX10cnl7dC5wYXJzZUNTU0NvbG9yPWZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5yZXBsYWNlKC8gL2csIiIpLnRvTG93ZXJDYXNlKCk7aWYobiBpbiByKXJldHVybiByW25dLnNsaWNlKCk7aWYoIiMiPT09blswXSlyZXR1cm4gND09PW4ubGVuZ3RoPyh0PXBhcnNlSW50KG4uc3Vic3RyKDEpLDE2KSk+PTAmJnQ8PTQwOTU/WygzODQwJnQpPj40fCgzODQwJnQpPj44LDI0MCZ0fCgyNDAmdCk+PjQsMTUmdHwoMTUmdCk8PDQsMV06bnVsbDo3PT09bi5sZW5ndGgmJih0PXBhcnNlSW50KG4uc3Vic3RyKDEpLDE2KSk+PTAmJnQ8PTE2Nzc3MjE1P1soMTY3MTE2ODAmdCk+PjE2LCg2NTI4MCZ0KT4+OCwyNTUmdCwxXTpudWxsO3ZhciBsPW4uaW5kZXhPZigiKCIpLHU9bi5pbmRleE9mKCIpIik7aWYoLTEhPT1sJiZ1KzE9PT1uLmxlbmd0aCl7dmFyIGM9bi5zdWJzdHIoMCxsKSxwPW4uc3Vic3RyKGwrMSx1LShsKzEpKS5zcGxpdCgiLCIpLGQ9MTtzd2l0Y2goYyl7Y2FzZSJyZ2JhIjppZig0IT09cC5sZW5ndGgpcmV0dXJuIG51bGw7ZD1hKHAucG9wKCkpO2Nhc2UicmdiIjpyZXR1cm4gMyE9PXAubGVuZ3RoP251bGw6W2kocFswXSksaShwWzFdKSxpKHBbMl0pLGRdO2Nhc2UiaHNsYSI6aWYoNCE9PXAubGVuZ3RoKXJldHVybiBudWxsO2Q9YShwLnBvcCgpKTtjYXNlImhzbCI6aWYoMyE9PXAubGVuZ3RoKXJldHVybiBudWxsO3ZhciBoPShwYXJzZUZsb2F0KHBbMF0pJTM2MCszNjApJTM2MC8zNjAsZj1hKHBbMV0pLHk9YShwWzJdKSxtPXk8PS41P3kqKGYrMSk6eStmLXkqZixnPTIqeS1tO3JldHVybltvKDI1NSpzKGcsbSxoKzEvMykpLG8oMjU1KnMoZyxtLGgpKSxvKDI1NSpzKGcsbSxoLTEvMykpLGRdO2RlZmF1bHQ6cmV0dXJuIG51bGx9fXJldHVybiBudWxsfX1jYXRjaChlKXt9fSkpO2NsYXNzIEx7Y29uc3RydWN0b3IoZSx0LHIsbz0xKXt0aGlzLnI9ZSx0aGlzLmc9dCx0aGlzLmI9cix0aGlzLmE9b31zdGF0aWMgcGFyc2UoZSl7aWYoIWUpcmV0dXJuO2lmKGUgaW5zdGFuY2VvZiBMKXJldHVybiBlO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm47Y29uc3QgdD1GLnBhcnNlQ1NTQ29sb3IoZSk7cmV0dXJuIHQ/bmV3IEwodFswXS8yNTUqdFszXSx0WzFdLzI1NSp0WzNdLHRbMl0vMjU1KnRbM10sdFszXSk6dm9pZCAwfXRvU3RyaW5nKCl7Y29uc3RbZSx0LHIsb109dGhpcy50b0FycmF5KCk7cmV0dXJuYHJnYmEoJHtNYXRoLnJvdW5kKGUpfSwke01hdGgucm91bmQodCl9LCR7TWF0aC5yb3VuZChyKX0sJHtvfSlgfXRvQXJyYXkoKXtjb25zdHtyOmUsZzp0LGI6cixhOm99PXRoaXM7cmV0dXJuIDA9PT1vP1swLDAsMCwwXTpbMjU1KmUvbywyNTUqdC9vLDI1NSpyL28sb119dG9BcnJheTAxKCl7Y29uc3R7cjplLGc6dCxiOnIsYTpvfT10aGlzO3JldHVybiAwPT09bz9bMCwwLDAsMF06W2Uvbyx0L28sci9vLG9dfXRvQXJyYXkwMVByZW11bHRpcGxpZWRBbHBoYSgpe2NvbnN0e3I6ZSxnOnQsYjpyLGE6b309dGhpcztyZXR1cm5bZSx0LHIsb119fUwuYmxhY2s9bmV3IEwoMCwwLDAsMSksTC53aGl0ZT1uZXcgTCgxLDEsMSwxKSxMLnRyYW5zcGFyZW50PW5ldyBMKDAsMCwwLDApLEwucmVkPW5ldyBMKDEsMCwwLDEpLEwuYmx1ZT1uZXcgTCgwLDAsMSwxKTt2YXIgJD1MO2NsYXNzIFV7Y29uc3RydWN0b3IoZSx0LHIpe3RoaXMuc2Vuc2l0aXZpdHk9ZT90PyJ2YXJpYW50IjoiY2FzZSI6dD8iYWNjZW50IjoiYmFzZSIsdGhpcy5sb2NhbGU9cix0aGlzLmNvbGxhdG9yPW5ldyBJbnRsLkNvbGxhdG9yKHRoaXMubG9jYWxlP3RoaXMubG9jYWxlOltdLHtzZW5zaXRpdml0eTp0aGlzLnNlbnNpdGl2aXR5LHVzYWdlOiJzZWFyY2gifSl9Y29tcGFyZShlLHQpe3JldHVybiB0aGlzLmNvbGxhdG9yLmNvbXBhcmUoZSx0KX1yZXNvbHZlZExvY2FsZSgpe3JldHVybiBuZXcgSW50bC5Db2xsYXRvcih0aGlzLmxvY2FsZT90aGlzLmxvY2FsZTpbXSkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlfX1jbGFzcyBKe2NvbnN0cnVjdG9yKGUsdCxyLG8sbil7dGhpcy50ZXh0PWUubm9ybWFsaXplP2Uubm9ybWFsaXplKCk6ZSx0aGlzLmltYWdlPXQsdGhpcy5zY2FsZT1yLHRoaXMuZm9udFN0YWNrPW8sdGhpcy50ZXh0Q29sb3I9bn19Y2xhc3MgV3tjb25zdHJ1Y3RvcihlKXt0aGlzLnNlY3Rpb25zPWV9c3RhdGljIGZyb21TdHJpbmcoZSl7cmV0dXJuIG5ldyBXKFtuZXcgSihlLG51bGwsbnVsbCxudWxsLG51bGwpXSl9aXNFbXB0eSgpe3JldHVybiAwPT09dGhpcy5zZWN0aW9ucy5sZW5ndGh8fCF0aGlzLnNlY3Rpb25zLnNvbWUoKGU9PjAhPT1lLnRleHQubGVuZ3RofHxlLmltYWdlJiYwIT09ZS5pbWFnZS5uYW1lLmxlbmd0aCkpfXN0YXRpYyBmYWN0b3J5KGUpe3JldHVybiBlIGluc3RhbmNlb2YgVz9lOlcuZnJvbVN0cmluZyhlKX10b1N0cmluZygpe3JldHVybiAwPT09dGhpcy5zZWN0aW9ucy5sZW5ndGg/IiI6dGhpcy5zZWN0aW9ucy5tYXAoKGU9PmUudGV4dCkpLmpvaW4oIiIpfXNlcmlhbGl6ZSgpe2NvbnN0IGU9WyJmb3JtYXQiXTtmb3IoY29uc3QgdCBvZiB0aGlzLnNlY3Rpb25zKXtpZih0LmltYWdlKXtlLnB1c2goWyJpbWFnZSIsdC5pbWFnZS5uYW1lXSk7Y29udGludWV9ZS5wdXNoKHQudGV4dCk7Y29uc3Qgcj17fTt0LmZvbnRTdGFjayYmKHJbInRleHQtZm9udCJdPVsibGl0ZXJhbCIsdC5mb250U3RhY2suc3BsaXQoIiwiKV0pLHQuc2NhbGUmJihyWyJmb250LXNjYWxlIl09dC5zY2FsZSksdC50ZXh0Q29sb3ImJihyWyJ0ZXh0LWNvbG9yIl09WyJyZ2JhIl0uY29uY2F0KHQudGV4dENvbG9yLnRvQXJyYXkoKSkpLGUucHVzaChyKX1yZXR1cm4gZX19Y2xhc3MgR3tjb25zdHJ1Y3RvcihlKXt0aGlzLm5hbWU9ZS5uYW1lLHRoaXMuYXZhaWxhYmxlPWUuYXZhaWxhYmxlfXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMubmFtZX1zdGF0aWMgZnJvbVN0cmluZyhlKXtyZXR1cm4gZT9uZXcgRyh7bmFtZTplLGF2YWlsYWJsZTohMX0pOm51bGx9c2VyaWFsaXplKCl7cmV0dXJuWyJpbWFnZSIsdGhpcy5uYW1lXX19ZnVuY3Rpb24gQihlLHQscixvKXtpZighKCJudW1iZXIiPT10eXBlb2YgZSYmZT49MCYmZTw9MjU1JiYibnVtYmVyIj09dHlwZW9mIHQmJnQ+PTAmJnQ8PTI1NSYmIm51bWJlciI9PXR5cGVvZiByJiZyPj0wJiZyPD0yNTUpKXtyZXR1cm5gSW52YWxpZCByZ2JhIHZhbHVlIFskeygibnVtYmVyIj09dHlwZW9mIG8/W2UsdCxyLG9dOltlLHQscl0pLmpvaW4oIiwgIil9XTogJ3InLCAnZycsIGFuZCAnYicgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDI1NS5gfXJldHVybiB2b2lkIDA9PT1vfHwibnVtYmVyIj09dHlwZW9mIG8mJm8+PTAmJm88PTE/bnVsbDpgSW52YWxpZCByZ2JhIHZhbHVlIFske1tlLHQscixvXS5qb2luKCIsICIpfV06ICdhJyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMS5gfWZ1bmN0aW9uIFYoZSl7aWYobnVsbD09PWUpcmV0dXJuITA7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiEwO2lmKCJib29sZWFuIj09dHlwZW9mIGUpcmV0dXJuITA7aWYoIm51bWJlciI9PXR5cGVvZiBlKXJldHVybiEwO2lmKGUgaW5zdGFuY2VvZiAkKXJldHVybiEwO2lmKGUgaW5zdGFuY2VvZiBVKXJldHVybiEwO2lmKGUgaW5zdGFuY2VvZiBXKXJldHVybiEwO2lmKGUgaW5zdGFuY2VvZiBHKXJldHVybiEwO2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcihjb25zdCB0IG9mIGUpaWYoIVYodCkpcmV0dXJuITE7cmV0dXJuITB9aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IoY29uc3QgdCBpbiBlKWlmKCFWKGVbdF0pKXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIEgoZSl7aWYobnVsbD09PWUpcmV0dXJuIGo7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBUO2lmKCJib29sZWFuIj09dHlwZW9mIGUpcmV0dXJuIF87aWYoIm51bWJlciI9PXR5cGVvZiBlKXJldHVybiB6O2lmKGUgaW5zdGFuY2VvZiAkKXJldHVybiBTO2lmKGUgaW5zdGFuY2VvZiBVKXJldHVybiBDO2lmKGUgaW5zdGFuY2VvZiBXKXJldHVybiBPO2lmKGUgaW5zdGFuY2VvZiBHKXJldHVybiBFO2lmKEFycmF5LmlzQXJyYXkoZSkpe2NvbnN0IHQ9ZS5sZW5ndGg7bGV0IHI7Zm9yKGNvbnN0IHQgb2YgZSl7Y29uc3QgZT1IKHQpO2lmKHIpe2lmKHI9PT1lKWNvbnRpbnVlO3I9STticmVha31yPWV9cmV0dXJuIHEocnx8SSx0KX1yZXR1cm4gQX1mdW5jdGlvbiBaKGUpe2NvbnN0IHQ9dHlwZW9mIGU7cmV0dXJuIG51bGw9PT1lPyIiOiJzdHJpbmciPT09dHx8Im51bWJlciI9PT10fHwiYm9vbGVhbiI9PT10P1N0cmluZyhlKTplIGluc3RhbmNlb2YgJHx8ZSBpbnN0YW5jZW9mIFd8fGUgaW5zdGFuY2VvZiBHP2UudG9TdHJpbmcoKTpKU09OLnN0cmluZ2lmeShlKX1jbGFzcyBYe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy50eXBlPWUsdGhpcy52YWx1ZT10fXN0YXRpYyBwYXJzZShlLHQpe2lmKDIhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcihgJ2xpdGVyYWwnIGV4cHJlc3Npb24gcmVxdWlyZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIGJ1dCBmb3VuZCAke2UubGVuZ3RoLTF9IGluc3RlYWQuYCk7aWYoIVYoZVsxXSkpcmV0dXJuIHQuZXJyb3IoImludmFsaWQgdmFsdWUiKTtjb25zdCByPWVbMV07bGV0IG89SChyKTtjb25zdCBuPXQuZXhwZWN0ZWRUeXBlO3JldHVybiJhcnJheSIhPT1vLmtpbmR8fDAhPT1vLk58fCFufHwiYXJyYXkiIT09bi5raW5kfHwibnVtYmVyIj09dHlwZW9mIG4uTiYmMCE9PW4uTnx8KG89biksbmV3IFgobyxyKX1ldmFsdWF0ZSgpe3JldHVybiB0aGlzLnZhbHVlfWVhY2hDaGlsZCgpe31vdXRwdXREZWZpbmVkKCl7cmV0dXJuITB9c2VyaWFsaXplKCl7cmV0dXJuImFycmF5Ij09PXRoaXMudHlwZS5raW5kfHwib2JqZWN0Ij09PXRoaXMudHlwZS5raW5kP1sibGl0ZXJhbCIsdGhpcy52YWx1ZV06dGhpcy52YWx1ZSBpbnN0YW5jZW9mICQ/WyJyZ2JhIl0uY29uY2F0KHRoaXMudmFsdWUudG9BcnJheSgpKTp0aGlzLnZhbHVlIGluc3RhbmNlb2YgVz90aGlzLnZhbHVlLnNlcmlhbGl6ZSgpOnRoaXMudmFsdWV9fXZhciBLPVg7dmFyIFk9Y2xhc3N7Y29uc3RydWN0b3IoZSl7dGhpcy5uYW1lPSJFeHByZXNzaW9uRXZhbHVhdGlvbkVycm9yIix0aGlzLm1lc3NhZ2U9ZX10b0pTT04oKXtyZXR1cm4gdGhpcy5tZXNzYWdlfX07Y29uc3QgUT17c3RyaW5nOlQsbnVtYmVyOnosYm9vbGVhbjpfLG9iamVjdDpBfTtjbGFzcyBlZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudHlwZT1lLHRoaXMuYXJncz10fXN0YXRpYyBwYXJzZShlLHQpe2lmKGUubGVuZ3RoPDIpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC4iKTtsZXQgcixvPTE7Y29uc3Qgbj1lWzBdO2lmKCJhcnJheSI9PT1uKXtsZXQgbixpO2lmKGUubGVuZ3RoPjIpe2NvbnN0IHI9ZVsxXTtpZigic3RyaW5nIiE9dHlwZW9mIHJ8fCEociBpbiBRKXx8Im9iamVjdCI9PT1yKXJldHVybiB0LmVycm9yKCdUaGUgaXRlbSB0eXBlIGFyZ3VtZW50IG9mICJhcnJheSIgbXVzdCBiZSBvbmUgb2Ygc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4nLDEpO249UVtyXSxvKyt9ZWxzZSBuPUk7aWYoZS5sZW5ndGg+Myl7aWYobnVsbCE9PWVbMl0mJigibnVtYmVyIiE9dHlwZW9mIGVbMl18fGVbMl08MHx8ZVsyXSE9PU1hdGguZmxvb3IoZVsyXSkpKXJldHVybiB0LmVycm9yKCdUaGUgbGVuZ3RoIGFyZ3VtZW50IHRvICJhcnJheSIgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIgbGl0ZXJhbCcsMik7aT1lWzJdLG8rK31yPXEobixpKX1lbHNlIHI9UVtuXTtjb25zdCBpPVtdO2Zvcig7bzxlLmxlbmd0aDtvKyspe2NvbnN0IHI9dC5wYXJzZShlW29dLG8sSSk7aWYoIXIpcmV0dXJuIG51bGw7aS5wdXNoKHIpfXJldHVybiBuZXcgZWUocixpKX1ldmFsdWF0ZShlKXtmb3IobGV0IHQ9MDt0PHRoaXMuYXJncy5sZW5ndGg7dCsrKXtjb25zdCByPXRoaXMuYXJnc1t0XS5ldmFsdWF0ZShlKTtpZighUih0aGlzLnR5cGUsSChyKSkpcmV0dXJuIHI7aWYodD09PXRoaXMuYXJncy5sZW5ndGgtMSl0aHJvdyBuZXcgWShgRXhwZWN0ZWQgdmFsdWUgdG8gYmUgb2YgdHlwZSAke00odGhpcy50eXBlKX0sIGJ1dCBmb3VuZCAke00oSChyKSl9IGluc3RlYWQuYCl9cmV0dXJuIG51bGx9ZWFjaENoaWxkKGUpe3RoaXMuYXJncy5mb3JFYWNoKGUpfW91dHB1dERlZmluZWQoKXtyZXR1cm4gdGhpcy5hcmdzLmV2ZXJ5KChlPT5lLm91dHB1dERlZmluZWQoKSkpfXNlcmlhbGl6ZSgpe2NvbnN0IGU9dGhpcy50eXBlLHQ9W2Uua2luZF07aWYoImFycmF5Ij09PWUua2luZCl7Y29uc3Qgcj1lLml0ZW1UeXBlO2lmKCJzdHJpbmciPT09ci5raW5kfHwibnVtYmVyIj09PXIua2luZHx8ImJvb2xlYW4iPT09ci5raW5kKXt0LnB1c2goci5raW5kKTtjb25zdCBvPWUuTjsoIm51bWJlciI9PXR5cGVvZiBvfHx0aGlzLmFyZ3MubGVuZ3RoPjEpJiZ0LnB1c2gobyl9fXJldHVybiB0LmNvbmNhdCh0aGlzLmFyZ3MubWFwKChlPT5lLnNlcmlhbGl6ZSgpKSkpfX12YXIgdGU9ZWU7Y2xhc3MgcmV7Y29uc3RydWN0b3IoZSl7dGhpcy50eXBlPU8sdGhpcy5zZWN0aW9ucz1lfXN0YXRpYyBwYXJzZShlLHQpe2lmKGUubGVuZ3RoPDIpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC4iKTtjb25zdCByPWVbMV07aWYoIUFycmF5LmlzQXJyYXkocikmJiJvYmplY3QiPT10eXBlb2YgcilyZXR1cm4gdC5lcnJvcigiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBpbWFnZSBvciB0ZXh0IHNlY3Rpb24uIik7Y29uc3Qgbz1bXTtsZXQgbj0hMTtmb3IobGV0IHI9MTtyPD1lLmxlbmd0aC0xOysrcil7Y29uc3QgaT1lW3JdO2lmKG4mJiJvYmplY3QiPT10eXBlb2YgaSYmIUFycmF5LmlzQXJyYXkoaSkpe249ITE7bGV0IGU9bnVsbDtpZihpWyJmb250LXNjYWxlIl0mJihlPXQucGFyc2UoaVsiZm9udC1zY2FsZSJdLDEseiksIWUpKXJldHVybiBudWxsO2xldCByPW51bGw7aWYoaVsidGV4dC1mb250Il0mJihyPXQucGFyc2UoaVsidGV4dC1mb250Il0sMSxxKFQpKSwhcikpcmV0dXJuIG51bGw7bGV0IGE9bnVsbDtpZihpWyJ0ZXh0LWNvbG9yIl0mJihhPXQucGFyc2UoaVsidGV4dC1jb2xvciJdLDEsUyksIWEpKXJldHVybiBudWxsO2NvbnN0IHM9b1tvLmxlbmd0aC0xXTtzLnNjYWxlPWUscy5mb250PXIscy50ZXh0Q29sb3I9YX1lbHNle2NvbnN0IGk9dC5wYXJzZShlW3JdLDEsSSk7aWYoIWkpcmV0dXJuIG51bGw7Y29uc3QgYT1pLnR5cGUua2luZDtpZigic3RyaW5nIiE9PWEmJiJ2YWx1ZSIhPT1hJiYibnVsbCIhPT1hJiYicmVzb2x2ZWRJbWFnZSIhPT1hKXJldHVybiB0LmVycm9yKCJGb3JtYXR0ZWQgdGV4dCB0eXBlIG11c3QgYmUgJ3N0cmluZycsICd2YWx1ZScsICdpbWFnZScgb3IgJ251bGwnLiIpO249ITAsby5wdXNoKHtjb250ZW50Omksc2NhbGU6bnVsbCxmb250Om51bGwsdGV4dENvbG9yOm51bGx9KX19cmV0dXJuIG5ldyByZShvKX1ldmFsdWF0ZShlKXtyZXR1cm4gbmV3IFcodGhpcy5zZWN0aW9ucy5tYXAoKHQ9Pntjb25zdCByPXQuY29udGVudC5ldmFsdWF0ZShlKTtyZXR1cm4gSChyKT09PUU/bmV3IEooIiIscixudWxsLG51bGwsbnVsbCk6bmV3IEooWihyKSxudWxsLHQuc2NhbGU/dC5zY2FsZS5ldmFsdWF0ZShlKTpudWxsLHQuZm9udD90LmZvbnQuZXZhbHVhdGUoZSkuam9pbigiLCIpOm51bGwsdC50ZXh0Q29sb3I/dC50ZXh0Q29sb3IuZXZhbHVhdGUoZSk6bnVsbCl9KSkpfWVhY2hDaGlsZChlKXtmb3IoY29uc3QgdCBvZiB0aGlzLnNlY3Rpb25zKWUodC5jb250ZW50KSx0LnNjYWxlJiZlKHQuc2NhbGUpLHQuZm9udCYmZSh0LmZvbnQpLHQudGV4dENvbG9yJiZlKHQudGV4dENvbG9yKX1vdXRwdXREZWZpbmVkKCl7cmV0dXJuITF9c2VyaWFsaXplKCl7Y29uc3QgZT1bImZvcm1hdCJdO2Zvcihjb25zdCB0IG9mIHRoaXMuc2VjdGlvbnMpe2UucHVzaCh0LmNvbnRlbnQuc2VyaWFsaXplKCkpO2NvbnN0IHI9e307dC5zY2FsZSYmKHJbImZvbnQtc2NhbGUiXT10LnNjYWxlLnNlcmlhbGl6ZSgpKSx0LmZvbnQmJihyWyJ0ZXh0LWZvbnQiXT10LmZvbnQuc2VyaWFsaXplKCkpLHQudGV4dENvbG9yJiYoclsidGV4dC1jb2xvciJdPXQudGV4dENvbG9yLnNlcmlhbGl6ZSgpKSxlLnB1c2gocil9cmV0dXJuIGV9fWNsYXNzIG9le2NvbnN0cnVjdG9yKGUpe3RoaXMudHlwZT1FLHRoaXMuaW5wdXQ9ZX1zdGF0aWMgcGFyc2UoZSx0KXtpZigyIT09ZS5sZW5ndGgpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIHR3byBhcmd1bWVudHMuIik7Y29uc3Qgcj10LnBhcnNlKGVbMV0sMSxUKTtyZXR1cm4gcj9uZXcgb2Uocik6dC5lcnJvcigiTm8gaW1hZ2UgbmFtZSBwcm92aWRlZC4iKX1ldmFsdWF0ZShlKXtjb25zdCB0PXRoaXMuaW5wdXQuZXZhbHVhdGUoZSkscj1HLmZyb21TdHJpbmcodCk7cmV0dXJuIHImJmUuYXZhaWxhYmxlSW1hZ2VzJiYoci5hdmFpbGFibGU9ZS5hdmFpbGFibGVJbWFnZXMuaW5kZXhPZih0KT4tMSkscn1lYWNoQ2hpbGQoZSl7ZSh0aGlzLmlucHV0KX1vdXRwdXREZWZpbmVkKCl7cmV0dXJuITF9c2VyaWFsaXplKCl7cmV0dXJuWyJpbWFnZSIsdGhpcy5pbnB1dC5zZXJpYWxpemUoKV19fWNvbnN0IG5lPXsidG8tYm9vbGVhbiI6XywidG8tY29sb3IiOlMsInRvLW51bWJlciI6eiwidG8tc3RyaW5nIjpUfTtjbGFzcyBpZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudHlwZT1lLHRoaXMuYXJncz10fXN0YXRpYyBwYXJzZShlLHQpe2lmKGUubGVuZ3RoPDIpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC4iKTtjb25zdCByPWVbMF07aWYoKCJ0by1ib29sZWFuIj09PXJ8fCJ0by1zdHJpbmciPT09cikmJjIhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgb25lIGFyZ3VtZW50LiIpO2NvbnN0IG89bmVbcl0sbj1bXTtmb3IobGV0IHI9MTtyPGUubGVuZ3RoO3IrKyl7Y29uc3Qgbz10LnBhcnNlKGVbcl0scixJKTtpZighbylyZXR1cm4gbnVsbDtuLnB1c2gobyl9cmV0dXJuIG5ldyBpZShvLG4pfWV2YWx1YXRlKGUpe2lmKCJib29sZWFuIj09PXRoaXMudHlwZS5raW5kKXJldHVybiBCb29sZWFuKHRoaXMuYXJnc1swXS5ldmFsdWF0ZShlKSk7aWYoImNvbG9yIj09PXRoaXMudHlwZS5raW5kKXtsZXQgdCxyO2Zvcihjb25zdCBvIG9mIHRoaXMuYXJncyl7aWYodD1vLmV2YWx1YXRlKGUpLHI9bnVsbCx0IGluc3RhbmNlb2YgJClyZXR1cm4gdDtpZigic3RyaW5nIj09dHlwZW9mIHQpe2NvbnN0IHI9ZS5wYXJzZUNvbG9yKHQpO2lmKHIpcmV0dXJuIHJ9ZWxzZSBpZihBcnJheS5pc0FycmF5KHQpJiYocj10Lmxlbmd0aDwzfHx0Lmxlbmd0aD40P2BJbnZhbGlkIHJiZ2EgdmFsdWUgJHtKU09OLnN0cmluZ2lmeSh0KX06IGV4cGVjdGVkIGFuIGFycmF5IGNvbnRhaW5pbmcgZWl0aGVyIHRocmVlIG9yIGZvdXIgbnVtZXJpYyB2YWx1ZXMuYDpCKHRbMF0sdFsxXSx0WzJdLHRbM10pLCFyKSlyZXR1cm4gbmV3ICQodFswXS8yNTUsdFsxXS8yNTUsdFsyXS8yNTUsdFszXSl9dGhyb3cgbmV3IFkocnx8YENvdWxkIG5vdCBwYXJzZSBjb2xvciBmcm9tIHZhbHVlICckeyJzdHJpbmciPT10eXBlb2YgdD90OlN0cmluZyhKU09OLnN0cmluZ2lmeSh0KSl9J2ApfWlmKCJudW1iZXIiPT09dGhpcy50eXBlLmtpbmQpe2xldCB0PW51bGw7Zm9yKGNvbnN0IHIgb2YgdGhpcy5hcmdzKXtpZih0PXIuZXZhbHVhdGUoZSksbnVsbD09PXQpcmV0dXJuIDA7Y29uc3Qgbz1OdW1iZXIodCk7aWYoIWlzTmFOKG8pKXJldHVybiBvfXRocm93IG5ldyBZKGBDb3VsZCBub3QgY29udmVydCAke0pTT04uc3RyaW5naWZ5KHQpfSB0byBudW1iZXIuYCl9cmV0dXJuImZvcm1hdHRlZCI9PT10aGlzLnR5cGUua2luZD9XLmZyb21TdHJpbmcoWih0aGlzLmFyZ3NbMF0uZXZhbHVhdGUoZSkpKToicmVzb2x2ZWRJbWFnZSI9PT10aGlzLnR5cGUua2luZD9HLmZyb21TdHJpbmcoWih0aGlzLmFyZ3NbMF0uZXZhbHVhdGUoZSkpKTpaKHRoaXMuYXJnc1swXS5ldmFsdWF0ZShlKSl9ZWFjaENoaWxkKGUpe3RoaXMuYXJncy5mb3JFYWNoKGUpfW91dHB1dERlZmluZWQoKXtyZXR1cm4gdGhpcy5hcmdzLmV2ZXJ5KChlPT5lLm91dHB1dERlZmluZWQoKSkpfXNlcmlhbGl6ZSgpe2lmKCJmb3JtYXR0ZWQiPT09dGhpcy50eXBlLmtpbmQpcmV0dXJuIG5ldyByZShbe2NvbnRlbnQ6dGhpcy5hcmdzWzBdLHNjYWxlOm51bGwsZm9udDpudWxsLHRleHRDb2xvcjpudWxsfV0pLnNlcmlhbGl6ZSgpO2lmKCJyZXNvbHZlZEltYWdlIj09PXRoaXMudHlwZS5raW5kKXJldHVybiBuZXcgb2UodGhpcy5hcmdzWzBdKS5zZXJpYWxpemUoKTtjb25zdCBlPVtgdG8tJHt0aGlzLnR5cGUua2luZH1gXTtyZXR1cm4gdGhpcy5lYWNoQ2hpbGQoKHQ9PntlLnB1c2godC5zZXJpYWxpemUoKSl9KSksZX19dmFyIGFlPWllO2NvbnN0IHNlPVsiVW5rbm93biIsIlBvaW50IiwiTGluZVN0cmluZyIsIlBvbHlnb24iXTt2YXIgbGU9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aGlzLmdsb2JhbHM9bnVsbCx0aGlzLmZlYXR1cmU9bnVsbCx0aGlzLmZlYXR1cmVTdGF0ZT1udWxsLHRoaXMuZm9ybWF0dGVkU2VjdGlvbj1udWxsLHRoaXMuX3BhcnNlQ29sb3JDYWNoZT17fSx0aGlzLmF2YWlsYWJsZUltYWdlcz1udWxsLHRoaXMuY2Fub25pY2FsPW51bGwsdGhpcy5mZWF0dXJlVGlsZUNvb3JkPW51bGwsdGhpcy5mZWF0dXJlRGlzdGFuY2VEYXRhPW51bGx9aWQoKXtyZXR1cm4gdGhpcy5mZWF0dXJlJiYiaWQiaW4gdGhpcy5mZWF0dXJlJiZ0aGlzLmZlYXR1cmUuaWQ/dGhpcy5mZWF0dXJlLmlkOm51bGx9Z2VvbWV0cnlUeXBlKCl7cmV0dXJuIHRoaXMuZmVhdHVyZT8ibnVtYmVyIj09dHlwZW9mIHRoaXMuZmVhdHVyZS50eXBlP3NlW3RoaXMuZmVhdHVyZS50eXBlXTp0aGlzLmZlYXR1cmUudHlwZTpudWxsfWdlb21ldHJ5KCl7cmV0dXJuIHRoaXMuZmVhdHVyZSYmImdlb21ldHJ5ImluIHRoaXMuZmVhdHVyZT90aGlzLmZlYXR1cmUuZ2VvbWV0cnk6bnVsbH1jYW5vbmljYWxJRCgpe3JldHVybiB0aGlzLmNhbm9uaWNhbH1wcm9wZXJ0aWVzKCl7cmV0dXJuIHRoaXMuZmVhdHVyZSYmdGhpcy5mZWF0dXJlLnByb3BlcnRpZXN8fHt9fWRpc3RhbmNlRnJvbUNlbnRlcigpe2lmKHRoaXMuZmVhdHVyZVRpbGVDb29yZCYmdGhpcy5mZWF0dXJlRGlzdGFuY2VEYXRhKXtjb25zdCBlPXRoaXMuZmVhdHVyZURpc3RhbmNlRGF0YS5jZW50ZXIsdD10aGlzLmZlYXR1cmVEaXN0YW5jZURhdGEuc2NhbGUse3g6cix5Om99PXRoaXMuZmVhdHVyZVRpbGVDb29yZCxuPXIqdC1lWzBdLGk9byp0LWVbMV07cmV0dXJuIHRoaXMuZmVhdHVyZURpc3RhbmNlRGF0YS5iZWFyaW5nWzBdKm4rdGhpcy5mZWF0dXJlRGlzdGFuY2VEYXRhLmJlYXJpbmdbMV0qaX1yZXR1cm4gMH1wYXJzZUNvbG9yKGUpe2xldCB0PXRoaXMuX3BhcnNlQ29sb3JDYWNoZVtlXTtyZXR1cm4gdHx8KHQ9dGhpcy5fcGFyc2VDb2xvckNhY2hlW2VdPSQucGFyc2UoZSkpLHR9fTtjbGFzcyB1ZXtjb25zdHJ1Y3RvcihlLHQscixvKXt0aGlzLm5hbWU9ZSx0aGlzLnR5cGU9dCx0aGlzLl9ldmFsdWF0ZT1yLHRoaXMuYXJncz1vfWV2YWx1YXRlKGUpe3JldHVybiB0aGlzLl9ldmFsdWF0ZShlLHRoaXMuYXJncyl9ZWFjaENoaWxkKGUpe3RoaXMuYXJncy5mb3JFYWNoKGUpfW91dHB1dERlZmluZWQoKXtyZXR1cm4hMX1zZXJpYWxpemUoKXtyZXR1cm5bdGhpcy5uYW1lXS5jb25jYXQodGhpcy5hcmdzLm1hcCgoZT0+ZS5zZXJpYWxpemUoKSkpKX1zdGF0aWMgcGFyc2UoZSx0KXtjb25zdCByPWVbMF0sbz11ZS5kZWZpbml0aW9uc1tyXTtpZighbylyZXR1cm4gdC5lcnJvcihgVW5rbm93biBleHByZXNzaW9uICIke3J9Ii4gSWYgeW91IHdhbnRlZCBhIGxpdGVyYWwgYXJyYXksIHVzZSBbImxpdGVyYWwiLCBbLi4uXV0uYCwwKTtjb25zdCBuPUFycmF5LmlzQXJyYXkobyk/b1swXTpvLnR5cGUsaT1BcnJheS5pc0FycmF5KG8pP1tbb1sxXSxvWzJdXV06by5vdmVybG9hZHMsYT1pLmZpbHRlcigoKFt0XSk9PiFBcnJheS5pc0FycmF5KHQpfHx0Lmxlbmd0aD09PWUubGVuZ3RoLTEpKTtsZXQgcz1udWxsO2Zvcihjb25zdFtvLGldb2YgYSl7cz1uZXcgRGUodC5yZWdpc3RyeSx0LnBhdGgsbnVsbCx0LnNjb3BlKTtjb25zdCBhPVtdO2xldCBsPSExO2ZvcihsZXQgdD0xO3Q8ZS5sZW5ndGg7dCsrKXtjb25zdCByPWVbdF0sbj1BcnJheS5pc0FycmF5KG8pP29bdC0xXTpvLnR5cGUsaT1zLnBhcnNlKHIsMSthLmxlbmd0aCxuKTtpZighaSl7bD0hMDticmVha31hLnB1c2goaSl9aWYoIWwpaWYoQXJyYXkuaXNBcnJheShvKSYmby5sZW5ndGghPT1hLmxlbmd0aClzLmVycm9yKGBFeHBlY3RlZCAke28ubGVuZ3RofSBhcmd1bWVudHMsIGJ1dCBmb3VuZCAke2EubGVuZ3RofSBpbnN0ZWFkLmApO2Vsc2V7Zm9yKGxldCBlPTA7ZTxhLmxlbmd0aDtlKyspe2NvbnN0IHQ9QXJyYXkuaXNBcnJheShvKT9vW2VdOm8udHlwZSxyPWFbZV07cy5jb25jYXQoZSsxKS5jaGVja1N1YnR5cGUodCxyLnR5cGUpfWlmKDA9PT1zLmVycm9ycy5sZW5ndGgpcmV0dXJuIG5ldyB1ZShyLG4saSxhKX19aWYoMT09PWEubGVuZ3RoKXQuZXJyb3JzLnB1c2goLi4ucy5lcnJvcnMpO2Vsc2V7Y29uc3Qgcj0oYS5sZW5ndGg/YTppKS5tYXAoKChbZV0pPT57cmV0dXJuIHQ9ZSxBcnJheS5pc0FycmF5KHQpP2AoJHt0Lm1hcChNKS5qb2luKCIsICIpfSlgOmAoJHtNKHQudHlwZSl9Li4uKWA7dmFyIHR9KSkuam9pbigiIHwgIiksbz1bXTtmb3IobGV0IHI9MTtyPGUubGVuZ3RoO3IrKyl7Y29uc3Qgbj10LnBhcnNlKGVbcl0sMStvLmxlbmd0aCk7aWYoIW4pcmV0dXJuIG51bGw7by5wdXNoKE0obi50eXBlKSl9dC5lcnJvcihgRXhwZWN0ZWQgYXJndW1lbnRzIG9mIHR5cGUgJHtyfSwgYnV0IGZvdW5kICgke28uam9pbigiLCAiKX0pIGluc3RlYWQuYCl9cmV0dXJuIG51bGx9c3RhdGljIHJlZ2lzdGVyKGUsdCl7dWUuZGVmaW5pdGlvbnM9dDtmb3IoY29uc3QgciBpbiB0KWVbcl09dWV9fXZhciBjZT11ZTtjbGFzcyBwZXtjb25zdHJ1Y3RvcihlLHQscil7dGhpcy50eXBlPUMsdGhpcy5sb2NhbGU9cix0aGlzLmNhc2VTZW5zaXRpdmU9ZSx0aGlzLmRpYWNyaXRpY1NlbnNpdGl2ZT10fXN0YXRpYyBwYXJzZShlLHQpe2lmKDIhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgb25lIGFyZ3VtZW50LiIpO2NvbnN0IHI9ZVsxXTtpZigib2JqZWN0IiE9dHlwZW9mIHJ8fEFycmF5LmlzQXJyYXkocikpcmV0dXJuIHQuZXJyb3IoIkNvbGxhdG9yIG9wdGlvbnMgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QuIik7Y29uc3Qgbz10LnBhcnNlKHZvaWQgMCE9PXJbImNhc2Utc2Vuc2l0aXZlIl0mJnJbImNhc2Utc2Vuc2l0aXZlIl0sMSxfKTtpZighbylyZXR1cm4gbnVsbDtjb25zdCBuPXQucGFyc2Uodm9pZCAwIT09clsiZGlhY3JpdGljLXNlbnNpdGl2ZSJdJiZyWyJkaWFjcml0aWMtc2Vuc2l0aXZlIl0sMSxfKTtpZighbilyZXR1cm4gbnVsbDtsZXQgaT1udWxsO3JldHVybiByLmxvY2FsZSYmKGk9dC5wYXJzZShyLmxvY2FsZSwxLFQpLCFpKT9udWxsOm5ldyBwZShvLG4saSl9ZXZhbHVhdGUoZSl7cmV0dXJuIG5ldyBVKHRoaXMuY2FzZVNlbnNpdGl2ZS5ldmFsdWF0ZShlKSx0aGlzLmRpYWNyaXRpY1NlbnNpdGl2ZS5ldmFsdWF0ZShlKSx0aGlzLmxvY2FsZT90aGlzLmxvY2FsZS5ldmFsdWF0ZShlKTpudWxsKX1lYWNoQ2hpbGQoZSl7ZSh0aGlzLmNhc2VTZW5zaXRpdmUpLGUodGhpcy5kaWFjcml0aWNTZW5zaXRpdmUpLHRoaXMubG9jYWxlJiZlKHRoaXMubG9jYWxlKX1vdXRwdXREZWZpbmVkKCl7cmV0dXJuITF9c2VyaWFsaXplKCl7Y29uc3QgZT17fTtyZXR1cm4gZVsiY2FzZS1zZW5zaXRpdmUiXT10aGlzLmNhc2VTZW5zaXRpdmUuc2VyaWFsaXplKCksZVsiZGlhY3JpdGljLXNlbnNpdGl2ZSJdPXRoaXMuZGlhY3JpdGljU2Vuc2l0aXZlLnNlcmlhbGl6ZSgpLHRoaXMubG9jYWxlJiYoZS5sb2NhbGU9dGhpcy5sb2NhbGUuc2VyaWFsaXplKCkpLFsiY29sbGF0b3IiLGVdfX1jb25zdCBkZT04MTkyO2Z1bmN0aW9uIGhlKGUsdCl7ZVswXT1NYXRoLm1pbihlWzBdLHRbMF0pLGVbMV09TWF0aC5taW4oZVsxXSx0WzFdKSxlWzJdPU1hdGgubWF4KGVbMl0sdFswXSksZVszXT1NYXRoLm1heChlWzNdLHRbMV0pfWZ1bmN0aW9uIGZlKGUsdCl7cmV0dXJuIShlWzBdPD10WzBdKSYmKCEoZVsyXT49dFsyXSkmJighKGVbMV08PXRbMV0pJiYhKGVbM10+PXRbM10pKSl9ZnVuY3Rpb24geWUoZSx0KXtjb25zdCByPSgxODArZVswXSkvMzYwO2NvbnN0IG89KG49ZVsxXSwoMTgwLTE4MC9NYXRoLlBJKk1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkvNCtuKk1hdGguUEkvMzYwKSkpLzM2MCk7dmFyIG47Y29uc3QgaT1NYXRoLnBvdygyLHQueik7cmV0dXJuW01hdGgucm91bmQocippKmRlKSxNYXRoLnJvdW5kKG8qaSpkZSldfWZ1bmN0aW9uIG1lKGUsdCxyKXtjb25zdCBvPWVbMF0tdFswXSxuPWVbMV0tdFsxXSxpPWVbMF0tclswXSxhPWVbMV0tclsxXTtyZXR1cm4gbyphLWkqbj09MCYmbyppPD0wJiZuKmE8PTB9ZnVuY3Rpb24gZ2UoZSx0KXtsZXQgcj0hMTtmb3IobGV0IGE9MCxzPXQubGVuZ3RoO2E8czthKyspe2NvbnN0IHM9dFthXTtmb3IobGV0IHQ9MCxhPXMubGVuZ3RoO3Q8YS0xO3QrKyl7aWYobWUoZSxzW3RdLHNbdCsxXSkpcmV0dXJuITE7bz1lLG49c1t0XSxpPXNbdCsxXSxuWzFdPm9bMV0hPWlbMV0+b1sxXSYmb1swXTwoaVswXS1uWzBdKSoob1sxXS1uWzFdKS8oaVsxXS1uWzFdKStuWzBdJiYocj0hcil9fXZhciBvLG4saTtyZXR1cm4gcn1mdW5jdGlvbiB2ZShlLHQpe2ZvcihsZXQgcj0wO3I8dC5sZW5ndGg7cisrKWlmKGdlKGUsdFtyXSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gYmUoZSx0LHIsbyl7Y29uc3Qgbj1lWzBdLXJbMF0saT1lWzFdLXJbMV0sYT10WzBdLXJbMF0scz10WzFdLXJbMV0sbD1vWzBdLXJbMF0sdT1vWzFdLXJbMV0sYz1uKnUtbCppLHA9YSp1LWwqcztyZXR1cm4gYz4wJiZwPDB8fGM8MCYmcD4wfWZ1bmN0aW9uIHhlKGUsdCxyLG8pe2NvbnN0IG49W3RbMF0tZVswXSx0WzFdLWVbMV1dLGk9W29bMF0tclswXSxvWzFdLXJbMV1dO3JldHVybiAwIT0oYT1pKVswXSoocz1uKVsxXS1hWzFdKnNbMF0mJiEoIWJlKGUsdCxyLG8pfHwhYmUocixvLGUsdCkpO3ZhciBhLHN9ZnVuY3Rpb24gd2UoZSx0LHIpe2Zvcihjb25zdCBvIG9mIHIpZm9yKGxldCByPTA7cjxvLmxlbmd0aC0xOysrcilpZih4ZShlLHQsb1tyXSxvW3IrMV0pKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGtlKGUsdCl7Zm9yKGxldCByPTA7cjxlLmxlbmd0aDsrK3IpaWYoIWdlKGVbcl0sdCkpcmV0dXJuITE7Zm9yKGxldCByPTA7cjxlLmxlbmd0aC0xOysrcilpZih3ZShlW3JdLGVbcisxXSx0KSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBqZShlLHQpe2ZvcihsZXQgcj0wO3I8dC5sZW5ndGg7cisrKWlmKGtlKGUsdFtyXSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gemUoZSx0LHIpe2NvbnN0IG89W107Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspe2NvbnN0IGk9W107Zm9yKGxldCBvPTA7bzxlW25dLmxlbmd0aDtvKyspe2NvbnN0IGE9eWUoZVtuXVtvXSxyKTtoZSh0LGEpLGkucHVzaChhKX1vLnB1c2goaSl9cmV0dXJuIG99ZnVuY3Rpb24gVGUoZSx0LHIpe2NvbnN0IG89W107Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspe2NvbnN0IGk9emUoZVtuXSx0LHIpO28ucHVzaChpKX1yZXR1cm4gb31mdW5jdGlvbiBfZShlLHQscixvKXtpZihlWzBdPHJbMF18fGVbMF0+clsyXSl7Y29uc3QgdD0uNSpvO2xldCBuPWVbMF0tclswXT50Py1vOnJbMF0tZVswXT50P286MDswPT09biYmKG49ZVswXS1yWzJdPnQ/LW86clsyXS1lWzBdPnQ/bzowKSxlWzBdKz1ufWhlKHQsZSl9ZnVuY3Rpb24gU2UoZSx0LHIsbyl7Y29uc3Qgbj1NYXRoLnBvdygyLG8ueikqZGUsaT1bby54KmRlLG8ueSpkZV0sYT1bXTtpZighZSlyZXR1cm4gYTtmb3IoY29uc3QgbyBvZiBlKWZvcihjb25zdCBlIG9mIG8pe2NvbnN0IG89W2UueCtpWzBdLGUueStpWzFdXTtfZShvLHQscixuKSxhLnB1c2gobyl9cmV0dXJuIGF9ZnVuY3Rpb24gQWUoZSx0LHIsbyl7Y29uc3Qgbj1NYXRoLnBvdygyLG8ueikqZGUsaT1bby54KmRlLG8ueSpkZV0sYT1bXTtpZighZSlyZXR1cm4gYTtmb3IoY29uc3QgciBvZiBlKXtjb25zdCBlPVtdO2Zvcihjb25zdCBvIG9mIHIpe2NvbnN0IHI9W28ueCtpWzBdLG8ueStpWzFdXTtoZSh0LHIpLGUucHVzaChyKX1hLnB1c2goZSl9aWYodFsyXS10WzBdPD1uLzIpeyhzPXQpWzBdPXNbMV09MS8wLHNbMl09c1szXT0tMS8wO2Zvcihjb25zdCBlIG9mIGEpZm9yKGNvbnN0IG8gb2YgZSlfZShvLHQscixuKX12YXIgcztyZXR1cm4gYX1jbGFzcyBJZXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudHlwZT1fLHRoaXMuZ2VvanNvbj1lLHRoaXMuZ2VvbWV0cmllcz10fXN0YXRpYyBwYXJzZShlLHQpe2lmKDIhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcihgJ3dpdGhpbicgZXhwcmVzc2lvbiByZXF1aXJlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgYnV0IGZvdW5kICR7ZS5sZW5ndGgtMX0gaW5zdGVhZC5gKTtpZihWKGVbMV0pKXtjb25zdCB0PWVbMV07aWYoIkZlYXR1cmVDb2xsZWN0aW9uIj09PXQudHlwZSlmb3IobGV0IGU9MDtlPHQuZmVhdHVyZXMubGVuZ3RoOysrZSl7Y29uc3Qgcj10LmZlYXR1cmVzW2VdLmdlb21ldHJ5LnR5cGU7aWYoIlBvbHlnb24iPT09cnx8Ik11bHRpUG9seWdvbiI9PT1yKXJldHVybiBuZXcgSWUodCx0LmZlYXR1cmVzW2VdLmdlb21ldHJ5KX1lbHNlIGlmKCJGZWF0dXJlIj09PXQudHlwZSl7Y29uc3QgZT10Lmdlb21ldHJ5LnR5cGU7aWYoIlBvbHlnb24iPT09ZXx8Ik11bHRpUG9seWdvbiI9PT1lKXJldHVybiBuZXcgSWUodCx0Lmdlb21ldHJ5KX1lbHNlIGlmKCJQb2x5Z29uIj09PXQudHlwZXx8Ik11bHRpUG9seWdvbiI9PT10LnR5cGUpcmV0dXJuIG5ldyBJZSh0LHQpfXJldHVybiB0LmVycm9yKCInd2l0aGluJyBleHByZXNzaW9uIHJlcXVpcmVzIHZhbGlkIGdlb2pzb24gb2JqZWN0IHRoYXQgY29udGFpbnMgcG9seWdvbiBnZW9tZXRyeSB0eXBlLiIpfWV2YWx1YXRlKGUpe2lmKG51bGwhPWUuZ2VvbWV0cnkoKSYmbnVsbCE9ZS5jYW5vbmljYWxJRCgpKXtpZigiUG9pbnQiPT09ZS5nZW9tZXRyeVR5cGUoKSlyZXR1cm4gZnVuY3Rpb24oZSx0KXtjb25zdCByPVsxLzAsMS8wLC0xLzAsLTEvMF0sbz1bMS8wLDEvMCwtMS8wLC0xLzBdLG49ZS5jYW5vbmljYWxJRCgpO2lmKCFuKXJldHVybiExO2lmKCJQb2x5Z29uIj09PXQudHlwZSl7Y29uc3QgaT16ZSh0LmNvb3JkaW5hdGVzLG8sbiksYT1TZShlLmdlb21ldHJ5KCkscixvLG4pO2lmKCFmZShyLG8pKXJldHVybiExO2Zvcihjb25zdCBlIG9mIGEpaWYoIWdlKGUsaSkpcmV0dXJuITF9aWYoIk11bHRpUG9seWdvbiI9PT10LnR5cGUpe2NvbnN0IGk9VGUodC5jb29yZGluYXRlcyxvLG4pLGE9U2UoZS5nZW9tZXRyeSgpLHIsbyxuKTtpZighZmUocixvKSlyZXR1cm4hMTtmb3IoY29uc3QgZSBvZiBhKWlmKCF2ZShlLGkpKXJldHVybiExfXJldHVybiEwfShlLHRoaXMuZ2VvbWV0cmllcyk7aWYoIkxpbmVTdHJpbmciPT09ZS5nZW9tZXRyeVR5cGUoKSlyZXR1cm4gZnVuY3Rpb24oZSx0KXtjb25zdCByPVsxLzAsMS8wLC0xLzAsLTEvMF0sbz1bMS8wLDEvMCwtMS8wLC0xLzBdLG49ZS5jYW5vbmljYWxJRCgpO2lmKCFuKXJldHVybiExO2lmKCJQb2x5Z29uIj09PXQudHlwZSl7Y29uc3QgaT16ZSh0LmNvb3JkaW5hdGVzLG8sbiksYT1BZShlLmdlb21ldHJ5KCkscixvLG4pO2lmKCFmZShyLG8pKXJldHVybiExO2Zvcihjb25zdCBlIG9mIGEpaWYoIWtlKGUsaSkpcmV0dXJuITF9aWYoIk11bHRpUG9seWdvbiI9PT10LnR5cGUpe2NvbnN0IGk9VGUodC5jb29yZGluYXRlcyxvLG4pLGE9QWUoZS5nZW9tZXRyeSgpLHIsbyxuKTtpZighZmUocixvKSlyZXR1cm4hMTtmb3IoY29uc3QgZSBvZiBhKWlmKCFqZShlLGkpKXJldHVybiExfXJldHVybiEwfShlLHRoaXMuZ2VvbWV0cmllcyl9cmV0dXJuITF9ZWFjaENoaWxkKCl7fW91dHB1dERlZmluZWQoKXtyZXR1cm4hMH1zZXJpYWxpemUoKXtyZXR1cm5bIndpdGhpbiIsdGhpcy5nZW9qc29uXX19dmFyIENlPUllO2Z1bmN0aW9uIE9lKGUpe2lmKGUgaW5zdGFuY2VvZiBjZSl7aWYoImdldCI9PT1lLm5hbWUmJjE9PT1lLmFyZ3MubGVuZ3RoKXJldHVybiExO2lmKCJmZWF0dXJlLXN0YXRlIj09PWUubmFtZSlyZXR1cm4hMTtpZigiaGFzIj09PWUubmFtZSYmMT09PWUuYXJncy5sZW5ndGgpcmV0dXJuITE7aWYoInByb3BlcnRpZXMiPT09ZS5uYW1lfHwiZ2VvbWV0cnktdHlwZSI9PT1lLm5hbWV8fCJpZCI9PT1lLm5hbWUpcmV0dXJuITE7aWYoL15maWx0ZXItLy50ZXN0KGUubmFtZSkpcmV0dXJuITF9aWYoZSBpbnN0YW5jZW9mIENlKXJldHVybiExO2xldCB0PSEwO3JldHVybiBlLmVhY2hDaGlsZCgoZT0+e3QmJiFPZShlKSYmKHQ9ITEpfSkpLHR9ZnVuY3Rpb24gRWUoZSl7aWYoZSBpbnN0YW5jZW9mIGNlJiYiZmVhdHVyZS1zdGF0ZSI9PT1lLm5hbWUpcmV0dXJuITE7bGV0IHQ9ITA7cmV0dXJuIGUuZWFjaENoaWxkKChlPT57dCYmIUVlKGUpJiYodD0hMSl9KSksdH1mdW5jdGlvbiBxZShlLHQpe2lmKGUgaW5zdGFuY2VvZiBjZSYmdC5pbmRleE9mKGUubmFtZSk+PTApcmV0dXJuITE7bGV0IHI9ITA7cmV0dXJuIGUuZWFjaENoaWxkKChlPT57ciYmIXFlKGUsdCkmJihyPSExKX0pKSxyfWNsYXNzIE1le2NvbnN0cnVjdG9yKGUsdCl7dGhpcy50eXBlPXQudHlwZSx0aGlzLm5hbWU9ZSx0aGlzLmJvdW5kRXhwcmVzc2lvbj10fXN0YXRpYyBwYXJzZShlLHQpe2lmKDIhPT1lLmxlbmd0aHx8InN0cmluZyIhPXR5cGVvZiBlWzFdKXJldHVybiB0LmVycm9yKCIndmFyJyBleHByZXNzaW9uIHJlcXVpcmVzIGV4YWN0bHkgb25lIHN0cmluZyBsaXRlcmFsIGFyZ3VtZW50LiIpO2NvbnN0IHI9ZVsxXTtyZXR1cm4gdC5zY29wZS5oYXMocik/bmV3IE1lKHIsdC5zY29wZS5nZXQocikpOnQuZXJyb3IoYFVua25vd24gdmFyaWFibGUgIiR7cn0iLiBNYWtlIHN1cmUgIiR7cn0iIGhhcyBiZWVuIGJvdW5kIGluIGFuIGVuY2xvc2luZyAibGV0IiBleHByZXNzaW9uIGJlZm9yZSB1c2luZyBpdC5gLDEpfWV2YWx1YXRlKGUpe3JldHVybiB0aGlzLmJvdW5kRXhwcmVzc2lvbi5ldmFsdWF0ZShlKX1lYWNoQ2hpbGQoKXt9b3V0cHV0RGVmaW5lZCgpe3JldHVybiExfXNlcmlhbGl6ZSgpe3JldHVyblsidmFyIix0aGlzLm5hbWVdfX12YXIgTmU9TWU7Y2xhc3MgUmV7Y29uc3RydWN0b3IoZSx0PVtdLHIsbz1uZXcgayxuPVtdKXt0aGlzLnJlZ2lzdHJ5PWUsdGhpcy5wYXRoPXQsdGhpcy5rZXk9dC5tYXAoKGU9PmBbJHtlfV1gKSkuam9pbigiIiksdGhpcy5zY29wZT1vLHRoaXMuZXJyb3JzPW4sdGhpcy5leHBlY3RlZFR5cGU9cn1wYXJzZShlLHQscixvLG49e30pe3JldHVybiB0P3RoaXMuY29uY2F0KHQscixvKS5fcGFyc2UoZSxuKTp0aGlzLl9wYXJzZShlLG4pfV9wYXJzZShlLHQpe2Z1bmN0aW9uIHIoZSx0LHIpe3JldHVybiJhc3NlcnQiPT09cj9uZXcgdGUodCxbZV0pOiJjb2VyY2UiPT09cj9uZXcgYWUodCxbZV0pOmV9aWYobnVsbCE9PWUmJiJzdHJpbmciIT10eXBlb2YgZSYmImJvb2xlYW4iIT10eXBlb2YgZSYmIm51bWJlciIhPXR5cGVvZiBlfHwoZT1bImxpdGVyYWwiLGVdKSxBcnJheS5pc0FycmF5KGUpKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIHRoaXMuZXJyb3IoJ0V4cGVjdGVkIGFuIGFycmF5IHdpdGggYXQgbGVhc3Qgb25lIGVsZW1lbnQuIElmIHlvdSB3YW50ZWQgYSBsaXRlcmFsIGFycmF5LCB1c2UgWyJsaXRlcmFsIiwgW11dLicpO2NvbnN0IG89ZVswXTtpZigic3RyaW5nIiE9dHlwZW9mIG8pcmV0dXJuIHRoaXMuZXJyb3IoYEV4cHJlc3Npb24gbmFtZSBtdXN0IGJlIGEgc3RyaW5nLCBidXQgZm91bmQgJHt0eXBlb2Ygb30gaW5zdGVhZC4gSWYgeW91IHdhbnRlZCBhIGxpdGVyYWwgYXJyYXksIHVzZSBbImxpdGVyYWwiLCBbLi4uXV0uYCwwKSxudWxsO2NvbnN0IG49dGhpcy5yZWdpc3RyeVtvXTtpZihuKXtsZXQgbz1uLnBhcnNlKGUsdGhpcyk7aWYoIW8pcmV0dXJuIG51bGw7aWYodGhpcy5leHBlY3RlZFR5cGUpe2NvbnN0IGU9dGhpcy5leHBlY3RlZFR5cGUsbj1vLnR5cGU7aWYoInN0cmluZyIhPT1lLmtpbmQmJiJudW1iZXIiIT09ZS5raW5kJiYiYm9vbGVhbiIhPT1lLmtpbmQmJiJvYmplY3QiIT09ZS5raW5kJiYiYXJyYXkiIT09ZS5raW5kfHwidmFsdWUiIT09bi5raW5kKWlmKCJjb2xvciIhPT1lLmtpbmQmJiJmb3JtYXR0ZWQiIT09ZS5raW5kJiYicmVzb2x2ZWRJbWFnZSIhPT1lLmtpbmR8fCJ2YWx1ZSIhPT1uLmtpbmQmJiJzdHJpbmciIT09bi5raW5kKXtpZih0aGlzLmNoZWNrU3VidHlwZShlLG4pKXJldHVybiBudWxsfWVsc2Ugbz1yKG8sZSx0LnR5cGVBbm5vdGF0aW9ufHwiY29lcmNlIik7ZWxzZSBvPXIobyxlLHQudHlwZUFubm90YXRpb258fCJhc3NlcnQiKX1pZighKG8gaW5zdGFuY2VvZiBLKSYmInJlc29sdmVkSW1hZ2UiIT09by50eXBlLmtpbmQmJlBlKG8pKXtjb25zdCBlPW5ldyBsZTt0cnl7bz1uZXcgSyhvLnR5cGUsby5ldmFsdWF0ZShlKSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuZXJyb3IoZS5tZXNzYWdlKSxudWxsfX1yZXR1cm4gb31yZXR1cm4gdGhpcy5lcnJvcihgVW5rbm93biBleHByZXNzaW9uICIke299Ii4gSWYgeW91IHdhbnRlZCBhIGxpdGVyYWwgYXJyYXksIHVzZSBbImxpdGVyYWwiLCBbLi4uXV0uYCwwKX1yZXR1cm4gdm9pZCAwPT09ZT90aGlzLmVycm9yKCIndW5kZWZpbmVkJyB2YWx1ZSBpbnZhbGlkLiBVc2UgbnVsbCBpbnN0ZWFkLiIpOiJvYmplY3QiPT10eXBlb2YgZT90aGlzLmVycm9yKCdCYXJlIG9iamVjdHMgaW52YWxpZC4gVXNlIFsibGl0ZXJhbCIsIHsuLi59XSBpbnN0ZWFkLicpOnRoaXMuZXJyb3IoYEV4cGVjdGVkIGFuIGFycmF5LCBidXQgZm91bmQgJHt0eXBlb2YgZX0gaW5zdGVhZC5gKX1jb25jYXQoZSx0LHIpe2NvbnN0IG89Im51bWJlciI9PXR5cGVvZiBlP3RoaXMucGF0aC5jb25jYXQoZSk6dGhpcy5wYXRoLG49cj90aGlzLnNjb3BlLmNvbmNhdChyKTp0aGlzLnNjb3BlO3JldHVybiBuZXcgUmUodGhpcy5yZWdpc3RyeSxvLHR8fG51bGwsbix0aGlzLmVycm9ycyl9ZXJyb3IoZSwuLi50KXtjb25zdCByPWAke3RoaXMua2V5fSR7dC5tYXAoKGU9PmBbJHtlfV1gKSkuam9pbigiIil9YDt0aGlzLmVycm9ycy5wdXNoKG5ldyB4KHIsZSkpfWNoZWNrU3VidHlwZShlLHQpe2NvbnN0IHI9UihlLHQpO3JldHVybiByJiZ0aGlzLmVycm9yKHIpLHJ9fXZhciBEZT1SZTtmdW5jdGlvbiBQZShlKXtpZihlIGluc3RhbmNlb2YgTmUpcmV0dXJuIFBlKGUuYm91bmRFeHByZXNzaW9uKTtpZihlIGluc3RhbmNlb2YgY2UmJiJlcnJvciI9PT1lLm5hbWUpcmV0dXJuITE7aWYoZSBpbnN0YW5jZW9mIHBlKXJldHVybiExO2lmKGUgaW5zdGFuY2VvZiBDZSlyZXR1cm4hMTtjb25zdCB0PWUgaW5zdGFuY2VvZiBhZXx8ZSBpbnN0YW5jZW9mIHRlO2xldCByPSEwO3JldHVybiBlLmVhY2hDaGlsZCgoZT0+e3I9dD9yJiZQZShlKTpyJiZlIGluc3RhbmNlb2YgS30pKSwhIXImJihPZShlKSYmcWUoZSxbInpvb20iLCJoZWF0bWFwLWRlbnNpdHkiLCJsaW5lLXByb2dyZXNzIiwic2t5LXJhZGlhbC1wcm9ncmVzcyIsImFjY3VtdWxhdGVkIiwiaXMtc3VwcG9ydGVkLXNjcmlwdCIsInBpdGNoIiwiZGlzdGFuY2UtZnJvbS1jZW50ZXIiXSkpfWZ1bmN0aW9uIEZlKGUsdCl7Y29uc3Qgcj1lLmxlbmd0aC0xO2xldCBvLG4saT0wLGE9cixzPTA7Zm9yKDtpPD1hOylpZihzPU1hdGguZmxvb3IoKGkrYSkvMiksbz1lW3NdLG49ZVtzKzFdLG88PXQpe2lmKHM9PT1yfHx0PG4pcmV0dXJuIHM7aT1zKzF9ZWxzZXtpZighKG8+dCkpdGhyb3cgbmV3IFkoIklucHV0IGlzIG5vdCBhIG51bWJlci4iKTthPXMtMX1yZXR1cm4gMH1jbGFzcyBMZXtjb25zdHJ1Y3RvcihlLHQscil7dGhpcy50eXBlPWUsdGhpcy5pbnB1dD10LHRoaXMubGFiZWxzPVtdLHRoaXMub3V0cHV0cz1bXTtmb3IoY29uc3RbZSx0XW9mIHIpdGhpcy5sYWJlbHMucHVzaChlKSx0aGlzLm91dHB1dHMucHVzaCh0KX1zdGF0aWMgcGFyc2UoZSx0KXtpZihlLmxlbmd0aC0xPDQpcmV0dXJuIHQuZXJyb3IoYEV4cGVjdGVkIGF0IGxlYXN0IDQgYXJndW1lbnRzLCBidXQgZm91bmQgb25seSAke2UubGVuZ3RoLTF9LmApO2lmKChlLmxlbmd0aC0xKSUyIT0wKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMuIik7Y29uc3Qgcj10LnBhcnNlKGVbMV0sMSx6KTtpZighcilyZXR1cm4gbnVsbDtjb25zdCBvPVtdO2xldCBuPW51bGw7dC5leHBlY3RlZFR5cGUmJiJ2YWx1ZSIhPT10LmV4cGVjdGVkVHlwZS5raW5kJiYobj10LmV4cGVjdGVkVHlwZSk7Zm9yKGxldCByPTE7cjxlLmxlbmd0aDtyKz0yKXtjb25zdCBpPTE9PT1yPy0xLzA6ZVtyXSxhPWVbcisxXSxzPXIsbD1yKzE7aWYoIm51bWJlciIhPXR5cGVvZiBpKXJldHVybiB0LmVycm9yKCdJbnB1dC9vdXRwdXQgcGFpcnMgZm9yICJzdGVwIiBleHByZXNzaW9ucyBtdXN0IGJlIGRlZmluZWQgdXNpbmcgbGl0ZXJhbCBudW1lcmljIHZhbHVlcyAobm90IGNvbXB1dGVkIGV4cHJlc3Npb25zKSBmb3IgdGhlIGlucHV0IHZhbHVlcy4nLHMpO2lmKG8ubGVuZ3RoJiZvW28ubGVuZ3RoLTFdWzBdPj1pKXJldHVybiB0LmVycm9yKCdJbnB1dC9vdXRwdXQgcGFpcnMgZm9yICJzdGVwIiBleHByZXNzaW9ucyBtdXN0IGJlIGFycmFuZ2VkIHdpdGggaW5wdXQgdmFsdWVzIGluIHN0cmljdGx5IGFzY2VuZGluZyBvcmRlci4nLHMpO2NvbnN0IHU9dC5wYXJzZShhLGwsbik7aWYoIXUpcmV0dXJuIG51bGw7bj1ufHx1LnR5cGUsby5wdXNoKFtpLHVdKX1yZXR1cm4gbmV3IExlKG4scixvKX1ldmFsdWF0ZShlKXtjb25zdCB0PXRoaXMubGFiZWxzLHI9dGhpcy5vdXRwdXRzO2lmKDE9PT10Lmxlbmd0aClyZXR1cm4gclswXS5ldmFsdWF0ZShlKTtjb25zdCBvPXRoaXMuaW5wdXQuZXZhbHVhdGUoZSk7aWYobzw9dFswXSlyZXR1cm4gclswXS5ldmFsdWF0ZShlKTtjb25zdCBuPXQubGVuZ3RoO2lmKG8+PXRbbi0xXSlyZXR1cm4gcltuLTFdLmV2YWx1YXRlKGUpO3JldHVybiByW0ZlKHQsbyldLmV2YWx1YXRlKGUpfWVhY2hDaGlsZChlKXtlKHRoaXMuaW5wdXQpO2Zvcihjb25zdCB0IG9mIHRoaXMub3V0cHV0cyllKHQpfW91dHB1dERlZmluZWQoKXtyZXR1cm4gdGhpcy5vdXRwdXRzLmV2ZXJ5KChlPT5lLm91dHB1dERlZmluZWQoKSkpfXNlcmlhbGl6ZSgpe2NvbnN0IGU9WyJzdGVwIix0aGlzLmlucHV0LnNlcmlhbGl6ZSgpXTtmb3IobGV0IHQ9MDt0PHRoaXMubGFiZWxzLmxlbmd0aDt0KyspdD4wJiZlLnB1c2godGhpcy5sYWJlbHNbdF0pLGUucHVzaCh0aGlzLm91dHB1dHNbdF0uc2VyaWFsaXplKCkpO3JldHVybiBlfX12YXIgJGU9TGUsVWU9SmU7ZnVuY3Rpb24gSmUoZSx0LHIsbyl7dGhpcy5jeD0zKmUsdGhpcy5ieD0zKihyLWUpLXRoaXMuY3gsdGhpcy5heD0xLXRoaXMuY3gtdGhpcy5ieCx0aGlzLmN5PTMqdCx0aGlzLmJ5PTMqKG8tdCktdGhpcy5jeSx0aGlzLmF5PTEtdGhpcy5jeS10aGlzLmJ5LHRoaXMucDF4PWUsdGhpcy5wMXk9byx0aGlzLnAyeD1yLHRoaXMucDJ5PW99ZnVuY3Rpb24gV2UoZSx0LHIpe3JldHVybiBlKigxLXIpK3Qqcn1KZS5wcm90b3R5cGUuc2FtcGxlQ3VydmVYPWZ1bmN0aW9uKGUpe3JldHVybigodGhpcy5heCplK3RoaXMuYngpKmUrdGhpcy5jeCkqZX0sSmUucHJvdG90eXBlLnNhbXBsZUN1cnZlWT1mdW5jdGlvbihlKXtyZXR1cm4oKHRoaXMuYXkqZSt0aGlzLmJ5KSplK3RoaXMuY3kpKmV9LEplLnByb3RvdHlwZS5zYW1wbGVDdXJ2ZURlcml2YXRpdmVYPWZ1bmN0aW9uKGUpe3JldHVybigzKnRoaXMuYXgqZSsyKnRoaXMuYngpKmUrdGhpcy5jeH0sSmUucHJvdG90eXBlLnNvbHZlQ3VydmVYPWZ1bmN0aW9uKGUsdCl7dmFyIHIsbyxuLGksYTtmb3Iodm9pZCAwPT09dCYmKHQ9MWUtNiksbj1lLGE9MDthPDg7YSsrKXtpZihpPXRoaXMuc2FtcGxlQ3VydmVYKG4pLWUsTWF0aC5hYnMoaSk8dClyZXR1cm4gbjt2YXIgcz10aGlzLnNhbXBsZUN1cnZlRGVyaXZhdGl2ZVgobik7aWYoTWF0aC5hYnMocyk8MWUtNilicmVhaztuLT1pL3N9aWYoKG49ZSk8KHI9MCkpcmV0dXJuIHI7aWYobj4obz0xKSlyZXR1cm4gbztmb3IoO3I8bzspe2lmKGk9dGhpcy5zYW1wbGVDdXJ2ZVgobiksTWF0aC5hYnMoaS1lKTx0KXJldHVybiBuO2U+aT9yPW46bz1uLG49LjUqKG8tcikrcn1yZXR1cm4gbn0sSmUucHJvdG90eXBlLnNvbHZlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc2FtcGxlQ3VydmVZKHRoaXMuc29sdmVDdXJ2ZVgoZSx0KSl9O3ZhciBHZT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxudW1iZXI6V2UsY29sb3I6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBuZXcgJChXZShlLnIsdC5yLHIpLFdlKGUuZyx0LmcsciksV2UoZS5iLHQuYixyKSxXZShlLmEsdC5hLHIpKX0sYXJyYXk6ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlLm1hcCgoKGUsbyk9PldlKGUsdFtvXSxyKSkpfX0pO2NvbnN0IEJlPS45NTA0NyxWZT0xLjA4ODgzLEhlPTQvMjksWmU9Ni8yOSxYZT0zKlplKlplLEtlPU1hdGguUEkvMTgwLFllPTE4MC9NYXRoLlBJO2Z1bmN0aW9uIFFlKGUpe3JldHVybiBlPi4wMDg4NTY0NTE2NzkwMzU2MzE/TWF0aC5wb3coZSwxLzMpOmUvWGUrSGV9ZnVuY3Rpb24gZXQoZSl7cmV0dXJuIGU+WmU/ZSplKmU6WGUqKGUtSGUpfWZ1bmN0aW9uIHR0KGUpe3JldHVybiAyNTUqKGU8PS4wMDMxMzA4PzEyLjkyKmU6MS4wNTUqTWF0aC5wb3coZSwxLzIuNCktLjA1NSl9ZnVuY3Rpb24gcnQoZSl7cmV0dXJuKGUvPTI1NSk8PS4wNDA0NT9lLzEyLjkyOk1hdGgucG93KChlKy4wNTUpLzEuMDU1LDIuNCl9ZnVuY3Rpb24gb3QoZSl7Y29uc3QgdD1ydChlLnIpLHI9cnQoZS5nKSxvPXJ0KGUuYiksbj1RZSgoLjQxMjQ1NjQqdCsuMzU3NTc2MSpyKy4xODA0Mzc1Km8pL0JlKSxpPVFlKCguMjEyNjcyOSp0Ky43MTUxNTIyKnIrLjA3MjE3NSpvKS8xKTtyZXR1cm57bDoxMTYqaS0xNixhOjUwMCoobi1pKSxiOjIwMCooaS1RZSgoLjAxOTMzMzkqdCsuMTE5MTkyKnIrLjk1MDMwNDEqbykvVmUpKSxhbHBoYTplLmF9fWZ1bmN0aW9uIG50KGUpe2xldCB0PShlLmwrMTYpLzExNixyPWlzTmFOKGUuYSk/dDp0K2UuYS81MDAsbz1pc05hTihlLmIpP3Q6dC1lLmIvMjAwO3JldHVybiB0PTEqZXQodCkscj1CZSpldChyKSxvPVZlKmV0KG8pLG5ldyAkKHR0KDMuMjQwNDU0MipyLTEuNTM3MTM4NSp0LS40OTg1MzE0Km8pLHR0KC0uOTY5MjY2KnIrMS44NzYwMTA4KnQrLjA0MTU1NipvKSx0dCguMDU1NjQzNCpyLS4yMDQwMjU5KnQrMS4wNTcyMjUyKm8pLGUuYWxwaGEpfWZ1bmN0aW9uIGl0KGUsdCxyKXtjb25zdCBvPXQtZTtyZXR1cm4gZStyKihvPjE4MHx8bzwtMTgwP28tMzYwKk1hdGgucm91bmQoby8zNjApOm8pfWNvbnN0IGF0PXtmb3J3YXJkOm90LHJldmVyc2U6bnQsaW50ZXJwb2xhdGU6ZnVuY3Rpb24oZSx0LHIpe3JldHVybntsOldlKGUubCx0LmwsciksYTpXZShlLmEsdC5hLHIpLGI6V2UoZS5iLHQuYixyKSxhbHBoYTpXZShlLmFscGhhLHQuYWxwaGEscil9fX0sc3Q9e2ZvcndhcmQ6ZnVuY3Rpb24oZSl7Y29uc3R7bDp0LGE6cixiOm99PW90KGUpLG49TWF0aC5hdGFuMihvLHIpKlllO3JldHVybntoOm48MD9uKzM2MDpuLGM6TWF0aC5zcXJ0KHIqcitvKm8pLGw6dCxhbHBoYTplLmF9fSxyZXZlcnNlOmZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5oKktlLHI9ZS5jO3JldHVybiBudCh7bDplLmwsYTpNYXRoLmNvcyh0KSpyLGI6TWF0aC5zaW4odCkqcixhbHBoYTplLmFscGhhfSl9LGludGVycG9sYXRlOmZ1bmN0aW9uKGUsdCxyKXtyZXR1cm57aDppdChlLmgsdC5oLHIpLGM6V2UoZS5jLHQuYyxyKSxsOldlKGUubCx0LmwsciksYWxwaGE6V2UoZS5hbHBoYSx0LmFscGhhLHIpfX19O3ZhciBsdD1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxsYWI6YXQsaGNsOnN0fSk7Y2xhc3MgdXR7Y29uc3RydWN0b3IoZSx0LHIsbyxuKXt0aGlzLnR5cGU9ZSx0aGlzLm9wZXJhdG9yPXQsdGhpcy5pbnRlcnBvbGF0aW9uPXIsdGhpcy5pbnB1dD1vLHRoaXMubGFiZWxzPVtdLHRoaXMub3V0cHV0cz1bXTtmb3IoY29uc3RbZSx0XW9mIG4pdGhpcy5sYWJlbHMucHVzaChlKSx0aGlzLm91dHB1dHMucHVzaCh0KX1zdGF0aWMgaW50ZXJwb2xhdGlvbkZhY3RvcihlLHQscixvKXtsZXQgbj0wO2lmKCJleHBvbmVudGlhbCI9PT1lLm5hbWUpbj1jdCh0LGUuYmFzZSxyLG8pO2Vsc2UgaWYoImxpbmVhciI9PT1lLm5hbWUpbj1jdCh0LDEscixvKTtlbHNlIGlmKCJjdWJpYy1iZXppZXIiPT09ZS5uYW1lKXtjb25zdCBpPWUuY29udHJvbFBvaW50cztuPW5ldyBVZShpWzBdLGlbMV0saVsyXSxpWzNdKS5zb2x2ZShjdCh0LDEscixvKSl9cmV0dXJuIG59c3RhdGljIHBhcnNlKGUsdCl7bGV0W3IsbyxuLC4uLmldPWU7aWYoIUFycmF5LmlzQXJyYXkobyl8fDA9PT1vLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgYW4gaW50ZXJwb2xhdGlvbiB0eXBlIGV4cHJlc3Npb24uIiwxKTtpZigibGluZWFyIj09PW9bMF0pbz17bmFtZToibGluZWFyIn07ZWxzZSBpZigiZXhwb25lbnRpYWwiPT09b1swXSl7Y29uc3QgZT1vWzFdO2lmKCJudW1iZXIiIT10eXBlb2YgZSlyZXR1cm4gdC5lcnJvcigiRXhwb25lbnRpYWwgaW50ZXJwb2xhdGlvbiByZXF1aXJlcyBhIG51bWVyaWMgYmFzZS4iLDEsMSk7bz17bmFtZToiZXhwb25lbnRpYWwiLGJhc2U6ZX19ZWxzZXtpZigiY3ViaWMtYmV6aWVyIiE9PW9bMF0pcmV0dXJuIHQuZXJyb3IoYFVua25vd24gaW50ZXJwb2xhdGlvbiB0eXBlICR7U3RyaW5nKG9bMF0pfWAsMSwwKTt7Y29uc3QgZT1vLnNsaWNlKDEpO2lmKDQhPT1lLmxlbmd0aHx8ZS5zb21lKChlPT4ibnVtYmVyIiE9dHlwZW9mIGV8fGU8MHx8ZT4xKSkpcmV0dXJuIHQuZXJyb3IoIkN1YmljIGJlemllciBpbnRlcnBvbGF0aW9uIHJlcXVpcmVzIGZvdXIgbnVtZXJpYyBhcmd1bWVudHMgd2l0aCB2YWx1ZXMgYmV0d2VlbiAwIGFuZCAxLiIsMSk7bz17bmFtZToiY3ViaWMtYmV6aWVyIixjb250cm9sUG9pbnRzOmV9fX1pZihlLmxlbmd0aC0xPDQpcmV0dXJuIHQuZXJyb3IoYEV4cGVjdGVkIGF0IGxlYXN0IDQgYXJndW1lbnRzLCBidXQgZm91bmQgb25seSAke2UubGVuZ3RoLTF9LmApO2lmKChlLmxlbmd0aC0xKSUyIT0wKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMuIik7aWYobj10LnBhcnNlKG4sMix6KSwhbilyZXR1cm4gbnVsbDtjb25zdCBhPVtdO2xldCBzPW51bGw7ImludGVycG9sYXRlLWhjbCI9PT1yfHwiaW50ZXJwb2xhdGUtbGFiIj09PXI/cz1TOnQuZXhwZWN0ZWRUeXBlJiYidmFsdWUiIT09dC5leHBlY3RlZFR5cGUua2luZCYmKHM9dC5leHBlY3RlZFR5cGUpO2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7ZSs9Mil7Y29uc3Qgcj1pW2VdLG89aVtlKzFdLG49ZSszLGw9ZSs0O2lmKCJudW1iZXIiIT10eXBlb2YgcilyZXR1cm4gdC5lcnJvcignSW5wdXQvb3V0cHV0IHBhaXJzIGZvciAiaW50ZXJwb2xhdGUiIGV4cHJlc3Npb25zIG11c3QgYmUgZGVmaW5lZCB1c2luZyBsaXRlcmFsIG51bWVyaWMgdmFsdWVzIChub3QgY29tcHV0ZWQgZXhwcmVzc2lvbnMpIGZvciB0aGUgaW5wdXQgdmFsdWVzLicsbik7aWYoYS5sZW5ndGgmJmFbYS5sZW5ndGgtMV1bMF0+PXIpcmV0dXJuIHQuZXJyb3IoJ0lucHV0L291dHB1dCBwYWlycyBmb3IgImludGVycG9sYXRlIiBleHByZXNzaW9ucyBtdXN0IGJlIGFycmFuZ2VkIHdpdGggaW5wdXQgdmFsdWVzIGluIHN0cmljdGx5IGFzY2VuZGluZyBvcmRlci4nLG4pO2NvbnN0IHU9dC5wYXJzZShvLGwscyk7aWYoIXUpcmV0dXJuIG51bGw7cz1zfHx1LnR5cGUsYS5wdXNoKFtyLHVdKX1yZXR1cm4ibnVtYmVyIj09PXMua2luZHx8ImNvbG9yIj09PXMua2luZHx8ImFycmF5Ij09PXMua2luZCYmIm51bWJlciI9PT1zLml0ZW1UeXBlLmtpbmQmJiJudW1iZXIiPT10eXBlb2Ygcy5OP25ldyB1dChzLHIsbyxuLGEpOnQuZXJyb3IoYFR5cGUgJHtNKHMpfSBpcyBub3QgaW50ZXJwb2xhdGFibGUuYCl9ZXZhbHVhdGUoZSl7Y29uc3QgdD10aGlzLmxhYmVscyxyPXRoaXMub3V0cHV0cztpZigxPT09dC5sZW5ndGgpcmV0dXJuIHJbMF0uZXZhbHVhdGUoZSk7Y29uc3Qgbz10aGlzLmlucHV0LmV2YWx1YXRlKGUpO2lmKG88PXRbMF0pcmV0dXJuIHJbMF0uZXZhbHVhdGUoZSk7Y29uc3Qgbj10Lmxlbmd0aDtpZihvPj10W24tMV0pcmV0dXJuIHJbbi0xXS5ldmFsdWF0ZShlKTtjb25zdCBpPUZlKHQsbyksYT10W2ldLHM9dFtpKzFdLGw9dXQuaW50ZXJwb2xhdGlvbkZhY3Rvcih0aGlzLmludGVycG9sYXRpb24sbyxhLHMpLHU9cltpXS5ldmFsdWF0ZShlKSxjPXJbaSsxXS5ldmFsdWF0ZShlKTtyZXR1cm4iaW50ZXJwb2xhdGUiPT09dGhpcy5vcGVyYXRvcj9HZVt0aGlzLnR5cGUua2luZC50b0xvd2VyQ2FzZSgpXSh1LGMsbCk6ImludGVycG9sYXRlLWhjbCI9PT10aGlzLm9wZXJhdG9yP3N0LnJldmVyc2Uoc3QuaW50ZXJwb2xhdGUoc3QuZm9yd2FyZCh1KSxzdC5mb3J3YXJkKGMpLGwpKTphdC5yZXZlcnNlKGF0LmludGVycG9sYXRlKGF0LmZvcndhcmQodSksYXQuZm9yd2FyZChjKSxsKSl9ZWFjaENoaWxkKGUpe2UodGhpcy5pbnB1dCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5vdXRwdXRzKWUodCl9b3V0cHV0RGVmaW5lZCgpe3JldHVybiB0aGlzLm91dHB1dHMuZXZlcnkoKGU9PmUub3V0cHV0RGVmaW5lZCgpKSl9c2VyaWFsaXplKCl7bGV0IGU7ZT0ibGluZWFyIj09PXRoaXMuaW50ZXJwb2xhdGlvbi5uYW1lP1sibGluZWFyIl06ImV4cG9uZW50aWFsIj09PXRoaXMuaW50ZXJwb2xhdGlvbi5uYW1lPzE9PT10aGlzLmludGVycG9sYXRpb24uYmFzZT9bImxpbmVhciJdOlsiZXhwb25lbnRpYWwiLHRoaXMuaW50ZXJwb2xhdGlvbi5iYXNlXTpbImN1YmljLWJlemllciJdLmNvbmNhdCh0aGlzLmludGVycG9sYXRpb24uY29udHJvbFBvaW50cyk7Y29uc3QgdD1bdGhpcy5vcGVyYXRvcixlLHRoaXMuaW5wdXQuc2VyaWFsaXplKCldO2ZvcihsZXQgZT0wO2U8dGhpcy5sYWJlbHMubGVuZ3RoO2UrKyl0LnB1c2godGhpcy5sYWJlbHNbZV0sdGhpcy5vdXRwdXRzW2VdLnNlcmlhbGl6ZSgpKTtyZXR1cm4gdH19ZnVuY3Rpb24gY3QoZSx0LHIsbyl7Y29uc3Qgbj1vLXIsaT1lLXI7cmV0dXJuIDA9PT1uPzA6MT09PXQ/aS9uOihNYXRoLnBvdyh0LGkpLTEpLyhNYXRoLnBvdyh0LG4pLTEpfXZhciBwdD11dDtjbGFzcyBkdHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudHlwZT1lLHRoaXMuYXJncz10fXN0YXRpYyBwYXJzZShlLHQpe2lmKGUubGVuZ3RoPDIpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC4iKTtsZXQgcj1udWxsO2NvbnN0IG89dC5leHBlY3RlZFR5cGU7byYmInZhbHVlIiE9PW8ua2luZCYmKHI9byk7Y29uc3Qgbj1bXTtmb3IoY29uc3QgbyBvZiBlLnNsaWNlKDEpKXtjb25zdCBlPXQucGFyc2UobywxK24ubGVuZ3RoLHIsdm9pZCAwLHt0eXBlQW5ub3RhdGlvbjoib21pdCJ9KTtpZighZSlyZXR1cm4gbnVsbDtyPXJ8fGUudHlwZSxuLnB1c2goZSl9Y29uc3QgaT1vJiZuLnNvbWUoKGU9PlIobyxlLnR5cGUpKSk7cmV0dXJuIG5ldyBkdChpP0k6cixuKX1ldmFsdWF0ZShlKXtsZXQgdCxyPW51bGwsbz0wO2Zvcihjb25zdCBuIG9mIHRoaXMuYXJncyl7aWYobysrLHI9bi5ldmFsdWF0ZShlKSxyJiZyIGluc3RhbmNlb2YgRyYmIXIuYXZhaWxhYmxlJiYodHx8KHQ9cikscj1udWxsLG89PT10aGlzLmFyZ3MubGVuZ3RoKSlyZXR1cm4gdDtpZihudWxsIT09cilicmVha31yZXR1cm4gcn1lYWNoQ2hpbGQoZSl7dGhpcy5hcmdzLmZvckVhY2goZSl9b3V0cHV0RGVmaW5lZCgpe3JldHVybiB0aGlzLmFyZ3MuZXZlcnkoKGU9PmUub3V0cHV0RGVmaW5lZCgpKSl9c2VyaWFsaXplKCl7Y29uc3QgZT1bImNvYWxlc2NlIl07cmV0dXJuIHRoaXMuZWFjaENoaWxkKCh0PT57ZS5wdXNoKHQuc2VyaWFsaXplKCkpfSkpLGV9fXZhciBodD1kdDtjbGFzcyBmdHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMudHlwZT10LnR5cGUsdGhpcy5iaW5kaW5ncz1bXS5jb25jYXQoZSksdGhpcy5yZXN1bHQ9dH1ldmFsdWF0ZShlKXtyZXR1cm4gdGhpcy5yZXN1bHQuZXZhbHVhdGUoZSl9ZWFjaENoaWxkKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuYmluZGluZ3MpZSh0WzFdKTtlKHRoaXMucmVzdWx0KX1zdGF0aWMgcGFyc2UoZSx0KXtpZihlLmxlbmd0aDw0KXJldHVybiB0LmVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAzIGFyZ3VtZW50cywgYnV0IGZvdW5kICR7ZS5sZW5ndGgtMX0gaW5zdGVhZC5gKTtjb25zdCByPVtdO2ZvcihsZXQgbz0xO288ZS5sZW5ndGgtMTtvKz0yKXtjb25zdCBuPWVbb107aWYoInN0cmluZyIhPXR5cGVvZiBuKXJldHVybiB0LmVycm9yKGBFeHBlY3RlZCBzdHJpbmcsIGJ1dCBmb3VuZCAke3R5cGVvZiBufSBpbnN0ZWFkLmAsbyk7aWYoL1teYS16QS1aMC05X10vLnRlc3QobikpcmV0dXJuIHQuZXJyb3IoIlZhcmlhYmxlIG5hbWVzIG11c3QgY29udGFpbiBvbmx5IGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzIG9yICdfJy4iLG8pO2NvbnN0IGk9dC5wYXJzZShlW28rMV0sbysxKTtpZighaSlyZXR1cm4gbnVsbDtyLnB1c2goW24saV0pfWNvbnN0IG89dC5wYXJzZShlW2UubGVuZ3RoLTFdLGUubGVuZ3RoLTEsdC5leHBlY3RlZFR5cGUscik7cmV0dXJuIG8/bmV3IGZ0KHIsbyk6bnVsbH1vdXRwdXREZWZpbmVkKCl7cmV0dXJuIHRoaXMucmVzdWx0Lm91dHB1dERlZmluZWQoKX1zZXJpYWxpemUoKXtjb25zdCBlPVsibGV0Il07Zm9yKGNvbnN0W3Qscl1vZiB0aGlzLmJpbmRpbmdzKWUucHVzaCh0LHIuc2VyaWFsaXplKCkpO3JldHVybiBlLnB1c2godGhpcy5yZXN1bHQuc2VyaWFsaXplKCkpLGV9fXZhciB5dD1mdDtjbGFzcyBtdHtjb25zdHJ1Y3RvcihlLHQscil7dGhpcy50eXBlPWUsdGhpcy5pbmRleD10LHRoaXMuaW5wdXQ9cn1zdGF0aWMgcGFyc2UoZSx0KXtpZigzIT09ZS5sZW5ndGgpcmV0dXJuIHQuZXJyb3IoYEV4cGVjdGVkIDIgYXJndW1lbnRzLCBidXQgZm91bmQgJHtlLmxlbmd0aC0xfSBpbnN0ZWFkLmApO2NvbnN0IHI9dC5wYXJzZShlWzFdLDEseiksbz10LnBhcnNlKGVbMl0sMixxKHQuZXhwZWN0ZWRUeXBlfHxJKSk7aWYoIXJ8fCFvKXJldHVybiBudWxsO2NvbnN0IG49by50eXBlO3JldHVybiBuZXcgbXQobi5pdGVtVHlwZSxyLG8pfWV2YWx1YXRlKGUpe2NvbnN0IHQ9dGhpcy5pbmRleC5ldmFsdWF0ZShlKSxyPXRoaXMuaW5wdXQuZXZhbHVhdGUoZSk7aWYodDwwKXRocm93IG5ldyBZKGBBcnJheSBpbmRleCBvdXQgb2YgYm91bmRzOiAke3R9IDwgMC5gKTtpZih0Pj1yLmxlbmd0aCl0aHJvdyBuZXcgWShgQXJyYXkgaW5kZXggb3V0IG9mIGJvdW5kczogJHt0fSA+ICR7ci5sZW5ndGgtMX0uYCk7aWYodCE9PU1hdGguZmxvb3IodCkpdGhyb3cgbmV3IFkoYEFycmF5IGluZGV4IG11c3QgYmUgYW4gaW50ZWdlciwgYnV0IGZvdW5kICR7dH0gaW5zdGVhZC5gKTtyZXR1cm4gclt0XX1lYWNoQ2hpbGQoZSl7ZSh0aGlzLmluZGV4KSxlKHRoaXMuaW5wdXQpfW91dHB1dERlZmluZWQoKXtyZXR1cm4hMX1zZXJpYWxpemUoKXtyZXR1cm5bImF0Iix0aGlzLmluZGV4LnNlcmlhbGl6ZSgpLHRoaXMuaW5wdXQuc2VyaWFsaXplKCldfX12YXIgZ3Q9bXQ7Y2xhc3MgdnR7Y29uc3RydWN0b3IoZSx0KXt0aGlzLnR5cGU9Xyx0aGlzLm5lZWRsZT1lLHRoaXMuaGF5c3RhY2s9dH1zdGF0aWMgcGFyc2UoZSx0KXtpZigzIT09ZS5sZW5ndGgpcmV0dXJuIHQuZXJyb3IoYEV4cGVjdGVkIDIgYXJndW1lbnRzLCBidXQgZm91bmQgJHtlLmxlbmd0aC0xfSBpbnN0ZWFkLmApO2NvbnN0IHI9dC5wYXJzZShlWzFdLDEsSSksbz10LnBhcnNlKGVbMl0sMixJKTtyZXR1cm4gciYmbz9EKHIudHlwZSxbXyxULHosaixJXSk/bmV3IHZ0KHIsbyk6dC5lcnJvcihgRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBib29sZWFuLCBzdHJpbmcsIG51bWJlciBvciBudWxsLCBidXQgZm91bmQgJHtNKHIudHlwZSl9IGluc3RlYWRgKTpudWxsfWV2YWx1YXRlKGUpe2NvbnN0IHQ9dGhpcy5uZWVkbGUuZXZhbHVhdGUoZSkscj10aGlzLmhheXN0YWNrLmV2YWx1YXRlKGUpO2lmKG51bGw9PXIpcmV0dXJuITE7aWYoIVAodCxbImJvb2xlYW4iLCJzdHJpbmciLCJudW1iZXIiLCJudWxsIl0pKXRocm93IG5ldyBZKGBFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBiZSBvZiB0eXBlIGJvb2xlYW4sIHN0cmluZywgbnVtYmVyIG9yIG51bGwsIGJ1dCBmb3VuZCAke00oSCh0KSl9IGluc3RlYWQuYCk7aWYoIVAocixbInN0cmluZyIsImFycmF5Il0pKXRocm93IG5ldyBZKGBFeHBlY3RlZCBzZWNvbmQgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBhcnJheSBvciBzdHJpbmcsIGJ1dCBmb3VuZCAke00oSChyKSl9IGluc3RlYWQuYCk7cmV0dXJuIHIuaW5kZXhPZih0KT49MH1lYWNoQ2hpbGQoZSl7ZSh0aGlzLm5lZWRsZSksZSh0aGlzLmhheXN0YWNrKX1vdXRwdXREZWZpbmVkKCl7cmV0dXJuITB9c2VyaWFsaXplKCl7cmV0dXJuWyJpbiIsdGhpcy5uZWVkbGUuc2VyaWFsaXplKCksdGhpcy5oYXlzdGFjay5zZXJpYWxpemUoKV19fXZhciBidD12dDtjbGFzcyB4dHtjb25zdHJ1Y3RvcihlLHQscil7dGhpcy50eXBlPXosdGhpcy5uZWVkbGU9ZSx0aGlzLmhheXN0YWNrPXQsdGhpcy5mcm9tSW5kZXg9cn1zdGF0aWMgcGFyc2UoZSx0KXtpZihlLmxlbmd0aDw9Mnx8ZS5sZW5ndGg+PTUpcmV0dXJuIHQuZXJyb3IoYEV4cGVjdGVkIDMgb3IgNCBhcmd1bWVudHMsIGJ1dCBmb3VuZCAke2UubGVuZ3RoLTF9IGluc3RlYWQuYCk7Y29uc3Qgcj10LnBhcnNlKGVbMV0sMSxJKSxvPXQucGFyc2UoZVsyXSwyLEkpO2lmKCFyfHwhbylyZXR1cm4gbnVsbDtpZighRChyLnR5cGUsW18sVCx6LGosSV0pKXJldHVybiB0LmVycm9yKGBFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBiZSBvZiB0eXBlIGJvb2xlYW4sIHN0cmluZywgbnVtYmVyIG9yIG51bGwsIGJ1dCBmb3VuZCAke00oci50eXBlKX0gaW5zdGVhZGApO2lmKDQ9PT1lLmxlbmd0aCl7Y29uc3Qgbj10LnBhcnNlKGVbM10sMyx6KTtyZXR1cm4gbj9uZXcgeHQocixvLG4pOm51bGx9cmV0dXJuIG5ldyB4dChyLG8pfWV2YWx1YXRlKGUpe2NvbnN0IHQ9dGhpcy5uZWVkbGUuZXZhbHVhdGUoZSkscj10aGlzLmhheXN0YWNrLmV2YWx1YXRlKGUpO2lmKCFQKHQsWyJib29sZWFuIiwic3RyaW5nIiwibnVtYmVyIiwibnVsbCJdKSl0aHJvdyBuZXcgWShgRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBib29sZWFuLCBzdHJpbmcsIG51bWJlciBvciBudWxsLCBidXQgZm91bmQgJHtNKEgodCkpfSBpbnN0ZWFkLmApO2lmKCFQKHIsWyJzdHJpbmciLCJhcnJheSJdKSl0aHJvdyBuZXcgWShgRXhwZWN0ZWQgc2Vjb25kIGFyZ3VtZW50IHRvIGJlIG9mIHR5cGUgYXJyYXkgb3Igc3RyaW5nLCBidXQgZm91bmQgJHtNKEgocikpfSBpbnN0ZWFkLmApO2lmKHRoaXMuZnJvbUluZGV4KXtjb25zdCBvPXRoaXMuZnJvbUluZGV4LmV2YWx1YXRlKGUpO3JldHVybiByLmluZGV4T2YodCxvKX1yZXR1cm4gci5pbmRleE9mKHQpfWVhY2hDaGlsZChlKXtlKHRoaXMubmVlZGxlKSxlKHRoaXMuaGF5c3RhY2spLHRoaXMuZnJvbUluZGV4JiZlKHRoaXMuZnJvbUluZGV4KX1vdXRwdXREZWZpbmVkKCl7cmV0dXJuITF9c2VyaWFsaXplKCl7aWYobnVsbCE9dGhpcy5mcm9tSW5kZXgmJnZvaWQgMCE9PXRoaXMuZnJvbUluZGV4KXtjb25zdCBlPXRoaXMuZnJvbUluZGV4LnNlcmlhbGl6ZSgpO3JldHVyblsiaW5kZXgtb2YiLHRoaXMubmVlZGxlLnNlcmlhbGl6ZSgpLHRoaXMuaGF5c3RhY2suc2VyaWFsaXplKCksZV19cmV0dXJuWyJpbmRleC1vZiIsdGhpcy5uZWVkbGUuc2VyaWFsaXplKCksdGhpcy5oYXlzdGFjay5zZXJpYWxpemUoKV19fXZhciB3dD14dDtjbGFzcyBrdHtjb25zdHJ1Y3RvcihlLHQscixvLG4saSl7dGhpcy5pbnB1dFR5cGU9ZSx0aGlzLnR5cGU9dCx0aGlzLmlucHV0PXIsdGhpcy5jYXNlcz1vLHRoaXMub3V0cHV0cz1uLHRoaXMub3RoZXJ3aXNlPWl9c3RhdGljIHBhcnNlKGUsdCl7aWYoZS5sZW5ndGg8NSlyZXR1cm4gdC5lcnJvcihgRXhwZWN0ZWQgYXQgbGVhc3QgNCBhcmd1bWVudHMsIGJ1dCBmb3VuZCBvbmx5ICR7ZS5sZW5ndGgtMX0uYCk7aWYoZS5sZW5ndGglMiE9MSlyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzLiIpO2xldCByLG87dC5leHBlY3RlZFR5cGUmJiJ2YWx1ZSIhPT10LmV4cGVjdGVkVHlwZS5raW5kJiYobz10LmV4cGVjdGVkVHlwZSk7Y29uc3Qgbj17fSxpPVtdO2ZvcihsZXQgYT0yO2E8ZS5sZW5ndGgtMTthKz0yKXtsZXQgcz1lW2FdO2NvbnN0IGw9ZVthKzFdO0FycmF5LmlzQXJyYXkocyl8fChzPVtzXSk7Y29uc3QgdT10LmNvbmNhdChhKTtpZigwPT09cy5sZW5ndGgpcmV0dXJuIHUuZXJyb3IoIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBicmFuY2ggbGFiZWwuIik7Zm9yKGNvbnN0IGUgb2Ygcyl7aWYoIm51bWJlciIhPXR5cGVvZiBlJiYic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIHUuZXJyb3IoIkJyYW5jaCBsYWJlbHMgbXVzdCBiZSBudW1iZXJzIG9yIHN0cmluZ3MuIik7aWYoIm51bWJlciI9PXR5cGVvZiBlJiZNYXRoLmFicyhlKT5OdW1iZXIuTUFYX1NBRkVfSU5URUdFUilyZXR1cm4gdS5lcnJvcihgQnJhbmNoIGxhYmVscyBtdXN0IGJlIGludGVnZXJzIG5vIGxhcmdlciB0aGFuICR7TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJ9LmApO2lmKCJudW1iZXIiPT10eXBlb2YgZSYmTWF0aC5mbG9vcihlKSE9PWUpcmV0dXJuIHUuZXJyb3IoIk51bWVyaWMgYnJhbmNoIGxhYmVscyBtdXN0IGJlIGludGVnZXIgdmFsdWVzLiIpO2lmKHIpe2lmKHUuY2hlY2tTdWJ0eXBlKHIsSChlKSkpcmV0dXJuIG51bGx9ZWxzZSByPUgoZSk7aWYodm9pZCAwIT09bltTdHJpbmcoZSldKXJldHVybiB1LmVycm9yKCJCcmFuY2ggbGFiZWxzIG11c3QgYmUgdW5pcXVlLiIpO25bU3RyaW5nKGUpXT1pLmxlbmd0aH1jb25zdCBjPXQucGFyc2UobCxhLG8pO2lmKCFjKXJldHVybiBudWxsO289b3x8Yy50eXBlLGkucHVzaChjKX1jb25zdCBhPXQucGFyc2UoZVsxXSwxLEkpO2lmKCFhKXJldHVybiBudWxsO2NvbnN0IHM9dC5wYXJzZShlW2UubGVuZ3RoLTFdLGUubGVuZ3RoLTEsbyk7cmV0dXJuIHM/InZhbHVlIiE9PWEudHlwZS5raW5kJiZ0LmNvbmNhdCgxKS5jaGVja1N1YnR5cGUocixhLnR5cGUpP251bGw6bmV3IGt0KHIsbyxhLG4saSxzKTpudWxsfWV2YWx1YXRlKGUpe2NvbnN0IHQ9dGhpcy5pbnB1dC5ldmFsdWF0ZShlKTtyZXR1cm4oSCh0KT09PXRoaXMuaW5wdXRUeXBlJiZ0aGlzLm91dHB1dHNbdGhpcy5jYXNlc1t0XV18fHRoaXMub3RoZXJ3aXNlKS5ldmFsdWF0ZShlKX1lYWNoQ2hpbGQoZSl7ZSh0aGlzLmlucHV0KSx0aGlzLm91dHB1dHMuZm9yRWFjaChlKSxlKHRoaXMub3RoZXJ3aXNlKX1vdXRwdXREZWZpbmVkKCl7cmV0dXJuIHRoaXMub3V0cHV0cy5ldmVyeSgoZT0+ZS5vdXRwdXREZWZpbmVkKCkpKSYmdGhpcy5vdGhlcndpc2Uub3V0cHV0RGVmaW5lZCgpfXNlcmlhbGl6ZSgpe2NvbnN0IGU9WyJtYXRjaCIsdGhpcy5pbnB1dC5zZXJpYWxpemUoKV0sdD1PYmplY3Qua2V5cyh0aGlzLmNhc2VzKS5zb3J0KCkscj1bXSxvPXt9O2Zvcihjb25zdCBlIG9mIHQpe2NvbnN0IHQ9b1t0aGlzLmNhc2VzW2VdXTt2b2lkIDA9PT10PyhvW3RoaXMuY2FzZXNbZV1dPXIubGVuZ3RoLHIucHVzaChbdGhpcy5jYXNlc1tlXSxbZV1dKSk6clt0XVsxXS5wdXNoKGUpfWNvbnN0IG49ZT0+Im51bWJlciI9PT10aGlzLmlucHV0VHlwZS5raW5kP051bWJlcihlKTplO2Zvcihjb25zdFt0LG9db2YgcikxPT09by5sZW5ndGg/ZS5wdXNoKG4ob1swXSkpOmUucHVzaChvLm1hcChuKSksZS5wdXNoKHRoaXMub3V0cHV0c1t0XS5zZXJpYWxpemUoKSk7cmV0dXJuIGUucHVzaCh0aGlzLm90aGVyd2lzZS5zZXJpYWxpemUoKSksZX19dmFyIGp0PWt0O2NsYXNzIHp0e2NvbnN0cnVjdG9yKGUsdCxyKXt0aGlzLnR5cGU9ZSx0aGlzLmJyYW5jaGVzPXQsdGhpcy5vdGhlcndpc2U9cn1zdGF0aWMgcGFyc2UoZSx0KXtpZihlLmxlbmd0aDw0KXJldHVybiB0LmVycm9yKGBFeHBlY3RlZCBhdCBsZWFzdCAzIGFyZ3VtZW50cywgYnV0IGZvdW5kIG9ubHkgJHtlLmxlbmd0aC0xfS5gKTtpZihlLmxlbmd0aCUyIT0wKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhbiBvZGQgbnVtYmVyIG9mIGFyZ3VtZW50cy4iKTtsZXQgcjt0LmV4cGVjdGVkVHlwZSYmInZhbHVlIiE9PXQuZXhwZWN0ZWRUeXBlLmtpbmQmJihyPXQuZXhwZWN0ZWRUeXBlKTtjb25zdCBvPVtdO2ZvcihsZXQgbj0xO248ZS5sZW5ndGgtMTtuKz0yKXtjb25zdCBpPXQucGFyc2UoZVtuXSxuLF8pO2lmKCFpKXJldHVybiBudWxsO2NvbnN0IGE9dC5wYXJzZShlW24rMV0sbisxLHIpO2lmKCFhKXJldHVybiBudWxsO28ucHVzaChbaSxhXSkscj1yfHxhLnR5cGV9Y29uc3Qgbj10LnBhcnNlKGVbZS5sZW5ndGgtMV0sZS5sZW5ndGgtMSxyKTtyZXR1cm4gbj9uZXcgenQocixvLG4pOm51bGx9ZXZhbHVhdGUoZSl7Zm9yKGNvbnN0W3Qscl1vZiB0aGlzLmJyYW5jaGVzKWlmKHQuZXZhbHVhdGUoZSkpcmV0dXJuIHIuZXZhbHVhdGUoZSk7cmV0dXJuIHRoaXMub3RoZXJ3aXNlLmV2YWx1YXRlKGUpfWVhY2hDaGlsZChlKXtmb3IoY29uc3RbdCxyXW9mIHRoaXMuYnJhbmNoZXMpZSh0KSxlKHIpO2UodGhpcy5vdGhlcndpc2UpfW91dHB1dERlZmluZWQoKXtyZXR1cm4gdGhpcy5icmFuY2hlcy5ldmVyeSgoKFtlLHRdKT0+dC5vdXRwdXREZWZpbmVkKCkpKSYmdGhpcy5vdGhlcndpc2Uub3V0cHV0RGVmaW5lZCgpfXNlcmlhbGl6ZSgpe2NvbnN0IGU9WyJjYXNlIl07cmV0dXJuIHRoaXMuZWFjaENoaWxkKCh0PT57ZS5wdXNoKHQuc2VyaWFsaXplKCkpfSkpLGV9fXZhciBUdD16dDtjbGFzcyBfdHtjb25zdHJ1Y3RvcihlLHQscixvKXt0aGlzLnR5cGU9ZSx0aGlzLmlucHV0PXQsdGhpcy5iZWdpbkluZGV4PXIsdGhpcy5lbmRJbmRleD1vfXN0YXRpYyBwYXJzZShlLHQpe2lmKGUubGVuZ3RoPD0yfHxlLmxlbmd0aD49NSlyZXR1cm4gdC5lcnJvcihgRXhwZWN0ZWQgMyBvciA0IGFyZ3VtZW50cywgYnV0IGZvdW5kICR7ZS5sZW5ndGgtMX0gaW5zdGVhZC5gKTtjb25zdCByPXQucGFyc2UoZVsxXSwxLEkpLG89dC5wYXJzZShlWzJdLDIseik7aWYoIXJ8fCFvKXJldHVybiBudWxsO2lmKCFEKHIudHlwZSxbcShJKSxULEldKSlyZXR1cm4gdC5lcnJvcihgRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBhcnJheSBvciBzdHJpbmcsIGJ1dCBmb3VuZCAke00oci50eXBlKX0gaW5zdGVhZGApO2lmKDQ9PT1lLmxlbmd0aCl7Y29uc3Qgbj10LnBhcnNlKGVbM10sMyx6KTtyZXR1cm4gbj9uZXcgX3Qoci50eXBlLHIsbyxuKTpudWxsfXJldHVybiBuZXcgX3Qoci50eXBlLHIsbyl9ZXZhbHVhdGUoZSl7Y29uc3QgdD10aGlzLmlucHV0LmV2YWx1YXRlKGUpLHI9dGhpcy5iZWdpbkluZGV4LmV2YWx1YXRlKGUpO2lmKCFQKHQsWyJzdHJpbmciLCJhcnJheSJdKSl0aHJvdyBuZXcgWShgRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBhcnJheSBvciBzdHJpbmcsIGJ1dCBmb3VuZCAke00oSCh0KSl9IGluc3RlYWQuYCk7aWYodGhpcy5lbmRJbmRleCl7Y29uc3Qgbz10aGlzLmVuZEluZGV4LmV2YWx1YXRlKGUpO3JldHVybiB0LnNsaWNlKHIsbyl9cmV0dXJuIHQuc2xpY2Uocil9ZWFjaENoaWxkKGUpe2UodGhpcy5pbnB1dCksZSh0aGlzLmJlZ2luSW5kZXgpLHRoaXMuZW5kSW5kZXgmJmUodGhpcy5lbmRJbmRleCl9b3V0cHV0RGVmaW5lZCgpe3JldHVybiExfXNlcmlhbGl6ZSgpe2lmKG51bGwhPXRoaXMuZW5kSW5kZXgmJnZvaWQgMCE9PXRoaXMuZW5kSW5kZXgpe2NvbnN0IGU9dGhpcy5lbmRJbmRleC5zZXJpYWxpemUoKTtyZXR1cm5bInNsaWNlIix0aGlzLmlucHV0LnNlcmlhbGl6ZSgpLHRoaXMuYmVnaW5JbmRleC5zZXJpYWxpemUoKSxlXX1yZXR1cm5bInNsaWNlIix0aGlzLmlucHV0LnNlcmlhbGl6ZSgpLHRoaXMuYmVnaW5JbmRleC5zZXJpYWxpemUoKV19fXZhciBTdD1fdDtmdW5jdGlvbiBBdChlLHQpe3JldHVybiI9PSI9PT1lfHwiIT0iPT09ZT8iYm9vbGVhbiI9PT10LmtpbmR8fCJzdHJpbmciPT09dC5raW5kfHwibnVtYmVyIj09PXQua2luZHx8Im51bGwiPT09dC5raW5kfHwidmFsdWUiPT09dC5raW5kOiJzdHJpbmciPT09dC5raW5kfHwibnVtYmVyIj09PXQua2luZHx8InZhbHVlIj09PXQua2luZH1mdW5jdGlvbiBJdChlLHQscixvKXtyZXR1cm4gMD09PW8uY29tcGFyZSh0LHIpfWZ1bmN0aW9uIEN0KGUsdCxyKXtjb25zdCBvPSI9PSIhPT1lJiYiIT0iIT09ZTtyZXR1cm4gY2xhc3Mgbntjb25zdHJ1Y3RvcihlLHQscil7dGhpcy50eXBlPV8sdGhpcy5saHM9ZSx0aGlzLnJocz10LHRoaXMuY29sbGF0b3I9cix0aGlzLmhhc1VudHlwZWRBcmd1bWVudD0idmFsdWUiPT09ZS50eXBlLmtpbmR8fCJ2YWx1ZSI9PT10LnR5cGUua2luZH1zdGF0aWMgcGFyc2UoZSx0KXtpZigzIT09ZS5sZW5ndGgmJjQhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgdHdvIG9yIHRocmVlIGFyZ3VtZW50cy4iKTtjb25zdCByPWVbMF07bGV0IGk9dC5wYXJzZShlWzFdLDEsSSk7aWYoIWkpcmV0dXJuIG51bGw7aWYoIUF0KHIsaS50eXBlKSlyZXR1cm4gdC5jb25jYXQoMSkuZXJyb3IoYCIke3J9IiBjb21wYXJpc29ucyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgdHlwZSAnJHtNKGkudHlwZSl9Jy5gKTtsZXQgYT10LnBhcnNlKGVbMl0sMixJKTtpZighYSlyZXR1cm4gbnVsbDtpZighQXQocixhLnR5cGUpKXJldHVybiB0LmNvbmNhdCgyKS5lcnJvcihgIiR7cn0iIGNvbXBhcmlzb25zIGFyZSBub3Qgc3VwcG9ydGVkIGZvciB0eXBlICcke00oYS50eXBlKX0nLmApO2lmKGkudHlwZS5raW5kIT09YS50eXBlLmtpbmQmJiJ2YWx1ZSIhPT1pLnR5cGUua2luZCYmInZhbHVlIiE9PWEudHlwZS5raW5kKXJldHVybiB0LmVycm9yKGBDYW5ub3QgY29tcGFyZSB0eXBlcyAnJHtNKGkudHlwZSl9JyBhbmQgJyR7TShhLnR5cGUpfScuYCk7byYmKCJ2YWx1ZSI9PT1pLnR5cGUua2luZCYmInZhbHVlIiE9PWEudHlwZS5raW5kP2k9bmV3IHRlKGEudHlwZSxbaV0pOiJ2YWx1ZSIhPT1pLnR5cGUua2luZCYmInZhbHVlIj09PWEudHlwZS5raW5kJiYoYT1uZXcgdGUoaS50eXBlLFthXSkpKTtsZXQgcz1udWxsO2lmKDQ9PT1lLmxlbmd0aCl7aWYoInN0cmluZyIhPT1pLnR5cGUua2luZCYmInN0cmluZyIhPT1hLnR5cGUua2luZCYmInZhbHVlIiE9PWkudHlwZS5raW5kJiYidmFsdWUiIT09YS50eXBlLmtpbmQpcmV0dXJuIHQuZXJyb3IoIkNhbm5vdCB1c2UgY29sbGF0b3IgdG8gY29tcGFyZSBub24tc3RyaW5nIHR5cGVzLiIpO2lmKHM9dC5wYXJzZShlWzNdLDMsQyksIXMpcmV0dXJuIG51bGx9cmV0dXJuIG5ldyBuKGksYSxzKX1ldmFsdWF0ZShuKXtjb25zdCBpPXRoaXMubGhzLmV2YWx1YXRlKG4pLGE9dGhpcy5yaHMuZXZhbHVhdGUobik7aWYobyYmdGhpcy5oYXNVbnR5cGVkQXJndW1lbnQpe2NvbnN0IHQ9SChpKSxyPUgoYSk7aWYodC5raW5kIT09ci5raW5kfHwic3RyaW5nIiE9PXQua2luZCYmIm51bWJlciIhPT10LmtpbmQpdGhyb3cgbmV3IFkoYEV4cGVjdGVkIGFyZ3VtZW50cyBmb3IgIiR7ZX0iIHRvIGJlIChzdHJpbmcsIHN0cmluZykgb3IgKG51bWJlciwgbnVtYmVyKSwgYnV0IGZvdW5kICgke3Qua2luZH0sICR7ci5raW5kfSkgaW5zdGVhZC5gKX1pZih0aGlzLmNvbGxhdG9yJiYhbyYmdGhpcy5oYXNVbnR5cGVkQXJndW1lbnQpe2NvbnN0IGU9SChpKSxyPUgoYSk7aWYoInN0cmluZyIhPT1lLmtpbmR8fCJzdHJpbmciIT09ci5raW5kKXJldHVybiB0KG4saSxhKX1yZXR1cm4gdGhpcy5jb2xsYXRvcj9yKG4saSxhLHRoaXMuY29sbGF0b3IuZXZhbHVhdGUobikpOnQobixpLGEpfWVhY2hDaGlsZChlKXtlKHRoaXMubGhzKSxlKHRoaXMucmhzKSx0aGlzLmNvbGxhdG9yJiZlKHRoaXMuY29sbGF0b3IpfW91dHB1dERlZmluZWQoKXtyZXR1cm4hMH1zZXJpYWxpemUoKXtjb25zdCB0PVtlXTtyZXR1cm4gdGhpcy5lYWNoQ2hpbGQoKGU9Pnt0LnB1c2goZS5zZXJpYWxpemUoKSl9KSksdH19fWNvbnN0IE90PUN0KCI9PSIsKGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdD09PXJ9KSxJdCksRXQ9Q3QoIiE9IiwoZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0IT09cn0pLChmdW5jdGlvbihlLHQscixvKXtyZXR1cm4hSXQoMCx0LHIsbyl9KSkscXQ9Q3QoIjwiLChmdW5jdGlvbihlLHQscil7cmV0dXJuIHQ8cn0pLChmdW5jdGlvbihlLHQscixvKXtyZXR1cm4gby5jb21wYXJlKHQscik8MH0pKSxNdD1DdCgiPiIsKGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdD5yfSksKGZ1bmN0aW9uKGUsdCxyLG8pe3JldHVybiBvLmNvbXBhcmUodCxyKT4wfSkpLE50PUN0KCI8PSIsKGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdDw9cn0pLChmdW5jdGlvbihlLHQscixvKXtyZXR1cm4gby5jb21wYXJlKHQscik8PTB9KSksUnQ9Q3QoIj49IiwoZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0Pj1yfSksKGZ1bmN0aW9uKGUsdCxyLG8pe3JldHVybiBvLmNvbXBhcmUodCxyKT49MH0pKTtjbGFzcyBEdHtjb25zdHJ1Y3RvcihlLHQscixvLG4pe3RoaXMudHlwZT1ULHRoaXMubnVtYmVyPWUsdGhpcy5sb2NhbGU9dCx0aGlzLmN1cnJlbmN5PXIsdGhpcy5taW5GcmFjdGlvbkRpZ2l0cz1vLHRoaXMubWF4RnJhY3Rpb25EaWdpdHM9bn1zdGF0aWMgcGFyc2UoZSx0KXtpZigzIT09ZS5sZW5ndGgpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIHR3byBhcmd1bWVudHMuIik7Y29uc3Qgcj10LnBhcnNlKGVbMV0sMSx6KTtpZighcilyZXR1cm4gbnVsbDtjb25zdCBvPWVbMl07aWYoIm9iamVjdCIhPXR5cGVvZiBvfHxBcnJheS5pc0FycmF5KG8pKXJldHVybiB0LmVycm9yKCJOdW1iZXJGb3JtYXQgb3B0aW9ucyBhcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdC4iKTtsZXQgbj1udWxsO2lmKG8ubG9jYWxlJiYobj10LnBhcnNlKG8ubG9jYWxlLDEsVCksIW4pKXJldHVybiBudWxsO2xldCBpPW51bGw7aWYoby5jdXJyZW5jeSYmKGk9dC5wYXJzZShvLmN1cnJlbmN5LDEsVCksIWkpKXJldHVybiBudWxsO2xldCBhPW51bGw7aWYob1sibWluLWZyYWN0aW9uLWRpZ2l0cyJdJiYoYT10LnBhcnNlKG9bIm1pbi1mcmFjdGlvbi1kaWdpdHMiXSwxLHopLCFhKSlyZXR1cm4gbnVsbDtsZXQgcz1udWxsO3JldHVybiBvWyJtYXgtZnJhY3Rpb24tZGlnaXRzIl0mJihzPXQucGFyc2Uob1sibWF4LWZyYWN0aW9uLWRpZ2l0cyJdLDEseiksIXMpP251bGw6bmV3IER0KHIsbixpLGEscyl9ZXZhbHVhdGUoZSl7cmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdCh0aGlzLmxvY2FsZT90aGlzLmxvY2FsZS5ldmFsdWF0ZShlKTpbXSx7c3R5bGU6dGhpcy5jdXJyZW5jeT8iY3VycmVuY3kiOiJkZWNpbWFsIixjdXJyZW5jeTp0aGlzLmN1cnJlbmN5P3RoaXMuY3VycmVuY3kuZXZhbHVhdGUoZSk6dm9pZCAwLG1pbmltdW1GcmFjdGlvbkRpZ2l0czp0aGlzLm1pbkZyYWN0aW9uRGlnaXRzP3RoaXMubWluRnJhY3Rpb25EaWdpdHMuZXZhbHVhdGUoZSk6dm9pZCAwLG1heGltdW1GcmFjdGlvbkRpZ2l0czp0aGlzLm1heEZyYWN0aW9uRGlnaXRzP3RoaXMubWF4RnJhY3Rpb25EaWdpdHMuZXZhbHVhdGUoZSk6dm9pZCAwfSkuZm9ybWF0KHRoaXMubnVtYmVyLmV2YWx1YXRlKGUpKX1lYWNoQ2hpbGQoZSl7ZSh0aGlzLm51bWJlciksdGhpcy5sb2NhbGUmJmUodGhpcy5sb2NhbGUpLHRoaXMuY3VycmVuY3kmJmUodGhpcy5jdXJyZW5jeSksdGhpcy5taW5GcmFjdGlvbkRpZ2l0cyYmZSh0aGlzLm1pbkZyYWN0aW9uRGlnaXRzKSx0aGlzLm1heEZyYWN0aW9uRGlnaXRzJiZlKHRoaXMubWF4RnJhY3Rpb25EaWdpdHMpfW91dHB1dERlZmluZWQoKXtyZXR1cm4hMX1zZXJpYWxpemUoKXtjb25zdCBlPXt9O3JldHVybiB0aGlzLmxvY2FsZSYmKGUubG9jYWxlPXRoaXMubG9jYWxlLnNlcmlhbGl6ZSgpKSx0aGlzLmN1cnJlbmN5JiYoZS5jdXJyZW5jeT10aGlzLmN1cnJlbmN5LnNlcmlhbGl6ZSgpKSx0aGlzLm1pbkZyYWN0aW9uRGlnaXRzJiYoZVsibWluLWZyYWN0aW9uLWRpZ2l0cyJdPXRoaXMubWluRnJhY3Rpb25EaWdpdHMuc2VyaWFsaXplKCkpLHRoaXMubWF4RnJhY3Rpb25EaWdpdHMmJihlWyJtYXgtZnJhY3Rpb24tZGlnaXRzIl09dGhpcy5tYXhGcmFjdGlvbkRpZ2l0cy5zZXJpYWxpemUoKSksWyJudW1iZXItZm9ybWF0Iix0aGlzLm51bWJlci5zZXJpYWxpemUoKSxlXX19Y2xhc3MgUHR7Y29uc3RydWN0b3IoZSl7dGhpcy50eXBlPXosdGhpcy5pbnB1dD1lfXN0YXRpYyBwYXJzZShlLHQpe2lmKDIhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcihgRXhwZWN0ZWQgMSBhcmd1bWVudCwgYnV0IGZvdW5kICR7ZS5sZW5ndGgtMX0gaW5zdGVhZC5gKTtjb25zdCByPXQucGFyc2UoZVsxXSwxKTtyZXR1cm4gcj8iYXJyYXkiIT09ci50eXBlLmtpbmQmJiJzdHJpbmciIT09ci50eXBlLmtpbmQmJiJ2YWx1ZSIhPT1yLnR5cGUua2luZD90LmVycm9yKGBFeHBlY3RlZCBhcmd1bWVudCBvZiB0eXBlIHN0cmluZyBvciBhcnJheSwgYnV0IGZvdW5kICR7TShyLnR5cGUpfSBpbnN0ZWFkLmApOm5ldyBQdChyKTpudWxsfWV2YWx1YXRlKGUpe2NvbnN0IHQ9dGhpcy5pbnB1dC5ldmFsdWF0ZShlKTtpZigic3RyaW5nIj09dHlwZW9mIHQpcmV0dXJuIHQubGVuZ3RoO2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHQubGVuZ3RoO3Rocm93IG5ldyBZKGBFeHBlY3RlZCB2YWx1ZSB0byBiZSBvZiB0eXBlIHN0cmluZyBvciBhcnJheSwgYnV0IGZvdW5kICR7TShIKHQpKX0gaW5zdGVhZC5gKX1lYWNoQ2hpbGQoZSl7ZSh0aGlzLmlucHV0KX1vdXRwdXREZWZpbmVkKCl7cmV0dXJuITF9c2VyaWFsaXplKCl7Y29uc3QgZT1bImxlbmd0aCJdO3JldHVybiB0aGlzLmVhY2hDaGlsZCgodD0+e2UucHVzaCh0LnNlcmlhbGl6ZSgpKX0pKSxlfX1jb25zdCBGdD17Ij09IjpPdCwiIT0iOkV0LCI+IjpNdCwiPCI6cXQsIj49IjpSdCwiPD0iOk50LGFycmF5OnRlLGF0Omd0LGJvb2xlYW46dGUsY2FzZTpUdCxjb2FsZXNjZTpodCxjb2xsYXRvcjpwZSxmb3JtYXQ6cmUsaW1hZ2U6b2UsaW46YnQsImluZGV4LW9mIjp3dCxpbnRlcnBvbGF0ZTpwdCwiaW50ZXJwb2xhdGUtaGNsIjpwdCwiaW50ZXJwb2xhdGUtbGFiIjpwdCxsZW5ndGg6UHQsbGV0Onl0LGxpdGVyYWw6SyxtYXRjaDpqdCxudW1iZXI6dGUsIm51bWJlci1mb3JtYXQiOkR0LG9iamVjdDp0ZSxzbGljZTpTdCxzdGVwOiRlLHN0cmluZzp0ZSwidG8tYm9vbGVhbiI6YWUsInRvLWNvbG9yIjphZSwidG8tbnVtYmVyIjphZSwidG8tc3RyaW5nIjphZSx2YXI6TmUsd2l0aGluOkNlfTtmdW5jdGlvbiBMdChlLFt0LHIsbyxuXSl7dD10LmV2YWx1YXRlKGUpLHI9ci5ldmFsdWF0ZShlKSxvPW8uZXZhbHVhdGUoZSk7Y29uc3QgaT1uP24uZXZhbHVhdGUoZSk6MSxhPUIodCxyLG8saSk7aWYoYSl0aHJvdyBuZXcgWShhKTtyZXR1cm4gbmV3ICQodC8yNTUqaSxyLzI1NSppLG8vMjU1KmksaSl9ZnVuY3Rpb24gJHQoZSx0KXtyZXR1cm4gZSBpbiB0fWZ1bmN0aW9uIFV0KGUsdCl7Y29uc3Qgcj10W2VdO3JldHVybiB2b2lkIDA9PT1yP251bGw6cn1mdW5jdGlvbiBKdChlKXtyZXR1cm57dHlwZTplfX1jZS5yZWdpc3RlcihGdCx7ZXJyb3I6W3traW5kOiJlcnJvciJ9LFtUXSwoZSxbdF0pPT57dGhyb3cgbmV3IFkodC5ldmFsdWF0ZShlKSl9XSx0eXBlb2Y6W1QsW0ldLChlLFt0XSk9Pk0oSCh0LmV2YWx1YXRlKGUpKSldLCJ0by1yZ2JhIjpbcSh6LDQpLFtTXSwoZSxbdF0pPT50LmV2YWx1YXRlKGUpLnRvQXJyYXkoKV0scmdiOltTLFt6LHosel0sTHRdLHJnYmE6W1MsW3oseix6LHpdLEx0XSxoYXM6e3R5cGU6XyxvdmVybG9hZHM6W1tbVF0sKGUsW3RdKT0+JHQodC5ldmFsdWF0ZShlKSxlLnByb3BlcnRpZXMoKSldLFtbVCxBXSwoZSxbdCxyXSk9PiR0KHQuZXZhbHVhdGUoZSksci5ldmFsdWF0ZShlKSldXX0sZ2V0Ont0eXBlOkksb3ZlcmxvYWRzOltbW1RdLChlLFt0XSk9PlV0KHQuZXZhbHVhdGUoZSksZS5wcm9wZXJ0aWVzKCkpXSxbW1QsQV0sKGUsW3Qscl0pPT5VdCh0LmV2YWx1YXRlKGUpLHIuZXZhbHVhdGUoZSkpXV19LCJmZWF0dXJlLXN0YXRlIjpbSSxbVF0sKGUsW3RdKT0+VXQodC5ldmFsdWF0ZShlKSxlLmZlYXR1cmVTdGF0ZXx8e30pXSxwcm9wZXJ0aWVzOltBLFtdLGU9PmUucHJvcGVydGllcygpXSwiZ2VvbWV0cnktdHlwZSI6W1QsW10sZT0+ZS5nZW9tZXRyeVR5cGUoKV0saWQ6W0ksW10sZT0+ZS5pZCgpXSx6b29tOlt6LFtdLGU9PmUuZ2xvYmFscy56b29tXSxwaXRjaDpbeixbXSxlPT5lLmdsb2JhbHMucGl0Y2h8fDBdLCJkaXN0YW5jZS1mcm9tLWNlbnRlciI6W3osW10sZT0+ZS5kaXN0YW5jZUZyb21DZW50ZXIoKV0sImhlYXRtYXAtZGVuc2l0eSI6W3osW10sZT0+ZS5nbG9iYWxzLmhlYXRtYXBEZW5zaXR5fHwwXSwibGluZS1wcm9ncmVzcyI6W3osW10sZT0+ZS5nbG9iYWxzLmxpbmVQcm9ncmVzc3x8MF0sInNreS1yYWRpYWwtcHJvZ3Jlc3MiOlt6LFtdLGU9PmUuZ2xvYmFscy5za3lSYWRpYWxQcm9ncmVzc3x8MF0sYWNjdW11bGF0ZWQ6W0ksW10sZT0+dm9pZCAwPT09ZS5nbG9iYWxzLmFjY3VtdWxhdGVkP251bGw6ZS5nbG9iYWxzLmFjY3VtdWxhdGVkXSwiKyI6W3osSnQoeiksKGUsdCk9PntsZXQgcj0wO2Zvcihjb25zdCBvIG9mIHQpcis9by5ldmFsdWF0ZShlKTtyZXR1cm4gcn1dLCIqIjpbeixKdCh6KSwoZSx0KT0+e2xldCByPTE7Zm9yKGNvbnN0IG8gb2YgdClyKj1vLmV2YWx1YXRlKGUpO3JldHVybiByfV0sIi0iOnt0eXBlOnosb3ZlcmxvYWRzOltbW3osel0sKGUsW3Qscl0pPT50LmV2YWx1YXRlKGUpLXIuZXZhbHVhdGUoZSldLFtbel0sKGUsW3RdKT0+LXQuZXZhbHVhdGUoZSldXX0sIi8iOlt6LFt6LHpdLChlLFt0LHJdKT0+dC5ldmFsdWF0ZShlKS9yLmV2YWx1YXRlKGUpXSwiJSI6W3osW3osel0sKGUsW3Qscl0pPT50LmV2YWx1YXRlKGUpJXIuZXZhbHVhdGUoZSldLGxuMjpbeixbXSwoKT0+TWF0aC5MTjJdLHBpOlt6LFtdLCgpPT5NYXRoLlBJXSxlOlt6LFtdLCgpPT5NYXRoLkVdLCJeIjpbeixbeix6XSwoZSxbdCxyXSk9Pk1hdGgucG93KHQuZXZhbHVhdGUoZSksci5ldmFsdWF0ZShlKSldLHNxcnQ6W3osW3pdLChlLFt0XSk9Pk1hdGguc3FydCh0LmV2YWx1YXRlKGUpKV0sbG9nMTA6W3osW3pdLChlLFt0XSk9Pk1hdGgubG9nKHQuZXZhbHVhdGUoZSkpL01hdGguTE4xMF0sbG46W3osW3pdLChlLFt0XSk9Pk1hdGgubG9nKHQuZXZhbHVhdGUoZSkpXSxsb2cyOlt6LFt6XSwoZSxbdF0pPT5NYXRoLmxvZyh0LmV2YWx1YXRlKGUpKS9NYXRoLkxOMl0sc2luOlt6LFt6XSwoZSxbdF0pPT5NYXRoLnNpbih0LmV2YWx1YXRlKGUpKV0sY29zOlt6LFt6XSwoZSxbdF0pPT5NYXRoLmNvcyh0LmV2YWx1YXRlKGUpKV0sdGFuOlt6LFt6XSwoZSxbdF0pPT5NYXRoLnRhbih0LmV2YWx1YXRlKGUpKV0sYXNpbjpbeixbel0sKGUsW3RdKT0+TWF0aC5hc2luKHQuZXZhbHVhdGUoZSkpXSxhY29zOlt6LFt6XSwoZSxbdF0pPT5NYXRoLmFjb3ModC5ldmFsdWF0ZShlKSldLGF0YW46W3osW3pdLChlLFt0XSk9Pk1hdGguYXRhbih0LmV2YWx1YXRlKGUpKV0sbWluOlt6LEp0KHopLChlLHQpPT5NYXRoLm1pbiguLi50Lm1hcCgodD0+dC5ldmFsdWF0ZShlKSkpKV0sbWF4Olt6LEp0KHopLChlLHQpPT5NYXRoLm1heCguLi50Lm1hcCgodD0+dC5ldmFsdWF0ZShlKSkpKV0sYWJzOlt6LFt6XSwoZSxbdF0pPT5NYXRoLmFicyh0LmV2YWx1YXRlKGUpKV0scm91bmQ6W3osW3pdLChlLFt0XSk9Pntjb25zdCByPXQuZXZhbHVhdGUoZSk7cmV0dXJuIHI8MD8tTWF0aC5yb3VuZCgtcik6TWF0aC5yb3VuZChyKX1dLGZsb29yOlt6LFt6XSwoZSxbdF0pPT5NYXRoLmZsb29yKHQuZXZhbHVhdGUoZSkpXSxjZWlsOlt6LFt6XSwoZSxbdF0pPT5NYXRoLmNlaWwodC5ldmFsdWF0ZShlKSldLCJmaWx0ZXItPT0iOltfLFtULEldLChlLFt0LHJdKT0+ZS5wcm9wZXJ0aWVzKClbdC52YWx1ZV09PT1yLnZhbHVlXSwiZmlsdGVyLWlkLT09IjpbXyxbSV0sKGUsW3RdKT0+ZS5pZCgpPT09dC52YWx1ZV0sImZpbHRlci10eXBlLT09IjpbXyxbVF0sKGUsW3RdKT0+ZS5nZW9tZXRyeVR5cGUoKT09PXQudmFsdWVdLCJmaWx0ZXItPCI6W18sW1QsSV0sKGUsW3Qscl0pPT57Y29uc3Qgbz1lLnByb3BlcnRpZXMoKVt0LnZhbHVlXSxuPXIudmFsdWU7cmV0dXJuIHR5cGVvZiBvPT10eXBlb2YgbiYmbzxufV0sImZpbHRlci1pZC08IjpbXyxbSV0sKGUsW3RdKT0+e2NvbnN0IHI9ZS5pZCgpLG89dC52YWx1ZTtyZXR1cm4gdHlwZW9mIHI9PXR5cGVvZiBvJiZyPG99XSwiZmlsdGVyLT4iOltfLFtULEldLChlLFt0LHJdKT0+e2NvbnN0IG89ZS5wcm9wZXJ0aWVzKClbdC52YWx1ZV0sbj1yLnZhbHVlO3JldHVybiB0eXBlb2Ygbz09dHlwZW9mIG4mJm8+bn1dLCJmaWx0ZXItaWQtPiI6W18sW0ldLChlLFt0XSk9Pntjb25zdCByPWUuaWQoKSxvPXQudmFsdWU7cmV0dXJuIHR5cGVvZiByPT10eXBlb2YgbyYmcj5vfV0sImZpbHRlci08PSI6W18sW1QsSV0sKGUsW3Qscl0pPT57Y29uc3Qgbz1lLnByb3BlcnRpZXMoKVt0LnZhbHVlXSxuPXIudmFsdWU7cmV0dXJuIHR5cGVvZiBvPT10eXBlb2YgbiYmbzw9bn1dLCJmaWx0ZXItaWQtPD0iOltfLFtJXSwoZSxbdF0pPT57Y29uc3Qgcj1lLmlkKCksbz10LnZhbHVlO3JldHVybiB0eXBlb2Ygcj09dHlwZW9mIG8mJnI8PW99XSwiZmlsdGVyLT49IjpbXyxbVCxJXSwoZSxbdCxyXSk9Pntjb25zdCBvPWUucHJvcGVydGllcygpW3QudmFsdWVdLG49ci52YWx1ZTtyZXR1cm4gdHlwZW9mIG89PXR5cGVvZiBuJiZvPj1ufV0sImZpbHRlci1pZC0+PSI6W18sW0ldLChlLFt0XSk9Pntjb25zdCByPWUuaWQoKSxvPXQudmFsdWU7cmV0dXJuIHR5cGVvZiByPT10eXBlb2YgbyYmcj49b31dLCJmaWx0ZXItaGFzIjpbXyxbSV0sKGUsW3RdKT0+dC52YWx1ZSBpbiBlLnByb3BlcnRpZXMoKV0sImZpbHRlci1oYXMtaWQiOltfLFtdLGU9Pm51bGwhPT1lLmlkKCkmJnZvaWQgMCE9PWUuaWQoKV0sImZpbHRlci10eXBlLWluIjpbXyxbcShUKV0sKGUsW3RdKT0+dC52YWx1ZS5pbmRleE9mKGUuZ2VvbWV0cnlUeXBlKCkpPj0wXSwiZmlsdGVyLWlkLWluIjpbXyxbcShJKV0sKGUsW3RdKT0+dC52YWx1ZS5pbmRleE9mKGUuaWQoKSk+PTBdLCJmaWx0ZXItaW4tc21hbGwiOltfLFtULHEoSSldLChlLFt0LHJdKT0+ci52YWx1ZS5pbmRleE9mKGUucHJvcGVydGllcygpW3QudmFsdWVdKT49MF0sImZpbHRlci1pbi1sYXJnZSI6W18sW1QscShJKV0sKGUsW3Qscl0pPT5mdW5jdGlvbihlLHQscixvKXtmb3IoO3I8PW87KXtjb25zdCBuPXIrbz4+MTtpZih0W25dPT09ZSlyZXR1cm4hMDt0W25dPmU/bz1uLTE6cj1uKzF9cmV0dXJuITF9KGUucHJvcGVydGllcygpW3QudmFsdWVdLHIudmFsdWUsMCxyLnZhbHVlLmxlbmd0aC0xKV0sYWxsOnt0eXBlOl8sb3ZlcmxvYWRzOltbW18sX10sKGUsW3Qscl0pPT50LmV2YWx1YXRlKGUpJiZyLmV2YWx1YXRlKGUpXSxbSnQoXyksKGUsdCk9Pntmb3IoY29uc3QgciBvZiB0KWlmKCFyLmV2YWx1YXRlKGUpKXJldHVybiExO3JldHVybiEwfV1dfSxhbnk6e3R5cGU6XyxvdmVybG9hZHM6W1tbXyxfXSwoZSxbdCxyXSk9PnQuZXZhbHVhdGUoZSl8fHIuZXZhbHVhdGUoZSldLFtKdChfKSwoZSx0KT0+e2Zvcihjb25zdCByIG9mIHQpaWYoci5ldmFsdWF0ZShlKSlyZXR1cm4hMDtyZXR1cm4hMX1dXX0sIiEiOltfLFtfXSwoZSxbdF0pPT4hdC5ldmFsdWF0ZShlKV0sImlzLXN1cHBvcnRlZC1zY3JpcHQiOltfLFtUXSwoZSxbdF0pPT57Y29uc3Qgcj1lLmdsb2JhbHMmJmUuZ2xvYmFscy5pc1N1cHBvcnRlZFNjcmlwdDtyZXR1cm4hcnx8cih0LmV2YWx1YXRlKGUpKX1dLHVwY2FzZTpbVCxbVF0sKGUsW3RdKT0+dC5ldmFsdWF0ZShlKS50b1VwcGVyQ2FzZSgpXSxkb3duY2FzZTpbVCxbVF0sKGUsW3RdKT0+dC5ldmFsdWF0ZShlKS50b0xvd2VyQ2FzZSgpXSxjb25jYXQ6W1QsSnQoSSksKGUsdCk9PnQubWFwKCh0PT5aKHQuZXZhbHVhdGUoZSkpKSkuam9pbigiIildLCJyZXNvbHZlZC1sb2NhbGUiOltULFtDXSwoZSxbdF0pPT50LmV2YWx1YXRlKGUpLnJlc29sdmVkTG9jYWxlKCldfSk7dmFyIFd0PUZ0O2Z1bmN0aW9uIEd0KGUpe3JldHVybntyZXN1bHQ6InN1Y2Nlc3MiLHZhbHVlOmV9fWZ1bmN0aW9uIEJ0KGUpe3JldHVybntyZXN1bHQ6ImVycm9yIix2YWx1ZTplfX1mdW5jdGlvbiBWdChlKXtyZXR1cm4hIWUuZXhwcmVzc2lvbiYmZS5leHByZXNzaW9uLmludGVycG9sYXRlZH1mdW5jdGlvbiBIdChlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIE51bWJlcj8ibnVtYmVyIjplIGluc3RhbmNlb2YgU3RyaW5nPyJzdHJpbmciOmUgaW5zdGFuY2VvZiBCb29sZWFuPyJib29sZWFuIjpBcnJheS5pc0FycmF5KGUpPyJhcnJheSI6bnVsbD09PWU/Im51bGwiOnR5cGVvZiBlfWZ1bmN0aW9uIFp0KGUpe3JldHVybiJvYmplY3QiPT10eXBlb2YgZSYmbnVsbCE9PWUmJiFBcnJheS5pc0FycmF5KGUpfWZ1bmN0aW9uIFh0KGUpe3JldHVybiBlfWZ1bmN0aW9uIEt0KGUsdCl7Y29uc3Qgcj0iY29sb3IiPT09dC50eXBlLG89ZS5zdG9wcyYmIm9iamVjdCI9PXR5cGVvZiBlLnN0b3BzWzBdWzBdLG49b3x8dm9pZCAwIT09ZS5wcm9wZXJ0eSxpPW98fCFuLGE9ZS50eXBlfHwoVnQodCk/ImV4cG9uZW50aWFsIjoiaW50ZXJ2YWwiKTtpZihyJiYoKGU9dih7fSxlKSkuc3RvcHMmJihlLnN0b3BzPWUuc3RvcHMubWFwKChlPT5bZVswXSwkLnBhcnNlKGVbMV0pXSkpKSxlLmRlZmF1bHQ/ZS5kZWZhdWx0PSQucGFyc2UoZS5kZWZhdWx0KTplLmRlZmF1bHQ9JC5wYXJzZSh0LmRlZmF1bHQpKSxlLmNvbG9yU3BhY2UmJiJyZ2IiIT09ZS5jb2xvclNwYWNlJiYhbHRbZS5jb2xvclNwYWNlXSl0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY29sb3Igc3BhY2U6ICR7ZS5jb2xvclNwYWNlfWApO2xldCBzLGwsdTtpZigiZXhwb25lbnRpYWwiPT09YSlzPXRyO2Vsc2UgaWYoImludGVydmFsIj09PWEpcz1lcjtlbHNlIGlmKCJjYXRlZ29yaWNhbCI9PT1hKXtzPVF0LGw9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IoY29uc3QgdCBvZiBlLnN0b3BzKWxbdFswXV09dFsxXTt1PXR5cGVvZiBlLnN0b3BzWzBdWzBdfWVsc2V7aWYoImlkZW50aXR5IiE9PWEpdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGZ1bmN0aW9uIHR5cGUgIiR7YX0iYCk7cz1ycn1pZihvKXtjb25zdCByPXt9LG89W107Zm9yKGxldCB0PTA7dDxlLnN0b3BzLmxlbmd0aDt0Kyspe2NvbnN0IG49ZS5zdG9wc1t0XSxpPW5bMF0uem9vbTt2b2lkIDA9PT1yW2ldJiYocltpXT17em9vbTppLHR5cGU6ZS50eXBlLHByb3BlcnR5OmUucHJvcGVydHksZGVmYXVsdDplLmRlZmF1bHQsc3RvcHM6W119LG8ucHVzaChpKSkscltpXS5zdG9wcy5wdXNoKFtuWzBdLnZhbHVlLG5bMV1dKX1jb25zdCBuPVtdO2Zvcihjb25zdCBlIG9mIG8pbi5wdXNoKFtyW2VdLnpvb20sS3QocltlXSx0KV0pO2NvbnN0IGk9e25hbWU6ImxpbmVhciJ9O3JldHVybntraW5kOiJjb21wb3NpdGUiLGludGVycG9sYXRpb25UeXBlOmksaW50ZXJwb2xhdGlvbkZhY3RvcjpwdC5pbnRlcnBvbGF0aW9uRmFjdG9yLmJpbmQodm9pZCAwLGkpLHpvb21TdG9wczpuLm1hcCgoZT0+ZVswXSkpLGV2YWx1YXRlOih7em9vbTpyfSxvKT0+dHIoe3N0b3BzOm4sYmFzZTplLmJhc2V9LHQscikuZXZhbHVhdGUocixvKX19aWYoaSl7Y29uc3Qgcj0iZXhwb25lbnRpYWwiPT09YT97bmFtZToiZXhwb25lbnRpYWwiLGJhc2U6dm9pZCAwIT09ZS5iYXNlP2UuYmFzZToxfTpudWxsO3JldHVybntraW5kOiJjYW1lcmEiLGludGVycG9sYXRpb25UeXBlOnIsaW50ZXJwb2xhdGlvbkZhY3RvcjpwdC5pbnRlcnBvbGF0aW9uRmFjdG9yLmJpbmQodm9pZCAwLHIpLHpvb21TdG9wczplLnN0b3BzLm1hcCgoZT0+ZVswXSkpLGV2YWx1YXRlOih7em9vbTpyfSk9PnMoZSx0LHIsbCx1KX19cmV0dXJue2tpbmQ6InNvdXJjZSIsZXZhbHVhdGUocixvKXtjb25zdCBuPW8mJm8ucHJvcGVydGllcz9vLnByb3BlcnRpZXNbZS5wcm9wZXJ0eV06dm9pZCAwO3JldHVybiB2b2lkIDA9PT1uP1l0KGUuZGVmYXVsdCx0LmRlZmF1bHQpOnMoZSx0LG4sbCx1KX19fWZ1bmN0aW9uIFl0KGUsdCxyKXtyZXR1cm4gdm9pZCAwIT09ZT9lOnZvaWQgMCE9PXQ/dDp2b2lkIDAhPT1yP3I6dm9pZCAwfWZ1bmN0aW9uIFF0KGUsdCxyLG8sbil7cmV0dXJuIFl0KHR5cGVvZiByPT09bj9vW3JdOnZvaWQgMCxlLmRlZmF1bHQsdC5kZWZhdWx0KX1mdW5jdGlvbiBlcihlLHQscil7aWYoIm51bWJlciIhPT1IdChyKSlyZXR1cm4gWXQoZS5kZWZhdWx0LHQuZGVmYXVsdCk7Y29uc3Qgbz1lLnN0b3BzLmxlbmd0aDtpZigxPT09bylyZXR1cm4gZS5zdG9wc1swXVsxXTtpZihyPD1lLnN0b3BzWzBdWzBdKXJldHVybiBlLnN0b3BzWzBdWzFdO2lmKHI+PWUuc3RvcHNbby0xXVswXSlyZXR1cm4gZS5zdG9wc1tvLTFdWzFdO2NvbnN0IG49RmUoZS5zdG9wcy5tYXAoKGU9PmVbMF0pKSxyKTtyZXR1cm4gZS5zdG9wc1tuXVsxXX1mdW5jdGlvbiB0cihlLHQscil7Y29uc3Qgbz12b2lkIDAhPT1lLmJhc2U/ZS5iYXNlOjE7aWYoIm51bWJlciIhPT1IdChyKSlyZXR1cm4gWXQoZS5kZWZhdWx0LHQuZGVmYXVsdCk7Y29uc3Qgbj1lLnN0b3BzLmxlbmd0aDtpZigxPT09bilyZXR1cm4gZS5zdG9wc1swXVsxXTtpZihyPD1lLnN0b3BzWzBdWzBdKXJldHVybiBlLnN0b3BzWzBdWzFdO2lmKHI+PWUuc3RvcHNbbi0xXVswXSlyZXR1cm4gZS5zdG9wc1tuLTFdWzFdO2NvbnN0IGk9RmUoZS5zdG9wcy5tYXAoKGU9PmVbMF0pKSxyKSxhPWZ1bmN0aW9uKGUsdCxyLG8pe2NvbnN0IG49by1yLGk9ZS1yO3JldHVybiAwPT09bj8wOjE9PT10P2kvbjooTWF0aC5wb3codCxpKS0xKS8oTWF0aC5wb3codCxuKS0xKX0ocixvLGUuc3RvcHNbaV1bMF0sZS5zdG9wc1tpKzFdWzBdKSxzPWUuc3RvcHNbaV1bMV0sbD1lLnN0b3BzW2krMV1bMV07bGV0IHU9R2VbdC50eXBlXXx8WHQ7aWYoZS5jb2xvclNwYWNlJiYicmdiIiE9PWUuY29sb3JTcGFjZSl7Y29uc3QgdD1sdFtlLmNvbG9yU3BhY2VdO3U9KGUscik9PnQucmV2ZXJzZSh0LmludGVycG9sYXRlKHQuZm9yd2FyZChlKSx0LmZvcndhcmQociksYSkpfXJldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBzLmV2YWx1YXRlP3tldmFsdWF0ZSguLi5lKXtjb25zdCB0PXMuZXZhbHVhdGUuYXBwbHkodm9pZCAwLGUpLHI9bC5ldmFsdWF0ZS5hcHBseSh2b2lkIDAsZSk7aWYodm9pZCAwIT09dCYmdm9pZCAwIT09cilyZXR1cm4gdSh0LHIsYSl9fTp1KHMsbCxhKX1mdW5jdGlvbiBycihlLHQscil7cmV0dXJuImNvbG9yIj09PXQudHlwZT9yPSQucGFyc2Uocik6ImZvcm1hdHRlZCI9PT10LnR5cGU/cj1XLmZyb21TdHJpbmcoci50b1N0cmluZygpKToicmVzb2x2ZWRJbWFnZSI9PT10LnR5cGU/cj1HLmZyb21TdHJpbmcoci50b1N0cmluZygpKTpIdChyKT09PXQudHlwZXx8ImVudW0iPT09dC50eXBlJiZ0LnZhbHVlc1tyXXx8KHI9dm9pZCAwKSxZdChyLGUuZGVmYXVsdCx0LmRlZmF1bHQpfWNsYXNzIG9ye2NvbnN0cnVjdG9yKGUsdCl7dmFyIHI7dGhpcy5leHByZXNzaW9uPWUsdGhpcy5fd2FybmluZ0hpc3Rvcnk9e30sdGhpcy5fZXZhbHVhdG9yPW5ldyBsZSx0aGlzLl9kZWZhdWx0VmFsdWU9dD8iY29sb3IiPT09KHI9dCkudHlwZSYmKFp0KHIuZGVmYXVsdCl8fEFycmF5LmlzQXJyYXkoci5kZWZhdWx0KSk/bmV3ICQoMCwwLDAsMCk6ImNvbG9yIj09PXIudHlwZT8kLnBhcnNlKHIuZGVmYXVsdCl8fG51bGw6dm9pZCAwPT09ci5kZWZhdWx0P251bGw6ci5kZWZhdWx0Om51bGwsdGhpcy5fZW51bVZhbHVlcz10JiYiZW51bSI9PT10LnR5cGU/dC52YWx1ZXM6bnVsbH1ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nKGUsdCxyLG8sbixpLGEscyl7cmV0dXJuIHRoaXMuX2V2YWx1YXRvci5nbG9iYWxzPWUsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmU9dCx0aGlzLl9ldmFsdWF0b3IuZmVhdHVyZVN0YXRlPXIsdGhpcy5fZXZhbHVhdG9yLmNhbm9uaWNhbD1vfHxudWxsLHRoaXMuX2V2YWx1YXRvci5hdmFpbGFibGVJbWFnZXM9bnx8bnVsbCx0aGlzLl9ldmFsdWF0b3IuZm9ybWF0dGVkU2VjdGlvbj1pLHRoaXMuX2V2YWx1YXRvci5mZWF0dXJlVGlsZUNvb3JkPWF8fG51bGwsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmVEaXN0YW5jZURhdGE9c3x8bnVsbCx0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodGhpcy5fZXZhbHVhdG9yKX1ldmFsdWF0ZShlLHQscixvLG4saSxhLHMpe3RoaXMuX2V2YWx1YXRvci5nbG9iYWxzPWUsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmU9dHx8bnVsbCx0aGlzLl9ldmFsdWF0b3IuZmVhdHVyZVN0YXRlPXJ8fG51bGwsdGhpcy5fZXZhbHVhdG9yLmNhbm9uaWNhbD1vfHxudWxsLHRoaXMuX2V2YWx1YXRvci5hdmFpbGFibGVJbWFnZXM9bnx8bnVsbCx0aGlzLl9ldmFsdWF0b3IuZm9ybWF0dGVkU2VjdGlvbj1pfHxudWxsLHRoaXMuX2V2YWx1YXRvci5mZWF0dXJlVGlsZUNvb3JkPWF8fG51bGwsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmVEaXN0YW5jZURhdGE9c3x8bnVsbDt0cnl7Y29uc3QgZT10aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodGhpcy5fZXZhbHVhdG9yKTtpZihudWxsPT1lfHwibnVtYmVyIj09dHlwZW9mIGUmJmUhPWUpcmV0dXJuIHRoaXMuX2RlZmF1bHRWYWx1ZTtpZih0aGlzLl9lbnVtVmFsdWVzJiYhKGUgaW4gdGhpcy5fZW51bVZhbHVlcykpdGhyb3cgbmV3IFkoYEV4cGVjdGVkIHZhbHVlIHRvIGJlIG9uZSBvZiAke09iamVjdC5rZXlzKHRoaXMuX2VudW1WYWx1ZXMpLm1hcCgoZT0+SlNPTi5zdHJpbmdpZnkoZSkpKS5qb2luKCIsICIpfSwgYnV0IGZvdW5kICR7SlNPTi5zdHJpbmdpZnkoZSl9IGluc3RlYWQuYCk7cmV0dXJuIGV9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX3dhcm5pbmdIaXN0b3J5W2UubWVzc2FnZV18fCh0aGlzLl93YXJuaW5nSGlzdG9yeVtlLm1lc3NhZ2VdPSEwLCJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZSYmY29uc29sZS53YXJuKGUubWVzc2FnZSkpLHRoaXMuX2RlZmF1bHRWYWx1ZX19fWZ1bmN0aW9uIG5yKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpJiZlLmxlbmd0aD4wJiYic3RyaW5nIj09dHlwZW9mIGVbMF0mJmVbMF1pbiBXdH1mdW5jdGlvbiBpcihlLHQpe2NvbnN0IHI9bmV3IERlKFd0LFtdLHQ/ZnVuY3Rpb24oZSl7Y29uc3QgdD17Y29sb3I6UyxzdHJpbmc6VCxudW1iZXI6eixlbnVtOlQsYm9vbGVhbjpfLGZvcm1hdHRlZDpPLHJlc29sdmVkSW1hZ2U6RX07aWYoImFycmF5Ij09PWUudHlwZSlyZXR1cm4gcSh0W2UudmFsdWVdfHxJLGUubGVuZ3RoKTtyZXR1cm4gdFtlLnR5cGVdfSh0KTp2b2lkIDApLG89ci5wYXJzZShlLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHQmJiJzdHJpbmciPT09dC50eXBlP3t0eXBlQW5ub3RhdGlvbjoiY29lcmNlIn06dm9pZCAwKTtyZXR1cm4gbz9HdChuZXcgb3Iobyx0KSk6QnQoci5lcnJvcnMpfWNsYXNzIGFye2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5raW5kPWUsdGhpcy5fc3R5bGVFeHByZXNzaW9uPXQsdGhpcy5pc1N0YXRlRGVwZW5kZW50PSJjb25zdGFudCIhPT1lJiYhRWUodC5leHByZXNzaW9uKX1ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nKGUsdCxyLG8sbixpKXtyZXR1cm4gdGhpcy5fc3R5bGVFeHByZXNzaW9uLmV2YWx1YXRlV2l0aG91dEVycm9ySGFuZGxpbmcoZSx0LHIsbyxuLGkpfWV2YWx1YXRlKGUsdCxyLG8sbixpKXtyZXR1cm4gdGhpcy5fc3R5bGVFeHByZXNzaW9uLmV2YWx1YXRlKGUsdCxyLG8sbixpKX19Y2xhc3Mgc3J7Y29uc3RydWN0b3IoZSx0LHIsbyl7dGhpcy5raW5kPWUsdGhpcy56b29tU3RvcHM9cix0aGlzLl9zdHlsZUV4cHJlc3Npb249dCx0aGlzLmlzU3RhdGVEZXBlbmRlbnQ9ImNhbWVyYSIhPT1lJiYhRWUodC5leHByZXNzaW9uKSx0aGlzLmludGVycG9sYXRpb25UeXBlPW99ZXZhbHVhdGVXaXRob3V0RXJyb3JIYW5kbGluZyhlLHQscixvLG4saSl7cmV0dXJuIHRoaXMuX3N0eWxlRXhwcmVzc2lvbi5ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nKGUsdCxyLG8sbixpKX1ldmFsdWF0ZShlLHQscixvLG4saSl7cmV0dXJuIHRoaXMuX3N0eWxlRXhwcmVzc2lvbi5ldmFsdWF0ZShlLHQscixvLG4saSl9aW50ZXJwb2xhdGlvbkZhY3RvcihlLHQscil7cmV0dXJuIHRoaXMuaW50ZXJwb2xhdGlvblR5cGU/cHQuaW50ZXJwb2xhdGlvbkZhY3Rvcih0aGlzLmludGVycG9sYXRpb25UeXBlLGUsdCxyKTowfX1mdW5jdGlvbiBscihlLHQpe2lmKCJlcnJvciI9PT0oZT1pcihlLHQpKS5yZXN1bHQpcmV0dXJuIGU7Y29uc3Qgcj1lLnZhbHVlLmV4cHJlc3Npb24sbz1PZShyKTtpZighbyYmKCJkYXRhLWRyaXZlbiIhPT0obj10KVsicHJvcGVydHktdHlwZSJdJiYiY3Jvc3MtZmFkZWQtZGF0YS1kcml2ZW4iIT09blsicHJvcGVydHktdHlwZSJdKSlyZXR1cm4gQnQoW25ldyB4KCIiLCJkYXRhIGV4cHJlc3Npb25zIG5vdCBzdXBwb3J0ZWQiKV0pO3ZhciBuO2NvbnN0IGk9cWUocixbInpvb20iLCJwaXRjaCIsImRpc3RhbmNlLWZyb20tY2VudGVyIl0pO2lmKCFpJiYhZnVuY3Rpb24oZSl7cmV0dXJuISFlLmV4cHJlc3Npb24mJmUuZXhwcmVzc2lvbi5wYXJhbWV0ZXJzLmluZGV4T2YoInpvb20iKT4tMX0odCkpcmV0dXJuIEJ0KFtuZXcgeCgiIiwiem9vbSBleHByZXNzaW9ucyBub3Qgc3VwcG9ydGVkIildKTtjb25zdCBhPWNyKHIpO2lmKCFhJiYhaSlyZXR1cm4gQnQoW25ldyB4KCIiLCciem9vbSIgZXhwcmVzc2lvbiBtYXkgb25seSBiZSB1c2VkIGFzIGlucHV0IHRvIGEgdG9wLWxldmVsICJzdGVwIiBvciAiaW50ZXJwb2xhdGUiIGV4cHJlc3Npb24uJyldKTtpZihhIGluc3RhbmNlb2YgeClyZXR1cm4gQnQoW2FdKTtpZihhIGluc3RhbmNlb2YgcHQmJiFWdCh0KSlyZXR1cm4gQnQoW25ldyB4KCIiLCciaW50ZXJwb2xhdGUiIGV4cHJlc3Npb25zIGNhbm5vdCBiZSB1c2VkIHdpdGggdGhpcyBwcm9wZXJ0eScpXSk7aWYoIWEpcmV0dXJuIEd0KG5ldyBhcihvPyJjb25zdGFudCI6InNvdXJjZSIsZS52YWx1ZSkpO2NvbnN0IHM9YSBpbnN0YW5jZW9mIHB0P2EuaW50ZXJwb2xhdGlvbjp2b2lkIDA7cmV0dXJuIEd0KG5ldyBzcihvPyJjYW1lcmEiOiJjb21wb3NpdGUiLGUudmFsdWUsYS5sYWJlbHMscykpfWNsYXNzIHVye2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcGFyYW1ldGVycz1lLHRoaXMuX3NwZWNpZmljYXRpb249dCx2KHRoaXMsS3QodGhpcy5fcGFyYW1ldGVycyx0aGlzLl9zcGVjaWZpY2F0aW9uKSl9c3RhdGljIGRlc2VyaWFsaXplKGUpe3JldHVybiBuZXcgdXIoZS5fcGFyYW1ldGVycyxlLl9zcGVjaWZpY2F0aW9uKX1zdGF0aWMgc2VyaWFsaXplKGUpe3JldHVybntfcGFyYW1ldGVyczplLl9wYXJhbWV0ZXJzLF9zcGVjaWZpY2F0aW9uOmUuX3NwZWNpZmljYXRpb259fX1mdW5jdGlvbiBjcihlKXtsZXQgdD1udWxsO2lmKGUgaW5zdGFuY2VvZiB5dCl0PWNyKGUucmVzdWx0KTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBodCl7Zm9yKGNvbnN0IHIgb2YgZS5hcmdzKWlmKHQ9Y3IociksdClicmVha31lbHNlKGUgaW5zdGFuY2VvZiAkZXx8ZSBpbnN0YW5jZW9mIHB0KSYmZS5pbnB1dCBpbnN0YW5jZW9mIGNlJiYiem9vbSI9PT1lLmlucHV0Lm5hbWUmJih0PWUpO3JldHVybiB0IGluc3RhbmNlb2YgeHx8ZS5lYWNoQ2hpbGQoKGU9Pntjb25zdCByPWNyKGUpO3IgaW5zdGFuY2VvZiB4P3Q9cjohdCYmcj90PW5ldyB4KCIiLCciem9vbSIgZXhwcmVzc2lvbiBtYXkgb25seSBiZSB1c2VkIGFzIGlucHV0IHRvIGEgdG9wLWxldmVsICJzdGVwIiBvciAiaW50ZXJwb2xhdGUiIGV4cHJlc3Npb24uJyk6dCYmciYmdCE9PXImJih0PW5ldyB4KCIiLCdPbmx5IG9uZSB6b29tLWJhc2VkICJzdGVwIiBvciAiaW50ZXJwb2xhdGUiIHN1YmV4cHJlc3Npb24gbWF5IGJlIHVzZWQgaW4gYW4gZXhwcmVzc2lvbi4nKSl9KSksdH1oKChmdW5jdGlvbihlLHQpe3ZhciByPWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSx0LHIsbyl7Zm9yKHI9cnx8e30sbz1lLmxlbmd0aDtvLS07cltlW29dXT10KTtyZXR1cm4gcn0sdD1bMSwxMl0scj1bMSwxM10sbz1bMSw5XSxuPVsxLDEwXSxpPVsxLDExXSxhPVsxLDE0XSxzPVsxLDE1XSxsPVsxNCwxOCwyMiwyNF0sdT1bMTgsMjJdLGM9WzIyLDI0XSxwPXt0cmFjZTpmdW5jdGlvbigpe30seXk6e30sc3ltYm9sc186e2Vycm9yOjIsSlNPTlN0cmluZzozLFNUUklORzo0LEpTT05OdW1iZXI6NSxOVU1CRVI6NixKU09OTnVsbExpdGVyYWw6NyxOVUxMOjgsSlNPTkJvb2xlYW5MaXRlcmFsOjksVFJVRToxMCxGQUxTRToxMSxKU09OVGV4dDoxMixKU09OVmFsdWU6MTMsRU9GOjE0LEpTT05PYmplY3Q6MTUsSlNPTkFycmF5OjE2LCJ7IjoxNywifSI6MTgsSlNPTk1lbWJlckxpc3Q6MTksSlNPTk1lbWJlcjoyMCwiOiI6MjEsIiwiOjIyLCJbIjoyMywiXSI6MjQsSlNPTkVsZW1lbnRMaXN0OjI1LCRhY2NlcHQ6MCwkZW5kOjF9LHRlcm1pbmFsc186ezI6ImVycm9yIiw0OiJTVFJJTkciLDY6Ik5VTUJFUiIsODoiTlVMTCIsMTA6IlRSVUUiLDExOiJGQUxTRSIsMTQ6IkVPRiIsMTc6InsiLDE4OiJ9IiwyMToiOiIsMjI6IiwiLDIzOiJbIiwyNDoiXSJ9LHByb2R1Y3Rpb25zXzpbMCxbMywxXSxbNSwxXSxbNywxXSxbOSwxXSxbOSwxXSxbMTIsMl0sWzEzLDFdLFsxMywxXSxbMTMsMV0sWzEzLDFdLFsxMywxXSxbMTMsMV0sWzE1LDJdLFsxNSwzXSxbMjAsM10sWzE5LDFdLFsxOSwzXSxbMTYsMl0sWzE2LDNdLFsyNSwxXSxbMjUsM11dLHBlcmZvcm1BY3Rpb246ZnVuY3Rpb24oZSx0LHIsbyxuLGksYSl7dmFyIHM9aS5sZW5ndGgtMTtzd2l0Y2gobil7Y2FzZSAxOnRoaXMuJD1uZXcgU3RyaW5nKGUucmVwbGFjZSgvXFwoXFx8IikvZywiJDEiKS5yZXBsYWNlKC9cXG4vZywiXG4iKS5yZXBsYWNlKC9cXHIvZywiXHIiKS5yZXBsYWNlKC9cXHQvZywiXHQiKS5yZXBsYWNlKC9cXHYvZywiXHYiKS5yZXBsYWNlKC9cXGYvZywiXGYiKS5yZXBsYWNlKC9cXGIvZywiXGIiKSksdGhpcy4kLl9fbGluZV9fPXRoaXMuXyQuZmlyc3RfbGluZTticmVhaztjYXNlIDI6dGhpcy4kPW5ldyBOdW1iZXIoZSksdGhpcy4kLl9fbGluZV9fPXRoaXMuXyQuZmlyc3RfbGluZTticmVhaztjYXNlIDM6dGhpcy4kPW51bGw7YnJlYWs7Y2FzZSA0OnRoaXMuJD1uZXcgQm9vbGVhbighMCksdGhpcy4kLl9fbGluZV9fPXRoaXMuXyQuZmlyc3RfbGluZTticmVhaztjYXNlIDU6dGhpcy4kPW5ldyBCb29sZWFuKCExKSx0aGlzLiQuX19saW5lX189dGhpcy5fJC5maXJzdF9saW5lO2JyZWFrO2Nhc2UgNjpyZXR1cm4gdGhpcy4kPWlbcy0xXTtjYXNlIDEzOnRoaXMuJD17fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy4kLCJfX2xpbmVfXyIse3ZhbHVlOnRoaXMuXyQuZmlyc3RfbGluZSxlbnVtZXJhYmxlOiExfSk7YnJlYWs7Y2FzZSAxNDpjYXNlIDE5OnRoaXMuJD1pW3MtMV0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuJCwiX19saW5lX18iLHt2YWx1ZTp0aGlzLl8kLmZpcnN0X2xpbmUsZW51bWVyYWJsZTohMX0pO2JyZWFrO2Nhc2UgMTU6dGhpcy4kPVtpW3MtMl0saVtzXV07YnJlYWs7Y2FzZSAxNjp0aGlzLiQ9e30sdGhpcy4kW2lbc11bMF1dPWlbc11bMV07YnJlYWs7Y2FzZSAxNzp0aGlzLiQ9aVtzLTJdLGlbcy0yXVtpW3NdWzBdXT1pW3NdWzFdO2JyZWFrO2Nhc2UgMTg6dGhpcy4kPVtdLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLiQsIl9fbGluZV9fIix7dmFsdWU6dGhpcy5fJC5maXJzdF9saW5lLGVudW1lcmFibGU6ITF9KTticmVhaztjYXNlIDIwOnRoaXMuJD1baVtzXV07YnJlYWs7Y2FzZSAyMTp0aGlzLiQ9aVtzLTJdLGlbcy0yXS5wdXNoKGlbc10pfX0sdGFibGU6W3szOjUsNDp0LDU6Niw2OnIsNzozLDg6byw5OjQsMTA6biwxMTppLDEyOjEsMTM6MiwxNTo3LDE2OjgsMTc6YSwyMzpzfSx7MTpbM119LHsxNDpbMSwxNl19LGUobCxbMiw3XSksZShsLFsyLDhdKSxlKGwsWzIsOV0pLGUobCxbMiwxMF0pLGUobCxbMiwxMV0pLGUobCxbMiwxMl0pLGUobCxbMiwzXSksZShsLFsyLDRdKSxlKGwsWzIsNV0pLGUoWzE0LDE4LDIxLDIyLDI0XSxbMiwxXSksZShsLFsyLDJdKSx7MzoyMCw0OnQsMTg6WzEsMTddLDE5OjE4LDIwOjE5fSx7Mzo1LDQ6dCw1OjYsNjpyLDc6Myw4Om8sOTo0LDEwOm4sMTE6aSwxMzoyMywxNTo3LDE2OjgsMTc6YSwyMzpzLDI0OlsxLDIxXSwyNToyMn0sezE6WzIsNl19LGUobCxbMiwxM10pLHsxODpbMSwyNF0sMjI6WzEsMjVdfSxlKHUsWzIsMTZdKSx7MjE6WzEsMjZdfSxlKGwsWzIsMThdKSx7MjI6WzEsMjhdLDI0OlsxLDI3XX0sZShjLFsyLDIwXSksZShsLFsyLDE0XSksezM6MjAsNDp0LDIwOjI5fSx7Mzo1LDQ6dCw1OjYsNjpyLDc6Myw4Om8sOTo0LDEwOm4sMTE6aSwxMzozMCwxNTo3LDE2OjgsMTc6YSwyMzpzfSxlKGwsWzIsMTldKSx7Mzo1LDQ6dCw1OjYsNjpyLDc6Myw4Om8sOTo0LDEwOm4sMTE6aSwxMzozMSwxNTo3LDE2OjgsMTc6YSwyMzpzfSxlKHUsWzIsMTddKSxlKHUsWzIsMTVdKSxlKGMsWzIsMjFdKV0sZGVmYXVsdEFjdGlvbnM6ezE2OlsyLDZdfSxwYXJzZUVycm9yOmZ1bmN0aW9uKGUsdCl7aWYoIXQucmVjb3ZlcmFibGUpdGhyb3cgbmV3IEVycm9yKGUpO3RoaXMudHJhY2UoZSl9LHBhcnNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1bMF0sbz1bbnVsbF0sbj1bXSxpPXRoaXMudGFibGUsYT0iIixzPTAsbD0wLHU9MixjPTEscD1uLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGQ9T2JqZWN0LmNyZWF0ZSh0aGlzLmxleGVyKSxoPXt5eTp7fX07Zm9yKHZhciBmIGluIHRoaXMueXkpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMueXksZikmJihoLnl5W2ZdPXRoaXMueXlbZl0pO2Quc2V0SW5wdXQoZSxoLnl5KSxoLnl5LmxleGVyPWQsaC55eS5wYXJzZXI9dGhpcyx2b2lkIDA9PT1kLnl5bGxvYyYmKGQueXlsbG9jPXt9KTt2YXIgeT1kLnl5bGxvYztuLnB1c2goeSk7dmFyIG09ZC5vcHRpb25zJiZkLm9wdGlvbnMucmFuZ2VzO2Z1bmN0aW9uIGcoKXt2YXIgZTtyZXR1cm4ibnVtYmVyIiE9dHlwZW9mKGU9ZC5sZXgoKXx8YykmJihlPXQuc3ltYm9sc19bZV18fGUpLGV9ImZ1bmN0aW9uIj09dHlwZW9mIGgueXkucGFyc2VFcnJvcj90aGlzLnBhcnNlRXJyb3I9aC55eS5wYXJzZUVycm9yOnRoaXMucGFyc2VFcnJvcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykucGFyc2VFcnJvcjtmb3IodmFyIHYsYix4LHcsayxqLHosVCxfPXt9Ozspe2lmKGI9cltyLmxlbmd0aC0xXSx0aGlzLmRlZmF1bHRBY3Rpb25zW2JdP3g9dGhpcy5kZWZhdWx0QWN0aW9uc1tiXToobnVsbD09diYmKHY9ZygpKSx4PWlbYl0mJmlbYl1bdl0pLHZvaWQgMD09PXh8fCF4Lmxlbmd0aHx8IXhbMF0pe3ZhciBTPSIiO2ZvcihrIGluIFQ9W10saVtiXSl0aGlzLnRlcm1pbmFsc19ba10mJms+dSYmVC5wdXNoKCInIit0aGlzLnRlcm1pbmFsc19ba10rIiciKTtTPWQuc2hvd1Bvc2l0aW9uPyJQYXJzZSBlcnJvciBvbiBsaW5lICIrKHMrMSkrIjpcbiIrZC5zaG93UG9zaXRpb24oKSsiXG5FeHBlY3RpbmcgIitULmpvaW4oIiwgIikrIiwgZ290ICciKyh0aGlzLnRlcm1pbmFsc19bdl18fHYpKyInIjoiUGFyc2UgZXJyb3Igb24gbGluZSAiKyhzKzEpKyI6IFVuZXhwZWN0ZWQgIisodj09Yz8iZW5kIG9mIGlucHV0IjoiJyIrKHRoaXMudGVybWluYWxzX1t2XXx8dikrIiciKSx0aGlzLnBhcnNlRXJyb3IoUyx7dGV4dDpkLm1hdGNoLHRva2VuOnRoaXMudGVybWluYWxzX1t2XXx8dixsaW5lOmQueXlsaW5lbm8sbG9jOnksZXhwZWN0ZWQ6VH0pfWlmKHhbMF1pbnN0YW5jZW9mIEFycmF5JiZ4Lmxlbmd0aD4xKXRocm93IG5ldyBFcnJvcigiUGFyc2UgRXJyb3I6IG11bHRpcGxlIGFjdGlvbnMgcG9zc2libGUgYXQgc3RhdGU6ICIrYisiLCB0b2tlbjogIit2KTtzd2l0Y2goeFswXSl7Y2FzZSAxOnIucHVzaCh2KSxvLnB1c2goZC55eXRleHQpLG4ucHVzaChkLnl5bGxvYyksci5wdXNoKHhbMV0pLHY9bnVsbCxsPWQueXlsZW5nLGE9ZC55eXRleHQscz1kLnl5bGluZW5vLHk9ZC55eWxsb2M7YnJlYWs7Y2FzZSAyOmlmKGo9dGhpcy5wcm9kdWN0aW9uc19beFsxXV1bMV0sXy4kPW9bby5sZW5ndGgtal0sXy5fJD17Zmlyc3RfbGluZTpuW24ubGVuZ3RoLShqfHwxKV0uZmlyc3RfbGluZSxsYXN0X2xpbmU6bltuLmxlbmd0aC0xXS5sYXN0X2xpbmUsZmlyc3RfY29sdW1uOm5bbi5sZW5ndGgtKGp8fDEpXS5maXJzdF9jb2x1bW4sbGFzdF9jb2x1bW46bltuLmxlbmd0aC0xXS5sYXN0X2NvbHVtbn0sbSYmKF8uXyQucmFuZ2U9W25bbi5sZW5ndGgtKGp8fDEpXS5yYW5nZVswXSxuW24ubGVuZ3RoLTFdLnJhbmdlWzFdXSksdm9pZCAwIT09KHc9dGhpcy5wZXJmb3JtQWN0aW9uLmFwcGx5KF8sW2EsbCxzLGgueXkseFsxXSxvLG5dLmNvbmNhdChwKSkpKXJldHVybiB3O2omJihyPXIuc2xpY2UoMCwtMSpqKjIpLG89by5zbGljZSgwLC0xKmopLG49bi5zbGljZSgwLC0xKmopKSxyLnB1c2godGhpcy5wcm9kdWN0aW9uc19beFsxXV1bMF0pLG8ucHVzaChfLiQpLG4ucHVzaChfLl8kKSx6PWlbcltyLmxlbmd0aC0yXV1bcltyLmxlbmd0aC0xXV0sci5wdXNoKHopO2JyZWFrO2Nhc2UgMzpyZXR1cm4hMH19cmV0dXJuITB9fSxkPXtFT0Y6MSxwYXJzZUVycm9yOmZ1bmN0aW9uKGUsdCl7aWYoIXRoaXMueXkucGFyc2VyKXRocm93IG5ldyBFcnJvcihlKTt0aGlzLnl5LnBhcnNlci5wYXJzZUVycm9yKGUsdCl9LHNldElucHV0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMueXk9dHx8dGhpcy55eXx8e30sdGhpcy5faW5wdXQ9ZSx0aGlzLl9tb3JlPXRoaXMuX2JhY2t0cmFjaz10aGlzLmRvbmU9ITEsdGhpcy55eWxpbmVubz10aGlzLnl5bGVuZz0wLHRoaXMueXl0ZXh0PXRoaXMubWF0Y2hlZD10aGlzLm1hdGNoPSIiLHRoaXMuY29uZGl0aW9uU3RhY2s9WyJJTklUSUFMIl0sdGhpcy55eWxsb2M9e2ZpcnN0X2xpbmU6MSxmaXJzdF9jb2x1bW46MCxsYXN0X2xpbmU6MSxsYXN0X2NvbHVtbjowfSx0aGlzLm9wdGlvbnMucmFuZ2VzJiYodGhpcy55eWxsb2MucmFuZ2U9WzAsMF0pLHRoaXMub2Zmc2V0PTAsdGhpc30saW5wdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9pbnB1dFswXTtyZXR1cm4gdGhpcy55eXRleHQrPWUsdGhpcy55eWxlbmcrKyx0aGlzLm9mZnNldCsrLHRoaXMubWF0Y2grPWUsdGhpcy5tYXRjaGVkKz1lLGUubWF0Y2goLyg/OlxyXG4/fFxuKS4qL2cpPyh0aGlzLnl5bGluZW5vKyssdGhpcy55eWxsb2MubGFzdF9saW5lKyspOnRoaXMueXlsbG9jLmxhc3RfY29sdW1uKyssdGhpcy5vcHRpb25zLnJhbmdlcyYmdGhpcy55eWxsb2MucmFuZ2VbMV0rKyx0aGlzLl9pbnB1dD10aGlzLl9pbnB1dC5zbGljZSgxKSxlfSx1bnB1dDpmdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aCxyPWUuc3BsaXQoLyg/OlxyXG4/fFxuKS9nKTt0aGlzLl9pbnB1dD1lK3RoaXMuX2lucHV0LHRoaXMueXl0ZXh0PXRoaXMueXl0ZXh0LnN1YnN0cigwLHRoaXMueXl0ZXh0Lmxlbmd0aC10KSx0aGlzLm9mZnNldC09dDt2YXIgbz10aGlzLm1hdGNoLnNwbGl0KC8oPzpcclxuP3xcbikvZyk7dGhpcy5tYXRjaD10aGlzLm1hdGNoLnN1YnN0cigwLHRoaXMubWF0Y2gubGVuZ3RoLTEpLHRoaXMubWF0Y2hlZD10aGlzLm1hdGNoZWQuc3Vic3RyKDAsdGhpcy5tYXRjaGVkLmxlbmd0aC0xKSxyLmxlbmd0aC0xJiYodGhpcy55eWxpbmVuby09ci5sZW5ndGgtMSk7dmFyIG49dGhpcy55eWxsb2MucmFuZ2U7cmV0dXJuIHRoaXMueXlsbG9jPXtmaXJzdF9saW5lOnRoaXMueXlsbG9jLmZpcnN0X2xpbmUsbGFzdF9saW5lOnRoaXMueXlsaW5lbm8rMSxmaXJzdF9jb2x1bW46dGhpcy55eWxsb2MuZmlyc3RfY29sdW1uLGxhc3RfY29sdW1uOnI/KHIubGVuZ3RoPT09by5sZW5ndGg/dGhpcy55eWxsb2MuZmlyc3RfY29sdW1uOjApK29bby5sZW5ndGgtci5sZW5ndGhdLmxlbmd0aC1yWzBdLmxlbmd0aDp0aGlzLnl5bGxvYy5maXJzdF9jb2x1bW4tdH0sdGhpcy5vcHRpb25zLnJhbmdlcyYmKHRoaXMueXlsbG9jLnJhbmdlPVtuWzBdLG5bMF0rdGhpcy55eWxlbmctdF0pLHRoaXMueXlsZW5nPXRoaXMueXl0ZXh0Lmxlbmd0aCx0aGlzfSxtb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vcmU9ITAsdGhpc30scmVqZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5iYWNrdHJhY2tfbGV4ZXI/KHRoaXMuX2JhY2t0cmFjaz0hMCx0aGlzKTp0aGlzLnBhcnNlRXJyb3IoIkxleGljYWwgZXJyb3Igb24gbGluZSAiKyh0aGlzLnl5bGluZW5vKzEpKyIuIFlvdSBjYW4gb25seSBpbnZva2UgcmVqZWN0KCkgaW4gdGhlIGxleGVyIHdoZW4gdGhlIGxleGVyIGlzIG9mIHRoZSBiYWNrdHJhY2tpbmcgcGVyc3Vhc2lvbiAob3B0aW9ucy5iYWNrdHJhY2tfbGV4ZXIgPSB0cnVlKS5cbiIrdGhpcy5zaG93UG9zaXRpb24oKSx7dGV4dDoiIix0b2tlbjpudWxsLGxpbmU6dGhpcy55eWxpbmVub30pfSxsZXNzOmZ1bmN0aW9uKGUpe3RoaXMudW5wdXQodGhpcy5tYXRjaC5zbGljZShlKSl9LHBhc3RJbnB1dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubWF0Y2hlZC5zdWJzdHIoMCx0aGlzLm1hdGNoZWQubGVuZ3RoLXRoaXMubWF0Y2gubGVuZ3RoKTtyZXR1cm4oZS5sZW5ndGg+MjA/Ii4uLiI6IiIpK2Uuc3Vic3RyKC0yMCkucmVwbGFjZSgvXG4vZywiIil9LHVwY29taW5nSW5wdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1hdGNoO3JldHVybiBlLmxlbmd0aDwyMCYmKGUrPXRoaXMuX2lucHV0LnN1YnN0cigwLDIwLWUubGVuZ3RoKSksKGUuc3Vic3RyKDAsMjApKyhlLmxlbmd0aD4yMD8iLi4uIjoiIikpLnJlcGxhY2UoL1xuL2csIiIpfSxzaG93UG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnBhc3RJbnB1dCgpLHQ9bmV3IEFycmF5KGUubGVuZ3RoKzEpLmpvaW4oIi0iKTtyZXR1cm4gZSt0aGlzLnVwY29taW5nSW5wdXQoKSsiXG4iK3QrIl4ifSx0ZXN0X21hdGNoOmZ1bmN0aW9uKGUsdCl7dmFyIHIsbyxuO2lmKHRoaXMub3B0aW9ucy5iYWNrdHJhY2tfbGV4ZXImJihuPXt5eWxpbmVubzp0aGlzLnl5bGluZW5vLHl5bGxvYzp7Zmlyc3RfbGluZTp0aGlzLnl5bGxvYy5maXJzdF9saW5lLGxhc3RfbGluZTp0aGlzLmxhc3RfbGluZSxmaXJzdF9jb2x1bW46dGhpcy55eWxsb2MuZmlyc3RfY29sdW1uLGxhc3RfY29sdW1uOnRoaXMueXlsbG9jLmxhc3RfY29sdW1ufSx5eXRleHQ6dGhpcy55eXRleHQsbWF0Y2g6dGhpcy5tYXRjaCxtYXRjaGVzOnRoaXMubWF0Y2hlcyxtYXRjaGVkOnRoaXMubWF0Y2hlZCx5eWxlbmc6dGhpcy55eWxlbmcsb2Zmc2V0OnRoaXMub2Zmc2V0LF9tb3JlOnRoaXMuX21vcmUsX2lucHV0OnRoaXMuX2lucHV0LHl5OnRoaXMueXksY29uZGl0aW9uU3RhY2s6dGhpcy5jb25kaXRpb25TdGFjay5zbGljZSgwKSxkb25lOnRoaXMuZG9uZX0sdGhpcy5vcHRpb25zLnJhbmdlcyYmKG4ueXlsbG9jLnJhbmdlPXRoaXMueXlsbG9jLnJhbmdlLnNsaWNlKDApKSksKG89ZVswXS5tYXRjaCgvKD86XHJcbj98XG4pLiovZykpJiYodGhpcy55eWxpbmVubys9by5sZW5ndGgpLHRoaXMueXlsbG9jPXtmaXJzdF9saW5lOnRoaXMueXlsbG9jLmxhc3RfbGluZSxsYXN0X2xpbmU6dGhpcy55eWxpbmVubysxLGZpcnN0X2NvbHVtbjp0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbixsYXN0X2NvbHVtbjpvP29bby5sZW5ndGgtMV0ubGVuZ3RoLW9bby5sZW5ndGgtMV0ubWF0Y2goL1xyP1xuPy8pWzBdLmxlbmd0aDp0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbitlWzBdLmxlbmd0aH0sdGhpcy55eXRleHQrPWVbMF0sdGhpcy5tYXRjaCs9ZVswXSx0aGlzLm1hdGNoZXM9ZSx0aGlzLnl5bGVuZz10aGlzLnl5dGV4dC5sZW5ndGgsdGhpcy5vcHRpb25zLnJhbmdlcyYmKHRoaXMueXlsbG9jLnJhbmdlPVt0aGlzLm9mZnNldCx0aGlzLm9mZnNldCs9dGhpcy55eWxlbmddKSx0aGlzLl9tb3JlPSExLHRoaXMuX2JhY2t0cmFjaz0hMSx0aGlzLl9pbnB1dD10aGlzLl9pbnB1dC5zbGljZShlWzBdLmxlbmd0aCksdGhpcy5tYXRjaGVkKz1lWzBdLHI9dGhpcy5wZXJmb3JtQWN0aW9uLmNhbGwodGhpcyx0aGlzLnl5LHRoaXMsdCx0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoLTFdKSx0aGlzLmRvbmUmJnRoaXMuX2lucHV0JiYodGhpcy5kb25lPSExKSxyKXJldHVybiByO2lmKHRoaXMuX2JhY2t0cmFjayl7Zm9yKHZhciBpIGluIG4pdGhpc1tpXT1uW2ldO3JldHVybiExfXJldHVybiExfSxuZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5kb25lKXJldHVybiB0aGlzLkVPRjt2YXIgZSx0LHIsbzt0aGlzLl9pbnB1dHx8KHRoaXMuZG9uZT0hMCksdGhpcy5fbW9yZXx8KHRoaXMueXl0ZXh0PSIiLHRoaXMubWF0Y2g9IiIpO2Zvcih2YXIgbj10aGlzLl9jdXJyZW50UnVsZXMoKSxpPTA7aTxuLmxlbmd0aDtpKyspaWYoKHI9dGhpcy5faW5wdXQubWF0Y2godGhpcy5ydWxlc1tuW2ldXSkpJiYoIXR8fHJbMF0ubGVuZ3RoPnRbMF0ubGVuZ3RoKSl7aWYodD1yLG89aSx0aGlzLm9wdGlvbnMuYmFja3RyYWNrX2xleGVyKXtpZighMSE9PShlPXRoaXMudGVzdF9tYXRjaChyLG5baV0pKSlyZXR1cm4gZTtpZih0aGlzLl9iYWNrdHJhY2spe3Q9ITE7Y29udGludWV9cmV0dXJuITF9aWYoIXRoaXMub3B0aW9ucy5mbGV4KWJyZWFrfXJldHVybiB0PyExIT09KGU9dGhpcy50ZXN0X21hdGNoKHQsbltvXSkpJiZlOiIiPT09dGhpcy5faW5wdXQ/dGhpcy5FT0Y6dGhpcy5wYXJzZUVycm9yKCJMZXhpY2FsIGVycm9yIG9uIGxpbmUgIisodGhpcy55eWxpbmVubysxKSsiLiBVbnJlY29nbml6ZWQgdGV4dC5cbiIrdGhpcy5zaG93UG9zaXRpb24oKSx7dGV4dDoiIix0b2tlbjpudWxsLGxpbmU6dGhpcy55eWxpbmVub30pfSxsZXg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5leHQoKTtyZXR1cm4gZXx8dGhpcy5sZXgoKX0sYmVnaW46ZnVuY3Rpb24oZSl7dGhpcy5jb25kaXRpb25TdGFjay5wdXNoKGUpfSxwb3BTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aC0xPjA/dGhpcy5jb25kaXRpb25TdGFjay5wb3AoKTp0aGlzLmNvbmRpdGlvblN0YWNrWzBdfSxfY3VycmVudFJ1bGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoJiZ0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoLTFdP3RoaXMuY29uZGl0aW9uc1t0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoLTFdXS5ydWxlczp0aGlzLmNvbmRpdGlvbnMuSU5JVElBTC5ydWxlc30sdG9wU3RhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuKGU9dGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGgtMS1NYXRoLmFicyhlfHwwKSk+PTA/dGhpcy5jb25kaXRpb25TdGFja1tlXToiSU5JVElBTCJ9LHB1c2hTdGF0ZTpmdW5jdGlvbihlKXt0aGlzLmJlZ2luKGUpfSxzdGF0ZVN0YWNrU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aH0sb3B0aW9uczp7fSxwZXJmb3JtQWN0aW9uOmZ1bmN0aW9uKGUsdCxyLG8pe3N3aXRjaChyKXtjYXNlIDA6YnJlYWs7Y2FzZSAxOnJldHVybiA2O2Nhc2UgMjpyZXR1cm4gdC55eXRleHQ9dC55eXRleHQuc3Vic3RyKDEsdC55eWxlbmctMiksNDtjYXNlIDM6cmV0dXJuIDE3O2Nhc2UgNDpyZXR1cm4gMTg7Y2FzZSA1OnJldHVybiAyMztjYXNlIDY6cmV0dXJuIDI0O2Nhc2UgNzpyZXR1cm4gMjI7Y2FzZSA4OnJldHVybiAyMTtjYXNlIDk6cmV0dXJuIDEwO2Nhc2UgMTA6cmV0dXJuIDExO2Nhc2UgMTE6cmV0dXJuIDg7Y2FzZSAxMjpyZXR1cm4gMTQ7Y2FzZSAxMzpyZXR1cm4iSU5WQUxJRCJ9fSxydWxlczpbL14oPzpccyspLywvXig/OigtPyhbMC05XXxbMS05XVswLTldKykpKFwuWzAtOV0rKT8oW2VFXVstK10/WzAtOV0rKT9cYikvLC9eKD86Iig/OlxcW1xcImJmbnJ0L118XFx1W2EtZkEtRjAtOV17NH18W15cXFwwLVx4MDlceDBhLVx4MWYiXSkqIikvLC9eKD86XHspLywvXig/Olx9KS8sL14oPzpcWykvLC9eKD86XF0pLywvXig/OiwpLywvXig/OjopLywvXig/OnRydWVcYikvLC9eKD86ZmFsc2VcYikvLC9eKD86bnVsbFxiKS8sL14oPzokKS8sL14oPzouKS9dLGNvbmRpdGlvbnM6e0lOSVRJQUw6e3J1bGVzOlswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzXSxpbmNsdXNpdmU6ITB9fX07ZnVuY3Rpb24gaCgpe3RoaXMueXk9e319cmV0dXJuIHAubGV4ZXI9ZCxoLnByb3RvdHlwZT1wLHAuUGFyc2VyPWgsbmV3IGh9KCk7dC5wYXJzZXI9cix0LlBhcnNlcj1yLlBhcnNlcix0LnBhcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIHIucGFyc2UuYXBwbHkocixhcmd1bWVudHMpfX0pKTtjb25zdCBwcj17U3R5bGVFeHByZXNzaW9uOm9yLGlzRXhwcmVzc2lvbjpucixpc0V4cHJlc3Npb25GaWx0ZXI6ZnVuY3Rpb24gZSh0KXtpZighMD09PXR8fCExPT09dClyZXR1cm4hMDtpZighQXJyYXkuaXNBcnJheSh0KXx8MD09PXQubGVuZ3RoKXJldHVybiExO3N3aXRjaCh0WzBdKXtjYXNlImhhcyI6cmV0dXJuIHQubGVuZ3RoPj0yJiYiJGlkIiE9PXRbMV0mJiIkdHlwZSIhPT10WzFdO2Nhc2UiaW4iOnJldHVybiB0Lmxlbmd0aD49MyYmKCJzdHJpbmciIT10eXBlb2YgdFsxXXx8QXJyYXkuaXNBcnJheSh0WzJdKSk7Y2FzZSIhaW4iOmNhc2UiIWhhcyI6Y2FzZSJub25lIjpyZXR1cm4hMTtjYXNlIj09IjpjYXNlIiE9IjpjYXNlIj4iOmNhc2UiPj0iOmNhc2UiPCI6Y2FzZSI8PSI6cmV0dXJuIDMhPT10Lmxlbmd0aHx8QXJyYXkuaXNBcnJheSh0WzFdKXx8QXJyYXkuaXNBcnJheSh0WzJdKTtjYXNlImFueSI6Y2FzZSJhbGwiOmZvcihjb25zdCByIG9mIHQuc2xpY2UoMSkpaWYoIWUocikmJiJib29sZWFuIiE9dHlwZW9mIHIpcmV0dXJuITE7cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMH19LGNyZWF0ZUV4cHJlc3Npb246aXIsY3JlYXRlUHJvcGVydHlFeHByZXNzaW9uOmxyLG5vcm1hbGl6ZVByb3BlcnR5RXhwcmVzc2lvbjpmdW5jdGlvbihlLHQpe2lmKFp0KGUpKXJldHVybiBuZXcgdXIoZSx0KTtpZihucihlKSl7Y29uc3Qgcj1scihlLHQpO2lmKCJlcnJvciI9PT1yLnJlc3VsdCl0aHJvdyBuZXcgRXJyb3Ioci52YWx1ZS5tYXAoKGU9PmAke2Uua2V5fTogJHtlLm1lc3NhZ2V9YCkpLmpvaW4oIiwgIikpO3JldHVybiByLnZhbHVlfXtsZXQgcj1lO3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmImNvbG9yIj09PXQudHlwZSYmKHI9JC5wYXJzZShlKSkse2tpbmQ6ImNvbnN0YW50IixldmFsdWF0ZTooKT0+cn19fSxab29tQ29uc3RhbnRFeHByZXNzaW9uOmFyLFpvb21EZXBlbmRlbnRFeHByZXNzaW9uOnNyLFN0eWxlUHJvcGVydHlGdW5jdGlvbjp1cn07dmFyIGRyPWEoKGZ1bmN0aW9uKGUsdCl7IWZ1bmN0aW9uKGUpe3ZhciB0PXskdmVyc2lvbjo4LCRyb290Ont2ZXJzaW9uOntyZXF1aXJlZDohMCx0eXBlOiJlbnVtIix2YWx1ZXM6WzhdLGRvYzoiU3R5bGUgc3BlY2lmaWNhdGlvbiB2ZXJzaW9uIG51bWJlci4gTXVzdCBiZSA4LiIsZXhhbXBsZTo4fSxuYW1lOnt0eXBlOiJzdHJpbmciLGRvYzoiQSBodW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgc3R5bGUuIixleGFtcGxlOiJCcmlnaHQifSxtZXRhZGF0YTp7dHlwZToiKiIsZG9jOiJBcmJpdHJhcnkgcHJvcGVydGllcyB1c2VmdWwgdG8gdHJhY2sgd2l0aCB0aGUgc3R5bGVzaGVldCwgYnV0IGRvIG5vdCBpbmZsdWVuY2UgcmVuZGVyaW5nLiBQcm9wZXJ0aWVzIHNob3VsZCBiZSBwcmVmaXhlZCB0byBhdm9pZCBjb2xsaXNpb25zLCBsaWtlICdtYXBib3g6Jy4ifSxjZW50ZXI6e3R5cGU6ImFycmF5Iix2YWx1ZToibnVtYmVyIixkb2M6IkRlZmF1bHQgbWFwIGNlbnRlciBpbiBsb25naXR1ZGUgYW5kIGxhdGl0dWRlLiAgVGhlIHN0eWxlIGNlbnRlciB3aWxsIGJlIHVzZWQgb25seSBpZiB0aGUgbWFwIGhhcyBub3QgYmVlbiBwb3NpdGlvbmVkIGJ5IG90aGVyIG1lYW5zIChlLmcuIG1hcCBvcHRpb25zIG9yIHVzZXIgaW50ZXJhY3Rpb24pLiIsZXhhbXBsZTpbLTczLjk3NDksNDAuNzczNl19LHpvb206e3R5cGU6Im51bWJlciIsZG9jOiJEZWZhdWx0IHpvb20gbGV2ZWwuICBUaGUgc3R5bGUgem9vbSB3aWxsIGJlIHVzZWQgb25seSBpZiB0aGUgbWFwIGhhcyBub3QgYmVlbiBwb3NpdGlvbmVkIGJ5IG90aGVyIG1lYW5zIChlLmcuIG1hcCBvcHRpb25zIG9yIHVzZXIgaW50ZXJhY3Rpb24pLiIsZXhhbXBsZToxMi41fSxiZWFyaW5nOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxwZXJpb2Q6MzYwLHVuaXRzOiJkZWdyZWVzIixkb2M6J0RlZmF1bHQgYmVhcmluZywgaW4gZGVncmVlcy4gVGhlIGJlYXJpbmcgaXMgdGhlIGNvbXBhc3MgZGlyZWN0aW9uIHRoYXQgaXMgInVwIjsgZm9yIGV4YW1wbGUsIGEgYmVhcmluZyBvZiA5MMKwIG9yaWVudHMgdGhlIG1hcCBzbyB0aGF0IGVhc3QgaXMgdXAuIFRoaXMgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgaWYgdGhlIG1hcCBoYXMgbm90IGJlZW4gcG9zaXRpb25lZCBieSBvdGhlciBtZWFucyAoZS5nLiBtYXAgb3B0aW9ucyBvciB1c2VyIGludGVyYWN0aW9uKS4nLGV4YW1wbGU6Mjl9LHBpdGNoOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCx1bml0czoiZGVncmVlcyIsZG9jOiJEZWZhdWx0IHBpdGNoLCBpbiBkZWdyZWVzLiBaZXJvIGlzIHBlcnBlbmRpY3VsYXIgdG8gdGhlIHN1cmZhY2UsIGZvciBhIGxvb2sgc3RyYWlnaHQgZG93biBhdCB0aGUgbWFwLCB3aGlsZSBhIGdyZWF0ZXIgdmFsdWUgbGlrZSA2MCBsb29rcyBhaGVhZCB0b3dhcmRzIHRoZSBob3Jpem9uLiBUaGUgc3R5bGUgcGl0Y2ggd2lsbCBiZSB1c2VkIG9ubHkgaWYgdGhlIG1hcCBoYXMgbm90IGJlZW4gcG9zaXRpb25lZCBieSBvdGhlciBtZWFucyAoZS5nLiBtYXAgb3B0aW9ucyBvciB1c2VyIGludGVyYWN0aW9uKS4iLGV4YW1wbGU6NTB9LGxpZ2h0Ont0eXBlOiJsaWdodCIsZG9jOiJUaGUgZ2xvYmFsIGxpZ2h0IHNvdXJjZS4iLGV4YW1wbGU6e2FuY2hvcjoidmlld3BvcnQiLGNvbG9yOiJ3aGl0ZSIsaW50ZW5zaXR5Oi40fX0sc291cmNlczp7cmVxdWlyZWQ6ITAsdHlwZToic291cmNlcyIsZG9jOiJEYXRhIHNvdXJjZSBzcGVjaWZpY2F0aW9ucy4iLGV4YW1wbGU6eyJtYXBib3gtc3RyZWV0cyI6e3R5cGU6InZlY3RvciIsdXJsOiJtYXBib3g6Ly9tYXBib3gubWFwYm94LXN0cmVldHMtdjYifX19LHNwcml0ZTp7dHlwZToic3RyaW5nIixkb2M6IkEgYmFzZSBVUkwgZm9yIHJldHJpZXZpbmcgdGhlIHNwcml0ZSBpbWFnZSBhbmQgbWV0YWRhdGEuIFRoZSBleHRlbnNpb25zIGAucG5nYCwgYC5qc29uYCBhbmQgc2NhbGUgZmFjdG9yIGBAMngucG5nYCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgYXBwZW5kZWQuIFRoaXMgcHJvcGVydHkgaXMgcmVxdWlyZWQgaWYgYW55IGxheWVyIHVzZXMgdGhlIGBiYWNrZ3JvdW5kLXBhdHRlcm5gLCBgZmlsbC1wYXR0ZXJuYCwgYGxpbmUtcGF0dGVybmAsIGBmaWxsLWV4dHJ1c2lvbi1wYXR0ZXJuYCwgb3IgYGljb24taW1hZ2VgIHByb3BlcnRpZXMuIFRoZSBVUkwgbXVzdCBiZSBhYnNvbHV0ZSwgY29udGFpbmluZyB0aGUgW3NjaGVtZSwgYXV0aG9yaXR5IGFuZCBwYXRoIGNvbXBvbmVudHNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VSTCNTeW50YXgpLiIsZXhhbXBsZToibWFwYm94Oi8vc3ByaXRlcy9tYXBib3gvYnJpZ2h0LXY4In0sZ2x5cGhzOnt0eXBlOiJzdHJpbmciLGRvYzoiQSBVUkwgdGVtcGxhdGUgZm9yIGxvYWRpbmcgc2lnbmVkLWRpc3RhbmNlLWZpZWxkIGdseXBoIHNldHMgaW4gUEJGIGZvcm1hdC4gVGhlIFVSTCBtdXN0IGluY2x1ZGUgYHtmb250c3RhY2t9YCBhbmQgYHtyYW5nZX1gIHRva2Vucy4gVGhpcyBwcm9wZXJ0eSBpcyByZXF1aXJlZCBpZiBhbnkgbGF5ZXIgdXNlcyB0aGUgYHRleHQtZmllbGRgIGxheW91dCBwcm9wZXJ0eS4gVGhlIFVSTCBtdXN0IGJlIGFic29sdXRlLCBjb250YWluaW5nIHRoZSBbc2NoZW1lLCBhdXRob3JpdHkgYW5kIHBhdGggY29tcG9uZW50c10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVJMI1N5bnRheCkuIixleGFtcGxlOiJtYXBib3g6Ly9mb250cy9tYXBib3gve2ZvbnRzdGFja30ve3JhbmdlfS5wYmYifSx0cmFuc2l0aW9uOnt0eXBlOiJ0cmFuc2l0aW9uIixkb2M6IkEgZ2xvYmFsIHRyYW5zaXRpb24gZGVmaW5pdGlvbiB0byB1c2UgYXMgYSBkZWZhdWx0IGFjcm9zcyBwcm9wZXJ0aWVzLCB0byBiZSB1c2VkIGZvciB0aW1pbmcgdHJhbnNpdGlvbnMgYmV0d2VlbiBvbmUgdmFsdWUgYW5kIHRoZSBuZXh0IHdoZW4gbm8gcHJvcGVydHktc3BlY2lmaWMgdHJhbnNpdGlvbiBpcyBzZXQuIENvbGxpc2lvbi1iYXNlZCBzeW1ib2wgZmFkaW5nIGlzIGNvbnRyb2xsZWQgaW5kZXBlbmRlbnRseSBvZiB0aGUgc3R5bGUncyBgdHJhbnNpdGlvbmAgcHJvcGVydHkuIixleGFtcGxlOntkdXJhdGlvbjozMDAsZGVsYXk6MH19LGxheWVyczp7cmVxdWlyZWQ6ITAsdHlwZToiYXJyYXkiLHZhbHVlOiJsYXllciIsZG9jOiJMYXllcnMgd2lsbCBiZSBkcmF3biBpbiB0aGUgb3JkZXIgb2YgdGhpcyBhcnJheS4iLGV4YW1wbGU6W3tpZDoid2F0ZXIiLHNvdXJjZToibWFwYm94LXN0cmVldHMiLCJzb3VyY2UtbGF5ZXIiOiJ3YXRlciIsdHlwZToiZmlsbCIscGFpbnQ6eyJmaWxsLWNvbG9yIjoiIzAwZmZmZiJ9fV19fSxzb3VyY2VzOnsiKiI6e3R5cGU6InNvdXJjZSIsZG9jOiJTcGVjaWZpY2F0aW9uIG9mIGEgZGF0YSBzb3VyY2UuIEZvciB2ZWN0b3IgYW5kIHJhc3RlciBzb3VyY2VzLCBlaXRoZXIgVGlsZUpTT04gb3IgYSBVUkwgdG8gYSBUaWxlSlNPTiBtdXN0IGJlIHByb3ZpZGVkLiBGb3IgaW1hZ2UgYW5kIHZpZGVvIHNvdXJjZXMsIGEgVVJMIG11c3QgYmUgcHJvdmlkZWQuIEZvciBHZW9KU09OIHNvdXJjZXMsIGEgVVJMIG9yIGlubGluZSBHZW9KU09OIG11c3QgYmUgcHJvdmlkZWQuIn19LHNvdXJjZTpbInNvdXJjZV92ZWN0b3IiLCJzb3VyY2VfcmFzdGVyIiwic291cmNlX3Jhc3Rlcl9kZW0iLCJzb3VyY2VfZ2VvanNvbiIsInNvdXJjZV92aWRlbyIsInNvdXJjZV9pbWFnZSJdLHNvdXJjZV92ZWN0b3I6e3R5cGU6e3JlcXVpcmVkOiEwLHR5cGU6ImVudW0iLHZhbHVlczp7dmVjdG9yOntkb2M6IkEgdmVjdG9yIHRpbGUgc291cmNlLiJ9fSxkb2M6IlRoZSB0eXBlIG9mIHRoZSBzb3VyY2UuIn0sdXJsOnt0eXBlOiJzdHJpbmciLGRvYzoiQSBVUkwgdG8gYSBUaWxlSlNPTiByZXNvdXJjZS4gU3VwcG9ydGVkIHByb3RvY29scyBhcmUgYGh0dHA6YCwgYGh0dHBzOmAsIGFuZCBgbWFwYm94Oi8vPFRpbGVzZXQgSUQ+YC4ifSx0aWxlczp7dHlwZToiYXJyYXkiLHZhbHVlOiJzdHJpbmciLGRvYzoiQW4gYXJyYXkgb2Ygb25lIG9yIG1vcmUgdGlsZSBzb3VyY2UgVVJMcywgYXMgaW4gdGhlIFRpbGVKU09OIHNwZWMuIn0sYm91bmRzOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjQsZGVmYXVsdDpbLTE4MCwtODUuMDUxMTI5LDE4MCw4NS4wNTExMjldLGRvYzoiQW4gYXJyYXkgY29udGFpbmluZyB0aGUgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSBvZiB0aGUgc291dGh3ZXN0IGFuZCBub3J0aGVhc3QgY29ybmVycyBvZiB0aGUgc291cmNlJ3MgYm91bmRpbmcgYm94IGluIHRoZSBmb2xsb3dpbmcgb3JkZXI6IGBbc3cubG5nLCBzdy5sYXQsIG5lLmxuZywgbmUubGF0XWAuIFdoZW4gdGhpcyBwcm9wZXJ0eSBpcyBpbmNsdWRlZCBpbiBhIHNvdXJjZSwgbm8gdGlsZXMgb3V0c2lkZSBvZiB0aGUgZ2l2ZW4gYm91bmRzIGFyZSByZXF1ZXN0ZWQgYnkgTWFwYm94IEdMLiJ9LHNjaGVtZTp7dHlwZToiZW51bSIsdmFsdWVzOnt4eXo6e2RvYzoiU2xpcHB5IG1hcCB0aWxlbmFtZXMgc2NoZW1lLiJ9LHRtczp7ZG9jOiJPU0dlbyBzcGVjIHNjaGVtZS4ifX0sZGVmYXVsdDoieHl6Iixkb2M6IkluZmx1ZW5jZXMgdGhlIHkgZGlyZWN0aW9uIG9mIHRoZSB0aWxlIGNvb3JkaW5hdGVzLiBUaGUgZ2xvYmFsLW1lcmNhdG9yIChha2EgU3BoZXJpY2FsIE1lcmNhdG9yKSBwcm9maWxlIGlzIGFzc3VtZWQuIn0sbWluem9vbTp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsZG9jOiJNaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHdoaWNoIHRpbGVzIGFyZSBhdmFpbGFibGUsIGFzIGluIHRoZSBUaWxlSlNPTiBzcGVjLiJ9LG1heHpvb206e3R5cGU6Im51bWJlciIsZGVmYXVsdDoyMixkb2M6Ik1heGltdW0gem9vbSBsZXZlbCBmb3Igd2hpY2ggdGlsZXMgYXJlIGF2YWlsYWJsZSwgYXMgaW4gdGhlIFRpbGVKU09OIHNwZWMuIERhdGEgZnJvbSB0aWxlcyBhdCB0aGUgbWF4em9vbSBhcmUgdXNlZCB3aGVuIGRpc3BsYXlpbmcgdGhlIG1hcCBhdCBoaWdoZXIgem9vbSBsZXZlbHMuIn0sYXR0cmlidXRpb246e3R5cGU6InN0cmluZyIsZG9jOiJDb250YWlucyBhbiBhdHRyaWJ1dGlvbiB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgbWFwIGlzIHNob3duIHRvIGEgdXNlci4ifSxwcm9tb3RlSWQ6e3R5cGU6InByb21vdGVJZCIsZG9jOiJBIHByb3BlcnR5IHRvIHVzZSBhcyBhIGZlYXR1cmUgaWQgKGZvciBmZWF0dXJlIHN0YXRlKS4gRWl0aGVyIGEgcHJvcGVydHkgbmFtZSwgb3IgYW4gb2JqZWN0IG9mIHRoZSBmb3JtIGB7PHNvdXJjZUxheWVyPjogPHByb3BlcnR5TmFtZT59YC4gSWYgc3BlY2lmaWVkIGFzIGEgc3RyaW5nIGZvciBhIHZlY3RvciB0aWxlIHNvdXJjZSwgdGhlIHNhbWUgcHJvcGVydHkgaXMgdXNlZCBhY3Jvc3MgYWxsIGl0cyBzb3VyY2UgbGF5ZXJzLiJ9LHZvbGF0aWxlOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiExLGRvYzoiQSBzZXR0aW5nIHRvIGRldGVybWluZSB3aGV0aGVyIGEgc291cmNlJ3MgdGlsZXMgYXJlIGNhY2hlZCBsb2NhbGx5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOnthbmRyb2lkOiI5LjMuMCIsaW9zOiI1LjEwLjAifX19LCIqIjp7dHlwZToiKiIsZG9jOiJPdGhlciBrZXlzIHRvIGNvbmZpZ3VyZSB0aGUgZGF0YSBzb3VyY2UuIn19LHNvdXJjZV9yYXN0ZXI6e3R5cGU6e3JlcXVpcmVkOiEwLHR5cGU6ImVudW0iLHZhbHVlczp7cmFzdGVyOntkb2M6IkEgcmFzdGVyIHRpbGUgc291cmNlLiJ9fSxkb2M6IlRoZSB0eXBlIG9mIHRoZSBzb3VyY2UuIn0sdXJsOnt0eXBlOiJzdHJpbmciLGRvYzoiQSBVUkwgdG8gYSBUaWxlSlNPTiByZXNvdXJjZS4gU3VwcG9ydGVkIHByb3RvY29scyBhcmUgYGh0dHA6YCwgYGh0dHBzOmAsIGFuZCBgbWFwYm94Oi8vPFRpbGVzZXQgSUQ+YC4ifSx0aWxlczp7dHlwZToiYXJyYXkiLHZhbHVlOiJzdHJpbmciLGRvYzoiQW4gYXJyYXkgb2Ygb25lIG9yIG1vcmUgdGlsZSBzb3VyY2UgVVJMcywgYXMgaW4gdGhlIFRpbGVKU09OIHNwZWMuIn0sYm91bmRzOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjQsZGVmYXVsdDpbLTE4MCwtODUuMDUxMTI5LDE4MCw4NS4wNTExMjldLGRvYzoiQW4gYXJyYXkgY29udGFpbmluZyB0aGUgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSBvZiB0aGUgc291dGh3ZXN0IGFuZCBub3J0aGVhc3QgY29ybmVycyBvZiB0aGUgc291cmNlJ3MgYm91bmRpbmcgYm94IGluIHRoZSBmb2xsb3dpbmcgb3JkZXI6IGBbc3cubG5nLCBzdy5sYXQsIG5lLmxuZywgbmUubGF0XWAuIFdoZW4gdGhpcyBwcm9wZXJ0eSBpcyBpbmNsdWRlZCBpbiBhIHNvdXJjZSwgbm8gdGlsZXMgb3V0c2lkZSBvZiB0aGUgZ2l2ZW4gYm91bmRzIGFyZSByZXF1ZXN0ZWQgYnkgTWFwYm94IEdMLiJ9LG1pbnpvb206e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLGRvYzoiTWluaW11bSB6b29tIGxldmVsIGZvciB3aGljaCB0aWxlcyBhcmUgYXZhaWxhYmxlLCBhcyBpbiB0aGUgVGlsZUpTT04gc3BlYy4ifSxtYXh6b29tOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MjIsZG9jOiJNYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHdoaWNoIHRpbGVzIGFyZSBhdmFpbGFibGUsIGFzIGluIHRoZSBUaWxlSlNPTiBzcGVjLiBEYXRhIGZyb20gdGlsZXMgYXQgdGhlIG1heHpvb20gYXJlIHVzZWQgd2hlbiBkaXNwbGF5aW5nIHRoZSBtYXAgYXQgaGlnaGVyIHpvb20gbGV2ZWxzLiJ9LHRpbGVTaXplOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6NTEyLHVuaXRzOiJwaXhlbHMiLGRvYzoiVGhlIG1pbmltdW0gdmlzdWFsIHNpemUgdG8gZGlzcGxheSB0aWxlcyBmb3IgdGhpcyBsYXllci4gT25seSBjb25maWd1cmFibGUgZm9yIHJhc3RlciBsYXllcnMuIn0sc2NoZW1lOnt0eXBlOiJlbnVtIix2YWx1ZXM6e3h5ejp7ZG9jOiJTbGlwcHkgbWFwIHRpbGVuYW1lcyBzY2hlbWUuIn0sdG1zOntkb2M6Ik9TR2VvIHNwZWMgc2NoZW1lLiJ9fSxkZWZhdWx0OiJ4eXoiLGRvYzoiSW5mbHVlbmNlcyB0aGUgeSBkaXJlY3Rpb24gb2YgdGhlIHRpbGUgY29vcmRpbmF0ZXMuIFRoZSBnbG9iYWwtbWVyY2F0b3IgKGFrYSBTcGhlcmljYWwgTWVyY2F0b3IpIHByb2ZpbGUgaXMgYXNzdW1lZC4ifSxhdHRyaWJ1dGlvbjp7dHlwZToic3RyaW5nIixkb2M6IkNvbnRhaW5zIGFuIGF0dHJpYnV0aW9uIHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSBtYXAgaXMgc2hvd24gdG8gYSB1c2VyLiJ9LHZvbGF0aWxlOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiExLGRvYzoiQSBzZXR0aW5nIHRvIGRldGVybWluZSB3aGV0aGVyIGEgc291cmNlJ3MgdGlsZXMgYXJlIGNhY2hlZCBsb2NhbGx5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOnthbmRyb2lkOiI5LjMuMCIsaW9zOiI1LjEwLjAifX19LCIqIjp7dHlwZToiKiIsZG9jOiJPdGhlciBrZXlzIHRvIGNvbmZpZ3VyZSB0aGUgZGF0YSBzb3VyY2UuIn19LHNvdXJjZV9yYXN0ZXJfZGVtOnt0eXBlOntyZXF1aXJlZDohMCx0eXBlOiJlbnVtIix2YWx1ZXM6eyJyYXN0ZXItZGVtIjp7ZG9jOiJBIFJHQi1lbmNvZGVkIHJhc3RlciBERU0gc291cmNlIn19LGRvYzoiVGhlIHR5cGUgb2YgdGhlIHNvdXJjZS4ifSx1cmw6e3R5cGU6InN0cmluZyIsZG9jOiJBIFVSTCB0byBhIFRpbGVKU09OIHJlc291cmNlLiBTdXBwb3J0ZWQgcHJvdG9jb2xzIGFyZSBgaHR0cDpgLCBgaHR0cHM6YCwgYW5kIGBtYXBib3g6Ly88VGlsZXNldCBJRD5gLiJ9LHRpbGVzOnt0eXBlOiJhcnJheSIsdmFsdWU6InN0cmluZyIsZG9jOiJBbiBhcnJheSBvZiBvbmUgb3IgbW9yZSB0aWxlIHNvdXJjZSBVUkxzLCBhcyBpbiB0aGUgVGlsZUpTT04gc3BlYy4ifSxib3VuZHM6e3R5cGU6ImFycmF5Iix2YWx1ZToibnVtYmVyIixsZW5ndGg6NCxkZWZhdWx0OlstMTgwLC04NS4wNTExMjksMTgwLDg1LjA1MTEyOV0sZG9jOiJBbiBhcnJheSBjb250YWluaW5nIHRoZSBsb25naXR1ZGUgYW5kIGxhdGl0dWRlIG9mIHRoZSBzb3V0aHdlc3QgYW5kIG5vcnRoZWFzdCBjb3JuZXJzIG9mIHRoZSBzb3VyY2UncyBib3VuZGluZyBib3ggaW4gdGhlIGZvbGxvd2luZyBvcmRlcjogYFtzdy5sbmcsIHN3LmxhdCwgbmUubG5nLCBuZS5sYXRdYC4gV2hlbiB0aGlzIHByb3BlcnR5IGlzIGluY2x1ZGVkIGluIGEgc291cmNlLCBubyB0aWxlcyBvdXRzaWRlIG9mIHRoZSBnaXZlbiBib3VuZHMgYXJlIHJlcXVlc3RlZCBieSBNYXBib3ggR0wuIn0sbWluem9vbTp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsZG9jOiJNaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHdoaWNoIHRpbGVzIGFyZSBhdmFpbGFibGUsIGFzIGluIHRoZSBUaWxlSlNPTiBzcGVjLiJ9LG1heHpvb206e3R5cGU6Im51bWJlciIsZGVmYXVsdDoyMixkb2M6Ik1heGltdW0gem9vbSBsZXZlbCBmb3Igd2hpY2ggdGlsZXMgYXJlIGF2YWlsYWJsZSwgYXMgaW4gdGhlIFRpbGVKU09OIHNwZWMuIERhdGEgZnJvbSB0aWxlcyBhdCB0aGUgbWF4em9vbSBhcmUgdXNlZCB3aGVuIGRpc3BsYXlpbmcgdGhlIG1hcCBhdCBoaWdoZXIgem9vbSBsZXZlbHMuIn0sdGlsZVNpemU6e3R5cGU6Im51bWJlciIsZGVmYXVsdDo1MTIsdW5pdHM6InBpeGVscyIsZG9jOiJUaGUgbWluaW11bSB2aXN1YWwgc2l6ZSB0byBkaXNwbGF5IHRpbGVzIGZvciB0aGlzIGxheWVyLiBPbmx5IGNvbmZpZ3VyYWJsZSBmb3IgcmFzdGVyIGxheWVycy4ifSxhdHRyaWJ1dGlvbjp7dHlwZToic3RyaW5nIixkb2M6IkNvbnRhaW5zIGFuIGF0dHJpYnV0aW9uIHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSBtYXAgaXMgc2hvd24gdG8gYSB1c2VyLiJ9LGVuY29kaW5nOnt0eXBlOiJlbnVtIix2YWx1ZXM6e3RlcnJhcml1bTp7ZG9jOiJUZXJyYXJpdW0gZm9ybWF0IFBORyB0aWxlcy4gU2VlIGh0dHBzOi8vYXdzLmFtYXpvbi5jb20vZXMvcHVibGljLWRhdGFzZXRzL3RlcnJhaW4vIGZvciBtb3JlIGluZm8uIn0sbWFwYm94Ontkb2M6Ik1hcGJveCBUZXJyYWluIFJHQiB0aWxlcy4gU2VlIGh0dHBzOi8vd3d3Lm1hcGJveC5jb20vaGVscC9hY2Nlc3MtZWxldmF0aW9uLWRhdGEvI21hcGJveC10ZXJyYWluLXJnYiBmb3IgbW9yZSBpbmZvLiJ9fSxkZWZhdWx0OiJtYXBib3giLGRvYzoiVGhlIGVuY29kaW5nIHVzZWQgYnkgdGhpcyBzb3VyY2UuIE1hcGJveCBUZXJyYWluIFJHQiBpcyB1c2VkIGJ5IGRlZmF1bHQifSx2b2xhdGlsZTp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IkEgc2V0dGluZyB0byBkZXRlcm1pbmUgd2hldGhlciBhIHNvdXJjZSdzIHRpbGVzIGFyZSBjYWNoZWQgbG9jYWxseS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7YW5kcm9pZDoiOS4zLjAiLGlvczoiNS4xMC4wIn19fSwiKiI6e3R5cGU6IioiLGRvYzoiT3RoZXIga2V5cyB0byBjb25maWd1cmUgdGhlIGRhdGEgc291cmNlLiJ9fSxzb3VyY2VfZ2VvanNvbjp7dHlwZTp7cmVxdWlyZWQ6ITAsdHlwZToiZW51bSIsdmFsdWVzOntnZW9qc29uOntkb2M6IkEgR2VvSlNPTiBkYXRhIHNvdXJjZS4ifX0sZG9jOiJUaGUgZGF0YSB0eXBlIG9mIHRoZSBHZW9KU09OIHNvdXJjZS4ifSxkYXRhOnt0eXBlOiIqIixkb2M6IkEgVVJMIHRvIGEgR2VvSlNPTiBmaWxlLCBvciBpbmxpbmUgR2VvSlNPTi4ifSxtYXh6b29tOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MTgsZG9jOiJNYXhpbXVtIHpvb20gbGV2ZWwgYXQgd2hpY2ggdG8gY3JlYXRlIHZlY3RvciB0aWxlcyAoaGlnaGVyIG1lYW5zIGdyZWF0ZXIgZGV0YWlsIGF0IGhpZ2ggem9vbSBsZXZlbHMpLiJ9LGF0dHJpYnV0aW9uOnt0eXBlOiJzdHJpbmciLGRvYzoiQ29udGFpbnMgYW4gYXR0cmlidXRpb24gdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlIG1hcCBpcyBzaG93biB0byBhIHVzZXIuIn0sYnVmZmVyOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MTI4LG1heGltdW06NTEyLG1pbmltdW06MCxkb2M6IlNpemUgb2YgdGhlIHRpbGUgYnVmZmVyIG9uIGVhY2ggc2lkZS4gQSB2YWx1ZSBvZiAwIHByb2R1Y2VzIG5vIGJ1ZmZlci4gQSB2YWx1ZSBvZiA1MTIgcHJvZHVjZXMgYSBidWZmZXIgYXMgd2lkZSBhcyB0aGUgdGlsZSBpdHNlbGYuIExhcmdlciB2YWx1ZXMgcHJvZHVjZSBmZXdlciByZW5kZXJpbmcgYXJ0aWZhY3RzIG5lYXIgdGlsZSBlZGdlcyBhbmQgc2xvd2VyIHBlcmZvcm1hbmNlLiJ9LGZpbHRlcjp7dHlwZToiKiIsZG9jOiJBbiBleHByZXNzaW9uIGZvciBmaWx0ZXJpbmcgZmVhdHVyZXMgcHJpb3IgdG8gcHJvY2Vzc2luZyB0aGVtIGZvciByZW5kZXJpbmcuIn0sdG9sZXJhbmNlOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6LjM3NSxkb2M6IkRvdWdsYXMtUGV1Y2tlciBzaW1wbGlmaWNhdGlvbiB0b2xlcmFuY2UgKGhpZ2hlciBtZWFucyBzaW1wbGVyIGdlb21ldHJpZXMgYW5kIGZhc3RlciBwZXJmb3JtYW5jZSkuIn0sY2x1c3Rlcjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IklmIHRoZSBkYXRhIGlzIGEgY29sbGVjdGlvbiBvZiBwb2ludCBmZWF0dXJlcywgc2V0dGluZyB0aGlzIHRvIHRydWUgY2x1c3RlcnMgdGhlIHBvaW50cyBieSByYWRpdXMgaW50byBncm91cHMuIENsdXN0ZXIgZ3JvdXBzIGJlY29tZSBuZXcgYFBvaW50YCBmZWF0dXJlcyBpbiB0aGUgc291cmNlIHdpdGggYWRkaXRpb25hbCBwcm9wZXJ0aWVzOlxuICogYGNsdXN0ZXJgIElzIGB0cnVlYCBpZiB0aGUgcG9pbnQgaXMgYSBjbHVzdGVyIFxuICogYGNsdXN0ZXJfaWRgIEEgdW5xaXVlIGlkIGZvciB0aGUgY2x1c3RlciB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIFtjbHVzdGVyIGluc3BlY3Rpb24gbWV0aG9kc10oaHR0cHM6Ly93d3cubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvYXBpLyNnZW9qc29uc291cmNlI2dldGNsdXN0ZXJleHBhbnNpb256b29tKVxuICogYHBvaW50X2NvdW50YCBOdW1iZXIgb2Ygb3JpZ2luYWwgcG9pbnRzIGdyb3VwZWQgaW50byB0aGlzIGNsdXN0ZXJcbiAqIGBwb2ludF9jb3VudF9hYmJyZXZpYXRlZGAgQW4gYWJicmV2aWF0ZWQgcG9pbnQgY291bnQifSxjbHVzdGVyUmFkaXVzOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6NTAsbWluaW11bTowLGRvYzoiUmFkaXVzIG9mIGVhY2ggY2x1c3RlciBpZiBjbHVzdGVyaW5nIGlzIGVuYWJsZWQuIEEgdmFsdWUgb2YgNTEyIGluZGljYXRlcyBhIHJhZGl1cyBlcXVhbCB0byB0aGUgd2lkdGggb2YgYSB0aWxlLiJ9LGNsdXN0ZXJNYXhab29tOnt0eXBlOiJudW1iZXIiLGRvYzoiTWF4IHpvb20gb24gd2hpY2ggdG8gY2x1c3RlciBwb2ludHMgaWYgY2x1c3RlcmluZyBpcyBlbmFibGVkLiBEZWZhdWx0cyB0byBvbmUgem9vbSBsZXNzIHRoYW4gbWF4em9vbSAoc28gdGhhdCBsYXN0IHpvb20gZmVhdHVyZXMgYXJlIG5vdCBjbHVzdGVyZWQpLiBDbHVzdGVycyBhcmUgcmUtZXZhbHVhdGVkIGF0IGludGVnZXIgem9vbSBsZXZlbHMgc28gc2V0dGluZyBjbHVzdGVyTWF4Wm9vbSB0byAxNCBtZWFucyB0aGUgY2x1c3RlcnMgd2lsbCBiZSBkaXNwbGF5ZWQgdW50aWwgejE1LiJ9LGNsdXN0ZXJNaW5Qb2ludHM6e3R5cGU6Im51bWJlciIsZG9jOiJNaW5pbXVtIG51bWJlciBvZiBwb2ludHMgbmVjZXNzYXJ5IHRvIGZvcm0gYSBjbHVzdGVyIGlmIGNsdXN0ZXJpbmcgaXMgZW5hYmxlZC4gRGVmYXVsdHMgdG8gYDJgLiJ9LGNsdXN0ZXJQcm9wZXJ0aWVzOnt0eXBlOiIqIixkb2M6J0FuIG9iamVjdCBkZWZpbmluZyBjdXN0b20gcHJvcGVydGllcyBvbiB0aGUgZ2VuZXJhdGVkIGNsdXN0ZXJzIGlmIGNsdXN0ZXJpbmcgaXMgZW5hYmxlZCwgYWdncmVnYXRpbmcgdmFsdWVzIGZyb20gY2x1c3RlcmVkIHBvaW50cy4gSGFzIHRoZSBmb3JtIGB7InByb3BlcnR5X25hbWUiOiBbb3BlcmF0b3IsIG1hcF9leHByZXNzaW9uXX1gLiBgb3BlcmF0b3JgIGlzIGFueSBleHByZXNzaW9uIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBhdCBsZWFzdCAyIG9wZXJhbmRzIChlLmcuIGAiKyJgIG9yIGAibWF4ImApIOKAlCBpdCBhY2N1bXVsYXRlcyB0aGUgcHJvcGVydHkgdmFsdWUgZnJvbSBjbHVzdGVycy9wb2ludHMgdGhlIGNsdXN0ZXIgY29udGFpbnM7IGBtYXBfZXhwcmVzc2lvbmAgcHJvZHVjZXMgdGhlIHZhbHVlIG9mIGEgc2luZ2xlIHBvaW50LlxuXG5FeGFtcGxlOiBgeyJzdW0iOiBbIisiLCBbImdldCIsICJzY2FsZXJhbmsiXV19YC5cblxuRm9yIG1vcmUgYWR2YW5jZWQgdXNlIGNhc2VzLCBpbiBwbGFjZSBvZiBgb3BlcmF0b3JgLCB5b3UgY2FuIHVzZSBhIGN1c3RvbSByZWR1Y2UgZXhwcmVzc2lvbiB0aGF0IHJlZmVyZW5jZXMgYSBzcGVjaWFsIGBbImFjY3VtdWxhdGVkIl1gIHZhbHVlLCBlLmcuOlxuYHsic3VtIjogW1siKyIsIFsiYWNjdW11bGF0ZWQiXSwgWyJnZXQiLCAic3VtIl1dLCBbImdldCIsICJzY2FsZXJhbmsiXV19YCd9LGxpbmVNZXRyaWNzOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiExLGRvYzoiV2hldGhlciB0byBjYWxjdWxhdGUgbGluZSBkaXN0YW5jZSBtZXRyaWNzLiBUaGlzIGlzIHJlcXVpcmVkIGZvciBsaW5lIGxheWVycyB0aGF0IHNwZWNpZnkgYGxpbmUtZ3JhZGllbnRgIHZhbHVlcy4ifSxnZW5lcmF0ZUlkOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiExLGRvYzoiV2hldGhlciB0byBnZW5lcmF0ZSBpZHMgZm9yIHRoZSBnZW9qc29uIGZlYXR1cmVzLiBXaGVuIGVuYWJsZWQsIHRoZSBgZmVhdHVyZS5pZGAgcHJvcGVydHkgd2lsbCBiZSBhdXRvIGFzc2lnbmVkIGJhc2VkIG9uIGl0cyBpbmRleCBpbiB0aGUgYGZlYXR1cmVzYCBhcnJheSwgb3Zlci13cml0aW5nIGFueSBwcmV2aW91cyB2YWx1ZXMuIn0scHJvbW90ZUlkOnt0eXBlOiJwcm9tb3RlSWQiLGRvYzoiQSBwcm9wZXJ0eSB0byB1c2UgYXMgYSBmZWF0dXJlIGlkIChmb3IgZmVhdHVyZSBzdGF0ZSkuIEVpdGhlciBhIHByb3BlcnR5IG5hbWUsIG9yIGFuIG9iamVjdCBvZiB0aGUgZm9ybSBgezxzb3VyY2VMYXllcj46IDxwcm9wZXJ0eU5hbWU+fWAuIn19LHNvdXJjZV92aWRlbzp7dHlwZTp7cmVxdWlyZWQ6ITAsdHlwZToiZW51bSIsdmFsdWVzOnt2aWRlbzp7ZG9jOiJBIHZpZGVvIGRhdGEgc291cmNlLiJ9fSxkb2M6IlRoZSBkYXRhIHR5cGUgb2YgdGhlIHZpZGVvIHNvdXJjZS4ifSx1cmxzOntyZXF1aXJlZDohMCx0eXBlOiJhcnJheSIsdmFsdWU6InN0cmluZyIsZG9jOiJVUkxzIHRvIHZpZGVvIGNvbnRlbnQgaW4gb3JkZXIgb2YgcHJlZmVycmVkIGZvcm1hdC4ifSxjb29yZGluYXRlczp7cmVxdWlyZWQ6ITAsZG9jOiJDb3JuZXJzIG9mIHZpZGVvIHNwZWNpZmllZCBpbiBsb25naXR1ZGUsIGxhdGl0dWRlIHBhaXJzLiIsdHlwZToiYXJyYXkiLGxlbmd0aDo0LHZhbHVlOnt0eXBlOiJhcnJheSIsbGVuZ3RoOjIsdmFsdWU6Im51bWJlciIsZG9jOiJBIHNpbmdsZSBsb25naXR1ZGUsIGxhdGl0dWRlIHBhaXIuIn19fSxzb3VyY2VfaW1hZ2U6e3R5cGU6e3JlcXVpcmVkOiEwLHR5cGU6ImVudW0iLHZhbHVlczp7aW1hZ2U6e2RvYzoiQW4gaW1hZ2UgZGF0YSBzb3VyY2UuIn19LGRvYzoiVGhlIGRhdGEgdHlwZSBvZiB0aGUgaW1hZ2Ugc291cmNlLiJ9LHVybDp7cmVxdWlyZWQ6ITAsdHlwZToic3RyaW5nIixkb2M6IlVSTCB0aGF0IHBvaW50cyB0byBhbiBpbWFnZS4ifSxjb29yZGluYXRlczp7cmVxdWlyZWQ6ITAsZG9jOiJDb3JuZXJzIG9mIGltYWdlIHNwZWNpZmllZCBpbiBsb25naXR1ZGUsIGxhdGl0dWRlIHBhaXJzLiIsdHlwZToiYXJyYXkiLGxlbmd0aDo0LHZhbHVlOnt0eXBlOiJhcnJheSIsbGVuZ3RoOjIsdmFsdWU6Im51bWJlciIsZG9jOiJBIHNpbmdsZSBsb25naXR1ZGUsIGxhdGl0dWRlIHBhaXIuIn19fSxsYXllcjp7aWQ6e3R5cGU6InN0cmluZyIsZG9jOiJVbmlxdWUgbGF5ZXIgbmFtZS4iLHJlcXVpcmVkOiEwfSx0eXBlOnt0eXBlOiJlbnVtIix2YWx1ZXM6e2ZpbGw6e2RvYzoiQSBmaWxsZWQgcG9seWdvbiB3aXRoIGFuIG9wdGlvbmFsIHN0cm9rZWQgYm9yZGVyLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19fSxsaW5lOntkb2M6IkEgc3Ryb2tlZCBsaW5lLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19fSxzeW1ib2w6e2RvYzoiQW4gaWNvbiBvciBhIHRleHQgbGFiZWwuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX19LGNpcmNsZTp7ZG9jOiJBIGZpbGxlZCBjaXJjbGUuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX19LGhlYXRtYXA6e2RvYzoiQSBoZWF0bWFwLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiZmlsbC1leHRydXNpb24iOntkb2M6IkFuIGV4dHJ1ZGVkICgzRCkgcG9seWdvbi4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjcuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fX0scmFzdGVyOntkb2M6IlJhc3RlciBtYXAgdGV4dHVyZXMgc3VjaCBhcyBzYXRlbGxpdGUgaW1hZ2VyeS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fX0saGlsbHNoYWRlOntkb2M6IkNsaWVudC1zaWRlIGhpbGxzaGFkaW5nIHZpc3VhbGl6YXRpb24gYmFzZWQgb24gREVNIGRhdGEuIEN1cnJlbnRseSwgdGhlIGltcGxlbWVudGF0aW9uIG9ubHkgc3VwcG9ydHMgTWFwYm94IFRlcnJhaW4gUkdCIGFuZCBNYXB6ZW4gVGVycmFyaXVtIHRpbGVzLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40My4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxiYWNrZ3JvdW5kOntkb2M6IlRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9yIHBhdHRlcm4gb2YgdGhlIG1hcC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fX19LGRvYzoiUmVuZGVyaW5nIHR5cGUgb2YgdGhpcyBsYXllci4iLHJlcXVpcmVkOiEwfSxtZXRhZGF0YTp7dHlwZToiKiIsZG9jOiJBcmJpdHJhcnkgcHJvcGVydGllcyB1c2VmdWwgdG8gdHJhY2sgd2l0aCB0aGUgbGF5ZXIsIGJ1dCBkbyBub3QgaW5mbHVlbmNlIHJlbmRlcmluZy4gUHJvcGVydGllcyBzaG91bGQgYmUgcHJlZml4ZWQgdG8gYXZvaWQgY29sbGlzaW9ucywgbGlrZSAnbWFwYm94OicuIn0sc291cmNlOnt0eXBlOiJzdHJpbmciLGRvYzoiTmFtZSBvZiBhIHNvdXJjZSBkZXNjcmlwdGlvbiB0byBiZSB1c2VkIGZvciB0aGlzIGxheWVyLiBSZXF1aXJlZCBmb3IgYWxsIGxheWVyIHR5cGVzIGV4Y2VwdCBgYmFja2dyb3VuZGAuIn0sInNvdXJjZS1sYXllciI6e3R5cGU6InN0cmluZyIsZG9jOiJMYXllciB0byB1c2UgZnJvbSBhIHZlY3RvciB0aWxlIHNvdXJjZS4gUmVxdWlyZWQgZm9yIHZlY3RvciB0aWxlIHNvdXJjZXM7IHByb2hpYml0ZWQgZm9yIGFsbCBvdGhlciBzb3VyY2UgdHlwZXMsIGluY2x1ZGluZyBHZW9KU09OIHNvdXJjZXMuIn0sbWluem9vbTp7dHlwZToibnVtYmVyIixtaW5pbXVtOjAsbWF4aW11bToyNCxkb2M6IlRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBsYXllci4gQXQgem9vbSBsZXZlbHMgbGVzcyB0aGFuIHRoZSBtaW56b29tLCB0aGUgbGF5ZXIgd2lsbCBiZSBoaWRkZW4uIn0sbWF4em9vbTp7dHlwZToibnVtYmVyIixtaW5pbXVtOjAsbWF4aW11bToyNCxkb2M6IlRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBsYXllci4gQXQgem9vbSBsZXZlbHMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIHRoZSBtYXh6b29tLCB0aGUgbGF5ZXIgd2lsbCBiZSBoaWRkZW4uIn0sZmlsdGVyOnt0eXBlOiJmaWx0ZXIiLGRvYzoiQSBleHByZXNzaW9uIHNwZWNpZnlpbmcgY29uZGl0aW9ucyBvbiBzb3VyY2UgZmVhdHVyZXMuIE9ubHkgZmVhdHVyZXMgdGhhdCBtYXRjaCB0aGUgZmlsdGVyIGFyZSBkaXNwbGF5ZWQuIFpvb20gZXhwcmVzc2lvbnMgaW4gZmlsdGVycyBhcmUgb25seSBldmFsdWF0ZWQgYXQgaW50ZWdlciB6b29tIGxldmVscy4gVGhlIGBmZWF0dXJlLXN0YXRlYCBleHByZXNzaW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gZmlsdGVyIGV4cHJlc3Npb25zLiJ9LGxheW91dDp7dHlwZToibGF5b3V0Iixkb2M6IkxheW91dCBwcm9wZXJ0aWVzIGZvciB0aGUgbGF5ZXIuIn0scGFpbnQ6e3R5cGU6InBhaW50Iixkb2M6IkRlZmF1bHQgcGFpbnQgcHJvcGVydGllcyBmb3IgdGhpcyBsYXllci4ifX0sbGF5b3V0OlsibGF5b3V0X2ZpbGwiLCJsYXlvdXRfbGluZSIsImxheW91dF9jaXJjbGUiLCJsYXlvdXRfaGVhdG1hcCIsImxheW91dF9maWxsLWV4dHJ1c2lvbiIsImxheW91dF9zeW1ib2wiLCJsYXlvdXRfcmFzdGVyIiwibGF5b3V0X2hpbGxzaGFkZSIsImxheW91dF9iYWNrZ3JvdW5kIl0sbGF5b3V0X2JhY2tncm91bmQ6e3Zpc2liaWxpdHk6e3R5cGU6ImVudW0iLHZhbHVlczp7dmlzaWJsZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgc2hvd24uIn0sbm9uZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgbm90IHNob3duLiJ9fSxkZWZhdWx0OiJ2aXNpYmxlIixkb2M6IldoZXRoZXIgdGhpcyBsYXllciBpcyBkaXNwbGF5ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSxsYXlvdXRfZmlsbDp7ImZpbGwtc29ydC1rZXkiOnt0eXBlOiJudW1iZXIiLGRvYzoiU29ydHMgZmVhdHVyZXMgaW4gYXNjZW5kaW5nIG9yZGVyIGJhc2VkIG9uIHRoaXMgdmFsdWUuIEZlYXR1cmVzIHdpdGggYSBoaWdoZXIgc29ydCBrZXkgd2lsbCBhcHBlYXIgYWJvdmUgZmVhdHVyZXMgd2l0aCBhIGxvd2VyIHNvcnQga2V5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMS4yLjAiLGFuZHJvaWQ6IjkuMS4wIixpb3M6IjUuOC4wIixtYWNvczoiMC4xNS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMS4yLjAiLGFuZHJvaWQ6IjkuMS4wIixpb3M6IjUuOC4wIixtYWNvczoiMC4xNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LHZpc2liaWxpdHk6e3R5cGU6ImVudW0iLHZhbHVlczp7dmlzaWJsZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgc2hvd24uIn0sbm9uZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgbm90IHNob3duLiJ9fSxkZWZhdWx0OiJ2aXNpYmxlIixkb2M6IldoZXRoZXIgdGhpcyBsYXllciBpcyBkaXNwbGF5ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSxsYXlvdXRfY2lyY2xlOnsiY2lyY2xlLXNvcnQta2V5Ijp7dHlwZToibnVtYmVyIixkb2M6IlNvcnRzIGZlYXR1cmVzIGluIGFzY2VuZGluZyBvcmRlciBiYXNlZCBvbiB0aGlzIHZhbHVlLiBGZWF0dXJlcyB3aXRoIGEgaGlnaGVyIHNvcnQga2V5IHdpbGwgYXBwZWFyIGFib3ZlIGZlYXR1cmVzIHdpdGggYSBsb3dlciBzb3J0IGtleS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjEuMi4wIixhbmRyb2lkOiI5LjIuMCIsaW9zOiI1LjkuMCIsbWFjb3M6IjAuMTYuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjEuMi4wIixhbmRyb2lkOiI5LjIuMCIsaW9zOiI1LjkuMCIsbWFjb3M6IjAuMTYuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSx2aXNpYmlsaXR5Ont0eXBlOiJlbnVtIix2YWx1ZXM6e3Zpc2libGU6e2RvYzoiVGhlIGxheWVyIGlzIHNob3duLiJ9LG5vbmU6e2RvYzoiVGhlIGxheWVyIGlzIG5vdCBzaG93bi4ifX0sZGVmYXVsdDoidmlzaWJsZSIsZG9jOiJXaGV0aGVyIHRoaXMgbGF5ZXIgaXMgZGlzcGxheWVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LCJwcm9wZXJ0eS10eXBlIjoiY29uc3RhbnQifX0sbGF5b3V0X2hlYXRtYXA6e3Zpc2liaWxpdHk6e3R5cGU6ImVudW0iLHZhbHVlczp7dmlzaWJsZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgc2hvd24uIn0sbm9uZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgbm90IHNob3duLiJ9fSxkZWZhdWx0OiJ2aXNpYmxlIixkb2M6IldoZXRoZXIgdGhpcyBsYXllciBpcyBkaXNwbGF5ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSwibGF5b3V0X2ZpbGwtZXh0cnVzaW9uIjp7dmlzaWJpbGl0eTp7dHlwZToiZW51bSIsdmFsdWVzOnt2aXNpYmxlOntkb2M6IlRoZSBsYXllciBpcyBzaG93bi4ifSxub25lOntkb2M6IlRoZSBsYXllciBpcyBub3Qgc2hvd24uIn19LGRlZmF1bHQ6InZpc2libGUiLGRvYzoiV2hldGhlciB0aGlzIGxheWVyIGlzIGRpc3BsYXllZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjcuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSwicHJvcGVydHktdHlwZSI6ImNvbnN0YW50In19LGxheW91dF9saW5lOnsibGluZS1jYXAiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e2J1dHQ6e2RvYzoiQSBjYXAgd2l0aCBhIHNxdWFyZWQtb2ZmIGVuZCB3aGljaCBpcyBkcmF3biB0byB0aGUgZXhhY3QgZW5kcG9pbnQgb2YgdGhlIGxpbmUuIn0scm91bmQ6e2RvYzoiQSBjYXAgd2l0aCBhIHJvdW5kZWQgZW5kIHdoaWNoIGlzIGRyYXduIGJleW9uZCB0aGUgZW5kcG9pbnQgb2YgdGhlIGxpbmUgYXQgYSByYWRpdXMgb2Ygb25lLWhhbGYgb2YgdGhlIGxpbmUncyB3aWR0aCBhbmQgY2VudGVyZWQgb24gdGhlIGVuZHBvaW50IG9mIHRoZSBsaW5lLiJ9LHNxdWFyZTp7ZG9jOiJBIGNhcCB3aXRoIGEgc3F1YXJlZC1vZmYgZW5kIHdoaWNoIGlzIGRyYXduIGJleW9uZCB0aGUgZW5kcG9pbnQgb2YgdGhlIGxpbmUgYXQgYSBkaXN0YW5jZSBvZiBvbmUtaGFsZiBvZiB0aGUgbGluZSdzIHdpZHRoLiJ9fSxkZWZhdWx0OiJidXR0Iixkb2M6IlRoZSBkaXNwbGF5IG9mIGxpbmUgZW5kaW5ncy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImxpbmUtam9pbiI6e3R5cGU6ImVudW0iLHZhbHVlczp7YmV2ZWw6e2RvYzoiQSBqb2luIHdpdGggYSBzcXVhcmVkLW9mZiBlbmQgd2hpY2ggaXMgZHJhd24gYmV5b25kIHRoZSBlbmRwb2ludCBvZiB0aGUgbGluZSBhdCBhIGRpc3RhbmNlIG9mIG9uZS1oYWxmIG9mIHRoZSBsaW5lJ3Mgd2lkdGguIn0scm91bmQ6e2RvYzoiQSBqb2luIHdpdGggYSByb3VuZGVkIGVuZCB3aGljaCBpcyBkcmF3biBiZXlvbmQgdGhlIGVuZHBvaW50IG9mIHRoZSBsaW5lIGF0IGEgcmFkaXVzIG9mIG9uZS1oYWxmIG9mIHRoZSBsaW5lJ3Mgd2lkdGggYW5kIGNlbnRlcmVkIG9uIHRoZSBlbmRwb2ludCBvZiB0aGUgbGluZS4ifSxtaXRlcjp7ZG9jOiJBIGpvaW4gd2l0aCBhIHNoYXJwLCBhbmdsZWQgY29ybmVyIHdoaWNoIGlzIGRyYXduIHdpdGggdGhlIG91dGVyIHNpZGVzIGJleW9uZCB0aGUgZW5kcG9pbnQgb2YgdGhlIHBhdGggdW50aWwgdGhleSBtZWV0LiJ9fSxkZWZhdWx0OiJtaXRlciIsZG9jOiJUaGUgZGlzcGxheSBvZiBsaW5lcyB3aGVuIGpvaW5pbmcuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjQwLjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImxpbmUtbWl0ZXItbGltaXQiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6Mixkb2M6IlVzZWQgdG8gYXV0b21hdGljYWxseSBjb252ZXJ0IG1pdGVyIGpvaW5zIHRvIGJldmVsIGpvaW5zIGZvciBzaGFycCBhbmdsZXMuIixyZXF1aXJlczpbeyJsaW5lLWpvaW4iOiJtaXRlciJ9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJsaW5lLXJvdW5kLWxpbWl0Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEuMDUsZG9jOiJVc2VkIHRvIGF1dG9tYXRpY2FsbHkgY29udmVydCByb3VuZCBqb2lucyB0byBtaXRlciBqb2lucyBmb3Igc2hhbGxvdyBhbmdsZXMuIixyZXF1aXJlczpbeyJsaW5lLWpvaW4iOiJyb3VuZCJ9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJsaW5lLXNvcnQta2V5Ijp7dHlwZToibnVtYmVyIixkb2M6IlNvcnRzIGZlYXR1cmVzIGluIGFzY2VuZGluZyBvcmRlciBiYXNlZCBvbiB0aGlzIHZhbHVlLiBGZWF0dXJlcyB3aXRoIGEgaGlnaGVyIHNvcnQga2V5IHdpbGwgYXBwZWFyIGFib3ZlIGZlYXR1cmVzIHdpdGggYSBsb3dlciBzb3J0IGtleS4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjEuMi4wIixhbmRyb2lkOiI5LjEuMCIsaW9zOiI1LjguMCIsbWFjb3M6IjAuMTUuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjEuMi4wIixhbmRyb2lkOiI5LjEuMCIsaW9zOiI1LjguMCIsbWFjb3M6IjAuMTUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSx2aXNpYmlsaXR5Ont0eXBlOiJlbnVtIix2YWx1ZXM6e3Zpc2libGU6e2RvYzoiVGhlIGxheWVyIGlzIHNob3duLiJ9LG5vbmU6e2RvYzoiVGhlIGxheWVyIGlzIG5vdCBzaG93bi4ifX0sZGVmYXVsdDoidmlzaWJsZSIsZG9jOiJXaGV0aGVyIHRoaXMgbGF5ZXIgaXMgZGlzcGxheWVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LCJwcm9wZXJ0eS10eXBlIjoiY29uc3RhbnQifX0sbGF5b3V0X3N5bWJvbDp7InN5bWJvbC1wbGFjZW1lbnQiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e3BvaW50Ontkb2M6IlRoZSBsYWJlbCBpcyBwbGFjZWQgYXQgdGhlIHBvaW50IHdoZXJlIHRoZSBnZW9tZXRyeSBpcyBsb2NhdGVkLiJ9LGxpbmU6e2RvYzoiVGhlIGxhYmVsIGlzIHBsYWNlZCBhbG9uZyB0aGUgbGluZSBvZiB0aGUgZ2VvbWV0cnkuIENhbiBvbmx5IGJlIHVzZWQgb24gYExpbmVTdHJpbmdgIGFuZCBgUG9seWdvbmAgZ2VvbWV0cmllcy4ifSwibGluZS1jZW50ZXIiOntkb2M6IlRoZSBsYWJlbCBpcyBwbGFjZWQgYXQgdGhlIGNlbnRlciBvZiB0aGUgbGluZSBvZiB0aGUgZ2VvbWV0cnkuIENhbiBvbmx5IGJlIHVzZWQgb24gYExpbmVTdHJpbmdgIGFuZCBgUG9seWdvbmAgZ2VvbWV0cmllcy4gTm90ZSB0aGF0IGEgc2luZ2xlIGZlYXR1cmUgaW4gYSB2ZWN0b3IgdGlsZSBtYXkgY29udGFpbiBtdWx0aXBsZSBsaW5lIGdlb21ldHJpZXMuIn19LGRlZmF1bHQ6InBvaW50Iixkb2M6IkxhYmVsIHBsYWNlbWVudCByZWxhdGl2ZSB0byBpdHMgZ2VvbWV0cnkuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiYGxpbmUtY2VudGVyYCB2YWx1ZSI6e2pzOiIwLjQ3LjAiLGFuZHJvaWQ6IjYuNC4wIixpb3M6IjQuMy4wIixtYWNvczoiMC4xMC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwic3ltYm9sLXNwYWNpbmciOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MjUwLG1pbmltdW06MSx1bml0czoicGl4ZWxzIixkb2M6IkRpc3RhbmNlIGJldHdlZW4gdHdvIHN5bWJvbCBhbmNob3JzLiIscmVxdWlyZXM6W3sic3ltYm9sLXBsYWNlbWVudCI6ImxpbmUifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwic3ltYm9sLWF2b2lkLWVkZ2VzIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IklmIHRydWUsIHRoZSBzeW1ib2xzIHdpbGwgbm90IGNyb3NzIHRpbGUgZWRnZXMgdG8gYXZvaWQgbXV0dWFsIGNvbGxpc2lvbnMuIFJlY29tbWVuZGVkIGluIGxheWVycyB0aGF0IGRvbid0IGhhdmUgZW5vdWdoIHBhZGRpbmcgaW4gdGhlIHZlY3RvciB0aWxlIHRvIHByZXZlbnQgY29sbGlzaW9ucywgb3IgaWYgaXQgaXMgYSBwb2ludCBzeW1ib2wgbGF5ZXIgcGxhY2VkIGFmdGVyIGEgbGluZSBzeW1ib2wgbGF5ZXIuIFdoZW4gdXNpbmcgYSBjbGllbnQgdGhhdCBzdXBwb3J0cyBnbG9iYWwgY29sbGlzaW9uIGRldGVjdGlvbiwgbGlrZSBNYXBib3ggR0wgSlMgdmVyc2lvbiAwLjQyLjAgb3IgZ3JlYXRlciwgZW5hYmxpbmcgdGhpcyBwcm9wZXJ0eSBpcyBub3QgbmVlZGVkIHRvIHByZXZlbnQgY2xpcHBlZCBsYWJlbHMgYXQgdGlsZSBib3VuZGFyaWVzLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwic3ltYm9sLXNvcnQta2V5Ijp7dHlwZToibnVtYmVyIixkb2M6IlNvcnRzIGZlYXR1cmVzIGluIGFzY2VuZGluZyBvcmRlciBiYXNlZCBvbiB0aGlzIHZhbHVlLiBGZWF0dXJlcyB3aXRoIGxvd2VyIHNvcnQga2V5cyBhcmUgZHJhd24gYW5kIHBsYWNlZCBmaXJzdC4gIFdoZW4gYGljb24tYWxsb3ctb3ZlcmxhcGAgb3IgYHRleHQtYWxsb3ctb3ZlcmxhcGAgaXMgYGZhbHNlYCwgZmVhdHVyZXMgd2l0aCBhIGxvd2VyIHNvcnQga2V5IHdpbGwgaGF2ZSBwcmlvcml0eSBkdXJpbmcgcGxhY2VtZW50LiBXaGVuIGBpY29uLWFsbG93LW92ZXJsYXBgIG9yIGB0ZXh0LWFsbG93LW92ZXJsYXBgIGlzIHNldCB0byBgdHJ1ZWAsIGZlYXR1cmVzIHdpdGggYSBoaWdoZXIgc29ydCBrZXkgd2lsbCBvdmVybGFwIG92ZXIgZmVhdHVyZXMgd2l0aCBhIGxvd2VyIHNvcnQga2V5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC41My4wIixhbmRyb2lkOiI3LjQuMCIsaW9zOiI0LjExLjAiLG1hY29zOiIwLjE0LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjUzLjAiLGFuZHJvaWQ6IjcuNC4wIixpb3M6IjQuMTEuMCIsbWFjb3M6IjAuMTQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwic3ltYm9sLXotb3JkZXIiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e2F1dG86e2RvYzoiU29ydHMgc3ltYm9scyBieSBgc3ltYm9sLXNvcnQta2V5YCBpZiBzZXQuIE90aGVyd2lzZSwgc29ydHMgc3ltYm9scyBieSB0aGVpciB5LXBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCBpZiBgaWNvbi1hbGxvdy1vdmVybGFwYCBvciBgdGV4dC1hbGxvdy1vdmVybGFwYCBpcyBzZXQgdG8gYHRydWVgIG9yIGBpY29uLWlnbm9yZS1wbGFjZW1lbnRgIG9yIGB0ZXh0LWlnbm9yZS1wbGFjZW1lbnRgIGlzIGBmYWxzZWAuIn0sInZpZXdwb3J0LXkiOntkb2M6IlNvcnRzIHN5bWJvbHMgYnkgdGhlaXIgeS1wb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgaWYgYGljb24tYWxsb3ctb3ZlcmxhcGAgb3IgYHRleHQtYWxsb3ctb3ZlcmxhcGAgaXMgc2V0IHRvIGB0cnVlYCBvciBgaWNvbi1pZ25vcmUtcGxhY2VtZW50YCBvciBgdGV4dC1pZ25vcmUtcGxhY2VtZW50YCBpcyBgZmFsc2VgLiJ9LHNvdXJjZTp7ZG9jOiJTb3J0cyBzeW1ib2xzIGJ5IGBzeW1ib2wtc29ydC1rZXlgIGlmIHNldC4gT3RoZXJ3aXNlLCBubyBzb3J0aW5nIGlzIGFwcGxpZWQ7IHN5bWJvbHMgYXJlIHJlbmRlcmVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSBzb3VyY2UgZGF0YS4ifX0sZGVmYXVsdDoiYXV0byIsZG9jOiJEZXRlcm1pbmVzIHdoZXRoZXIgb3ZlcmxhcHBpbmcgc3ltYm9scyBpbiB0aGUgc2FtZSBsYXllciBhcmUgcmVuZGVyZWQgaW4gdGhlIG9yZGVyIHRoYXQgdGhleSBhcHBlYXIgaW4gdGhlIGRhdGEgc291cmNlIG9yIGJ5IHRoZWlyIHktcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LiBUbyBjb250cm9sIHRoZSBvcmRlciBhbmQgcHJpb3JpdGl6YXRpb24gb2Ygc3ltYm9scyBvdGhlcndpc2UsIHVzZSBgc3ltYm9sLXNvcnQta2V5YC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDkuMCIsYW5kcm9pZDoiNi42LjAiLGlvczoiNC41LjAiLG1hY29zOiIwLjEyLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJpY29uLWFsbG93LW92ZXJsYXAiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiExLGRvYzoiSWYgdHJ1ZSwgdGhlIGljb24gd2lsbCBiZSB2aXNpYmxlIGV2ZW4gaWYgaXQgY29sbGlkZXMgd2l0aCBvdGhlciBwcmV2aW91c2x5IGRyYXduIHN5bWJvbHMuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJpY29uLWlnbm9yZS1wbGFjZW1lbnQiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiExLGRvYzoiSWYgdHJ1ZSwgb3RoZXIgc3ltYm9scyBjYW4gYmUgdmlzaWJsZSBldmVuIGlmIHRoZXkgY29sbGlkZSB3aXRoIHRoZSBpY29uLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaWNvbi1vcHRpb25hbCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITEsZG9jOiJJZiB0cnVlLCB0ZXh0IHdpbGwgZGlzcGxheSB3aXRob3V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgaWNvbnMgd2hlbiB0aGUgaWNvbiBjb2xsaWRlcyB3aXRoIG90aGVyIHN5bWJvbHMgYW5kIHRoZSB0ZXh0IGRvZXMgbm90LiIscmVxdWlyZXM6WyJpY29uLWltYWdlIiwidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImljb24tcm90YXRpb24tYWxpZ25tZW50Ijp7dHlwZToiZW51bSIsdmFsdWVzOnttYXA6e2RvYzoiV2hlbiBgc3ltYm9sLXBsYWNlbWVudGAgaXMgc2V0IHRvIGBwb2ludGAsIGFsaWducyBpY29ucyBlYXN0LXdlc3QuIFdoZW4gYHN5bWJvbC1wbGFjZW1lbnRgIGlzIHNldCB0byBgbGluZWAgb3IgYGxpbmUtY2VudGVyYCwgYWxpZ25zIGljb24geC1heGVzIHdpdGggdGhlIGxpbmUuIn0sdmlld3BvcnQ6e2RvYzoiUHJvZHVjZXMgaWNvbnMgd2hvc2UgeC1heGVzIGFyZSBhbGlnbmVkIHdpdGggdGhlIHgtYXhpcyBvZiB0aGUgdmlld3BvcnQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHZhbHVlIG9mIGBzeW1ib2wtcGxhY2VtZW50YC4ifSxhdXRvOntkb2M6IldoZW4gYHN5bWJvbC1wbGFjZW1lbnRgIGlzIHNldCB0byBgcG9pbnRgLCB0aGlzIGlzIGVxdWl2YWxlbnQgdG8gYHZpZXdwb3J0YC4gV2hlbiBgc3ltYm9sLXBsYWNlbWVudGAgaXMgc2V0IHRvIGBsaW5lYCBvciBgbGluZS1jZW50ZXJgLCB0aGlzIGlzIGVxdWl2YWxlbnQgdG8gYG1hcGAuIn19LGRlZmF1bHQ6ImF1dG8iLGRvYzoiSW4gY29tYmluYXRpb24gd2l0aCBgc3ltYm9sLXBsYWNlbWVudGAsIGRldGVybWluZXMgdGhlIHJvdGF0aW9uIGJlaGF2aW9yIG9mIGljb25zLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImBhdXRvYCB2YWx1ZSI6e2pzOiIwLjI1LjAiLGFuZHJvaWQ6IjQuMi4wIixpb3M6IjMuNC4wIixtYWNvczoiMC4zLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJpY29uLXNpemUiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsdW5pdHM6ImZhY3RvciBvZiB0aGUgb3JpZ2luYWwgaWNvbiBzaXplIixkb2M6IlNjYWxlcyB0aGUgb3JpZ2luYWwgc2l6ZSBvZiB0aGUgaWNvbiBieSB0aGUgcHJvdmlkZWQgZmFjdG9yLiBUaGUgbmV3IHBpeGVsIHNpemUgb2YgdGhlIGltYWdlIHdpbGwgYmUgdGhlIG9yaWdpbmFsIHBpeGVsIHNpemUgbXVsdGlwbGllZCBieSBgaWNvbi1zaXplYC4gMSBpcyB0aGUgb3JpZ2luYWwgc2l6ZTsgMyB0cmlwbGVzIHRoZSBzaXplIG9mIHRoZSBpbWFnZS4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzUuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiaWNvbi10ZXh0LWZpdCI6e3R5cGU6ImVudW0iLHZhbHVlczp7bm9uZTp7ZG9jOiJUaGUgaWNvbiBpcyBkaXNwbGF5ZWQgYXQgaXRzIGludHJpbnNpYyBhc3BlY3QgcmF0aW8uIn0sd2lkdGg6e2RvYzoiVGhlIGljb24gaXMgc2NhbGVkIGluIHRoZSB4LWRpbWVuc2lvbiB0byBmaXQgdGhlIHdpZHRoIG9mIHRoZSB0ZXh0LiJ9LGhlaWdodDp7ZG9jOiJUaGUgaWNvbiBpcyBzY2FsZWQgaW4gdGhlIHktZGltZW5zaW9uIHRvIGZpdCB0aGUgaGVpZ2h0IG9mIHRoZSB0ZXh0LiJ9LGJvdGg6e2RvYzoiVGhlIGljb24gaXMgc2NhbGVkIGluIGJvdGggeC0gYW5kIHktZGltZW5zaW9ucy4ifX0sZGVmYXVsdDoibm9uZSIsZG9jOiJTY2FsZXMgdGhlIGljb24gdG8gZml0IGFyb3VuZCB0aGUgYXNzb2NpYXRlZCB0ZXh0LiIscmVxdWlyZXM6WyJpY29uLWltYWdlIiwidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjEuMCIsYW5kcm9pZDoiNC4yLjAiLGlvczoiMy40LjAiLG1hY29zOiIwLjIuMSJ9LCJzdHJldGNoYWJsZSBpY29ucyI6e2pzOiIxLjYuMCIsYW5kcm9pZDoiOS4yLjAiLGlvczoiNS44LjAiLG1hY29zOiIwLjE1LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJpY29uLXRleHQtZml0LXBhZGRpbmciOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjQsZGVmYXVsdDpbMCwwLDAsMF0sdW5pdHM6InBpeGVscyIsZG9jOiJTaXplIG9mIHRoZSBhZGRpdGlvbmFsIGFyZWEgYWRkZWQgdG8gZGltZW5zaW9ucyBkZXRlcm1pbmVkIGJ5IGBpY29uLXRleHQtZml0YCwgaW4gY2xvY2t3aXNlIG9yZGVyOiB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQuIixyZXF1aXJlczpbImljb24taW1hZ2UiLCJ0ZXh0LWZpZWxkIix7Imljb24tdGV4dC1maXQiOlsiYm90aCIsIndpZHRoIiwiaGVpZ2h0Il19XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjIxLjAiLGFuZHJvaWQ6IjQuMi4wIixpb3M6IjMuNC4wIixtYWNvczoiMC4yLjEifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJpY29uLWltYWdlIjp7dHlwZToicmVzb2x2ZWRJbWFnZSIsZG9jOiJOYW1lIG9mIGltYWdlIGluIHNwcml0ZSB0byB1c2UgZm9yIGRyYXdpbmcgYW4gaW1hZ2UgYmFja2dyb3VuZC4iLHRva2VuczohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjM1LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImljb24tcm90YXRlIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAscGVyaW9kOjM2MCx1bml0czoiZGVncmVlcyIsZG9jOiJSb3RhdGVzIHRoZSBpY29uIGNsb2Nrd2lzZS4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjEuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiaWNvbi1wYWRkaW5nIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjIsbWluaW11bTowLHVuaXRzOiJwaXhlbHMiLGRvYzoiU2l6ZSBvZiB0aGUgYWRkaXRpb25hbCBhcmVhIGFyb3VuZCB0aGUgaWNvbiBib3VuZGluZyBib3ggdXNlZCBmb3IgZGV0ZWN0aW5nIHN5bWJvbCBjb2xsaXNpb25zLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaWNvbi1rZWVwLXVwcmlnaHQiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiExLGRvYzoiSWYgdHJ1ZSwgdGhlIGljb24gbWF5IGJlIGZsaXBwZWQgdG8gcHJldmVudCBpdCBmcm9tIGJlaW5nIHJlbmRlcmVkIHVwc2lkZS1kb3duLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIix7Imljb24tcm90YXRpb24tYWxpZ25tZW50IjoibWFwIn0seyJzeW1ib2wtcGxhY2VtZW50IjpbImxpbmUiLCJsaW5lLWNlbnRlciJdfV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaWNvbi1vZmZzZXQiOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjIsZGVmYXVsdDpbMCwwXSxkb2M6Ik9mZnNldCBkaXN0YW5jZSBvZiBpY29uIGZyb20gaXRzIGFuY2hvci4gUG9zaXRpdmUgdmFsdWVzIGluZGljYXRlIHJpZ2h0IGFuZCBkb3duLCB3aGlsZSBuZWdhdGl2ZSB2YWx1ZXMgaW5kaWNhdGUgbGVmdCBhbmQgdXAuIEVhY2ggY29tcG9uZW50IGlzIG11bHRpcGxpZWQgYnkgdGhlIHZhbHVlIG9mIGBpY29uLXNpemVgIHRvIG9idGFpbiB0aGUgZmluYWwgb2Zmc2V0IGluIHBpeGVscy4gV2hlbiBjb21iaW5lZCB3aXRoIGBpY29uLXJvdGF0ZWAgdGhlIG9mZnNldCB3aWxsIGJlIGFzIGlmIHRoZSByb3RhdGVkIGRpcmVjdGlvbiB3YXMgdXAuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImljb24tYW5jaG9yIjp7dHlwZToiZW51bSIsdmFsdWVzOntjZW50ZXI6e2RvYzoiVGhlIGNlbnRlciBvZiB0aGUgaWNvbiBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LGxlZnQ6e2RvYzoiVGhlIGxlZnQgc2lkZSBvZiB0aGUgaWNvbiBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LHJpZ2h0Ontkb2M6IlRoZSByaWdodCBzaWRlIG9mIHRoZSBpY29uIGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sdG9wOntkb2M6IlRoZSB0b3Agb2YgdGhlIGljb24gaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSxib3R0b206e2RvYzoiVGhlIGJvdHRvbSBvZiB0aGUgaWNvbiBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJ0b3AtbGVmdCI6e2RvYzoiVGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgaWNvbiBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJ0b3AtcmlnaHQiOntkb2M6IlRoZSB0b3AgcmlnaHQgY29ybmVyIG9mIHRoZSBpY29uIGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sImJvdHRvbS1sZWZ0Ijp7ZG9jOiJUaGUgYm90dG9tIGxlZnQgY29ybmVyIG9mIHRoZSBpY29uIGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sImJvdHRvbS1yaWdodCI6e2RvYzoiVGhlIGJvdHRvbSByaWdodCBjb3JuZXIgb2YgdGhlIGljb24gaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifX0sZGVmYXVsdDoiY2VudGVyIixkb2M6IlBhcnQgb2YgdGhlIGljb24gcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDAuMCIsYW5kcm9pZDoiNS4yLjAiLGlvczoiMy43LjAiLG1hY29zOiIwLjYuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuNDAuMCIsYW5kcm9pZDoiNS4yLjAiLGlvczoiMy43LjAiLG1hY29zOiIwLjYuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiaWNvbi1waXRjaC1hbGlnbm1lbnQiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgaWNvbiBpcyBhbGlnbmVkIHRvIHRoZSBwbGFuZSBvZiB0aGUgbWFwLiJ9LHZpZXdwb3J0Ontkb2M6IlRoZSBpY29uIGlzIGFsaWduZWQgdG8gdGhlIHBsYW5lIG9mIHRoZSB2aWV3cG9ydC4ifSxhdXRvOntkb2M6IkF1dG9tYXRpY2FsbHkgbWF0Y2hlcyB0aGUgdmFsdWUgb2YgYGljb24tcm90YXRpb24tYWxpZ25tZW50YC4ifX0sZGVmYXVsdDoiYXV0byIsZG9jOiJPcmllbnRhdGlvbiBvZiBpY29uIHdoZW4gbWFwIGlzIHBpdGNoZWQuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjM5LjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJ0ZXh0LXBpdGNoLWFsaWdubWVudCI6e3R5cGU6ImVudW0iLHZhbHVlczp7bWFwOntkb2M6IlRoZSB0ZXh0IGlzIGFsaWduZWQgdG8gdGhlIHBsYW5lIG9mIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIHRleHQgaXMgYWxpZ25lZCB0byB0aGUgcGxhbmUgb2YgdGhlIHZpZXdwb3J0LiJ9LGF1dG86e2RvYzoiQXV0b21hdGljYWxseSBtYXRjaGVzIHRoZSB2YWx1ZSBvZiBgdGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRgLiJ9fSxkZWZhdWx0OiJhdXRvIixkb2M6Ik9yaWVudGF0aW9uIG9mIHRleHQgd2hlbiBtYXAgaXMgcGl0Y2hlZC4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjEuMCIsYW5kcm9pZDoiNC4yLjAiLGlvczoiMy40LjAiLG1hY29zOiIwLjIuMSJ9LCJgYXV0b2AgdmFsdWUiOntqczoiMC4yNS4wIixhbmRyb2lkOiI0LjIuMCIsaW9zOiIzLjQuMCIsbWFjb3M6IjAuMy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJXaGVuIGBzeW1ib2wtcGxhY2VtZW50YCBpcyBzZXQgdG8gYHBvaW50YCwgYWxpZ25zIHRleHQgZWFzdC13ZXN0LiBXaGVuIGBzeW1ib2wtcGxhY2VtZW50YCBpcyBzZXQgdG8gYGxpbmVgIG9yIGBsaW5lLWNlbnRlcmAsIGFsaWducyB0ZXh0IHgtYXhlcyB3aXRoIHRoZSBsaW5lLiJ9LHZpZXdwb3J0Ontkb2M6IlByb2R1Y2VzIGdseXBocyB3aG9zZSB4LWF4ZXMgYXJlIGFsaWduZWQgd2l0aCB0aGUgeC1heGlzIG9mIHRoZSB2aWV3cG9ydCwgcmVnYXJkbGVzcyBvZiB0aGUgdmFsdWUgb2YgYHN5bWJvbC1wbGFjZW1lbnRgLiJ9LGF1dG86e2RvYzoiV2hlbiBgc3ltYm9sLXBsYWNlbWVudGAgaXMgc2V0IHRvIGBwb2ludGAsIHRoaXMgaXMgZXF1aXZhbGVudCB0byBgdmlld3BvcnRgLiBXaGVuIGBzeW1ib2wtcGxhY2VtZW50YCBpcyBzZXQgdG8gYGxpbmVgIG9yIGBsaW5lLWNlbnRlcmAsIHRoaXMgaXMgZXF1aXZhbGVudCB0byBgbWFwYC4ifX0sZGVmYXVsdDoiYXV0byIsZG9jOiJJbiBjb21iaW5hdGlvbiB3aXRoIGBzeW1ib2wtcGxhY2VtZW50YCwgZGV0ZXJtaW5lcyB0aGUgcm90YXRpb24gYmVoYXZpb3Igb2YgdGhlIGluZGl2aWR1YWwgZ2x5cGhzIGZvcm1pbmcgdGhlIHRleHQuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiYGF1dG9gIHZhbHVlIjp7anM6IjAuMjUuMCIsYW5kcm9pZDoiNC4yLjAiLGlvczoiMy40LjAiLG1hY29zOiIwLjMuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtZmllbGQiOnt0eXBlOiJmb3JtYXR0ZWQiLGRlZmF1bHQ6IiIsdG9rZW5zOiEwLGRvYzoiVmFsdWUgdG8gdXNlIGZvciBhIHRleHQgbGFiZWwuIElmIGEgcGxhaW4gYHN0cmluZ2AgaXMgcHJvdmlkZWQsIGl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIGBmb3JtYXR0ZWRgIHdpdGggZGVmYXVsdC9pbmhlcml0ZWQgZm9ybWF0dGluZyBvcHRpb25zLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LWZvbnQiOnt0eXBlOiJhcnJheSIsdmFsdWU6InN0cmluZyIsZGVmYXVsdDpbIk9wZW4gU2FucyBSZWd1bGFyIiwiQXJpYWwgVW5pY29kZSBNUyBSZWd1bGFyIl0sZG9jOiJGb250IHN0YWNrIHRvIHVzZSBmb3IgZGlzcGxheWluZyB0ZXh0LiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC40My4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LXNpemUiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MTYsbWluaW11bTowLHVuaXRzOiJwaXhlbHMiLGRvYzoiRm9udCBzaXplLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zNS4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LW1heC13aWR0aCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDoxMCxtaW5pbXVtOjAsdW5pdHM6ImVtcyIsZG9jOiJUaGUgbWF4aW11bSBsaW5lIHdpZHRoIGZvciB0ZXh0IHdyYXBwaW5nLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC40MC4wIixhbmRyb2lkOiI1LjIuMCIsaW9zOiIzLjcuMCIsbWFjb3M6IjAuNi4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LWxpbmUtaGVpZ2h0Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEuMix1bml0czoiZW1zIixkb2M6IlRleHQgbGVhZGluZyB2YWx1ZSBmb3IgbXVsdGktbGluZSB0ZXh0LiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC1sZXR0ZXItc3BhY2luZyI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLHVuaXRzOiJlbXMiLGRvYzoiVGV4dCB0cmFja2luZyBhbW91bnQuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjQwLjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sInRleHQtanVzdGlmeSI6e3R5cGU6ImVudW0iLHZhbHVlczp7YXV0bzp7ZG9jOiJUaGUgdGV4dCBpcyBhbGlnbmVkIHRvd2FyZHMgdGhlIGFuY2hvciBwb3NpdGlvbi4ifSxsZWZ0Ontkb2M6IlRoZSB0ZXh0IGlzIGFsaWduZWQgdG8gdGhlIGxlZnQuIn0sY2VudGVyOntkb2M6IlRoZSB0ZXh0IGlzIGNlbnRlcmVkLiJ9LHJpZ2h0Ontkb2M6IlRoZSB0ZXh0IGlzIGFsaWduZWQgdG8gdGhlIHJpZ2h0LiJ9fSxkZWZhdWx0OiJjZW50ZXIiLGRvYzoiVGV4dCBqdXN0aWZpY2F0aW9uIG9wdGlvbnMuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjM5LjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifSxhdXRvOntqczoiMC41NC4wIixhbmRyb2lkOiI3LjQuMCIsaW9zOiI0LjEwLjAiLG1hY29zOiIwLjE0LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sInRleHQtcmFkaWFsLW9mZnNldCI6e3R5cGU6Im51bWJlciIsdW5pdHM6ImVtcyIsZGVmYXVsdDowLGRvYzoiUmFkaWFsIG9mZnNldCBvZiB0ZXh0LCBpbiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBzeW1ib2wncyBhbmNob3IuIFVzZWZ1bCBpbiBjb21iaW5hdGlvbiB3aXRoIGB0ZXh0LXZhcmlhYmxlLWFuY2hvcmAsIHdoaWNoIGRlZmF1bHRzIHRvIHVzaW5nIHRoZSB0d28tZGltZW5zaW9uYWwgYHRleHQtb2Zmc2V0YCBpZiBwcmVzZW50LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC41NC4wIixhbmRyb2lkOiI3LjQuMCIsaW9zOiI0LjEwLjAiLG1hY29zOiIwLjE0LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjU0LjAiLGFuZHJvaWQ6IjcuNC4wIixpb3M6IjQuMTAuMCIsbWFjb3M6IjAuMTQuMCJ9fSxyZXF1aXJlczpbInRleHQtZmllbGQiXSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19fSwidGV4dC12YXJpYWJsZS1hbmNob3IiOnt0eXBlOiJhcnJheSIsdmFsdWU6ImVudW0iLHZhbHVlczp7Y2VudGVyOntkb2M6IlRoZSBjZW50ZXIgb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSxsZWZ0Ontkb2M6IlRoZSBsZWZ0IHNpZGUgb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSxyaWdodDp7ZG9jOiJUaGUgcmlnaHQgc2lkZSBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LHRvcDp7ZG9jOiJUaGUgdG9wIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sYm90dG9tOntkb2M6IlRoZSBib3R0b20gb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSwidG9wLWxlZnQiOntkb2M6IlRoZSB0b3AgbGVmdCBjb3JuZXIgb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSwidG9wLXJpZ2h0Ijp7ZG9jOiJUaGUgdG9wIHJpZ2h0IGNvcm5lciBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJib3R0b20tbGVmdCI6e2RvYzoiVGhlIGJvdHRvbSBsZWZ0IGNvcm5lciBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJib3R0b20tcmlnaHQiOntkb2M6IlRoZSBib3R0b20gcmlnaHQgY29ybmVyIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn19LHJlcXVpcmVzOlsidGV4dC1maWVsZCIseyJzeW1ib2wtcGxhY2VtZW50IjpbInBvaW50Il19XSxkb2M6IlRvIGluY3JlYXNlIHRoZSBjaGFuY2Ugb2YgcGxhY2luZyBoaWdoLXByaW9yaXR5IGxhYmVscyBvbiB0aGUgbWFwLCB5b3UgY2FuIHByb3ZpZGUgYW4gYXJyYXkgb2YgYHRleHQtYW5jaG9yYCBsb2NhdGlvbnM6IHRoZSByZW5kZXJlciB3aWxsIGF0dGVtcHQgdG8gcGxhY2UgdGhlIGxhYmVsIGF0IGVhY2ggbG9jYXRpb24sIGluIG9yZGVyLCBiZWZvcmUgbW92aW5nIG9udG8gdGhlIG5leHQgbGFiZWwuIFVzZSBgdGV4dC1qdXN0aWZ5OiBhdXRvYCB0byBjaG9vc2UganVzdGlmaWNhdGlvbiBiYXNlZCBvbiBhbmNob3IgcG9zaXRpb24uIFRvIGFwcGx5IGFuIG9mZnNldCwgdXNlIHRoZSBgdGV4dC1yYWRpYWwtb2Zmc2V0YCBvciB0aGUgdHdvLWRpbWVuc2lvbmFsIGB0ZXh0LW9mZnNldGAuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjU0LjAiLGFuZHJvaWQ6IjcuNC4wIixpb3M6IjQuMTAuMCIsbWFjb3M6IjAuMTQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtYW5jaG9yIjp7dHlwZToiZW51bSIsdmFsdWVzOntjZW50ZXI6e2RvYzoiVGhlIGNlbnRlciBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LGxlZnQ6e2RvYzoiVGhlIGxlZnQgc2lkZSBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LHJpZ2h0Ontkb2M6IlRoZSByaWdodCBzaWRlIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sdG9wOntkb2M6IlRoZSB0b3Agb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifSxib3R0b206e2RvYzoiVGhlIGJvdHRvbSBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJ0b3AtbGVmdCI6e2RvYzoiVGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGUgdGV4dCBpcyBwbGFjZWQgY2xvc2VzdCB0byB0aGUgYW5jaG9yLiJ9LCJ0b3AtcmlnaHQiOntkb2M6IlRoZSB0b3AgcmlnaHQgY29ybmVyIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sImJvdHRvbS1sZWZ0Ijp7ZG9jOiJUaGUgYm90dG9tIGxlZnQgY29ybmVyIG9mIHRoZSB0ZXh0IGlzIHBsYWNlZCBjbG9zZXN0IHRvIHRoZSBhbmNob3IuIn0sImJvdHRvbS1yaWdodCI6e2RvYzoiVGhlIGJvdHRvbSByaWdodCBjb3JuZXIgb2YgdGhlIHRleHQgaXMgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4ifX0sZGVmYXVsdDoiY2VudGVyIixkb2M6IlBhcnQgb2YgdGhlIHRleHQgcGxhY2VkIGNsb3Nlc3QgdG8gdGhlIGFuY2hvci4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCIseyIhIjoidGV4dC12YXJpYWJsZS1hbmNob3IifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zOS4wIixhbmRyb2lkOiI1LjIuMCIsaW9zOiIzLjcuMCIsbWFjb3M6IjAuNi4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LW1heC1hbmdsZSI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDo0NSx1bml0czoiZGVncmVlcyIsZG9jOiJNYXhpbXVtIGFuZ2xlIGNoYW5nZSBiZXR3ZWVuIGFkamFjZW50IGNoYXJhY3RlcnMuIixyZXF1aXJlczpbInRleHQtZmllbGQiLHsic3ltYm9sLXBsYWNlbWVudCI6WyJsaW5lIiwibGluZS1jZW50ZXIiXX1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtd3JpdGluZy1tb2RlIjp7dHlwZToiYXJyYXkiLHZhbHVlOiJlbnVtIix2YWx1ZXM6e2hvcml6b250YWw6e2RvYzoiSWYgYSB0ZXh0J3MgbGFuZ3VhZ2Ugc3VwcG9ydHMgaG9yaXpvbnRhbCB3cml0aW5nIG1vZGUsIHN5bWJvbHMgd2l0aCBwb2ludCBwbGFjZW1lbnQgd291bGQgYmUgbGFpZCBvdXQgaG9yaXpvbnRhbGx5LiJ9LHZlcnRpY2FsOntkb2M6IklmIGEgdGV4dCdzIGxhbmd1YWdlIHN1cHBvcnRzIHZlcnRpY2FsIHdyaXRpbmcgbW9kZSwgc3ltYm9scyB3aXRoIHBvaW50IHBsYWNlbWVudCB3b3VsZCBiZSBsYWlkIG91dCB2ZXJ0aWNhbGx5LiJ9fSxkb2M6IlRoZSBwcm9wZXJ0eSBhbGxvd3MgY29udHJvbCBvdmVyIGEgc3ltYm9sJ3Mgb3JpZW50YXRpb24uIE5vdGUgdGhhdCB0aGUgcHJvcGVydHkgdmFsdWVzIGFjdCBhcyBhIGhpbnQsIHNvIHRoYXQgYSBzeW1ib2wgd2hvc2UgbGFuZ3VhZ2UgZG9lc27igJl0IHN1cHBvcnQgdGhlIHByb3ZpZGVkIG9yaWVudGF0aW9uIHdpbGwgYmUgbGFpZCBvdXQgaW4gaXRzIG5hdHVyYWwgb3JpZW50YXRpb24uIEV4YW1wbGU6IEVuZ2xpc2ggcG9pbnQgc3ltYm9sIHdpbGwgYmUgcmVuZGVyZWQgaG9yaXpvbnRhbGx5IGV2ZW4gaWYgYXJyYXkgdmFsdWUgY29udGFpbnMgc2luZ2xlICd2ZXJ0aWNhbCcgZW51bSB2YWx1ZS4gVGhlIG9yZGVyIG9mIGVsZW1lbnRzIGluIGFuIGFycmF5IGRlZmluZSBwcmlvcml0eSBvcmRlciBmb3IgdGhlIHBsYWNlbWVudCBvZiBhbiBvcmllbnRhdGlvbiB2YXJpYW50LiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIix7InN5bWJvbC1wbGFjZW1lbnQiOlsicG9pbnQiXX1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjEuMy4wIixhbmRyb2lkOiI4LjMuMCIsaW9zOiI1LjMuMCIsbWFjb3M6IjAuMTUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtcm90YXRlIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAscGVyaW9kOjM2MCx1bml0czoiZGVncmVlcyIsZG9jOiJSb3RhdGVzIHRoZSB0ZXh0IGNsb2Nrd2lzZS4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzUuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1wYWRkaW5nIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjIsbWluaW11bTowLHVuaXRzOiJwaXhlbHMiLGRvYzoiU2l6ZSBvZiB0aGUgYWRkaXRpb25hbCBhcmVhIGFyb3VuZCB0aGUgdGV4dCBib3VuZGluZyBib3ggdXNlZCBmb3IgZGV0ZWN0aW5nIHN5bWJvbCBjb2xsaXNpb25zLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC1rZWVwLXVwcmlnaHQiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiEwLGRvYzoiSWYgdHJ1ZSwgdGhlIHRleHQgbWF5IGJlIGZsaXBwZWQgdmVydGljYWxseSB0byBwcmV2ZW50IGl0IGZyb20gYmVpbmcgcmVuZGVyZWQgdXBzaWRlLWRvd24uIixyZXF1aXJlczpbInRleHQtZmllbGQiLHsidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnQiOiJtYXAifSx7InN5bWJvbC1wbGFjZW1lbnQiOlsibGluZSIsImxpbmUtY2VudGVyIl19XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJ0ZXh0LXRyYW5zZm9ybSI6e3R5cGU6ImVudW0iLHZhbHVlczp7bm9uZTp7ZG9jOiJUaGUgdGV4dCBpcyBub3QgYWx0ZXJlZC4ifSx1cHBlcmNhc2U6e2RvYzoiRm9yY2VzIGFsbCBsZXR0ZXJzIHRvIGJlIGRpc3BsYXllZCBpbiB1cHBlcmNhc2UuIn0sbG93ZXJjYXNlOntkb2M6IkZvcmNlcyBhbGwgbGV0dGVycyB0byBiZSBkaXNwbGF5ZWQgaW4gbG93ZXJjYXNlLiJ9fSxkZWZhdWx0OiJub25lIixkb2M6IlNwZWNpZmllcyBob3cgdG8gY2FwaXRhbGl6ZSB0ZXh0LCBzaW1pbGFyIHRvIHRoZSBDU1MgYHRleHQtdHJhbnNmb3JtYCBwcm9wZXJ0eS4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzMuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1vZmZzZXQiOnt0eXBlOiJhcnJheSIsZG9jOiJPZmZzZXQgZGlzdGFuY2Ugb2YgdGV4dCBmcm9tIGl0cyBhbmNob3IuIFBvc2l0aXZlIHZhbHVlcyBpbmRpY2F0ZSByaWdodCBhbmQgZG93biwgd2hpbGUgbmVnYXRpdmUgdmFsdWVzIGluZGljYXRlIGxlZnQgYW5kIHVwLiBJZiB1c2VkIHdpdGggdGV4dC12YXJpYWJsZS1hbmNob3IsIGlucHV0IHZhbHVlcyB3aWxsIGJlIHRha2VuIGFzIGFic29sdXRlIHZhbHVlcy4gT2Zmc2V0cyBhbG9uZyB0aGUgeC0gYW5kIHktYXhpcyB3aWxsIGJlIGFwcGxpZWQgYXV0b21hdGljYWxseSBiYXNlZCBvbiB0aGUgYW5jaG9yIHBvc2l0aW9uLiIsdmFsdWU6Im51bWJlciIsdW5pdHM6ImVtcyIsbGVuZ3RoOjIsZGVmYXVsdDpbMCwwXSxyZXF1aXJlczpbInRleHQtZmllbGQiLHsiISI6InRleHQtcmFkaWFsLW9mZnNldCJ9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjM1LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sInRleHQtYWxsb3ctb3ZlcmxhcCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITEsZG9jOiJJZiB0cnVlLCB0aGUgdGV4dCB3aWxsIGJlIHZpc2libGUgZXZlbiBpZiBpdCBjb2xsaWRlcyB3aXRoIG90aGVyIHByZXZpb3VzbHkgZHJhd24gc3ltYm9scy4iLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInRleHQtaWdub3JlLXBsYWNlbWVudCI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITEsZG9jOiJJZiB0cnVlLCBvdGhlciBzeW1ib2xzIGNhbiBiZSB2aXNpYmxlIGV2ZW4gaWYgdGhleSBjb2xsaWRlIHdpdGggdGhlIHRleHQuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJ0ZXh0LW9wdGlvbmFsIjp7dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSxkb2M6IklmIHRydWUsIGljb25zIHdpbGwgZGlzcGxheSB3aXRob3V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgdGV4dCB3aGVuIHRoZSB0ZXh0IGNvbGxpZGVzIHdpdGggb3RoZXIgc3ltYm9scyBhbmQgdGhlIGljb24gZG9lcyBub3QuIixyZXF1aXJlczpbInRleHQtZmllbGQiLCJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSx2aXNpYmlsaXR5Ont0eXBlOiJlbnVtIix2YWx1ZXM6e3Zpc2libGU6e2RvYzoiVGhlIGxheWVyIGlzIHNob3duLiJ9LG5vbmU6e2RvYzoiVGhlIGxheWVyIGlzIG5vdCBzaG93bi4ifX0sZGVmYXVsdDoidmlzaWJsZSIsZG9jOiJXaGV0aGVyIHRoaXMgbGF5ZXIgaXMgZGlzcGxheWVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LCJwcm9wZXJ0eS10eXBlIjoiY29uc3RhbnQifX0sbGF5b3V0X3Jhc3Rlcjp7dmlzaWJpbGl0eTp7dHlwZToiZW51bSIsdmFsdWVzOnt2aXNpYmxlOntkb2M6IlRoZSBsYXllciBpcyBzaG93bi4ifSxub25lOntkb2M6IlRoZSBsYXllciBpcyBub3Qgc2hvd24uIn19LGRlZmF1bHQ6InZpc2libGUiLGRvYzoiV2hldGhlciB0aGlzIGxheWVyIGlzIGRpc3BsYXllZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSwicHJvcGVydHktdHlwZSI6ImNvbnN0YW50In19LGxheW91dF9oaWxsc2hhZGU6e3Zpc2liaWxpdHk6e3R5cGU6ImVudW0iLHZhbHVlczp7dmlzaWJsZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgc2hvd24uIn0sbm9uZTp7ZG9jOiJUaGUgbGF5ZXIgaXMgbm90IHNob3duLiJ9fSxkZWZhdWx0OiJ2aXNpYmxlIixkb2M6IldoZXRoZXIgdGhpcyBsYXllciBpcyBkaXNwbGF5ZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQzLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sInByb3BlcnR5LXR5cGUiOiJjb25zdGFudCJ9fSxmaWx0ZXI6e3R5cGU6ImFycmF5Iix2YWx1ZToiKiIsZG9jOiJBIGZpbHRlciBzZWxlY3RzIHNwZWNpZmljIGZlYXR1cmVzIGZyb20gYSBsYXllci4ifSxmaWx0ZXJfb3BlcmF0b3I6e3R5cGU6ImVudW0iLHZhbHVlczp7Ij09Ijp7ZG9jOidgWyI9PSIsIGtleSwgdmFsdWVdYCBlcXVhbGl0eTogYGZlYXR1cmVba2V5XSA9IHZhbHVlYCd9LCIhPSI6e2RvYzonYFsiIT0iLCBrZXksIHZhbHVlXWAgaW5lcXVhbGl0eTogYGZlYXR1cmVba2V5XSDiiaAgdmFsdWVgJ30sIj4iOntkb2M6J2BbIj4iLCBrZXksIHZhbHVlXWAgZ3JlYXRlciB0aGFuOiBgZmVhdHVyZVtrZXldID4gdmFsdWVgJ30sIj49Ijp7ZG9jOidgWyI+PSIsIGtleSwgdmFsdWVdYCBncmVhdGVyIHRoYW4gb3IgZXF1YWw6IGBmZWF0dXJlW2tleV0g4omlIHZhbHVlYCd9LCI8Ijp7ZG9jOidgWyI8Iiwga2V5LCB2YWx1ZV1gIGxlc3MgdGhhbjogYGZlYXR1cmVba2V5XSA8IHZhbHVlYCd9LCI8PSI6e2RvYzonYFsiPD0iLCBrZXksIHZhbHVlXWAgbGVzcyB0aGFuIG9yIGVxdWFsOiBgZmVhdHVyZVtrZXldIOKJpCB2YWx1ZWAnfSxpbjp7ZG9jOidgWyJpbiIsIGtleSwgdjAsIC4uLiwgdm5dYCBzZXQgaW5jbHVzaW9uOiBgZmVhdHVyZVtrZXldIOKIiCB7djAsIC4uLiwgdm59YCd9LCIhaW4iOntkb2M6J2BbIiFpbiIsIGtleSwgdjAsIC4uLiwgdm5dYCBzZXQgZXhjbHVzaW9uOiBgZmVhdHVyZVtrZXldIOKIiSB7djAsIC4uLiwgdm59YCd9LGFsbDp7ZG9jOidgWyJhbGwiLCBmMCwgLi4uLCBmbl1gIGxvZ2ljYWwgYEFORGA6IGBmMCDiiKcgLi4uIOKIpyBmbmAnfSxhbnk6e2RvYzonYFsiYW55IiwgZjAsIC4uLiwgZm5dYCBsb2dpY2FsIGBPUmA6IGBmMCDiiKggLi4uIOKIqCBmbmAnfSxub25lOntkb2M6J2BbIm5vbmUiLCBmMCwgLi4uLCBmbl1gIGxvZ2ljYWwgYE5PUmA6IGDCrGYwIOKIpyAuLi4g4oinIMKsZm5gJ30saGFzOntkb2M6J2BbImhhcyIsIGtleV1gIGBmZWF0dXJlW2tleV1gIGV4aXN0cyd9LCIhaGFzIjp7ZG9jOidgWyIhaGFzIiwga2V5XWAgYGZlYXR1cmVba2V5XWAgZG9lcyBub3QgZXhpc3QnfSx3aXRoaW46e2RvYzonYFsid2l0aGluIiwgb2JqZWN0XWAgZmVhdHVyZSBnZW9tZXRyeSBpcyB3aXRoaW4gb2JqZWN0IGdlb21ldHJ5J319LGRvYzoiVGhlIGZpbHRlciBvcGVyYXRvci4ifSxnZW9tZXRyeV90eXBlOnt0eXBlOiJlbnVtIix2YWx1ZXM6e1BvaW50Ontkb2M6IkZpbHRlciB0byBwb2ludCBnZW9tZXRyaWVzLiJ9LExpbmVTdHJpbmc6e2RvYzoiRmlsdGVyIHRvIGxpbmUgZ2VvbWV0cmllcy4ifSxQb2x5Z29uOntkb2M6IkZpbHRlciB0byBwb2x5Z29uIGdlb21ldHJpZXMuIn19LGRvYzoiVGhlIGdlb21ldHJ5IHR5cGUgZm9yIHRoZSBmaWx0ZXIgdG8gc2VsZWN0LiJ9LGZ1bmN0aW9uOntleHByZXNzaW9uOnt0eXBlOiJleHByZXNzaW9uIixkb2M6IkFuIGV4cHJlc3Npb24uIn0sc3RvcHM6e3R5cGU6ImFycmF5Iixkb2M6IkFuIGFycmF5IG9mIHN0b3BzLiIsdmFsdWU6ImZ1bmN0aW9uX3N0b3AifSxiYXNlOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsZG9jOiJUaGUgZXhwb25lbnRpYWwgYmFzZSBvZiB0aGUgaW50ZXJwb2xhdGlvbiBjdXJ2ZS4gSXQgY29udHJvbHMgdGhlIHJhdGUgYXQgd2hpY2ggdGhlIHJlc3VsdCBpbmNyZWFzZXMuIEhpZ2hlciB2YWx1ZXMgbWFrZSB0aGUgcmVzdWx0IGluY3JlYXNlIG1vcmUgdG93YXJkcyB0aGUgaGlnaCBlbmQgb2YgdGhlIHJhbmdlLiBXaXRoIGAxYCB0aGUgc3RvcHMgYXJlIGludGVycG9sYXRlZCBsaW5lYXJseS4ifSxwcm9wZXJ0eTp7dHlwZToic3RyaW5nIixkb2M6IlRoZSBuYW1lIG9mIGEgZmVhdHVyZSBwcm9wZXJ0eSB0byB1c2UgYXMgdGhlIGZ1bmN0aW9uIGlucHV0LiIsZGVmYXVsdDoiJHpvb20ifSx0eXBlOnt0eXBlOiJlbnVtIix2YWx1ZXM6e2lkZW50aXR5Ontkb2M6IlJldHVybiB0aGUgaW5wdXQgdmFsdWUgYXMgdGhlIG91dHB1dCB2YWx1ZS4ifSxleHBvbmVudGlhbDp7ZG9jOiJHZW5lcmF0ZSBhbiBvdXRwdXQgYnkgaW50ZXJwb2xhdGluZyBiZXR3ZWVuIHN0b3BzIGp1c3QgbGVzcyB0aGFuIGFuZCBqdXN0IGdyZWF0ZXIgdGhhbiB0aGUgZnVuY3Rpb24gaW5wdXQuIn0saW50ZXJ2YWw6e2RvYzoiUmV0dXJuIHRoZSBvdXRwdXQgdmFsdWUgb2YgdGhlIHN0b3AganVzdCBsZXNzIHRoYW4gdGhlIGZ1bmN0aW9uIGlucHV0LiJ9LGNhdGVnb3JpY2FsOntkb2M6IlJldHVybiB0aGUgb3V0cHV0IHZhbHVlIG9mIHRoZSBzdG9wIGVxdWFsIHRvIHRoZSBmdW5jdGlvbiBpbnB1dC4ifX0sZG9jOiJUaGUgaW50ZXJwb2xhdGlvbiBzdHJhdGVneSB0byB1c2UgaW4gZnVuY3Rpb24gZXZhbHVhdGlvbi4iLGRlZmF1bHQ6ImV4cG9uZW50aWFsIn0sY29sb3JTcGFjZTp7dHlwZToiZW51bSIsdmFsdWVzOntyZ2I6e2RvYzoiVXNlIHRoZSBSR0IgY29sb3Igc3BhY2UgdG8gaW50ZXJwb2xhdGUgY29sb3IgdmFsdWVzIn0sbGFiOntkb2M6IlVzZSB0aGUgTEFCIGNvbG9yIHNwYWNlIHRvIGludGVycG9sYXRlIGNvbG9yIHZhbHVlcy4ifSxoY2w6e2RvYzoiVXNlIHRoZSBIQ0wgY29sb3Igc3BhY2UgdG8gaW50ZXJwb2xhdGUgY29sb3IgdmFsdWVzLCBpbnRlcnBvbGF0aW5nIHRoZSBIdWUsIENocm9tYSwgYW5kIEx1bWluYW5jZSBjaGFubmVscyBpbmRpdmlkdWFsbHkuIn19LGRvYzoiVGhlIGNvbG9yIHNwYWNlIGluIHdoaWNoIGNvbG9ycyBpbnRlcnBvbGF0ZWQuIEludGVycG9sYXRpbmcgY29sb3JzIGluIHBlcmNlcHR1YWwgY29sb3Igc3BhY2VzIGxpa2UgTEFCIGFuZCBIQ0wgdGVuZCB0byBwcm9kdWNlIGNvbG9yIHJhbXBzIHRoYXQgbG9vayBtb3JlIGNvbnNpc3RlbnQgYW5kIHByb2R1Y2UgY29sb3JzIHRoYXQgY2FuIGJlIGRpZmZlcmVudGlhdGVkIG1vcmUgZWFzaWx5IHRoYW4gdGhvc2UgaW50ZXJwb2xhdGVkIGluIFJHQiBzcGFjZS4iLGRlZmF1bHQ6InJnYiJ9LGRlZmF1bHQ6e3R5cGU6IioiLHJlcXVpcmVkOiExLGRvYzoiQSB2YWx1ZSB0byBzZXJ2ZSBhcyBhIGZhbGxiYWNrIGZ1bmN0aW9uIHJlc3VsdCB3aGVuIGEgdmFsdWUgaXNuJ3Qgb3RoZXJ3aXNlIGF2YWlsYWJsZS4gSXQgaXMgdXNlZCBpbiB0aGUgZm9sbG93aW5nIGNpcmN1bXN0YW5jZXM6XG4qIEluIGNhdGVnb3JpY2FsIGZ1bmN0aW9ucywgd2hlbiB0aGUgZmVhdHVyZSB2YWx1ZSBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgdGhlIHN0b3AgZG9tYWluIHZhbHVlcy5cbiogSW4gcHJvcGVydHkgYW5kIHpvb20tYW5kLXByb3BlcnR5IGZ1bmN0aW9ucywgd2hlbiBhIGZlYXR1cmUgZG9lcyBub3QgY29udGFpbiBhIHZhbHVlIGZvciB0aGUgc3BlY2lmaWVkIHByb3BlcnR5LlxuKiBJbiBpZGVudGl0eSBmdW5jdGlvbnMsIHdoZW4gdGhlIGZlYXR1cmUgdmFsdWUgaXMgbm90IHZhbGlkIGZvciB0aGUgc3R5bGUgcHJvcGVydHkgKGZvciBleGFtcGxlLCBpZiB0aGUgZnVuY3Rpb24gaXMgYmVpbmcgdXNlZCBmb3IgYSBgY2lyY2xlLWNvbG9yYCBwcm9wZXJ0eSBidXQgdGhlIGZlYXR1cmUgcHJvcGVydHkgdmFsdWUgaXMgbm90IGEgc3RyaW5nIG9yIG5vdCBhIHZhbGlkIGNvbG9yKS5cbiogSW4gaW50ZXJ2YWwgb3IgZXhwb25lbnRpYWwgcHJvcGVydHkgYW5kIHpvb20tYW5kLXByb3BlcnR5IGZ1bmN0aW9ucywgd2hlbiB0aGUgZmVhdHVyZSB2YWx1ZSBpcyBub3QgbnVtZXJpYy5cbklmIG5vIGRlZmF1bHQgaXMgcHJvdmlkZWQsIHRoZSBzdHlsZSBwcm9wZXJ0eSdzIGRlZmF1bHQgaXMgdXNlZCBpbiB0aGVzZSBjaXJjdW1zdGFuY2VzLiJ9fSxmdW5jdGlvbl9zdG9wOnt0eXBlOiJhcnJheSIsbWluaW11bTowLG1heGltdW06MjQsdmFsdWU6WyJudW1iZXIiLCJjb2xvciJdLGxlbmd0aDoyLGRvYzoiWm9vbSBsZXZlbCBhbmQgdmFsdWUgcGFpci4ifSxleHByZXNzaW9uOnt0eXBlOiJhcnJheSIsdmFsdWU6IioiLG1pbmltdW06MSxkb2M6IkFuIGV4cHJlc3Npb24gZGVmaW5lcyBhIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRhdGEtZHJpdmVuIHN0eWxlIHByb3BlcnRpZXMgb3IgZmVhdHVyZSBmaWx0ZXJzLiJ9LGV4cHJlc3Npb25fbmFtZTp7ZG9jOiIiLHR5cGU6ImVudW0iLHZhbHVlczp7bGV0Ontkb2M6J0JpbmRzIGV4cHJlc3Npb25zIHRvIG5hbWVkIHZhcmlhYmxlcywgd2hpY2ggY2FuIHRoZW4gYmUgcmVmZXJlbmNlZCBpbiB0aGUgcmVzdWx0IGV4cHJlc3Npb24gdXNpbmcgWyJ2YXIiLCAidmFyaWFibGVfbmFtZSJdLicsZ3JvdXA6IlZhcmlhYmxlIGJpbmRpbmciLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sdmFyOntkb2M6J1JlZmVyZW5jZXMgdmFyaWFibGUgYm91bmQgdXNpbmcgImxldCIuJyxncm91cDoiVmFyaWFibGUgYmluZGluZyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxsaXRlcmFsOntkb2M6IlByb3ZpZGVzIGEgbGl0ZXJhbCBhcnJheSBvciBvYmplY3QgdmFsdWUuIixncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sYXJyYXk6e2RvYzoiQXNzZXJ0cyB0aGF0IHRoZSBpbnB1dCBpcyBhbiBhcnJheSAob3B0aW9uYWxseSB3aXRoIGEgc3BlY2lmaWMgaXRlbSB0eXBlIGFuZCBsZW5ndGgpLiAgSWYsIHdoZW4gdGhlIGlucHV0IGV4cHJlc3Npb24gaXMgZXZhbHVhdGVkLCBpdCBpcyBub3Qgb2YgdGhlIGFzc2VydGVkIHR5cGUsIHRoZW4gdGhpcyBhc3NlcnRpb24gd2lsbCBjYXVzZSB0aGUgd2hvbGUgZXhwcmVzc2lvbiB0byBiZSBhYm9ydGVkLiIsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGF0Ontkb2M6IlJldHJpZXZlcyBhbiBpdGVtIGZyb20gYW4gYXJyYXkuIixncm91cDoiTG9va3VwIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGluOntkb2M6IkRldGVybWluZXMgd2hldGhlciBhbiBpdGVtIGV4aXN0cyBpbiBhbiBhcnJheSBvciBhIHN1YnN0cmluZyBleGlzdHMgaW4gYSBzdHJpbmcuIixncm91cDoiTG9va3VwIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIxLjYuMCIsYW5kcm9pZDoiOS4xLjAiLGlvczoiNS44LjAiLG1hY29zOiIwLjE1LjAifX19LCJpbmRleC1vZiI6e2RvYzoiUmV0dXJucyB0aGUgZmlyc3QgcG9zaXRpb24gYXQgd2hpY2ggYW4gaXRlbSBjYW4gYmUgZm91bmQgaW4gYW4gYXJyYXkgb3IgYSBzdWJzdHJpbmcgY2FuIGJlIGZvdW5kIGluIGEgc3RyaW5nLCBvciBgLTFgIGlmIHRoZSBpbnB1dCBjYW5ub3QgYmUgZm91bmQuIEFjY2VwdHMgYW4gb3B0aW9uYWwgaW5kZXggZnJvbSB3aGVyZSB0byBiZWdpbiB0aGUgc2VhcmNoLiIsZ3JvdXA6Ikxvb2t1cCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMS4xMC4wIn19fSxzbGljZTp7ZG9jOiJSZXR1cm5zIGFuIGl0ZW0gZnJvbSBhbiBhcnJheSBvciBhIHN1YnN0cmluZyBmcm9tIGEgc3RyaW5nIGZyb20gYSBzcGVjaWZpZWQgc3RhcnQgaW5kZXgsIG9yIGJldHdlZW4gYSBzdGFydCBpbmRleCBhbmQgYW4gZW5kIGluZGV4IGlmIHNldC4gVGhlIHJldHVybiB2YWx1ZSBpcyBpbmNsdXNpdmUgb2YgdGhlIHN0YXJ0IGluZGV4IGJ1dCBub3Qgb2YgdGhlIGVuZCBpbmRleC4iLGdyb3VwOiJMb29rdXAiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjEuMTAuMCJ9fX0sY2FzZTp7ZG9jOiJTZWxlY3RzIHRoZSBmaXJzdCBvdXRwdXQgd2hvc2UgY29ycmVzcG9uZGluZyB0ZXN0IGNvbmRpdGlvbiBldmFsdWF0ZXMgdG8gdHJ1ZSwgb3IgdGhlIGZhbGxiYWNrIHZhbHVlIG90aGVyd2lzZS4iLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxtYXRjaDp7ZG9jOidTZWxlY3RzIHRoZSBvdXRwdXQgd2hvc2UgbGFiZWwgdmFsdWUgbWF0Y2hlcyB0aGUgaW5wdXQgdmFsdWUsIG9yIHRoZSBmYWxsYmFjayB2YWx1ZSBpZiBubyBtYXRjaCBpcyBmb3VuZC4gVGhlIGlucHV0IGNhbiBiZSBhbnkgZXhwcmVzc2lvbiAoZS5nLiBgWyJnZXQiLCAiYnVpbGRpbmdfdHlwZSJdYCkuIEVhY2ggbGFiZWwgbXVzdCBiZSBlaXRoZXI6XG4gLSBhIHNpbmdsZSBsaXRlcmFsIHZhbHVlOyBvclxuIC0gYW4gYXJyYXkgb2YgbGl0ZXJhbCB2YWx1ZXMsIHdob3NlIHZhbHVlcyBtdXN0IGJlIGFsbCBzdHJpbmdzIG9yIGFsbCBudW1iZXJzIChlLmcuIGBbMTAwLCAxMDFdYCBvciBgWyJjIiwgImIiXWApLiBUaGUgaW5wdXQgbWF0Y2hlcyBpZiBhbnkgb2YgdGhlIHZhbHVlcyBpbiB0aGUgYXJyYXkgbWF0Y2hlcywgc2ltaWxhciB0byB0aGUgYCJpbiJgIG9wZXJhdG9yLlxuRWFjaCBsYWJlbCBtdXN0IGJlIHVuaXF1ZS4gSWYgdGhlIGlucHV0IHR5cGUgZG9lcyBub3QgbWF0Y2ggdGhlIHR5cGUgb2YgdGhlIGxhYmVscywgdGhlIHJlc3VsdCB3aWxsIGJlIHRoZSBmYWxsYmFjayB2YWx1ZS4nLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxjb2FsZXNjZTp7ZG9jOiJFdmFsdWF0ZXMgZWFjaCBleHByZXNzaW9uIGluIHR1cm4gdW50aWwgdGhlIGZpcnN0IG5vbi1udWxsIHZhbHVlIGlzIG9idGFpbmVkLCBhbmQgcmV0dXJucyB0aGF0IHZhbHVlLiIsZ3JvdXA6IkRlY2lzaW9uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHN0ZXA6e2RvYzonUHJvZHVjZXMgZGlzY3JldGUsIHN0ZXBwZWQgcmVzdWx0cyBieSBldmFsdWF0aW5nIGEgcGllY2V3aXNlLWNvbnN0YW50IGZ1bmN0aW9uIGRlZmluZWQgYnkgcGFpcnMgb2YgaW5wdXQgYW5kIG91dHB1dCB2YWx1ZXMgKCJzdG9wcyIpLiBUaGUgYGlucHV0YCBtYXkgYmUgYW55IG51bWVyaWMgZXhwcmVzc2lvbiAoZS5nLiwgYFsiZ2V0IiwgInBvcHVsYXRpb24iXWApLiBTdG9wIGlucHV0cyBtdXN0IGJlIG51bWVyaWMgbGl0ZXJhbHMgaW4gc3RyaWN0bHkgYXNjZW5kaW5nIG9yZGVyLiBSZXR1cm5zIHRoZSBvdXRwdXQgdmFsdWUgb2YgdGhlIHN0b3AganVzdCBsZXNzIHRoYW4gdGhlIGlucHV0LCBvciB0aGUgZmlyc3Qgb3V0cHV0IGlmIHRoZSBpbnB1dCBpcyBsZXNzIHRoYW4gdGhlIGZpcnN0IHN0b3AuJyxncm91cDoiUmFtcHMsIHNjYWxlcywgY3VydmVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQyLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGludGVycG9sYXRlOntkb2M6J1Byb2R1Y2VzIGNvbnRpbnVvdXMsIHNtb290aCByZXN1bHRzIGJ5IGludGVycG9sYXRpbmcgYmV0d2VlbiBwYWlycyBvZiBpbnB1dCBhbmQgb3V0cHV0IHZhbHVlcyAoInN0b3BzIikuIFRoZSBgaW5wdXRgIG1heSBiZSBhbnkgbnVtZXJpYyBleHByZXNzaW9uIChlLmcuLCBgWyJnZXQiLCAicG9wdWxhdGlvbiJdYCkuIFN0b3AgaW5wdXRzIG11c3QgYmUgbnVtZXJpYyBsaXRlcmFscyBpbiBzdHJpY3RseSBhc2NlbmRpbmcgb3JkZXIuIFRoZSBvdXRwdXQgdHlwZSBtdXN0IGJlIGBudW1iZXJgLCBgYXJyYXk8bnVtYmVyPmAsIG9yIGBjb2xvcmAuXG5cbkludGVycG9sYXRpb24gdHlwZXM6XG4tIGBbImxpbmVhciJdYDogSW50ZXJwb2xhdGVzIGxpbmVhcmx5IGJldHdlZW4gdGhlIHBhaXIgb2Ygc3RvcHMganVzdCBsZXNzIHRoYW4gYW5kIGp1c3QgZ3JlYXRlciB0aGFuIHRoZSBpbnB1dC5cbi0gYFsiZXhwb25lbnRpYWwiLCBiYXNlXWA6IEludGVycG9sYXRlcyBleHBvbmVudGlhbGx5IGJldHdlZW4gdGhlIHN0b3BzIGp1c3QgbGVzcyB0aGFuIGFuZCBqdXN0IGdyZWF0ZXIgdGhhbiB0aGUgaW5wdXQuIGBiYXNlYCBjb250cm9scyB0aGUgcmF0ZSBhdCB3aGljaCB0aGUgb3V0cHV0IGluY3JlYXNlczogaGlnaGVyIHZhbHVlcyBtYWtlIHRoZSBvdXRwdXQgaW5jcmVhc2UgbW9yZSB0b3dhcmRzIHRoZSBoaWdoIGVuZCBvZiB0aGUgcmFuZ2UuIFdpdGggdmFsdWVzIGNsb3NlIHRvIDEgdGhlIG91dHB1dCBpbmNyZWFzZXMgbGluZWFybHkuXG4tIGBbImN1YmljLWJlemllciIsIHgxLCB5MSwgeDIsIHkyXWA6IEludGVycG9sYXRlcyB1c2luZyB0aGUgY3ViaWMgYmV6aWVyIGN1cnZlIGRlZmluZWQgYnkgdGhlIGdpdmVuIGNvbnRyb2wgcG9pbnRzLicsZ3JvdXA6IlJhbXBzLCBzY2FsZXMsIGN1cnZlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40Mi4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiaW50ZXJwb2xhdGUtaGNsIjp7ZG9jOidQcm9kdWNlcyBjb250aW51b3VzLCBzbW9vdGggcmVzdWx0cyBieSBpbnRlcnBvbGF0aW5nIGJldHdlZW4gcGFpcnMgb2YgaW5wdXQgYW5kIG91dHB1dCB2YWx1ZXMgKCJzdG9wcyIpLiBXb3JrcyBsaWtlIGBpbnRlcnBvbGF0ZWAsIGJ1dCB0aGUgb3V0cHV0IHR5cGUgbXVzdCBiZSBgY29sb3JgLCBhbmQgdGhlIGludGVycG9sYXRpb24gaXMgcGVyZm9ybWVkIGluIHRoZSBIdWUtQ2hyb21hLUx1bWluYW5jZSBjb2xvciBzcGFjZS4nLGdyb3VwOiJSYW1wcywgc2NhbGVzLCBjdXJ2ZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDkuMCJ9fX0sImludGVycG9sYXRlLWxhYiI6e2RvYzonUHJvZHVjZXMgY29udGludW91cywgc21vb3RoIHJlc3VsdHMgYnkgaW50ZXJwb2xhdGluZyBiZXR3ZWVuIHBhaXJzIG9mIGlucHV0IGFuZCBvdXRwdXQgdmFsdWVzICgic3RvcHMiKS4gV29ya3MgbGlrZSBgaW50ZXJwb2xhdGVgLCBidXQgdGhlIG91dHB1dCB0eXBlIG11c3QgYmUgYGNvbG9yYCwgYW5kIHRoZSBpbnRlcnBvbGF0aW9uIGlzIHBlcmZvcm1lZCBpbiB0aGUgQ0lFTEFCIGNvbG9yIHNwYWNlLicsZ3JvdXA6IlJhbXBzLCBzY2FsZXMsIGN1cnZlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40OS4wIn19fSxsbjI6e2RvYzoiUmV0dXJucyBtYXRoZW1hdGljYWwgY29uc3RhbnQgbG4oMikuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxwaTp7ZG9jOiJSZXR1cm5zIHRoZSBtYXRoZW1hdGljYWwgY29uc3RhbnQgcGkuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxlOntkb2M6IlJldHVybnMgdGhlIG1hdGhlbWF0aWNhbCBjb25zdGFudCBlLiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sdHlwZW9mOntkb2M6IlJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSBvZiB0aGUgZ2l2ZW4gdmFsdWUuIixncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sc3RyaW5nOntkb2M6IkFzc2VydHMgdGhhdCB0aGUgaW5wdXQgdmFsdWUgaXMgYSBzdHJpbmcuIElmIG11bHRpcGxlIHZhbHVlcyBhcmUgcHJvdmlkZWQsIGVhY2ggb25lIGlzIGV2YWx1YXRlZCBpbiBvcmRlciB1bnRpbCBhIHN0cmluZyBpcyBvYnRhaW5lZC4gSWYgbm9uZSBvZiB0aGUgaW5wdXRzIGFyZSBzdHJpbmdzLCB0aGUgZXhwcmVzc2lvbiBpcyBhbiBlcnJvci4iLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxudW1iZXI6e2RvYzoiQXNzZXJ0cyB0aGF0IHRoZSBpbnB1dCB2YWx1ZSBpcyBhIG51bWJlci4gSWYgbXVsdGlwbGUgdmFsdWVzIGFyZSBwcm92aWRlZCwgZWFjaCBvbmUgaXMgZXZhbHVhdGVkIGluIG9yZGVyIHVudGlsIGEgbnVtYmVyIGlzIG9idGFpbmVkLiBJZiBub25lIG9mIHRoZSBpbnB1dHMgYXJlIG51bWJlcnMsIHRoZSBleHByZXNzaW9uIGlzIGFuIGVycm9yLiIsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGJvb2xlYW46e2RvYzoiQXNzZXJ0cyB0aGF0IHRoZSBpbnB1dCB2YWx1ZSBpcyBhIGJvb2xlYW4uIElmIG11bHRpcGxlIHZhbHVlcyBhcmUgcHJvdmlkZWQsIGVhY2ggb25lIGlzIGV2YWx1YXRlZCBpbiBvcmRlciB1bnRpbCBhIGJvb2xlYW4gaXMgb2J0YWluZWQuIElmIG5vbmUgb2YgdGhlIGlucHV0cyBhcmUgYm9vbGVhbnMsIHRoZSBleHByZXNzaW9uIGlzIGFuIGVycm9yLiIsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LG9iamVjdDp7ZG9jOiJBc3NlcnRzIHRoYXQgdGhlIGlucHV0IHZhbHVlIGlzIGFuIG9iamVjdC4gSWYgbXVsdGlwbGUgdmFsdWVzIGFyZSBwcm92aWRlZCwgZWFjaCBvbmUgaXMgZXZhbHVhdGVkIGluIG9yZGVyIHVudGlsIGFuIG9iamVjdCBpcyBvYnRhaW5lZC4gSWYgbm9uZSBvZiB0aGUgaW5wdXRzIGFyZSBvYmplY3RzLCB0aGUgZXhwcmVzc2lvbiBpcyBhbiBlcnJvci4iLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxjb2xsYXRvcjp7ZG9jOiJSZXR1cm5zIGEgYGNvbGxhdG9yYCBmb3IgdXNlIGluIGxvY2FsZS1kZXBlbmRlbnQgY29tcGFyaXNvbiBvcGVyYXRpb25zLiBUaGUgYGNhc2Utc2Vuc2l0aXZlYCBhbmQgYGRpYWNyaXRpYy1zZW5zaXRpdmVgIG9wdGlvbnMgZGVmYXVsdCB0byBgZmFsc2VgLiBUaGUgYGxvY2FsZWAgYXJndW1lbnQgc3BlY2lmaWVzIHRoZSBJRVRGIGxhbmd1YWdlIHRhZyBvZiB0aGUgbG9jYWxlIHRvIHVzZS4gSWYgbm9uZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgbG9jYWxlIGlzIHVzZWQuIElmIHRoZSByZXF1ZXN0ZWQgbG9jYWxlIGlzIG5vdCBhdmFpbGFibGUsIHRoZSBgY29sbGF0b3JgIHdpbGwgdXNlIGEgc3lzdGVtLWRlZmluZWQgZmFsbGJhY2sgbG9jYWxlLiBVc2UgYHJlc29sdmVkLWxvY2FsZWAgdG8gdGVzdCB0aGUgcmVzdWx0cyBvZiBsb2NhbGUgZmFsbGJhY2sgYmVoYXZpb3IuIixncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi41LjAiLGlvczoiNC4yLjAiLG1hY29zOiIwLjkuMCJ9fX0sZm9ybWF0Ontkb2M6J1JldHVybnMgYSBgZm9ybWF0dGVkYCBzdHJpbmcgZm9yIGRpc3BsYXlpbmcgbWl4ZWQtZm9ybWF0IHRleHQgaW4gdGhlIGB0ZXh0LWZpZWxkYCBwcm9wZXJ0eS4gVGhlIGlucHV0IG1heSBjb250YWluIGEgc3RyaW5nIGxpdGVyYWwgb3IgZXhwcmVzc2lvbiwgaW5jbHVkaW5nIGFuIFtgXCdpbWFnZVwnYF0oI3R5cGVzLWltYWdlKSBleHByZXNzaW9uLiBTdHJpbmdzIG1heSBiZSBmb2xsb3dlZCBieSBhIHN0eWxlIG92ZXJyaWRlIG9iamVjdCB0aGF0IHN1cHBvcnRzIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbi0gYCJ0ZXh0LWZvbnQiYDogT3ZlcnJpZGVzIHRoZSBmb250IHN0YWNrIHNwZWNpZmllZCBieSB0aGUgcm9vdCBsYXlvdXQgcHJvcGVydHkuXG4tIGAidGV4dC1jb2xvciJgOiBPdmVycmlkZXMgdGhlIGNvbG9yIHNwZWNpZmllZCBieSB0aGUgcm9vdCBwYWludCBwcm9wZXJ0eS5cbi0gYCJmb250LXNjYWxlImA6IEFwcGxpZXMgYSBzY2FsaW5nIGZhY3RvciBvbiBgdGV4dC1zaXplYCBhcyBzcGVjaWZpZWQgYnkgdGhlIHJvb3QgbGF5b3V0IHByb3BlcnR5LicsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQ4LjAiLGFuZHJvaWQ6IjYuNy4wIixpb3M6IjQuNi4wIixtYWNvczoiMC4xMi4wIn0sInRleHQtZm9udCI6e2pzOiIwLjQ4LjAiLGFuZHJvaWQ6IjYuNy4wIixpb3M6IjQuNi4wIixtYWNvczoiMC4xMi4wIn0sImZvbnQtc2NhbGUiOntqczoiMC40OC4wIixhbmRyb2lkOiI2LjcuMCIsaW9zOiI0LjYuMCIsbWFjb3M6IjAuMTIuMCJ9LCJ0ZXh0LWNvbG9yIjp7anM6IjEuMy4wIixhbmRyb2lkOiI3LjMuMCIsaW9zOiI0LjEwLjAiLG1hY29zOiIwLjE0LjAifSxpbWFnZTp7anM6IjEuNi4wIixhbmRyb2lkOiI4LjYuMCIsaW9zOiI1LjcuMCIsbWFjb3M6IjAuMTUuMCJ9fX0saW1hZ2U6e2RvYzoiUmV0dXJucyBhbiBgaW1hZ2VgIHR5cGUgZm9yIHVzZSBpbiBgaWNvbi1pbWFnZWAsIGAqLXBhdHRlcm5gIGVudHJpZXMgYW5kIGFzIGEgc2VjdGlvbiBpbiB0aGUgYGZvcm1hdGAgZXhwcmVzc2lvbi4gSWYgc2V0LCB0aGUgYGltYWdlYCBhcmd1bWVudCB3aWxsIGNoZWNrIHRoYXQgdGhlIHJlcXVlc3RlZCBpbWFnZSBleGlzdHMgaW4gdGhlIHN0eWxlIGFuZCB3aWxsIHJldHVybiBlaXRoZXIgdGhlIHJlc29sdmVkIGltYWdlIG5hbWUgb3IgYG51bGxgLCBkZXBlbmRpbmcgb24gd2hldGhlciBvciBub3QgdGhlIGltYWdlIGlzIGN1cnJlbnRseSBpbiB0aGUgc3R5bGUuIFRoaXMgdmFsaWRhdGlvbiBwcm9jZXNzIGlzIHN5bmNocm9ub3VzIGFuZCByZXF1aXJlcyB0aGUgaW1hZ2UgdG8gaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBzdHlsZSBiZWZvcmUgcmVxdWVzdGluZyBpdCBpbiB0aGUgYGltYWdlYCBhcmd1bWVudC4iLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMS40LjAiLGFuZHJvaWQ6IjguNi4wIixpb3M6IjUuNy4wIixtYWNvczoiMC4xNS4wIn19fSwibnVtYmVyLWZvcm1hdCI6e2RvYzoiQ29udmVydHMgdGhlIGlucHV0IG51bWJlciBpbnRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nIHRoZSBwcm92aWRpbmcgZm9ybWF0dGluZyBydWxlcy4gSWYgc2V0LCB0aGUgYGxvY2FsZWAgYXJndW1lbnQgc3BlY2lmaWVzIHRoZSBsb2NhbGUgdG8gdXNlLCBhcyBhIEJDUCA0NyBsYW5ndWFnZSB0YWcuIElmIHNldCwgdGhlIGBjdXJyZW5jeWAgYXJndW1lbnQgc3BlY2lmaWVzIGFuIElTTyA0MjE3IGNvZGUgdG8gdXNlIGZvciBjdXJyZW5jeS1zdHlsZSBmb3JtYXR0aW5nLiBJZiBzZXQsIHRoZSBgbWluLWZyYWN0aW9uLWRpZ2l0c2AgYW5kIGBtYXgtZnJhY3Rpb24tZGlnaXRzYCBhcmd1bWVudHMgc3BlY2lmeSB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBudW1iZXIgb2YgZnJhY3Rpb25hbCBkaWdpdHMgdG8gaW5jbHVkZS4iLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC41NC4wIn19fSwidG8tc3RyaW5nIjp7ZG9jOidDb252ZXJ0cyB0aGUgaW5wdXQgdmFsdWUgdG8gYSBzdHJpbmcuIElmIHRoZSBpbnB1dCBpcyBgbnVsbGAsIHRoZSByZXN1bHQgaXMgYCIiYC4gSWYgdGhlIGlucHV0IGlzIGEgYm9vbGVhbiwgdGhlIHJlc3VsdCBpcyBgInRydWUiYCBvciBgImZhbHNlImAuIElmIHRoZSBpbnB1dCBpcyBhIG51bWJlciwgaXQgaXMgY29udmVydGVkIHRvIGEgc3RyaW5nIGFzIHNwZWNpZmllZCBieSB0aGUgWyJOdW1iZXJUb1N0cmluZyIgYWxnb3JpdGhtXShodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10b3N0cmluZy1hcHBsaWVkLXRvLXRoZS1udW1iZXItdHlwZSkgb2YgdGhlIEVDTUFTY3JpcHQgTGFuZ3VhZ2UgU3BlY2lmaWNhdGlvbi4gSWYgdGhlIGlucHV0IGlzIGEgY29sb3IsIGl0IGlzIGNvbnZlcnRlZCB0byBhIHN0cmluZyBvZiB0aGUgZm9ybSBgInJnYmEocixnLGIsYSkiYCwgd2hlcmUgYHJgLCBgZ2AsIGFuZCBgYmAgYXJlIG51bWVyYWxzIHJhbmdpbmcgZnJvbSAwIHRvIDI1NSwgYW5kIGBhYCByYW5nZXMgZnJvbSAwIHRvIDEuIE90aGVyd2lzZSwgdGhlIGlucHV0IGlzIGNvbnZlcnRlZCB0byBhIHN0cmluZyBpbiB0aGUgZm9ybWF0IHNwZWNpZmllZCBieSB0aGUgW2BKU09OLnN0cmluZ2lmeWBdKGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWpzb24uc3RyaW5naWZ5KSBmdW5jdGlvbiBvZiB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBTcGVjaWZpY2F0aW9uLicsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LCJ0by1udW1iZXIiOntkb2M6J0NvbnZlcnRzIHRoZSBpbnB1dCB2YWx1ZSB0byBhIG51bWJlciwgaWYgcG9zc2libGUuIElmIHRoZSBpbnB1dCBpcyBgbnVsbGAgb3IgYGZhbHNlYCwgdGhlIHJlc3VsdCBpcyAwLiBJZiB0aGUgaW5wdXQgaXMgYHRydWVgLCB0aGUgcmVzdWx0IGlzIDEuIElmIHRoZSBpbnB1dCBpcyBhIHN0cmluZywgaXQgaXMgY29udmVydGVkIHRvIGEgbnVtYmVyIGFzIHNwZWNpZmllZCBieSB0aGUgWyJUb051bWJlciBBcHBsaWVkIHRvIHRoZSBTdHJpbmcgVHlwZSIgYWxnb3JpdGhtXShodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10b251bWJlci1hcHBsaWVkLXRvLXRoZS1zdHJpbmctdHlwZSkgb2YgdGhlIEVDTUFTY3JpcHQgTGFuZ3VhZ2UgU3BlY2lmaWNhdGlvbi4gSWYgbXVsdGlwbGUgdmFsdWVzIGFyZSBwcm92aWRlZCwgZWFjaCBvbmUgaXMgZXZhbHVhdGVkIGluIG9yZGVyIHVudGlsIHRoZSBmaXJzdCBzdWNjZXNzZnVsIGNvbnZlcnNpb24gaXMgb2J0YWluZWQuIElmIG5vbmUgb2YgdGhlIGlucHV0cyBjYW4gYmUgY29udmVydGVkLCB0aGUgZXhwcmVzc2lvbiBpcyBhbiBlcnJvci4nLGdyb3VwOiJUeXBlcyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwidG8tYm9vbGVhbiI6e2RvYzoiQ29udmVydHMgdGhlIGlucHV0IHZhbHVlIHRvIGEgYm9vbGVhbi4gVGhlIHJlc3VsdCBpcyBgZmFsc2VgIHdoZW4gdGhlbiBpbnB1dCBpcyBhbiBlbXB0eSBzdHJpbmcsIDAsIGBmYWxzZWAsIGBudWxsYCwgb3IgYE5hTmA7IG90aGVyd2lzZSBpdCBpcyBgdHJ1ZWAuIixncm91cDoiVHlwZXMiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sInRvLXJnYmEiOntkb2M6IlJldHVybnMgYSBmb3VyLWVsZW1lbnQgYXJyYXkgY29udGFpbmluZyB0aGUgaW5wdXQgY29sb3IncyByZWQsIGdyZWVuLCBibHVlLCBhbmQgYWxwaGEgY29tcG9uZW50cywgaW4gdGhhdCBvcmRlci4iLGdyb3VwOiJDb2xvciIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwidG8tY29sb3IiOntkb2M6IkNvbnZlcnRzIHRoZSBpbnB1dCB2YWx1ZSB0byBhIGNvbG9yLiBJZiBtdWx0aXBsZSB2YWx1ZXMgYXJlIHByb3ZpZGVkLCBlYWNoIG9uZSBpcyBldmFsdWF0ZWQgaW4gb3JkZXIgdW50aWwgdGhlIGZpcnN0IHN1Y2Nlc3NmdWwgY29udmVyc2lvbiBpcyBvYnRhaW5lZC4gSWYgbm9uZSBvZiB0aGUgaW5wdXRzIGNhbiBiZSBjb252ZXJ0ZWQsIHRoZSBleHByZXNzaW9uIGlzIGFuIGVycm9yLiIsZ3JvdXA6IlR5cGVzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHJnYjp7ZG9jOiJDcmVhdGVzIGEgY29sb3IgdmFsdWUgZnJvbSByZWQsIGdyZWVuLCBhbmQgYmx1ZSBjb21wb25lbnRzLCB3aGljaCBtdXN0IHJhbmdlIGJldHdlZW4gMCBhbmQgMjU1LCBhbmQgYW4gYWxwaGEgY29tcG9uZW50IG9mIDEuIElmIGFueSBjb21wb25lbnQgaXMgb3V0IG9mIHJhbmdlLCB0aGUgZXhwcmVzc2lvbiBpcyBhbiBlcnJvci4iLGdyb3VwOiJDb2xvciIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxyZ2JhOntkb2M6IkNyZWF0ZXMgYSBjb2xvciB2YWx1ZSBmcm9tIHJlZCwgZ3JlZW4sIGJsdWUgY29tcG9uZW50cywgd2hpY2ggbXVzdCByYW5nZSBiZXR3ZWVuIDAgYW5kIDI1NSwgYW5kIGFuIGFscGhhIGNvbXBvbmVudCB3aGljaCBtdXN0IHJhbmdlIGJldHdlZW4gMCBhbmQgMS4gSWYgYW55IGNvbXBvbmVudCBpcyBvdXQgb2YgcmFuZ2UsIHRoZSBleHByZXNzaW9uIGlzIGFuIGVycm9yLiIsZ3JvdXA6IkNvbG9yIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGdldDp7ZG9jOiJSZXRyaWV2ZXMgYSBwcm9wZXJ0eSB2YWx1ZSBmcm9tIHRoZSBjdXJyZW50IGZlYXR1cmUncyBwcm9wZXJ0aWVzLCBvciBmcm9tIGFub3RoZXIgb2JqZWN0IGlmIGEgc2Vjb25kIGFyZ3VtZW50IGlzIHByb3ZpZGVkLiBSZXR1cm5zIG51bGwgaWYgdGhlIHJlcXVlc3RlZCBwcm9wZXJ0eSBpcyBtaXNzaW5nLiIsZ3JvdXA6Ikxvb2t1cCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxoYXM6e2RvYzoiVGVzdHMgZm9yIHRoZSBwcmVzZW5jZSBvZiBhbiBwcm9wZXJ0eSB2YWx1ZSBpbiB0aGUgY3VycmVudCBmZWF0dXJlJ3MgcHJvcGVydGllcywgb3IgZnJvbSBhbm90aGVyIG9iamVjdCBpZiBhIHNlY29uZCBhcmd1bWVudCBpcyBwcm92aWRlZC4iLGdyb3VwOiJMb29rdXAiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sbGVuZ3RoOntkb2M6IkdldHMgdGhlIGxlbmd0aCBvZiBhbiBhcnJheSBvciBzdHJpbmcuIixncm91cDoiTG9va3VwIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHByb3BlcnRpZXM6e2RvYzonR2V0cyB0aGUgZmVhdHVyZSBwcm9wZXJ0aWVzIG9iamVjdC4gIE5vdGUgdGhhdCBpbiBzb21lIGNhc2VzLCBpdCBtYXkgYmUgbW9yZSBlZmZpY2llbnQgdG8gdXNlIFsiZ2V0IiwgInByb3BlcnR5X25hbWUiXSBkaXJlY3RseS4nLGdyb3VwOiJGZWF0dXJlIGRhdGEiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sImZlYXR1cmUtc3RhdGUiOntkb2M6IlJldHJpZXZlcyBhIHByb3BlcnR5IHZhbHVlIGZyb20gdGhlIGN1cnJlbnQgZmVhdHVyZSdzIHN0YXRlLiBSZXR1cm5zIG51bGwgaWYgdGhlIHJlcXVlc3RlZCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCBvbiB0aGUgZmVhdHVyZSdzIHN0YXRlLiBBIGZlYXR1cmUncyBzdGF0ZSBpcyBub3QgcGFydCBvZiB0aGUgR2VvSlNPTiBvciB2ZWN0b3IgdGlsZSBkYXRhLCBhbmQgbXVzdCBiZSBzZXQgcHJvZ3JhbW1hdGljYWxseSBvbiBlYWNoIGZlYXR1cmUuIEZlYXR1cmVzIGFyZSBpZGVudGlmaWVkIGJ5IHRoZWlyIGBpZGAgYXR0cmlidXRlLCB3aGljaCBtdXN0IGJlIGFuIGludGVnZXIgb3IgYSBzdHJpbmcgdGhhdCBjYW4gYmUgY2FzdCB0byBhbiBpbnRlZ2VyLiBOb3RlIHRoYXQgW1wiZmVhdHVyZS1zdGF0ZVwiXSBjYW4gb25seSBiZSB1c2VkIHdpdGggcGFpbnQgcHJvcGVydGllcyB0aGF0IHN1cHBvcnQgZGF0YS1kcml2ZW4gc3R5bGluZy4iLGdyb3VwOiJGZWF0dXJlIGRhdGEiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDYuMCJ9fX0sImdlb21ldHJ5LXR5cGUiOntkb2M6IkdldHMgdGhlIGZlYXR1cmUncyBnZW9tZXRyeSB0eXBlOiBgUG9pbnRgLCBgTXVsdGlQb2ludGAsIGBMaW5lU3RyaW5nYCwgYE11bHRpTGluZVN0cmluZ2AsIGBQb2x5Z29uYCwgYE11bHRpUG9seWdvbmAuIixncm91cDoiRmVhdHVyZSBkYXRhIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGlkOntkb2M6IkdldHMgdGhlIGZlYXR1cmUncyBpZCwgaWYgaXQgaGFzIG9uZS4iLGdyb3VwOiJGZWF0dXJlIGRhdGEiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sem9vbTp7ZG9jOidHZXRzIHRoZSBjdXJyZW50IHpvb20gbGV2ZWwuICBOb3RlIHRoYXQgaW4gc3R5bGUgbGF5b3V0IGFuZCBwYWludCBwcm9wZXJ0aWVzLCBbInpvb20iXSBtYXkgb25seSBhcHBlYXIgYXMgdGhlIGlucHV0IHRvIGEgdG9wLWxldmVsICJzdGVwIiBvciAiaW50ZXJwb2xhdGUiIGV4cHJlc3Npb24uJyxncm91cDoiWm9vbSIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiaGVhdG1hcC1kZW5zaXR5Ijp7ZG9jOiJHZXRzIHRoZSBrZXJuZWwgZGVuc2l0eSBlc3RpbWF0aW9uIG9mIGEgcGl4ZWwgaW4gYSBoZWF0bWFwIGxheWVyLCB3aGljaCBpcyBhIHJlbGF0aXZlIG1lYXN1cmUgb2YgaG93IG1hbnkgZGF0YSBwb2ludHMgYXJlIGNyb3dkZWQgYXJvdW5kIGEgcGFydGljdWxhciBwaXhlbC4gQ2FuIG9ubHkgYmUgdXNlZCBpbiB0aGUgYGhlYXRtYXAtY29sb3JgIHByb3BlcnR5LiIsZ3JvdXA6IkhlYXRtYXAiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sImxpbmUtcHJvZ3Jlc3MiOntkb2M6IkdldHMgdGhlIHByb2dyZXNzIGFsb25nIGEgZ3JhZGllbnQgbGluZS4gQ2FuIG9ubHkgYmUgdXNlZCBpbiB0aGUgYGxpbmUtZ3JhZGllbnRgIHByb3BlcnR5LiIsZ3JvdXA6IkZlYXR1cmUgZGF0YSIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjUuMCIsaW9zOiI0LjYuMCIsbWFjb3M6IjAuMTIuMCJ9fX0sYWNjdW11bGF0ZWQ6e2RvYzoiR2V0cyB0aGUgdmFsdWUgb2YgYSBjbHVzdGVyIHByb3BlcnR5IGFjY3VtdWxhdGVkIHNvIGZhci4gQ2FuIG9ubHkgYmUgdXNlZCBpbiB0aGUgYGNsdXN0ZXJQcm9wZXJ0aWVzYCBvcHRpb24gb2YgYSBjbHVzdGVyZWQgR2VvSlNPTiBzb3VyY2UuIixncm91cDoiRmVhdHVyZSBkYXRhIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjUzLjAifX19LCIrIjp7ZG9jOiJSZXR1cm5zIHRoZSBzdW0gb2YgdGhlIGlucHV0cy4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LCIqIjp7ZG9jOiJSZXR1cm5zIHRoZSBwcm9kdWN0IG9mIHRoZSBpbnB1dHMuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiLSI6e2RvYzoiRm9yIHR3byBpbnB1dHMsIHJldHVybnMgdGhlIHJlc3VsdCBvZiBzdWJ0cmFjdGluZyB0aGUgc2Vjb25kIGlucHV0IGZyb20gdGhlIGZpcnN0LiBGb3IgYSBzaW5nbGUgaW5wdXQsIHJldHVybnMgdGhlIHJlc3VsdCBvZiBzdWJ0cmFjdGluZyBpdCBmcm9tIDAuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiLyI6e2RvYzoiUmV0dXJucyB0aGUgcmVzdWx0IG9mIGZsb2F0aW5nIHBvaW50IGRpdmlzaW9uIG9mIHRoZSBmaXJzdCBpbnB1dCBieSB0aGUgc2Vjb25kLiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sIiUiOntkb2M6IlJldHVybnMgdGhlIHJlbWFpbmRlciBhZnRlciBpbnRlZ2VyIGRpdmlzaW9uIG9mIHRoZSBmaXJzdCBpbnB1dCBieSB0aGUgc2Vjb25kLiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sIl4iOntkb2M6IlJldHVybnMgdGhlIHJlc3VsdCBvZiByYWlzaW5nIHRoZSBmaXJzdCBpbnB1dCB0byB0aGUgcG93ZXIgc3BlY2lmaWVkIGJ5IHRoZSBzZWNvbmQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxzcXJ0Ontkb2M6IlJldHVybnMgdGhlIHNxdWFyZSByb290IG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQyLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGxvZzEwOntkb2M6IlJldHVybnMgdGhlIGJhc2UtdGVuIGxvZ2FyaXRobSBvZiB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxsbjp7ZG9jOiJSZXR1cm5zIHRoZSBuYXR1cmFsIGxvZ2FyaXRobSBvZiB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxsb2cyOntkb2M6IlJldHVybnMgdGhlIGJhc2UtdHdvIGxvZ2FyaXRobSBvZiB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxzaW46e2RvYzoiUmV0dXJucyB0aGUgc2luZSBvZiB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxjb3M6e2RvYzoiUmV0dXJucyB0aGUgY29zaW5lIG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LHRhbjp7ZG9jOiJSZXR1cm5zIHRoZSB0YW5nZW50IG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGFzaW46e2RvYzoiUmV0dXJucyB0aGUgYXJjc2luZSBvZiB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxhY29zOntkb2M6IlJldHVybnMgdGhlIGFyY2Nvc2luZSBvZiB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxhdGFuOntkb2M6IlJldHVybnMgdGhlIGFyY3RhbmdlbnQgb2YgdGhlIGlucHV0LiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sbWluOntkb2M6IlJldHVybnMgdGhlIG1pbmltdW0gdmFsdWUgb2YgdGhlIGlucHV0cy4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LG1heDp7ZG9jOiJSZXR1cm5zIHRoZSBtYXhpbXVtIHZhbHVlIG9mIHRoZSBpbnB1dHMuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxyb3VuZDp7ZG9jOidSb3VuZHMgdGhlIGlucHV0IHRvIHRoZSBuZWFyZXN0IGludGVnZXIuIEhhbGZ3YXkgdmFsdWVzIGFyZSByb3VuZGVkIGF3YXkgZnJvbSB6ZXJvLiBGb3IgZXhhbXBsZSwgYFsicm91bmQiLCAtMS41XWAgZXZhbHVhdGVzIHRvIC0yLicsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sYWJzOntkb2M6IlJldHVybnMgdGhlIGFic29sdXRlIHZhbHVlIG9mIHRoZSBpbnB1dC4iLGdyb3VwOiJNYXRoIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQ1LjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGNlaWw6e2RvYzoiUmV0dXJucyB0aGUgc21hbGxlc3QgaW50ZWdlciB0aGF0IGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgaW5wdXQuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSxmbG9vcjp7ZG9jOiJSZXR1cm5zIHRoZSBsYXJnZXN0IGludGVnZXIgdGhhdCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGlucHV0LiIsZ3JvdXA6Ik1hdGgiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sZGlzdGFuY2U6e2RvYzoiUmV0dXJucyB0aGUgc2hvcnRlc3QgZGlzdGFuY2UgaW4gbWV0ZXJzIGJldHdlZW4gdGhlIGV2YWx1YXRlZCBmZWF0dXJlIGFuZCB0aGUgaW5wdXQgZ2VvbWV0cnkuIFRoZSBpbnB1dCB2YWx1ZSBjYW4gYmUgYSB2YWxpZCBHZW9KU09OIG9mIHR5cGUgYFBvaW50YCwgYE11bHRpUG9pbnRgLCBgTGluZVN0cmluZ2AsIGBNdWx0aUxpbmVTdHJpbmdgLCBgUG9seWdvbmAsIGBNdWx0aVBvbHlnb25gLCBgRmVhdHVyZWAsIG9yIGBGZWF0dXJlQ29sbGVjdGlvbmAuIERpc3RhbmNlIHZhbHVlcyByZXR1cm5lZCBtYXkgdmFyeSBpbiBwcmVjaXNpb24gZHVlIHRvIGxvc3MgaW4gcHJlY2lzaW9uIGZyb20gZW5jb2RpbmcgZ2VvbWV0cmllcywgcGFydGljdWxhcmx5IGJlbG93IHpvb20gbGV2ZWwgMTMuIixncm91cDoiTWF0aCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOnthbmRyb2lkOiI5LjIuMCIsaW9zOiI1LjkuMCIsbWFjb3M6IjAuMTYuMCJ9fX0sIj09Ijp7ZG9jOiJSZXR1cm5zIGB0cnVlYCBpZiB0aGUgaW5wdXQgdmFsdWVzIGFyZSBlcXVhbCwgYGZhbHNlYCBvdGhlcndpc2UuIFRoZSBjb21wYXJpc29uIGlzIHN0cmljdGx5IHR5cGVkOiB2YWx1ZXMgb2YgZGlmZmVyZW50IHJ1bnRpbWUgdHlwZXMgYXJlIGFsd2F5cyBjb25zaWRlcmVkIHVuZXF1YWwuIENhc2VzIHdoZXJlIHRoZSB0eXBlcyBhcmUga25vd24gdG8gYmUgZGlmZmVyZW50IGF0IHBhcnNlIHRpbWUgYXJlIGNvbnNpZGVyZWQgaW52YWxpZCBhbmQgd2lsbCBwcm9kdWNlIGEgcGFyc2UgZXJyb3IuIEFjY2VwdHMgYW4gb3B0aW9uYWwgYGNvbGxhdG9yYCBhcmd1bWVudCB0byBjb250cm9sIGxvY2FsZS1kZXBlbmRlbnQgc3RyaW5nIGNvbXBhcmlzb25zLiIsZ3JvdXA6IkRlY2lzaW9uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifSxjb2xsYXRvcjp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi41LjAiLGlvczoiNC4yLjAiLG1hY29zOiIwLjkuMCJ9fX0sIiE9Ijp7ZG9jOiJSZXR1cm5zIGB0cnVlYCBpZiB0aGUgaW5wdXQgdmFsdWVzIGFyZSBub3QgZXF1YWwsIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGUgY29tcGFyaXNvbiBpcyBzdHJpY3RseSB0eXBlZDogdmFsdWVzIG9mIGRpZmZlcmVudCBydW50aW1lIHR5cGVzIGFyZSBhbHdheXMgY29uc2lkZXJlZCB1bmVxdWFsLiBDYXNlcyB3aGVyZSB0aGUgdHlwZXMgYXJlIGtub3duIHRvIGJlIGRpZmZlcmVudCBhdCBwYXJzZSB0aW1lIGFyZSBjb25zaWRlcmVkIGludmFsaWQgYW5kIHdpbGwgcHJvZHVjZSBhIHBhcnNlIGVycm9yLiBBY2NlcHRzIGFuIG9wdGlvbmFsIGBjb2xsYXRvcmAgYXJndW1lbnQgdG8gY29udHJvbCBsb2NhbGUtZGVwZW5kZW50IHN0cmluZyBjb21wYXJpc29ucy4iLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn0sY29sbGF0b3I6e2pzOiIwLjQ1LjAiLGFuZHJvaWQ6IjYuNS4wIixpb3M6IjQuMi4wIixtYWNvczoiMC45LjAifX19LCI+Ijp7ZG9jOiJSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmlyc3QgaW5wdXQgaXMgc3RyaWN0bHkgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQsIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGUgYXJndW1lbnRzIGFyZSByZXF1aXJlZCB0byBiZSBlaXRoZXIgYm90aCBzdHJpbmdzIG9yIGJvdGggbnVtYmVyczsgaWYgZHVyaW5nIGV2YWx1YXRpb24gdGhleSBhcmUgbm90LCBleHByZXNzaW9uIGV2YWx1YXRpb24gcHJvZHVjZXMgYW4gZXJyb3IuIENhc2VzIHdoZXJlIHRoaXMgY29uc3RyYWludCBpcyBrbm93biBub3QgdG8gaG9sZCBhdCBwYXJzZSB0aW1lIGFyZSBjb25zaWRlcmVkIGluIHZhbGlkIGFuZCB3aWxsIHByb2R1Y2UgYSBwYXJzZSBlcnJvci4gQWNjZXB0cyBhbiBvcHRpb25hbCBgY29sbGF0b3JgIGFyZ3VtZW50IHRvIGNvbnRyb2wgbG9jYWxlLWRlcGVuZGVudCBzdHJpbmcgY29tcGFyaXNvbnMuIixncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9LGNvbGxhdG9yOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjUuMCIsaW9zOiI0LjIuMCIsbWFjb3M6IjAuOS4wIn19fSwiPCI6e2RvYzoiUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZpcnN0IGlucHV0IGlzIHN0cmljdGx5IGxlc3MgdGhhbiB0aGUgc2Vjb25kLCBgZmFsc2VgIG90aGVyd2lzZS4gVGhlIGFyZ3VtZW50cyBhcmUgcmVxdWlyZWQgdG8gYmUgZWl0aGVyIGJvdGggc3RyaW5ncyBvciBib3RoIG51bWJlcnM7IGlmIGR1cmluZyBldmFsdWF0aW9uIHRoZXkgYXJlIG5vdCwgZXhwcmVzc2lvbiBldmFsdWF0aW9uIHByb2R1Y2VzIGFuIGVycm9yLiBDYXNlcyB3aGVyZSB0aGlzIGNvbnN0cmFpbnQgaXMga25vd24gbm90IHRvIGhvbGQgYXQgcGFyc2UgdGltZSBhcmUgY29uc2lkZXJlZCBpbiB2YWxpZCBhbmQgd2lsbCBwcm9kdWNlIGEgcGFyc2UgZXJyb3IuIEFjY2VwdHMgYW4gb3B0aW9uYWwgYGNvbGxhdG9yYCBhcmd1bWVudCB0byBjb250cm9sIGxvY2FsZS1kZXBlbmRlbnQgc3RyaW5nIGNvbXBhcmlzb25zLiIsZ3JvdXA6IkRlY2lzaW9uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifSxjb2xsYXRvcjp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi41LjAiLGlvczoiNC4yLjAiLG1hY29zOiIwLjkuMCJ9fX0sIj49Ijp7ZG9jOiJSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmlyc3QgaW5wdXQgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzZWNvbmQsIGBmYWxzZWAgb3RoZXJ3aXNlLiBUaGUgYXJndW1lbnRzIGFyZSByZXF1aXJlZCB0byBiZSBlaXRoZXIgYm90aCBzdHJpbmdzIG9yIGJvdGggbnVtYmVyczsgaWYgZHVyaW5nIGV2YWx1YXRpb24gdGhleSBhcmUgbm90LCBleHByZXNzaW9uIGV2YWx1YXRpb24gcHJvZHVjZXMgYW4gZXJyb3IuIENhc2VzIHdoZXJlIHRoaXMgY29uc3RyYWludCBpcyBrbm93biBub3QgdG8gaG9sZCBhdCBwYXJzZSB0aW1lIGFyZSBjb25zaWRlcmVkIGluIHZhbGlkIGFuZCB3aWxsIHByb2R1Y2UgYSBwYXJzZSBlcnJvci4gQWNjZXB0cyBhbiBvcHRpb25hbCBgY29sbGF0b3JgIGFyZ3VtZW50IHRvIGNvbnRyb2wgbG9jYWxlLWRlcGVuZGVudCBzdHJpbmcgY29tcGFyaXNvbnMuIixncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9LGNvbGxhdG9yOntqczoiMC40NS4wIixhbmRyb2lkOiI2LjUuMCIsaW9zOiI0LjIuMCIsbWFjb3M6IjAuOS4wIn19fSwiPD0iOntkb2M6IlJldHVybnMgYHRydWVgIGlmIHRoZSBmaXJzdCBpbnB1dCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlY29uZCwgYGZhbHNlYCBvdGhlcndpc2UuIFRoZSBhcmd1bWVudHMgYXJlIHJlcXVpcmVkIHRvIGJlIGVpdGhlciBib3RoIHN0cmluZ3Mgb3IgYm90aCBudW1iZXJzOyBpZiBkdXJpbmcgZXZhbHVhdGlvbiB0aGV5IGFyZSBub3QsIGV4cHJlc3Npb24gZXZhbHVhdGlvbiBwcm9kdWNlcyBhbiBlcnJvci4gQ2FzZXMgd2hlcmUgdGhpcyBjb25zdHJhaW50IGlzIGtub3duIG5vdCB0byBob2xkIGF0IHBhcnNlIHRpbWUgYXJlIGNvbnNpZGVyZWQgaW4gdmFsaWQgYW5kIHdpbGwgcHJvZHVjZSBhIHBhcnNlIGVycm9yLiBBY2NlcHRzIGFuIG9wdGlvbmFsIGBjb2xsYXRvcmAgYXJndW1lbnQgdG8gY29udHJvbCBsb2NhbGUtZGVwZW5kZW50IHN0cmluZyBjb21wYXJpc29ucy4iLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn0sY29sbGF0b3I6e2pzOiIwLjQ1LjAiLGFuZHJvaWQ6IjYuNS4wIixpb3M6IjQuMi4wIixtYWNvczoiMC45LjAifX19LGFsbDp7ZG9jOiJSZXR1cm5zIGB0cnVlYCBpZiBhbGwgdGhlIGlucHV0cyBhcmUgYHRydWVgLCBgZmFsc2VgIG90aGVyd2lzZS4gVGhlIGlucHV0cyBhcmUgZXZhbHVhdGVkIGluIG9yZGVyLCBhbmQgZXZhbHVhdGlvbiBpcyBzaG9ydC1jaXJjdWl0aW5nOiBvbmNlIGFuIGlucHV0IGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGBmYWxzZWAsIHRoZSByZXN1bHQgaXMgYGZhbHNlYCBhbmQgbm8gZnVydGhlciBpbnB1dCBleHByZXNzaW9ucyBhcmUgZXZhbHVhdGVkLiIsZ3JvdXA6IkRlY2lzaW9uIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGFueTp7ZG9jOiJSZXR1cm5zIGB0cnVlYCBpZiBhbnkgb2YgdGhlIGlucHV0cyBhcmUgYHRydWVgLCBgZmFsc2VgIG90aGVyd2lzZS4gVGhlIGlucHV0cyBhcmUgZXZhbHVhdGVkIGluIG9yZGVyLCBhbmQgZXZhbHVhdGlvbiBpcyBzaG9ydC1jaXJjdWl0aW5nOiBvbmNlIGFuIGlucHV0IGV4cHJlc3Npb24gZXZhbHVhdGVzIHRvIGB0cnVlYCwgdGhlIHJlc3VsdCBpcyBgdHJ1ZWAgYW5kIG5vIGZ1cnRoZXIgaW5wdXQgZXhwcmVzc2lvbnMgYXJlIGV2YWx1YXRlZC4iLGdyb3VwOiJEZWNpc2lvbiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwiISI6e2RvYzoiTG9naWNhbCBuZWdhdGlvbi4gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGlucHV0IGlzIGBmYWxzZWAsIGFuZCBgZmFsc2VgIGlmIHRoZSBpbnB1dCBpcyBgdHJ1ZWAuIixncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sd2l0aGluOntkb2M6IlJldHVybnMgYHRydWVgIGlmIHRoZSBldmFsdWF0ZWQgZmVhdHVyZSBpcyBmdWxseSBjb250YWluZWQgaW5zaWRlIGEgYm91bmRhcnkgb2YgdGhlIGlucHV0IGdlb21ldHJ5LCBgZmFsc2VgIG90aGVyd2lzZS4gVGhlIGlucHV0IHZhbHVlIGNhbiBiZSBhIHZhbGlkIEdlb0pTT04gb2YgdHlwZSBgUG9seWdvbmAsIGBNdWx0aVBvbHlnb25gLCBgRmVhdHVyZWAsIG9yIGBGZWF0dXJlQ29sbGVjdGlvbmAuIFN1cHBvcnRlZCBmZWF0dXJlcyBmb3IgZXZhbHVhdGlvbjpcbi0gYFBvaW50YDogUmV0dXJucyBgZmFsc2VgIGlmIGEgcG9pbnQgaXMgb24gdGhlIGJvdW5kYXJ5IG9yIGZhbGxzIG91dHNpZGUgdGhlIGJvdW5kYXJ5LlxuLSBgTGluZVN0cmluZ2A6IFJldHVybnMgYGZhbHNlYCBpZiBhbnkgcGFydCBvZiBhIGxpbmUgZmFsbHMgb3V0c2lkZSB0aGUgYm91bmRhcnksIHRoZSBsaW5lIGludGVyc2VjdHMgdGhlIGJvdW5kYXJ5LCBvciBhIGxpbmUncyBlbmRwb2ludCBpcyBvbiB0aGUgYm91bmRhcnkuIixncm91cDoiRGVjaXNpb24iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjEuOS4wIixhbmRyb2lkOiI5LjEuMCIsaW9zOiI1LjguMCIsbWFjb3M6IjAuMTUuMCJ9fX0sImlzLXN1cHBvcnRlZC1zY3JpcHQiOntkb2M6IlJldHVybnMgYHRydWVgIGlmIHRoZSBpbnB1dCBzdHJpbmcgaXMgZXhwZWN0ZWQgdG8gcmVuZGVyIGxlZ2libHkuIFJldHVybnMgYGZhbHNlYCBpZiB0aGUgaW5wdXQgc3RyaW5nIGNvbnRhaW5zIHNlY3Rpb25zIHRoYXQgY2Fubm90IGJlIHJlbmRlcmVkIHdpdGhvdXQgcG90ZW50aWFsIGxvc3Mgb2YgbWVhbmluZyAoZS5nLiBJbmRpYyBzY3JpcHRzIHRoYXQgcmVxdWlyZSBjb21wbGV4IHRleHQgc2hhcGluZywgb3IgcmlnaHQtdG8tbGVmdCBzY3JpcHRzIGlmIHRoZSB0aGUgYG1hcGJveC1nbC1ydGwtdGV4dGAgcGx1Z2luIGlzIG5vdCBpbiB1c2UgaW4gTWFwYm94IEdMIEpTKS4iLGdyb3VwOiJTdHJpbmciLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDUuMCIsYW5kcm9pZDoiNi42LjAifX19LHVwY2FzZTp7ZG9jOiJSZXR1cm5zIHRoZSBpbnB1dCBzdHJpbmcgY29udmVydGVkIHRvIHVwcGVyY2FzZS4gRm9sbG93cyB0aGUgVW5pY29kZSBEZWZhdWx0IENhc2UgQ29udmVyc2lvbiBhbGdvcml0aG0gYW5kIHRoZSBsb2NhbGUtaW5zZW5zaXRpdmUgY2FzZSBtYXBwaW5ncyBpbiB0aGUgVW5pY29kZSBDaGFyYWN0ZXIgRGF0YWJhc2UuIixncm91cDoiU3RyaW5nIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX19LGRvd25jYXNlOntkb2M6IlJldHVybnMgdGhlIGlucHV0IHN0cmluZyBjb252ZXJ0ZWQgdG8gbG93ZXJjYXNlLiBGb2xsb3dzIHRoZSBVbmljb2RlIERlZmF1bHQgQ2FzZSBDb252ZXJzaW9uIGFsZ29yaXRobSBhbmQgdGhlIGxvY2FsZS1pbnNlbnNpdGl2ZSBjYXNlIG1hcHBpbmdzIGluIHRoZSBVbmljb2RlIENoYXJhY3RlciBEYXRhYmFzZS4iLGdyb3VwOiJTdHJpbmciLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fX0sY29uY2F0Ontkb2M6IlJldHVybnMgYSBgc3RyaW5nYCBjb25zaXN0aW5nIG9mIHRoZSBjb25jYXRlbmF0aW9uIG9mIHRoZSBpbnB1dHMuIEVhY2ggaW5wdXQgaXMgY29udmVydGVkIHRvIGEgc3RyaW5nIGFzIGlmIGJ5IGB0by1zdHJpbmdgLiIsZ3JvdXA6IlN0cmluZyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19fSwicmVzb2x2ZWQtbG9jYWxlIjp7ZG9jOiJSZXR1cm5zIHRoZSBJRVRGIGxhbmd1YWdlIHRhZyBvZiB0aGUgbG9jYWxlIGJlaW5nIHVzZWQgYnkgdGhlIHByb3ZpZGVkIGBjb2xsYXRvcmAuIFRoaXMgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBkZWZhdWx0IHN5c3RlbSBsb2NhbGUsIG9yIHRvIGRldGVybWluZSBpZiBhIHJlcXVlc3RlZCBsb2NhbGUgd2FzIHN1Y2Nlc3NmdWxseSBsb2FkZWQuIixncm91cDoiU3RyaW5nIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQ1LjAiLGFuZHJvaWQ6IjYuNS4wIixpb3M6IjQuMi4wIixtYWNvczoiMC45LjAifX19fX0sbGlnaHQ6e2FuY2hvcjp7dHlwZToiZW51bSIsZGVmYXVsdDoidmlld3BvcnQiLHZhbHVlczp7bWFwOntkb2M6IlRoZSBwb3NpdGlvbiBvZiB0aGUgbGlnaHQgc291cmNlIGlzIGFsaWduZWQgdG8gdGhlIHJvdGF0aW9uIG9mIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIHBvc2l0aW9uIG9mIHRoZSBsaWdodCBzb3VyY2UgaXMgYWxpZ25lZCB0byB0aGUgcm90YXRpb24gb2YgdGhlIHZpZXdwb3J0LiJ9fSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLHRyYW5zaXRpb246ITEsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LGRvYzoiV2hldGhlciBleHRydWRlZCBnZW9tZXRyaWVzIGFyZSBsaXQgcmVsYXRpdmUgdG8gdGhlIG1hcCBvciB2aWV3cG9ydC4iLGV4YW1wbGU6Im1hcCIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19fSxwb3NpdGlvbjp7dHlwZToiYXJyYXkiLGRlZmF1bHQ6WzEuMTUsMjEwLDMwXSxsZW5ndGg6Myx2YWx1ZToibnVtYmVyIiwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLHRyYW5zaXRpb246ITAsZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LGRvYzoiUG9zaXRpb24gb2YgdGhlIGxpZ2h0IHNvdXJjZSByZWxhdGl2ZSB0byBsaXQgKGV4dHJ1ZGVkKSBnZW9tZXRyaWVzLCBpbiBbciByYWRpYWwgY29vcmRpbmF0ZSwgYSBhemltdXRoYWwgYW5nbGUsIHAgcG9sYXIgYW5nbGVdIHdoZXJlIHIgaW5kaWNhdGVzIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgb2YgdGhlIGJhc2Ugb2YgYW4gb2JqZWN0IHRvIGl0cyBsaWdodCwgYSBpbmRpY2F0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBsaWdodCByZWxhdGl2ZSB0byAwwrAgKDDCsCB3aGVuIGBsaWdodC5hbmNob3JgIGlzIHNldCB0byBgdmlld3BvcnRgIGNvcnJlc3BvbmRzIHRvIHRoZSB0b3Agb2YgdGhlIHZpZXdwb3J0LCBvciAwwrAgd2hlbiBgbGlnaHQuYW5jaG9yYCBpcyBzZXQgdG8gYG1hcGAgY29ycmVzcG9uZHMgdG8gZHVlIG5vcnRoLCBhbmQgZGVncmVlcyBwcm9jZWVkIGNsb2Nrd2lzZSksIGFuZCBwIGluZGljYXRlcyB0aGUgaGVpZ2h0IG9mIHRoZSBsaWdodCAoZnJvbSAwwrAsIGRpcmVjdGx5IGFib3ZlLCB0byAxODDCsCwgZGlyZWN0bHkgYmVsb3cpLiIsZXhhbXBsZTpbMS41LDkwLDgwXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX19LGNvbG9yOnt0eXBlOiJjb2xvciIsInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50IixkZWZhdWx0OiIjZmZmZmZmIixleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sdHJhbnNpdGlvbjohMCxkb2M6IkNvbG9yIHRpbnQgZm9yIGxpZ2h0aW5nIGV4dHJ1ZGVkIGdlb21ldHJpZXMuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX19LGludGVuc2l0eTp7dHlwZToibnVtYmVyIiwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQiLGRlZmF1bHQ6LjUsbWluaW11bTowLG1heGltdW06MSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sdHJhbnNpdGlvbjohMCxkb2M6IkludGVuc2l0eSBvZiBsaWdodGluZyAob24gYSBzY2FsZSBmcm9tIDAgdG8gMSkuIEhpZ2hlciBudW1iZXJzIHdpbGwgcHJlc2VudCBhcyBtb3JlIGV4dHJlbWUgY29udHJhc3QuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX19fSxwYWludDpbInBhaW50X2ZpbGwiLCJwYWludF9saW5lIiwicGFpbnRfY2lyY2xlIiwicGFpbnRfaGVhdG1hcCIsInBhaW50X2ZpbGwtZXh0cnVzaW9uIiwicGFpbnRfc3ltYm9sIiwicGFpbnRfcmFzdGVyIiwicGFpbnRfaGlsbHNoYWRlIiwicGFpbnRfYmFja2dyb3VuZCJdLHBhaW50X2ZpbGw6eyJmaWxsLWFudGlhbGlhcyI6e3R5cGU6ImJvb2xlYW4iLGRlZmF1bHQ6ITAsZG9jOiJXaGV0aGVyIG9yIG5vdCB0aGUgZmlsbCBzaG91bGQgYmUgYW50aWFsaWFzZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJmaWxsLW9wYWNpdHkiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLGRvYzoiVGhlIG9wYWNpdHkgb2YgdGhlIGVudGlyZSBmaWxsIGxheWVyLiBJbiBjb250cmFzdCB0byB0aGUgYGZpbGwtY29sb3JgLCB0aGlzIHZhbHVlIHdpbGwgYWxzbyBhZmZlY3QgdGhlIDFweCBzdHJva2UgYXJvdW5kIHRoZSBmaWxsLCBpZiB0aGUgc3Ryb2tlIGlzIHVzZWQuIix0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjEuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImZpbGwtY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoiIzAwMDAwMCIsZG9jOiJUaGUgY29sb3Igb2YgdGhlIGZpbGxlZCBwYXJ0IG9mIHRoaXMgbGF5ZXIuIFRoaXMgY29sb3IgY2FuIGJlIHNwZWNpZmllZCBhcyBgcmdiYWAgd2l0aCBhbiBhbHBoYSBjb21wb25lbnQgYW5kIHRoZSBjb2xvcidzIG9wYWNpdHkgd2lsbCBub3QgYWZmZWN0IHRoZSBvcGFjaXR5IG9mIHRoZSAxcHggc3Ryb2tlLCBpZiBpdCBpcyB1c2VkLiIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbeyIhIjoiZmlsbC1wYXR0ZXJuIn1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMTkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImZpbGwtb3V0bGluZS1jb2xvciI6e3R5cGU6ImNvbG9yIixkb2M6IlRoZSBvdXRsaW5lIGNvbG9yIG9mIHRoZSBmaWxsLiBNYXRjaGVzIHRoZSB2YWx1ZSBvZiBgZmlsbC1jb2xvcmAgaWYgdW5zcGVjaWZpZWQuIix0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOlt7IiEiOiJmaWxsLXBhdHRlcm4ifSx7ImZpbGwtYW50aWFsaWFzIjohMH1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMTkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImZpbGwtdHJhbnNsYXRlIjp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGxlbmd0aDoyLGRlZmF1bHQ6WzAsMF0sdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IlRoZSBnZW9tZXRyeSdzIG9mZnNldC4gVmFsdWVzIGFyZSBbeCwgeV0gd2hlcmUgbmVnYXRpdmVzIGluZGljYXRlIGxlZnQgYW5kIHVwLCByZXNwZWN0aXZlbHkuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJmaWxsLXRyYW5zbGF0ZS1hbmNob3IiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgZmlsbCBpcyB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIGZpbGwgaXMgdHJhbnNsYXRlZCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQuIn19LGRvYzoiQ29udHJvbHMgdGhlIGZyYW1lIG9mIHJlZmVyZW5jZSBmb3IgYGZpbGwtdHJhbnNsYXRlYC4iLGRlZmF1bHQ6Im1hcCIscmVxdWlyZXM6WyJmaWxsLXRyYW5zbGF0ZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImZpbGwtcGF0dGVybiI6e3R5cGU6InJlc29sdmVkSW1hZ2UiLHRyYW5zaXRpb246ITAsZG9jOiJOYW1lIG9mIGltYWdlIGluIHNwcml0ZSB0byB1c2UgZm9yIGRyYXdpbmcgaW1hZ2UgZmlsbHMuIEZvciBzZWFtbGVzcyBwYXR0ZXJucywgaW1hZ2Ugd2lkdGggYW5kIGhlaWdodCBtdXN0IGJlIGEgZmFjdG9yIG9mIHR3byAoMiwgNCwgOCwgLi4uLCA1MTIpLiBOb3RlIHRoYXQgem9vbS1kZXBlbmRlbnQgZXhwcmVzc2lvbnMgd2lsbCBiZSBldmFsdWF0ZWQgb25seSBhdCBpbnRlZ2VyIHpvb20gbGV2ZWxzLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC40OS4wIixhbmRyb2lkOiI2LjUuMCIsbWFjb3M6IjAuMTEuMCIsaW9zOiI0LjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIl19LCJwcm9wZXJ0eS10eXBlIjoiY3Jvc3MtZmFkZWQtZGF0YS1kcml2ZW4ifX0sInBhaW50X2ZpbGwtZXh0cnVzaW9uIjp7ImZpbGwtZXh0cnVzaW9uLW9wYWNpdHkiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLGRvYzoiVGhlIG9wYWNpdHkgb2YgdGhlIGVudGlyZSBmaWxsIGV4dHJ1c2lvbiBsYXllci4gVGhpcyBpcyByZW5kZXJlZCBvbiBhIHBlci1sYXllciwgbm90IHBlci1mZWF0dXJlLCBiYXNpcywgYW5kIGRhdGEtZHJpdmVuIHN0eWxpbmcgaXMgbm90IGF2YWlsYWJsZS4iLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiZmlsbC1leHRydXNpb24tY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoiIzAwMDAwMCIsZG9jOiJUaGUgYmFzZSBjb2xvciBvZiB0aGUgZXh0cnVkZWQgZmlsbC4gVGhlIGV4dHJ1c2lvbidzIHN1cmZhY2VzIHdpbGwgYmUgc2hhZGVkIGRpZmZlcmVudGx5IGJhc2VkIG9uIHRoaXMgY29sb3IgaW4gY29tYmluYXRpb24gd2l0aCB0aGUgcm9vdCBgbGlnaHRgIHNldHRpbmdzLiBJZiB0aGlzIGNvbG9yIGlzIHNwZWNpZmllZCBhcyBgcmdiYWAgd2l0aCBhbiBhbHBoYSBjb21wb25lbnQsIHRoZSBhbHBoYSBjb21wb25lbnQgd2lsbCBiZSBpZ25vcmVkOyB1c2UgYGZpbGwtZXh0cnVzaW9uLW9wYWNpdHlgIHRvIHNldCBsYXllciBvcGFjaXR5LiIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbeyIhIjoiZmlsbC1leHRydXNpb24tcGF0dGVybiJ9XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJmaWxsLWV4dHJ1c2lvbi10cmFuc2xhdGUiOnt0eXBlOiJhcnJheSIsdmFsdWU6Im51bWJlciIsbGVuZ3RoOjIsZGVmYXVsdDpbMCwwXSx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiVGhlIGdlb21ldHJ5J3Mgb2Zmc2V0LiBWYWx1ZXMgYXJlIFt4LCB5XSB3aGVyZSBuZWdhdGl2ZXMgaW5kaWNhdGUgbGVmdCBhbmQgdXAgKG9uIHRoZSBmbGF0IHBsYW5lKSwgcmVzcGVjdGl2ZWx5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiZmlsbC1leHRydXNpb24tdHJhbnNsYXRlLWFuY2hvciI6e3R5cGU6ImVudW0iLHZhbHVlczp7bWFwOntkb2M6IlRoZSBmaWxsIGV4dHJ1c2lvbiBpcyB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIGZpbGwgZXh0cnVzaW9uIGlzIHRyYW5zbGF0ZWQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LiJ9fSxkb2M6IkNvbnRyb2xzIHRoZSBmcmFtZSBvZiByZWZlcmVuY2UgZm9yIGBmaWxsLWV4dHJ1c2lvbi10cmFuc2xhdGVgLiIsZGVmYXVsdDoibWFwIixyZXF1aXJlczpbImZpbGwtZXh0cnVzaW9uLXRyYW5zbGF0ZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjcuMCIsYW5kcm9pZDoiNS4xLjAiLGlvczoiMy42LjAiLG1hY29zOiIwLjUuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImZpbGwtZXh0cnVzaW9uLXBhdHRlcm4iOnt0eXBlOiJyZXNvbHZlZEltYWdlIix0cmFuc2l0aW9uOiEwLGRvYzoiTmFtZSBvZiBpbWFnZSBpbiBzcHJpdGUgdG8gdXNlIGZvciBkcmF3aW5nIGltYWdlcyBvbiBleHRydWRlZCBmaWxscy4gRm9yIHNlYW1sZXNzIHBhdHRlcm5zLCBpbWFnZSB3aWR0aCBhbmQgaGVpZ2h0IG11c3QgYmUgYSBmYWN0b3Igb2YgdHdvICgyLCA0LCA4LCAuLi4sIDUxMikuIE5vdGUgdGhhdCB6b29tLWRlcGVuZGVudCBleHByZXNzaW9ucyB3aWxsIGJlIGV2YWx1YXRlZCBvbmx5IGF0IGludGVnZXIgem9vbSBsZXZlbHMuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjQ5LjAiLGFuZHJvaWQ6IjYuNS4wIixtYWNvczoiMC4xMS4wIixpb3M6IjQuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJjcm9zcy1mYWRlZC1kYXRhLWRyaXZlbiJ9LCJmaWxsLWV4dHJ1c2lvbi1oZWlnaHQiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxtaW5pbXVtOjAsdW5pdHM6Im1ldGVycyIsZG9jOiJUaGUgaGVpZ2h0IHdpdGggd2hpY2ggdG8gZXh0cnVkZSB0aGlzIGxheWVyLiIsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjI3LjAiLGFuZHJvaWQ6IjUuMS4wIixpb3M6IjMuNi4wIixtYWNvczoiMC41LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJmaWxsLWV4dHJ1c2lvbi1iYXNlIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsbWluaW11bTowLHVuaXRzOiJtZXRlcnMiLGRvYzoiVGhlIGhlaWdodCB3aXRoIHdoaWNoIHRvIGV4dHJ1ZGUgdGhlIGJhc2Ugb2YgdGhpcyBsYXllci4gTXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYGZpbGwtZXh0cnVzaW9uLWhlaWdodGAuIix0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOlsiZmlsbC1leHRydXNpb24taGVpZ2h0Il0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yNy4wIixhbmRyb2lkOiI1LjEuMCIsaW9zOiIzLjYuMCIsbWFjb3M6IjAuNS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiZmlsbC1leHRydXNpb24tdmVydGljYWwtZ3JhZGllbnQiOnt0eXBlOiJib29sZWFuIixkZWZhdWx0OiEwLGRvYzoiV2hldGhlciB0byBhcHBseSBhIHZlcnRpY2FsIGdyYWRpZW50IHRvIHRoZSBzaWRlcyBvZiBhIGZpbGwtZXh0cnVzaW9uIGxheWVyLiBJZiB0cnVlLCBzaWRlcyB3aWxsIGJlIHNoYWRlZCBzbGlnaHRseSBkYXJrZXIgZmFydGhlciBkb3duLiIsdHJhbnNpdGlvbjohMSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjUwLjAiLGlvczoiNC43LjAiLG1hY29zOiIwLjEzLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9fSxwYWludF9saW5lOnsibGluZS1vcGFjaXR5Ijp7dHlwZToibnVtYmVyIixkb2M6IlRoZSBvcGFjaXR5IGF0IHdoaWNoIHRoZSBsaW5lIHdpbGwgYmUgZHJhd24uIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImxpbmUtY29sb3IiOnt0eXBlOiJjb2xvciIsZG9jOiJUaGUgY29sb3Igd2l0aCB3aGljaCB0aGUgbGluZSB3aWxsIGJlIGRyYXduLiIsZGVmYXVsdDoiIzAwMDAwMCIsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbeyIhIjoibGluZS1wYXR0ZXJuIn1dLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjMuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImxpbmUtdHJhbnNsYXRlIjp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGxlbmd0aDoyLGRlZmF1bHQ6WzAsMF0sdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IlRoZSBnZW9tZXRyeSdzIG9mZnNldC4gVmFsdWVzIGFyZSBbeCwgeV0gd2hlcmUgbmVnYXRpdmVzIGluZGljYXRlIGxlZnQgYW5kIHVwLCByZXNwZWN0aXZlbHkuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJsaW5lLXRyYW5zbGF0ZS1hbmNob3IiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgbGluZSBpcyB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIGxpbmUgaXMgdHJhbnNsYXRlZCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQuIn19LGRvYzoiQ29udHJvbHMgdGhlIGZyYW1lIG9mIHJlZmVyZW5jZSBmb3IgYGxpbmUtdHJhbnNsYXRlYC4iLGRlZmF1bHQ6Im1hcCIscmVxdWlyZXM6WyJsaW5lLXRyYW5zbGF0ZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImxpbmUtd2lkdGgiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IlN0cm9rZSB0aGlja25lc3MuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjM5LjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJsaW5lLWdhcC13aWR0aCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLG1pbmltdW06MCxkb2M6IkRyYXdzIGEgbGluZSBjYXNpbmcgb3V0c2lkZSBvZiBhIGxpbmUncyBhY3R1YWwgcGF0aC4gVmFsdWUgaW5kaWNhdGVzIHRoZSB3aWR0aCBvZiB0aGUgaW5uZXIgZ2FwLiIsdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJsaW5lLW9mZnNldCI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLGRvYzoiVGhlIGxpbmUncyBvZmZzZXQuIEZvciBsaW5lYXIgZmVhdHVyZXMsIGEgcG9zaXRpdmUgdmFsdWUgb2Zmc2V0cyB0aGUgbGluZSB0byB0aGUgcmlnaHQsIHJlbGF0aXZlIHRvIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGxpbmUsIGFuZCBhIG5lZ2F0aXZlIHZhbHVlIHRvIHRoZSBsZWZ0LiBGb3IgcG9seWdvbiBmZWF0dXJlcywgYSBwb3NpdGl2ZSB2YWx1ZSByZXN1bHRzIGluIGFuIGluc2V0LCBhbmQgYSBuZWdhdGl2ZSB2YWx1ZSByZXN1bHRzIGluIGFuIG91dHNldC4iLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMi4xIixhbmRyb2lkOiIzLjAuMCIsaW9zOiIzLjEuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yOS4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwibGluZS1ibHVyIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsbWluaW11bTowLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJCbHVyIGFwcGxpZWQgdG8gdGhlIGxpbmUsIGluIHBpeGVscy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImxpbmUtZGFzaGFycmF5Ijp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGRvYzoiU3BlY2lmaWVzIHRoZSBsZW5ndGhzIG9mIHRoZSBhbHRlcm5hdGluZyBkYXNoZXMgYW5kIGdhcHMgdGhhdCBmb3JtIHRoZSBkYXNoIHBhdHRlcm4uIFRoZSBsZW5ndGhzIGFyZSBsYXRlciBzY2FsZWQgYnkgdGhlIGxpbmUgd2lkdGguIFRvIGNvbnZlcnQgYSBkYXNoIGxlbmd0aCB0byBwaXhlbHMsIG11bHRpcGx5IHRoZSBsZW5ndGggYnkgdGhlIGN1cnJlbnQgbGluZSB3aWR0aC4gTm90ZSB0aGF0IEdlb0pTT04gc291cmNlcyB3aXRoIGBsaW5lTWV0cmljczogdHJ1ZWAgc3BlY2lmaWVkIHdvbid0IHJlbmRlciBkYXNoZWQgbGluZXMgdG8gdGhlIGV4cGVjdGVkIHNjYWxlLiBBbHNvIG5vdGUgdGhhdCB6b29tLWRlcGVuZGVudCBleHByZXNzaW9ucyB3aWxsIGJlIGV2YWx1YXRlZCBvbmx5IGF0IGludGVnZXIgem9vbSBsZXZlbHMuIixtaW5pbXVtOjAsdHJhbnNpdGlvbjohMCx1bml0czoibGluZSB3aWR0aHMiLHJlcXVpcmVzOlt7IiEiOiJsaW5lLXBhdHRlcm4ifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOnt9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJjcm9zcy1mYWRlZCJ9LCJsaW5lLXBhdHRlcm4iOnt0eXBlOiJyZXNvbHZlZEltYWdlIix0cmFuc2l0aW9uOiEwLGRvYzoiTmFtZSBvZiBpbWFnZSBpbiBzcHJpdGUgdG8gdXNlIGZvciBkcmF3aW5nIGltYWdlIGxpbmVzLiBGb3Igc2VhbWxlc3MgcGF0dGVybnMsIGltYWdlIHdpZHRoIG11c3QgYmUgYSBmYWN0b3Igb2YgdHdvICgyLCA0LCA4LCAuLi4sIDUxMikuIE5vdGUgdGhhdCB6b29tLWRlcGVuZGVudCBleHByZXNzaW9ucyB3aWxsIGJlIGV2YWx1YXRlZCBvbmx5IGF0IGludGVnZXIgem9vbSBsZXZlbHMuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjQ5LjAiLGFuZHJvaWQ6IjYuNS4wIixtYWNvczoiMC4xMS4wIixpb3M6IjQuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX0sInByb3BlcnR5LXR5cGUiOiJjcm9zcy1mYWRlZC1kYXRhLWRyaXZlbiJ9LCJsaW5lLWdyYWRpZW50Ijp7dHlwZToiY29sb3IiLGRvYzonRGVmaW5lcyBhIGdyYWRpZW50IHdpdGggd2hpY2ggdG8gY29sb3IgYSBsaW5lIGZlYXR1cmUuIENhbiBvbmx5IGJlIHVzZWQgd2l0aCBHZW9KU09OIHNvdXJjZXMgdGhhdCBzcGVjaWZ5IGAibGluZU1ldHJpY3MiOiB0cnVlYC4nLHRyYW5zaXRpb246ITEscmVxdWlyZXM6W3siISI6ImxpbmUtZGFzaGFycmF5In0seyIhIjoibGluZS1wYXR0ZXJuIn0se3NvdXJjZToiZ2VvanNvbiIsaGFzOntsaW5lTWV0cmljczohMH19XSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQ1LjAiLGFuZHJvaWQ6IjYuNS4wIixpb3M6IjQuNC4wIixtYWNvczoiMC4xMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOnt9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbImxpbmUtcHJvZ3Jlc3MiXX0sInByb3BlcnR5LXR5cGUiOiJjb2xvci1yYW1wIn19LHBhaW50X2NpcmNsZTp7ImNpcmNsZS1yYWRpdXMiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6NSxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IkNpcmNsZSByYWRpdXMuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjE4LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJjaXJjbGUtY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoiIzAwMDAwMCIsZG9jOiJUaGUgZmlsbCBjb2xvciBvZiB0aGUgY2lyY2xlLiIsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjE4LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJjaXJjbGUtYmx1ciI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLGRvYzoiQW1vdW50IHRvIGJsdXIgdGhlIGNpcmNsZS4gMSBibHVycyB0aGUgY2lyY2xlIHN1Y2ggdGhhdCBvbmx5IHRoZSBjZW50ZXJwb2ludCBpcyBmdWxsIG9wYWNpdHkuIix0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjAuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImNpcmNsZS1vcGFjaXR5Ijp7dHlwZToibnVtYmVyIixkb2M6IlRoZSBvcGFjaXR5IGF0IHdoaWNoIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi4iLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4yMC4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiY2lyY2xlLXRyYW5zbGF0ZSI6e3R5cGU6ImFycmF5Iix2YWx1ZToibnVtYmVyIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJUaGUgZ2VvbWV0cnkncyBvZmZzZXQuIFZhbHVlcyBhcmUgW3gsIHldIHdoZXJlIG5lZ2F0aXZlcyBpbmRpY2F0ZSBsZWZ0IGFuZCB1cCwgcmVzcGVjdGl2ZWx5LiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiY2lyY2xlLXRyYW5zbGF0ZS1hbmNob3IiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgY2lyY2xlIGlzIHRyYW5zbGF0ZWQgcmVsYXRpdmUgdG8gdGhlIG1hcC4ifSx2aWV3cG9ydDp7ZG9jOiJUaGUgY2lyY2xlIGlzIHRyYW5zbGF0ZWQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LiJ9fSxkb2M6IkNvbnRyb2xzIHRoZSBmcmFtZSBvZiByZWZlcmVuY2UgZm9yIGBjaXJjbGUtdHJhbnNsYXRlYC4iLGRlZmF1bHQ6Im1hcCIscmVxdWlyZXM6WyJjaXJjbGUtdHJhbnNsYXRlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiY2lyY2xlLXBpdGNoLXNjYWxlIjp7dHlwZToiZW51bSIsdmFsdWVzOnttYXA6e2RvYzoiQ2lyY2xlcyBhcmUgc2NhbGVkIGFjY29yZGluZyB0byB0aGVpciBhcHBhcmVudCBkaXN0YW5jZSB0byB0aGUgY2FtZXJhLiJ9LHZpZXdwb3J0Ontkb2M6IkNpcmNsZXMgYXJlIG5vdCBzY2FsZWQuIn19LGRlZmF1bHQ6Im1hcCIsZG9jOiJDb250cm9scyB0aGUgc2NhbGluZyBiZWhhdmlvciBvZiB0aGUgY2lyY2xlIHdoZW4gdGhlIG1hcCBpcyBwaXRjaGVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4yMS4wIixhbmRyb2lkOiI0LjIuMCIsaW9zOiIzLjQuMCIsbWFjb3M6IjAuMi4xIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiY2lyY2xlLXBpdGNoLWFsaWdubWVudCI6e3R5cGU6ImVudW0iLHZhbHVlczp7bWFwOntkb2M6IlRoZSBjaXJjbGUgaXMgYWxpZ25lZCB0byB0aGUgcGxhbmUgb2YgdGhlIG1hcC4ifSx2aWV3cG9ydDp7ZG9jOiJUaGUgY2lyY2xlIGlzIGFsaWduZWQgdG8gdGhlIHBsYW5lIG9mIHRoZSB2aWV3cG9ydC4ifX0sZGVmYXVsdDoidmlld3BvcnQiLGRvYzoiT3JpZW50YXRpb24gb2YgY2lyY2xlIHdoZW4gbWFwIGlzIHBpdGNoZWQuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjM5LjAiLGFuZHJvaWQ6IjUuMi4wIixpb3M6IjMuNy4wIixtYWNvczoiMC42LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJjaXJjbGUtc3Ryb2tlLXdpZHRoIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsbWluaW11bTowLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJUaGUgd2lkdGggb2YgdGhlIGNpcmNsZSdzIHN0cm9rZS4gU3Ryb2tlcyBhcmUgcGxhY2VkIG91dHNpZGUgb2YgdGhlIGBjaXJjbGUtcmFkaXVzYC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImNpcmNsZS1zdHJva2UtY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoiIzAwMDAwMCIsZG9jOiJUaGUgc3Ryb2tlIGNvbG9yIG9mIHRoZSBjaXJjbGUuIix0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMjkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMjkuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImNpcmNsZS1zdHJva2Utb3BhY2l0eSI6e3R5cGU6Im51bWJlciIsZG9jOiJUaGUgb3BhY2l0eSBvZiB0aGUgY2lyY2xlJ3Mgc3Ryb2tlLiIsZGVmYXVsdDoxLG1pbmltdW06MCxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjI5LjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9fSxwYWludF9oZWF0bWFwOnsiaGVhdG1hcC1yYWRpdXMiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MzAsbWluaW11bToxLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJSYWRpdXMgb2YgaW5mbHVlbmNlIG9mIG9uZSBoZWF0bWFwIHBvaW50IGluIHBpeGVscy4gSW5jcmVhc2luZyB0aGUgdmFsdWUgbWFrZXMgdGhlIGhlYXRtYXAgc21vb3RoZXIsIGJ1dCBsZXNzIGRldGFpbGVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40MS4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC40My4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiaGVhdG1hcC13ZWlnaHQiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MSxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMSxkb2M6IkEgbWVhc3VyZSBvZiBob3cgbXVjaCBhbiBpbmRpdmlkdWFsIHBvaW50IGNvbnRyaWJ1dGVzIHRvIHRoZSBoZWF0bWFwLiBBIHZhbHVlIG9mIDEwIHdvdWxkIGJlIGVxdWl2YWxlbnQgdG8gaGF2aW5nIDEwIHBvaW50cyBvZiB3ZWlnaHQgMSBpbiB0aGUgc2FtZSBzcG90LiBFc3BlY2lhbGx5IHVzZWZ1bCB3aGVuIGNvbWJpbmVkIHdpdGggY2x1c3RlcmluZy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImhlYXRtYXAtaW50ZW5zaXR5Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEsbWluaW11bTowLHRyYW5zaXRpb246ITAsZG9jOiJTaW1pbGFyIHRvIGBoZWF0bWFwLXdlaWdodGAgYnV0IGNvbnRyb2xzIHRoZSBpbnRlbnNpdHkgb2YgdGhlIGhlYXRtYXAgZ2xvYmFsbHkuIFByaW1hcmlseSB1c2VkIGZvciBhZGp1c3RpbmcgdGhlIGhlYXRtYXAgYmFzZWQgb24gem9vbSBsZXZlbC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImhlYXRtYXAtY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDpbImludGVycG9sYXRlIixbImxpbmVhciJdLFsiaGVhdG1hcC1kZW5zaXR5Il0sMCwicmdiYSgwLCAwLCAyNTUsIDApIiwuMSwicm95YWxibHVlIiwuMywiY3lhbiIsLjUsImxpbWUiLC43LCJ5ZWxsb3ciLDEsInJlZCJdLGRvYzonRGVmaW5lcyB0aGUgY29sb3Igb2YgZWFjaCBwaXhlbCBiYXNlZCBvbiBpdHMgZGVuc2l0eSB2YWx1ZSBpbiBhIGhlYXRtYXAuICBTaG91bGQgYmUgYW4gZXhwcmVzc2lvbiB0aGF0IHVzZXMgYFsiaGVhdG1hcC1kZW5zaXR5Il1gIGFzIGlucHV0LicsdHJhbnNpdGlvbjohMSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQxLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e319LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiaGVhdG1hcC1kZW5zaXR5Il19LCJwcm9wZXJ0eS10eXBlIjoiY29sb3ItcmFtcCJ9LCJoZWF0bWFwLW9wYWNpdHkiOnt0eXBlOiJudW1iZXIiLGRvYzoiVGhlIGdsb2JhbCBvcGFjaXR5IGF0IHdoaWNoIHRoZSBoZWF0bWFwIGxheWVyIHdpbGwgYmUgZHJhd24uIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDEuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In19LHBhaW50X3N5bWJvbDp7Imljb24tb3BhY2l0eSI6e2RvYzoiVGhlIG9wYWNpdHkgYXQgd2hpY2ggdGhlIGljb24gd2lsbCBiZSBkcmF3bi4iLHR5cGU6Im51bWJlciIsZGVmYXVsdDoxLG1pbmltdW06MCxtYXhpbXVtOjEsdHJhbnNpdGlvbjohMCxyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjMzLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJpY29uLWNvbG9yIjp7dHlwZToiY29sb3IiLGRlZmF1bHQ6IiMwMDAwMDAiLHRyYW5zaXRpb246ITAsZG9jOiJUaGUgY29sb3Igb2YgdGhlIGljb24uIFRoaXMgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHNkZiBpY29ucy4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzMuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImljb24taGFsby1jb2xvciI6e3R5cGU6ImNvbG9yIixkZWZhdWx0OiJyZ2JhKDAsIDAsIDAsIDApIix0cmFuc2l0aW9uOiEwLGRvYzoiVGhlIGNvbG9yIG9mIHRoZSBpY29uJ3MgaGFsby4gSWNvbiBoYWxvcyBjYW4gb25seSBiZSB1c2VkIHdpdGggU0RGIGljb25zLiIscmVxdWlyZXM6WyJpY29uLWltYWdlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwiaWNvbi1oYWxvLXdpZHRoIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsbWluaW11bTowLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJEaXN0YW5jZSBvZiBoYWxvIHRvIHRoZSBpY29uIG91dGxpbmUuIixyZXF1aXJlczpbImljb24taW1hZ2UiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjMzLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJpY29uLWhhbG8tYmx1ciI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiRmFkZSBvdXQgdGhlIGhhbG8gdG93YXJkcyB0aGUgb3V0c2lkZS4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzMuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sImljb24tdHJhbnNsYXRlIjp7dHlwZToiYXJyYXkiLHZhbHVlOiJudW1iZXIiLGxlbmd0aDoyLGRlZmF1bHQ6WzAsMF0sdHJhbnNpdGlvbjohMCx1bml0czoicGl4ZWxzIixkb2M6IkRpc3RhbmNlIHRoYXQgdGhlIGljb24ncyBhbmNob3IgaXMgbW92ZWQgZnJvbSBpdHMgb3JpZ2luYWwgcGxhY2VtZW50LiBQb3NpdGl2ZSB2YWx1ZXMgaW5kaWNhdGUgcmlnaHQgYW5kIGRvd24sIHdoaWxlIG5lZ2F0aXZlIHZhbHVlcyBpbmRpY2F0ZSBsZWZ0IGFuZCB1cC4iLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImljb24tdHJhbnNsYXRlLWFuY2hvciI6e3R5cGU6ImVudW0iLHZhbHVlczp7bWFwOntkb2M6Ikljb25zIGFyZSB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiSWNvbnMgYXJlIHRyYW5zbGF0ZWQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LiJ9fSxkb2M6IkNvbnRyb2xzIHRoZSBmcmFtZSBvZiByZWZlcmVuY2UgZm9yIGBpY29uLXRyYW5zbGF0ZWAuIixkZWZhdWx0OiJtYXAiLHJlcXVpcmVzOlsiaWNvbi1pbWFnZSIsImljb24tdHJhbnNsYXRlIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwidGV4dC1vcGFjaXR5Ijp7dHlwZToibnVtYmVyIixkb2M6IlRoZSBvcGFjaXR5IGF0IHdoaWNoIHRoZSB0ZXh0IHdpbGwgYmUgZHJhd24uIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOlsidGV4dC1maWVsZCJdLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7anM6IjAuMzMuMCIsYW5kcm9pZDoiNS4wLjAiLGlvczoiMy41LjAiLG1hY29zOiIwLjQuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iLCJmZWF0dXJlIiwiZmVhdHVyZS1zdGF0ZSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtZHJpdmVuIn0sInRleHQtY29sb3IiOnt0eXBlOiJjb2xvciIsZG9jOiJUaGUgY29sb3Igd2l0aCB3aGljaCB0aGUgdGV4dCB3aWxsIGJlIGRyYXduLiIsZGVmYXVsdDoiIzAwMDAwMCIsdHJhbnNpdGlvbjohMCxvdmVycmlkYWJsZTohMCxyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjMzLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LWhhbG8tY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoicmdiYSgwLCAwLCAwLCAwKSIsdHJhbnNpdGlvbjohMCxkb2M6IlRoZSBjb2xvciBvZiB0aGUgdGV4dCdzIGhhbG8sIHdoaWNoIGhlbHBzIGl0IHN0YW5kIG91dCBmcm9tIGJhY2tncm91bmRzLiIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIl0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn0sImRhdGEtZHJpdmVuIHN0eWxpbmciOntqczoiMC4zMy4wIixhbmRyb2lkOiI1LjAuMCIsaW9zOiIzLjUuMCIsbWFjb3M6IjAuNC4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiLCJmZWF0dXJlLXN0YXRlIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4ifSwidGV4dC1oYWxvLXdpZHRoIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjAsbWluaW11bTowLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJEaXN0YW5jZSBvZiBoYWxvIHRvIHRoZSBmb250IG91dGxpbmUuIE1heCB0ZXh0IGhhbG8gd2lkdGggaXMgMS80IG9mIHRoZSBmb250LXNpemUuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjMzLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LWhhbG8tYmx1ciI6e3R5cGU6Im51bWJlciIsZGVmYXVsdDowLG1pbmltdW06MCx0cmFuc2l0aW9uOiEwLHVuaXRzOiJwaXhlbHMiLGRvYzoiVGhlIGhhbG8ncyBmYWRlb3V0IGRpc3RhbmNlIHRvd2FyZHMgdGhlIG91dHNpZGUuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifSwiZGF0YS1kcml2ZW4gc3R5bGluZyI6e2pzOiIwLjMzLjAiLGFuZHJvaWQ6IjUuMC4wIixpb3M6IjMuNS4wIixtYWNvczoiMC40LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIiwiZmVhdHVyZSIsImZlYXR1cmUtc3RhdGUiXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWRyaXZlbiJ9LCJ0ZXh0LXRyYW5zbGF0ZSI6e3R5cGU6ImFycmF5Iix2YWx1ZToibnVtYmVyIixsZW5ndGg6MixkZWZhdWx0OlswLDBdLHRyYW5zaXRpb246ITAsdW5pdHM6InBpeGVscyIsZG9jOiJEaXN0YW5jZSB0aGF0IHRoZSB0ZXh0J3MgYW5jaG9yIGlzIG1vdmVkIGZyb20gaXRzIG9yaWdpbmFsIHBsYWNlbWVudC4gUG9zaXRpdmUgdmFsdWVzIGluZGljYXRlIHJpZ2h0IGFuZCBkb3duLCB3aGlsZSBuZWdhdGl2ZSB2YWx1ZXMgaW5kaWNhdGUgbGVmdCBhbmQgdXAuIixyZXF1aXJlczpbInRleHQtZmllbGQiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJ0ZXh0LXRyYW5zbGF0ZS1hbmNob3IiOnt0eXBlOiJlbnVtIix2YWx1ZXM6e21hcDp7ZG9jOiJUaGUgdGV4dCBpcyB0cmFuc2xhdGVkIHJlbGF0aXZlIHRvIHRoZSBtYXAuIn0sdmlld3BvcnQ6e2RvYzoiVGhlIHRleHQgaXMgdHJhbnNsYXRlZCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQuIn19LGRvYzoiQ29udHJvbHMgdGhlIGZyYW1lIG9mIHJlZmVyZW5jZSBmb3IgYHRleHQtdHJhbnNsYXRlYC4iLGRlZmF1bHQ6Im1hcCIscmVxdWlyZXM6WyJ0ZXh0LWZpZWxkIiwidGV4dC10cmFuc2xhdGUiXSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9fSxwYWludF9yYXN0ZXI6eyJyYXN0ZXItb3BhY2l0eSI6e3R5cGU6Im51bWJlciIsZG9jOiJUaGUgb3BhY2l0eSBhdCB3aGljaCB0aGUgaW1hZ2Ugd2lsbCBiZSBkcmF3bi4iLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwicmFzdGVyLWh1ZS1yb3RhdGUiOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxwZXJpb2Q6MzYwLHRyYW5zaXRpb246ITAsdW5pdHM6ImRlZ3JlZXMiLGRvYzoiUm90YXRlcyBodWVzIGFyb3VuZCB0aGUgY29sb3Igd2hlZWwuIiwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjEwLjAiLGFuZHJvaWQ6IjIuMC4xIixpb3M6IjIuMC4wIixtYWNvczoiMC4xLjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJyYXN0ZXItYnJpZ2h0bmVzcy1taW4iOnt0eXBlOiJudW1iZXIiLGRvYzoiSW5jcmVhc2Ugb3IgcmVkdWNlIHRoZSBicmlnaHRuZXNzIG9mIHRoZSBpbWFnZS4gVGhlIHZhbHVlIGlzIHRoZSBtaW5pbXVtIGJyaWdodG5lc3MuIixkZWZhdWx0OjAsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInJhc3Rlci1icmlnaHRuZXNzLW1heCI6e3R5cGU6Im51bWJlciIsZG9jOiJJbmNyZWFzZSBvciByZWR1Y2UgdGhlIGJyaWdodG5lc3Mgb2YgdGhlIGltYWdlLiBUaGUgdmFsdWUgaXMgdGhlIG1heGltdW0gYnJpZ2h0bmVzcy4iLGRlZmF1bHQ6MSxtaW5pbXVtOjAsbWF4aW11bToxLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwicmFzdGVyLXNhdHVyYXRpb24iOnt0eXBlOiJudW1iZXIiLGRvYzoiSW5jcmVhc2Ugb3IgcmVkdWNlIHRoZSBzYXR1cmF0aW9uIG9mIHRoZSBpbWFnZS4iLGRlZmF1bHQ6MCxtaW5pbXVtOi0xLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInJhc3Rlci1jb250cmFzdCI6e3R5cGU6Im51bWJlciIsZG9jOiJJbmNyZWFzZSBvciByZWR1Y2UgdGhlIGNvbnRyYXN0IG9mIHRoZSBpbWFnZS4iLGRlZmF1bHQ6MCxtaW5pbXVtOi0xLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInJhc3Rlci1yZXNhbXBsaW5nIjp7dHlwZToiZW51bSIsZG9jOiJUaGUgcmVzYW1wbGluZy9pbnRlcnBvbGF0aW9uIG1ldGhvZCB0byB1c2UgZm9yIG92ZXJzY2FsaW5nLCBhbHNvIGtub3duIGFzIHRleHR1cmUgbWFnbmlmaWNhdGlvbiBmaWx0ZXIiLHZhbHVlczp7bGluZWFyOntkb2M6IihCaSlsaW5lYXIgZmlsdGVyaW5nIGludGVycG9sYXRlcyBwaXhlbCB2YWx1ZXMgdXNpbmcgdGhlIHdlaWdodGVkIGF2ZXJhZ2Ugb2YgdGhlIGZvdXIgY2xvc2VzdCBvcmlnaW5hbCBzb3VyY2UgcGl4ZWxzIGNyZWF0aW5nIGEgc21vb3RoIGJ1dCBibHVycnkgbG9vayB3aGVuIG92ZXJzY2FsZWQifSxuZWFyZXN0Ontkb2M6Ik5lYXJlc3QgbmVpZ2hib3IgZmlsdGVyaW5nIGludGVycG9sYXRlcyBwaXhlbCB2YWx1ZXMgdXNpbmcgdGhlIG5lYXJlc3Qgb3JpZ2luYWwgc291cmNlIHBpeGVsIGNyZWF0aW5nIGEgc2hhcnAgYnV0IHBpeGVsYXRlZCBsb29rIHdoZW4gb3ZlcnNjYWxlZCJ9fSxkZWZhdWx0OiJsaW5lYXIiLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDcuMCIsYW5kcm9pZDoiNi4zLjAiLGlvczoiNC4yLjAiLG1hY29zOiIwLjkuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sInJhc3Rlci1mYWRlLWR1cmF0aW9uIjp7dHlwZToibnVtYmVyIixkZWZhdWx0OjMwMCxtaW5pbXVtOjAsdHJhbnNpdGlvbjohMSx1bml0czoibWlsbGlzZWNvbmRzIixkb2M6IkZhZGUgZHVyYXRpb24gd2hlbiBhIG5ldyB0aWxlIGlzIGFkZGVkLiIsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifX0scGFpbnRfaGlsbHNoYWRlOnsiaGlsbHNoYWRlLWlsbHVtaW5hdGlvbi1kaXJlY3Rpb24iOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MzM1LG1pbmltdW06MCxtYXhpbXVtOjM1OSxkb2M6IlRoZSBkaXJlY3Rpb24gb2YgdGhlIGxpZ2h0IHNvdXJjZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBoaWxsc2hhZGluZyB3aXRoIDAgYXMgdGhlIHRvcCBvZiB0aGUgdmlld3BvcnQgaWYgYGhpbGxzaGFkZS1pbGx1bWluYXRpb24tYW5jaG9yYCBpcyBzZXQgdG8gYHZpZXdwb3J0YCBhbmQgZHVlIG5vcnRoIGlmIGBoaWxsc2hhZGUtaWxsdW1pbmF0aW9uLWFuY2hvcmAgaXMgc2V0IHRvIGBtYXBgLiIsdHJhbnNpdGlvbjohMSwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQzLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9LCJoaWxsc2hhZGUtaWxsdW1pbmF0aW9uLWFuY2hvciI6e3R5cGU6ImVudW0iLHZhbHVlczp7bWFwOntkb2M6IlRoZSBoaWxsc2hhZGUgaWxsdW1pbmF0aW9uIGlzIHJlbGF0aXZlIHRvIHRoZSBub3J0aCBkaXJlY3Rpb24uIn0sdmlld3BvcnQ6e2RvYzoiVGhlIGhpbGxzaGFkZSBpbGx1bWluYXRpb24gaXMgcmVsYXRpdmUgdG8gdGhlIHRvcCBvZiB0aGUgdmlld3BvcnQuIn19LGRlZmF1bHQ6InZpZXdwb3J0Iixkb2M6IkRpcmVjdGlvbiBvZiBsaWdodCBzb3VyY2Ugd2hlbiBtYXAgaXMgcm90YXRlZC4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDMuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITEscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImhpbGxzaGFkZS1leGFnZ2VyYXRpb24iOnt0eXBlOiJudW1iZXIiLGRvYzoiSW50ZW5zaXR5IG9mIHRoZSBoaWxsc2hhZGUiLGRlZmF1bHQ6LjUsbWluaW11bTowLG1heGltdW06MSx0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDMuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImhpbGxzaGFkZS1zaGFkb3ctY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoiIzAwMDAwMCIsZG9jOiJUaGUgc2hhZGluZyBjb2xvciBvZiBhcmVhcyB0aGF0IGZhY2UgYXdheSBmcm9tIHRoZSBsaWdodCBzb3VyY2UuIix0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuNDMuMCIsYW5kcm9pZDoiNi4wLjAiLGlvczoiNC4wLjAiLG1hY29zOiIwLjcuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In0sImhpbGxzaGFkZS1oaWdobGlnaHQtY29sb3IiOnt0eXBlOiJjb2xvciIsZGVmYXVsdDoiI0ZGRkZGRiIsZG9jOiJUaGUgc2hhZGluZyBjb2xvciBvZiBhcmVhcyB0aGF0IGZhY2VzIHRvd2FyZHMgdGhlIGxpZ2h0IHNvdXJjZS4iLHRyYW5zaXRpb246ITAsInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC40My4wIixhbmRyb2lkOiI2LjAuMCIsaW9zOiI0LjAuMCIsbWFjb3M6IjAuNy4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiaGlsbHNoYWRlLWFjY2VudC1jb2xvciI6e3R5cGU6ImNvbG9yIixkZWZhdWx0OiIjMDAwMDAwIixkb2M6IlRoZSBzaGFkaW5nIGNvbG9yIHVzZWQgdG8gYWNjZW50dWF0ZSBydWdnZWQgdGVycmFpbiBsaWtlIHNoYXJwIGNsaWZmcyBhbmQgZ29yZ2VzLiIsdHJhbnNpdGlvbjohMCwic2RrLXN1cHBvcnQiOnsiYmFzaWMgZnVuY3Rpb25hbGl0eSI6e2pzOiIwLjQzLjAiLGFuZHJvaWQ6IjYuMC4wIixpb3M6IjQuMC4wIixtYWNvczoiMC43LjAifX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiEwLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1jb25zdGFudCJ9fSxwYWludF9iYWNrZ3JvdW5kOnsiYmFja2dyb3VuZC1jb2xvciI6e3R5cGU6ImNvbG9yIixkZWZhdWx0OiIjMDAwMDAwIixkb2M6IlRoZSBjb2xvciB3aXRoIHdoaWNoIHRoZSBiYWNrZ3JvdW5kIHdpbGwgYmUgZHJhd24uIix0cmFuc2l0aW9uOiEwLHJlcXVpcmVzOlt7IiEiOiJiYWNrZ3JvdW5kLXBhdHRlcm4ifV0sInNkay1zdXBwb3J0Ijp7ImJhc2ljIGZ1bmN0aW9uYWxpdHkiOntqczoiMC4xMC4wIixhbmRyb2lkOiIyLjAuMSIsaW9zOiIyLjAuMCIsbWFjb3M6IjAuMS4wIn19LGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMCxwYXJhbWV0ZXJzOlsiem9vbSJdfSwicHJvcGVydHktdHlwZSI6ImRhdGEtY29uc3RhbnQifSwiYmFja2dyb3VuZC1wYXR0ZXJuIjp7dHlwZToicmVzb2x2ZWRJbWFnZSIsdHJhbnNpdGlvbjohMCxkb2M6Ik5hbWUgb2YgaW1hZ2UgaW4gc3ByaXRlIHRvIHVzZSBmb3IgZHJhd2luZyBhbiBpbWFnZSBiYWNrZ3JvdW5kLiBGb3Igc2VhbWxlc3MgcGF0dGVybnMsIGltYWdlIHdpZHRoIGFuZCBoZWlnaHQgbXVzdCBiZSBhIGZhY3RvciBvZiB0d28gKDIsIDQsIDgsIC4uLiwgNTEyKS4gTm90ZSB0aGF0IHpvb20tZGVwZW5kZW50IGV4cHJlc3Npb25zIHdpbGwgYmUgZXZhbHVhdGVkIG9ubHkgYXQgaW50ZWdlciB6b29tIGxldmVscy4iLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9LCJkYXRhLWRyaXZlbiBzdHlsaW5nIjp7fX0sZXhwcmVzc2lvbjp7aW50ZXJwb2xhdGVkOiExLHBhcmFtZXRlcnM6WyJ6b29tIl19LCJwcm9wZXJ0eS10eXBlIjoiY3Jvc3MtZmFkZWQifSwiYmFja2dyb3VuZC1vcGFjaXR5Ijp7dHlwZToibnVtYmVyIixkZWZhdWx0OjEsbWluaW11bTowLG1heGltdW06MSxkb2M6IlRoZSBvcGFjaXR5IGF0IHdoaWNoIHRoZSBiYWNrZ3JvdW5kIHdpbGwgYmUgZHJhd24uIix0cmFuc2l0aW9uOiEwLCJzZGstc3VwcG9ydCI6eyJiYXNpYyBmdW5jdGlvbmFsaXR5Ijp7anM6IjAuMTAuMCIsYW5kcm9pZDoiMi4wLjEiLGlvczoiMi4wLjAiLG1hY29zOiIwLjEuMCJ9fSxleHByZXNzaW9uOntpbnRlcnBvbGF0ZWQ6ITAscGFyYW1ldGVyczpbInpvb20iXX0sInByb3BlcnR5LXR5cGUiOiJkYXRhLWNvbnN0YW50In19LHRyYW5zaXRpb246e2R1cmF0aW9uOnt0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MzAwLG1pbmltdW06MCx1bml0czoibWlsbGlzZWNvbmRzIixkb2M6IlRpbWUgYWxsb3R0ZWQgZm9yIHRyYW5zaXRpb25zIHRvIGNvbXBsZXRlLiJ9LGRlbGF5Ont0eXBlOiJudW1iZXIiLGRlZmF1bHQ6MCxtaW5pbXVtOjAsdW5pdHM6Im1pbGxpc2Vjb25kcyIsZG9jOiJMZW5ndGggb2YgdGltZSBiZWZvcmUgYSB0cmFuc2l0aW9uIGJlZ2lucy4ifX0sInByb3BlcnR5LXR5cGUiOnsiZGF0YS1kcml2ZW4iOnt0eXBlOiJwcm9wZXJ0eS10eXBlIixkb2M6IlByb3BlcnR5IGlzIGludGVycG9sYWJsZSBhbmQgY2FuIGJlIHJlcHJlc2VudGVkIHVzaW5nIGEgcHJvcGVydHkgZXhwcmVzc2lvbi4ifSwiY3Jvc3MtZmFkZWQiOnt0eXBlOiJwcm9wZXJ0eS10eXBlIixkb2M6IlByb3BlcnR5IGlzIG5vbi1pbnRlcnBvbGFibGU7IHJhdGhlciwgaXRzIHZhbHVlcyB3aWxsIGJlIGNyb3NzLWZhZGVkIHRvIHNtb290aGx5IHRyYW5zaXRpb24gYmV0d2VlbiBpbnRlZ2VyIHpvb21zLiJ9LCJjcm9zcy1mYWRlZC1kYXRhLWRyaXZlbiI6e3R5cGU6InByb3BlcnR5LXR5cGUiLGRvYzoiUHJvcGVydHkgaXMgbm9uLWludGVycG9sYWJsZTsgcmF0aGVyLCBpdHMgdmFsdWVzIHdpbGwgYmUgY3Jvc3MtZmFkZWQgdG8gc21vb3RobHkgdHJhbnNpdGlvbiBiZXR3ZWVuIGludGVnZXIgem9vbXMuIEl0IGNhbiBiZSByZXByZXNlbnRlZCB1c2luZyBhIHByb3BlcnR5IGV4cHJlc3Npb24uIn0sImNvbG9yLXJhbXAiOnt0eXBlOiJwcm9wZXJ0eS10eXBlIixkb2M6IlByb3BlcnR5IHNob3VsZCBiZSBzcGVjaWZpZWQgdXNpbmcgYSBjb2xvciByYW1wIGZyb20gd2hpY2ggdGhlIG91dHB1dCBjb2xvciBjYW4gYmUgc2FtcGxlZCBiYXNlZCBvbiBhIHByb3BlcnR5IGNhbGN1bGF0aW9uLiJ9LCJkYXRhLWNvbnN0YW50Ijp7dHlwZToicHJvcGVydHktdHlwZSIsZG9jOiJQcm9wZXJ0eSBpcyBpbnRlcnBvbGFibGUgYnV0IGNhbm5vdCBiZSByZXByZXNlbnRlZCB1c2luZyBhIHByb3BlcnR5IGV4cHJlc3Npb24uIn0sY29uc3RhbnQ6e3R5cGU6InByb3BlcnR5LXR5cGUiLGRvYzoiUHJvcGVydHkgaXMgY29uc3RhbnQgYWNyb3NzIGFsbCB6b29tIGxldmVscyBhbmQgcHJvcGVydHkgdmFsdWVzLiJ9fSxwcm9tb3RlSWQ6eyIqIjp7dHlwZToic3RyaW5nIixkb2M6IkEgbmFtZSBvZiBhIGZlYXR1cmUgcHJvcGVydHkgdG8gdXNlIGFzIElEIGZvciBmZWF0dXJlIHN0YXRlLiJ9fX0scj0vKCIoPzpbXlxcIl18XFwuKSoiKXxbOixdL2csbz1mdW5jdGlvbihlLHQpe3ZhciBvLG4saTtyZXR1cm4gdD10fHx7fSxvPUpTT04uc3RyaW5naWZ5KFsxXSx2b2lkIDAsdm9pZCAwPT09dC5pbmRlbnQ/Mjp0LmluZGVudCkuc2xpY2UoMiwtMyksbj0iIj09PW8/MS8wOnZvaWQgMD09PXQubWF4TGVuZ3RoPzgwOnQubWF4TGVuZ3RoLGk9dC5yZXBsYWNlcixmdW5jdGlvbiBlKHQsYSxzKXt2YXIgbCx1LGMscCxkLGgsZix5LG0sZyx2LGI7aWYodCYmImZ1bmN0aW9uIj09dHlwZW9mIHQudG9KU09OJiYodD10LnRvSlNPTigpKSx2b2lkIDA9PT0odj1KU09OLnN0cmluZ2lmeSh0LGkpKSlyZXR1cm4gdjtpZihmPW4tYS5sZW5ndGgtcyx2Lmxlbmd0aDw9ZiYmKG09di5yZXBsYWNlKHIsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR8fGUrIiAifSkpKS5sZW5ndGg8PWYpcmV0dXJuIG07aWYobnVsbCE9aSYmKHQ9SlNPTi5wYXJzZSh2KSxpPXZvaWQgMCksIm9iamVjdCI9PXR5cGVvZiB0JiZudWxsIT09dCl7aWYoeT1hK28sYz1bXSx1PTAsQXJyYXkuaXNBcnJheSh0KSlmb3IoZz0iWyIsbD0iXSIsZj10Lmxlbmd0aDt1PGY7dSsrKWMucHVzaChlKHRbdV0seSx1PT09Zi0xPzA6MSl8fCJudWxsIik7ZWxzZSBmb3IoZz0ieyIsbD0ifSIsZj0oaD1PYmplY3Qua2V5cyh0KSkubGVuZ3RoO3U8Zjt1KyspcD1oW3VdLGQ9SlNPTi5zdHJpbmdpZnkocCkrIjogIix2b2lkIDAhPT0oYj1lKHRbcF0seSxkLmxlbmd0aCsodT09PWYtMT8wOjEpKSkmJmMucHVzaChkK2IpO2lmKGMubGVuZ3RoPjApcmV0dXJuW2csbytjLmpvaW4oIixcbiIreSksbF0uam9pbigiXG4iK2EpfXJldHVybiB2fShlLCIiLDApfTtmdW5jdGlvbiBuKGUsdCl7dmFyIHI9e307Zm9yKHZhciBvIGluIHQpdm9pZCAwIT09ZVtvXSYmKHJbb109ZVtvXSk7Zm9yKHZhciBuIGluIGUpdm9pZCAwPT09cltuXSYmKHJbbl09ZVtuXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gYShlLHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj0yKSwoZT1uKGUsdC4kcm9vdCkpLmxheWVycyYmKGUubGF5ZXJzPWUubGF5ZXJzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSx0LmxheWVyKX0pKSksbyhlLHtpbmRlbnQ6cn0pfXZhciBzPSJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsVGhpcz9nbG9iYWxUaGlzOiJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp2b2lkIDAhPT1pP2k6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmP3NlbGY6e307ZnVuY3Rpb24gbCgpe3Rocm93IG5ldyBFcnJvcigiRHluYW1pYyByZXF1aXJlcyBhcmUgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgcm9sbHVwLXBsdWdpbi1jb21tb25qcyIpfWZ1bmN0aW9uIHUoZSx0KXtyZXR1cm4gZSh0PXtleHBvcnRzOnt9fSx0LmV4cG9ydHMpLHQuZXhwb3J0c312YXIgYz11KChmdW5jdGlvbihlLHQpeyFmdW5jdGlvbihyKXt2YXIgbz10JiYhdC5ub2RlVHlwZSYmdCxuPWUmJiFlLm5vZGVUeXBlJiZlLGk9Im9iamVjdCI9PXR5cGVvZiBzJiZzO2kuZ2xvYmFsIT09aSYmaS53aW5kb3chPT1pJiZpLnNlbGYhPT1pfHwocj1pKTt2YXIgYSxsLHU9MjE0NzQ4MzY0NyxjPTM2LHA9MSxkPTI2LGg9MzgsZj03MDAseT03MixtPTEyOCxnPSItIix2PS9eeG4tLS8sYj0vW15ceDIwLVx4N0VdLyx4PS9bXHgyRVx1MzAwMlx1RkYwRVx1RkY2MV0vZyx3PXtvdmVyZmxvdzoiT3ZlcmZsb3c6IGlucHV0IG5lZWRzIHdpZGVyIGludGVnZXJzIHRvIHByb2Nlc3MiLCJub3QtYmFzaWMiOiJJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpIiwiaW52YWxpZC1pbnB1dCI6IkludmFsaWQgaW5wdXQifSxrPWMtcCxqPU1hdGguZmxvb3Isej1TdHJpbmcuZnJvbUNoYXJDb2RlO2Z1bmN0aW9uIFQoZSl7dGhyb3cgUmFuZ2VFcnJvcih3W2VdKX1mdW5jdGlvbiBfKGUsdCl7Zm9yKHZhciByPWUubGVuZ3RoLG89W107ci0tOylvW3JdPXQoZVtyXSk7cmV0dXJuIG99ZnVuY3Rpb24gUyhlLHQpe3ZhciByPWUuc3BsaXQoIkAiKSxvPSIiO3JldHVybiByLmxlbmd0aD4xJiYobz1yWzBdKyJAIixlPXJbMV0pLG8rXygoZT1lLnJlcGxhY2UoeCwiLiIpKS5zcGxpdCgiLiIpLHQpLmpvaW4oIi4iKX1mdW5jdGlvbiBBKGUpe2Zvcih2YXIgdCxyLG89W10sbj0wLGk9ZS5sZW5ndGg7bjxpOykodD1lLmNoYXJDb2RlQXQobisrKSk+PTU1Mjk2JiZ0PD01NjMxOSYmbjxpPzU2MzIwPT0oNjQ1MTImKHI9ZS5jaGFyQ29kZUF0KG4rKykpKT9vLnB1c2goKCgxMDIzJnQpPDwxMCkrKDEwMjMmcikrNjU1MzYpOihvLnB1c2godCksbi0tKTpvLnB1c2godCk7cmV0dXJuIG99ZnVuY3Rpb24gSShlKXtyZXR1cm4gXyhlLChmdW5jdGlvbihlKXt2YXIgdD0iIjtyZXR1cm4gZT42NTUzNSYmKHQrPXooKGUtPTY1NTM2KT4+PjEwJjEwMjN8NTUyOTYpLGU9NTYzMjB8MTAyMyZlKSx0Kz16KGUpfSkpLmpvaW4oIiIpfWZ1bmN0aW9uIEMoZSl7cmV0dXJuIGUtNDg8MTA/ZS0yMjplLTY1PDI2P2UtNjU6ZS05NzwyNj9lLTk3OmN9ZnVuY3Rpb24gTyhlLHQpe3JldHVybiBlKzIyKzc1KihlPDI2KS0oKDAhPXQpPDw1KX1mdW5jdGlvbiBFKGUsdCxyKXt2YXIgbz0wO2ZvcihlPXI/aihlL2YpOmU+PjEsZSs9aihlL3QpO2U+aypkPj4xO28rPWMpZT1qKGUvayk7cmV0dXJuIGoobysoaysxKSplLyhlK2gpKX1mdW5jdGlvbiBxKGUpe3ZhciB0LHIsbyxuLGksYSxzLGwsaCxmLHY9W10sYj1lLmxlbmd0aCx4PTAsdz1tLGs9eTtmb3IoKHI9ZS5sYXN0SW5kZXhPZihnKSk8MCYmKHI9MCksbz0wO288cjsrK28pZS5jaGFyQ29kZUF0KG8pPj0xMjgmJlQoIm5vdC1iYXNpYyIpLHYucHVzaChlLmNoYXJDb2RlQXQobykpO2ZvcihuPXI+MD9yKzE6MDtuPGI7KXtmb3IoaT14LGE9MSxzPWM7bj49YiYmVCgiaW52YWxpZC1pbnB1dCIpLCgobD1DKGUuY2hhckNvZGVBdChuKyspKSk+PWN8fGw+aigodS14KS9hKSkmJlQoIm92ZXJmbG93IikseCs9bCphLCEobDwoaD1zPD1rP3A6cz49aytkP2Q6cy1rKSk7cys9YylhPmoodS8oZj1jLWgpKSYmVCgib3ZlcmZsb3ciKSxhKj1mO2s9RSh4LWksdD12Lmxlbmd0aCsxLDA9PWkpLGooeC90KT51LXcmJlQoIm92ZXJmbG93Iiksdys9aih4L3QpLHglPXQsdi5zcGxpY2UoeCsrLDAsdyl9cmV0dXJuIEkodil9ZnVuY3Rpb24gTShlKXt2YXIgdCxyLG8sbixpLGEscyxsLGgsZix2LGIseCx3LGssXz1bXTtmb3IoYj0oZT1BKGUpKS5sZW5ndGgsdD1tLHI9MCxpPXksYT0wO2E8YjsrK2EpKHY9ZVthXSk8MTI4JiZfLnB1c2goeih2KSk7Zm9yKG89bj1fLmxlbmd0aCxuJiZfLnB1c2goZyk7bzxiOyl7Zm9yKHM9dSxhPTA7YTxiOysrYSkodj1lW2FdKT49dCYmdjxzJiYocz12KTtmb3Iocy10PmooKHUtcikvKHg9bysxKSkmJlQoIm92ZXJmbG93Iikscis9KHMtdCkqeCx0PXMsYT0wO2E8YjsrK2EpaWYoKHY9ZVthXSk8dCYmKytyPnUmJlQoIm92ZXJmbG93Iiksdj09dCl7Zm9yKGw9cixoPWM7IShsPChmPWg8PWk/cDpoPj1pK2Q/ZDpoLWkpKTtoKz1jKWs9bC1mLHc9Yy1mLF8ucHVzaCh6KE8oZitrJXcsMCkpKSxsPWooay93KTtfLnB1c2goeihPKGwsMCkpKSxpPUUocix4LG89PW4pLHI9MCwrK299KytyLCsrdH1yZXR1cm4gXy5qb2luKCIiKX1mdW5jdGlvbiBOKGUpe3JldHVybiBTKGUsKGZ1bmN0aW9uKGUpe3JldHVybiB2LnRlc3QoZSk/cShlLnNsaWNlKDQpLnRvTG93ZXJDYXNlKCkpOmV9KSl9ZnVuY3Rpb24gUihlKXtyZXR1cm4gUyhlLChmdW5jdGlvbihlKXtyZXR1cm4gYi50ZXN0KGUpPyJ4bi0tIitNKGUpOmV9KSl9aWYoYT17dmVyc2lvbjoiMS4zLjIiLHVjczI6e2RlY29kZTpBLGVuY29kZTpJfSxkZWNvZGU6cSxlbmNvZGU6TSx0b0FTQ0lJOlIsdG9Vbmljb2RlOk59LG8mJm4paWYoZS5leHBvcnRzPT1vKW4uZXhwb3J0cz1hO2Vsc2UgZm9yKGwgaW4gYSlhLmhhc093blByb3BlcnR5KGwpJiYob1tsXT1hW2xdKTtlbHNlIHIucHVueWNvZGU9YX0ocyl9KSkscD17aXNTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlfSxpc09iamVjdDpmdW5jdGlvbihlKXtyZXR1cm4ib2JqZWN0Ij09dHlwZW9mIGUmJm51bGwhPT1lfSxpc051bGw6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lfSxpc051bGxPclVuZGVmaW5lZDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZX19O2Z1bmN0aW9uIGQoZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9dmFyIGg9ZnVuY3Rpb24oZSx0LHIsbyl7dD10fHwiJiIscj1yfHwiPSI7dmFyIG49e307aWYoInN0cmluZyIhPXR5cGVvZiBlfHwwPT09ZS5sZW5ndGgpcmV0dXJuIG47dmFyIGk9L1wrL2c7ZT1lLnNwbGl0KHQpO3ZhciBhPTFlMztvJiYibnVtYmVyIj09dHlwZW9mIG8ubWF4S2V5cyYmKGE9by5tYXhLZXlzKTt2YXIgcz1lLmxlbmd0aDthPjAmJnM+YSYmKHM9YSk7Zm9yKHZhciBsPTA7bDxzOysrbCl7dmFyIHUsYyxwLGgsZj1lW2xdLnJlcGxhY2UoaSwiJTIwIikseT1mLmluZGV4T2Yocik7eT49MD8odT1mLnN1YnN0cigwLHkpLGM9Zi5zdWJzdHIoeSsxKSk6KHU9ZixjPSIiKSxwPWRlY29kZVVSSUNvbXBvbmVudCh1KSxoPWRlY29kZVVSSUNvbXBvbmVudChjKSxkKG4scCk/QXJyYXkuaXNBcnJheShuW3BdKT9uW3BdLnB1c2goaCk6bltwXT1bbltwXSxoXTpuW3BdPWh9cmV0dXJuIG59LGY9ZnVuY3Rpb24oZSl7c3dpdGNoKHR5cGVvZiBlKXtjYXNlInN0cmluZyI6cmV0dXJuIGU7Y2FzZSJib29sZWFuIjpyZXR1cm4gZT8idHJ1ZSI6ImZhbHNlIjtjYXNlIm51bWJlciI6cmV0dXJuIGlzRmluaXRlKGUpP2U6IiI7ZGVmYXVsdDpyZXR1cm4iIn19LHk9ZnVuY3Rpb24oZSx0LHIsbyl7cmV0dXJuIHQ9dHx8IiYiLHI9cnx8Ij0iLG51bGw9PT1lJiYoZT12b2lkIDApLCJvYmplY3QiPT10eXBlb2YgZT9PYmplY3Qua2V5cyhlKS5tYXAoKGZ1bmN0aW9uKG8pe3ZhciBuPWVuY29kZVVSSUNvbXBvbmVudChmKG8pKStyO3JldHVybiBBcnJheS5pc0FycmF5KGVbb10pP2Vbb10ubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbitlbmNvZGVVUklDb21wb25lbnQoZihlKSl9KSkuam9pbih0KTpuK2VuY29kZVVSSUNvbXBvbmVudChmKGVbb10pKX0pKS5qb2luKHQpOm8/ZW5jb2RlVVJJQ29tcG9uZW50KGYobykpK3IrZW5jb2RlVVJJQ29tcG9uZW50KGYoZSkpOiIifSxtPXUoKGZ1bmN0aW9uKGUsdCl7dC5kZWNvZGU9dC5wYXJzZT1oLHQuZW5jb2RlPXQuc3RyaW5naWZ5PXl9KSk7bS5kZWNvZGUsbS5wYXJzZSxtLmVuY29kZSxtLnN0cmluZ2lmeTt2YXIgZz1SLHY9UCxiPUYseD1ELHc9aztmdW5jdGlvbiBrKCl7dGhpcy5wcm90b2NvbD1udWxsLHRoaXMuc2xhc2hlcz1udWxsLHRoaXMuYXV0aD1udWxsLHRoaXMuaG9zdD1udWxsLHRoaXMucG9ydD1udWxsLHRoaXMuaG9zdG5hbWU9bnVsbCx0aGlzLmhhc2g9bnVsbCx0aGlzLnNlYXJjaD1udWxsLHRoaXMucXVlcnk9bnVsbCx0aGlzLnBhdGhuYW1lPW51bGwsdGhpcy5wYXRoPW51bGwsdGhpcy5ocmVmPW51bGx9dmFyIGo9L14oW2EtejAtOS4rLV0rOikvaSx6PS86WzAtOV0qJC8sVD0vXihcL1wvPyg/IVwvKVteXD9cc10qKShcP1teXHNdKik/JC8sXz1bInsiLCJ9IiwifCIsIlxcIiwiXiIsImAiXS5jb25jYXQoWyI8IiwiPiIsJyInLCJgIiwiICIsIlxyIiwiXG4iLCJcdCJdKSxTPVsiJyJdLmNvbmNhdChfKSxBPVsiJSIsIi8iLCI/IiwiOyIsIiMiXS5jb25jYXQoUyksST1bIi8iLCI/IiwiIyJdLEM9MjU1LE89L15bK2EtejAtOUEtWl8tXXswLDYzfSQvLEU9L14oWythLXowLTlBLVpfLV17MCw2M30pKC4qKSQvLHE9e2phdmFzY3JpcHQ6ITAsImphdmFzY3JpcHQ6IjohMH0sTT17amF2YXNjcmlwdDohMCwiamF2YXNjcmlwdDoiOiEwfSxOPXtodHRwOiEwLGh0dHBzOiEwLGZ0cDohMCxnb3BoZXI6ITAsZmlsZTohMCwiaHR0cDoiOiEwLCJodHRwczoiOiEwLCJmdHA6IjohMCwiZ29waGVyOiI6ITAsImZpbGU6IjohMH07ZnVuY3Rpb24gUihlLHQscil7aWYoZSYmcC5pc09iamVjdChlKSYmZSBpbnN0YW5jZW9mIGspcmV0dXJuIGU7dmFyIG89bmV3IGs7cmV0dXJuIG8ucGFyc2UoZSx0LHIpLG99ZnVuY3Rpb24gRChlKXtyZXR1cm4gcC5pc1N0cmluZyhlKSYmKGU9UihlKSksZSBpbnN0YW5jZW9mIGs/ZS5mb3JtYXQoKTprLnByb3RvdHlwZS5mb3JtYXQuY2FsbChlKX1mdW5jdGlvbiBQKGUsdCl7cmV0dXJuIFIoZSwhMSwhMCkucmVzb2x2ZSh0KX1mdW5jdGlvbiBGKGUsdCl7cmV0dXJuIGU/UihlLCExLCEwKS5yZXNvbHZlT2JqZWN0KHQpOnR9ay5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSx0LHIpe2lmKCFwLmlzU3RyaW5nKGUpKXRocm93IG5ldyBUeXBlRXJyb3IoIlBhcmFtZXRlciAndXJsJyBtdXN0IGJlIGEgc3RyaW5nLCBub3QgIit0eXBlb2YgZSk7dmFyIG89ZS5pbmRleE9mKCI/Iiksbj0tMSE9PW8mJm88ZS5pbmRleE9mKCIjIik/Ij8iOiIjIixpPWUuc3BsaXQobiksYT0vXFwvZztpWzBdPWlbMF0ucmVwbGFjZShhLCIvIik7dmFyIHM9ZT1pLmpvaW4obik7aWYocz1zLnRyaW0oKSwhciYmMT09PWUuc3BsaXQoIiMiKS5sZW5ndGgpe3ZhciBsPVQuZXhlYyhzKTtpZihsKXJldHVybiB0aGlzLnBhdGg9cyx0aGlzLmhyZWY9cyx0aGlzLnBhdGhuYW1lPWxbMV0sbFsyXT8odGhpcy5zZWFyY2g9bFsyXSx0aGlzLnF1ZXJ5PXQ/bS5wYXJzZSh0aGlzLnNlYXJjaC5zdWJzdHIoMSkpOnRoaXMuc2VhcmNoLnN1YnN0cigxKSk6dCYmKHRoaXMuc2VhcmNoPSIiLHRoaXMucXVlcnk9e30pLHRoaXN9dmFyIHU9ai5leGVjKHMpO2lmKHUpe3ZhciBkPSh1PXVbMF0pLnRvTG93ZXJDYXNlKCk7dGhpcy5wcm90b2NvbD1kLHM9cy5zdWJzdHIodS5sZW5ndGgpfWlmKHJ8fHV8fHMubWF0Y2goL15cL1wvW15AXC9dK0BbXkBcL10rLykpe3ZhciBoPSIvLyI9PT1zLnN1YnN0cigwLDIpOyFofHx1JiZNW3VdfHwocz1zLnN1YnN0cigyKSx0aGlzLnNsYXNoZXM9ITApfWlmKCFNW3VdJiYoaHx8dSYmIU5bdV0pKXtmb3IodmFyIGYseSxnPS0xLHY9MDt2PEkubGVuZ3RoO3YrKyktMSE9PShiPXMuaW5kZXhPZihJW3ZdKSkmJigtMT09PWd8fGI8ZykmJihnPWIpO2ZvcigtMSE9PSh5PS0xPT09Zz9zLmxhc3RJbmRleE9mKCJAIik6cy5sYXN0SW5kZXhPZigiQCIsZykpJiYoZj1zLnNsaWNlKDAseSkscz1zLnNsaWNlKHkrMSksdGhpcy5hdXRoPWRlY29kZVVSSUNvbXBvbmVudChmKSksZz0tMSx2PTA7djxBLmxlbmd0aDt2Kyspe3ZhciBiOy0xIT09KGI9cy5pbmRleE9mKEFbdl0pKSYmKC0xPT09Z3x8YjxnKSYmKGc9Yil9LTE9PT1nJiYoZz1zLmxlbmd0aCksdGhpcy5ob3N0PXMuc2xpY2UoMCxnKSxzPXMuc2xpY2UoZyksdGhpcy5wYXJzZUhvc3QoKSx0aGlzLmhvc3RuYW1lPXRoaXMuaG9zdG5hbWV8fCIiO3ZhciB4PSJbIj09PXRoaXMuaG9zdG5hbWVbMF0mJiJdIj09PXRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGgtMV07aWYoIXgpZm9yKHZhciB3PXRoaXMuaG9zdG5hbWUuc3BsaXQoL1wuLyksaz0odj0wLHcubGVuZ3RoKTt2PGs7disrKXt2YXIgej13W3ZdO2lmKHomJiF6Lm1hdGNoKE8pKXtmb3IodmFyIF89IiIsUj0wLEQ9ei5sZW5ndGg7UjxEO1IrKyl6LmNoYXJDb2RlQXQoUik+MTI3P18rPSJ4IjpfKz16W1JdO2lmKCFfLm1hdGNoKE8pKXt2YXIgUD13LnNsaWNlKDAsdiksRj13LnNsaWNlKHYrMSksTD16Lm1hdGNoKEUpO0wmJihQLnB1c2goTFsxXSksRi51bnNoaWZ0KExbMl0pKSxGLmxlbmd0aCYmKHM9Ii8iK0Yuam9pbigiLiIpK3MpLHRoaXMuaG9zdG5hbWU9UC5qb2luKCIuIik7YnJlYWt9fX10aGlzLmhvc3RuYW1lLmxlbmd0aD5DP3RoaXMuaG9zdG5hbWU9IiI6dGhpcy5ob3N0bmFtZT10aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCkseHx8KHRoaXMuaG9zdG5hbWU9Yy50b0FTQ0lJKHRoaXMuaG9zdG5hbWUpKTt2YXIgJD10aGlzLnBvcnQ/IjoiK3RoaXMucG9ydDoiIixVPXRoaXMuaG9zdG5hbWV8fCIiO3RoaXMuaG9zdD1VKyQsdGhpcy5ocmVmKz10aGlzLmhvc3QseCYmKHRoaXMuaG9zdG5hbWU9dGhpcy5ob3N0bmFtZS5zdWJzdHIoMSx0aGlzLmhvc3RuYW1lLmxlbmd0aC0yKSwiLyIhPT1zWzBdJiYocz0iLyIrcykpfWlmKCFxW2RdKWZvcih2PTAsaz1TLmxlbmd0aDt2PGs7disrKXt2YXIgSj1TW3ZdO2lmKC0xIT09cy5pbmRleE9mKEopKXt2YXIgVz1lbmNvZGVVUklDb21wb25lbnQoSik7Vz09PUomJihXPWVzY2FwZShKKSkscz1zLnNwbGl0KEopLmpvaW4oVyl9fXZhciBHPXMuaW5kZXhPZigiIyIpOy0xIT09RyYmKHRoaXMuaGFzaD1zLnN1YnN0cihHKSxzPXMuc2xpY2UoMCxHKSk7dmFyIEI9cy5pbmRleE9mKCI/Iik7aWYoLTEhPT1CPyh0aGlzLnNlYXJjaD1zLnN1YnN0cihCKSx0aGlzLnF1ZXJ5PXMuc3Vic3RyKEIrMSksdCYmKHRoaXMucXVlcnk9bS5wYXJzZSh0aGlzLnF1ZXJ5KSkscz1zLnNsaWNlKDAsQikpOnQmJih0aGlzLnNlYXJjaD0iIix0aGlzLnF1ZXJ5PXt9KSxzJiYodGhpcy5wYXRobmFtZT1zKSxOW2RdJiZ0aGlzLmhvc3RuYW1lJiYhdGhpcy5wYXRobmFtZSYmKHRoaXMucGF0aG5hbWU9Ii8iKSx0aGlzLnBhdGhuYW1lfHx0aGlzLnNlYXJjaCl7JD10aGlzLnBhdGhuYW1lfHwiIjt2YXIgVj10aGlzLnNlYXJjaHx8IiI7dGhpcy5wYXRoPSQrVn1yZXR1cm4gdGhpcy5ocmVmPXRoaXMuZm9ybWF0KCksdGhpc30say5wcm90b3R5cGUuZm9ybWF0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5hdXRofHwiIjtlJiYoZT0oZT1lbmNvZGVVUklDb21wb25lbnQoZSkpLnJlcGxhY2UoLyUzQS9pLCI6IiksZSs9IkAiKTt2YXIgdD10aGlzLnByb3RvY29sfHwiIixyPXRoaXMucGF0aG5hbWV8fCIiLG89dGhpcy5oYXNofHwiIixuPSExLGk9IiI7dGhpcy5ob3N0P249ZSt0aGlzLmhvc3Q6dGhpcy5ob3N0bmFtZSYmKG49ZSsoLTE9PT10aGlzLmhvc3RuYW1lLmluZGV4T2YoIjoiKT90aGlzLmhvc3RuYW1lOiJbIit0aGlzLmhvc3RuYW1lKyJdIiksdGhpcy5wb3J0JiYobis9IjoiK3RoaXMucG9ydCkpLHRoaXMucXVlcnkmJnAuaXNPYmplY3QodGhpcy5xdWVyeSkmJk9iamVjdC5rZXlzKHRoaXMucXVlcnkpLmxlbmd0aCYmKGk9bS5zdHJpbmdpZnkodGhpcy5xdWVyeSkpO3ZhciBhPXRoaXMuc2VhcmNofHxpJiYiPyIraXx8IiI7cmV0dXJuIHQmJiI6IiE9PXQuc3Vic3RyKC0xKSYmKHQrPSI6IiksdGhpcy5zbGFzaGVzfHwoIXR8fE5bdF0pJiYhMSE9PW4/KG49Ii8vIisobnx8IiIpLHImJiIvIiE9PXIuY2hhckF0KDApJiYocj0iLyIrcikpOm58fChuPSIiKSxvJiYiIyIhPT1vLmNoYXJBdCgwKSYmKG89IiMiK28pLGEmJiI/IiE9PWEuY2hhckF0KDApJiYoYT0iPyIrYSksdCtuKyhyPXIucmVwbGFjZSgvWz8jXS9nLChmdW5jdGlvbihlKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGUpfSkpKSsoYT1hLnJlcGxhY2UoIiMiLCIlMjMiKSkrb30say5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZXNvbHZlT2JqZWN0KFIoZSwhMSwhMCkpLmZvcm1hdCgpfSxrLnByb3RvdHlwZS5yZXNvbHZlT2JqZWN0PWZ1bmN0aW9uKGUpe2lmKHAuaXNTdHJpbmcoZSkpe3ZhciB0PW5ldyBrO3QucGFyc2UoZSwhMSwhMCksZT10fWZvcih2YXIgcj1uZXcgayxvPU9iamVjdC5rZXlzKHRoaXMpLG49MDtuPG8ubGVuZ3RoO24rKyl7dmFyIGk9b1tuXTtyW2ldPXRoaXNbaV19aWYoci5oYXNoPWUuaGFzaCwiIj09PWUuaHJlZilyZXR1cm4gci5ocmVmPXIuZm9ybWF0KCkscjtpZihlLnNsYXNoZXMmJiFlLnByb3RvY29sKXtmb3IodmFyIGE9T2JqZWN0LmtleXMoZSkscz0wO3M8YS5sZW5ndGg7cysrKXt2YXIgbD1hW3NdOyJwcm90b2NvbCIhPT1sJiYocltsXT1lW2xdKX1yZXR1cm4gTltyLnByb3RvY29sXSYmci5ob3N0bmFtZSYmIXIucGF0aG5hbWUmJihyLnBhdGg9ci5wYXRobmFtZT0iLyIpLHIuaHJlZj1yLmZvcm1hdCgpLHJ9aWYoZS5wcm90b2NvbCYmZS5wcm90b2NvbCE9PXIucHJvdG9jb2wpe2lmKCFOW2UucHJvdG9jb2xdKXtmb3IodmFyIHU9T2JqZWN0LmtleXMoZSksYz0wO2M8dS5sZW5ndGg7YysrKXt2YXIgZD11W2NdO3JbZF09ZVtkXX1yZXR1cm4gci5ocmVmPXIuZm9ybWF0KCkscn1pZihyLnByb3RvY29sPWUucHJvdG9jb2wsZS5ob3N0fHxNW2UucHJvdG9jb2xdKXIucGF0aG5hbWU9ZS5wYXRobmFtZTtlbHNle2Zvcih2YXIgaD0oZS5wYXRobmFtZXx8IiIpLnNwbGl0KCIvIik7aC5sZW5ndGgmJiEoZS5ob3N0PWguc2hpZnQoKSk7KTtlLmhvc3R8fChlLmhvc3Q9IiIpLGUuaG9zdG5hbWV8fChlLmhvc3RuYW1lPSIiKSwiIiE9PWhbMF0mJmgudW5zaGlmdCgiIiksaC5sZW5ndGg8MiYmaC51bnNoaWZ0KCIiKSxyLnBhdGhuYW1lPWguam9pbigiLyIpfWlmKHIuc2VhcmNoPWUuc2VhcmNoLHIucXVlcnk9ZS5xdWVyeSxyLmhvc3Q9ZS5ob3N0fHwiIixyLmF1dGg9ZS5hdXRoLHIuaG9zdG5hbWU9ZS5ob3N0bmFtZXx8ZS5ob3N0LHIucG9ydD1lLnBvcnQsci5wYXRobmFtZXx8ci5zZWFyY2gpe3ZhciBmPXIucGF0aG5hbWV8fCIiLHk9ci5zZWFyY2h8fCIiO3IucGF0aD1mK3l9cmV0dXJuIHIuc2xhc2hlcz1yLnNsYXNoZXN8fGUuc2xhc2hlcyxyLmhyZWY9ci5mb3JtYXQoKSxyfXZhciBtPXIucGF0aG5hbWUmJiIvIj09PXIucGF0aG5hbWUuY2hhckF0KDApLGc9ZS5ob3N0fHxlLnBhdGhuYW1lJiYiLyI9PT1lLnBhdGhuYW1lLmNoYXJBdCgwKSx2PWd8fG18fHIuaG9zdCYmZS5wYXRobmFtZSxiPXYseD1yLnBhdGhuYW1lJiZyLnBhdGhuYW1lLnNwbGl0KCIvIil8fFtdLHc9KGg9ZS5wYXRobmFtZSYmZS5wYXRobmFtZS5zcGxpdCgiLyIpfHxbXSxyLnByb3RvY29sJiYhTltyLnByb3RvY29sXSk7aWYodyYmKHIuaG9zdG5hbWU9IiIsci5wb3J0PW51bGwsci5ob3N0JiYoIiI9PT14WzBdP3hbMF09ci5ob3N0OngudW5zaGlmdChyLmhvc3QpKSxyLmhvc3Q9IiIsZS5wcm90b2NvbCYmKGUuaG9zdG5hbWU9bnVsbCxlLnBvcnQ9bnVsbCxlLmhvc3QmJigiIj09PWhbMF0/aFswXT1lLmhvc3Q6aC51bnNoaWZ0KGUuaG9zdCkpLGUuaG9zdD1udWxsKSx2PXYmJigiIj09PWhbMF18fCIiPT09eFswXSkpLGcpci5ob3N0PWUuaG9zdHx8IiI9PT1lLmhvc3Q/ZS5ob3N0OnIuaG9zdCxyLmhvc3RuYW1lPWUuaG9zdG5hbWV8fCIiPT09ZS5ob3N0bmFtZT9lLmhvc3RuYW1lOnIuaG9zdG5hbWUsci5zZWFyY2g9ZS5zZWFyY2gsci5xdWVyeT1lLnF1ZXJ5LHg9aDtlbHNlIGlmKGgubGVuZ3RoKXh8fCh4PVtdKSx4LnBvcCgpLHg9eC5jb25jYXQoaCksci5zZWFyY2g9ZS5zZWFyY2gsci5xdWVyeT1lLnF1ZXJ5O2Vsc2UgaWYoIXAuaXNOdWxsT3JVbmRlZmluZWQoZS5zZWFyY2gpKXJldHVybiB3JiYoci5ob3N0bmFtZT1yLmhvc3Q9eC5zaGlmdCgpLChTPSEhKHIuaG9zdCYmci5ob3N0LmluZGV4T2YoIkAiKT4wKSYmci5ob3N0LnNwbGl0KCJAIikpJiYoci5hdXRoPVMuc2hpZnQoKSxyLmhvc3Q9ci5ob3N0bmFtZT1TLnNoaWZ0KCkpKSxyLnNlYXJjaD1lLnNlYXJjaCxyLnF1ZXJ5PWUucXVlcnkscC5pc051bGwoci5wYXRobmFtZSkmJnAuaXNOdWxsKHIuc2VhcmNoKXx8KHIucGF0aD0oci5wYXRobmFtZT9yLnBhdGhuYW1lOiIiKSsoci5zZWFyY2g/ci5zZWFyY2g6IiIpKSxyLmhyZWY9ci5mb3JtYXQoKSxyO2lmKCF4Lmxlbmd0aClyZXR1cm4gci5wYXRobmFtZT1udWxsLHIuc2VhcmNoP3IucGF0aD0iLyIrci5zZWFyY2g6ci5wYXRoPW51bGwsci5ocmVmPXIuZm9ybWF0KCkscjtmb3IodmFyIGo9eC5zbGljZSgtMSlbMF0sej0oci5ob3N0fHxlLmhvc3R8fHgubGVuZ3RoPjEpJiYoIi4iPT09anx8Ii4uIj09PWopfHwiIj09PWosVD0wLF89eC5sZW5ndGg7Xz49MDtfLS0pIi4iPT09KGo9eFtfXSk/eC5zcGxpY2UoXywxKToiLi4iPT09aj8oeC5zcGxpY2UoXywxKSxUKyspOlQmJih4LnNwbGljZShfLDEpLFQtLSk7aWYoIXYmJiFiKWZvcig7VC0tO1QpeC51bnNoaWZ0KCIuLiIpOyF2fHwiIj09PXhbMF18fHhbMF0mJiIvIj09PXhbMF0uY2hhckF0KDApfHx4LnVuc2hpZnQoIiIpLHomJiIvIiE9PXguam9pbigiLyIpLnN1YnN0cigtMSkmJngucHVzaCgiIik7dmFyIFMsQT0iIj09PXhbMF18fHhbMF0mJiIvIj09PXhbMF0uY2hhckF0KDApO3JldHVybiB3JiYoci5ob3N0bmFtZT1yLmhvc3Q9QT8iIjp4Lmxlbmd0aD94LnNoaWZ0KCk6IiIsKFM9ISEoci5ob3N0JiZyLmhvc3QuaW5kZXhPZigiQCIpPjApJiZyLmhvc3Quc3BsaXQoIkAiKSkmJihyLmF1dGg9Uy5zaGlmdCgpLHIuaG9zdD1yLmhvc3RuYW1lPVMuc2hpZnQoKSkpLCh2PXZ8fHIuaG9zdCYmeC5sZW5ndGgpJiYhQSYmeC51bnNoaWZ0KCIiKSx4Lmxlbmd0aD9yLnBhdGhuYW1lPXguam9pbigiLyIpOihyLnBhdGhuYW1lPW51bGwsci5wYXRoPW51bGwpLHAuaXNOdWxsKHIucGF0aG5hbWUpJiZwLmlzTnVsbChyLnNlYXJjaCl8fChyLnBhdGg9KHIucGF0aG5hbWU/ci5wYXRobmFtZToiIikrKHIuc2VhcmNoP3Iuc2VhcmNoOiIiKSksci5hdXRoPWUuYXV0aHx8ci5hdXRoLHIuc2xhc2hlcz1yLnNsYXNoZXN8fGUuc2xhc2hlcyxyLmhyZWY9ci5mb3JtYXQoKSxyfSxrLnByb3RvdHlwZS5wYXJzZUhvc3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhvc3QsdD16LmV4ZWMoZSk7dCYmKCI6IiE9PSh0PXRbMF0pJiYodGhpcy5wb3J0PXQuc3Vic3RyKDEpKSxlPWUuc3Vic3RyKDAsZS5sZW5ndGgtdC5sZW5ndGgpKSxlJiYodGhpcy5ob3N0bmFtZT1lKX07dmFyIEw9e3BhcnNlOmcscmVzb2x2ZTp2LHJlc29sdmVPYmplY3Q6Yixmb3JtYXQ6eCxVcmw6d307ZnVuY3Rpb24gJChlKXtmb3IodmFyIHI9MDtyPHQubGF5b3V0Lmxlbmd0aDtyKyspZm9yKHZhciBvIGluIHRbdC5sYXlvdXRbcl1dKWlmKG89PT1lKXJldHVybiB0W3QubGF5b3V0W3JdXVtvXTtmb3IodmFyIG49MDtuPHQucGFpbnQubGVuZ3RoO24rKylmb3IodmFyIGkgaW4gdFt0LnBhaW50W25dXSlpZihpPT09ZSlyZXR1cm4gdFt0LnBhaW50W25dXVtpXTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBVKGUsdCl7Zm9yKHZhciByIGluIGUuc291cmNlcyl0KGUuc291cmNlc1tyXSl9ZnVuY3Rpb24gSihlLHQpe2Zvcih2YXIgcj0wLG89ZS5sYXllcnM7cjxvLmxlbmd0aDtyKz0xKXQob1tyXSl9ZnVuY3Rpb24gVyhlLHQscil7ZnVuY3Rpb24gbyhlLHQpe3ZhciBvPWVbdF07byYmT2JqZWN0LmtleXMobykuZm9yRWFjaCgoZnVuY3Rpb24obil7cih7cGF0aDpbZS5pZCx0LG5dLGtleTpuLHZhbHVlOm9bbl0scmVmZXJlbmNlOiQobiksc2V0OmZ1bmN0aW9uKGUpe29bbl09ZX19KX0pKX1KKGUsKGZ1bmN0aW9uKGUpe3QucGFpbnQmJm8oZSwicGFpbnQiKSx0LmxheW91dCYmbyhlLCJsYXlvdXQiKX0pKX1mdW5jdGlvbiBHKGUsdCl7Zm9yKHZhciByIGluIGUpMD09PXIuaW5kZXhPZigibGF5b3V0IikmJnQoZVtyXSxyKX1mdW5jdGlvbiBCKGUsdCl7Zm9yKHZhciByIGluIGUpMD09PXIuaW5kZXhPZigicGFpbnQiKSYmdChlW3JdLHIpfWZ1bmN0aW9uIFYoZSx0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJiJAIj09PXRbMF0/VihlLGUuY29uc3RhbnRzW3RdKTp0fWZ1bmN0aW9uIEgoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZS5zdG9wcyl9ZnVuY3Rpb24gWihlLHQscil7ZVtyXT1lW3RdLGRlbGV0ZSBlW3RdfWZ1bmN0aW9uIFgoZSl7ZnVuY3Rpb24gdChlKXt2YXIgdD1MLnBhcnNlKGUpLHI9dC5wYXRobmFtZS5zcGxpdCgiLyIpO3JldHVybiJtYXBib3g6IiE9PXQucHJvdG9jb2w/ZToiZm9udHN0YWNrIj09PXQuaG9zdG5hbWU/Im1hcGJveDovL2ZvbnRzL21hcGJveC97Zm9udHN0YWNrfS97cmFuZ2V9LnBiZiI6ImZvbnRzIj09PXQuaG9zdG5hbWU/Im1hcGJveDovL2ZvbnRzLyIrclsyXSsiL3tmb250c3RhY2t9L3tyYW5nZX0ucGJmIjp2b2lkIDB9ZnVuY3Rpb24gcihlKXtmdW5jdGlvbiB0KGUpe3JldHVybiBlLnNwbGl0KCIsIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCl9KSl9aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZTtpZigic3RyaW5nIj09dHlwZW9mIGUpcmV0dXJuIHQoZSk7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXJldHVybiBlLnN0b3BzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2VbMV09dChlWzFdKX0pKSxlO3Rocm93IG5ldyBFcnJvcigidW5leHBlY3RlZCBmb250IHZhbHVlIil9ZS52ZXJzaW9uPTgsVShlLChmdW5jdGlvbihlKXsidmlkZW8iPT09ZS50eXBlJiZ2b2lkIDAhPT1lLnVybCYmWihlLCJ1cmwiLCJ1cmxzIiksInZpZGVvIj09PWUudHlwZSYmZS5jb29yZGluYXRlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXZlcnNlKCl9KSl9KSksSihlLChmdW5jdGlvbihlKXtHKGUsKGZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWVbInN5bWJvbC1taW4tZGlzdGFuY2UiXSYmWihlLCJzeW1ib2wtbWluLWRpc3RhbmNlIiwic3ltYm9sLXNwYWNpbmciKX0pKSxCKGUsKGZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWVbImJhY2tncm91bmQtaW1hZ2UiXSYmWihlLCJiYWNrZ3JvdW5kLWltYWdlIiwiYmFja2dyb3VuZC1wYXR0ZXJuIiksdm9pZCAwIT09ZVsibGluZS1pbWFnZSJdJiZaKGUsImxpbmUtaW1hZ2UiLCJsaW5lLXBhdHRlcm4iKSx2b2lkIDAhPT1lWyJmaWxsLWltYWdlIl0mJlooZSwiZmlsbC1pbWFnZSIsImZpbGwtcGF0dGVybiIpfSkpfSkpLFcoZSx7cGFpbnQ6ITAsbGF5b3V0OiEwfSwoZnVuY3Rpb24odCl7dmFyIHI9VihlLHQudmFsdWUpO0gocikmJnIuc3RvcHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dFsxXT1WKGUsdFsxXSl9KSksdC5zZXQocil9KSksZGVsZXRlIGUuY29uc3RhbnRzLEooZSwoZnVuY3Rpb24oZSl7RyhlLChmdW5jdGlvbihlKXtkZWxldGUgZVsidGV4dC1tYXgtc2l6ZSJdLGRlbGV0ZSBlWyJpY29uLW1heC1zaXplIl19KSksQihlLChmdW5jdGlvbih0KXt0WyJ0ZXh0LXNpemUiXSYmKGUubGF5b3V0fHwoZS5sYXlvdXQ9e30pLGUubGF5b3V0WyJ0ZXh0LXNpemUiXT10WyJ0ZXh0LXNpemUiXSxkZWxldGUgdFsidGV4dC1zaXplIl0pLHRbImljb24tc2l6ZSJdJiYoZS5sYXlvdXR8fChlLmxheW91dD17fSksZS5sYXlvdXRbImljb24tc2l6ZSJdPXRbImljb24tc2l6ZSJdLGRlbGV0ZSB0WyJpY29uLXNpemUiXSl9KSl9KSksZS5nbHlwaHMmJihlLmdseXBocz10KGUuZ2x5cGhzKSksSihlLChmdW5jdGlvbihlKXtHKGUsKGZ1bmN0aW9uKGUpe2VbInRleHQtZm9udCJdJiYoZVsidGV4dC1mb250Il09cihlWyJ0ZXh0LWZvbnQiXSkpfSkpfSkpO2Zvcih2YXIgbz0wLG49ZS5sYXllcnMubGVuZ3RoLTE7bj49MDtuLS0paWYoInN5bWJvbCIhPT1lLmxheWVyc1tuXS50eXBlKXtvPW4rMTticmVha312YXIgaT1lLmxheWVycy5zcGxpY2Uobyk7cmV0dXJuIGkucmV2ZXJzZSgpLGUubGF5ZXJzPWUubGF5ZXJzLmNvbmNhdChpKSxlfWZ1bmN0aW9uIEsoZSl7Zm9yKHZhciB0PVtdLHI9YXJndW1lbnRzLmxlbmd0aC0xO3ItLSA+MDspdFtyXT1hcmd1bWVudHNbcisxXTtmb3IodmFyIG89MCxuPXQ7bzxuLmxlbmd0aDtvKz0xKXt2YXIgaT1uW29dO2Zvcih2YXIgYSBpbiBpKWVbYV09aVthXX1yZXR1cm4gZX12YXIgWT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsciksdGhpcy5tZXNzYWdlPXIsdGhpcy5rZXk9dH1yZXR1cm4gZSYmKHQuX19wcm90b19fPWUpLHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSYmZS5wcm90b3R5cGUpLHQucHJvdG90eXBlLmNvbnN0cnVjdG9yPXQsdH0oRXJyb3IpLFE9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD1bXSksdGhpcy5wYXJlbnQ9ZSx0aGlzLmJpbmRpbmdzPXt9O2Zvcih2YXIgcj0wLG89dDtyPG8ubGVuZ3RoO3IrPTEpe3ZhciBuPW9bcl0saT1uWzBdLGE9blsxXTt0aGlzLmJpbmRpbmdzW2ldPWF9fTtRLnByb3RvdHlwZS5jb25jYXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBRKHRoaXMsZSl9LFEucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtpZih0aGlzLmJpbmRpbmdzW2VdKXJldHVybiB0aGlzLmJpbmRpbmdzW2VdO2lmKHRoaXMucGFyZW50KXJldHVybiB0aGlzLnBhcmVudC5nZXQoZSk7dGhyb3cgbmV3IEVycm9yKGUrIiBub3QgZm91bmQgaW4gc2NvcGUuIil9LFEucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuYmluZGluZ3NbZV18fCEhdGhpcy5wYXJlbnQmJnRoaXMucGFyZW50LmhhcyhlKX07dmFyIGVlPXtraW5kOiJudWxsIn0sdGU9e2tpbmQ6Im51bWJlciJ9LHJlPXtraW5kOiJzdHJpbmcifSxvZT17a2luZDoiYm9vbGVhbiJ9LG5lPXtraW5kOiJjb2xvciJ9LGllPXtraW5kOiJvYmplY3QifSxhZT17a2luZDoidmFsdWUifSxzZT17a2luZDoiZXJyb3IifSxsZT17a2luZDoiY29sbGF0b3IifSx1ZT17a2luZDoiZm9ybWF0dGVkIn0sY2U9e2tpbmQ6InJlc29sdmVkSW1hZ2UifTtmdW5jdGlvbiBwZShlLHQpe3JldHVybntraW5kOiJhcnJheSIsaXRlbVR5cGU6ZSxOOnR9fWZ1bmN0aW9uIGRlKGUpe2lmKCJhcnJheSI9PT1lLmtpbmQpe3ZhciB0PWRlKGUuaXRlbVR5cGUpO3JldHVybiJudW1iZXIiPT10eXBlb2YgZS5OPyJhcnJheTwiK3QrIiwgIitlLk4rIj4iOiJ2YWx1ZSI9PT1lLml0ZW1UeXBlLmtpbmQ/ImFycmF5IjoiYXJyYXk8Iit0KyI+In1yZXR1cm4gZS5raW5kfXZhciBoZT1bZWUsdGUscmUsb2UsbmUsdWUsaWUscGUoYWUpLGNlXTtmdW5jdGlvbiBmZShlLHQpe2lmKCJlcnJvciI9PT10LmtpbmQpcmV0dXJuIG51bGw7aWYoImFycmF5Ij09PWUua2luZCl7aWYoImFycmF5Ij09PXQua2luZCYmKDA9PT10Lk4mJiJ2YWx1ZSI9PT10Lml0ZW1UeXBlLmtpbmR8fCFmZShlLml0ZW1UeXBlLHQuaXRlbVR5cGUpKSYmKCJudW1iZXIiIT10eXBlb2YgZS5OfHxlLk49PT10Lk4pKXJldHVybiBudWxsfWVsc2V7aWYoZS5raW5kPT09dC5raW5kKXJldHVybiBudWxsO2lmKCJ2YWx1ZSI9PT1lLmtpbmQpZm9yKHZhciByPTAsbz1oZTtyPG8ubGVuZ3RoO3IrPTEpaWYoIWZlKG9bcl0sdCkpcmV0dXJuIG51bGx9cmV0dXJuIkV4cGVjdGVkICIrZGUoZSkrIiBidXQgZm91bmQgIitkZSh0KSsiIGluc3RlYWQuIn1mdW5jdGlvbiB5ZShlLHQpe3JldHVybiB0LnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmtpbmQ9PT1lLmtpbmR9KSl9ZnVuY3Rpb24gbWUoZSx0KXtyZXR1cm4gdC5zb21lKChmdW5jdGlvbih0KXtyZXR1cm4ibnVsbCI9PT10P251bGw9PT1lOiJhcnJheSI9PT10P0FycmF5LmlzQXJyYXkoZSk6Im9iamVjdCI9PT10P2UmJiFBcnJheS5pc0FycmF5KGUpJiYib2JqZWN0Ij09dHlwZW9mIGU6dD09PXR5cGVvZiBlfSkpfXZhciBnZT11KChmdW5jdGlvbihlLHQpe3ZhciByPXt0cmFuc3BhcmVudDpbMCwwLDAsMF0sYWxpY2VibHVlOlsyNDAsMjQ4LDI1NSwxXSxhbnRpcXVld2hpdGU6WzI1MCwyMzUsMjE1LDFdLGFxdWE6WzAsMjU1LDI1NSwxXSxhcXVhbWFyaW5lOlsxMjcsMjU1LDIxMiwxXSxhenVyZTpbMjQwLDI1NSwyNTUsMV0sYmVpZ2U6WzI0NSwyNDUsMjIwLDFdLGJpc3F1ZTpbMjU1LDIyOCwxOTYsMV0sYmxhY2s6WzAsMCwwLDFdLGJsYW5jaGVkYWxtb25kOlsyNTUsMjM1LDIwNSwxXSxibHVlOlswLDAsMjU1LDFdLGJsdWV2aW9sZXQ6WzEzOCw0MywyMjYsMV0sYnJvd246WzE2NSw0Miw0MiwxXSxidXJseXdvb2Q6WzIyMiwxODQsMTM1LDFdLGNhZGV0Ymx1ZTpbOTUsMTU4LDE2MCwxXSxjaGFydHJldXNlOlsxMjcsMjU1LDAsMV0sY2hvY29sYXRlOlsyMTAsMTA1LDMwLDFdLGNvcmFsOlsyNTUsMTI3LDgwLDFdLGNvcm5mbG93ZXJibHVlOlsxMDAsMTQ5LDIzNywxXSxjb3Juc2lsazpbMjU1LDI0OCwyMjAsMV0sY3JpbXNvbjpbMjIwLDIwLDYwLDFdLGN5YW46WzAsMjU1LDI1NSwxXSxkYXJrYmx1ZTpbMCwwLDEzOSwxXSxkYXJrY3lhbjpbMCwxMzksMTM5LDFdLGRhcmtnb2xkZW5yb2Q6WzE4NCwxMzQsMTEsMV0sZGFya2dyYXk6WzE2OSwxNjksMTY5LDFdLGRhcmtncmVlbjpbMCwxMDAsMCwxXSxkYXJrZ3JleTpbMTY5LDE2OSwxNjksMV0sZGFya2toYWtpOlsxODksMTgzLDEwNywxXSxkYXJrbWFnZW50YTpbMTM5LDAsMTM5LDFdLGRhcmtvbGl2ZWdyZWVuOls4NSwxMDcsNDcsMV0sZGFya29yYW5nZTpbMjU1LDE0MCwwLDFdLGRhcmtvcmNoaWQ6WzE1Myw1MCwyMDQsMV0sZGFya3JlZDpbMTM5LDAsMCwxXSxkYXJrc2FsbW9uOlsyMzMsMTUwLDEyMiwxXSxkYXJrc2VhZ3JlZW46WzE0MywxODgsMTQzLDFdLGRhcmtzbGF0ZWJsdWU6WzcyLDYxLDEzOSwxXSxkYXJrc2xhdGVncmF5Ols0Nyw3OSw3OSwxXSxkYXJrc2xhdGVncmV5Ols0Nyw3OSw3OSwxXSxkYXJrdHVycXVvaXNlOlswLDIwNiwyMDksMV0sZGFya3Zpb2xldDpbMTQ4LDAsMjExLDFdLGRlZXBwaW5rOlsyNTUsMjAsMTQ3LDFdLGRlZXBza3libHVlOlswLDE5MSwyNTUsMV0sZGltZ3JheTpbMTA1LDEwNSwxMDUsMV0sZGltZ3JleTpbMTA1LDEwNSwxMDUsMV0sZG9kZ2VyYmx1ZTpbMzAsMTQ0LDI1NSwxXSxmaXJlYnJpY2s6WzE3OCwzNCwzNCwxXSxmbG9yYWx3aGl0ZTpbMjU1LDI1MCwyNDAsMV0sZm9yZXN0Z3JlZW46WzM0LDEzOSwzNCwxXSxmdWNoc2lhOlsyNTUsMCwyNTUsMV0sZ2FpbnNib3JvOlsyMjAsMjIwLDIyMCwxXSxnaG9zdHdoaXRlOlsyNDgsMjQ4LDI1NSwxXSxnb2xkOlsyNTUsMjE1LDAsMV0sZ29sZGVucm9kOlsyMTgsMTY1LDMyLDFdLGdyYXk6WzEyOCwxMjgsMTI4LDFdLGdyZWVuOlswLDEyOCwwLDFdLGdyZWVueWVsbG93OlsxNzMsMjU1LDQ3LDFdLGdyZXk6WzEyOCwxMjgsMTI4LDFdLGhvbmV5ZGV3OlsyNDAsMjU1LDI0MCwxXSxob3RwaW5rOlsyNTUsMTA1LDE4MCwxXSxpbmRpYW5yZWQ6WzIwNSw5Miw5MiwxXSxpbmRpZ286Wzc1LDAsMTMwLDFdLGl2b3J5OlsyNTUsMjU1LDI0MCwxXSxraGFraTpbMjQwLDIzMCwxNDAsMV0sbGF2ZW5kZXI6WzIzMCwyMzAsMjUwLDFdLGxhdmVuZGVyYmx1c2g6WzI1NSwyNDAsMjQ1LDFdLGxhd25ncmVlbjpbMTI0LDI1MiwwLDFdLGxlbW9uY2hpZmZvbjpbMjU1LDI1MCwyMDUsMV0sbGlnaHRibHVlOlsxNzMsMjE2LDIzMCwxXSxsaWdodGNvcmFsOlsyNDAsMTI4LDEyOCwxXSxsaWdodGN5YW46WzIyNCwyNTUsMjU1LDFdLGxpZ2h0Z29sZGVucm9keWVsbG93OlsyNTAsMjUwLDIxMCwxXSxsaWdodGdyYXk6WzIxMSwyMTEsMjExLDFdLGxpZ2h0Z3JlZW46WzE0NCwyMzgsMTQ0LDFdLGxpZ2h0Z3JleTpbMjExLDIxMSwyMTEsMV0sbGlnaHRwaW5rOlsyNTUsMTgyLDE5MywxXSxsaWdodHNhbG1vbjpbMjU1LDE2MCwxMjIsMV0sbGlnaHRzZWFncmVlbjpbMzIsMTc4LDE3MCwxXSxsaWdodHNreWJsdWU6WzEzNSwyMDYsMjUwLDFdLGxpZ2h0c2xhdGVncmF5OlsxMTksMTM2LDE1MywxXSxsaWdodHNsYXRlZ3JleTpbMTE5LDEzNiwxNTMsMV0sbGlnaHRzdGVlbGJsdWU6WzE3NiwxOTYsMjIyLDFdLGxpZ2h0eWVsbG93OlsyNTUsMjU1LDIyNCwxXSxsaW1lOlswLDI1NSwwLDFdLGxpbWVncmVlbjpbNTAsMjA1LDUwLDFdLGxpbmVuOlsyNTAsMjQwLDIzMCwxXSxtYWdlbnRhOlsyNTUsMCwyNTUsMV0sbWFyb29uOlsxMjgsMCwwLDFdLG1lZGl1bWFxdWFtYXJpbmU6WzEwMiwyMDUsMTcwLDFdLG1lZGl1bWJsdWU6WzAsMCwyMDUsMV0sbWVkaXVtb3JjaGlkOlsxODYsODUsMjExLDFdLG1lZGl1bXB1cnBsZTpbMTQ3LDExMiwyMTksMV0sbWVkaXVtc2VhZ3JlZW46WzYwLDE3OSwxMTMsMV0sbWVkaXVtc2xhdGVibHVlOlsxMjMsMTA0LDIzOCwxXSxtZWRpdW1zcHJpbmdncmVlbjpbMCwyNTAsMTU0LDFdLG1lZGl1bXR1cnF1b2lzZTpbNzIsMjA5LDIwNCwxXSxtZWRpdW12aW9sZXRyZWQ6WzE5OSwyMSwxMzMsMV0sbWlkbmlnaHRibHVlOlsyNSwyNSwxMTIsMV0sbWludGNyZWFtOlsyNDUsMjU1LDI1MCwxXSxtaXN0eXJvc2U6WzI1NSwyMjgsMjI1LDFdLG1vY2Nhc2luOlsyNTUsMjI4LDE4MSwxXSxuYXZham93aGl0ZTpbMjU1LDIyMiwxNzMsMV0sbmF2eTpbMCwwLDEyOCwxXSxvbGRsYWNlOlsyNTMsMjQ1LDIzMCwxXSxvbGl2ZTpbMTI4LDEyOCwwLDFdLG9saXZlZHJhYjpbMTA3LDE0MiwzNSwxXSxvcmFuZ2U6WzI1NSwxNjUsMCwxXSxvcmFuZ2VyZWQ6WzI1NSw2OSwwLDFdLG9yY2hpZDpbMjE4LDExMiwyMTQsMV0scGFsZWdvbGRlbnJvZDpbMjM4LDIzMiwxNzAsMV0scGFsZWdyZWVuOlsxNTIsMjUxLDE1MiwxXSxwYWxldHVycXVvaXNlOlsxNzUsMjM4LDIzOCwxXSxwYWxldmlvbGV0cmVkOlsyMTksMTEyLDE0NywxXSxwYXBheWF3aGlwOlsyNTUsMjM5LDIxMywxXSxwZWFjaHB1ZmY6WzI1NSwyMTgsMTg1LDFdLHBlcnU6WzIwNSwxMzMsNjMsMV0scGluazpbMjU1LDE5MiwyMDMsMV0scGx1bTpbMjIxLDE2MCwyMjEsMV0scG93ZGVyYmx1ZTpbMTc2LDIyNCwyMzAsMV0scHVycGxlOlsxMjgsMCwxMjgsMV0scmViZWNjYXB1cnBsZTpbMTAyLDUxLDE1MywxXSxyZWQ6WzI1NSwwLDAsMV0scm9zeWJyb3duOlsxODgsMTQzLDE0MywxXSxyb3lhbGJsdWU6WzY1LDEwNSwyMjUsMV0sc2FkZGxlYnJvd246WzEzOSw2OSwxOSwxXSxzYWxtb246WzI1MCwxMjgsMTE0LDFdLHNhbmR5YnJvd246WzI0NCwxNjQsOTYsMV0sc2VhZ3JlZW46WzQ2LDEzOSw4NywxXSxzZWFzaGVsbDpbMjU1LDI0NSwyMzgsMV0sc2llbm5hOlsxNjAsODIsNDUsMV0sc2lsdmVyOlsxOTIsMTkyLDE5MiwxXSxza3libHVlOlsxMzUsMjA2LDIzNSwxXSxzbGF0ZWJsdWU6WzEwNiw5MCwyMDUsMV0sc2xhdGVncmF5OlsxMTIsMTI4LDE0NCwxXSxzbGF0ZWdyZXk6WzExMiwxMjgsMTQ0LDFdLHNub3c6WzI1NSwyNTAsMjUwLDFdLHNwcmluZ2dyZWVuOlswLDI1NSwxMjcsMV0sc3RlZWxibHVlOls3MCwxMzAsMTgwLDFdLHRhbjpbMjEwLDE4MCwxNDAsMV0sdGVhbDpbMCwxMjgsMTI4LDFdLHRoaXN0bGU6WzIxNiwxOTEsMjE2LDFdLHRvbWF0bzpbMjU1LDk5LDcxLDFdLHR1cnF1b2lzZTpbNjQsMjI0LDIwOCwxXSx2aW9sZXQ6WzIzOCwxMzAsMjM4LDFdLHdoZWF0OlsyNDUsMjIyLDE3OSwxXSx3aGl0ZTpbMjU1LDI1NSwyNTUsMV0sd2hpdGVzbW9rZTpbMjQ1LDI0NSwyNDUsMV0seWVsbG93OlsyNTUsMjU1LDAsMV0seWVsbG93Z3JlZW46WzE1NCwyMDUsNTAsMV19O2Z1bmN0aW9uIG8oZSl7cmV0dXJuKGU9TWF0aC5yb3VuZChlKSk8MD8wOmU+MjU1PzI1NTplfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGU8MD8wOmU+MT8xOmV9ZnVuY3Rpb24gaShlKXtyZXR1cm4iJSI9PT1lW2UubGVuZ3RoLTFdP28ocGFyc2VGbG9hdChlKS8xMDAqMjU1KTpvKHBhcnNlSW50KGUpKX1mdW5jdGlvbiBhKGUpe3JldHVybiIlIj09PWVbZS5sZW5ndGgtMV0/bihwYXJzZUZsb2F0KGUpLzEwMCk6bihwYXJzZUZsb2F0KGUpKX1mdW5jdGlvbiBzKGUsdCxyKXtyZXR1cm4gcjwwP3IrPTE6cj4xJiYoci09MSksNipyPDE/ZSsodC1lKSpyKjY6MipyPDE/dDozKnI8Mj9lKyh0LWUpKigyLzMtcikqNjplfWZ1bmN0aW9uIGwoZSl7dmFyIHQsbj1lLnJlcGxhY2UoLyAvZywiIikudG9Mb3dlckNhc2UoKTtpZihuIGluIHIpcmV0dXJuIHJbbl0uc2xpY2UoKTtpZigiIyI9PT1uWzBdKXJldHVybiA0PT09bi5sZW5ndGg/KHQ9cGFyc2VJbnQobi5zdWJzdHIoMSksMTYpKT49MCYmdDw9NDA5NT9bKDM4NDAmdCk+PjR8KDM4NDAmdCk+PjgsMjQwJnR8KDI0MCZ0KT4+NCwxNSZ0fCgxNSZ0KTw8NCwxXTpudWxsOjc9PT1uLmxlbmd0aCYmKHQ9cGFyc2VJbnQobi5zdWJzdHIoMSksMTYpKT49MCYmdDw9MTY3NzcyMTU/WygxNjcxMTY4MCZ0KT4+MTYsKDY1MjgwJnQpPj44LDI1NSZ0LDFdOm51bGw7dmFyIGw9bi5pbmRleE9mKCIoIiksdT1uLmluZGV4T2YoIikiKTtpZigtMSE9PWwmJnUrMT09PW4ubGVuZ3RoKXt2YXIgYz1uLnN1YnN0cigwLGwpLHA9bi5zdWJzdHIobCsxLHUtKGwrMSkpLnNwbGl0KCIsIiksZD0xO3N3aXRjaChjKXtjYXNlInJnYmEiOmlmKDQhPT1wLmxlbmd0aClyZXR1cm4gbnVsbDtkPWEocC5wb3AoKSk7Y2FzZSJyZ2IiOnJldHVybiAzIT09cC5sZW5ndGg/bnVsbDpbaShwWzBdKSxpKHBbMV0pLGkocFsyXSksZF07Y2FzZSJoc2xhIjppZig0IT09cC5sZW5ndGgpcmV0dXJuIG51bGw7ZD1hKHAucG9wKCkpO2Nhc2UiaHNsIjppZigzIT09cC5sZW5ndGgpcmV0dXJuIG51bGw7dmFyIGg9KHBhcnNlRmxvYXQocFswXSklMzYwKzM2MCklMzYwLzM2MCxmPWEocFsxXSkseT1hKHBbMl0pLG09eTw9LjU/eSooZisxKTp5K2YteSpmLGc9Mip5LW07cmV0dXJuW28oMjU1KnMoZyxtLGgrMS8zKSksbygyNTUqcyhnLG0saCkpLG8oMjU1KnMoZyxtLGgtMS8zKSksZF07ZGVmYXVsdDpyZXR1cm4gbnVsbH19cmV0dXJuIG51bGx9dHJ5e3QucGFyc2VDU1NDb2xvcj1sfWNhdGNoKGUpe319KSksdmU9Z2UucGFyc2VDU1NDb2xvcixiZT1mdW5jdGlvbihlLHQscixvKXt2b2lkIDA9PT1vJiYobz0xKSx0aGlzLnI9ZSx0aGlzLmc9dCx0aGlzLmI9cix0aGlzLmE9b307YmUucGFyc2U9ZnVuY3Rpb24oZSl7aWYoZSl7aWYoZSBpbnN0YW5jZW9mIGJlKXJldHVybiBlO2lmKCJzdHJpbmciPT10eXBlb2YgZSl7dmFyIHQ9dmUoZSk7aWYodClyZXR1cm4gbmV3IGJlKHRbMF0vMjU1KnRbM10sdFsxXS8yNTUqdFszXSx0WzJdLzI1NSp0WzNdLHRbM10pfX19LGJlLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBlPXRoaXMudG9BcnJheSgpLHQ9ZVswXSxyPWVbMV0sbz1lWzJdLG49ZVszXTtyZXR1cm4icmdiYSgiK01hdGgucm91bmQodCkrIiwiK01hdGgucm91bmQocikrIiwiK01hdGgucm91bmQobykrIiwiK24rIikifSxiZS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnIscj1lLmcsbz1lLmIsbj1lLmE7cmV0dXJuIDA9PT1uP1swLDAsMCwwXTpbMjU1KnQvbiwyNTUqci9uLDI1NSpvL24sbl19LGJlLmJsYWNrPW5ldyBiZSgwLDAsMCwxKSxiZS53aGl0ZT1uZXcgYmUoMSwxLDEsMSksYmUudHJhbnNwYXJlbnQ9bmV3IGJlKDAsMCwwLDApLGJlLnJlZD1uZXcgYmUoMSwwLDAsMSk7dmFyIHhlPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLnNlbnNpdGl2aXR5PWU/dD8idmFyaWFudCI6ImNhc2UiOnQ/ImFjY2VudCI6ImJhc2UiLHRoaXMubG9jYWxlPXIsdGhpcy5jb2xsYXRvcj1uZXcgSW50bC5Db2xsYXRvcih0aGlzLmxvY2FsZT90aGlzLmxvY2FsZTpbXSx7c2Vuc2l0aXZpdHk6dGhpcy5zZW5zaXRpdml0eSx1c2FnZToic2VhcmNoIn0pfTt4ZS5wcm90b3R5cGUuY29tcGFyZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNvbGxhdG9yLmNvbXBhcmUoZSx0KX0seGUucHJvdG90eXBlLnJlc29sdmVkTG9jYWxlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBJbnRsLkNvbGxhdG9yKHRoaXMubG9jYWxlP3RoaXMubG9jYWxlOltdKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGV9O3ZhciB3ZT1mdW5jdGlvbihlLHQscixvLG4pe3RoaXMudGV4dD1lLHRoaXMuaW1hZ2U9dCx0aGlzLnNjYWxlPXIsdGhpcy5mb250U3RhY2s9byx0aGlzLnRleHRDb2xvcj1ufSxrZT1mdW5jdGlvbihlKXt0aGlzLnNlY3Rpb25zPWV9O2tlLmZyb21TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBrZShbbmV3IHdlKGUsbnVsbCxudWxsLG51bGwsbnVsbCldKX0sa2UucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuc2VjdGlvbnMubGVuZ3RofHwhdGhpcy5zZWN0aW9ucy5zb21lKChmdW5jdGlvbihlKXtyZXR1cm4gMCE9PWUudGV4dC5sZW5ndGh8fGUuaW1hZ2UmJjAhPT1lLmltYWdlLm5hbWUubGVuZ3RofSkpfSxrZS5mYWN0b3J5PWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Yga2U/ZTprZS5mcm9tU3RyaW5nKGUpfSxrZS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuc2VjdGlvbnMubGVuZ3RoPyIiOnRoaXMuc2VjdGlvbnMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS50ZXh0fSkpLmpvaW4oIiIpfSxrZS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVsiZm9ybWF0Il0sdD0wLHI9dGhpcy5zZWN0aW9uczt0PHIubGVuZ3RoO3QrPTEpe3ZhciBvPXJbdF07aWYoby5pbWFnZSllLnB1c2goWyJpbWFnZSIsby5pbWFnZS5uYW1lXSk7ZWxzZXtlLnB1c2goby50ZXh0KTt2YXIgbj17fTtvLmZvbnRTdGFjayYmKG5bInRleHQtZm9udCJdPVsibGl0ZXJhbCIsby5mb250U3RhY2suc3BsaXQoIiwiKV0pLG8uc2NhbGUmJihuWyJmb250LXNjYWxlIl09by5zY2FsZSksby50ZXh0Q29sb3ImJihuWyJ0ZXh0LWNvbG9yIl09WyJyZ2JhIl0uY29uY2F0KG8udGV4dENvbG9yLnRvQXJyYXkoKSkpLGUucHVzaChuKX19cmV0dXJuIGV9O3ZhciBqZT1mdW5jdGlvbihlKXt0aGlzLm5hbWU9ZS5uYW1lLHRoaXMuYXZhaWxhYmxlPWUuYXZhaWxhYmxlfTtmdW5jdGlvbiB6ZShlLHQscixvKXtyZXR1cm4ibnVtYmVyIj09dHlwZW9mIGUmJmU+PTAmJmU8PTI1NSYmIm51bWJlciI9PXR5cGVvZiB0JiZ0Pj0wJiZ0PD0yNTUmJiJudW1iZXIiPT10eXBlb2YgciYmcj49MCYmcjw9MjU1P3ZvaWQgMD09PW98fCJudW1iZXIiPT10eXBlb2YgbyYmbz49MCYmbzw9MT9udWxsOiJJbnZhbGlkIHJnYmEgdmFsdWUgWyIrW2UsdCxyLG9dLmpvaW4oIiwgIikrIl06ICdhJyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMS4iOiJJbnZhbGlkIHJnYmEgdmFsdWUgWyIrKCJudW1iZXIiPT10eXBlb2Ygbz9bZSx0LHIsb106W2UsdCxyXSkuam9pbigiLCAiKSsiXTogJ3InLCAnZycsIGFuZCAnYicgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDI1NS4ifWZ1bmN0aW9uIFRlKGUpe2lmKG51bGw9PT1lKXJldHVybiEwO2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm4hMDtpZigiYm9vbGVhbiI9PXR5cGVvZiBlKXJldHVybiEwO2lmKCJudW1iZXIiPT10eXBlb2YgZSlyZXR1cm4hMDtpZihlIGluc3RhbmNlb2YgYmUpcmV0dXJuITA7aWYoZSBpbnN0YW5jZW9mIHhlKXJldHVybiEwO2lmKGUgaW5zdGFuY2VvZiBrZSlyZXR1cm4hMDtpZihlIGluc3RhbmNlb2YgamUpcmV0dXJuITA7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PTAscj1lO3Q8ci5sZW5ndGg7dCs9MSlpZighVGUoclt0XSkpcmV0dXJuITE7cmV0dXJuITB9aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IodmFyIG8gaW4gZSlpZighVGUoZVtvXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gX2UoZSl7aWYobnVsbD09PWUpcmV0dXJuIGVlO2lmKCJzdHJpbmciPT10eXBlb2YgZSlyZXR1cm4gcmU7aWYoImJvb2xlYW4iPT10eXBlb2YgZSlyZXR1cm4gb2U7aWYoIm51bWJlciI9PXR5cGVvZiBlKXJldHVybiB0ZTtpZihlIGluc3RhbmNlb2YgYmUpcmV0dXJuIG5lO2lmKGUgaW5zdGFuY2VvZiB4ZSlyZXR1cm4gbGU7aWYoZSBpbnN0YW5jZW9mIGtlKXJldHVybiB1ZTtpZihlIGluc3RhbmNlb2YgamUpcmV0dXJuIGNlO2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdCxyPWUubGVuZ3RoLG89MCxuPWU7bzxuLmxlbmd0aDtvKz0xKXt2YXIgaT1fZShuW29dKTtpZih0KXtpZih0PT09aSljb250aW51ZTt0PWFlO2JyZWFrfXQ9aX1yZXR1cm4gcGUodHx8YWUscil9cmV0dXJuIGllfWZ1bmN0aW9uIFNlKGUpe3ZhciB0PXR5cGVvZiBlO3JldHVybiBudWxsPT09ZT8iIjoic3RyaW5nIj09PXR8fCJudW1iZXIiPT09dHx8ImJvb2xlYW4iPT09dD9TdHJpbmcoZSk6ZSBpbnN0YW5jZW9mIGJlfHxlIGluc3RhbmNlb2Yga2V8fGUgaW5zdGFuY2VvZiBqZT9lLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkoZSl9amUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX0samUuZnJvbVN0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gZT9uZXcgamUoe25hbWU6ZSxhdmFpbGFibGU6ITF9KTpudWxsfSxqZS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuWyJpbWFnZSIsdGhpcy5uYW1lXX07dmFyIEFlPWZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPWUsdGhpcy52YWx1ZT10fTtBZS5wYXJzZT1mdW5jdGlvbihlLHQpe2lmKDIhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiJ2xpdGVyYWwnIGV4cHJlc3Npb24gcmVxdWlyZXMgZXhhY3RseSBvbmUgYXJndW1lbnQsIGJ1dCBmb3VuZCAiKyhlLmxlbmd0aC0xKSsiIGluc3RlYWQuIik7aWYoIVRlKGVbMV0pKXJldHVybiB0LmVycm9yKCJpbnZhbGlkIHZhbHVlIik7dmFyIHI9ZVsxXSxvPV9lKHIpLG49dC5leHBlY3RlZFR5cGU7cmV0dXJuImFycmF5IiE9PW8ua2luZHx8MCE9PW8uTnx8IW58fCJhcnJheSIhPT1uLmtpbmR8fCJudW1iZXIiPT10eXBlb2Ygbi5OJiYwIT09bi5OfHwobz1uKSxuZXcgQWUobyxyKX0sQWUucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LEFlLnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24oKXt9LEFlLnByb3RvdHlwZS5vdXRwdXREZWZpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuITB9LEFlLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm4iYXJyYXkiPT09dGhpcy50eXBlLmtpbmR8fCJvYmplY3QiPT09dGhpcy50eXBlLmtpbmQ/WyJsaXRlcmFsIix0aGlzLnZhbHVlXTp0aGlzLnZhbHVlIGluc3RhbmNlb2YgYmU/WyJyZ2JhIl0uY29uY2F0KHRoaXMudmFsdWUudG9BcnJheSgpKTp0aGlzLnZhbHVlIGluc3RhbmNlb2Yga2U/dGhpcy52YWx1ZS5zZXJpYWxpemUoKTp0aGlzLnZhbHVlfTt2YXIgSWU9ZnVuY3Rpb24oZSl7dGhpcy5uYW1lPSJFeHByZXNzaW9uRXZhbHVhdGlvbkVycm9yIix0aGlzLm1lc3NhZ2U9ZX07SWUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1lc3NhZ2V9O3ZhciBDZT17c3RyaW5nOnJlLG51bWJlcjp0ZSxib29sZWFuOm9lLG9iamVjdDppZX0sT2U9ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9ZSx0aGlzLmFyZ3M9dH07T2UucGFyc2U9ZnVuY3Rpb24oZSx0KXtpZihlLmxlbmd0aDwyKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhdCBsZWFzdCBvbmUgYXJndW1lbnQuIik7dmFyIHIsbz0xLG49ZVswXTtpZigiYXJyYXkiPT09bil7dmFyIGksYTtpZihlLmxlbmd0aD4yKXt2YXIgcz1lWzFdO2lmKCJzdHJpbmciIT10eXBlb2Ygc3x8IShzIGluIENlKXx8Im9iamVjdCI9PT1zKXJldHVybiB0LmVycm9yKCdUaGUgaXRlbSB0eXBlIGFyZ3VtZW50IG9mICJhcnJheSIgbXVzdCBiZSBvbmUgb2Ygc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4nLDEpO2k9Q2Vbc10sbysrfWVsc2UgaT1hZTtpZihlLmxlbmd0aD4zKXtpZihudWxsIT09ZVsyXSYmKCJudW1iZXIiIT10eXBlb2YgZVsyXXx8ZVsyXTwwfHxlWzJdIT09TWF0aC5mbG9vcihlWzJdKSkpcmV0dXJuIHQuZXJyb3IoJ1RoZSBsZW5ndGggYXJndW1lbnQgdG8gImFycmF5IiBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBsaXRlcmFsJywyKTthPWVbMl0sbysrfXI9cGUoaSxhKX1lbHNlIHI9Q2Vbbl07Zm9yKHZhciBsPVtdO288ZS5sZW5ndGg7bysrKXt2YXIgdT10LnBhcnNlKGVbb10sbyxhZSk7aWYoIXUpcmV0dXJuIG51bGw7bC5wdXNoKHUpfXJldHVybiBuZXcgT2UocixsKX0sT2UucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5hcmdzLmxlbmd0aDt0Kyspe3ZhciByPXRoaXMuYXJnc1t0XS5ldmFsdWF0ZShlKTtpZighZmUodGhpcy50eXBlLF9lKHIpKSlyZXR1cm4gcjtpZih0PT09dGhpcy5hcmdzLmxlbmd0aC0xKXRocm93IG5ldyBJZSgiRXhwZWN0ZWQgdmFsdWUgdG8gYmUgb2YgdHlwZSAiK2RlKHRoaXMudHlwZSkrIiwgYnV0IGZvdW5kICIrZGUoX2UocikpKyIgaW5zdGVhZC4iKX1yZXR1cm4gbnVsbH0sT2UucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXt0aGlzLmFyZ3MuZm9yRWFjaChlKX0sT2UucHJvdG90eXBlLm91dHB1dERlZmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcmdzLmV2ZXJ5KChmdW5jdGlvbihlKXtyZXR1cm4gZS5vdXRwdXREZWZpbmVkKCl9KSl9LE9lLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGUsdD1bZS5raW5kXTtpZigiYXJyYXkiPT09ZS5raW5kKXt2YXIgcj1lLml0ZW1UeXBlO2lmKCJzdHJpbmciPT09ci5raW5kfHwibnVtYmVyIj09PXIua2luZHx8ImJvb2xlYW4iPT09ci5raW5kKXt0LnB1c2goci5raW5kKTt2YXIgbz1lLk47KCJudW1iZXIiPT10eXBlb2Ygb3x8dGhpcy5hcmdzLmxlbmd0aD4xKSYmdC5wdXNoKG8pfX1yZXR1cm4gdC5jb25jYXQodGhpcy5hcmdzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VyaWFsaXplKCl9KSkpfTt2YXIgRWU9ZnVuY3Rpb24oZSl7dGhpcy50eXBlPXVlLHRoaXMuc2VjdGlvbnM9ZX07RWUucGFyc2U9ZnVuY3Rpb24oZSx0KXtpZihlLmxlbmd0aDwyKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhdCBsZWFzdCBvbmUgYXJndW1lbnQuIik7dmFyIHI9ZVsxXTtpZighQXJyYXkuaXNBcnJheShyKSYmIm9iamVjdCI9PXR5cGVvZiByKXJldHVybiB0LmVycm9yKCJGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGFuIGltYWdlIG9yIHRleHQgc2VjdGlvbi4iKTtmb3IodmFyIG89W10sbj0hMSxpPTE7aTw9ZS5sZW5ndGgtMTsrK2kpe3ZhciBhPWVbaV07aWYobiYmIm9iamVjdCI9PXR5cGVvZiBhJiYhQXJyYXkuaXNBcnJheShhKSl7bj0hMTt2YXIgcz1udWxsO2lmKGFbImZvbnQtc2NhbGUiXSYmIShzPXQucGFyc2UoYVsiZm9udC1zY2FsZSJdLDEsdGUpKSlyZXR1cm4gbnVsbDt2YXIgbD1udWxsO2lmKGFbInRleHQtZm9udCJdJiYhKGw9dC5wYXJzZShhWyJ0ZXh0LWZvbnQiXSwxLHBlKHJlKSkpKXJldHVybiBudWxsO3ZhciB1PW51bGw7aWYoYVsidGV4dC1jb2xvciJdJiYhKHU9dC5wYXJzZShhWyJ0ZXh0LWNvbG9yIl0sMSxuZSkpKXJldHVybiBudWxsO3ZhciBjPW9bby5sZW5ndGgtMV07Yy5zY2FsZT1zLGMuZm9udD1sLGMudGV4dENvbG9yPXV9ZWxzZXt2YXIgcD10LnBhcnNlKGVbaV0sMSxhZSk7aWYoIXApcmV0dXJuIG51bGw7dmFyIGQ9cC50eXBlLmtpbmQ7aWYoInN0cmluZyIhPT1kJiYidmFsdWUiIT09ZCYmIm51bGwiIT09ZCYmInJlc29sdmVkSW1hZ2UiIT09ZClyZXR1cm4gdC5lcnJvcigiRm9ybWF0dGVkIHRleHQgdHlwZSBtdXN0IGJlICdzdHJpbmcnLCAndmFsdWUnLCAnaW1hZ2UnIG9yICdudWxsJy4iKTtuPSEwLG8ucHVzaCh7Y29udGVudDpwLHNjYWxlOm51bGwsZm9udDpudWxsLHRleHRDb2xvcjpudWxsfSl9fXJldHVybiBuZXcgRWUobyl9LEVlLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbihlKXt2YXIgdD1mdW5jdGlvbih0KXt2YXIgcj10LmNvbnRlbnQuZXZhbHVhdGUoZSk7cmV0dXJuIF9lKHIpPT09Y2U/bmV3IHdlKCIiLHIsbnVsbCxudWxsLG51bGwpOm5ldyB3ZShTZShyKSxudWxsLHQuc2NhbGU/dC5zY2FsZS5ldmFsdWF0ZShlKTpudWxsLHQuZm9udD90LmZvbnQuZXZhbHVhdGUoZSkuam9pbigiLCIpOm51bGwsdC50ZXh0Q29sb3I/dC50ZXh0Q29sb3IuZXZhbHVhdGUoZSk6bnVsbCl9O3JldHVybiBuZXcga2UodGhpcy5zZWN0aW9ucy5tYXAodCkpfSxFZS5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9dGhpcy5zZWN0aW9uczt0PHIubGVuZ3RoO3QrPTEpe3ZhciBvPXJbdF07ZShvLmNvbnRlbnQpLG8uc2NhbGUmJmUoby5zY2FsZSksby5mb250JiZlKG8uZm9udCksby50ZXh0Q29sb3ImJmUoby50ZXh0Q29sb3IpfX0sRWUucHJvdG90eXBlLm91dHB1dERlZmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sRWUucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT1bImZvcm1hdCJdLHQ9MCxyPXRoaXMuc2VjdGlvbnM7dDxyLmxlbmd0aDt0Kz0xKXt2YXIgbz1yW3RdO2UucHVzaChvLmNvbnRlbnQuc2VyaWFsaXplKCkpO3ZhciBuPXt9O28uc2NhbGUmJihuWyJmb250LXNjYWxlIl09by5zY2FsZS5zZXJpYWxpemUoKSksby5mb250JiYoblsidGV4dC1mb250Il09by5mb250LnNlcmlhbGl6ZSgpKSxvLnRleHRDb2xvciYmKG5bInRleHQtY29sb3IiXT1vLnRleHRDb2xvci5zZXJpYWxpemUoKSksZS5wdXNoKG4pfXJldHVybiBlfTt2YXIgcWU9ZnVuY3Rpb24oZSl7dGhpcy50eXBlPWNlLHRoaXMuaW5wdXQ9ZX07cWUucGFyc2U9ZnVuY3Rpb24oZSx0KXtpZigyIT09ZS5sZW5ndGgpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIHR3byBhcmd1bWVudHMuIik7dmFyIHI9dC5wYXJzZShlWzFdLDEscmUpO3JldHVybiByP25ldyBxZShyKTp0LmVycm9yKCJObyBpbWFnZSBuYW1lIHByb3ZpZGVkLiIpfSxxZS5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pbnB1dC5ldmFsdWF0ZShlKSxyPWplLmZyb21TdHJpbmcodCk7cmV0dXJuIHImJmUuYXZhaWxhYmxlSW1hZ2VzJiYoci5hdmFpbGFibGU9ZS5hdmFpbGFibGVJbWFnZXMuaW5kZXhPZih0KT4tMSkscn0scWUucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXtlKHRoaXMuaW5wdXQpfSxxZS5wcm90b3R5cGUub3V0cHV0RGVmaW5lZD1mdW5jdGlvbigpe3JldHVybiExfSxxZS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuWyJpbWFnZSIsdGhpcy5pbnB1dC5zZXJpYWxpemUoKV19O3ZhciBNZT17InRvLWJvb2xlYW4iOm9lLCJ0by1jb2xvciI6bmUsInRvLW51bWJlciI6dGUsInRvLXN0cmluZyI6cmV9LE5lPWZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPWUsdGhpcy5hcmdzPXR9O05lLnBhcnNlPWZ1bmN0aW9uKGUsdCl7aWYoZS5sZW5ndGg8MilyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgYXQgbGVhc3Qgb25lIGFyZ3VtZW50LiIpO3ZhciByPWVbMF07aWYoKCJ0by1ib29sZWFuIj09PXJ8fCJ0by1zdHJpbmciPT09cikmJjIhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgb25lIGFyZ3VtZW50LiIpO2Zvcih2YXIgbz1NZVtyXSxuPVtdLGk9MTtpPGUubGVuZ3RoO2krKyl7dmFyIGE9dC5wYXJzZShlW2ldLGksYWUpO2lmKCFhKXJldHVybiBudWxsO24ucHVzaChhKX1yZXR1cm4gbmV3IE5lKG8sbil9LE5lLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbihlKXtpZigiYm9vbGVhbiI9PT10aGlzLnR5cGUua2luZClyZXR1cm4gQm9vbGVhbih0aGlzLmFyZ3NbMF0uZXZhbHVhdGUoZSkpO2lmKCJjb2xvciI9PT10aGlzLnR5cGUua2luZCl7Zm9yKHZhciB0LHIsbz0wLG49dGhpcy5hcmdzO288bi5sZW5ndGg7bys9MSl7aWYocj1udWxsLCh0PW5bb10uZXZhbHVhdGUoZSkpaW5zdGFuY2VvZiBiZSlyZXR1cm4gdDtpZigic3RyaW5nIj09dHlwZW9mIHQpe3ZhciBpPWUucGFyc2VDb2xvcih0KTtpZihpKXJldHVybiBpfWVsc2UgaWYoQXJyYXkuaXNBcnJheSh0KSYmIShyPXQubGVuZ3RoPDN8fHQubGVuZ3RoPjQ/IkludmFsaWQgcmJnYSB2YWx1ZSAiK0pTT04uc3RyaW5naWZ5KHQpKyI6IGV4cGVjdGVkIGFuIGFycmF5IGNvbnRhaW5pbmcgZWl0aGVyIHRocmVlIG9yIGZvdXIgbnVtZXJpYyB2YWx1ZXMuIjp6ZSh0WzBdLHRbMV0sdFsyXSx0WzNdKSkpcmV0dXJuIG5ldyBiZSh0WzBdLzI1NSx0WzFdLzI1NSx0WzJdLzI1NSx0WzNdKX10aHJvdyBuZXcgSWUocnx8IkNvdWxkIG5vdCBwYXJzZSBjb2xvciBmcm9tIHZhbHVlICciKygic3RyaW5nIj09dHlwZW9mIHQ/dDpTdHJpbmcoSlNPTi5zdHJpbmdpZnkodCkpKSsiJyIpfWlmKCJudW1iZXIiPT09dGhpcy50eXBlLmtpbmQpe2Zvcih2YXIgYT1udWxsLHM9MCxsPXRoaXMuYXJncztzPGwubGVuZ3RoO3MrPTEpe2lmKG51bGw9PT0oYT1sW3NdLmV2YWx1YXRlKGUpKSlyZXR1cm4gMDt2YXIgdT1OdW1iZXIoYSk7aWYoIWlzTmFOKHUpKXJldHVybiB1fXRocm93IG5ldyBJZSgiQ291bGQgbm90IGNvbnZlcnQgIitKU09OLnN0cmluZ2lmeShhKSsiIHRvIG51bWJlci4iKX1yZXR1cm4iZm9ybWF0dGVkIj09PXRoaXMudHlwZS5raW5kP2tlLmZyb21TdHJpbmcoU2UodGhpcy5hcmdzWzBdLmV2YWx1YXRlKGUpKSk6InJlc29sdmVkSW1hZ2UiPT09dGhpcy50eXBlLmtpbmQ/amUuZnJvbVN0cmluZyhTZSh0aGlzLmFyZ3NbMF0uZXZhbHVhdGUoZSkpKTpTZSh0aGlzLmFyZ3NbMF0uZXZhbHVhdGUoZSkpfSxOZS5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKGUpe3RoaXMuYXJncy5mb3JFYWNoKGUpfSxOZS5wcm90b3R5cGUub3V0cHV0RGVmaW5lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFyZ3MuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm91dHB1dERlZmluZWQoKX0pKX0sTmUucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe2lmKCJmb3JtYXR0ZWQiPT09dGhpcy50eXBlLmtpbmQpcmV0dXJuIG5ldyBFZShbe2NvbnRlbnQ6dGhpcy5hcmdzWzBdLHNjYWxlOm51bGwsZm9udDpudWxsLHRleHRDb2xvcjpudWxsfV0pLnNlcmlhbGl6ZSgpO2lmKCJyZXNvbHZlZEltYWdlIj09PXRoaXMudHlwZS5raW5kKXJldHVybiBuZXcgcWUodGhpcy5hcmdzWzBdKS5zZXJpYWxpemUoKTt2YXIgZT1bInRvLSIrdGhpcy50eXBlLmtpbmRdO3JldHVybiB0aGlzLmVhY2hDaGlsZCgoZnVuY3Rpb24odCl7ZS5wdXNoKHQuc2VyaWFsaXplKCkpfSkpLGV9O3ZhciBSZT1bIlVua25vd24iLCJQb2ludCIsIkxpbmVTdHJpbmciLCJQb2x5Z29uIl0sRGU9ZnVuY3Rpb24oKXt0aGlzLmdsb2JhbHM9bnVsbCx0aGlzLmZlYXR1cmU9bnVsbCx0aGlzLmZlYXR1cmVTdGF0ZT1udWxsLHRoaXMuZm9ybWF0dGVkU2VjdGlvbj1udWxsLHRoaXMuX3BhcnNlQ29sb3JDYWNoZT17fSx0aGlzLmF2YWlsYWJsZUltYWdlcz1udWxsLHRoaXMuY2Fub25pY2FsPW51bGx9O0RlLnByb3RvdHlwZS5pZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZlYXR1cmUmJiJpZCJpbiB0aGlzLmZlYXR1cmU/dGhpcy5mZWF0dXJlLmlkOm51bGx9LERlLnByb3RvdHlwZS5nZW9tZXRyeVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mZWF0dXJlPyJudW1iZXIiPT10eXBlb2YgdGhpcy5mZWF0dXJlLnR5cGU/UmVbdGhpcy5mZWF0dXJlLnR5cGVdOnRoaXMuZmVhdHVyZS50eXBlOm51bGx9LERlLnByb3RvdHlwZS5nZW9tZXRyeT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZlYXR1cmUmJiJnZW9tZXRyeSJpbiB0aGlzLmZlYXR1cmU/dGhpcy5mZWF0dXJlLmdlb21ldHJ5Om51bGx9LERlLnByb3RvdHlwZS5jYW5vbmljYWxJRD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbm9uaWNhbH0sRGUucHJvdG90eXBlLnByb3BlcnRpZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mZWF0dXJlJiZ0aGlzLmZlYXR1cmUucHJvcGVydGllc3x8e319LERlLnByb3RvdHlwZS5wYXJzZUNvbG9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3BhcnNlQ29sb3JDYWNoZVtlXTtyZXR1cm4gdHx8KHQ9dGhpcy5fcGFyc2VDb2xvckNhY2hlW2VdPWJlLnBhcnNlKGUpKSx0fTt2YXIgUGU9ZnVuY3Rpb24oZSx0LHIsbyl7dGhpcy5uYW1lPWUsdGhpcy50eXBlPXQsdGhpcy5fZXZhbHVhdGU9cix0aGlzLmFyZ3M9b307ZnVuY3Rpb24gRmUoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/IigiK2UubWFwKGRlKS5qb2luKCIsICIpKyIpIjoiKCIrZGUoZS50eXBlKSsiLi4uKSJ9UGUucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ldmFsdWF0ZShlLHRoaXMuYXJncyl9LFBlLnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24oZSl7dGhpcy5hcmdzLmZvckVhY2goZSl9LFBlLnByb3RvdHlwZS5vdXRwdXREZWZpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuITF9LFBlLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5uYW1lXS5jb25jYXQodGhpcy5hcmdzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2VyaWFsaXplKCl9KSkpfSxQZS5wYXJzZT1mdW5jdGlvbihlLHQpe3ZhciByLG89ZVswXSxuPVBlLmRlZmluaXRpb25zW29dO2lmKCFuKXJldHVybiB0LmVycm9yKCdVbmtub3duIGV4cHJlc3Npb24gIicrbysnIi4gSWYgeW91IHdhbnRlZCBhIGxpdGVyYWwgYXJyYXksIHVzZSBbImxpdGVyYWwiLCBbLi4uXV0uJywwKTtmb3IodmFyIGk9QXJyYXkuaXNBcnJheShuKT9uWzBdOm4udHlwZSxhPUFycmF5LmlzQXJyYXkobik/W1tuWzFdLG5bMl1dXTpuLm92ZXJsb2FkcyxzPWEuZmlsdGVyKChmdW5jdGlvbih0KXt2YXIgcj10WzBdO3JldHVybiFBcnJheS5pc0FycmF5KHIpfHxyLmxlbmd0aD09PWUubGVuZ3RoLTF9KSksbD1udWxsLHU9MCxjPXM7dTxjLmxlbmd0aDt1Kz0xKXt2YXIgcD1jW3VdLGQ9cFswXSxoPXBbMV07bD1uZXcgbXQodC5yZWdpc3RyeSx0LnBhdGgsbnVsbCx0LnNjb3BlKTtmb3IodmFyIGY9W10seT0hMSxtPTE7bTxlLmxlbmd0aDttKyspe3ZhciBnPWVbbV0sdj1BcnJheS5pc0FycmF5KGQpP2RbbS0xXTpkLnR5cGUsYj1sLnBhcnNlKGcsMStmLmxlbmd0aCx2KTtpZighYil7eT0hMDticmVha31mLnB1c2goYil9aWYoIXkpaWYoQXJyYXkuaXNBcnJheShkKSYmZC5sZW5ndGghPT1mLmxlbmd0aClsLmVycm9yKCJFeHBlY3RlZCAiK2QubGVuZ3RoKyIgYXJndW1lbnRzLCBidXQgZm91bmQgIitmLmxlbmd0aCsiIGluc3RlYWQuIik7ZWxzZXtmb3IodmFyIHg9MDt4PGYubGVuZ3RoO3grKyl7dmFyIHc9QXJyYXkuaXNBcnJheShkKT9kW3hdOmQudHlwZSxrPWZbeF07bC5jb25jYXQoeCsxKS5jaGVja1N1YnR5cGUodyxrLnR5cGUpfWlmKDA9PT1sLmVycm9ycy5sZW5ndGgpcmV0dXJuIG5ldyBQZShvLGksaCxmKX19aWYoMT09PXMubGVuZ3RoKShyPXQuZXJyb3JzKS5wdXNoLmFwcGx5KHIsbC5lcnJvcnMpO2Vsc2V7Zm9yKHZhciBqPShzLmxlbmd0aD9zOmEpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIEZlKGVbMF0pfSkpLmpvaW4oIiB8ICIpLHo9W10sVD0xO1Q8ZS5sZW5ndGg7VCsrKXt2YXIgXz10LnBhcnNlKGVbVF0sMSt6Lmxlbmd0aCk7aWYoIV8pcmV0dXJuIG51bGw7ei5wdXNoKGRlKF8udHlwZSkpfXQuZXJyb3IoIkV4cGVjdGVkIGFyZ3VtZW50cyBvZiB0eXBlICIraisiLCBidXQgZm91bmQgKCIrei5qb2luKCIsICIpKyIpIGluc3RlYWQuIil9cmV0dXJuIG51bGx9LFBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIFBlLmRlZmluaXRpb25zPXQsdCllW3JdPVBlfTt2YXIgTGU9ZnVuY3Rpb24oZSx0LHIpe3RoaXMudHlwZT1sZSx0aGlzLmxvY2FsZT1yLHRoaXMuY2FzZVNlbnNpdGl2ZT1lLHRoaXMuZGlhY3JpdGljU2Vuc2l0aXZlPXR9O0xlLnBhcnNlPWZ1bmN0aW9uKGUsdCl7aWYoMiE9PWUubGVuZ3RoKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBvbmUgYXJndW1lbnQuIik7dmFyIHI9ZVsxXTtpZigib2JqZWN0IiE9dHlwZW9mIHJ8fEFycmF5LmlzQXJyYXkocikpcmV0dXJuIHQuZXJyb3IoIkNvbGxhdG9yIG9wdGlvbnMgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QuIik7dmFyIG89dC5wYXJzZSh2b2lkIDAhPT1yWyJjYXNlLXNlbnNpdGl2ZSJdJiZyWyJjYXNlLXNlbnNpdGl2ZSJdLDEsb2UpO2lmKCFvKXJldHVybiBudWxsO3ZhciBuPXQucGFyc2Uodm9pZCAwIT09clsiZGlhY3JpdGljLXNlbnNpdGl2ZSJdJiZyWyJkaWFjcml0aWMtc2Vuc2l0aXZlIl0sMSxvZSk7aWYoIW4pcmV0dXJuIG51bGw7dmFyIGk9bnVsbDtyZXR1cm4gci5sb2NhbGUmJiEoaT10LnBhcnNlKHIubG9jYWxlLDEscmUpKT9udWxsOm5ldyBMZShvLG4saSl9LExlLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHhlKHRoaXMuY2FzZVNlbnNpdGl2ZS5ldmFsdWF0ZShlKSx0aGlzLmRpYWNyaXRpY1NlbnNpdGl2ZS5ldmFsdWF0ZShlKSx0aGlzLmxvY2FsZT90aGlzLmxvY2FsZS5ldmFsdWF0ZShlKTpudWxsKX0sTGUucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXtlKHRoaXMuY2FzZVNlbnNpdGl2ZSksZSh0aGlzLmRpYWNyaXRpY1NlbnNpdGl2ZSksdGhpcy5sb2NhbGUmJmUodGhpcy5sb2NhbGUpfSxMZS5wcm90b3R5cGUub3V0cHV0RGVmaW5lZD1mdW5jdGlvbigpe3JldHVybiExfSxMZS5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGVbImNhc2Utc2Vuc2l0aXZlIl09dGhpcy5jYXNlU2Vuc2l0aXZlLnNlcmlhbGl6ZSgpLGVbImRpYWNyaXRpYy1zZW5zaXRpdmUiXT10aGlzLmRpYWNyaXRpY1NlbnNpdGl2ZS5zZXJpYWxpemUoKSx0aGlzLmxvY2FsZSYmKGUubG9jYWxlPXRoaXMubG9jYWxlLnNlcmlhbGl6ZSgpKSxbImNvbGxhdG9yIixlXX07dmFyICRlPTgxOTI7ZnVuY3Rpb24gVWUoZSx0KXtlWzBdPU1hdGgubWluKGVbMF0sdFswXSksZVsxXT1NYXRoLm1pbihlWzFdLHRbMV0pLGVbMl09TWF0aC5tYXgoZVsyXSx0WzBdKSxlWzNdPU1hdGgubWF4KGVbM10sdFsxXSl9ZnVuY3Rpb24gSmUoZSl7cmV0dXJuKDE4MCtlKS8zNjB9ZnVuY3Rpb24gV2UoZSl7cmV0dXJuKDE4MC0xODAvTWF0aC5QSSpNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJLzQrZSpNYXRoLlBJLzM2MCkpKS8zNjB9ZnVuY3Rpb24gR2UoZSx0KXtyZXR1cm4hKGVbMF08PXRbMF18fGVbMl0+PXRbMl18fGVbMV08PXRbMV18fGVbM10+PXRbM10pfWZ1bmN0aW9uIEJlKGUsdCl7dmFyIHI9SmUoZVswXSksbz1XZShlWzFdKSxuPU1hdGgucG93KDIsdC56KTtyZXR1cm5bTWF0aC5yb3VuZChyKm4qJGUpLE1hdGgucm91bmQobypuKiRlKV19ZnVuY3Rpb24gVmUoZSx0LHIpe3ZhciBvPWVbMF0tdFswXSxuPWVbMV0tdFsxXSxpPWVbMF0tclswXSxhPWVbMV0tclsxXTtyZXR1cm4gbyphLWkqbj09MCYmbyppPD0wJiZuKmE8PTB9ZnVuY3Rpb24gSGUoZSx0LHIpe3JldHVybiB0WzFdPmVbMV0hPXJbMV0+ZVsxXSYmZVswXTwoclswXS10WzBdKSooZVsxXS10WzFdKS8oclsxXS10WzFdKSt0WzBdfWZ1bmN0aW9uIFplKGUsdCl7Zm9yKHZhciByPSExLG89MCxuPXQubGVuZ3RoO288bjtvKyspZm9yKHZhciBpPXRbb10sYT0wLHM9aS5sZW5ndGg7YTxzLTE7YSsrKXtpZihWZShlLGlbYV0saVthKzFdKSlyZXR1cm4hMTtIZShlLGlbYV0saVthKzFdKSYmKHI9IXIpfXJldHVybiByfWZ1bmN0aW9uIFhlKGUsdCl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYoWmUoZSx0W3JdKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBLZShlLHQpe3JldHVybiBlWzBdKnRbMV0tZVsxXSp0WzBdfWZ1bmN0aW9uIFllKGUsdCxyLG8pe3ZhciBuPWVbMF0tclswXSxpPWVbMV0tclsxXSxhPXRbMF0tclswXSxzPXRbMV0tclsxXSxsPW9bMF0tclswXSx1PW9bMV0tclsxXSxjPW4qdS1sKmkscD1hKnUtbCpzO3JldHVybiBjPjAmJnA8MHx8YzwwJiZwPjB9ZnVuY3Rpb24gUWUoZSx0LHIsbyl7dmFyIG49W3RbMF0tZVswXSx0WzFdLWVbMV1dO3JldHVybiAwIT09S2UoW29bMF0tclswXSxvWzFdLXJbMV1dLG4pJiYhKCFZZShlLHQscixvKXx8IVllKHIsbyxlLHQpKX1mdW5jdGlvbiBldChlLHQscil7Zm9yKHZhciBvPTAsbj1yO288bi5sZW5ndGg7bys9MSlmb3IodmFyIGk9bltvXSxhPTA7YTxpLmxlbmd0aC0xOysrYSlpZihRZShlLHQsaVthXSxpW2ErMV0pKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHR0KGUsdCl7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDsrK3IpaWYoIVplKGVbcl0sdCkpcmV0dXJuITE7Zm9yKHZhciBvPTA7bzxlLmxlbmd0aC0xOysrbylpZihldChlW29dLGVbbysxXSx0KSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBydChlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKHR0KGUsdFtyXSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gb3QoZSx0LHIpe2Zvcih2YXIgbz1bXSxuPTA7bjxlLmxlbmd0aDtuKyspe2Zvcih2YXIgaT1bXSxhPTA7YTxlW25dLmxlbmd0aDthKyspe3ZhciBzPUJlKGVbbl1bYV0scik7VWUodCxzKSxpLnB1c2gocyl9by5wdXNoKGkpfXJldHVybiBvfWZ1bmN0aW9uIG50KGUsdCxyKXtmb3IodmFyIG89W10sbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1vdChlW25dLHQscik7by5wdXNoKGkpfXJldHVybiBvfWZ1bmN0aW9uIGl0KGUsdCxyLG8pe2lmKGVbMF08clswXXx8ZVswXT5yWzJdKXt2YXIgbj0uNSpvLGk9ZVswXS1yWzBdPm4/LW86clswXS1lWzBdPm4/bzowOzA9PT1pJiYoaT1lWzBdLXJbMl0+bj8tbzpyWzJdLWVbMF0+bj9vOjApLGVbMF0rPWl9VWUodCxlKX1mdW5jdGlvbiBhdChlKXtlWzBdPWVbMV09MS8wLGVbMl09ZVszXT0tMS8wfWZ1bmN0aW9uIHN0KGUsdCxyLG8pe2Zvcih2YXIgbj1NYXRoLnBvdygyLG8ueikqJGUsaT1bby54KiRlLG8ueSokZV0sYT1bXSxzPTAsbD1lO3M8bC5sZW5ndGg7cys9MSlmb3IodmFyIHU9MCxjPWxbc107dTxjLmxlbmd0aDt1Kz0xKXt2YXIgcD1jW3VdLGQ9W3AueCtpWzBdLHAueStpWzFdXTtpdChkLHQscixuKSxhLnB1c2goZCl9cmV0dXJuIGF9ZnVuY3Rpb24gbHQoZSx0LHIsbyl7Zm9yKHZhciBuPU1hdGgucG93KDIsby56KSokZSxpPVtvLngqJGUsby55KiRlXSxhPVtdLHM9MCxsPWU7czxsLmxlbmd0aDtzKz0xKXtmb3IodmFyIHU9W10sYz0wLHA9bFtzXTtjPHAubGVuZ3RoO2MrPTEpe3ZhciBkPXBbY10saD1bZC54K2lbMF0sZC55K2lbMV1dO1VlKHQsaCksdS5wdXNoKGgpfWEucHVzaCh1KX1pZih0WzJdLXRbMF08PW4vMil7YXQodCk7Zm9yKHZhciBmPTAseT1hO2Y8eS5sZW5ndGg7Zis9MSlmb3IodmFyIG09MCxnPXlbZl07bTxnLmxlbmd0aDttKz0xKWl0KGdbbV0sdCxyLG4pfXJldHVybiBhfWZ1bmN0aW9uIHV0KGUsdCl7dmFyIHI9WzEvMCwxLzAsLTEvMCwtMS8wXSxvPVsxLzAsMS8wLC0xLzAsLTEvMF0sbj1lLmNhbm9uaWNhbElEKCk7aWYoIlBvbHlnb24iPT09dC50eXBlKXt2YXIgaT1vdCh0LmNvb3JkaW5hdGVzLG8sbiksYT1zdChlLmdlb21ldHJ5KCkscixvLG4pO2lmKCFHZShyLG8pKXJldHVybiExO2Zvcih2YXIgcz0wLGw9YTtzPGwubGVuZ3RoO3MrPTEpaWYoIVplKGxbc10saSkpcmV0dXJuITF9aWYoIk11bHRpUG9seWdvbiI9PT10LnR5cGUpe3ZhciB1PW50KHQuY29vcmRpbmF0ZXMsbyxuKSxjPXN0KGUuZ2VvbWV0cnkoKSxyLG8sbik7aWYoIUdlKHIsbykpcmV0dXJuITE7Zm9yKHZhciBwPTAsZD1jO3A8ZC5sZW5ndGg7cCs9MSlpZighWGUoZFtwXSx1KSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBjdChlLHQpe3ZhciByPVsxLzAsMS8wLC0xLzAsLTEvMF0sbz1bMS8wLDEvMCwtMS8wLC0xLzBdLG49ZS5jYW5vbmljYWxJRCgpO2lmKCJQb2x5Z29uIj09PXQudHlwZSl7dmFyIGk9b3QodC5jb29yZGluYXRlcyxvLG4pLGE9bHQoZS5nZW9tZXRyeSgpLHIsbyxuKTtpZighR2UocixvKSlyZXR1cm4hMTtmb3IodmFyIHM9MCxsPWE7czxsLmxlbmd0aDtzKz0xKWlmKCF0dChsW3NdLGkpKXJldHVybiExfWlmKCJNdWx0aVBvbHlnb24iPT09dC50eXBlKXt2YXIgdT1udCh0LmNvb3JkaW5hdGVzLG8sbiksYz1sdChlLmdlb21ldHJ5KCkscixvLG4pO2lmKCFHZShyLG8pKXJldHVybiExO2Zvcih2YXIgcD0wLGQ9YztwPGQubGVuZ3RoO3ArPTEpaWYoIXJ0KGRbcF0sdSkpcmV0dXJuITF9cmV0dXJuITB9dmFyIHB0PWZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPW9lLHRoaXMuZ2VvanNvbj1lLHRoaXMuZ2VvbWV0cmllcz10fTtmdW5jdGlvbiBkdChlKXtpZihlIGluc3RhbmNlb2YgUGUpe2lmKCJnZXQiPT09ZS5uYW1lJiYxPT09ZS5hcmdzLmxlbmd0aClyZXR1cm4hMTtpZigiZmVhdHVyZS1zdGF0ZSI9PT1lLm5hbWUpcmV0dXJuITE7aWYoImhhcyI9PT1lLm5hbWUmJjE9PT1lLmFyZ3MubGVuZ3RoKXJldHVybiExO2lmKCJwcm9wZXJ0aWVzIj09PWUubmFtZXx8Imdlb21ldHJ5LXR5cGUiPT09ZS5uYW1lfHwiaWQiPT09ZS5uYW1lKXJldHVybiExO2lmKC9eZmlsdGVyLS8udGVzdChlLm5hbWUpKXJldHVybiExfWlmKGUgaW5zdGFuY2VvZiBwdClyZXR1cm4hMTt2YXIgdD0hMDtyZXR1cm4gZS5lYWNoQ2hpbGQoKGZ1bmN0aW9uKGUpe3QmJiFkdChlKSYmKHQ9ITEpfSkpLHR9ZnVuY3Rpb24gaHQoZSl7aWYoZSBpbnN0YW5jZW9mIFBlJiYiZmVhdHVyZS1zdGF0ZSI9PT1lLm5hbWUpcmV0dXJuITE7dmFyIHQ9ITA7cmV0dXJuIGUuZWFjaENoaWxkKChmdW5jdGlvbihlKXt0JiYhaHQoZSkmJih0PSExKX0pKSx0fWZ1bmN0aW9uIGZ0KGUsdCl7aWYoZSBpbnN0YW5jZW9mIFBlJiZ0LmluZGV4T2YoZS5uYW1lKT49MClyZXR1cm4hMTt2YXIgcj0hMDtyZXR1cm4gZS5lYWNoQ2hpbGQoKGZ1bmN0aW9uKGUpe3ImJiFmdChlLHQpJiYocj0hMSl9KSkscn1wdC5wYXJzZT1mdW5jdGlvbihlLHQpe2lmKDIhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiJ3dpdGhpbicgZXhwcmVzc2lvbiByZXF1aXJlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgYnV0IGZvdW5kICIrKGUubGVuZ3RoLTEpKyIgaW5zdGVhZC4iKTtpZihUZShlWzFdKSl7dmFyIHI9ZVsxXTtpZigiRmVhdHVyZUNvbGxlY3Rpb24iPT09ci50eXBlKWZvcih2YXIgbz0wO288ci5mZWF0dXJlcy5sZW5ndGg7KytvKXt2YXIgbj1yLmZlYXR1cmVzW29dLmdlb21ldHJ5LnR5cGU7aWYoIlBvbHlnb24iPT09bnx8Ik11bHRpUG9seWdvbiI9PT1uKXJldHVybiBuZXcgcHQocixyLmZlYXR1cmVzW29dLmdlb21ldHJ5KX1lbHNlIGlmKCJGZWF0dXJlIj09PXIudHlwZSl7dmFyIGk9ci5nZW9tZXRyeS50eXBlO2lmKCJQb2x5Z29uIj09PWl8fCJNdWx0aVBvbHlnb24iPT09aSlyZXR1cm4gbmV3IHB0KHIsci5nZW9tZXRyeSl9ZWxzZSBpZigiUG9seWdvbiI9PT1yLnR5cGV8fCJNdWx0aVBvbHlnb24iPT09ci50eXBlKXJldHVybiBuZXcgcHQocixyKX1yZXR1cm4gdC5lcnJvcigiJ3dpdGhpbicgZXhwcmVzc2lvbiByZXF1aXJlcyB2YWxpZCBnZW9qc29uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHBvbHlnb24gZ2VvbWV0cnkgdHlwZS4iKX0scHQucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUpe2lmKG51bGwhPWUuZ2VvbWV0cnkoKSYmbnVsbCE9ZS5jYW5vbmljYWxJRCgpKXtpZigiUG9pbnQiPT09ZS5nZW9tZXRyeVR5cGUoKSlyZXR1cm4gdXQoZSx0aGlzLmdlb21ldHJpZXMpO2lmKCJMaW5lU3RyaW5nIj09PWUuZ2VvbWV0cnlUeXBlKCkpcmV0dXJuIGN0KGUsdGhpcy5nZW9tZXRyaWVzKX1yZXR1cm4hMX0scHQucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbigpe30scHQucHJvdG90eXBlLm91dHB1dERlZmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH0scHQucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3JldHVyblsid2l0aGluIix0aGlzLmdlb2pzb25dfTt2YXIgeXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLnR5cGU9dC50eXBlLHRoaXMubmFtZT1lLHRoaXMuYm91bmRFeHByZXNzaW9uPXR9O3l0LnBhcnNlPWZ1bmN0aW9uKGUsdCl7aWYoMiE9PWUubGVuZ3RofHwic3RyaW5nIiE9dHlwZW9mIGVbMV0pcmV0dXJuIHQuZXJyb3IoIid2YXInIGV4cHJlc3Npb24gcmVxdWlyZXMgZXhhY3RseSBvbmUgc3RyaW5nIGxpdGVyYWwgYXJndW1lbnQuIik7dmFyIHI9ZVsxXTtyZXR1cm4gdC5zY29wZS5oYXMocik/bmV3IHl0KHIsdC5zY29wZS5nZXQocikpOnQuZXJyb3IoJ1Vua25vd24gdmFyaWFibGUgIicrcisnIi4gTWFrZSBzdXJlICInK3IrJyIgaGFzIGJlZW4gYm91bmQgaW4gYW4gZW5jbG9zaW5nICJsZXQiIGV4cHJlc3Npb24gYmVmb3JlIHVzaW5nIGl0LicsMSl9LHl0LnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ib3VuZEV4cHJlc3Npb24uZXZhbHVhdGUoZSl9LHl0LnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24oKXt9LHl0LnByb3RvdHlwZS5vdXRwdXREZWZpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHl0LnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtyZXR1cm5bInZhciIsdGhpcy5uYW1lXX07dmFyIG10PWZ1bmN0aW9uKGUsdCxyLG8sbil7dm9pZCAwPT09dCYmKHQ9W10pLHZvaWQgMD09PW8mJihvPW5ldyBRKSx2b2lkIDA9PT1uJiYobj1bXSksdGhpcy5yZWdpc3RyeT1lLHRoaXMucGF0aD10LHRoaXMua2V5PXQubWFwKChmdW5jdGlvbihlKXtyZXR1cm4iWyIrZSsiXSJ9KSkuam9pbigiIiksdGhpcy5zY29wZT1vLHRoaXMuZXJyb3JzPW4sdGhpcy5leHBlY3RlZFR5cGU9cn07ZnVuY3Rpb24gZ3QoZSl7aWYoZSBpbnN0YW5jZW9mIHl0KXJldHVybiBndChlLmJvdW5kRXhwcmVzc2lvbik7aWYoZSBpbnN0YW5jZW9mIFBlJiYiZXJyb3IiPT09ZS5uYW1lKXJldHVybiExO2lmKGUgaW5zdGFuY2VvZiBMZSlyZXR1cm4hMTtpZihlIGluc3RhbmNlb2YgcHQpcmV0dXJuITE7dmFyIHQ9ZSBpbnN0YW5jZW9mIE5lfHxlIGluc3RhbmNlb2YgT2Uscj0hMDtyZXR1cm4gZS5lYWNoQ2hpbGQoKGZ1bmN0aW9uKGUpe3I9dD9yJiZndChlKTpyJiZlIGluc3RhbmNlb2YgQWV9KSksISFyJiZkdChlKSYmZnQoZSxbInpvb20iLCJoZWF0bWFwLWRlbnNpdHkiLCJsaW5lLXByb2dyZXNzIiwiYWNjdW11bGF0ZWQiLCJpcy1zdXBwb3J0ZWQtc2NyaXB0Il0pfWZ1bmN0aW9uIHZ0KGUsdCl7Zm9yKHZhciByLG8sbj1lLmxlbmd0aC0xLGk9MCxhPW4scz0wO2k8PWE7KWlmKHI9ZVtzPU1hdGguZmxvb3IoKGkrYSkvMildLG89ZVtzKzFdLHI8PXQpe2lmKHM9PT1ufHx0PG8pcmV0dXJuIHM7aT1zKzF9ZWxzZXtpZighKHI+dCkpdGhyb3cgbmV3IEllKCJJbnB1dCBpcyBub3QgYSBudW1iZXIuIik7YT1zLTF9cmV0dXJuIDB9bXQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUsdCxyLG8sbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPXt9KSx0P3RoaXMuY29uY2F0KHQscixvKS5fcGFyc2UoZSxuKTp0aGlzLl9wYXJzZShlLG4pfSxtdC5wcm90b3R5cGUuX3BhcnNlPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcihlLHQscil7cmV0dXJuImFzc2VydCI9PT1yP25ldyBPZSh0LFtlXSk6ImNvZXJjZSI9PT1yP25ldyBOZSh0LFtlXSk6ZX1pZihudWxsIT09ZSYmInN0cmluZyIhPXR5cGVvZiBlJiYiYm9vbGVhbiIhPXR5cGVvZiBlJiYibnVtYmVyIiE9dHlwZW9mIGV8fChlPVsibGl0ZXJhbCIsZV0pLEFycmF5LmlzQXJyYXkoZSkpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gdGhpcy5lcnJvcignRXhwZWN0ZWQgYW4gYXJyYXkgd2l0aCBhdCBsZWFzdCBvbmUgZWxlbWVudC4gSWYgeW91IHdhbnRlZCBhIGxpdGVyYWwgYXJyYXksIHVzZSBbImxpdGVyYWwiLCBbXV0uJyk7dmFyIG89ZVswXTtpZigic3RyaW5nIiE9dHlwZW9mIG8pcmV0dXJuIHRoaXMuZXJyb3IoIkV4cHJlc3Npb24gbmFtZSBtdXN0IGJlIGEgc3RyaW5nLCBidXQgZm91bmQgIit0eXBlb2YgbysnIGluc3RlYWQuIElmIHlvdSB3YW50ZWQgYSBsaXRlcmFsIGFycmF5LCB1c2UgWyJsaXRlcmFsIiwgWy4uLl1dLicsMCksbnVsbDt2YXIgbj10aGlzLnJlZ2lzdHJ5W29dO2lmKG4pe3ZhciBpPW4ucGFyc2UoZSx0aGlzKTtpZighaSlyZXR1cm4gbnVsbDtpZih0aGlzLmV4cGVjdGVkVHlwZSl7dmFyIGE9dGhpcy5leHBlY3RlZFR5cGUscz1pLnR5cGU7aWYoInN0cmluZyIhPT1hLmtpbmQmJiJudW1iZXIiIT09YS5raW5kJiYiYm9vbGVhbiIhPT1hLmtpbmQmJiJvYmplY3QiIT09YS5raW5kJiYiYXJyYXkiIT09YS5raW5kfHwidmFsdWUiIT09cy5raW5kKWlmKCJjb2xvciIhPT1hLmtpbmQmJiJmb3JtYXR0ZWQiIT09YS5raW5kJiYicmVzb2x2ZWRJbWFnZSIhPT1hLmtpbmR8fCJ2YWx1ZSIhPT1zLmtpbmQmJiJzdHJpbmciIT09cy5raW5kKXtpZih0aGlzLmNoZWNrU3VidHlwZShhLHMpKXJldHVybiBudWxsfWVsc2UgaT1yKGksYSx0LnR5cGVBbm5vdGF0aW9ufHwiY29lcmNlIik7ZWxzZSBpPXIoaSxhLHQudHlwZUFubm90YXRpb258fCJhc3NlcnQiKX1pZighKGkgaW5zdGFuY2VvZiBBZSkmJiJyZXNvbHZlZEltYWdlIiE9PWkudHlwZS5raW5kJiZndChpKSl7dmFyIGw9bmV3IERlO3RyeXtpPW5ldyBBZShpLnR5cGUsaS5ldmFsdWF0ZShsKSl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuZXJyb3IoZS5tZXNzYWdlKSxudWxsfX1yZXR1cm4gaX1yZXR1cm4gdGhpcy5lcnJvcignVW5rbm93biBleHByZXNzaW9uICInK28rJyIuIElmIHlvdSB3YW50ZWQgYSBsaXRlcmFsIGFycmF5LCB1c2UgWyJsaXRlcmFsIiwgWy4uLl1dLicsMCl9cmV0dXJuIHZvaWQgMD09PWU/dGhpcy5lcnJvcigiJ3VuZGVmaW5lZCcgdmFsdWUgaW52YWxpZC4gVXNlIG51bGwgaW5zdGVhZC4iKToib2JqZWN0Ij09dHlwZW9mIGU/dGhpcy5lcnJvcignQmFyZSBvYmplY3RzIGludmFsaWQuIFVzZSBbImxpdGVyYWwiLCB7Li4ufV0gaW5zdGVhZC4nKTp0aGlzLmVycm9yKCJFeHBlY3RlZCBhbiBhcnJheSwgYnV0IGZvdW5kICIrdHlwZW9mIGUrIiBpbnN0ZWFkLiIpfSxtdC5wcm90b3R5cGUuY29uY2F0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbz0ibnVtYmVyIj09dHlwZW9mIGU/dGhpcy5wYXRoLmNvbmNhdChlKTp0aGlzLnBhdGgsbj1yP3RoaXMuc2NvcGUuY29uY2F0KHIpOnRoaXMuc2NvcGU7cmV0dXJuIG5ldyBtdCh0aGlzLnJlZ2lzdHJ5LG8sdHx8bnVsbCxuLHRoaXMuZXJyb3JzKX0sbXQucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPWFyZ3VtZW50cy5sZW5ndGgtMTtyLS0gPjA7KXRbcl09YXJndW1lbnRzW3IrMV07dmFyIG89IiIrdGhpcy5rZXkrdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiJbIitlKyJdIn0pKS5qb2luKCIiKTt0aGlzLmVycm9ycy5wdXNoKG5ldyBZKG8sZSkpfSxtdC5wcm90b3R5cGUuY2hlY2tTdWJ0eXBlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZmUoZSx0KTtyZXR1cm4gciYmdGhpcy5lcnJvcihyKSxyfTt2YXIgYnQ9ZnVuY3Rpb24oZSx0LHIpe3RoaXMudHlwZT1lLHRoaXMuaW5wdXQ9dCx0aGlzLmxhYmVscz1bXSx0aGlzLm91dHB1dHM9W107Zm9yKHZhciBvPTAsbj1yO288bi5sZW5ndGg7bys9MSl7dmFyIGk9bltvXSxhPWlbMF0scz1pWzFdO3RoaXMubGFiZWxzLnB1c2goYSksdGhpcy5vdXRwdXRzLnB1c2gocyl9fTtidC5wYXJzZT1mdW5jdGlvbihlLHQpe2lmKGUubGVuZ3RoLTE8NClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgYXQgbGVhc3QgNCBhcmd1bWVudHMsIGJ1dCBmb3VuZCBvbmx5ICIrKGUubGVuZ3RoLTEpKyIuIik7aWYoKGUubGVuZ3RoLTEpJTIhPTApcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cy4iKTt2YXIgcj10LnBhcnNlKGVbMV0sMSx0ZSk7aWYoIXIpcmV0dXJuIG51bGw7dmFyIG89W10sbj1udWxsO3QuZXhwZWN0ZWRUeXBlJiYidmFsdWUiIT09dC5leHBlY3RlZFR5cGUua2luZCYmKG49dC5leHBlY3RlZFR5cGUpO2Zvcih2YXIgaT0xO2k8ZS5sZW5ndGg7aSs9Mil7dmFyIGE9MT09PWk/LTEvMDplW2ldLHM9ZVtpKzFdLGw9aSx1PWkrMTtpZigibnVtYmVyIiE9dHlwZW9mIGEpcmV0dXJuIHQuZXJyb3IoJ0lucHV0L291dHB1dCBwYWlycyBmb3IgInN0ZXAiIGV4cHJlc3Npb25zIG11c3QgYmUgZGVmaW5lZCB1c2luZyBsaXRlcmFsIG51bWVyaWMgdmFsdWVzIChub3QgY29tcHV0ZWQgZXhwcmVzc2lvbnMpIGZvciB0aGUgaW5wdXQgdmFsdWVzLicsbCk7aWYoby5sZW5ndGgmJm9bby5sZW5ndGgtMV1bMF0+PWEpcmV0dXJuIHQuZXJyb3IoJ0lucHV0L291dHB1dCBwYWlycyBmb3IgInN0ZXAiIGV4cHJlc3Npb25zIG11c3QgYmUgYXJyYW5nZWQgd2l0aCBpbnB1dCB2YWx1ZXMgaW4gc3RyaWN0bHkgYXNjZW5kaW5nIG9yZGVyLicsbCk7dmFyIGM9dC5wYXJzZShzLHUsbik7aWYoIWMpcmV0dXJuIG51bGw7bj1ufHxjLnR5cGUsby5wdXNoKFthLGNdKX1yZXR1cm4gbmV3IGJ0KG4scixvKX0sYnQucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGFiZWxzLHI9dGhpcy5vdXRwdXRzO2lmKDE9PT10Lmxlbmd0aClyZXR1cm4gclswXS5ldmFsdWF0ZShlKTt2YXIgbz10aGlzLmlucHV0LmV2YWx1YXRlKGUpO2lmKG88PXRbMF0pcmV0dXJuIHJbMF0uZXZhbHVhdGUoZSk7dmFyIG49dC5sZW5ndGg7cmV0dXJuIG8+PXRbbi0xXT9yW24tMV0uZXZhbHVhdGUoZSk6clt2dCh0LG8pXS5ldmFsdWF0ZShlKX0sYnQucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXtlKHRoaXMuaW5wdXQpO2Zvcih2YXIgdD0wLHI9dGhpcy5vdXRwdXRzO3Q8ci5sZW5ndGg7dCs9MSllKHJbdF0pfSxidC5wcm90b3R5cGUub3V0cHV0RGVmaW5lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm91dHB1dHMuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm91dHB1dERlZmluZWQoKX0pKX0sYnQucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT1bInN0ZXAiLHRoaXMuaW5wdXQuc2VyaWFsaXplKCldLHQ9MDt0PHRoaXMubGFiZWxzLmxlbmd0aDt0KyspdD4wJiZlLnB1c2godGhpcy5sYWJlbHNbdF0pLGUucHVzaCh0aGlzLm91dHB1dHNbdF0uc2VyaWFsaXplKCkpO3JldHVybiBlfTt2YXIgeHQ9d3Q7ZnVuY3Rpb24gd3QoZSx0LHIsbyl7dGhpcy5jeD0zKmUsdGhpcy5ieD0zKihyLWUpLXRoaXMuY3gsdGhpcy5heD0xLXRoaXMuY3gtdGhpcy5ieCx0aGlzLmN5PTMqdCx0aGlzLmJ5PTMqKG8tdCktdGhpcy5jeSx0aGlzLmF5PTEtdGhpcy5jeS10aGlzLmJ5LHRoaXMucDF4PWUsdGhpcy5wMXk9byx0aGlzLnAyeD1yLHRoaXMucDJ5PW99ZnVuY3Rpb24ga3QoZSx0LHIpe3JldHVybiBlKigxLXIpK3Qqcn1mdW5jdGlvbiBqdChlLHQscil7cmV0dXJuIG5ldyBiZShrdChlLnIsdC5yLHIpLGt0KGUuZyx0Lmcsciksa3QoZS5iLHQuYixyKSxrdChlLmEsdC5hLHIpKX1mdW5jdGlvbiB6dChlLHQscil7cmV0dXJuIGUubWFwKChmdW5jdGlvbihlLG8pe3JldHVybiBrdChlLHRbb10scil9KSl9d3QucHJvdG90eXBlLnNhbXBsZUN1cnZlWD1mdW5jdGlvbihlKXtyZXR1cm4oKHRoaXMuYXgqZSt0aGlzLmJ4KSplK3RoaXMuY3gpKmV9LHd0LnByb3RvdHlwZS5zYW1wbGVDdXJ2ZVk9ZnVuY3Rpb24oZSl7cmV0dXJuKCh0aGlzLmF5KmUrdGhpcy5ieSkqZSt0aGlzLmN5KSplfSx3dC5wcm90b3R5cGUuc2FtcGxlQ3VydmVEZXJpdmF0aXZlWD1mdW5jdGlvbihlKXtyZXR1cm4oMyp0aGlzLmF4KmUrMip0aGlzLmJ4KSplK3RoaXMuY3h9LHd0LnByb3RvdHlwZS5zb2x2ZUN1cnZlWD1mdW5jdGlvbihlLHQpe3ZhciByLG8sbixpLGE7Zm9yKHZvaWQgMD09PXQmJih0PTFlLTYpLG49ZSxhPTA7YTw4O2ErKyl7aWYoaT10aGlzLnNhbXBsZUN1cnZlWChuKS1lLE1hdGguYWJzKGkpPHQpcmV0dXJuIG47dmFyIHM9dGhpcy5zYW1wbGVDdXJ2ZURlcml2YXRpdmVYKG4pO2lmKE1hdGguYWJzKHMpPDFlLTYpYnJlYWs7bi09aS9zfWlmKChuPWUpPChyPTApKXJldHVybiByO2lmKG4+KG89MSkpcmV0dXJuIG87Zm9yKDtyPG87KXtpZihpPXRoaXMuc2FtcGxlQ3VydmVYKG4pLE1hdGguYWJzKGktZSk8dClyZXR1cm4gbjtlPmk/cj1uOm89bixuPS41KihvLXIpK3J9cmV0dXJuIG59LHd0LnByb3RvdHlwZS5zb2x2ZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNhbXBsZUN1cnZlWSh0aGlzLnNvbHZlQ3VydmVYKGUsdCkpfTt2YXIgVHQ9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsbnVtYmVyOmt0LGNvbG9yOmp0LGFycmF5Onp0fSksX3Q9Ljk1MDQ3LFN0PTEsQXQ9MS4wODg4MyxJdD00LzI5LEN0PTYvMjksT3Q9MypDdCpDdCxFdD1DdCpDdCpDdCxxdD1NYXRoLlBJLzE4MCxNdD0xODAvTWF0aC5QSTtmdW5jdGlvbiBOdChlKXtyZXR1cm4gZT5FdD9NYXRoLnBvdyhlLDEvMyk6ZS9PdCtJdH1mdW5jdGlvbiBSdChlKXtyZXR1cm4gZT5DdD9lKmUqZTpPdCooZS1JdCl9ZnVuY3Rpb24gRHQoZSl7cmV0dXJuIDI1NSooZTw9LjAwMzEzMDg/MTIuOTIqZToxLjA1NSpNYXRoLnBvdyhlLDEvMi40KS0uMDU1KX1mdW5jdGlvbiBQdChlKXtyZXR1cm4oZS89MjU1KTw9LjA0MDQ1P2UvMTIuOTI6TWF0aC5wb3coKGUrLjA1NSkvMS4wNTUsMi40KX1mdW5jdGlvbiBGdChlKXt2YXIgdD1QdChlLnIpLHI9UHQoZS5nKSxvPVB0KGUuYiksbj1OdCgoLjQxMjQ1NjQqdCsuMzU3NTc2MSpyKy4xODA0Mzc1Km8pL190KSxpPU50KCguMjEyNjcyOSp0Ky43MTUxNTIyKnIrLjA3MjE3NSpvKS9TdCk7cmV0dXJue2w6MTE2KmktMTYsYTo1MDAqKG4taSksYjoyMDAqKGktTnQoKC4wMTkzMzM5KnQrLjExOTE5MipyKy45NTAzMDQxKm8pL0F0KSksYWxwaGE6ZS5hfX1mdW5jdGlvbiBMdChlKXt2YXIgdD0oZS5sKzE2KS8xMTYscj1pc05hTihlLmEpP3Q6dCtlLmEvNTAwLG89aXNOYU4oZS5iKT90OnQtZS5iLzIwMDtyZXR1cm4gdD1TdCpSdCh0KSxyPV90KlJ0KHIpLG89QXQqUnQobyksbmV3IGJlKER0KDMuMjQwNDU0MipyLTEuNTM3MTM4NSp0LS40OTg1MzE0Km8pLER0KC0uOTY5MjY2KnIrMS44NzYwMTA4KnQrLjA0MTU1NipvKSxEdCguMDU1NjQzNCpyLS4yMDQwMjU5KnQrMS4wNTcyMjUyKm8pLGUuYWxwaGEpfWZ1bmN0aW9uICR0KGUsdCxyKXtyZXR1cm57bDprdChlLmwsdC5sLHIpLGE6a3QoZS5hLHQuYSxyKSxiOmt0KGUuYix0LmIsciksYWxwaGE6a3QoZS5hbHBoYSx0LmFscGhhLHIpfX1mdW5jdGlvbiBVdChlKXt2YXIgdD1GdChlKSxyPXQubCxvPXQuYSxuPXQuYixpPU1hdGguYXRhbjIobixvKSpNdDtyZXR1cm57aDppPDA/aSszNjA6aSxjOk1hdGguc3FydChvKm8rbipuKSxsOnIsYWxwaGE6ZS5hfX1mdW5jdGlvbiBKdChlKXt2YXIgdD1lLmgqcXQscj1lLmM7cmV0dXJuIEx0KHtsOmUubCxhOk1hdGguY29zKHQpKnIsYjpNYXRoLnNpbih0KSpyLGFscGhhOmUuYWxwaGF9KX1mdW5jdGlvbiBXdChlLHQscil7dmFyIG89dC1lO3JldHVybiBlK3IqKG8+MTgwfHxvPC0xODA/by0zNjAqTWF0aC5yb3VuZChvLzM2MCk6byl9ZnVuY3Rpb24gR3QoZSx0LHIpe3JldHVybntoOld0KGUuaCx0LmgsciksYzprdChlLmMsdC5jLHIpLGw6a3QoZS5sLHQubCxyKSxhbHBoYTprdChlLmFscGhhLHQuYWxwaGEscil9fXZhciBCdD17Zm9yd2FyZDpGdCxyZXZlcnNlOkx0LGludGVycG9sYXRlOiR0fSxWdD17Zm9yd2FyZDpVdCxyZXZlcnNlOkp0LGludGVycG9sYXRlOkd0fSxIdD1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxsYWI6QnQsaGNsOlZ0fSksWnQ9ZnVuY3Rpb24oZSx0LHIsbyxuKXt0aGlzLnR5cGU9ZSx0aGlzLm9wZXJhdG9yPXQsdGhpcy5pbnRlcnBvbGF0aW9uPXIsdGhpcy5pbnB1dD1vLHRoaXMubGFiZWxzPVtdLHRoaXMub3V0cHV0cz1bXTtmb3IodmFyIGk9MCxhPW47aTxhLmxlbmd0aDtpKz0xKXt2YXIgcz1hW2ldLGw9c1swXSx1PXNbMV07dGhpcy5sYWJlbHMucHVzaChsKSx0aGlzLm91dHB1dHMucHVzaCh1KX19O2Z1bmN0aW9uIFh0KGUsdCxyLG8pe3ZhciBuPW8tcixpPWUtcjtyZXR1cm4gMD09PW4/MDoxPT09dD9pL246KE1hdGgucG93KHQsaSktMSkvKE1hdGgucG93KHQsbiktMSl9WnQuaW50ZXJwb2xhdGlvbkZhY3Rvcj1mdW5jdGlvbihlLHQscixvKXt2YXIgbj0wO2lmKCJleHBvbmVudGlhbCI9PT1lLm5hbWUpbj1YdCh0LGUuYmFzZSxyLG8pO2Vsc2UgaWYoImxpbmVhciI9PT1lLm5hbWUpbj1YdCh0LDEscixvKTtlbHNlIGlmKCJjdWJpYy1iZXppZXIiPT09ZS5uYW1lKXt2YXIgaT1lLmNvbnRyb2xQb2ludHM7bj1uZXcgeHQoaVswXSxpWzFdLGlbMl0saVszXSkuc29sdmUoWHQodCwxLHIsbykpfXJldHVybiBufSxadC5wYXJzZT1mdW5jdGlvbihlLHQpe3ZhciByPWVbMF0sbz1lWzFdLG49ZVsyXSxpPWUuc2xpY2UoMyk7aWYoIUFycmF5LmlzQXJyYXkobyl8fDA9PT1vLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgYW4gaW50ZXJwb2xhdGlvbiB0eXBlIGV4cHJlc3Npb24uIiwxKTtpZigibGluZWFyIj09PW9bMF0pbz17bmFtZToibGluZWFyIn07ZWxzZSBpZigiZXhwb25lbnRpYWwiPT09b1swXSl7dmFyIGE9b1sxXTtpZigibnVtYmVyIiE9dHlwZW9mIGEpcmV0dXJuIHQuZXJyb3IoIkV4cG9uZW50aWFsIGludGVycG9sYXRpb24gcmVxdWlyZXMgYSBudW1lcmljIGJhc2UuIiwxLDEpO289e25hbWU6ImV4cG9uZW50aWFsIixiYXNlOmF9fWVsc2V7aWYoImN1YmljLWJlemllciIhPT1vWzBdKXJldHVybiB0LmVycm9yKCJVbmtub3duIGludGVycG9sYXRpb24gdHlwZSAiK1N0cmluZyhvWzBdKSwxLDApO3ZhciBzPW8uc2xpY2UoMSk7aWYoNCE9PXMubGVuZ3RofHxzLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiJudW1iZXIiIT10eXBlb2YgZXx8ZTwwfHxlPjF9KSkpcmV0dXJuIHQuZXJyb3IoIkN1YmljIGJlemllciBpbnRlcnBvbGF0aW9uIHJlcXVpcmVzIGZvdXIgbnVtZXJpYyBhcmd1bWVudHMgd2l0aCB2YWx1ZXMgYmV0d2VlbiAwIGFuZCAxLiIsMSk7bz17bmFtZToiY3ViaWMtYmV6aWVyIixjb250cm9sUG9pbnRzOnN9fWlmKGUubGVuZ3RoLTE8NClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgYXQgbGVhc3QgNCBhcmd1bWVudHMsIGJ1dCBmb3VuZCBvbmx5ICIrKGUubGVuZ3RoLTEpKyIuIik7aWYoKGUubGVuZ3RoLTEpJTIhPTApcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIGFuIGV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50cy4iKTtpZighKG49dC5wYXJzZShuLDIsdGUpKSlyZXR1cm4gbnVsbDt2YXIgbD1bXSx1PW51bGw7ImludGVycG9sYXRlLWhjbCI9PT1yfHwiaW50ZXJwb2xhdGUtbGFiIj09PXI/dT1uZTp0LmV4cGVjdGVkVHlwZSYmInZhbHVlIiE9PXQuZXhwZWN0ZWRUeXBlLmtpbmQmJih1PXQuZXhwZWN0ZWRUeXBlKTtmb3IodmFyIGM9MDtjPGkubGVuZ3RoO2MrPTIpe3ZhciBwPWlbY10sZD1pW2MrMV0saD1jKzMsZj1jKzQ7aWYoIm51bWJlciIhPXR5cGVvZiBwKXJldHVybiB0LmVycm9yKCdJbnB1dC9vdXRwdXQgcGFpcnMgZm9yICJpbnRlcnBvbGF0ZSIgZXhwcmVzc2lvbnMgbXVzdCBiZSBkZWZpbmVkIHVzaW5nIGxpdGVyYWwgbnVtZXJpYyB2YWx1ZXMgKG5vdCBjb21wdXRlZCBleHByZXNzaW9ucykgZm9yIHRoZSBpbnB1dCB2YWx1ZXMuJyxoKTtpZihsLmxlbmd0aCYmbFtsLmxlbmd0aC0xXVswXT49cClyZXR1cm4gdC5lcnJvcignSW5wdXQvb3V0cHV0IHBhaXJzIGZvciAiaW50ZXJwb2xhdGUiIGV4cHJlc3Npb25zIG11c3QgYmUgYXJyYW5nZWQgd2l0aCBpbnB1dCB2YWx1ZXMgaW4gc3RyaWN0bHkgYXNjZW5kaW5nIG9yZGVyLicsaCk7dmFyIHk9dC5wYXJzZShkLGYsdSk7aWYoIXkpcmV0dXJuIG51bGw7dT11fHx5LnR5cGUsbC5wdXNoKFtwLHldKX1yZXR1cm4ibnVtYmVyIj09PXUua2luZHx8ImNvbG9yIj09PXUua2luZHx8ImFycmF5Ij09PXUua2luZCYmIm51bWJlciI9PT11Lml0ZW1UeXBlLmtpbmQmJiJudW1iZXIiPT10eXBlb2YgdS5OP25ldyBadCh1LHIsbyxuLGwpOnQuZXJyb3IoIlR5cGUgIitkZSh1KSsiIGlzIG5vdCBpbnRlcnBvbGF0YWJsZS4iKX0sWnQucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGFiZWxzLHI9dGhpcy5vdXRwdXRzO2lmKDE9PT10Lmxlbmd0aClyZXR1cm4gclswXS5ldmFsdWF0ZShlKTt2YXIgbz10aGlzLmlucHV0LmV2YWx1YXRlKGUpO2lmKG88PXRbMF0pcmV0dXJuIHJbMF0uZXZhbHVhdGUoZSk7dmFyIG49dC5sZW5ndGg7aWYobz49dFtuLTFdKXJldHVybiByW24tMV0uZXZhbHVhdGUoZSk7dmFyIGk9dnQodCxvKSxhPXRbaV0scz10W2krMV0sbD1adC5pbnRlcnBvbGF0aW9uRmFjdG9yKHRoaXMuaW50ZXJwb2xhdGlvbixvLGEscyksdT1yW2ldLmV2YWx1YXRlKGUpLGM9cltpKzFdLmV2YWx1YXRlKGUpO3JldHVybiJpbnRlcnBvbGF0ZSI9PT10aGlzLm9wZXJhdG9yP1R0W3RoaXMudHlwZS5raW5kLnRvTG93ZXJDYXNlKCldKHUsYyxsKToiaW50ZXJwb2xhdGUtaGNsIj09PXRoaXMub3BlcmF0b3I/VnQucmV2ZXJzZShWdC5pbnRlcnBvbGF0ZShWdC5mb3J3YXJkKHUpLFZ0LmZvcndhcmQoYyksbCkpOkJ0LnJldmVyc2UoQnQuaW50ZXJwb2xhdGUoQnQuZm9yd2FyZCh1KSxCdC5mb3J3YXJkKGMpLGwpKX0sWnQucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXtlKHRoaXMuaW5wdXQpO2Zvcih2YXIgdD0wLHI9dGhpcy5vdXRwdXRzO3Q8ci5sZW5ndGg7dCs9MSllKHJbdF0pfSxadC5wcm90b3R5cGUub3V0cHV0RGVmaW5lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm91dHB1dHMuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm91dHB1dERlZmluZWQoKX0pKX0sWnQucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBlO2U9ImxpbmVhciI9PT10aGlzLmludGVycG9sYXRpb24ubmFtZT9bImxpbmVhciJdOiJleHBvbmVudGlhbCI9PT10aGlzLmludGVycG9sYXRpb24ubmFtZT8xPT09dGhpcy5pbnRlcnBvbGF0aW9uLmJhc2U/WyJsaW5lYXIiXTpbImV4cG9uZW50aWFsIix0aGlzLmludGVycG9sYXRpb24uYmFzZV06WyJjdWJpYy1iZXppZXIiXS5jb25jYXQodGhpcy5pbnRlcnBvbGF0aW9uLmNvbnRyb2xQb2ludHMpO2Zvcih2YXIgdD1bdGhpcy5vcGVyYXRvcixlLHRoaXMuaW5wdXQuc2VyaWFsaXplKCldLHI9MDtyPHRoaXMubGFiZWxzLmxlbmd0aDtyKyspdC5wdXNoKHRoaXMubGFiZWxzW3JdLHRoaXMub3V0cHV0c1tyXS5zZXJpYWxpemUoKSk7cmV0dXJuIHR9O3ZhciBLdD1mdW5jdGlvbihlLHQpe3RoaXMudHlwZT1lLHRoaXMuYXJncz10fTtLdC5wYXJzZT1mdW5jdGlvbihlLHQpe2lmKGUubGVuZ3RoPDIpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVjdGVkIGF0IGxlYXN0IG9uZSBhcmd1bWVudC4iKTt2YXIgcj1udWxsLG89dC5leHBlY3RlZFR5cGU7byYmInZhbHVlIiE9PW8ua2luZCYmKHI9byk7Zm9yKHZhciBuPVtdLGk9MCxhPWUuc2xpY2UoMSk7aTxhLmxlbmd0aDtpKz0xKXt2YXIgcz1hW2ldLGw9dC5wYXJzZShzLDErbi5sZW5ndGgscix2b2lkIDAse3R5cGVBbm5vdGF0aW9uOiJvbWl0In0pO2lmKCFsKXJldHVybiBudWxsO3I9cnx8bC50eXBlLG4ucHVzaChsKX12YXIgdT1vJiZuLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiBmZShvLGUudHlwZSl9KSk7cmV0dXJuIG5ldyBLdCh1P2FlOnIsbil9LEt0LnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1udWxsLG89MCxuPTAsaT10aGlzLmFyZ3M7bjxpLmxlbmd0aCYmKG8rKywocj1pW25dLmV2YWx1YXRlKGUpKSYmciBpbnN0YW5jZW9mIGplJiYhci5hdmFpbGFibGUmJih0fHwodD1yLm5hbWUpLHI9bnVsbCxvPT09dGhpcy5hcmdzLmxlbmd0aCYmKHI9dCkpLG51bGw9PT1yKTtuKz0xKTtyZXR1cm4gcn0sS3QucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXt0aGlzLmFyZ3MuZm9yRWFjaChlKX0sS3QucHJvdG90eXBlLm91dHB1dERlZmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcmdzLmV2ZXJ5KChmdW5jdGlvbihlKXtyZXR1cm4gZS5vdXRwdXREZWZpbmVkKCl9KSl9LEt0LnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgZT1bImNvYWxlc2NlIl07cmV0dXJuIHRoaXMuZWFjaENoaWxkKChmdW5jdGlvbih0KXtlLnB1c2godC5zZXJpYWxpemUoKSl9KSksZX07dmFyIFl0PWZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPXQudHlwZSx0aGlzLmJpbmRpbmdzPVtdLmNvbmNhdChlKSx0aGlzLnJlc3VsdD10fTtZdC5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVzdWx0LmV2YWx1YXRlKGUpfSxZdC5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9dGhpcy5iaW5kaW5nczt0PHIubGVuZ3RoO3QrPTEpZShyW3RdWzFdKTtlKHRoaXMucmVzdWx0KX0sWXQucGFyc2U9ZnVuY3Rpb24oZSx0KXtpZihlLmxlbmd0aDw0KXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhdCBsZWFzdCAzIGFyZ3VtZW50cywgYnV0IGZvdW5kICIrKGUubGVuZ3RoLTEpKyIgaW5zdGVhZC4iKTtmb3IodmFyIHI9W10sbz0xO288ZS5sZW5ndGgtMTtvKz0yKXt2YXIgbj1lW29dO2lmKCJzdHJpbmciIT10eXBlb2YgbilyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgc3RyaW5nLCBidXQgZm91bmQgIit0eXBlb2YgbisiIGluc3RlYWQuIixvKTtpZigvW15hLXpBLVowLTlfXS8udGVzdChuKSlyZXR1cm4gdC5lcnJvcigiVmFyaWFibGUgbmFtZXMgbXVzdCBjb250YWluIG9ubHkgYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgb3IgJ18nLiIsbyk7dmFyIGk9dC5wYXJzZShlW28rMV0sbysxKTtpZighaSlyZXR1cm4gbnVsbDtyLnB1c2goW24saV0pfXZhciBhPXQucGFyc2UoZVtlLmxlbmd0aC0xXSxlLmxlbmd0aC0xLHQuZXhwZWN0ZWRUeXBlLHIpO3JldHVybiBhP25ldyBZdChyLGEpOm51bGx9LFl0LnByb3RvdHlwZS5vdXRwdXREZWZpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVzdWx0Lm91dHB1dERlZmluZWQoKX0sWXQucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT1bImxldCJdLHQ9MCxyPXRoaXMuYmluZGluZ3M7dDxyLmxlbmd0aDt0Kz0xKXt2YXIgbz1yW3RdLG49b1swXSxpPW9bMV07ZS5wdXNoKG4saS5zZXJpYWxpemUoKSl9cmV0dXJuIGUucHVzaCh0aGlzLnJlc3VsdC5zZXJpYWxpemUoKSksZX07dmFyIFF0PWZ1bmN0aW9uKGUsdCxyKXt0aGlzLnR5cGU9ZSx0aGlzLmluZGV4PXQsdGhpcy5pbnB1dD1yfTtRdC5wYXJzZT1mdW5jdGlvbihlLHQpe2lmKDMhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgMiBhcmd1bWVudHMsIGJ1dCBmb3VuZCAiKyhlLmxlbmd0aC0xKSsiIGluc3RlYWQuIik7dmFyIHI9dC5wYXJzZShlWzFdLDEsdGUpLG89dC5wYXJzZShlWzJdLDIscGUodC5leHBlY3RlZFR5cGV8fGFlKSk7aWYoIXJ8fCFvKXJldHVybiBudWxsO3ZhciBuPW8udHlwZTtyZXR1cm4gbmV3IFF0KG4uaXRlbVR5cGUscixvKX0sUXQucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaW5kZXguZXZhbHVhdGUoZSkscj10aGlzLmlucHV0LmV2YWx1YXRlKGUpO2lmKHQ8MCl0aHJvdyBuZXcgSWUoIkFycmF5IGluZGV4IG91dCBvZiBib3VuZHM6ICIrdCsiIDwgMC4iKTtpZih0Pj1yLmxlbmd0aCl0aHJvdyBuZXcgSWUoIkFycmF5IGluZGV4IG91dCBvZiBib3VuZHM6ICIrdCsiID4gIisoci5sZW5ndGgtMSkrIi4iKTtpZih0IT09TWF0aC5mbG9vcih0KSl0aHJvdyBuZXcgSWUoIkFycmF5IGluZGV4IG11c3QgYmUgYW4gaW50ZWdlciwgYnV0IGZvdW5kICIrdCsiIGluc3RlYWQuIik7cmV0dXJuIHJbdF19LFF0LnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24oZSl7ZSh0aGlzLmluZGV4KSxlKHRoaXMuaW5wdXQpfSxRdC5wcm90b3R5cGUub3V0cHV0RGVmaW5lZD1mdW5jdGlvbigpe3JldHVybiExfSxRdC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuWyJhdCIsdGhpcy5pbmRleC5zZXJpYWxpemUoKSx0aGlzLmlucHV0LnNlcmlhbGl6ZSgpXX07dmFyIGVyPWZ1bmN0aW9uKGUsdCl7dGhpcy50eXBlPW9lLHRoaXMubmVlZGxlPWUsdGhpcy5oYXlzdGFjaz10fTtlci5wYXJzZT1mdW5jdGlvbihlLHQpe2lmKDMhPT1lLmxlbmd0aClyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgMiBhcmd1bWVudHMsIGJ1dCBmb3VuZCAiKyhlLmxlbmd0aC0xKSsiIGluc3RlYWQuIik7dmFyIHI9dC5wYXJzZShlWzFdLDEsYWUpLG89dC5wYXJzZShlWzJdLDIsYWUpO3JldHVybiByJiZvP3llKHIudHlwZSxbb2UscmUsdGUsZWUsYWVdKT9uZXcgZXIocixvKTp0LmVycm9yKCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBiZSBvZiB0eXBlIGJvb2xlYW4sIHN0cmluZywgbnVtYmVyIG9yIG51bGwsIGJ1dCBmb3VuZCAiK2RlKHIudHlwZSkrIiBpbnN0ZWFkIik6bnVsbH0sZXIucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubmVlZGxlLmV2YWx1YXRlKGUpLHI9dGhpcy5oYXlzdGFjay5ldmFsdWF0ZShlKTtpZighcilyZXR1cm4hMTtpZighbWUodCxbImJvb2xlYW4iLCJzdHJpbmciLCJudW1iZXIiLCJudWxsIl0pKXRocm93IG5ldyBJZSgiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBib29sZWFuLCBzdHJpbmcsIG51bWJlciBvciBudWxsLCBidXQgZm91bmQgIitkZShfZSh0KSkrIiBpbnN0ZWFkLiIpO2lmKCFtZShyLFsic3RyaW5nIiwiYXJyYXkiXSkpdGhyb3cgbmV3IEllKCJFeHBlY3RlZCBzZWNvbmQgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBhcnJheSBvciBzdHJpbmcsIGJ1dCBmb3VuZCAiK2RlKF9lKHIpKSsiIGluc3RlYWQuIik7cmV0dXJuIHIuaW5kZXhPZih0KT49MH0sZXIucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXtlKHRoaXMubmVlZGxlKSxlKHRoaXMuaGF5c3RhY2spfSxlci5wcm90b3R5cGUub3V0cHV0RGVmaW5lZD1mdW5jdGlvbigpe3JldHVybiEwfSxlci5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7cmV0dXJuWyJpbiIsdGhpcy5uZWVkbGUuc2VyaWFsaXplKCksdGhpcy5oYXlzdGFjay5zZXJpYWxpemUoKV19O3ZhciB0cj1mdW5jdGlvbihlLHQscil7dGhpcy50eXBlPXRlLHRoaXMubmVlZGxlPWUsdGhpcy5oYXlzdGFjaz10LHRoaXMuZnJvbUluZGV4PXJ9O3RyLnBhcnNlPWZ1bmN0aW9uKGUsdCl7aWYoZS5sZW5ndGg8PTJ8fGUubGVuZ3RoPj01KXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCAzIG9yIDQgYXJndW1lbnRzLCBidXQgZm91bmQgIisoZS5sZW5ndGgtMSkrIiBpbnN0ZWFkLiIpO3ZhciByPXQucGFyc2UoZVsxXSwxLGFlKSxvPXQucGFyc2UoZVsyXSwyLGFlKTtpZighcnx8IW8pcmV0dXJuIG51bGw7aWYoIXllKHIudHlwZSxbb2UscmUsdGUsZWUsYWVdKSlyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBib29sZWFuLCBzdHJpbmcsIG51bWJlciBvciBudWxsLCBidXQgZm91bmQgIitkZShyLnR5cGUpKyIgaW5zdGVhZCIpO2lmKDQ9PT1lLmxlbmd0aCl7dmFyIG49dC5wYXJzZShlWzNdLDMsdGUpO3JldHVybiBuP25ldyB0cihyLG8sbik6bnVsbH1yZXR1cm4gbmV3IHRyKHIsbyl9LHRyLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLm5lZWRsZS5ldmFsdWF0ZShlKSxyPXRoaXMuaGF5c3RhY2suZXZhbHVhdGUoZSk7aWYoIW1lKHQsWyJib29sZWFuIiwic3RyaW5nIiwibnVtYmVyIiwibnVsbCJdKSl0aHJvdyBuZXcgSWUoIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGJlIG9mIHR5cGUgYm9vbGVhbiwgc3RyaW5nLCBudW1iZXIgb3IgbnVsbCwgYnV0IGZvdW5kICIrZGUoX2UodCkpKyIgaW5zdGVhZC4iKTtpZighbWUocixbInN0cmluZyIsImFycmF5Il0pKXRocm93IG5ldyBJZSgiRXhwZWN0ZWQgc2Vjb25kIGFyZ3VtZW50IHRvIGJlIG9mIHR5cGUgYXJyYXkgb3Igc3RyaW5nLCBidXQgZm91bmQgIitkZShfZShyKSkrIiBpbnN0ZWFkLiIpO2lmKHRoaXMuZnJvbUluZGV4KXt2YXIgbz10aGlzLmZyb21JbmRleC5ldmFsdWF0ZShlKTtyZXR1cm4gci5pbmRleE9mKHQsbyl9cmV0dXJuIHIuaW5kZXhPZih0KX0sdHIucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXtlKHRoaXMubmVlZGxlKSxlKHRoaXMuaGF5c3RhY2spLHRoaXMuZnJvbUluZGV4JiZlKHRoaXMuZnJvbUluZGV4KX0sdHIucHJvdG90eXBlLm91dHB1dERlZmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdHIucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe2lmKG51bGwhPXRoaXMuZnJvbUluZGV4JiZ2b2lkIDAhPT10aGlzLmZyb21JbmRleCl7dmFyIGU9dGhpcy5mcm9tSW5kZXguc2VyaWFsaXplKCk7cmV0dXJuWyJpbmRleC1vZiIsdGhpcy5uZWVkbGUuc2VyaWFsaXplKCksdGhpcy5oYXlzdGFjay5zZXJpYWxpemUoKSxlXX1yZXR1cm5bImluZGV4LW9mIix0aGlzLm5lZWRsZS5zZXJpYWxpemUoKSx0aGlzLmhheXN0YWNrLnNlcmlhbGl6ZSgpXX07dmFyIHJyPWZ1bmN0aW9uKGUsdCxyLG8sbixpKXt0aGlzLmlucHV0VHlwZT1lLHRoaXMudHlwZT10LHRoaXMuaW5wdXQ9cix0aGlzLmNhc2VzPW8sdGhpcy5vdXRwdXRzPW4sdGhpcy5vdGhlcndpc2U9aX07cnIucGFyc2U9ZnVuY3Rpb24oZSx0KXtpZihlLmxlbmd0aDw1KXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhdCBsZWFzdCA0IGFyZ3VtZW50cywgYnV0IGZvdW5kIG9ubHkgIisoZS5sZW5ndGgtMSkrIi4iKTtpZihlLmxlbmd0aCUyIT0xKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMuIik7dmFyIHIsbzt0LmV4cGVjdGVkVHlwZSYmInZhbHVlIiE9PXQuZXhwZWN0ZWRUeXBlLmtpbmQmJihvPXQuZXhwZWN0ZWRUeXBlKTtmb3IodmFyIG49e30saT1bXSxhPTI7YTxlLmxlbmd0aC0xO2ErPTIpe3ZhciBzPWVbYV0sbD1lW2ErMV07QXJyYXkuaXNBcnJheShzKXx8KHM9W3NdKTt2YXIgdT10LmNvbmNhdChhKTtpZigwPT09cy5sZW5ndGgpcmV0dXJuIHUuZXJyb3IoIkV4cGVjdGVkIGF0IGxlYXN0IG9uZSBicmFuY2ggbGFiZWwuIik7Zm9yKHZhciBjPTAscD1zO2M8cC5sZW5ndGg7Yys9MSl7dmFyIGQ9cFtjXTtpZigibnVtYmVyIiE9dHlwZW9mIGQmJiJzdHJpbmciIT10eXBlb2YgZClyZXR1cm4gdS5lcnJvcigiQnJhbmNoIGxhYmVscyBtdXN0IGJlIG51bWJlcnMgb3Igc3RyaW5ncy4iKTtpZigibnVtYmVyIj09dHlwZW9mIGQmJk1hdGguYWJzKGQpPk51bWJlci5NQVhfU0FGRV9JTlRFR0VSKXJldHVybiB1LmVycm9yKCJCcmFuY2ggbGFiZWxzIG11c3QgYmUgaW50ZWdlcnMgbm8gbGFyZ2VyIHRoYW4gIitOdW1iZXIuTUFYX1NBRkVfSU5URUdFUisiLiIpO2lmKCJudW1iZXIiPT10eXBlb2YgZCYmTWF0aC5mbG9vcihkKSE9PWQpcmV0dXJuIHUuZXJyb3IoIk51bWVyaWMgYnJhbmNoIGxhYmVscyBtdXN0IGJlIGludGVnZXIgdmFsdWVzLiIpO2lmKHIpe2lmKHUuY2hlY2tTdWJ0eXBlKHIsX2UoZCkpKXJldHVybiBudWxsfWVsc2Ugcj1fZShkKTtpZih2b2lkIDAhPT1uW1N0cmluZyhkKV0pcmV0dXJuIHUuZXJyb3IoIkJyYW5jaCBsYWJlbHMgbXVzdCBiZSB1bmlxdWUuIik7bltTdHJpbmcoZCldPWkubGVuZ3RofXZhciBoPXQucGFyc2UobCxhLG8pO2lmKCFoKXJldHVybiBudWxsO289b3x8aC50eXBlLGkucHVzaChoKX12YXIgZj10LnBhcnNlKGVbMV0sMSxhZSk7aWYoIWYpcmV0dXJuIG51bGw7dmFyIHk9dC5wYXJzZShlW2UubGVuZ3RoLTFdLGUubGVuZ3RoLTEsbyk7cmV0dXJuIHk/InZhbHVlIiE9PWYudHlwZS5raW5kJiZ0LmNvbmNhdCgxKS5jaGVja1N1YnR5cGUocixmLnR5cGUpP251bGw6bmV3IHJyKHIsbyxmLG4saSx5KTpudWxsfSxyci5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pbnB1dC5ldmFsdWF0ZShlKTtyZXR1cm4oX2UodCk9PT10aGlzLmlucHV0VHlwZSYmdGhpcy5vdXRwdXRzW3RoaXMuY2FzZXNbdF1dfHx0aGlzLm90aGVyd2lzZSkuZXZhbHVhdGUoZSl9LHJyLnByb3RvdHlwZS5lYWNoQ2hpbGQ9ZnVuY3Rpb24oZSl7ZSh0aGlzLmlucHV0KSx0aGlzLm91dHB1dHMuZm9yRWFjaChlKSxlKHRoaXMub3RoZXJ3aXNlKX0scnIucHJvdG90eXBlLm91dHB1dERlZmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRwdXRzLmV2ZXJ5KChmdW5jdGlvbihlKXtyZXR1cm4gZS5vdXRwdXREZWZpbmVkKCl9KSkmJnRoaXMub3RoZXJ3aXNlLm91dHB1dERlZmluZWQoKX0scnIucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLHQ9WyJtYXRjaCIsdGhpcy5pbnB1dC5zZXJpYWxpemUoKV0scj1bXSxvPXt9LG49MCxpPU9iamVjdC5rZXlzKHRoaXMuY2FzZXMpLnNvcnQoKTtuPGkubGVuZ3RoO24rPTEpe3ZhciBhPWlbbl07dm9pZCAwPT09KHA9b1t0aGlzLmNhc2VzW2FdXSk/KG9bdGhpcy5jYXNlc1thXV09ci5sZW5ndGgsci5wdXNoKFt0aGlzLmNhc2VzW2FdLFthXV0pKTpyW3BdWzFdLnB1c2goYSl9Zm9yKHZhciBzPWZ1bmN0aW9uKHQpe3JldHVybiJudW1iZXIiPT09ZS5pbnB1dFR5cGUua2luZD9OdW1iZXIodCk6dH0sbD0wLHU9cjtsPHUubGVuZ3RoO2wrPTEpe3ZhciBjPXVbbF0scD1jWzBdLGQ9Y1sxXTsxPT09ZC5sZW5ndGg/dC5wdXNoKHMoZFswXSkpOnQucHVzaChkLm1hcChzKSksdC5wdXNoKHRoaXMub3V0cHV0c1tvdXRwdXRJbmRleCQxXS5zZXJpYWxpemUoKSl9cmV0dXJuIHQucHVzaCh0aGlzLm90aGVyd2lzZS5zZXJpYWxpemUoKSksdH07dmFyIG9yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLnR5cGU9ZSx0aGlzLmJyYW5jaGVzPXQsdGhpcy5vdGhlcndpc2U9cn07b3IucGFyc2U9ZnVuY3Rpb24oZSx0KXtpZihlLmxlbmd0aDw0KXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhdCBsZWFzdCAzIGFyZ3VtZW50cywgYnV0IGZvdW5kIG9ubHkgIisoZS5sZW5ndGgtMSkrIi4iKTtpZihlLmxlbmd0aCUyIT0wKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCBhbiBvZGQgbnVtYmVyIG9mIGFyZ3VtZW50cy4iKTt2YXIgcjt0LmV4cGVjdGVkVHlwZSYmInZhbHVlIiE9PXQuZXhwZWN0ZWRUeXBlLmtpbmQmJihyPXQuZXhwZWN0ZWRUeXBlKTtmb3IodmFyIG89W10sbj0xO248ZS5sZW5ndGgtMTtuKz0yKXt2YXIgaT10LnBhcnNlKGVbbl0sbixvZSk7aWYoIWkpcmV0dXJuIG51bGw7dmFyIGE9dC5wYXJzZShlW24rMV0sbisxLHIpO2lmKCFhKXJldHVybiBudWxsO28ucHVzaChbaSxhXSkscj1yfHxhLnR5cGV9dmFyIHM9dC5wYXJzZShlW2UubGVuZ3RoLTFdLGUubGVuZ3RoLTEscik7cmV0dXJuIHM/bmV3IG9yKHIsbyxzKTpudWxsfSxvci5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj10aGlzLmJyYW5jaGVzO3Q8ci5sZW5ndGg7dCs9MSl7dmFyIG89clt0XSxuPW9bMF0saT1vWzFdO2lmKG4uZXZhbHVhdGUoZSkpcmV0dXJuIGkuZXZhbHVhdGUoZSl9cmV0dXJuIHRoaXMub3RoZXJ3aXNlLmV2YWx1YXRlKGUpfSxvci5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9dGhpcy5icmFuY2hlczt0PHIubGVuZ3RoO3QrPTEpe3ZhciBvPXJbdF0sbj1vWzBdLGk9b1sxXTtlKG4pLGUoaSl9ZSh0aGlzLm90aGVyd2lzZSl9LG9yLnByb3RvdHlwZS5vdXRwdXREZWZpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnJhbmNoZXMuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdLGVbMV0ub3V0cHV0RGVmaW5lZCgpfSkpJiZ0aGlzLm90aGVyd2lzZS5vdXRwdXREZWZpbmVkKCl9LG9yLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXt2YXIgZT1bImNhc2UiXTtyZXR1cm4gdGhpcy5lYWNoQ2hpbGQoKGZ1bmN0aW9uKHQpe2UucHVzaCh0LnNlcmlhbGl6ZSgpKX0pKSxlfTt2YXIgbnI9ZnVuY3Rpb24oZSx0LHIsbyl7dGhpcy50eXBlPWUsdGhpcy5pbnB1dD10LHRoaXMuYmVnaW5JbmRleD1yLHRoaXMuZW5kSW5kZXg9b307ZnVuY3Rpb24gaXIoZSx0KXtyZXR1cm4iPT0iPT09ZXx8IiE9Ij09PWU/ImJvb2xlYW4iPT09dC5raW5kfHwic3RyaW5nIj09PXQua2luZHx8Im51bWJlciI9PT10LmtpbmR8fCJudWxsIj09PXQua2luZHx8InZhbHVlIj09PXQua2luZDoic3RyaW5nIj09PXQua2luZHx8Im51bWJlciI9PT10LmtpbmR8fCJ2YWx1ZSI9PT10LmtpbmR9ZnVuY3Rpb24gYXIoZSx0LHIpe3JldHVybiB0PT09cn1mdW5jdGlvbiBzcihlLHQscil7cmV0dXJuIHQhPT1yfWZ1bmN0aW9uIGxyKGUsdCxyKXtyZXR1cm4gdDxyfWZ1bmN0aW9uIHVyKGUsdCxyKXtyZXR1cm4gdD5yfWZ1bmN0aW9uIGNyKGUsdCxyKXtyZXR1cm4gdDw9cn1mdW5jdGlvbiBwcihlLHQscil7cmV0dXJuIHQ+PXJ9ZnVuY3Rpb24gZHIoZSx0LHIsbyl7cmV0dXJuIDA9PT1vLmNvbXBhcmUodCxyKX1mdW5jdGlvbiBocihlLHQscixvKXtyZXR1cm4hZHIoZSx0LHIsbyl9ZnVuY3Rpb24gZnIoZSx0LHIsbyl7cmV0dXJuIG8uY29tcGFyZSh0LHIpPDB9ZnVuY3Rpb24geXIoZSx0LHIsbyl7cmV0dXJuIG8uY29tcGFyZSh0LHIpPjB9ZnVuY3Rpb24gbXIoZSx0LHIsbyl7cmV0dXJuIG8uY29tcGFyZSh0LHIpPD0wfWZ1bmN0aW9uIGdyKGUsdCxyLG8pe3JldHVybiBvLmNvbXBhcmUodCxyKT49MH1mdW5jdGlvbiB2cihlLHQscil7dmFyIG89Ij09IiE9PWUmJiIhPSIhPT1lO3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIG4oZSx0LHIpe3RoaXMudHlwZT1vZSx0aGlzLmxocz1lLHRoaXMucmhzPXQsdGhpcy5jb2xsYXRvcj1yLHRoaXMuaGFzVW50eXBlZEFyZ3VtZW50PSJ2YWx1ZSI9PT1lLnR5cGUua2luZHx8InZhbHVlIj09PXQudHlwZS5raW5kfXJldHVybiBuLnBhcnNlPWZ1bmN0aW9uKGUsdCl7aWYoMyE9PWUubGVuZ3RoJiY0IT09ZS5sZW5ndGgpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIHR3byBvciB0aHJlZSBhcmd1bWVudHMuIik7dmFyIHI9ZVswXSxpPXQucGFyc2UoZVsxXSwxLGFlKTtpZighaSlyZXR1cm4gbnVsbDtpZighaXIocixpLnR5cGUpKXJldHVybiB0LmNvbmNhdCgxKS5lcnJvcignIicrcisiXCIgY29tcGFyaXNvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHR5cGUgJyIrZGUoaS50eXBlKSsiJy4iKTt2YXIgYT10LnBhcnNlKGVbMl0sMixhZSk7aWYoIWEpcmV0dXJuIG51bGw7aWYoIWlyKHIsYS50eXBlKSlyZXR1cm4gdC5jb25jYXQoMikuZXJyb3IoJyInK3IrIlwiIGNvbXBhcmlzb25zIGFyZSBub3Qgc3VwcG9ydGVkIGZvciB0eXBlICciK2RlKGEudHlwZSkrIicuIik7aWYoaS50eXBlLmtpbmQhPT1hLnR5cGUua2luZCYmInZhbHVlIiE9PWkudHlwZS5raW5kJiYidmFsdWUiIT09YS50eXBlLmtpbmQpcmV0dXJuIHQuZXJyb3IoIkNhbm5vdCBjb21wYXJlIHR5cGVzICciK2RlKGkudHlwZSkrIicgYW5kICciK2RlKGEudHlwZSkrIicuIik7byYmKCJ2YWx1ZSI9PT1pLnR5cGUua2luZCYmInZhbHVlIiE9PWEudHlwZS5raW5kP2k9bmV3IE9lKGEudHlwZSxbaV0pOiJ2YWx1ZSIhPT1pLnR5cGUua2luZCYmInZhbHVlIj09PWEudHlwZS5raW5kJiYoYT1uZXcgT2UoaS50eXBlLFthXSkpKTt2YXIgcz1udWxsO2lmKDQ9PT1lLmxlbmd0aCl7aWYoInN0cmluZyIhPT1pLnR5cGUua2luZCYmInN0cmluZyIhPT1hLnR5cGUua2luZCYmInZhbHVlIiE9PWkudHlwZS5raW5kJiYidmFsdWUiIT09YS50eXBlLmtpbmQpcmV0dXJuIHQuZXJyb3IoIkNhbm5vdCB1c2UgY29sbGF0b3IgdG8gY29tcGFyZSBub24tc3RyaW5nIHR5cGVzLiIpO2lmKCEocz10LnBhcnNlKGVbM10sMyxsZSkpKXJldHVybiBudWxsfXJldHVybiBuZXcgbihpLGEscyl9LG4ucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMubGhzLmV2YWx1YXRlKG4pLGE9dGhpcy5yaHMuZXZhbHVhdGUobik7aWYobyYmdGhpcy5oYXNVbnR5cGVkQXJndW1lbnQpe3ZhciBzPV9lKGkpLGw9X2UoYSk7aWYocy5raW5kIT09bC5raW5kfHwic3RyaW5nIiE9PXMua2luZCYmIm51bWJlciIhPT1zLmtpbmQpdGhyb3cgbmV3IEllKCdFeHBlY3RlZCBhcmd1bWVudHMgZm9yICInK2UrJyIgdG8gYmUgKHN0cmluZywgc3RyaW5nKSBvciAobnVtYmVyLCBudW1iZXIpLCBidXQgZm91bmQgKCcrcy5raW5kKyIsICIrbC5raW5kKyIpIGluc3RlYWQuIil9aWYodGhpcy5jb2xsYXRvciYmIW8mJnRoaXMuaGFzVW50eXBlZEFyZ3VtZW50KXt2YXIgdT1fZShpKSxjPV9lKGEpO2lmKCJzdHJpbmciIT09dS5raW5kfHwic3RyaW5nIiE9PWMua2luZClyZXR1cm4gdChuLGksYSl9cmV0dXJuIHRoaXMuY29sbGF0b3I/cihuLGksYSx0aGlzLmNvbGxhdG9yLmV2YWx1YXRlKG4pKTp0KG4saSxhKX0sbi5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKGUpe2UodGhpcy5saHMpLGUodGhpcy5yaHMpLHRoaXMuY29sbGF0b3ImJmUodGhpcy5jb2xsYXRvcil9LG4ucHJvdG90eXBlLm91dHB1dERlZmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sbi5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9W2VdO3JldHVybiB0aGlzLmVhY2hDaGlsZCgoZnVuY3Rpb24oZSl7dC5wdXNoKGUuc2VyaWFsaXplKCkpfSkpLHR9LG59KCl9bnIucGFyc2U9ZnVuY3Rpb24oZSx0KXtpZihlLmxlbmd0aDw9Mnx8ZS5sZW5ndGg+PTUpcmV0dXJuIHQuZXJyb3IoIkV4cGVjdGVkIDMgb3IgNCBhcmd1bWVudHMsIGJ1dCBmb3VuZCAiKyhlLmxlbmd0aC0xKSsiIGluc3RlYWQuIik7dmFyIHI9dC5wYXJzZShlWzFdLDEsYWUpLG89dC5wYXJzZShlWzJdLDIsdGUpO2lmKCFyfHwhbylyZXR1cm4gbnVsbDtpZigheWUoci50eXBlLFtwZShhZSkscmUsYWVdKSlyZXR1cm4gdC5lcnJvcigiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBhcnJheSBvciBzdHJpbmcsIGJ1dCBmb3VuZCAiK2RlKHIudHlwZSkrIiBpbnN0ZWFkIik7aWYoND09PWUubGVuZ3RoKXt2YXIgbj10LnBhcnNlKGVbM10sMyx0ZSk7cmV0dXJuIG4/bmV3IG5yKHIudHlwZSxyLG8sbik6bnVsbH1yZXR1cm4gbmV3IG5yKHIudHlwZSxyLG8pfSxuci5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pbnB1dC5ldmFsdWF0ZShlKSxyPXRoaXMuYmVnaW5JbmRleC5ldmFsdWF0ZShlKTtpZighbWUodCxbInN0cmluZyIsImFycmF5Il0pKXRocm93IG5ldyBJZSgiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gYmUgb2YgdHlwZSBhcnJheSBvciBzdHJpbmcsIGJ1dCBmb3VuZCAiK2RlKF9lKHQpKSsiIGluc3RlYWQuIik7aWYodGhpcy5lbmRJbmRleCl7dmFyIG89dGhpcy5lbmRJbmRleC5ldmFsdWF0ZShlKTtyZXR1cm4gdC5zbGljZShyLG8pfXJldHVybiB0LnNsaWNlKHIpfSxuci5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKGUpe2UodGhpcy5pbnB1dCksZSh0aGlzLmJlZ2luSW5kZXgpLHRoaXMuZW5kSW5kZXgmJmUodGhpcy5lbmRJbmRleCl9LG5yLnByb3RvdHlwZS5vdXRwdXREZWZpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuITF9LG5yLnByb3RvdHlwZS5zZXJpYWxpemU9ZnVuY3Rpb24oKXtpZihudWxsIT10aGlzLmVuZEluZGV4JiZ2b2lkIDAhPT10aGlzLmVuZEluZGV4KXt2YXIgZT10aGlzLmVuZEluZGV4LnNlcmlhbGl6ZSgpO3JldHVyblsic2xpY2UiLHRoaXMuaW5wdXQuc2VyaWFsaXplKCksdGhpcy5iZWdpbkluZGV4LnNlcmlhbGl6ZSgpLGVdfXJldHVyblsic2xpY2UiLHRoaXMuaW5wdXQuc2VyaWFsaXplKCksdGhpcy5iZWdpbkluZGV4LnNlcmlhbGl6ZSgpXX07dmFyIGJyPXZyKCI9PSIsYXIsZHIpLHhyPXZyKCIhPSIsc3IsaHIpLHdyPXZyKCI8Iixscixmciksa3I9dnIoIj4iLHVyLHlyKSxqcj12cigiPD0iLGNyLG1yKSx6cj12cigiPj0iLHByLGdyKSxUcj1mdW5jdGlvbihlLHQscixvLG4pe3RoaXMudHlwZT1yZSx0aGlzLm51bWJlcj1lLHRoaXMubG9jYWxlPXQsdGhpcy5jdXJyZW5jeT1yLHRoaXMubWluRnJhY3Rpb25EaWdpdHM9byx0aGlzLm1heEZyYWN0aW9uRGlnaXRzPW59O1RyLnBhcnNlPWZ1bmN0aW9uKGUsdCl7aWYoMyE9PWUubGVuZ3RoKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCB0d28gYXJndW1lbnRzLiIpO3ZhciByPXQucGFyc2UoZVsxXSwxLHRlKTtpZighcilyZXR1cm4gbnVsbDt2YXIgbz1lWzJdO2lmKCJvYmplY3QiIT10eXBlb2Ygb3x8QXJyYXkuaXNBcnJheShvKSlyZXR1cm4gdC5lcnJvcigiTnVtYmVyRm9ybWF0IG9wdGlvbnMgYXJndW1lbnQgbXVzdCBiZSBhbiBvYmplY3QuIik7dmFyIG49bnVsbDtpZihvLmxvY2FsZSYmIShuPXQucGFyc2Uoby5sb2NhbGUsMSxyZSkpKXJldHVybiBudWxsO3ZhciBpPW51bGw7aWYoby5jdXJyZW5jeSYmIShpPXQucGFyc2Uoby5jdXJyZW5jeSwxLHJlKSkpcmV0dXJuIG51bGw7dmFyIGE9bnVsbDtpZihvWyJtaW4tZnJhY3Rpb24tZGlnaXRzIl0mJiEoYT10LnBhcnNlKG9bIm1pbi1mcmFjdGlvbi1kaWdpdHMiXSwxLHRlKSkpcmV0dXJuIG51bGw7dmFyIHM9bnVsbDtyZXR1cm4gb1sibWF4LWZyYWN0aW9uLWRpZ2l0cyJdJiYhKHM9dC5wYXJzZShvWyJtYXgtZnJhY3Rpb24tZGlnaXRzIl0sMSx0ZSkpP251bGw6bmV3IFRyKHIsbixpLGEscyl9LFRyLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KHRoaXMubG9jYWxlP3RoaXMubG9jYWxlLmV2YWx1YXRlKGUpOltdLHtzdHlsZTp0aGlzLmN1cnJlbmN5PyJjdXJyZW5jeSI6ImRlY2ltYWwiLGN1cnJlbmN5OnRoaXMuY3VycmVuY3k/dGhpcy5jdXJyZW5jeS5ldmFsdWF0ZShlKTp2b2lkIDAsbWluaW11bUZyYWN0aW9uRGlnaXRzOnRoaXMubWluRnJhY3Rpb25EaWdpdHM/dGhpcy5taW5GcmFjdGlvbkRpZ2l0cy5ldmFsdWF0ZShlKTp2b2lkIDAsbWF4aW11bUZyYWN0aW9uRGlnaXRzOnRoaXMubWF4RnJhY3Rpb25EaWdpdHM/dGhpcy5tYXhGcmFjdGlvbkRpZ2l0cy5ldmFsdWF0ZShlKTp2b2lkIDB9KS5mb3JtYXQodGhpcy5udW1iZXIuZXZhbHVhdGUoZSkpfSxUci5wcm90b3R5cGUuZWFjaENoaWxkPWZ1bmN0aW9uKGUpe2UodGhpcy5udW1iZXIpLHRoaXMubG9jYWxlJiZlKHRoaXMubG9jYWxlKSx0aGlzLmN1cnJlbmN5JiZlKHRoaXMuY3VycmVuY3kpLHRoaXMubWluRnJhY3Rpb25EaWdpdHMmJmUodGhpcy5taW5GcmFjdGlvbkRpZ2l0cyksdGhpcy5tYXhGcmFjdGlvbkRpZ2l0cyYmZSh0aGlzLm1heEZyYWN0aW9uRGlnaXRzKX0sVHIucHJvdG90eXBlLm91dHB1dERlZmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sVHIucHJvdG90eXBlLnNlcmlhbGl6ZT1mdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiB0aGlzLmxvY2FsZSYmKGUubG9jYWxlPXRoaXMubG9jYWxlLnNlcmlhbGl6ZSgpKSx0aGlzLmN1cnJlbmN5JiYoZS5jdXJyZW5jeT10aGlzLmN1cnJlbmN5LnNlcmlhbGl6ZSgpKSx0aGlzLm1pbkZyYWN0aW9uRGlnaXRzJiYoZVsibWluLWZyYWN0aW9uLWRpZ2l0cyJdPXRoaXMubWluRnJhY3Rpb25EaWdpdHMuc2VyaWFsaXplKCkpLHRoaXMubWF4RnJhY3Rpb25EaWdpdHMmJihlWyJtYXgtZnJhY3Rpb24tZGlnaXRzIl09dGhpcy5tYXhGcmFjdGlvbkRpZ2l0cy5zZXJpYWxpemUoKSksWyJudW1iZXItZm9ybWF0Iix0aGlzLm51bWJlci5zZXJpYWxpemUoKSxlXX07dmFyIF9yPWZ1bmN0aW9uKGUpe3RoaXMudHlwZT10ZSx0aGlzLmlucHV0PWV9O19yLnBhcnNlPWZ1bmN0aW9uKGUsdCl7aWYoMiE9PWUubGVuZ3RoKXJldHVybiB0LmVycm9yKCJFeHBlY3RlZCAxIGFyZ3VtZW50LCBidXQgZm91bmQgIisoZS5sZW5ndGgtMSkrIiBpbnN0ZWFkLiIpO3ZhciByPXQucGFyc2UoZVsxXSwxKTtyZXR1cm4gcj8iYXJyYXkiIT09ci50eXBlLmtpbmQmJiJzdHJpbmciIT09ci50eXBlLmtpbmQmJiJ2YWx1ZSIhPT1yLnR5cGUua2luZD90LmVycm9yKCJFeHBlY3RlZCBhcmd1bWVudCBvZiB0eXBlIHN0cmluZyBvciBhcnJheSwgYnV0IGZvdW5kICIrZGUoci50eXBlKSsiIGluc3RlYWQuIik6bmV3IF9yKHIpOm51bGx9LF9yLnByb3RvdHlwZS5ldmFsdWF0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmlucHV0LmV2YWx1YXRlKGUpO2lmKCJzdHJpbmciPT10eXBlb2YgdClyZXR1cm4gdC5sZW5ndGg7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdC5sZW5ndGg7dGhyb3cgbmV3IEllKCJFeHBlY3RlZCB2YWx1ZSB0byBiZSBvZiB0eXBlIHN0cmluZyBvciBhcnJheSwgYnV0IGZvdW5kICIrZGUoX2UodCkpKyIgaW5zdGVhZC4iKX0sX3IucHJvdG90eXBlLmVhY2hDaGlsZD1mdW5jdGlvbihlKXtlKHRoaXMuaW5wdXQpfSxfci5wcm90b3R5cGUub3V0cHV0RGVmaW5lZD1mdW5jdGlvbigpe3JldHVybiExfSxfci5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKCl7dmFyIGU9WyJsZW5ndGgiXTtyZXR1cm4gdGhpcy5lYWNoQ2hpbGQoKGZ1bmN0aW9uKHQpe2UucHVzaCh0LnNlcmlhbGl6ZSgpKX0pKSxlfTt2YXIgU3I9eyI9PSI6YnIsIiE9Ijp4ciwiPiI6a3IsIjwiOndyLCI+PSI6enIsIjw9IjpqcixhcnJheTpPZSxhdDpRdCxib29sZWFuOk9lLGNhc2U6b3IsY29hbGVzY2U6S3QsY29sbGF0b3I6TGUsZm9ybWF0OkVlLGltYWdlOnFlLGluOmVyLCJpbmRleC1vZiI6dHIsaW50ZXJwb2xhdGU6WnQsImludGVycG9sYXRlLWhjbCI6WnQsImludGVycG9sYXRlLWxhYiI6WnQsbGVuZ3RoOl9yLGxldDpZdCxsaXRlcmFsOkFlLG1hdGNoOnJyLG51bWJlcjpPZSwibnVtYmVyLWZvcm1hdCI6VHIsb2JqZWN0Ok9lLHNsaWNlOm5yLHN0ZXA6YnQsc3RyaW5nOk9lLCJ0by1ib29sZWFuIjpOZSwidG8tY29sb3IiOk5lLCJ0by1udW1iZXIiOk5lLCJ0by1zdHJpbmciOk5lLHZhcjp5dCx3aXRoaW46cHR9O2Z1bmN0aW9uIEFyKGUsdCl7dmFyIHI9dFswXSxvPXRbMV0sbj10WzJdLGk9dFszXTtyPXIuZXZhbHVhdGUoZSksbz1vLmV2YWx1YXRlKGUpLG49bi5ldmFsdWF0ZShlKTt2YXIgYT1pP2kuZXZhbHVhdGUoZSk6MSxzPXplKHIsbyxuLGEpO2lmKHMpdGhyb3cgbmV3IEllKHMpO3JldHVybiBuZXcgYmUoci8yNTUqYSxvLzI1NSphLG4vMjU1KmEsYSl9ZnVuY3Rpb24gSXIoZSx0KXtyZXR1cm4gZSBpbiB0fWZ1bmN0aW9uIENyKGUsdCl7dmFyIHI9dFtlXTtyZXR1cm4gdm9pZCAwPT09cj9udWxsOnJ9ZnVuY3Rpb24gT3IoZSx0LHIsbyl7Zm9yKDtyPD1vOyl7dmFyIG49citvPj4xO2lmKHRbbl09PT1lKXJldHVybiEwO3Rbbl0+ZT9vPW4tMTpyPW4rMX1yZXR1cm4hMX1mdW5jdGlvbiBFcihlKXtyZXR1cm57dHlwZTplfX1mdW5jdGlvbiBxcihlKXtyZXR1cm57cmVzdWx0OiJzdWNjZXNzIix2YWx1ZTplfX1mdW5jdGlvbiBNcihlKXtyZXR1cm57cmVzdWx0OiJlcnJvciIsdmFsdWU6ZX19ZnVuY3Rpb24gTnIoZSl7cmV0dXJuImRhdGEtZHJpdmVuIj09PWVbInByb3BlcnR5LXR5cGUiXXx8ImNyb3NzLWZhZGVkLWRhdGEtZHJpdmVuIj09PWVbInByb3BlcnR5LXR5cGUiXX1mdW5jdGlvbiBScihlKXtyZXR1cm4hIWUuZXhwcmVzc2lvbiYmZS5leHByZXNzaW9uLnBhcmFtZXRlcnMuaW5kZXhPZigiem9vbSIpPi0xfWZ1bmN0aW9uIERyKGUpe3JldHVybiEhZS5leHByZXNzaW9uJiZlLmV4cHJlc3Npb24uaW50ZXJwb2xhdGVkfWZ1bmN0aW9uIFByKGUpe3JldHVybiBlIGluc3RhbmNlb2YgTnVtYmVyPyJudW1iZXIiOmUgaW5zdGFuY2VvZiBTdHJpbmc/InN0cmluZyI6ZSBpbnN0YW5jZW9mIEJvb2xlYW4/ImJvb2xlYW4iOkFycmF5LmlzQXJyYXkoZSk/ImFycmF5IjpudWxsPT09ZT8ibnVsbCI6dHlwZW9mIGV9ZnVuY3Rpb24gRnIoZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmIUFycmF5LmlzQXJyYXkoZSl9ZnVuY3Rpb24gTHIoZSl7cmV0dXJuIGV9ZnVuY3Rpb24gJHIoZSx0KXt2YXIgcixvLG4saT0iY29sb3IiPT09dC50eXBlLGE9ZS5zdG9wcyYmIm9iamVjdCI9PXR5cGVvZiBlLnN0b3BzWzBdWzBdLHM9YXx8dm9pZCAwIT09ZS5wcm9wZXJ0eSxsPWF8fCFzLHU9ZS50eXBlfHwoRHIodCk/ImV4cG9uZW50aWFsIjoiaW50ZXJ2YWwiKTtpZihpJiYoKGU9Syh7fSxlKSkuc3RvcHMmJihlLnN0b3BzPWUuc3RvcHMubWFwKChmdW5jdGlvbihlKXtyZXR1cm5bZVswXSxiZS5wYXJzZShlWzFdKV19KSkpLGUuZGVmYXVsdD9lLmRlZmF1bHQ9YmUucGFyc2UoZS5kZWZhdWx0KTplLmRlZmF1bHQ9YmUucGFyc2UodC5kZWZhdWx0KSksZS5jb2xvclNwYWNlJiYicmdiIiE9PWUuY29sb3JTcGFjZSYmIUh0W2UuY29sb3JTcGFjZV0pdGhyb3cgbmV3IEVycm9yKCJVbmtub3duIGNvbG9yIHNwYWNlOiAiK2UuY29sb3JTcGFjZSk7aWYoImV4cG9uZW50aWFsIj09PXUpcj1HcjtlbHNlIGlmKCJpbnRlcnZhbCI9PT11KXI9V3I7ZWxzZSBpZigiY2F0ZWdvcmljYWwiPT09dSl7cj1KcixvPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKHZhciBjPTAscD1lLnN0b3BzO2M8cC5sZW5ndGg7Yys9MSl7dmFyIGQ9cFtjXTtvW2RbMF1dPWRbMV19bj10eXBlb2YgZS5zdG9wc1swXVswXX1lbHNle2lmKCJpZGVudGl0eSIhPT11KXRocm93IG5ldyBFcnJvcignVW5rbm93biBmdW5jdGlvbiB0eXBlICInK3UrJyInKTtyPUJyfWlmKGEpe2Zvcih2YXIgaD17fSxmPVtdLHk9MDt5PGUuc3RvcHMubGVuZ3RoO3krKyl7dmFyIG09ZS5zdG9wc1t5XSxnPW1bMF0uem9vbTt2b2lkIDA9PT1oW2ddJiYoaFtnXT17em9vbTpnLHR5cGU6ZS50eXBlLHByb3BlcnR5OmUucHJvcGVydHksZGVmYXVsdDplLmRlZmF1bHQsc3RvcHM6W119LGYucHVzaChnKSksaFtnXS5zdG9wcy5wdXNoKFttWzBdLnZhbHVlLG1bMV1dKX1mb3IodmFyIHY9W10sYj0wLHg9ZjtiPHgubGVuZ3RoO2IrPTEpe3ZhciB3PXhbYl07di5wdXNoKFtoW3ddLnpvb20sJHIoaFt3XSx0KV0pfXZhciBrPXtuYW1lOiJsaW5lYXIifTtyZXR1cm57a2luZDoiY29tcG9zaXRlIixpbnRlcnBvbGF0aW9uVHlwZTprLGludGVycG9sYXRpb25GYWN0b3I6WnQuaW50ZXJwb2xhdGlvbkZhY3Rvci5iaW5kKHZvaWQgMCxrKSx6b29tU3RvcHM6di5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfSkpLGV2YWx1YXRlOmZ1bmN0aW9uKHIsbyl7dmFyIG49ci56b29tO3JldHVybiBHcih7c3RvcHM6dixiYXNlOmUuYmFzZX0sdCxuKS5ldmFsdWF0ZShuLG8pfX19aWYobCl7dmFyIGo9ImV4cG9uZW50aWFsIj09PXU/e25hbWU6ImV4cG9uZW50aWFsIixiYXNlOnZvaWQgMCE9PWUuYmFzZT9lLmJhc2U6MX06bnVsbDtyZXR1cm57a2luZDoiY2FtZXJhIixpbnRlcnBvbGF0aW9uVHlwZTpqLGludGVycG9sYXRpb25GYWN0b3I6WnQuaW50ZXJwb2xhdGlvbkZhY3Rvci5iaW5kKHZvaWQgMCxqKSx6b29tU3RvcHM6ZS5zdG9wcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfSkpLGV2YWx1YXRlOmZ1bmN0aW9uKGkpe3ZhciBhPWkuem9vbTtyZXR1cm4gcihlLHQsYSxvLG4pfX19cmV0dXJue2tpbmQ6InNvdXJjZSIsZXZhbHVhdGU6ZnVuY3Rpb24oaSxhKXt2YXIgcz1hJiZhLnByb3BlcnRpZXM/YS5wcm9wZXJ0aWVzW2UucHJvcGVydHldOnZvaWQgMDtyZXR1cm4gdm9pZCAwPT09cz9VcihlLmRlZmF1bHQsdC5kZWZhdWx0KTpyKGUsdCxzLG8sbil9fX1mdW5jdGlvbiBVcihlLHQscil7cmV0dXJuIHZvaWQgMCE9PWU/ZTp2b2lkIDAhPT10P3Q6dm9pZCAwIT09cj9yOnZvaWQgMH1mdW5jdGlvbiBKcihlLHQscixvLG4pe3JldHVybiBVcih0eXBlb2Ygcj09PW4/b1tyXTp2b2lkIDAsZS5kZWZhdWx0LHQuZGVmYXVsdCl9ZnVuY3Rpb24gV3IoZSx0LHIpe2lmKCJudW1iZXIiIT09UHIocikpcmV0dXJuIFVyKGUuZGVmYXVsdCx0LmRlZmF1bHQpO3ZhciBvPWUuc3RvcHMubGVuZ3RoO2lmKDE9PT1vKXJldHVybiBlLnN0b3BzWzBdWzFdO2lmKHI8PWUuc3RvcHNbMF1bMF0pcmV0dXJuIGUuc3RvcHNbMF1bMV07aWYocj49ZS5zdG9wc1tvLTFdWzBdKXJldHVybiBlLnN0b3BzW28tMV1bMV07dmFyIG49dnQoZS5zdG9wcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlWzBdfSkpLHIpO3JldHVybiBlLnN0b3BzW25dWzFdfWZ1bmN0aW9uIEdyKGUsdCxyKXt2YXIgbz12b2lkIDAhPT1lLmJhc2U/ZS5iYXNlOjE7aWYoIm51bWJlciIhPT1QcihyKSlyZXR1cm4gVXIoZS5kZWZhdWx0LHQuZGVmYXVsdCk7dmFyIG49ZS5zdG9wcy5sZW5ndGg7aWYoMT09PW4pcmV0dXJuIGUuc3RvcHNbMF1bMV07aWYocjw9ZS5zdG9wc1swXVswXSlyZXR1cm4gZS5zdG9wc1swXVsxXTtpZihyPj1lLnN0b3BzW24tMV1bMF0pcmV0dXJuIGUuc3RvcHNbbi0xXVsxXTt2YXIgaT12dChlLnN0b3BzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF19KSksciksYT1WcihyLG8sZS5zdG9wc1tpXVswXSxlLnN0b3BzW2krMV1bMF0pLHM9ZS5zdG9wc1tpXVsxXSxsPWUuc3RvcHNbaSsxXVsxXSx1PVR0W3QudHlwZV18fExyO2lmKGUuY29sb3JTcGFjZSYmInJnYiIhPT1lLmNvbG9yU3BhY2Upe3ZhciBjPUh0W2UuY29sb3JTcGFjZV07dT1mdW5jdGlvbihlLHQpe3JldHVybiBjLnJldmVyc2UoYy5pbnRlcnBvbGF0ZShjLmZvcndhcmQoZSksYy5mb3J3YXJkKHQpLGEpKX19cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHMuZXZhbHVhdGU/e2V2YWx1YXRlOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9YXJndW1lbnRzLmxlbmd0aDt0LS07KWVbdF09YXJndW1lbnRzW3RdO3ZhciByPXMuZXZhbHVhdGUuYXBwbHkodm9pZCAwLGUpLG89bC5ldmFsdWF0ZS5hcHBseSh2b2lkIDAsZSk7aWYodm9pZCAwIT09ciYmdm9pZCAwIT09bylyZXR1cm4gdShyLG8sYSl9fTp1KHMsbCxhKX1mdW5jdGlvbiBCcihlLHQscil7cmV0dXJuImNvbG9yIj09PXQudHlwZT9yPWJlLnBhcnNlKHIpOiJmb3JtYXR0ZWQiPT09dC50eXBlP3I9a2UuZnJvbVN0cmluZyhyLnRvU3RyaW5nKCkpOiJyZXNvbHZlZEltYWdlIj09PXQudHlwZT9yPWplLmZyb21TdHJpbmcoci50b1N0cmluZygpKTpQcihyKT09PXQudHlwZXx8ImVudW0iPT09dC50eXBlJiZ0LnZhbHVlc1tyXXx8KHI9dm9pZCAwKSxVcihyLGUuZGVmYXVsdCx0LmRlZmF1bHQpfWZ1bmN0aW9uIFZyKGUsdCxyLG8pe3ZhciBuPW8tcixpPWUtcjtyZXR1cm4gMD09PW4/MDoxPT09dD9pL246KE1hdGgucG93KHQsaSktMSkvKE1hdGgucG93KHQsbiktMSl9UGUucmVnaXN0ZXIoU3Ise2Vycm9yOltzZSxbcmVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXTt0aHJvdyBuZXcgSWUoci5ldmFsdWF0ZShlKSl9XSx0eXBlb2Y6W3JlLFthZV0sZnVuY3Rpb24oZSx0KXtyZXR1cm4gZGUoX2UodFswXS5ldmFsdWF0ZShlKSkpfV0sInRvLXJnYmEiOltwZSh0ZSw0KSxbbmVdLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRbMF0uZXZhbHVhdGUoZSkudG9BcnJheSgpfV0scmdiOltuZSxbdGUsdGUsdGVdLEFyXSxyZ2JhOltuZSxbdGUsdGUsdGUsdGVdLEFyXSxoYXM6e3R5cGU6b2Usb3ZlcmxvYWRzOltbW3JlXSxmdW5jdGlvbihlLHQpe3JldHVybiBJcih0WzBdLmV2YWx1YXRlKGUpLGUucHJvcGVydGllcygpKX1dLFtbcmUsaWVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXSxvPXRbMV07cmV0dXJuIElyKHIuZXZhbHVhdGUoZSksby5ldmFsdWF0ZShlKSl9XV19LGdldDp7dHlwZTphZSxvdmVybG9hZHM6W1tbcmVdLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIENyKHRbMF0uZXZhbHVhdGUoZSksZS5wcm9wZXJ0aWVzKCkpfV0sW1tyZSxpZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdLG89dFsxXTtyZXR1cm4gQ3Ioci5ldmFsdWF0ZShlKSxvLmV2YWx1YXRlKGUpKX1dXX0sImZlYXR1cmUtc3RhdGUiOlthZSxbcmVdLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIENyKHRbMF0uZXZhbHVhdGUoZSksZS5mZWF0dXJlU3RhdGV8fHt9KX1dLHByb3BlcnRpZXM6W2llLFtdLGZ1bmN0aW9uKGUpe3JldHVybiBlLnByb3BlcnRpZXMoKX1dLCJnZW9tZXRyeS10eXBlIjpbcmUsW10sZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2VvbWV0cnlUeXBlKCl9XSxpZDpbYWUsW10sZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQoKX1dLHpvb206W3RlLFtdLGZ1bmN0aW9uKGUpe3JldHVybiBlLmdsb2JhbHMuem9vbX1dLCJoZWF0bWFwLWRlbnNpdHkiOlt0ZSxbXSxmdW5jdGlvbihlKXtyZXR1cm4gZS5nbG9iYWxzLmhlYXRtYXBEZW5zaXR5fHwwfV0sImxpbmUtcHJvZ3Jlc3MiOlt0ZSxbXSxmdW5jdGlvbihlKXtyZXR1cm4gZS5nbG9iYWxzLmxpbmVQcm9ncmVzc3x8MH1dLGFjY3VtdWxhdGVkOlthZSxbXSxmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZS5nbG9iYWxzLmFjY3VtdWxhdGVkP251bGw6ZS5nbG9iYWxzLmFjY3VtdWxhdGVkfV0sIisiOlt0ZSxFcih0ZSksZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxvPTAsbj10O288bi5sZW5ndGg7bys9MSlyKz1uW29dLmV2YWx1YXRlKGUpO3JldHVybiByfV0sIioiOlt0ZSxFcih0ZSksZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MSxvPTAsbj10O288bi5sZW5ndGg7bys9MSlyKj1uW29dLmV2YWx1YXRlKGUpO3JldHVybiByfV0sIi0iOnt0eXBlOnRlLG92ZXJsb2FkczpbW1t0ZSx0ZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdLG89dFsxXTtyZXR1cm4gci5ldmFsdWF0ZShlKS1vLmV2YWx1YXRlKGUpfV0sW1t0ZV0sZnVuY3Rpb24oZSx0KXtyZXR1cm4tdFswXS5ldmFsdWF0ZShlKX1dXX0sIi8iOlt0ZSxbdGUsdGVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXSxvPXRbMV07cmV0dXJuIHIuZXZhbHVhdGUoZSkvby5ldmFsdWF0ZShlKX1dLCIlIjpbdGUsW3RlLHRlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF0sbz10WzFdO3JldHVybiByLmV2YWx1YXRlKGUpJW8uZXZhbHVhdGUoZSl9XSxsbjI6W3RlLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguTE4yfV0scGk6W3RlLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguUEl9XSxlOlt0ZSxbXSxmdW5jdGlvbigpe3JldHVybiBNYXRoLkV9XSwiXiI6W3RlLFt0ZSx0ZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdLG89dFsxXTtyZXR1cm4gTWF0aC5wb3coci5ldmFsdWF0ZShlKSxvLmV2YWx1YXRlKGUpKX1dLHNxcnQ6W3RlLFt0ZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdO3JldHVybiBNYXRoLnNxcnQoci5ldmFsdWF0ZShlKSl9XSxsb2cxMDpbdGUsW3RlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF07cmV0dXJuIE1hdGgubG9nKHIuZXZhbHVhdGUoZSkpL01hdGguTE4xMH1dLGxuOlt0ZSxbdGVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXTtyZXR1cm4gTWF0aC5sb2coci5ldmFsdWF0ZShlKSl9XSxsb2cyOlt0ZSxbdGVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXTtyZXR1cm4gTWF0aC5sb2coci5ldmFsdWF0ZShlKSkvTWF0aC5MTjJ9XSxzaW46W3RlLFt0ZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdO3JldHVybiBNYXRoLnNpbihyLmV2YWx1YXRlKGUpKX1dLGNvczpbdGUsW3RlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF07cmV0dXJuIE1hdGguY29zKHIuZXZhbHVhdGUoZSkpfV0sdGFuOlt0ZSxbdGVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXTtyZXR1cm4gTWF0aC50YW4oci5ldmFsdWF0ZShlKSl9XSxhc2luOlt0ZSxbdGVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXTtyZXR1cm4gTWF0aC5hc2luKHIuZXZhbHVhdGUoZSkpfV0sYWNvczpbdGUsW3RlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF07cmV0dXJuIE1hdGguYWNvcyhyLmV2YWx1YXRlKGUpKX1dLGF0YW46W3RlLFt0ZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdO3JldHVybiBNYXRoLmF0YW4oci5ldmFsdWF0ZShlKSl9XSxtaW46W3RlLEVyKHRlKSxmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5ldmFsdWF0ZShlKX0pKSl9XSxtYXg6W3RlLEVyKHRlKSxmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLm1heC5hcHBseShNYXRoLHQubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5ldmFsdWF0ZShlKX0pKSl9XSxhYnM6W3RlLFt0ZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdO3JldHVybiBNYXRoLmFicyhyLmV2YWx1YXRlKGUpKX1dLHJvdW5kOlt0ZSxbdGVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXS5ldmFsdWF0ZShlKTtyZXR1cm4gcjwwPy1NYXRoLnJvdW5kKC1yKTpNYXRoLnJvdW5kKHIpfV0sZmxvb3I6W3RlLFt0ZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdO3JldHVybiBNYXRoLmZsb29yKHIuZXZhbHVhdGUoZSkpfV0sY2VpbDpbdGUsW3RlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF07cmV0dXJuIE1hdGguY2VpbChyLmV2YWx1YXRlKGUpKX1dLCJmaWx0ZXItPT0iOltvZSxbcmUsYWVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXSxvPXRbMV07cmV0dXJuIGUucHJvcGVydGllcygpW3IudmFsdWVdPT09by52YWx1ZX1dLCJmaWx0ZXItaWQtPT0iOltvZSxbYWVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXTtyZXR1cm4gZS5pZCgpPT09ci52YWx1ZX1dLCJmaWx0ZXItdHlwZS09PSI6W29lLFtyZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdO3JldHVybiBlLmdlb21ldHJ5VHlwZSgpPT09ci52YWx1ZX1dLCJmaWx0ZXItPCI6W29lLFtyZSxhZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdLG89dFsxXSxuPWUucHJvcGVydGllcygpW3IudmFsdWVdLGk9by52YWx1ZTtyZXR1cm4gdHlwZW9mIG49PXR5cGVvZiBpJiZuPGl9XSwiZmlsdGVyLWlkLTwiOltvZSxbYWVdLGZ1bmN0aW9uKGUsdCl7dmFyIHI9dFswXSxvPWUuaWQoKSxuPXIudmFsdWU7cmV0dXJuIHR5cGVvZiBvPT10eXBlb2YgbiYmbzxufV0sImZpbHRlci0+Ijpbb2UsW3JlLGFlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF0sbz10WzFdLG49ZS5wcm9wZXJ0aWVzKClbci52YWx1ZV0saT1vLnZhbHVlO3JldHVybiB0eXBlb2Ygbj09dHlwZW9mIGkmJm4+aX1dLCJmaWx0ZXItaWQtPiI6W29lLFthZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdLG89ZS5pZCgpLG49ci52YWx1ZTtyZXR1cm4gdHlwZW9mIG89PXR5cGVvZiBuJiZvPm59XSwiZmlsdGVyLTw9Ijpbb2UsW3JlLGFlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF0sbz10WzFdLG49ZS5wcm9wZXJ0aWVzKClbci52YWx1ZV0saT1vLnZhbHVlO3JldHVybiB0eXBlb2Ygbj09dHlwZW9mIGkmJm48PWl9XSwiZmlsdGVyLWlkLTw9Ijpbb2UsW2FlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF0sbz1lLmlkKCksbj1yLnZhbHVlO3JldHVybiB0eXBlb2Ygbz09dHlwZW9mIG4mJm88PW59XSwiZmlsdGVyLT49Ijpbb2UsW3JlLGFlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF0sbz10WzFdLG49ZS5wcm9wZXJ0aWVzKClbci52YWx1ZV0saT1vLnZhbHVlO3JldHVybiB0eXBlb2Ygbj09dHlwZW9mIGkmJm4+PWl9XSwiZmlsdGVyLWlkLT49Ijpbb2UsW2FlXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF0sbz1lLmlkKCksbj1yLnZhbHVlO3JldHVybiB0eXBlb2Ygbz09dHlwZW9mIG4mJm8+PW59XSwiZmlsdGVyLWhhcyI6W29lLFthZV0sZnVuY3Rpb24oZSx0KXtyZXR1cm4gdFswXS52YWx1ZSBpbiBlLnByb3BlcnRpZXMoKX1dLCJmaWx0ZXItaGFzLWlkIjpbb2UsW10sZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPT1lLmlkKCkmJnZvaWQgMCE9PWUuaWQoKX1dLCJmaWx0ZXItdHlwZS1pbiI6W29lLFtwZShyZSldLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRbMF0udmFsdWUuaW5kZXhPZihlLmdlb21ldHJ5VHlwZSgpKT49MH1dLCJmaWx0ZXItaWQtaW4iOltvZSxbcGUoYWUpXSxmdW5jdGlvbihlLHQpe3JldHVybiB0WzBdLnZhbHVlLmluZGV4T2YoZS5pZCgpKT49MH1dLCJmaWx0ZXItaW4tc21hbGwiOltvZSxbcmUscGUoYWUpXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF07cmV0dXJuIHRbMV0udmFsdWUuaW5kZXhPZihlLnByb3BlcnRpZXMoKVtyLnZhbHVlXSk+PTB9XSwiZmlsdGVyLWluLWxhcmdlIjpbb2UsW3JlLHBlKGFlKV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdLG89dFsxXTtyZXR1cm4gT3IoZS5wcm9wZXJ0aWVzKClbci52YWx1ZV0sby52YWx1ZSwwLG8udmFsdWUubGVuZ3RoLTEpfV0sYWxsOnt0eXBlOm9lLG92ZXJsb2FkczpbW1tvZSxvZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdLG89dFsxXTtyZXR1cm4gci5ldmFsdWF0ZShlKSYmby5ldmFsdWF0ZShlKX1dLFtFcihvZSksZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxvPXQ7cjxvLmxlbmd0aDtyKz0xKWlmKCFvW3JdLmV2YWx1YXRlKGUpKXJldHVybiExO3JldHVybiEwfV1dfSxhbnk6e3R5cGU6b2Usb3ZlcmxvYWRzOltbW29lLG9lXSxmdW5jdGlvbihlLHQpe3ZhciByPXRbMF0sbz10WzFdO3JldHVybiByLmV2YWx1YXRlKGUpfHxvLmV2YWx1YXRlKGUpfV0sW0VyKG9lKSxmdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wLG89dDtyPG8ubGVuZ3RoO3IrPTEpaWYob1tyXS5ldmFsdWF0ZShlKSlyZXR1cm4hMDtyZXR1cm4hMX1dXX0sIiEiOltvZSxbb2VdLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIXRbMF0uZXZhbHVhdGUoZSl9XSwiaXMtc3VwcG9ydGVkLXNjcmlwdCI6W29lLFtyZV0sZnVuY3Rpb24oZSx0KXt2YXIgcj10WzBdLG89ZS5nbG9iYWxzJiZlLmdsb2JhbHMuaXNTdXBwb3J0ZWRTY3JpcHQ7cmV0dXJuIW98fG8oci5ldmFsdWF0ZShlKSl9XSx1cGNhc2U6W3JlLFtyZV0sZnVuY3Rpb24oZSx0KXtyZXR1cm4gdFswXS5ldmFsdWF0ZShlKS50b1VwcGVyQ2FzZSgpfV0sZG93bmNhc2U6W3JlLFtyZV0sZnVuY3Rpb24oZSx0KXtyZXR1cm4gdFswXS5ldmFsdWF0ZShlKS50b0xvd2VyQ2FzZSgpfV0sY29uY2F0OltyZSxFcihhZSksZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBTZSh0LmV2YWx1YXRlKGUpKX0pKS5qb2luKCIiKX1dLCJyZXNvbHZlZC1sb2NhbGUiOltyZSxbbGVdLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRbMF0uZXZhbHVhdGUoZSkucmVzb2x2ZWRMb2NhbGUoKX1dfSk7dmFyIEhyPWZ1bmN0aW9uKGUsdCl7dGhpcy5leHByZXNzaW9uPWUsdGhpcy5fd2FybmluZ0hpc3Rvcnk9e30sdGhpcy5fZXZhbHVhdG9yPW5ldyBEZSx0aGlzLl9kZWZhdWx0VmFsdWU9dD9ubyh0KTpudWxsLHRoaXMuX2VudW1WYWx1ZXM9dCYmImVudW0iPT09dC50eXBlP3QudmFsdWVzOm51bGx9O2Z1bmN0aW9uIFpyKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpJiZlLmxlbmd0aD4wJiYic3RyaW5nIj09dHlwZW9mIGVbMF0mJmVbMF1pbiBTcn1mdW5jdGlvbiBYcihlLHQpe3ZhciByPW5ldyBtdChTcixbXSx0P29vKHQpOnZvaWQgMCksbz1yLnBhcnNlKGUsdm9pZCAwLHZvaWQgMCx2b2lkIDAsdCYmInN0cmluZyI9PT10LnR5cGU/e3R5cGVBbm5vdGF0aW9uOiJjb2VyY2UifTp2b2lkIDApO3JldHVybiBvP3FyKG5ldyBIcihvLHQpKTpNcihyLmVycm9ycyl9SHIucHJvdG90eXBlLmV2YWx1YXRlV2l0aG91dEVycm9ySGFuZGxpbmc9ZnVuY3Rpb24oZSx0LHIsbyxuLGkpe3JldHVybiB0aGlzLl9ldmFsdWF0b3IuZ2xvYmFscz1lLHRoaXMuX2V2YWx1YXRvci5mZWF0dXJlPXQsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmVTdGF0ZT1yLHRoaXMuX2V2YWx1YXRvci5jYW5vbmljYWw9byx0aGlzLl9ldmFsdWF0b3IuYXZhaWxhYmxlSW1hZ2VzPW58fG51bGwsdGhpcy5fZXZhbHVhdG9yLmZvcm1hdHRlZFNlY3Rpb249aSx0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodGhpcy5fZXZhbHVhdG9yKX0sSHIucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUsdCxyLG8sbixpKXt0aGlzLl9ldmFsdWF0b3IuZ2xvYmFscz1lLHRoaXMuX2V2YWx1YXRvci5mZWF0dXJlPXR8fG51bGwsdGhpcy5fZXZhbHVhdG9yLmZlYXR1cmVTdGF0ZT1yfHxudWxsLHRoaXMuX2V2YWx1YXRvci5jYW5vbmljYWw9byx0aGlzLl9ldmFsdWF0b3IuYXZhaWxhYmxlSW1hZ2VzPW58fG51bGwsdGhpcy5fZXZhbHVhdG9yLmZvcm1hdHRlZFNlY3Rpb249aXx8bnVsbDt0cnl7dmFyIGE9dGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHRoaXMuX2V2YWx1YXRvcik7aWYobnVsbD09YXx8Im51bWJlciI9PXR5cGVvZiBhJiZhIT1hKXJldHVybiB0aGlzLl9kZWZhdWx0VmFsdWU7aWYodGhpcy5fZW51bVZhbHVlcyYmIShhIGluIHRoaXMuX2VudW1WYWx1ZXMpKXRocm93IG5ldyBJZSgiRXhwZWN0ZWQgdmFsdWUgdG8gYmUgb25lIG9mICIrT2JqZWN0LmtleXModGhpcy5fZW51bVZhbHVlcykubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSl9KSkuam9pbigiLCAiKSsiLCBidXQgZm91bmQgIitKU09OLnN0cmluZ2lmeShhKSsiIGluc3RlYWQuIik7cmV0dXJuIGF9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX3dhcm5pbmdIaXN0b3J5W2UubWVzc2FnZV18fCh0aGlzLl93YXJuaW5nSGlzdG9yeVtlLm1lc3NhZ2VdPSEwLCJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZSYmY29uc29sZS53YXJuKGUubWVzc2FnZSkpLHRoaXMuX2RlZmF1bHRWYWx1ZX19O3ZhciBLcj1mdW5jdGlvbihlLHQpe3RoaXMua2luZD1lLHRoaXMuX3N0eWxlRXhwcmVzc2lvbj10LHRoaXMuaXNTdGF0ZURlcGVuZGVudD0iY29uc3RhbnQiIT09ZSYmIWh0KHQuZXhwcmVzc2lvbil9O0tyLnByb3RvdHlwZS5ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nPWZ1bmN0aW9uKGUsdCxyLG8sbixpKXtyZXR1cm4gdGhpcy5fc3R5bGVFeHByZXNzaW9uLmV2YWx1YXRlV2l0aG91dEVycm9ySGFuZGxpbmcoZSx0LHIsbyxuLGkpfSxLci5wcm90b3R5cGUuZXZhbHVhdGU9ZnVuY3Rpb24oZSx0LHIsbyxuLGkpe3JldHVybiB0aGlzLl9zdHlsZUV4cHJlc3Npb24uZXZhbHVhdGUoZSx0LHIsbyxuLGkpfTt2YXIgWXI9ZnVuY3Rpb24oZSx0LHIsbyl7dGhpcy5raW5kPWUsdGhpcy56b29tU3RvcHM9cix0aGlzLl9zdHlsZUV4cHJlc3Npb249dCx0aGlzLmlzU3RhdGVEZXBlbmRlbnQ9ImNhbWVyYSIhPT1lJiYhaHQodC5leHByZXNzaW9uKSx0aGlzLmludGVycG9sYXRpb25UeXBlPW99O2Z1bmN0aW9uIFFyKGUsdCl7aWYoImVycm9yIj09PShlPVhyKGUsdCkpLnJlc3VsdClyZXR1cm4gZTt2YXIgcj1lLnZhbHVlLmV4cHJlc3Npb24sbz1kdChyKTtpZighbyYmIU5yKHQpKXJldHVybiBNcihbbmV3IFkoIiIsImRhdGEgZXhwcmVzc2lvbnMgbm90IHN1cHBvcnRlZCIpXSk7dmFyIG49ZnQocixbInpvb20iXSk7aWYoIW4mJiFScih0KSlyZXR1cm4gTXIoW25ldyBZKCIiLCJ6b29tIGV4cHJlc3Npb25zIG5vdCBzdXBwb3J0ZWQiKV0pO3ZhciBpPXJvKHIpO2lmKCFpJiYhbilyZXR1cm4gTXIoW25ldyBZKCIiLCciem9vbSIgZXhwcmVzc2lvbiBtYXkgb25seSBiZSB1c2VkIGFzIGlucHV0IHRvIGEgdG9wLWxldmVsICJzdGVwIiBvciAiaW50ZXJwb2xhdGUiIGV4cHJlc3Npb24uJyldKTtpZihpIGluc3RhbmNlb2YgWSlyZXR1cm4gTXIoW2ldKTtpZihpIGluc3RhbmNlb2YgWnQmJiFEcih0KSlyZXR1cm4gTXIoW25ldyBZKCIiLCciaW50ZXJwb2xhdGUiIGV4cHJlc3Npb25zIGNhbm5vdCBiZSB1c2VkIHdpdGggdGhpcyBwcm9wZXJ0eScpXSk7aWYoIWkpcmV0dXJuIHFyKG5ldyBLcihvPyJjb25zdGFudCI6InNvdXJjZSIsZS52YWx1ZSkpO3ZhciBhPWkgaW5zdGFuY2VvZiBadD9pLmludGVycG9sYXRpb246dm9pZCAwO3JldHVybiBxcihuZXcgWXIobz8iY2FtZXJhIjoiY29tcG9zaXRlIixlLnZhbHVlLGkubGFiZWxzLGEpKX1Zci5wcm90b3R5cGUuZXZhbHVhdGVXaXRob3V0RXJyb3JIYW5kbGluZz1mdW5jdGlvbihlLHQscixvLG4saSl7cmV0dXJuIHRoaXMuX3N0eWxlRXhwcmVzc2lvbi5ldmFsdWF0ZVdpdGhvdXRFcnJvckhhbmRsaW5nKGUsdCxyLG8sbixpKX0sWXIucHJvdG90eXBlLmV2YWx1YXRlPWZ1bmN0aW9uKGUsdCxyLG8sbixpKXtyZXR1cm4gdGhpcy5fc3R5bGVFeHByZXNzaW9uLmV2YWx1YXRlKGUsdCxyLG8sbixpKX0sWXIucHJvdG90eXBlLmludGVycG9sYXRpb25GYWN0b3I9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLmludGVycG9sYXRpb25UeXBlP1p0LmludGVycG9sYXRpb25GYWN0b3IodGhpcy5pbnRlcnBvbGF0aW9uVHlwZSxlLHQscik6MH07dmFyIGVvPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcGFyYW1ldGVycz1lLHRoaXMuX3NwZWNpZmljYXRpb249dCxLKHRoaXMsJHIodGhpcy5fcGFyYW1ldGVycyx0aGlzLl9zcGVjaWZpY2F0aW9uKSl9O2Z1bmN0aW9uIHRvKGUsdCl7aWYoRnIoZSkpcmV0dXJuIG5ldyBlbyhlLHQpO2lmKFpyKGUpKXt2YXIgcj1RcihlLHQpO2lmKCJlcnJvciI9PT1yLnJlc3VsdCl0aHJvdyBuZXcgRXJyb3Ioci52YWx1ZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmtleSsiOiAiK2UubWVzc2FnZX0pKS5qb2luKCIsICIpKTtyZXR1cm4gci52YWx1ZX12YXIgbz1lO3JldHVybiJzdHJpbmciPT10eXBlb2YgZSYmImNvbG9yIj09PXQudHlwZSYmKG89YmUucGFyc2UoZSkpLHtraW5kOiJjb25zdGFudCIsZXZhbHVhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gb319fWZ1bmN0aW9uIHJvKGUpe3ZhciB0PW51bGw7aWYoZSBpbnN0YW5jZW9mIFl0KXQ9cm8oZS5yZXN1bHQpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIEt0KWZvcih2YXIgcj0wLG89ZS5hcmdzO3I8by5sZW5ndGg7cis9MSl7dmFyIG49b1tyXTtpZih0PXJvKG4pKWJyZWFrfWVsc2UoZSBpbnN0YW5jZW9mIGJ0fHxlIGluc3RhbmNlb2YgWnQpJiZlLmlucHV0IGluc3RhbmNlb2YgUGUmJiJ6b29tIj09PWUuaW5wdXQubmFtZSYmKHQ9ZSk7cmV0dXJuIHQgaW5zdGFuY2VvZiBZfHxlLmVhY2hDaGlsZCgoZnVuY3Rpb24oZSl7dmFyIHI9cm8oZSk7ciBpbnN0YW5jZW9mIFk/dD1yOiF0JiZyP3Q9bmV3IFkoIiIsJyJ6b29tIiBleHByZXNzaW9uIG1heSBvbmx5IGJlIHVzZWQgYXMgaW5wdXQgdG8gYSB0b3AtbGV2ZWwgInN0ZXAiIG9yICJpbnRlcnBvbGF0ZSIgZXhwcmVzc2lvbi4nKTp0JiZyJiZ0IT09ciYmKHQ9bmV3IFkoIiIsJ09ubHkgb25lIHpvb20tYmFzZWQgInN0ZXAiIG9yICJpbnRlcnBvbGF0ZSIgc3ViZXhwcmVzc2lvbiBtYXkgYmUgdXNlZCBpbiBhbiBleHByZXNzaW9uLicpKX0pKSx0fWZ1bmN0aW9uIG9vKGUpe3ZhciB0PXtjb2xvcjpuZSxzdHJpbmc6cmUsbnVtYmVyOnRlLGVudW06cmUsYm9vbGVhbjpvZSxmb3JtYXR0ZWQ6dWUscmVzb2x2ZWRJbWFnZTpjZX07cmV0dXJuImFycmF5Ij09PWUudHlwZT9wZSh0W2UudmFsdWVdfHxhZSxlLmxlbmd0aCk6dFtlLnR5cGVdfWZ1bmN0aW9uIG5vKGUpe3JldHVybiJjb2xvciI9PT1lLnR5cGUmJkZyKGUuZGVmYXVsdCk/bmV3IGJlKDAsMCwwLDApOiJjb2xvciI9PT1lLnR5cGU/YmUucGFyc2UoZS5kZWZhdWx0KXx8bnVsbDp2b2lkIDA9PT1lLmRlZmF1bHQ/bnVsbDplLmRlZmF1bHR9ZnVuY3Rpb24gaW8oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP1sibGl0ZXJhbCIsZV06ZX1mdW5jdGlvbiBhbyhlLHQpe3ZhciByPWUuc3RvcHM7aWYoIXIpcmV0dXJuIHNvKGUsdCk7dmFyIG89ciYmIm9iamVjdCI9PXR5cGVvZiByWzBdWzBdLG49b3x8dm9pZCAwIT09ZS5wcm9wZXJ0eSxpPW98fCFuO3JldHVybiByPXIubWFwKChmdW5jdGlvbihlKXtyZXR1cm4hbiYmdC50b2tlbnMmJiJzdHJpbmciPT10eXBlb2YgZVsxXT9bZVswXSx2byhlWzFdKV06W2VbMF0saW8oZVsxXSldfSkpLG8/dW8oZSx0LHIpOmk/Zm8oZSx0LHIpOmhvKGUsdCxyKX1mdW5jdGlvbiBzbyhlLHQpe3ZhciByPVsiZ2V0IixlLnByb3BlcnR5XTtpZih2b2lkIDA9PT1lLmRlZmF1bHQpcmV0dXJuInN0cmluZyI9PT10LnR5cGU/WyJzdHJpbmciLHJdOnI7aWYoImVudW0iPT09dC50eXBlKXJldHVyblsibWF0Y2giLHIsT2JqZWN0LmtleXModC52YWx1ZXMpLHIsZS5kZWZhdWx0XTt2YXIgbz1bImNvbG9yIj09PXQudHlwZT8idG8tY29sb3IiOnQudHlwZSxyLGlvKGUuZGVmYXVsdCldO3JldHVybiJhcnJheSI9PT10LnR5cGUmJm8uc3BsaWNlKDEsMCx0LnZhbHVlLHQubGVuZ3RofHxudWxsKSxvfWZ1bmN0aW9uIGxvKGUpe3N3aXRjaChlLmNvbG9yU3BhY2Upe2Nhc2UiaGNsIjpyZXR1cm4iaW50ZXJwb2xhdGUtaGNsIjtjYXNlImxhYiI6cmV0dXJuImludGVycG9sYXRlLWxhYiI7ZGVmYXVsdDpyZXR1cm4iaW50ZXJwb2xhdGUifX1mdW5jdGlvbiB1byhlLHQscil7Zm9yKHZhciBvPXt9LG49e30saT1bXSxhPTA7YTxyLmxlbmd0aDthKyspe3ZhciBzPXJbYV0sbD1zWzBdLnpvb207dm9pZCAwPT09b1tsXSYmKG9bbF09e3pvb206bCx0eXBlOmUudHlwZSxwcm9wZXJ0eTplLnByb3BlcnR5LGRlZmF1bHQ6ZS5kZWZhdWx0fSxuW2xdPVtdLGkucHVzaChsKSksbltsXS5wdXNoKFtzWzBdLnZhbHVlLHNbMV1dKX1pZigiZXhwb25lbnRpYWwiPT09Z28oe30sdCkpe2Zvcih2YXIgdT1bbG8oZSksWyJsaW5lYXIiXSxbInpvb20iXV0sYz0wLHA9aTtjPHAubGVuZ3RoO2MrPTEpe3ZhciBkPXBbY107bW8odSxkLGhvKG9bZF0sdCxuW2RdKSwhMSl9cmV0dXJuIHV9Zm9yKHZhciBoPVsic3RlcCIsWyJ6b29tIl1dLGY9MCx5PWk7Zjx5Lmxlbmd0aDtmKz0xKXt2YXIgbT15W2ZdO21vKGgsbSxobyhvW21dLHQsblttXSksITApfXJldHVybiB5byhoKSxofWZ1bmN0aW9uIGNvKGUsdCl7cmV0dXJuIHZvaWQgMCE9PWU/ZTp2b2lkIDAhPT10P3Q6dm9pZCAwfWZ1bmN0aW9uIHBvKGUsdCl7dmFyIHI9aW8oY28oZS5kZWZhdWx0LHQuZGVmYXVsdCkpO3JldHVybiB2b2lkIDA9PT1yJiYicmVzb2x2ZWRJbWFnZSI9PT10LnR5cGU/IiI6cn1mdW5jdGlvbiBobyhlLHQscil7dmFyIG89Z28oZSx0KSxuPVsiZ2V0IixlLnByb3BlcnR5XTtpZigiY2F0ZWdvcmljYWwiPT09byYmImJvb2xlYW4iPT10eXBlb2YgclswXVswXSl7Zm9yKHZhciBpPVsiY2FzZSJdLGE9MCxzPXI7YTxzLmxlbmd0aDthKz0xKXt2YXIgbD1zW2FdO2kucHVzaChbIj09IixuLGxbMF1dLGxbMV0pfXJldHVybiBpLnB1c2gocG8oZSx0KSksaX1pZigiY2F0ZWdvcmljYWwiPT09byl7Zm9yKHZhciB1PVsibWF0Y2giLG5dLGM9MCxwPXI7YzxwLmxlbmd0aDtjKz0xKXt2YXIgZD1wW2NdO21vKHUsZFswXSxkWzFdLCExKX1yZXR1cm4gdS5wdXNoKHBvKGUsdCkpLHV9aWYoImludGVydmFsIj09PW8pe2Zvcih2YXIgaD1bInN0ZXAiLFsibnVtYmVyIixuXV0sZj0wLHk9cjtmPHkubGVuZ3RoO2YrPTEpe3ZhciBtPXlbZl07bW8oaCxtWzBdLG1bMV0sITApfXJldHVybiB5byhoKSx2b2lkIDA9PT1lLmRlZmF1bHQ/aDpbImNhc2UiLFsiPT0iLFsidHlwZW9mIixuXSwibnVtYmVyIl0saCxpbyhlLmRlZmF1bHQpXX1pZigiZXhwb25lbnRpYWwiPT09byl7Zm9yKHZhciBnPXZvaWQgMCE9PWUuYmFzZT9lLmJhc2U6MSx2PVtsbyhlKSwxPT09Zz9bImxpbmVhciJdOlsiZXhwb25lbnRpYWwiLGddLFsibnVtYmVyIixuXV0sYj0wLHg9cjtiPHgubGVuZ3RoO2IrPTEpe3ZhciB3PXhbYl07bW8odix3WzBdLHdbMV0sITEpfXJldHVybiB2b2lkIDA9PT1lLmRlZmF1bHQ/djpbImNhc2UiLFsiPT0iLFsidHlwZW9mIixuXSwibnVtYmVyIl0sdixpbyhlLmRlZmF1bHQpXX10aHJvdyBuZXcgRXJyb3IoIlVua25vd24gcHJvcGVydHkgZnVuY3Rpb24gdHlwZSAiK28pfWZ1bmN0aW9uIGZvKGUsdCxyLG8pe3ZvaWQgMD09PW8mJihvPVsiem9vbSJdKTt2YXIgbixpPWdvKGUsdCksYT0hMTtpZigiaW50ZXJ2YWwiPT09aSluPVsic3RlcCIsb10sYT0hMDtlbHNle2lmKCJleHBvbmVudGlhbCIhPT1pKXRocm93IG5ldyBFcnJvcignVW5rbm93biB6b29tIGZ1bmN0aW9uIHR5cGUgIicraSsnIicpO3ZhciBzPXZvaWQgMCE9PWUuYmFzZT9lLmJhc2U6MTtuPVtsbyhlKSwxPT09cz9bImxpbmVhciJdOlsiZXhwb25lbnRpYWwiLHNdLG9dfWZvcih2YXIgbD0wLHU9cjtsPHUubGVuZ3RoO2wrPTEpe3ZhciBjPXVbbF07bW8obixjWzBdLGNbMV0sYSl9cmV0dXJuIHlvKG4pLG59ZnVuY3Rpb24geW8oZSl7InN0ZXAiPT09ZVswXSYmMz09PWUubGVuZ3RoJiYoZS5wdXNoKDApLGUucHVzaChlWzNdKSl9ZnVuY3Rpb24gbW8oZSx0LHIsbyl7ZS5sZW5ndGg+MyYmdD09PWVbZS5sZW5ndGgtMl18fChvJiYyPT09ZS5sZW5ndGh8fGUucHVzaCh0KSxlLnB1c2gocikpfWZ1bmN0aW9uIGdvKGUsdCl7cmV0dXJuIGUudHlwZT9lLnR5cGU6dC5leHByZXNzaW9uLmludGVycG9sYXRlZD8iZXhwb25lbnRpYWwiOiJpbnRlcnZhbCJ9ZnVuY3Rpb24gdm8oZSl7Zm9yKHZhciB0PVsiY29uY2F0Il0scj0veyhbXnt9XSspfS9nLG89MCxuPXIuZXhlYyhlKTtudWxsIT09bjtuPXIuZXhlYyhlKSl7dmFyIGk9ZS5zbGljZShvLHIubGFzdEluZGV4LW5bMF0ubGVuZ3RoKTtvPXIubGFzdEluZGV4LGkubGVuZ3RoPjAmJnQucHVzaChpKSx0LnB1c2goWyJnZXQiLG5bMV1dKX1pZigxPT09dC5sZW5ndGgpcmV0dXJuIGU7aWYobzxlLmxlbmd0aCl0LnB1c2goZS5zbGljZShvKSk7ZWxzZSBpZigyPT09dC5sZW5ndGgpcmV0dXJuWyJ0by1zdHJpbmciLHRbMV1dO3JldHVybiB0fWZ1bmN0aW9uIGJvKGUpe2lmKCEwPT09ZXx8ITE9PT1lKXJldHVybiEwO2lmKCFBcnJheS5pc0FycmF5KGUpfHwwPT09ZS5sZW5ndGgpcmV0dXJuITE7c3dpdGNoKGVbMF0pe2Nhc2UiaGFzIjpyZXR1cm4gZS5sZW5ndGg+PTImJiIkaWQiIT09ZVsxXSYmIiR0eXBlIiE9PWVbMV07Y2FzZSJpbiI6cmV0dXJuIGUubGVuZ3RoPj0zJiYoInN0cmluZyIhPXR5cGVvZiBlWzFdfHxBcnJheS5pc0FycmF5KGVbMl0pKTtjYXNlIiFpbiI6Y2FzZSIhaGFzIjpjYXNlIm5vbmUiOnJldHVybiExO2Nhc2UiPT0iOmNhc2UiIT0iOmNhc2UiPiI6Y2FzZSI+PSI6Y2FzZSI8IjpjYXNlIjw9IjpyZXR1cm4gMyE9PWUubGVuZ3RofHxBcnJheS5pc0FycmF5KGVbMV0pfHxBcnJheS5pc0FycmF5KGVbMl0pO2Nhc2UiYW55IjpjYXNlImFsbCI6Zm9yKHZhciB0PTAscj1lLnNsaWNlKDEpO3Q8ci5sZW5ndGg7dCs9MSl7dmFyIG89clt0XTtpZighYm8obykmJiJib29sZWFuIiE9dHlwZW9mIG8pcmV0dXJuITF9cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMH19ZW8uZGVzZXJpYWxpemU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBlbyhlLl9wYXJhbWV0ZXJzLGUuX3NwZWNpZmljYXRpb24pfSxlby5zZXJpYWxpemU9ZnVuY3Rpb24oZSl7cmV0dXJue19wYXJhbWV0ZXJzOmUuX3BhcmFtZXRlcnMsX3NwZWNpZmljYXRpb246ZS5fc3BlY2lmaWNhdGlvbn19O3ZhciB4bz17dHlwZToiYm9vbGVhbiIsZGVmYXVsdDohMSx0cmFuc2l0aW9uOiExLCJwcm9wZXJ0eS10eXBlIjoiZGF0YS1kcml2ZW4iLGV4cHJlc3Npb246e2ludGVycG9sYXRlZDohMSxwYXJhbWV0ZXJzOlsiem9vbSIsImZlYXR1cmUiXX19O2Z1bmN0aW9uIHdvKGUpe2lmKG51bGw9PWUpcmV0dXJue2ZpbHRlcjpmdW5jdGlvbigpe3JldHVybiEwfSxuZWVkR2VvbWV0cnk6ITF9O2JvKGUpfHwoZT16byhlKSk7dmFyIHQ9WHIoZSx4byk7aWYoImVycm9yIj09PXQucmVzdWx0KXRocm93IG5ldyBFcnJvcih0LnZhbHVlLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5KyI6ICIrZS5tZXNzYWdlfSkpLmpvaW4oIiwgIikpO3JldHVybntmaWx0ZXI6ZnVuY3Rpb24oZSxyLG8pe3JldHVybiB0LnZhbHVlLmV2YWx1YXRlKGUscix7fSxvKX0sbmVlZEdlb21ldHJ5OmpvKGUpfX1mdW5jdGlvbiBrbyhlLHQpe3JldHVybiBlPHQ/LTE6ZT50PzE6MH1mdW5jdGlvbiBqbyhlKXtpZighQXJyYXkuaXNBcnJheShlKSlyZXR1cm4hMTtpZigid2l0aGluIj09PWVbMF0pcmV0dXJuITA7Zm9yKHZhciB0PTE7dDxlLmxlbmd0aDt0KyspaWYoam8oZVt0XSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gem8oZSl7aWYoIWUpcmV0dXJuITA7dmFyIHQ9ZVswXTtyZXR1cm4gZS5sZW5ndGg8PTE/ImFueSIhPT10OiI9PSI9PT10P1RvKGVbMV0sZVsyXSwiPT0iKToiIT0iPT09dD9JbyhUbyhlWzFdLGVbMl0sIj09IikpOiI8Ij09PXR8fCI+Ij09PXR8fCI8PSI9PT10fHwiPj0iPT09dD9UbyhlWzFdLGVbMl0sdCk6ImFueSI9PT10P19vKGUuc2xpY2UoMSkpOiJhbGwiPT09dD9bImFsbCJdLmNvbmNhdChlLnNsaWNlKDEpLm1hcCh6bykpOiJub25lIj09PXQ/WyJhbGwiXS5jb25jYXQoZS5zbGljZSgxKS5tYXAoem8pLm1hcChJbykpOiJpbiI9PT10P1NvKGVbMV0sZS5zbGljZSgyKSk6IiFpbiI9PT10P0lvKFNvKGVbMV0sZS5zbGljZSgyKSkpOiJoYXMiPT09dD9BbyhlWzFdKToiIWhhcyI9PT10P0lvKEFvKGVbMV0pKToid2l0aGluIiE9PXR8fGV9ZnVuY3Rpb24gVG8oZSx0LHIpe3N3aXRjaChlKXtjYXNlIiR0eXBlIjpyZXR1cm5bImZpbHRlci10eXBlLSIrcix0XTtjYXNlIiRpZCI6cmV0dXJuWyJmaWx0ZXItaWQtIityLHRdO2RlZmF1bHQ6cmV0dXJuWyJmaWx0ZXItIityLGUsdF19fWZ1bmN0aW9uIF9vKGUpe3JldHVyblsiYW55Il0uY29uY2F0KGUubWFwKHpvKSl9ZnVuY3Rpb24gU28oZSx0KXtpZigwPT09dC5sZW5ndGgpcmV0dXJuITE7c3dpdGNoKGUpe2Nhc2UiJHR5cGUiOnJldHVyblsiZmlsdGVyLXR5cGUtaW4iLFsibGl0ZXJhbCIsdF1dO2Nhc2UiJGlkIjpyZXR1cm5bImZpbHRlci1pZC1pbiIsWyJsaXRlcmFsIix0XV07ZGVmYXVsdDpyZXR1cm4gdC5sZW5ndGg+MjAwJiYhdC5zb21lKChmdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGUhPXR5cGVvZiB0WzBdfSkpP1siZmlsdGVyLWluLWxhcmdlIixlLFsibGl0ZXJhbCIsdC5zb3J0KGtvKV1dOlsiZmlsdGVyLWluLXNtYWxsIixlLFsibGl0ZXJhbCIsdF1dfX1mdW5jdGlvbiBBbyhlKXtzd2l0Y2goZSl7Y2FzZSIkdHlwZSI6cmV0dXJuITA7Y2FzZSIkaWQiOnJldHVyblsiZmlsdGVyLWhhcy1pZCJdO2RlZmF1bHQ6cmV0dXJuWyJmaWx0ZXItaGFzIixlXX19ZnVuY3Rpb24gSW8oZSl7cmV0dXJuWyIhIixlXX1mdW5jdGlvbiBDbyhlKXtyZXR1cm4gT28oZSx7fSl9ZnVuY3Rpb24gT28oZSx0KXt2YXIgcjtpZihibyhlKSlyZXR1cm4gZTtpZighZSlyZXR1cm4hMDt2YXIgbyxuPWVbMF07aWYoZS5sZW5ndGg8PTEpcmV0dXJuImFueSIhPT1uO2lmKCI9PSI9PT1ufHwiIT0iPT09bnx8IjwiPT09bnx8Ij4iPT09bnx8Ijw9Ij09PW58fCI+PSI9PT1uKXt2YXIgaT1lO289cW8oaVsxXSxpWzJdLG4sdCl9ZWxzZXtpZigiYW55Ij09PW4pe3ZhciBhPWUuc2xpY2UoMSkubWFwKChmdW5jdGlvbihlKXt2YXIgdD17fSxyPU9vKGUsdCksbz1Fbyh0KTtyZXR1cm4hMD09PW8/cjpbImNhc2UiLG8sciwhMV19KSk7cmV0dXJuWyJhbnkiXS5jb25jYXQoYSl9aWYoImFsbCI9PT1uKXt2YXIgcz1lLnNsaWNlKDEpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIE9vKGUsdCl9KSk7cmV0dXJuIHMubGVuZ3RoPjE/WyJhbGwiXS5jb25jYXQocyk6KHI9W10pLmNvbmNhdC5hcHBseShyLHMpfWlmKCJub25lIj09PW4pcmV0dXJuWyIhIixPbyhbImFueSJdLmNvbmNhdChlLnNsaWNlKDEpKSx7fSldO289ImluIj09PW4/TW8oZVsxXSxlLnNsaWNlKDIpKToiIWluIj09PW4/TW8oZVsxXSxlLnNsaWNlKDIpLCEwKToiaGFzIj09PW4/Tm8oZVsxXSk6IiFoYXMiIT09bnx8WyIhIixObyhlWzFdKV19cmV0dXJuIG99ZnVuY3Rpb24gRW8oZSl7dmFyIHQ9W107Zm9yKHZhciByIGluIGUpe3ZhciBvPSIkaWQiPT09cj9bImlkIl06WyJnZXQiLHJdO3QucHVzaChbIj09IixbInR5cGVvZiIsb10sZVtyXV0pfXJldHVybiAwPT09dC5sZW5ndGh8fCgxPT09dC5sZW5ndGg/dFswXTpbImFsbCJdLmNvbmNhdCh0KSl9ZnVuY3Rpb24gcW8oZSx0LHIsbyl7dmFyIG47aWYoIiR0eXBlIj09PWUpcmV0dXJuW3IsWyJnZW9tZXRyeS10eXBlIl0sdF07aWYobj0iJGlkIj09PWU/WyJpZCJdOlsiZ2V0IixlXSxvJiZudWxsIT09dCl7dmFyIGk9dHlwZW9mIHQ7b1tlXT1pfXJldHVybiI9PSI9PT1yJiYiJGlkIiE9PWUmJm51bGw9PT10P1siYWxsIixbImhhcyIsZV0sWyI9PSIsbixudWxsXV06IiE9Ij09PXImJiIkaWQiIT09ZSYmbnVsbD09PXQ/WyJhbnkiLFsiISIsWyJoYXMiLGVdXSxbIiE9IixuLG51bGxdXTpbcixuLHRdfWZ1bmN0aW9uIE1vKGUsdCxyKXtpZih2b2lkIDA9PT1yJiYocj0hMSksMD09PXQubGVuZ3RoKXJldHVybiByO3ZhciBvO289IiR0eXBlIj09PWU/WyJnZW9tZXRyeS10eXBlIl06IiRpZCI9PT1lP1siaWQiXTpbImdldCIsZV07Zm9yKHZhciBuPSEwLGk9dHlwZW9mIHRbMF0sYT0wLHM9dDthPHMubGVuZ3RoO2ErPTEpaWYodHlwZW9mIHNbYV0hPT1pKXtuPSExO2JyZWFrfWlmKG4mJigic3RyaW5nIj09PWl8fCJudW1iZXIiPT09aSkpe3ZhciBsPXQuc29ydCgpLmZpbHRlcigoZnVuY3Rpb24oZSxyKXtyZXR1cm4gMD09PXJ8fHRbci0xXSE9PWV9KSk7cmV0dXJuWyJtYXRjaCIsbyxsLCFyLHJdfXJldHVybltyPyJhbGwiOiJhbnkiXS5jb25jYXQodC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybltyPyIhPSI6Ij09IixvLGVdfSkpKX1mdW5jdGlvbiBObyhlKXtyZXR1cm4iJHR5cGUiPT09ZXx8KCIkaWQiPT09ZT9bIiE9IixbImlkIl0sbnVsbF06WyJoYXMiLGVdKX1mdW5jdGlvbiBSbyhlKXt2YXIgdD1bXTtyZXR1cm4gSihlLChmdW5jdGlvbihlKXtlLmZpbHRlciYmKGUuZmlsdGVyPUNvKGUuZmlsdGVyKSl9KSksVyhlLHtwYWludDohMCxsYXlvdXQ6ITB9LChmdW5jdGlvbihlKXt2YXIgcj1lLnBhdGgsbz1lLnZhbHVlLG49ZS5yZWZlcmVuY2UsaT1lLnNldDtacihvKXx8KCJvYmplY3QiIT10eXBlb2Ygb3x8QXJyYXkuaXNBcnJheShvKT9uLnRva2VucyYmInN0cmluZyI9PXR5cGVvZiBvJiZpKHZvKG8pKTooaShhbyhvLG4pKSx0LnB1c2goci5qb2luKCIuIikpKSl9KSksZX1mdW5jdGlvbiBEbyhlKXt2YXIgdD0hMTtpZig3PT09ZS52ZXJzaW9uJiYoZT1YKGUpLHQ9ITApLDg9PT1lLnZlcnNpb24mJih0PVJvKGUpLHQ9ITApLCF0KXRocm93IG5ldyBFcnJvcigiY2Fubm90IG1pZ3JhdGUgZnJvbSIsZS52ZXJzaW9uKTtyZXR1cm4gZX1mdW5jdGlvbiBQbyhlKXt2YXIgdD1bXSxyPVtdLG89W107Zm9yKHZhciBuIGluIGUuc291cmNlcyl7dmFyIGk9ZS5zb3VyY2VzW25dO2lmKCJ2ZWN0b3IiPT09aS50eXBlKXt2YXIgYT0vXm1hcGJveDpcL1wvKC4qKS8uZXhlYyhpLnVybCk7YSYmKHQucHVzaChuKSxyLnB1c2goYVsxXSkpfX1pZih0Lmxlbmd0aDwyKXJldHVybiBlO3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZGVsZXRlIGUuc291cmNlc1t0XX0pKTt2YXIgcz1yLmpvaW4oIiwiKTtyZXR1cm4gZS5zb3VyY2VzW3NdPXt0eXBlOiJ2ZWN0b3IiLHVybDoibWFwYm94Oi8vIitzfSxlLmxheWVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZih0LmluZGV4T2YoZS5zb3VyY2UpPj0wJiYoZS5zb3VyY2U9cywic291cmNlLWxheWVyImluIGUpKXtpZihvLmluZGV4T2YoZVsic291cmNlLWxheWVyIl0pPj0wKXRocm93IG5ldyBFcnJvcigiQ29uZmxpY3Rpbmcgc291cmNlIGxheWVyIG5hbWVzIik7by5wdXNoKGVbInNvdXJjZS1sYXllciJdKX19KSksZX12YXIgRm89WyJ0eXBlIiwic291cmNlIiwic291cmNlLWxheWVyIiwibWluem9vbSIsIm1heHpvb20iLCJmaWx0ZXIiLCJsYXlvdXQiXTtmdW5jdGlvbiBMbyhlLHQpe3ZhciByPXt9O2Zvcih2YXIgbyBpbiBlKSJyZWYiIT09byYmKHJbb109ZVtvXSk7cmV0dXJuIEZvLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UgaW4gdCYmKHJbZV09dFtlXSl9KSkscn1mdW5jdGlvbiAkbyhlKXtlPWUuc2xpY2UoKTtmb3IodmFyIHQ9T2JqZWN0LmNyZWF0ZShudWxsKSxyPTA7cjxlLmxlbmd0aDtyKyspdFtlW3JdLmlkXT1lW3JdO2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKSJyZWYiaW4gZVtvXSYmKGVbb109TG8oZVtvXSx0W2Vbb10ucmVmXSkpO3JldHVybiBlfWZ1bmN0aW9uIFVvKGUsdCl7aWYoQXJyYXkuaXNBcnJheShlKSl7aWYoIUFycmF5LmlzQXJyYXkodCl8fGUubGVuZ3RoIT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspaWYoIVVvKGVbcl0sdFtyXSkpcmV0dXJuITE7cmV0dXJuITB9aWYoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT09ZSYmbnVsbCE9PXQpe2lmKCJvYmplY3QiIT10eXBlb2YgdClyZXR1cm4hMTtpZihPYmplY3Qua2V5cyhlKS5sZW5ndGghPT1PYmplY3Qua2V5cyh0KS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBvIGluIGUpaWYoIVVvKGVbb10sdFtvXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIGU9PT10fXZhciBKbz17c2V0U3R5bGU6InNldFN0eWxlIixhZGRMYXllcjoiYWRkTGF5ZXIiLHJlbW92ZUxheWVyOiJyZW1vdmVMYXllciIsc2V0UGFpbnRQcm9wZXJ0eToic2V0UGFpbnRQcm9wZXJ0eSIsc2V0TGF5b3V0UHJvcGVydHk6InNldExheW91dFByb3BlcnR5IixzZXRGaWx0ZXI6InNldEZpbHRlciIsYWRkU291cmNlOiJhZGRTb3VyY2UiLHJlbW92ZVNvdXJjZToicmVtb3ZlU291cmNlIixzZXRHZW9KU09OU291cmNlRGF0YToic2V0R2VvSlNPTlNvdXJjZURhdGEiLHNldExheWVyWm9vbVJhbmdlOiJzZXRMYXllclpvb21SYW5nZSIsc2V0TGF5ZXJQcm9wZXJ0eToic2V0TGF5ZXJQcm9wZXJ0eSIsc2V0Q2VudGVyOiJzZXRDZW50ZXIiLHNldFpvb206InNldFpvb20iLHNldEJlYXJpbmc6InNldEJlYXJpbmciLHNldFBpdGNoOiJzZXRQaXRjaCIsc2V0U3ByaXRlOiJzZXRTcHJpdGUiLHNldEdseXBoczoic2V0R2x5cGhzIixzZXRUcmFuc2l0aW9uOiJzZXRUcmFuc2l0aW9uIixzZXRMaWdodDoic2V0TGlnaHQifTtmdW5jdGlvbiBXbyhlLHQscil7ci5wdXNoKHtjb21tYW5kOkpvLmFkZFNvdXJjZSxhcmdzOltlLHRbZV1dfSl9ZnVuY3Rpb24gR28oZSx0LHIpe3QucHVzaCh7Y29tbWFuZDpKby5yZW1vdmVTb3VyY2UsYXJnczpbZV19KSxyW2VdPSEwfWZ1bmN0aW9uIEJvKGUsdCxyLG8pe0dvKGUscixvKSxXbyhlLHQscil9ZnVuY3Rpb24gVm8oZSx0LHIpe3ZhciBvO2ZvcihvIGluIGVbcl0paWYoZVtyXS5oYXNPd25Qcm9wZXJ0eShvKSYmImRhdGEiIT09byYmIVVvKGVbcl1bb10sdFtyXVtvXSkpcmV0dXJuITE7Zm9yKG8gaW4gdFtyXSlpZih0W3JdLmhhc093blByb3BlcnR5KG8pJiYiZGF0YSIhPT1vJiYhVW8oZVtyXVtvXSx0W3JdW29dKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBIbyhlLHQscixvKXt2YXIgbjtmb3IobiBpbiB0PXR8fHt9LGU9ZXx8e30pZS5oYXNPd25Qcm9wZXJ0eShuKSYmKHQuaGFzT3duUHJvcGVydHkobil8fEdvKG4scixvKSk7Zm9yKG4gaW4gdCl0Lmhhc093blByb3BlcnR5KG4pJiYoZS5oYXNPd25Qcm9wZXJ0eShuKT9VbyhlW25dLHRbbl0pfHwoImdlb2pzb24iPT09ZVtuXS50eXBlJiYiZ2VvanNvbiI9PT10W25dLnR5cGUmJlZvKGUsdCxuKT9yLnB1c2goe2NvbW1hbmQ6Sm8uc2V0R2VvSlNPTlNvdXJjZURhdGEsYXJnczpbbix0W25dLmRhdGFdfSk6Qm8obix0LHIsbykpOldvKG4sdCxyKSl9ZnVuY3Rpb24gWm8oZSx0LHIsbyxuLGkpe3ZhciBhO2ZvcihhIGluIHQ9dHx8e30sZT1lfHx7fSllLmhhc093blByb3BlcnR5KGEpJiYoVW8oZVthXSx0W2FdKXx8ci5wdXNoKHtjb21tYW5kOmksYXJnczpbbyxhLHRbYV0sbl19KSk7Zm9yKGEgaW4gdCl0Lmhhc093blByb3BlcnR5KGEpJiYhZS5oYXNPd25Qcm9wZXJ0eShhKSYmKFVvKGVbYV0sdFthXSl8fHIucHVzaCh7Y29tbWFuZDppLGFyZ3M6W28sYSx0W2FdLG5dfSkpfWZ1bmN0aW9uIFhvKGUpe3JldHVybiBlLmlkfWZ1bmN0aW9uIEtvKGUsdCl7cmV0dXJuIGVbdC5pZF09dCxlfWZ1bmN0aW9uIFlvKGUsdCxyKXt0PXR8fFtdO3ZhciBvLG4saSxhLHMsbCx1LGM9KGU9ZXx8W10pLm1hcChYbykscD10Lm1hcChYbyksZD1lLnJlZHVjZShLbyx7fSksaD10LnJlZHVjZShLbyx7fSksZj1jLnNsaWNlKCkseT1PYmplY3QuY3JlYXRlKG51bGwpO2ZvcihvPTAsbj0wO288Yy5sZW5ndGg7bysrKWk9Y1tvXSxoLmhhc093blByb3BlcnR5KGkpP24rKzooci5wdXNoKHtjb21tYW5kOkpvLnJlbW92ZUxheWVyLGFyZ3M6W2ldfSksZi5zcGxpY2UoZi5pbmRleE9mKGksbiksMSkpO2ZvcihvPTAsbj0wO288cC5sZW5ndGg7bysrKWk9cFtwLmxlbmd0aC0xLW9dLGZbZi5sZW5ndGgtMS1vXSE9PWkmJihkLmhhc093blByb3BlcnR5KGkpPyhyLnB1c2goe2NvbW1hbmQ6Sm8ucmVtb3ZlTGF5ZXIsYXJnczpbaV19KSxmLnNwbGljZShmLmxhc3RJbmRleE9mKGksZi5sZW5ndGgtbiksMSkpOm4rKyxsPWZbZi5sZW5ndGgtb10sci5wdXNoKHtjb21tYW5kOkpvLmFkZExheWVyLGFyZ3M6W2hbaV0sbF19KSxmLnNwbGljZShmLmxlbmd0aC1vLDAsaSkseVtpXT0hMCk7Zm9yKG89MDtvPHAubGVuZ3RoO28rKylpZihhPWRbaT1wW29dXSxzPWhbaV0sIXlbaV0mJiFVbyhhLHMpKWlmKFVvKGEuc291cmNlLHMuc291cmNlKSYmVW8oYVsic291cmNlLWxheWVyIl0sc1sic291cmNlLWxheWVyIl0pJiZVbyhhLnR5cGUscy50eXBlKSl7Zm9yKHUgaW4gWm8oYS5sYXlvdXQscy5sYXlvdXQscixpLG51bGwsSm8uc2V0TGF5b3V0UHJvcGVydHkpLFpvKGEucGFpbnQscy5wYWludCxyLGksbnVsbCxKby5zZXRQYWludFByb3BlcnR5KSxVbyhhLmZpbHRlcixzLmZpbHRlcil8fHIucHVzaCh7Y29tbWFuZDpKby5zZXRGaWx0ZXIsYXJnczpbaSxzLmZpbHRlcl19KSxVbyhhLm1pbnpvb20scy5taW56b29tKSYmVW8oYS5tYXh6b29tLHMubWF4em9vbSl8fHIucHVzaCh7Y29tbWFuZDpKby5zZXRMYXllclpvb21SYW5nZSxhcmdzOltpLHMubWluem9vbSxzLm1heHpvb21dfSksYSlhLmhhc093blByb3BlcnR5KHUpJiYibGF5b3V0IiE9PXUmJiJwYWludCIhPT11JiYiZmlsdGVyIiE9PXUmJiJtZXRhZGF0YSIhPT11JiYibWluem9vbSIhPT11JiYibWF4em9vbSIhPT11JiYoMD09PXUuaW5kZXhPZigicGFpbnQuIik/Wm8oYVt1XSxzW3VdLHIsaSx1LnNsaWNlKDYpLEpvLnNldFBhaW50UHJvcGVydHkpOlVvKGFbdV0sc1t1XSl8fHIucHVzaCh7Y29tbWFuZDpKby5zZXRMYXllclByb3BlcnR5LGFyZ3M6W2ksdSxzW3VdXX0pKTtmb3IodSBpbiBzKXMuaGFzT3duUHJvcGVydHkodSkmJiFhLmhhc093blByb3BlcnR5KHUpJiYibGF5b3V0IiE9PXUmJiJwYWludCIhPT11JiYiZmlsdGVyIiE9PXUmJiJtZXRhZGF0YSIhPT11JiYibWluem9vbSIhPT11JiYibWF4em9vbSIhPT11JiYoMD09PXUuaW5kZXhPZigicGFpbnQuIik/Wm8oYVt1XSxzW3VdLHIsaSx1LnNsaWNlKDYpLEpvLnNldFBhaW50UHJvcGVydHkpOlVvKGFbdV0sc1t1XSl8fHIucHVzaCh7Y29tbWFuZDpKby5zZXRMYXllclByb3BlcnR5LGFyZ3M6W2ksdSxzW3VdXX0pKX1lbHNlIHIucHVzaCh7Y29tbWFuZDpKby5yZW1vdmVMYXllcixhcmdzOltpXX0pLGw9ZltmLmxhc3RJbmRleE9mKGkpKzFdLHIucHVzaCh7Y29tbWFuZDpKby5hZGRMYXllcixhcmdzOltzLGxdfSl9ZnVuY3Rpb24gUW8oZSx0KXtpZighZSlyZXR1cm5be2NvbW1hbmQ6Sm8uc2V0U3R5bGUsYXJnczpbdF19XTt2YXIgcj1bXTt0cnl7aWYoIVVvKGUudmVyc2lvbix0LnZlcnNpb24pKXJldHVyblt7Y29tbWFuZDpKby5zZXRTdHlsZSxhcmdzOlt0XX1dO1VvKGUuY2VudGVyLHQuY2VudGVyKXx8ci5wdXNoKHtjb21tYW5kOkpvLnNldENlbnRlcixhcmdzOlt0LmNlbnRlcl19KSxVbyhlLnpvb20sdC56b29tKXx8ci5wdXNoKHtjb21tYW5kOkpvLnNldFpvb20sYXJnczpbdC56b29tXX0pLFVvKGUuYmVhcmluZyx0LmJlYXJpbmcpfHxyLnB1c2goe2NvbW1hbmQ6Sm8uc2V0QmVhcmluZyxhcmdzOlt0LmJlYXJpbmddfSksVW8oZS5waXRjaCx0LnBpdGNoKXx8ci5wdXNoKHtjb21tYW5kOkpvLnNldFBpdGNoLGFyZ3M6W3QucGl0Y2hdfSksVW8oZS5zcHJpdGUsdC5zcHJpdGUpfHxyLnB1c2goe2NvbW1hbmQ6Sm8uc2V0U3ByaXRlLGFyZ3M6W3Quc3ByaXRlXX0pLFVvKGUuZ2x5cGhzLHQuZ2x5cGhzKXx8ci5wdXNoKHtjb21tYW5kOkpvLnNldEdseXBocyxhcmdzOlt0LmdseXBoc119KSxVbyhlLnRyYW5zaXRpb24sdC50cmFuc2l0aW9uKXx8ci5wdXNoKHtjb21tYW5kOkpvLnNldFRyYW5zaXRpb24sYXJnczpbdC50cmFuc2l0aW9uXX0pLFVvKGUubGlnaHQsdC5saWdodCl8fHIucHVzaCh7Y29tbWFuZDpKby5zZXRMaWdodCxhcmdzOlt0LmxpZ2h0XX0pO3ZhciBvPXt9LG49W107SG8oZS5zb3VyY2VzLHQuc291cmNlcyxuLG8pO3ZhciBpPVtdO2UubGF5ZXJzJiZlLmxheWVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtvW2Uuc291cmNlXT9yLnB1c2goe2NvbW1hbmQ6Sm8ucmVtb3ZlTGF5ZXIsYXJnczpbZS5pZF19KTppLnB1c2goZSl9KSkscj1yLmNvbmNhdChuKSxZbyhpLHQubGF5ZXJzLHIpfWNhdGNoKGUpe2NvbnNvbGUud2FybigiVW5hYmxlIHRvIGNvbXB1dGUgc3R5bGUgZGlmZjoiLGUpLHI9W3tjb21tYW5kOkpvLnNldFN0eWxlLGFyZ3M6W3RdfV19cmV0dXJuIHJ9dmFyIGVuPWZ1bmN0aW9uKGUsdCxyLG8pe3RoaXMubWVzc2FnZT0oZT9lKyI6ICI6IiIpK3IsbyYmKHRoaXMuaWRlbnRpZmllcj1vKSxudWxsIT10JiZ0Ll9fbGluZV9fJiYodGhpcy5saW5lPXQuX19saW5lX18pfSx0bj1mdW5jdGlvbihlKXt0aGlzLmVycm9yPWUsdGhpcy5tZXNzYWdlPWUubWVzc2FnZTt2YXIgdD1lLm1lc3NhZ2UubWF0Y2goL2xpbmUgKFxkKykvKTt0aGlzLmxpbmU9dD9wYXJzZUludCh0WzFdLDEwKTowfTtmdW5jdGlvbiBybihlKXt2YXIgdD1lLmtleSxyPWUudmFsdWU7cmV0dXJuIHI/W25ldyBlbih0LHIsImNvbnN0YW50cyBoYXZlIGJlZW4gZGVwcmVjYXRlZCBhcyBvZiB2OCIpXTpbXX1mdW5jdGlvbiBvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIE51bWJlcnx8ZSBpbnN0YW5jZW9mIFN0cmluZ3x8ZSBpbnN0YW5jZW9mIEJvb2xlYW4/ZS52YWx1ZU9mKCk6ZX1mdW5jdGlvbiBubihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlLm1hcChubik7aWYoZSBpbnN0YW5jZW9mIE9iamVjdCYmIShlIGluc3RhbmNlb2YgTnVtYmVyfHxlIGluc3RhbmNlb2YgU3RyaW5nfHxlIGluc3RhbmNlb2YgQm9vbGVhbikpe3ZhciB0PXt9O2Zvcih2YXIgciBpbiBlKXRbcl09bm4oZVtyXSk7cmV0dXJuIHR9cmV0dXJuIG9uKGUpfWZ1bmN0aW9uIGFuKGUpe3ZhciB0PWUua2V5LHI9ZS52YWx1ZSxvPWUudmFsdWVTcGVjfHx7fSxuPWUub2JqZWN0RWxlbWVudFZhbGlkYXRvcnN8fHt9LGk9ZS5zdHlsZSxhPWUuc3R5bGVTcGVjLHM9W10sbD1QcihyKTtpZigib2JqZWN0IiE9PWwpcmV0dXJuW25ldyBlbih0LHIsIm9iamVjdCBleHBlY3RlZCwgIitsKyIgZm91bmQiKV07Zm9yKHZhciB1IGluIHIpe3ZhciBjPXUuc3BsaXQoIi4iKVswXSxwPW9bY118fG9bIioiXSxkPXZvaWQgMDtpZihuW2NdKWQ9bltjXTtlbHNlIGlmKG9bY10pZD1BbjtlbHNlIGlmKG5bIioiXSlkPW5bIioiXTtlbHNle2lmKCFvWyIqIl0pe3MucHVzaChuZXcgZW4odCxyW3VdLCd1bmtub3duIHByb3BlcnR5ICInK3UrJyInKSk7Y29udGludWV9ZD1Bbn1zPXMuY29uY2F0KGQoe2tleToodD90KyIuIjp0KSt1LHZhbHVlOnJbdV0sdmFsdWVTcGVjOnAsc3R5bGU6aSxzdHlsZVNwZWM6YSxvYmplY3Q6cixvYmplY3RLZXk6dX0scikpfWZvcih2YXIgaCBpbiBvKW5baF18fG9baF0ucmVxdWlyZWQmJnZvaWQgMD09PW9baF0uZGVmYXVsdCYmdm9pZCAwPT09cltoXSYmcy5wdXNoKG5ldyBlbih0LHIsJ21pc3NpbmcgcmVxdWlyZWQgcHJvcGVydHkgIicraCsnIicpKTtyZXR1cm4gc31mdW5jdGlvbiBzbihlKXt2YXIgdD1lLnZhbHVlLHI9ZS52YWx1ZVNwZWMsbz1lLnN0eWxlLG49ZS5zdHlsZVNwZWMsaT1lLmtleSxhPWUuYXJyYXlFbGVtZW50VmFsaWRhdG9yfHxBbjtpZigiYXJyYXkiIT09UHIodCkpcmV0dXJuW25ldyBlbihpLHQsImFycmF5IGV4cGVjdGVkLCAiK1ByKHQpKyIgZm91bmQiKV07aWYoci5sZW5ndGgmJnQubGVuZ3RoIT09ci5sZW5ndGgpcmV0dXJuW25ldyBlbihpLHQsImFycmF5IGxlbmd0aCAiK3IubGVuZ3RoKyIgZXhwZWN0ZWQsIGxlbmd0aCAiK3QubGVuZ3RoKyIgZm91bmQiKV07aWYoclsibWluLWxlbmd0aCJdJiZ0Lmxlbmd0aDxyWyJtaW4tbGVuZ3RoIl0pcmV0dXJuW25ldyBlbihpLHQsImFycmF5IGxlbmd0aCBhdCBsZWFzdCAiK3JbIm1pbi1sZW5ndGgiXSsiIGV4cGVjdGVkLCBsZW5ndGggIit0Lmxlbmd0aCsiIGZvdW5kIildO3ZhciBzPXt0eXBlOnIudmFsdWUsdmFsdWVzOnIudmFsdWVzfTtuLiR2ZXJzaW9uPDcmJihzLmZ1bmN0aW9uPXIuZnVuY3Rpb24pLCJvYmplY3QiPT09UHIoci52YWx1ZSkmJihzPXIudmFsdWUpO2Zvcih2YXIgbD1bXSx1PTA7dTx0Lmxlbmd0aDt1KyspbD1sLmNvbmNhdChhKHthcnJheTp0LGFycmF5SW5kZXg6dSx2YWx1ZTp0W3VdLHZhbHVlU3BlYzpzLHN0eWxlOm8sc3R5bGVTcGVjOm4sa2V5OmkrIlsiK3UrIl0ifSkpO3JldHVybiBsfWZ1bmN0aW9uIGxuKGUpe3ZhciB0PWUua2V5LHI9ZS52YWx1ZSxvPWUudmFsdWVTcGVjLG49UHIocik7cmV0dXJuIm51bWJlciI9PT1uJiZyIT1yJiYobj0iTmFOIiksIm51bWJlciIhPT1uP1tuZXcgZW4odCxyLCJudW1iZXIgZXhwZWN0ZWQsICIrbisiIGZvdW5kIildOiJtaW5pbXVtImluIG8mJnI8by5taW5pbXVtP1tuZXcgZW4odCxyLHIrIiBpcyBsZXNzIHRoYW4gdGhlIG1pbmltdW0gdmFsdWUgIitvLm1pbmltdW0pXToibWF4aW11bSJpbiBvJiZyPm8ubWF4aW11bT9bbmV3IGVuKHQscixyKyIgaXMgZ3JlYXRlciB0aGFuIHRoZSBtYXhpbXVtIHZhbHVlICIrby5tYXhpbXVtKV06W119ZnVuY3Rpb24gdW4oZSl7dmFyIHQscixvLG49ZS52YWx1ZVNwZWMsaT1vbihlLnZhbHVlLnR5cGUpLGE9e30scz0iY2F0ZWdvcmljYWwiIT09aSYmdm9pZCAwPT09ZS52YWx1ZS5wcm9wZXJ0eSxsPSFzLHU9ImFycmF5Ij09PVByKGUudmFsdWUuc3RvcHMpJiYiYXJyYXkiPT09UHIoZS52YWx1ZS5zdG9wc1swXSkmJiJvYmplY3QiPT09UHIoZS52YWx1ZS5zdG9wc1swXVswXSksYz1hbih7a2V5OmUua2V5LHZhbHVlOmUudmFsdWUsdmFsdWVTcGVjOmUuc3R5bGVTcGVjLmZ1bmN0aW9uLHN0eWxlOmUuc3R5bGUsc3R5bGVTcGVjOmUuc3R5bGVTcGVjLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOntzdG9wczpwLGRlZmF1bHQ6Zn19KTtyZXR1cm4iaWRlbnRpdHkiPT09aSYmcyYmYy5wdXNoKG5ldyBlbihlLmtleSxlLnZhbHVlLCdtaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5ICJwcm9wZXJ0eSInKSksImlkZW50aXR5Ij09PWl8fGUudmFsdWUuc3RvcHN8fGMucHVzaChuZXcgZW4oZS5rZXksZS52YWx1ZSwnbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSAic3RvcHMiJykpLCJleHBvbmVudGlhbCI9PT1pJiZlLnZhbHVlU3BlYy5leHByZXNzaW9uJiYhRHIoZS52YWx1ZVNwZWMpJiZjLnB1c2gobmV3IGVuKGUua2V5LGUudmFsdWUsImV4cG9uZW50aWFsIGZ1bmN0aW9ucyBub3Qgc3VwcG9ydGVkIikpLGUuc3R5bGVTcGVjLiR2ZXJzaW9uPj04JiYobCYmIU5yKGUudmFsdWVTcGVjKT9jLnB1c2gobmV3IGVuKGUua2V5LGUudmFsdWUsInByb3BlcnR5IGZ1bmN0aW9ucyBub3Qgc3VwcG9ydGVkIikpOnMmJiFScihlLnZhbHVlU3BlYykmJmMucHVzaChuZXcgZW4oZS5rZXksZS52YWx1ZSwiem9vbSBmdW5jdGlvbnMgbm90IHN1cHBvcnRlZCIpKSksImNhdGVnb3JpY2FsIiE9PWkmJiF1fHx2b2lkIDAhPT1lLnZhbHVlLnByb3BlcnR5fHxjLnB1c2gobmV3IGVuKGUua2V5LGUudmFsdWUsJyJwcm9wZXJ0eSIgcHJvcGVydHkgaXMgcmVxdWlyZWQnKSksYztmdW5jdGlvbiBwKGUpe2lmKCJpZGVudGl0eSI9PT1pKXJldHVybltuZXcgZW4oZS5rZXksZS52YWx1ZSwnaWRlbnRpdHkgZnVuY3Rpb24gbWF5IG5vdCBoYXZlIGEgInN0b3BzIiBwcm9wZXJ0eScpXTt2YXIgdD1bXSxyPWUudmFsdWU7cmV0dXJuIHQ9dC5jb25jYXQoc24oe2tleTplLmtleSx2YWx1ZTpyLHZhbHVlU3BlYzplLnZhbHVlU3BlYyxzdHlsZTplLnN0eWxlLHN0eWxlU3BlYzplLnN0eWxlU3BlYyxhcnJheUVsZW1lbnRWYWxpZGF0b3I6ZH0pKSwiYXJyYXkiPT09UHIocikmJjA9PT1yLmxlbmd0aCYmdC5wdXNoKG5ldyBlbihlLmtleSxyLCJhcnJheSBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIHN0b3AiKSksdH1mdW5jdGlvbiBkKGUpe3ZhciB0PVtdLGk9ZS52YWx1ZSxzPWUua2V5O2lmKCJhcnJheSIhPT1QcihpKSlyZXR1cm5bbmV3IGVuKHMsaSwiYXJyYXkgZXhwZWN0ZWQsICIrUHIoaSkrIiBmb3VuZCIpXTtpZigyIT09aS5sZW5ndGgpcmV0dXJuW25ldyBlbihzLGksImFycmF5IGxlbmd0aCAyIGV4cGVjdGVkLCBsZW5ndGggIitpLmxlbmd0aCsiIGZvdW5kIildO2lmKHUpe2lmKCJvYmplY3QiIT09UHIoaVswXSkpcmV0dXJuW25ldyBlbihzLGksIm9iamVjdCBleHBlY3RlZCwgIitQcihpWzBdKSsiIGZvdW5kIildO2lmKHZvaWQgMD09PWlbMF0uem9vbSlyZXR1cm5bbmV3IGVuKHMsaSwib2JqZWN0IHN0b3Aga2V5IG11c3QgaGF2ZSB6b29tIildO2lmKHZvaWQgMD09PWlbMF0udmFsdWUpcmV0dXJuW25ldyBlbihzLGksIm9iamVjdCBzdG9wIGtleSBtdXN0IGhhdmUgdmFsdWUiKV07aWYobyYmbz5vbihpWzBdLnpvb20pKXJldHVybltuZXcgZW4ocyxpWzBdLnpvb20sInN0b3Agem9vbSB2YWx1ZXMgbXVzdCBhcHBlYXIgaW4gYXNjZW5kaW5nIG9yZGVyIildO29uKGlbMF0uem9vbSkhPT1vJiYobz1vbihpWzBdLnpvb20pLHI9dm9pZCAwLGE9e30pLHQ9dC5jb25jYXQoYW4oe2tleTpzKyJbMF0iLHZhbHVlOmlbMF0sdmFsdWVTcGVjOnt6b29tOnt9fSxzdHlsZTplLnN0eWxlLHN0eWxlU3BlYzplLnN0eWxlU3BlYyxvYmplY3RFbGVtZW50VmFsaWRhdG9yczp7em9vbTpsbix2YWx1ZTpofX0pKX1lbHNlIHQ9dC5jb25jYXQoaCh7a2V5OnMrIlswXSIsdmFsdWU6aVswXSx2YWx1ZVNwZWM6e30sc3R5bGU6ZS5zdHlsZSxzdHlsZVNwZWM6ZS5zdHlsZVNwZWN9LGkpKTtyZXR1cm4gWnIobm4oaVsxXSkpP3QuY29uY2F0KFtuZXcgZW4ocysiWzFdIixpWzFdLCJleHByZXNzaW9ucyBhcmUgbm90IGFsbG93ZWQgaW4gZnVuY3Rpb24gc3RvcHMuIildKTp0LmNvbmNhdChBbih7a2V5OnMrIlsxXSIsdmFsdWU6aVsxXSx2YWx1ZVNwZWM6bixzdHlsZTplLnN0eWxlLHN0eWxlU3BlYzplLnN0eWxlU3BlY30pKX1mdW5jdGlvbiBoKGUsbyl7dmFyIHM9UHIoZS52YWx1ZSksbD1vbihlLnZhbHVlKSx1PW51bGwhPT1lLnZhbHVlP2UudmFsdWU6bztpZih0KXtpZihzIT09dClyZXR1cm5bbmV3IGVuKGUua2V5LHUscysiIHN0b3AgZG9tYWluIHR5cGUgbXVzdCBtYXRjaCBwcmV2aW91cyBzdG9wIGRvbWFpbiB0eXBlICIrdCldfWVsc2UgdD1zO2lmKCJudW1iZXIiIT09cyYmInN0cmluZyIhPT1zJiYiYm9vbGVhbiIhPT1zKXJldHVybltuZXcgZW4oZS5rZXksdSwic3RvcCBkb21haW4gdmFsdWUgbXVzdCBiZSBhIG51bWJlciwgc3RyaW5nLCBvciBib29sZWFuIildO2lmKCJudW1iZXIiIT09cyYmImNhdGVnb3JpY2FsIiE9PWkpe3ZhciBjPSJudW1iZXIgZXhwZWN0ZWQsICIrcysiIGZvdW5kIjtyZXR1cm4gTnIobikmJnZvaWQgMD09PWkmJihjKz0nXG5JZiB5b3UgaW50ZW5kZWQgdG8gdXNlIGEgY2F0ZWdvcmljYWwgZnVuY3Rpb24sIHNwZWNpZnkgYCJ0eXBlIjogImNhdGVnb3JpY2FsImAuJyksW25ldyBlbihlLmtleSx1LGMpXX1yZXR1cm4iY2F0ZWdvcmljYWwiIT09aXx8Im51bWJlciIhPT1zfHxpc0Zpbml0ZShsKSYmTWF0aC5mbG9vcihsKT09PWw/ImNhdGVnb3JpY2FsIiE9PWkmJiJudW1iZXIiPT09cyYmdm9pZCAwIT09ciYmbDxyP1tuZXcgZW4oZS5rZXksdSwic3RvcCBkb21haW4gdmFsdWVzIG11c3QgYXBwZWFyIGluIGFzY2VuZGluZyBvcmRlciIpXToocj1sLCJjYXRlZ29yaWNhbCI9PT1pJiZsIGluIGE/W25ldyBlbihlLmtleSx1LCJzdG9wIGRvbWFpbiB2YWx1ZXMgbXVzdCBiZSB1bmlxdWUiKV06KGFbbF09ITAsW10pKTpbbmV3IGVuKGUua2V5LHUsImludGVnZXIgZXhwZWN0ZWQsIGZvdW5kICIrbCldfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIEFuKHtrZXk6ZS5rZXksdmFsdWU6ZS52YWx1ZSx2YWx1ZVNwZWM6bixzdHlsZTplLnN0eWxlLHN0eWxlU3BlYzplLnN0eWxlU3BlY30pfX1mdW5jdGlvbiBjbihlKXt2YXIgdD0oInByb3BlcnR5Ij09PWUuZXhwcmVzc2lvbkNvbnRleHQ/UXI6WHIpKG5uKGUudmFsdWUpLGUudmFsdWVTcGVjKTtpZigiZXJyb3IiPT09dC5yZXN1bHQpcmV0dXJuIHQudmFsdWUubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGVuKCIiK2Uua2V5K3Qua2V5LGUudmFsdWUsdC5tZXNzYWdlKX0pKTt2YXIgcj10LnZhbHVlLmV4cHJlc3Npb258fHQudmFsdWUuX3N0eWxlRXhwcmVzc2lvbi5leHByZXNzaW9uO2lmKCJwcm9wZXJ0eSI9PT1lLmV4cHJlc3Npb25Db250ZXh0JiYidGV4dC1mb250Ij09PWUucHJvcGVydHlLZXkmJiFyLm91dHB1dERlZmluZWQoKSlyZXR1cm5bbmV3IGVuKGUua2V5LGUudmFsdWUsJ0ludmFsaWQgZGF0YSBleHByZXNzaW9uIGZvciAiJytlLnByb3BlcnR5S2V5KyciLiBPdXRwdXQgdmFsdWVzIG11c3QgYmUgY29udGFpbmVkIGFzIGxpdGVyYWxzIHdpdGhpbiB0aGUgZXhwcmVzc2lvbi4nKV07aWYoInByb3BlcnR5Ij09PWUuZXhwcmVzc2lvbkNvbnRleHQmJiJsYXlvdXQiPT09ZS5wcm9wZXJ0eVR5cGUmJiFodChyKSlyZXR1cm5bbmV3IGVuKGUua2V5LGUudmFsdWUsJyJmZWF0dXJlLXN0YXRlIiBkYXRhIGV4cHJlc3Npb25zIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbGF5b3V0IHByb3BlcnRpZXMuJyldO2lmKCJmaWx0ZXIiPT09ZS5leHByZXNzaW9uQ29udGV4dCYmIWh0KHIpKXJldHVybltuZXcgZW4oZS5rZXksZS52YWx1ZSwnImZlYXR1cmUtc3RhdGUiIGRhdGEgZXhwcmVzc2lvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBmaWx0ZXJzLicpXTtpZihlLmV4cHJlc3Npb25Db250ZXh0JiYwPT09ZS5leHByZXNzaW9uQ29udGV4dC5pbmRleE9mKCJjbHVzdGVyIikpe2lmKCFmdChyLFsiem9vbSIsImZlYXR1cmUtc3RhdGUiXSkpcmV0dXJuW25ldyBlbihlLmtleSxlLnZhbHVlLCciem9vbSIgYW5kICJmZWF0dXJlLXN0YXRlIiBleHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIGNsdXN0ZXIgcHJvcGVydGllcy4nKV07aWYoImNsdXN0ZXItaW5pdGlhbCI9PT1lLmV4cHJlc3Npb25Db250ZXh0JiYhZHQocikpcmV0dXJuW25ldyBlbihlLmtleSxlLnZhbHVlLCJGZWF0dXJlIGRhdGEgZXhwcmVzc2lvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBpbml0aWFsIGV4cHJlc3Npb24gcGFydCBvZiBjbHVzdGVyIHByb3BlcnRpZXMuIildfXJldHVybltdfWZ1bmN0aW9uIHBuKGUpe3ZhciB0PWUudmFsdWUscj1lLmtleSxvPVByKHQpO3JldHVybiJib29sZWFuIiE9PW8/W25ldyBlbihyLHQsImJvb2xlYW4gZXhwZWN0ZWQsICIrbysiIGZvdW5kIildOltdfWZ1bmN0aW9uIGRuKGUpe3ZhciB0PWUua2V5LHI9ZS52YWx1ZSxvPVByKHIpO3JldHVybiJzdHJpbmciIT09bz9bbmV3IGVuKHQsciwiY29sb3IgZXhwZWN0ZWQsICIrbysiIGZvdW5kIildOm51bGw9PT12ZShyKT9bbmV3IGVuKHQsciwnY29sb3IgZXhwZWN0ZWQsICInK3IrJyIgZm91bmQnKV06W119ZnVuY3Rpb24gaG4oZSl7dmFyIHQ9ZS5rZXkscj1lLnZhbHVlLG89ZS52YWx1ZVNwZWMsbj1bXTtyZXR1cm4gQXJyYXkuaXNBcnJheShvLnZhbHVlcyk/LTE9PT1vLnZhbHVlcy5pbmRleE9mKG9uKHIpKSYmbi5wdXNoKG5ldyBlbih0LHIsImV4cGVjdGVkIG9uZSBvZiBbIitvLnZhbHVlcy5qb2luKCIsICIpKyJdLCAiK0pTT04uc3RyaW5naWZ5KHIpKyIgZm91bmQiKSk6LTE9PT1PYmplY3Qua2V5cyhvLnZhbHVlcykuaW5kZXhPZihvbihyKSkmJm4ucHVzaChuZXcgZW4odCxyLCJleHBlY3RlZCBvbmUgb2YgWyIrT2JqZWN0LmtleXMoby52YWx1ZXMpLmpvaW4oIiwgIikrIl0sICIrSlNPTi5zdHJpbmdpZnkocikrIiBmb3VuZCIpKSxufWZ1bmN0aW9uIGZuKGUpe3JldHVybiBibyhubihlLnZhbHVlKSk/Y24oSyh7fSxlLHtleHByZXNzaW9uQ29udGV4dDoiZmlsdGVyIix2YWx1ZVNwZWM6e3ZhbHVlOiJib29sZWFuIn19KSk6eW4oZSl9ZnVuY3Rpb24geW4oZSl7dmFyIHQ9ZS52YWx1ZSxyPWUua2V5O2lmKCJhcnJheSIhPT1Qcih0KSlyZXR1cm5bbmV3IGVuKHIsdCwiYXJyYXkgZXhwZWN0ZWQsICIrUHIodCkrIiBmb3VuZCIpXTt2YXIgbyxuPWUuc3R5bGVTcGVjLGk9W107aWYodC5sZW5ndGg8MSlyZXR1cm5bbmV3IGVuKHIsdCwiZmlsdGVyIGFycmF5IG11c3QgaGF2ZSBhdCBsZWFzdCAxIGVsZW1lbnQiKV07c3dpdGNoKGk9aS5jb25jYXQoaG4oe2tleTpyKyJbMF0iLHZhbHVlOnRbMF0sdmFsdWVTcGVjOm4uZmlsdGVyX29wZXJhdG9yLHN0eWxlOmUuc3R5bGUsc3R5bGVTcGVjOmUuc3R5bGVTcGVjfSkpLG9uKHRbMF0pKXtjYXNlIjwiOmNhc2UiPD0iOmNhc2UiPiI6Y2FzZSI+PSI6dC5sZW5ndGg+PTImJiIkdHlwZSI9PT1vbih0WzFdKSYmaS5wdXNoKG5ldyBlbihyLHQsJyIkdHlwZSIgY2Fubm90IGJlIHVzZSB3aXRoIG9wZXJhdG9yICInK3RbMF0rJyInKSk7Y2FzZSI9PSI6Y2FzZSIhPSI6MyE9PXQubGVuZ3RoJiZpLnB1c2gobmV3IGVuKHIsdCwnZmlsdGVyIGFycmF5IGZvciBvcGVyYXRvciAiJyt0WzBdKyciIG11c3QgaGF2ZSAzIGVsZW1lbnRzJykpO2Nhc2UiaW4iOmNhc2UiIWluIjp0Lmxlbmd0aD49MiYmInN0cmluZyIhPT0obz1Qcih0WzFdKSkmJmkucHVzaChuZXcgZW4ocisiWzFdIix0WzFdLCJzdHJpbmcgZXhwZWN0ZWQsICIrbysiIGZvdW5kIikpO2Zvcih2YXIgYT0yO2E8dC5sZW5ndGg7YSsrKW89UHIodFthXSksIiR0eXBlIj09PW9uKHRbMV0pP2k9aS5jb25jYXQoaG4oe2tleTpyKyJbIithKyJdIix2YWx1ZTp0W2FdLHZhbHVlU3BlYzpuLmdlb21ldHJ5X3R5cGUsc3R5bGU6ZS5zdHlsZSxzdHlsZVNwZWM6ZS5zdHlsZVNwZWN9KSk6InN0cmluZyIhPT1vJiYibnVtYmVyIiE9PW8mJiJib29sZWFuIiE9PW8mJmkucHVzaChuZXcgZW4ocisiWyIrYSsiXSIsdFthXSwic3RyaW5nLCBudW1iZXIsIG9yIGJvb2xlYW4gZXhwZWN0ZWQsICIrbysiIGZvdW5kIikpO2JyZWFrO2Nhc2UiYW55IjpjYXNlImFsbCI6Y2FzZSJub25lIjpmb3IodmFyIHM9MTtzPHQubGVuZ3RoO3MrKylpPWkuY29uY2F0KHluKHtrZXk6cisiWyIrcysiXSIsdmFsdWU6dFtzXSxzdHlsZTplLnN0eWxlLHN0eWxlU3BlYzplLnN0eWxlU3BlY30pKTticmVhaztjYXNlImhhcyI6Y2FzZSIhaGFzIjpvPVByKHRbMV0pLDIhPT10Lmxlbmd0aD9pLnB1c2gobmV3IGVuKHIsdCwnZmlsdGVyIGFycmF5IGZvciAiJyt0WzBdKyciIG9wZXJhdG9yIG11c3QgaGF2ZSAyIGVsZW1lbnRzJykpOiJzdHJpbmciIT09byYmaS5wdXNoKG5ldyBlbihyKyJbMV0iLHRbMV0sInN0cmluZyBleHBlY3RlZCwgIitvKyIgZm91bmQiKSk7YnJlYWs7Y2FzZSJ3aXRoaW4iOm89UHIodFsxXSksMiE9PXQubGVuZ3RoP2kucHVzaChuZXcgZW4ocix0LCdmaWx0ZXIgYXJyYXkgZm9yICInK3RbMF0rJyIgb3BlcmF0b3IgbXVzdCBoYXZlIDIgZWxlbWVudHMnKSk6Im9iamVjdCIhPT1vJiZpLnB1c2gobmV3IGVuKHIrIlsxXSIsdFsxXSwib2JqZWN0IGV4cGVjdGVkLCAiK28rIiBmb3VuZCIpKX1yZXR1cm4gaX1mdW5jdGlvbiBtbihlLHQpe3ZhciByPWUua2V5LG89ZS5zdHlsZSxuPWUuc3R5bGVTcGVjLGk9ZS52YWx1ZSxhPWUub2JqZWN0S2V5LHM9blt0KyJfIitlLmxheWVyVHlwZV07aWYoIXMpcmV0dXJuW107dmFyIGw9YS5tYXRjaCgvXiguKiktdHJhbnNpdGlvbiQvKTtpZigicGFpbnQiPT09dCYmbCYmc1tsWzFdXSYmc1tsWzFdXS50cmFuc2l0aW9uKXJldHVybiBBbih7a2V5OnIsdmFsdWU6aSx2YWx1ZVNwZWM6bi50cmFuc2l0aW9uLHN0eWxlOm8sc3R5bGVTcGVjOm59KTt2YXIgdSxjPWUudmFsdWVTcGVjfHxzW2FdO2lmKCFjKXJldHVybltuZXcgZW4ocixpLCd1bmtub3duIHByb3BlcnR5ICInK2ErJyInKV07aWYoInN0cmluZyI9PT1QcihpKSYmTnIoYykmJiFjLnRva2VucyYmKHU9L157KFtefV0rKX0kLy5leGVjKGkpKSlyZXR1cm5bbmV3IGVuKHIsaSwnIicrYSsnIiBkb2VzIG5vdCBzdXBwb3J0IGludGVycG9sYXRpb24gc3ludGF4XG5Vc2UgYW4gaWRlbnRpdHkgcHJvcGVydHkgZnVuY3Rpb24gaW5zdGVhZDogYHsgInR5cGUiOiAiaWRlbnRpdHkiLCAicHJvcGVydHkiOiAnK0pTT04uc3RyaW5naWZ5KHVbMV0pKyIgfWAuIildO3ZhciBwPVtdO3JldHVybiJzeW1ib2wiPT09ZS5sYXllclR5cGUmJigidGV4dC1maWVsZCI9PT1hJiZvJiYhby5nbHlwaHMmJnAucHVzaChuZXcgZW4ocixpLCd1c2Ugb2YgInRleHQtZmllbGQiIHJlcXVpcmVzIGEgc3R5bGUgImdseXBocyIgcHJvcGVydHknKSksInRleHQtZm9udCI9PT1hJiZGcihubihpKSkmJiJpZGVudGl0eSI9PT1vbihpLnR5cGUpJiZwLnB1c2gobmV3IGVuKHIsaSwnInRleHQtZm9udCIgZG9lcyBub3Qgc3VwcG9ydCBpZGVudGl0eSBmdW5jdGlvbnMnKSkpLHAuY29uY2F0KEFuKHtrZXk6ZS5rZXksdmFsdWU6aSx2YWx1ZVNwZWM6YyxzdHlsZTpvLHN0eWxlU3BlYzpuLGV4cHJlc3Npb25Db250ZXh0OiJwcm9wZXJ0eSIscHJvcGVydHlUeXBlOnQscHJvcGVydHlLZXk6YX0pKX1mdW5jdGlvbiBnbihlKXtyZXR1cm4gbW4oZSwicGFpbnQiKX1mdW5jdGlvbiB2bihlKXtyZXR1cm4gbW4oZSwibGF5b3V0Iil9ZnVuY3Rpb24gYm4oZSl7dmFyIHQ9W10scj1lLnZhbHVlLG89ZS5rZXksbj1lLnN0eWxlLGk9ZS5zdHlsZVNwZWM7ci50eXBlfHxyLnJlZnx8dC5wdXNoKG5ldyBlbihvLHIsJ2VpdGhlciAidHlwZSIgb3IgInJlZiIgaXMgcmVxdWlyZWQnKSk7dmFyIGEscz1vbihyLnR5cGUpLGw9b24oci5yZWYpO2lmKHIuaWQpZm9yKHZhciB1PW9uKHIuaWQpLGM9MDtjPGUuYXJyYXlJbmRleDtjKyspe3ZhciBwPW4ubGF5ZXJzW2NdO29uKHAuaWQpPT09dSYmdC5wdXNoKG5ldyBlbihvLHIuaWQsJ2R1cGxpY2F0ZSBsYXllciBpZCAiJytyLmlkKyciLCBwcmV2aW91c2x5IHVzZWQgYXQgbGluZSAnK3AuaWQuX19saW5lX18pKX1pZigicmVmImluIHIpWyJ0eXBlIiwic291cmNlIiwic291cmNlLWxheWVyIiwiZmlsdGVyIiwibGF5b3V0Il0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSBpbiByJiZ0LnB1c2gobmV3IGVuKG8scltlXSwnIicrZSsnIiBpcyBwcm9oaWJpdGVkIGZvciByZWYgbGF5ZXJzJykpfSkpLG4ubGF5ZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUpe29uKGUuaWQpPT09bCYmKGE9ZSl9KSksYT9hLnJlZj90LnB1c2gobmV3IGVuKG8sci5yZWYsInJlZiBjYW5ub3QgcmVmZXJlbmNlIGFub3RoZXIgcmVmIGxheWVyIikpOnM9b24oYS50eXBlKTp0LnB1c2gobmV3IGVuKG8sci5yZWYsJ3JlZiBsYXllciAiJytsKyciIG5vdCBmb3VuZCcpKTtlbHNlIGlmKCJiYWNrZ3JvdW5kIiE9PXMpaWYoci5zb3VyY2Upe3ZhciBkPW4uc291cmNlcyYmbi5zb3VyY2VzW3Iuc291cmNlXSxoPWQmJm9uKGQudHlwZSk7ZD8idmVjdG9yIj09PWgmJiJyYXN0ZXIiPT09cz90LnB1c2gobmV3IGVuKG8sci5zb3VyY2UsJ2xheWVyICInK3IuaWQrJyIgcmVxdWlyZXMgYSByYXN0ZXIgc291cmNlJykpOiJyYXN0ZXIiPT09aCYmInJhc3RlciIhPT1zP3QucHVzaChuZXcgZW4obyxyLnNvdXJjZSwnbGF5ZXIgIicrci5pZCsnIiByZXF1aXJlcyBhIHZlY3RvciBzb3VyY2UnKSk6InZlY3RvciIhPT1ofHxyWyJzb3VyY2UtbGF5ZXIiXT8icmFzdGVyLWRlbSI9PT1oJiYiaGlsbHNoYWRlIiE9PXM/dC5wdXNoKG5ldyBlbihvLHIuc291cmNlLCJyYXN0ZXItZGVtIHNvdXJjZSBjYW4gb25seSBiZSB1c2VkIHdpdGggbGF5ZXIgdHlwZSAnaGlsbHNoYWRlJy4iKSk6ImxpbmUiIT09c3x8IXIucGFpbnR8fCFyLnBhaW50WyJsaW5lLWdyYWRpZW50Il18fCJnZW9qc29uIj09PWgmJmQubGluZU1ldHJpY3N8fHQucHVzaChuZXcgZW4obyxyLCdsYXllciAiJytyLmlkKyciIHNwZWNpZmllcyBhIGxpbmUtZ3JhZGllbnQsIHdoaWNoIHJlcXVpcmVzIGEgR2VvSlNPTiBzb3VyY2Ugd2l0aCBgbGluZU1ldHJpY3NgIGVuYWJsZWQuJykpOnQucHVzaChuZXcgZW4obyxyLCdsYXllciAiJytyLmlkKyciIG11c3Qgc3BlY2lmeSBhICJzb3VyY2UtbGF5ZXIiJykpOnQucHVzaChuZXcgZW4obyxyLnNvdXJjZSwnc291cmNlICInK3Iuc291cmNlKyciIG5vdCBmb3VuZCcpKX1lbHNlIHQucHVzaChuZXcgZW4obyxyLCdtaXNzaW5nIHJlcXVpcmVkIHByb3BlcnR5ICJzb3VyY2UiJykpO3JldHVybiB0PXQuY29uY2F0KGFuKHtrZXk6byx2YWx1ZTpyLHZhbHVlU3BlYzppLmxheWVyLHN0eWxlOmUuc3R5bGUsc3R5bGVTcGVjOmUuc3R5bGVTcGVjLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOnsiKiI6ZnVuY3Rpb24oKXtyZXR1cm5bXX0sdHlwZTpmdW5jdGlvbigpe3JldHVybiBBbih7a2V5Om8rIi50eXBlIix2YWx1ZTpyLnR5cGUsdmFsdWVTcGVjOmkubGF5ZXIudHlwZSxzdHlsZTplLnN0eWxlLHN0eWxlU3BlYzplLnN0eWxlU3BlYyxvYmplY3Q6cixvYmplY3RLZXk6InR5cGUifSl9LGZpbHRlcjpmbixsYXlvdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGFuKHtsYXllcjpyLGtleTplLmtleSx2YWx1ZTplLnZhbHVlLHN0eWxlOmUuc3R5bGUsc3R5bGVTcGVjOmUuc3R5bGVTcGVjLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOnsiKiI6ZnVuY3Rpb24oZSl7cmV0dXJuIHZuKEsoe2xheWVyVHlwZTpzfSxlKSl9fX0pfSxwYWludDpmdW5jdGlvbihlKXtyZXR1cm4gYW4oe2xheWVyOnIsa2V5OmUua2V5LHZhbHVlOmUudmFsdWUsc3R5bGU6ZS5zdHlsZSxzdHlsZVNwZWM6ZS5zdHlsZVNwZWMsb2JqZWN0RWxlbWVudFZhbGlkYXRvcnM6eyIqIjpmdW5jdGlvbihlKXtyZXR1cm4gZ24oSyh7bGF5ZXJUeXBlOnN9LGUpKX19fSl9fX0pKSx0fWZ1bmN0aW9uIHhuKGUpe3ZhciB0PWUudmFsdWUscj1lLmtleSxvPVByKHQpO3JldHVybiJzdHJpbmciIT09bz9bbmV3IGVuKHIsdCwic3RyaW5nIGV4cGVjdGVkLCAiK28rIiBmb3VuZCIpXTpbXX12YXIgd249e3Byb21vdGVJZDpqbn07ZnVuY3Rpb24ga24oZSl7dmFyIHQ9ZS52YWx1ZSxyPWUua2V5LG89ZS5zdHlsZVNwZWMsbj1lLnN0eWxlO2lmKCF0LnR5cGUpcmV0dXJuW25ldyBlbihyLHQsJyJ0eXBlIiBpcyByZXF1aXJlZCcpXTt2YXIgaSxhPW9uKHQudHlwZSk7c3dpdGNoKGEpe2Nhc2UidmVjdG9yIjpjYXNlInJhc3RlciI6Y2FzZSJyYXN0ZXItZGVtIjpyZXR1cm4gaT1hbih7a2V5OnIsdmFsdWU6dCx2YWx1ZVNwZWM6b1sic291cmNlXyIrYS5yZXBsYWNlKCItIiwiXyIpXSxzdHlsZTplLnN0eWxlLHN0eWxlU3BlYzpvLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOndufSk7Y2FzZSJnZW9qc29uIjppZihpPWFuKHtrZXk6cix2YWx1ZTp0LHZhbHVlU3BlYzpvLnNvdXJjZV9nZW9qc29uLHN0eWxlOm4sc3R5bGVTcGVjOm8sb2JqZWN0RWxlbWVudFZhbGlkYXRvcnM6d259KSx0LmNsdXN0ZXIpZm9yKHZhciBzIGluIHQuY2x1c3RlclByb3BlcnRpZXMpe3ZhciBsPXQuY2x1c3RlclByb3BlcnRpZXNbc10sdT1sWzBdLGM9bFsxXSxwPSJzdHJpbmciPT10eXBlb2YgdT9bdSxbImFjY3VtdWxhdGVkIl0sWyJnZXQiLHNdXTp1O2kucHVzaC5hcHBseShpLGNuKHtrZXk6cisiLiIrcysiLm1hcCIsdmFsdWU6YyxleHByZXNzaW9uQ29udGV4dDoiY2x1c3Rlci1tYXAifSkpLGkucHVzaC5hcHBseShpLGNuKHtrZXk6cisiLiIrcysiLnJlZHVjZSIsdmFsdWU6cCxleHByZXNzaW9uQ29udGV4dDoiY2x1c3Rlci1yZWR1Y2UifSkpfXJldHVybiBpO2Nhc2UidmlkZW8iOnJldHVybiBhbih7a2V5OnIsdmFsdWU6dCx2YWx1ZVNwZWM6by5zb3VyY2VfdmlkZW8sc3R5bGU6bixzdHlsZVNwZWM6b30pO2Nhc2UiaW1hZ2UiOnJldHVybiBhbih7a2V5OnIsdmFsdWU6dCx2YWx1ZVNwZWM6by5zb3VyY2VfaW1hZ2Usc3R5bGU6bixzdHlsZVNwZWM6b30pO2Nhc2UiY2FudmFzIjpyZXR1cm5bbmV3IGVuKHIsbnVsbCwiUGxlYXNlIHVzZSBydW50aW1lIEFQSXMgdG8gYWRkIGNhbnZhcyBzb3VyY2VzLCByYXRoZXIgdGhhbiBpbmNsdWRpbmcgdGhlbSBpbiBzdHlsZXNoZWV0cy4iLCJzb3VyY2UuY2FudmFzIildO2RlZmF1bHQ6cmV0dXJuIGhuKHtrZXk6cisiLnR5cGUiLHZhbHVlOnQudHlwZSx2YWx1ZVNwZWM6e3ZhbHVlczpbInZlY3RvciIsInJhc3RlciIsInJhc3Rlci1kZW0iLCJnZW9qc29uIiwidmlkZW8iLCJpbWFnZSJdfSxzdHlsZTpuLHN0eWxlU3BlYzpvfSl9fWZ1bmN0aW9uIGpuKGUpe3ZhciB0PWUua2V5LHI9ZS52YWx1ZTtpZigic3RyaW5nIj09PVByKHIpKXJldHVybiB4bih7a2V5OnQsdmFsdWU6cn0pO3ZhciBvPVtdO2Zvcih2YXIgbiBpbiByKW8ucHVzaC5hcHBseShvLHhuKHtrZXk6dCsiLiIrbix2YWx1ZTpyW25dfSkpO3JldHVybiBvfWZ1bmN0aW9uIHpuKGUpe3ZhciB0PWUudmFsdWUscj1lLnN0eWxlU3BlYyxvPXIubGlnaHQsbj1lLnN0eWxlLGk9W10sYT1Qcih0KTtpZih2b2lkIDA9PT10KXJldHVybiBpO2lmKCJvYmplY3QiIT09YSlyZXR1cm4gaT1pLmNvbmNhdChbbmV3IGVuKCJsaWdodCIsdCwib2JqZWN0IGV4cGVjdGVkLCAiK2ErIiBmb3VuZCIpXSk7Zm9yKHZhciBzIGluIHQpe3ZhciBsPXMubWF0Y2goL14oLiopLXRyYW5zaXRpb24kLyk7aT1sJiZvW2xbMV1dJiZvW2xbMV1dLnRyYW5zaXRpb24/aS5jb25jYXQoQW4oe2tleTpzLHZhbHVlOnRbc10sdmFsdWVTcGVjOnIudHJhbnNpdGlvbixzdHlsZTpuLHN0eWxlU3BlYzpyfSkpOm9bc10/aS5jb25jYXQoQW4oe2tleTpzLHZhbHVlOnRbc10sdmFsdWVTcGVjOm9bc10sc3R5bGU6bixzdHlsZVNwZWM6cn0pKTppLmNvbmNhdChbbmV3IGVuKHMsdFtzXSwndW5rbm93biBwcm9wZXJ0eSAiJytzKyciJyldKX1yZXR1cm4gaX1mdW5jdGlvbiBUbihlKXtyZXR1cm4gMD09PXhuKGUpLmxlbmd0aD9bXTpjbihlKX1mdW5jdGlvbiBfbihlKXtyZXR1cm4gMD09PXhuKGUpLmxlbmd0aD9bXTpjbihlKX12YXIgU249eyIqIjpmdW5jdGlvbigpe3JldHVybltdfSxhcnJheTpzbixib29sZWFuOnBuLG51bWJlcjpsbixjb2xvcjpkbixjb25zdGFudHM6cm4sZW51bTpobixmaWx0ZXI6Zm4sZnVuY3Rpb246dW4sbGF5ZXI6Ym4sb2JqZWN0OmFuLHNvdXJjZTprbixsaWdodDp6bixzdHJpbmc6eG4sZm9ybWF0dGVkOlRuLHJlc29sdmVkSW1hZ2U6X259O2Z1bmN0aW9uIEFuKGUpe3ZhciB0PWUudmFsdWUscj1lLnZhbHVlU3BlYyxvPWUuc3R5bGVTcGVjO3JldHVybiByLmV4cHJlc3Npb24mJkZyKG9uKHQpKT91bihlKTpyLmV4cHJlc3Npb24mJlpyKG5uKHQpKT9jbihlKTpyLnR5cGUmJlNuW3IudHlwZV0/U25bci50eXBlXShlKTphbihLKHt9LGUse3ZhbHVlU3BlYzpyLnR5cGU/b1tyLnR5cGVdOnJ9KSl9ZnVuY3Rpb24gSW4oZSl7dmFyIHQ9ZS52YWx1ZSxyPWUua2V5LG89eG4oZSk7cmV0dXJuIG8ubGVuZ3RofHwoLTE9PT10LmluZGV4T2YoIntmb250c3RhY2t9IikmJm8ucHVzaChuZXcgZW4ocix0LCciZ2x5cGhzIiB1cmwgbXVzdCBpbmNsdWRlIGEgIntmb250c3RhY2t9IiB0b2tlbicpKSwtMT09PXQuaW5kZXhPZigie3JhbmdlfSIpJiZvLnB1c2gobmV3IGVuKHIsdCwnImdseXBocyIgdXJsIG11c3QgaW5jbHVkZSBhICJ7cmFuZ2V9IiB0b2tlbicpKSksb31mdW5jdGlvbiBDbihlLHIpe3ZvaWQgMD09PXImJihyPXQpO3ZhciBvPVtdO3JldHVybiBvPW8uY29uY2F0KEFuKHtrZXk6IiIsdmFsdWU6ZSx2YWx1ZVNwZWM6ci4kcm9vdCxzdHlsZVNwZWM6cixzdHlsZTplLG9iamVjdEVsZW1lbnRWYWxpZGF0b3JzOntnbHlwaHM6SW4sIioiOmZ1bmN0aW9uKCl7cmV0dXJuW119fX0pKSxlLmNvbnN0YW50cyYmKG89by5jb25jYXQocm4oe2tleToiY29uc3RhbnRzIix2YWx1ZTplLmNvbnN0YW50cyxzdHlsZTplLHN0eWxlU3BlYzpyfSkpKSxPbihvKX1mdW5jdGlvbiBPbihlKXtyZXR1cm5bXS5jb25jYXQoZSkuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5saW5lLXQubGluZX0pKX1mdW5jdGlvbiBFbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10scj1hcmd1bWVudHMubGVuZ3RoO3ItLTspdFtyXT1hcmd1bWVudHNbcl07cmV0dXJuIE9uKGUuYXBwbHkodGhpcyx0KSl9fUNuLnNvdXJjZT1FbihrbiksQ24ubGlnaHQ9RW4oem4pLENuLmxheWVyPUVuKGJuKSxDbi5maWx0ZXI9RW4oZm4pLENuLnBhaW50UHJvcGVydHk9RW4oZ24pLENuLmxheW91dFByb3BlcnR5PUVuKHZuKTt2YXIgcW49dSgoZnVuY3Rpb24oZSx0KXt2YXIgcj1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUsdCxyLG8pe2ZvcihyPXJ8fHt9LG89ZS5sZW5ndGg7by0tO3JbZVtvXV09dCk7cmV0dXJuIHJ9LHQ9WzEsMTJdLHI9WzEsMTNdLG89WzEsOV0sbj1bMSwxMF0saT1bMSwxMV0sYT1bMSwxNF0scz1bMSwxNV0sbD1bMTQsMTgsMjIsMjRdLHU9WzE4LDIyXSxjPVsyMiwyNF0scD17dHJhY2U6ZnVuY3Rpb24oKXt9LHl5Ont9LHN5bWJvbHNfOntlcnJvcjoyLEpTT05TdHJpbmc6MyxTVFJJTkc6NCxKU09OTnVtYmVyOjUsTlVNQkVSOjYsSlNPTk51bGxMaXRlcmFsOjcsTlVMTDo4LEpTT05Cb29sZWFuTGl0ZXJhbDo5LFRSVUU6MTAsRkFMU0U6MTEsSlNPTlRleHQ6MTIsSlNPTlZhbHVlOjEzLEVPRjoxNCxKU09OT2JqZWN0OjE1LEpTT05BcnJheToxNiwieyI6MTcsIn0iOjE4LEpTT05NZW1iZXJMaXN0OjE5LEpTT05NZW1iZXI6MjAsIjoiOjIxLCIsIjoyMiwiWyI6MjMsIl0iOjI0LEpTT05FbGVtZW50TGlzdDoyNSwkYWNjZXB0OjAsJGVuZDoxfSx0ZXJtaW5hbHNfOnsyOiJlcnJvciIsNDoiU1RSSU5HIiw2OiJOVU1CRVIiLDg6Ik5VTEwiLDEwOiJUUlVFIiwxMToiRkFMU0UiLDE0OiJFT0YiLDE3OiJ7IiwxODoifSIsMjE6IjoiLDIyOiIsIiwyMzoiWyIsMjQ6Il0ifSxwcm9kdWN0aW9uc186WzAsWzMsMV0sWzUsMV0sWzcsMV0sWzksMV0sWzksMV0sWzEyLDJdLFsxMywxXSxbMTMsMV0sWzEzLDFdLFsxMywxXSxbMTMsMV0sWzEzLDFdLFsxNSwyXSxbMTUsM10sWzIwLDNdLFsxOSwxXSxbMTksM10sWzE2LDJdLFsxNiwzXSxbMjUsMV0sWzI1LDNdXSxwZXJmb3JtQWN0aW9uOmZ1bmN0aW9uKGUsdCxyLG8sbixpLGEpe3ZhciBzPWkubGVuZ3RoLTE7c3dpdGNoKG4pe2Nhc2UgMTp0aGlzLiQ9bmV3IFN0cmluZyhlLnJlcGxhY2UoL1xcKFxcfCIpL2csIiQxIikucmVwbGFjZSgvXFxuL2csIlxuIikucmVwbGFjZSgvXFxyL2csIlxyIikucmVwbGFjZSgvXFx0L2csIlx0IikucmVwbGFjZSgvXFx2L2csIlx2IikucmVwbGFjZSgvXFxmL2csIlxmIikucmVwbGFjZSgvXFxiL2csIlxiIikpLHRoaXMuJC5fX2xpbmVfXz10aGlzLl8kLmZpcnN0X2xpbmU7YnJlYWs7Y2FzZSAyOnRoaXMuJD1uZXcgTnVtYmVyKGUpLHRoaXMuJC5fX2xpbmVfXz10aGlzLl8kLmZpcnN0X2xpbmU7YnJlYWs7Y2FzZSAzOnRoaXMuJD1udWxsO2JyZWFrO2Nhc2UgNDp0aGlzLiQ9bmV3IEJvb2xlYW4oITApLHRoaXMuJC5fX2xpbmVfXz10aGlzLl8kLmZpcnN0X2xpbmU7YnJlYWs7Y2FzZSA1OnRoaXMuJD1uZXcgQm9vbGVhbighMSksdGhpcy4kLl9fbGluZV9fPXRoaXMuXyQuZmlyc3RfbGluZTticmVhaztjYXNlIDY6cmV0dXJuIHRoaXMuJD1pW3MtMV07Y2FzZSAxMzp0aGlzLiQ9e30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuJCwiX19saW5lX18iLHt2YWx1ZTp0aGlzLl8kLmZpcnN0X2xpbmUsZW51bWVyYWJsZTohMX0pO2JyZWFrO2Nhc2UgMTQ6Y2FzZSAxOTp0aGlzLiQ9aVtzLTFdLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLiQsIl9fbGluZV9fIix7dmFsdWU6dGhpcy5fJC5maXJzdF9saW5lLGVudW1lcmFibGU6ITF9KTticmVhaztjYXNlIDE1OnRoaXMuJD1baVtzLTJdLGlbc11dO2JyZWFrO2Nhc2UgMTY6dGhpcy4kPXt9LHRoaXMuJFtpW3NdWzBdXT1pW3NdWzFdO2JyZWFrO2Nhc2UgMTc6dGhpcy4kPWlbcy0yXSxpW3MtMl1baVtzXVswXV09aVtzXVsxXTticmVhaztjYXNlIDE4OnRoaXMuJD1bXSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy4kLCJfX2xpbmVfXyIse3ZhbHVlOnRoaXMuXyQuZmlyc3RfbGluZSxlbnVtZXJhYmxlOiExfSk7YnJlYWs7Y2FzZSAyMDp0aGlzLiQ9W2lbc11dO2JyZWFrO2Nhc2UgMjE6dGhpcy4kPWlbcy0yXSxpW3MtMl0ucHVzaChpW3NdKX19LHRhYmxlOlt7Mzo1LDQ6dCw1OjYsNjpyLDc6Myw4Om8sOTo0LDEwOm4sMTE6aSwxMjoxLDEzOjIsMTU6NywxNjo4LDE3OmEsMjM6c30sezE6WzNdfSx7MTQ6WzEsMTZdfSxlKGwsWzIsN10pLGUobCxbMiw4XSksZShsLFsyLDldKSxlKGwsWzIsMTBdKSxlKGwsWzIsMTFdKSxlKGwsWzIsMTJdKSxlKGwsWzIsM10pLGUobCxbMiw0XSksZShsLFsyLDVdKSxlKFsxNCwxOCwyMSwyMiwyNF0sWzIsMV0pLGUobCxbMiwyXSksezM6MjAsNDp0LDE4OlsxLDE3XSwxOToxOCwyMDoxOX0sezM6NSw0OnQsNTo2LDY6ciw3OjMsODpvLDk6NCwxMDpuLDExOmksMTM6MjMsMTU6NywxNjo4LDE3OmEsMjM6cywyNDpbMSwyMV0sMjU6MjJ9LHsxOlsyLDZdfSxlKGwsWzIsMTNdKSx7MTg6WzEsMjRdLDIyOlsxLDI1XX0sZSh1LFsyLDE2XSksezIxOlsxLDI2XX0sZShsLFsyLDE4XSksezIyOlsxLDI4XSwyNDpbMSwyN119LGUoYyxbMiwyMF0pLGUobCxbMiwxNF0pLHszOjIwLDQ6dCwyMDoyOX0sezM6NSw0OnQsNTo2LDY6ciw3OjMsODpvLDk6NCwxMDpuLDExOmksMTM6MzAsMTU6NywxNjo4LDE3OmEsMjM6c30sZShsLFsyLDE5XSksezM6NSw0OnQsNTo2LDY6ciw3OjMsODpvLDk6NCwxMDpuLDExOmksMTM6MzEsMTU6NywxNjo4LDE3OmEsMjM6c30sZSh1LFsyLDE3XSksZSh1LFsyLDE1XSksZShjLFsyLDIxXSldLGRlZmF1bHRBY3Rpb25zOnsxNjpbMiw2XX0scGFyc2VFcnJvcjpmdW5jdGlvbihlLHQpe2lmKCF0LnJlY292ZXJhYmxlKXRocm93IG5ldyBFcnJvcihlKTt0aGlzLnRyYWNlKGUpfSxwYXJzZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9WzBdLG89W251bGxdLG49W10saT10aGlzLnRhYmxlLGE9IiIscz0wLGw9MCx1PTIsYz0xLHA9bi5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxkPU9iamVjdC5jcmVhdGUodGhpcy5sZXhlciksaD17eXk6e319O2Zvcih2YXIgZiBpbiB0aGlzLnl5KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnl5LGYpJiYoaC55eVtmXT10aGlzLnl5W2ZdKTtkLnNldElucHV0KGUsaC55eSksaC55eS5sZXhlcj1kLGgueXkucGFyc2VyPXRoaXMsdm9pZCAwPT09ZC55eWxsb2MmJihkLnl5bGxvYz17fSk7dmFyIHk9ZC55eWxsb2M7bi5wdXNoKHkpO3ZhciBtPWQub3B0aW9ucyYmZC5vcHRpb25zLnJhbmdlcztmdW5jdGlvbiBnKCl7dmFyIGU7cmV0dXJuIm51bWJlciIhPXR5cGVvZihlPWQubGV4KCl8fGMpJiYoZT10LnN5bWJvbHNfW2VdfHxlKSxlfSJmdW5jdGlvbiI9PXR5cGVvZiBoLnl5LnBhcnNlRXJyb3I/dGhpcy5wYXJzZUVycm9yPWgueXkucGFyc2VFcnJvcjp0aGlzLnBhcnNlRXJyb3I9T2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLnBhcnNlRXJyb3I7Zm9yKHZhciB2LGIseCx3LGssaix6LFQsXz17fTs7KXtpZihiPXJbci5sZW5ndGgtMV0sdGhpcy5kZWZhdWx0QWN0aW9uc1tiXT94PXRoaXMuZGVmYXVsdEFjdGlvbnNbYl06KG51bGw9PXYmJih2PWcoKSkseD1pW2JdJiZpW2JdW3ZdKSx2b2lkIDA9PT14fHwheC5sZW5ndGh8fCF4WzBdKXt2YXIgUz0iIjtmb3IoayBpbiBUPVtdLGlbYl0pdGhpcy50ZXJtaW5hbHNfW2tdJiZrPnUmJlQucHVzaCgiJyIrdGhpcy50ZXJtaW5hbHNfW2tdKyInIik7Uz1kLnNob3dQb3NpdGlvbj8iUGFyc2UgZXJyb3Igb24gbGluZSAiKyhzKzEpKyI6XG4iK2Quc2hvd1Bvc2l0aW9uKCkrIlxuRXhwZWN0aW5nICIrVC5qb2luKCIsICIpKyIsIGdvdCAnIisodGhpcy50ZXJtaW5hbHNfW3ZdfHx2KSsiJyI6IlBhcnNlIGVycm9yIG9uIGxpbmUgIisocysxKSsiOiBVbmV4cGVjdGVkICIrKHY9PWM/ImVuZCBvZiBpbnB1dCI6IiciKyh0aGlzLnRlcm1pbmFsc19bdl18fHYpKyInIiksdGhpcy5wYXJzZUVycm9yKFMse3RleHQ6ZC5tYXRjaCx0b2tlbjp0aGlzLnRlcm1pbmFsc19bdl18fHYsbGluZTpkLnl5bGluZW5vLGxvYzp5LGV4cGVjdGVkOlR9KX1pZih4WzBdaW5zdGFuY2VvZiBBcnJheSYmeC5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IoIlBhcnNlIEVycm9yOiBtdWx0aXBsZSBhY3Rpb25zIHBvc3NpYmxlIGF0IHN0YXRlOiAiK2IrIiwgdG9rZW46ICIrdik7c3dpdGNoKHhbMF0pe2Nhc2UgMTpyLnB1c2godiksby5wdXNoKGQueXl0ZXh0KSxuLnB1c2goZC55eWxsb2MpLHIucHVzaCh4WzFdKSx2PW51bGwsbD1kLnl5bGVuZyxhPWQueXl0ZXh0LHM9ZC55eWxpbmVubyx5PWQueXlsbG9jO2JyZWFrO2Nhc2UgMjppZihqPXRoaXMucHJvZHVjdGlvbnNfW3hbMV1dWzFdLF8uJD1vW28ubGVuZ3RoLWpdLF8uXyQ9e2ZpcnN0X2xpbmU6bltuLmxlbmd0aC0oanx8MSldLmZpcnN0X2xpbmUsbGFzdF9saW5lOm5bbi5sZW5ndGgtMV0ubGFzdF9saW5lLGZpcnN0X2NvbHVtbjpuW24ubGVuZ3RoLShqfHwxKV0uZmlyc3RfY29sdW1uLGxhc3RfY29sdW1uOm5bbi5sZW5ndGgtMV0ubGFzdF9jb2x1bW59LG0mJihfLl8kLnJhbmdlPVtuW24ubGVuZ3RoLShqfHwxKV0ucmFuZ2VbMF0sbltuLmxlbmd0aC0xXS5yYW5nZVsxXV0pLHZvaWQgMCE9PSh3PXRoaXMucGVyZm9ybUFjdGlvbi5hcHBseShfLFthLGwscyxoLnl5LHhbMV0sbyxuXS5jb25jYXQocCkpKSlyZXR1cm4gdztqJiYocj1yLnNsaWNlKDAsLTEqaioyKSxvPW8uc2xpY2UoMCwtMSpqKSxuPW4uc2xpY2UoMCwtMSpqKSksci5wdXNoKHRoaXMucHJvZHVjdGlvbnNfW3hbMV1dWzBdKSxvLnB1c2goXy4kKSxuLnB1c2goXy5fJCksej1pW3Jbci5sZW5ndGgtMl1dW3Jbci5sZW5ndGgtMV1dLHIucHVzaCh6KTticmVhaztjYXNlIDM6cmV0dXJuITB9fXJldHVybiEwfX0sZD17RU9GOjEscGFyc2VFcnJvcjpmdW5jdGlvbihlLHQpe2lmKCF0aGlzLnl5LnBhcnNlcil0aHJvdyBuZXcgRXJyb3IoZSk7dGhpcy55eS5wYXJzZXIucGFyc2VFcnJvcihlLHQpfSxzZXRJbnB1dDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnl5PXR8fHRoaXMueXl8fHt9LHRoaXMuX2lucHV0PWUsdGhpcy5fbW9yZT10aGlzLl9iYWNrdHJhY2s9dGhpcy5kb25lPSExLHRoaXMueXlsaW5lbm89dGhpcy55eWxlbmc9MCx0aGlzLnl5dGV4dD10aGlzLm1hdGNoZWQ9dGhpcy5tYXRjaD0iIix0aGlzLmNvbmRpdGlvblN0YWNrPVsiSU5JVElBTCJdLHRoaXMueXlsbG9jPXtmaXJzdF9saW5lOjEsZmlyc3RfY29sdW1uOjAsbGFzdF9saW5lOjEsbGFzdF9jb2x1bW46MH0sdGhpcy5vcHRpb25zLnJhbmdlcyYmKHRoaXMueXlsbG9jLnJhbmdlPVswLDBdKSx0aGlzLm9mZnNldD0wLHRoaXN9LGlucHV0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5faW5wdXRbMF07cmV0dXJuIHRoaXMueXl0ZXh0Kz1lLHRoaXMueXlsZW5nKyssdGhpcy5vZmZzZXQrKyx0aGlzLm1hdGNoKz1lLHRoaXMubWF0Y2hlZCs9ZSxlLm1hdGNoKC8oPzpcclxuP3xcbikuKi9nKT8odGhpcy55eWxpbmVubysrLHRoaXMueXlsbG9jLmxhc3RfbGluZSsrKTp0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbisrLHRoaXMub3B0aW9ucy5yYW5nZXMmJnRoaXMueXlsbG9jLnJhbmdlWzFdKyssdGhpcy5faW5wdXQ9dGhpcy5faW5wdXQuc2xpY2UoMSksZX0sdW5wdXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGgscj1lLnNwbGl0KC8oPzpcclxuP3xcbikvZyk7dGhpcy5faW5wdXQ9ZSt0aGlzLl9pbnB1dCx0aGlzLnl5dGV4dD10aGlzLnl5dGV4dC5zdWJzdHIoMCx0aGlzLnl5dGV4dC5sZW5ndGgtdCksdGhpcy5vZmZzZXQtPXQ7dmFyIG89dGhpcy5tYXRjaC5zcGxpdCgvKD86XHJcbj98XG4pL2cpO3RoaXMubWF0Y2g9dGhpcy5tYXRjaC5zdWJzdHIoMCx0aGlzLm1hdGNoLmxlbmd0aC0xKSx0aGlzLm1hdGNoZWQ9dGhpcy5tYXRjaGVkLnN1YnN0cigwLHRoaXMubWF0Y2hlZC5sZW5ndGgtMSksci5sZW5ndGgtMSYmKHRoaXMueXlsaW5lbm8tPXIubGVuZ3RoLTEpO3ZhciBuPXRoaXMueXlsbG9jLnJhbmdlO3JldHVybiB0aGlzLnl5bGxvYz17Zmlyc3RfbGluZTp0aGlzLnl5bGxvYy5maXJzdF9saW5lLGxhc3RfbGluZTp0aGlzLnl5bGluZW5vKzEsZmlyc3RfY29sdW1uOnRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbixsYXN0X2NvbHVtbjpyPyhyLmxlbmd0aD09PW8ubGVuZ3RoP3RoaXMueXlsbG9jLmZpcnN0X2NvbHVtbjowKStvW28ubGVuZ3RoLXIubGVuZ3RoXS5sZW5ndGgtclswXS5sZW5ndGg6dGhpcy55eWxsb2MuZmlyc3RfY29sdW1uLXR9LHRoaXMub3B0aW9ucy5yYW5nZXMmJih0aGlzLnl5bGxvYy5yYW5nZT1bblswXSxuWzBdK3RoaXMueXlsZW5nLXRdKSx0aGlzLnl5bGVuZz10aGlzLnl5dGV4dC5sZW5ndGgsdGhpc30sbW9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3JlPSEwLHRoaXN9LHJlamVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuYmFja3RyYWNrX2xleGVyPyh0aGlzLl9iYWNrdHJhY2s9ITAsdGhpcyk6dGhpcy5wYXJzZUVycm9yKCJMZXhpY2FsIGVycm9yIG9uIGxpbmUgIisodGhpcy55eWxpbmVubysxKSsiLiBZb3UgY2FuIG9ubHkgaW52b2tlIHJlamVjdCgpIGluIHRoZSBsZXhlciB3aGVuIHRoZSBsZXhlciBpcyBvZiB0aGUgYmFja3RyYWNraW5nIHBlcnN1YXNpb24gKG9wdGlvbnMuYmFja3RyYWNrX2xleGVyID0gdHJ1ZSkuXG4iK3RoaXMuc2hvd1Bvc2l0aW9uKCkse3RleHQ6IiIsdG9rZW46bnVsbCxsaW5lOnRoaXMueXlsaW5lbm99KX0sbGVzczpmdW5jdGlvbihlKXt0aGlzLnVucHV0KHRoaXMubWF0Y2guc2xpY2UoZSkpfSxwYXN0SW5wdXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1hdGNoZWQuc3Vic3RyKDAsdGhpcy5tYXRjaGVkLmxlbmd0aC10aGlzLm1hdGNoLmxlbmd0aCk7cmV0dXJuKGUubGVuZ3RoPjIwPyIuLi4iOiIiKStlLnN1YnN0cigtMjApLnJlcGxhY2UoL1xuL2csIiIpfSx1cGNvbWluZ0lucHV0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tYXRjaDtyZXR1cm4gZS5sZW5ndGg8MjAmJihlKz10aGlzLl9pbnB1dC5zdWJzdHIoMCwyMC1lLmxlbmd0aCkpLChlLnN1YnN0cigwLDIwKSsoZS5sZW5ndGg+MjA/Ii4uLiI6IiIpKS5yZXBsYWNlKC9cbi9nLCIiKX0sc2hvd1Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXN0SW5wdXQoKSx0PW5ldyBBcnJheShlLmxlbmd0aCsxKS5qb2luKCItIik7cmV0dXJuIGUrdGhpcy51cGNvbWluZ0lucHV0KCkrIlxuIit0KyJeIn0sdGVzdF9tYXRjaDpmdW5jdGlvbihlLHQpe3ZhciByLG8sbjtpZih0aGlzLm9wdGlvbnMuYmFja3RyYWNrX2xleGVyJiYobj17eXlsaW5lbm86dGhpcy55eWxpbmVubyx5eWxsb2M6e2ZpcnN0X2xpbmU6dGhpcy55eWxsb2MuZmlyc3RfbGluZSxsYXN0X2xpbmU6dGhpcy5sYXN0X2xpbmUsZmlyc3RfY29sdW1uOnRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbixsYXN0X2NvbHVtbjp0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbn0seXl0ZXh0OnRoaXMueXl0ZXh0LG1hdGNoOnRoaXMubWF0Y2gsbWF0Y2hlczp0aGlzLm1hdGNoZXMsbWF0Y2hlZDp0aGlzLm1hdGNoZWQseXlsZW5nOnRoaXMueXlsZW5nLG9mZnNldDp0aGlzLm9mZnNldCxfbW9yZTp0aGlzLl9tb3JlLF9pbnB1dDp0aGlzLl9pbnB1dCx5eTp0aGlzLnl5LGNvbmRpdGlvblN0YWNrOnRoaXMuY29uZGl0aW9uU3RhY2suc2xpY2UoMCksZG9uZTp0aGlzLmRvbmV9LHRoaXMub3B0aW9ucy5yYW5nZXMmJihuLnl5bGxvYy5yYW5nZT10aGlzLnl5bGxvYy5yYW5nZS5zbGljZSgwKSkpLChvPWVbMF0ubWF0Y2goLyg/OlxyXG4/fFxuKS4qL2cpKSYmKHRoaXMueXlsaW5lbm8rPW8ubGVuZ3RoKSx0aGlzLnl5bGxvYz17Zmlyc3RfbGluZTp0aGlzLnl5bGxvYy5sYXN0X2xpbmUsbGFzdF9saW5lOnRoaXMueXlsaW5lbm8rMSxmaXJzdF9jb2x1bW46dGhpcy55eWxsb2MubGFzdF9jb2x1bW4sbGFzdF9jb2x1bW46bz9vW28ubGVuZ3RoLTFdLmxlbmd0aC1vW28ubGVuZ3RoLTFdLm1hdGNoKC9ccj9cbj8vKVswXS5sZW5ndGg6dGhpcy55eWxsb2MubGFzdF9jb2x1bW4rZVswXS5sZW5ndGh9LHRoaXMueXl0ZXh0Kz1lWzBdLHRoaXMubWF0Y2grPWVbMF0sdGhpcy5tYXRjaGVzPWUsdGhpcy55eWxlbmc9dGhpcy55eXRleHQubGVuZ3RoLHRoaXMub3B0aW9ucy5yYW5nZXMmJih0aGlzLnl5bGxvYy5yYW5nZT1bdGhpcy5vZmZzZXQsdGhpcy5vZmZzZXQrPXRoaXMueXlsZW5nXSksdGhpcy5fbW9yZT0hMSx0aGlzLl9iYWNrdHJhY2s9ITEsdGhpcy5faW5wdXQ9dGhpcy5faW5wdXQuc2xpY2UoZVswXS5sZW5ndGgpLHRoaXMubWF0Y2hlZCs9ZVswXSxyPXRoaXMucGVyZm9ybUFjdGlvbi5jYWxsKHRoaXMsdGhpcy55eSx0aGlzLHQsdGhpcy5jb25kaXRpb25TdGFja1t0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aC0xXSksdGhpcy5kb25lJiZ0aGlzLl9pbnB1dCYmKHRoaXMuZG9uZT0hMSkscilyZXR1cm4gcjtpZih0aGlzLl9iYWNrdHJhY2spe2Zvcih2YXIgaSBpbiBuKXRoaXNbaV09bltpXTtyZXR1cm4hMX1yZXR1cm4hMX0sbmV4dDpmdW5jdGlvbigpe2lmKHRoaXMuZG9uZSlyZXR1cm4gdGhpcy5FT0Y7dmFyIGUsdCxyLG87dGhpcy5faW5wdXR8fCh0aGlzLmRvbmU9ITApLHRoaXMuX21vcmV8fCh0aGlzLnl5dGV4dD0iIix0aGlzLm1hdGNoPSIiKTtmb3IodmFyIG49dGhpcy5fY3VycmVudFJ1bGVzKCksaT0wO2k8bi5sZW5ndGg7aSsrKWlmKChyPXRoaXMuX2lucHV0Lm1hdGNoKHRoaXMucnVsZXNbbltpXV0pKSYmKCF0fHxyWzBdLmxlbmd0aD50WzBdLmxlbmd0aCkpe2lmKHQ9cixvPWksdGhpcy5vcHRpb25zLmJhY2t0cmFja19sZXhlcil7aWYoITEhPT0oZT10aGlzLnRlc3RfbWF0Y2gocixuW2ldKSkpcmV0dXJuIGU7aWYodGhpcy5fYmFja3RyYWNrKXt0PSExO2NvbnRpbnVlfXJldHVybiExfWlmKCF0aGlzLm9wdGlvbnMuZmxleClicmVha31yZXR1cm4gdD8hMSE9PShlPXRoaXMudGVzdF9tYXRjaCh0LG5bb10pKSYmZToiIj09PXRoaXMuX2lucHV0P3RoaXMuRU9GOnRoaXMucGFyc2VFcnJvcigiTGV4aWNhbCBlcnJvciBvbiBsaW5lICIrKHRoaXMueXlsaW5lbm8rMSkrIi4gVW5yZWNvZ25pemVkIHRleHQuXG4iK3RoaXMuc2hvd1Bvc2l0aW9uKCkse3RleHQ6IiIsdG9rZW46bnVsbCxsaW5lOnRoaXMueXlsaW5lbm99KX0sbGV4OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5uZXh0KCk7cmV0dXJuIGV8fHRoaXMubGV4KCl9LGJlZ2luOmZ1bmN0aW9uKGUpe3RoaXMuY29uZGl0aW9uU3RhY2sucHVzaChlKX0scG9wU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGgtMT4wP3RoaXMuY29uZGl0aW9uU3RhY2sucG9wKCk6dGhpcy5jb25kaXRpb25TdGFja1swXX0sX2N1cnJlbnRSdWxlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCYmdGhpcy5jb25kaXRpb25TdGFja1t0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aC0xXT90aGlzLmNvbmRpdGlvbnNbdGhpcy5jb25kaXRpb25TdGFja1t0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aC0xXV0ucnVsZXM6dGhpcy5jb25kaXRpb25zLklOSVRJQUwucnVsZXN9LHRvcFN0YXRlOmZ1bmN0aW9uKGUpe3JldHVybihlPXRoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoLTEtTWF0aC5hYnMoZXx8MCkpPj0wP3RoaXMuY29uZGl0aW9uU3RhY2tbZV06IklOSVRJQUwifSxwdXNoU3RhdGU6ZnVuY3Rpb24oZSl7dGhpcy5iZWdpbihlKX0sc3RhdGVTdGFja1NpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGh9LG9wdGlvbnM6e30scGVyZm9ybUFjdGlvbjpmdW5jdGlvbihlLHQscixvKXtzd2l0Y2gocil7Y2FzZSAwOmJyZWFrO2Nhc2UgMTpyZXR1cm4gNjtjYXNlIDI6cmV0dXJuIHQueXl0ZXh0PXQueXl0ZXh0LnN1YnN0cigxLHQueXlsZW5nLTIpLDQ7Y2FzZSAzOnJldHVybiAxNztjYXNlIDQ6cmV0dXJuIDE4O2Nhc2UgNTpyZXR1cm4gMjM7Y2FzZSA2OnJldHVybiAyNDtjYXNlIDc6cmV0dXJuIDIyO2Nhc2UgODpyZXR1cm4gMjE7Y2FzZSA5OnJldHVybiAxMDtjYXNlIDEwOnJldHVybiAxMTtjYXNlIDExOnJldHVybiA4O2Nhc2UgMTI6cmV0dXJuIDE0O2Nhc2UgMTM6cmV0dXJuIklOVkFMSUQifX0scnVsZXM6Wy9eKD86XHMrKS8sL14oPzooLT8oWzAtOV18WzEtOV1bMC05XSspKShcLlswLTldKyk/KFtlRV1bLStdP1swLTldKyk/XGIpLywvXig/OiIoPzpcXFtcXCJiZm5ydC9dfFxcdVthLWZBLUYwLTldezR9fFteXFxcMC1ceDA5XHgwYS1ceDFmIl0pKiIpLywvXig/Olx7KS8sL14oPzpcfSkvLC9eKD86XFspLywvXig/OlxdKS8sL14oPzosKS8sL14oPzo6KS8sL14oPzp0cnVlXGIpLywvXig/OmZhbHNlXGIpLywvXig/Om51bGxcYikvLC9eKD86JCkvLC9eKD86LikvXSxjb25kaXRpb25zOntJTklUSUFMOntydWxlczpbMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxM10saW5jbHVzaXZlOiEwfX19O2Z1bmN0aW9uIGgoKXt0aGlzLnl5PXt9fXJldHVybiBwLmxleGVyPWQsaC5wcm90b3R5cGU9cCxwLlBhcnNlcj1oLG5ldyBofSgpO3ZvaWQgMCE9PWwmJih0LnBhcnNlcj1yLHQuUGFyc2VyPXIuUGFyc2VyLHQucGFyc2U9ZnVuY3Rpb24oKXtyZXR1cm4gci5wYXJzZS5hcHBseShyLGFyZ3VtZW50cyl9KX0pKTtmdW5jdGlvbiBNbihlKXtpZihlIGluc3RhbmNlb2YgU3RyaW5nfHwic3RyaW5nIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBCdWZmZXIpdHJ5e3JldHVybiBxbi5wYXJzZShlLnRvU3RyaW5nKCkpfWNhdGNoKGUpe3Rocm93IG5ldyB0bihlKX1yZXR1cm4gZX1mdW5jdGlvbiBObihlLHIpe3ZvaWQgMD09PXImJihyPXQpO3ZhciBvPWU7dHJ5e289TW4obyl9Y2F0Y2goZSl7cmV0dXJuW2VdfXJldHVybiBDbihvLHIpfXFuLnBhcnNlcixxbi5QYXJzZXIscW4ucGFyc2U7dmFyIFJuPTgsRG49MTU7ZnVuY3Rpb24gUG4oZSx0KXtyZXR1cm4hZXx8InN0cmluZyIhPT1QcihlKXx8ISFlLm1hdGNoKHQpfWZ1bmN0aW9uIEZuKGUpe3JldHVybiBlLnVybD9lLnVybC5zcGxpdCgiLCIpLmxlbmd0aDowfWZ1bmN0aW9uIExuKGUsdCxyKXt2YXIgbz1uZXcgU2V0KHQpLG49W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKHQpe2lmKCFvLmhhcyh0KSl7dmFyIGk9cj9yKyIuIit0Om51bGw7bi5wdXNoKG5ldyBlbihpLGVbdF0sJ1Vuc3VwcG9ydGVkIHByb3BlcnR5ICInK3QrJyInKSl9fSkpLG59ZnVuY3Rpb24gJG4oZSx0KXt2YXIgcj1bXSxvPVsidHlwZSIsInVybCIsInRpbGVTaXplIl07ci5wdXNoLmFwcGx5KHIsTG4oZSxvLCJzb3VyY2UiKSk7dmFyIG49L15tYXBib3g6XC9cLyhbXi9dKikkLztyZXR1cm4gUG4oZS51cmwsbil8fHIucHVzaChuZXcgZW4oInNvdXJjZXNbIit0KyJdIixlLnVybCwiU291cmNlIHVybCBtdXN0IGJlIGEgdmFsaWQgTWFwYm94IHRpbGVzZXQgdXJsIikpLHJ9ZnVuY3Rpb24gVW4oZSl7dmFyIHQ9W10scj0wO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihvLG4pe3ZhciBpPSRuKGVbb10sbik7aS5sZW5ndGh8fChyKz1GbihlW29dKSksdC5wdXNoLmFwcGx5KHQsaSl9KSkscj5EbiYmdC5wdXNoKG5ldyBlbigic291cmNlcyIsbnVsbCwiU3R5bGVzIG11c3QgY29udGFpbiAiK0RuKyIgb3IgZmV3ZXIgc291cmNlcyIpKSx0fWZ1bmN0aW9uIEpuKGUsdCl7dmFyIHI9W10sbz1bIm93bmVyIiwiaWQiLCJjYWNoZUNvbnRyb2wiLCJkcmFmdCIsImNyZWF0ZWQiLCJtb2RpZmllZCIsInZpc2liaWxpdHkiXSxuPUxuKGUsdC5jb25jYXQobykpO3IucHVzaC5hcHBseShyLG4pLChlLnZlcnNpb24+Um58fGUudmVyc2lvbjxSbikmJnIucHVzaChuZXcgZW4oInZlcnNpb24iLGUudmVyc2lvbiwiU3R5bGUgdmVyc2lvbiBtdXN0IGJlICIrUm4pKTt2YXIgaT0vXm1hcGJveDpcL1wvZm9udHNcLyhbXi9dKilcL3tmb250c3RhY2t9XC97cmFuZ2V9LnBiZiQvO1BuKGUuZ2x5cGhzLGkpfHxyLnB1c2gobmV3IGVuKCJnbHlwaHMiLGUuZ2x5cGhzLCJTdHlsZXMgbXVzdCByZWZlcmVuY2UgZ2x5cGhzIGhvc3RlZCBieSBNYXBib3giKSk7dmFyIGE9L15tYXBib3g6XC9cL3Nwcml0ZXNcLyhbXi9dKilcLyhbXi9dKilcLz8oW14vXSopPyQvO1BuKGUuc3ByaXRlLGEpfHxyLnB1c2gobmV3IGVuKCJzcHJpdGUiLGUuc3ByaXRlLCJTdHlsZXMgbXVzdCByZWZlcmVuY2Ugc3ByaXRlcyBob3N0ZWQgYnkgTWFwYm94IikpO3ZhciBzPS9eKHB1YmxpY3xwcml2YXRlKSQvO3JldHVybiBQbihlLnZpc2liaWxpdHkscyl8fHIucHVzaChuZXcgZW4oInZpc2liaWxpdHkiLGUudmlzaWJpbGl0eSwiU3R5bGUgdmlzaWJpbGl0eSBtdXN0IGJlIHB1YmxpYyBvciBwcml2YXRlIikpLHJ9ZnVuY3Rpb24gV24oZSl7dmFyIHI9ZTt0cnl7cj1NbihyKX1jYXRjaChlKXtyZXR1cm5bZV19dmFyIG89Q24ocix0KS5jb25jYXQoSm4ocixPYmplY3Qua2V5cyh0LiRyb290KSkpO3JldHVybiByLnNvdXJjZXMmJihvPW8uY29uY2F0KFVuKHIuc291cmNlcykpKSxvfXZhciBHbj17U3R5bGVFeHByZXNzaW9uOkhyLGlzRXhwcmVzc2lvbjpacixpc0V4cHJlc3Npb25GaWx0ZXI6Ym8sY3JlYXRlRXhwcmVzc2lvbjpYcixjcmVhdGVQcm9wZXJ0eUV4cHJlc3Npb246UXIsbm9ybWFsaXplUHJvcGVydHlFeHByZXNzaW9uOnRvLFpvb21Db25zdGFudEV4cHJlc3Npb246S3IsWm9vbURlcGVuZGVudEV4cHJlc3Npb246WXIsU3R5bGVQcm9wZXJ0eUZ1bmN0aW9uOmVvfSxCbj17Y29udmVydEZ1bmN0aW9uOmFvLGNyZWF0ZUZ1bmN0aW9uOiRyLGlzRnVuY3Rpb246RnJ9LFZuPXtlYWNoU291cmNlOlUsZWFjaExheWVyOkosZWFjaFByb3BlcnR5Old9O05uLnBhcnNlZD1ObixObi5sYXRlc3Q9Tm4sZS5Db2xvcj1iZSxlLlBhcnNpbmdFcnJvcj10bixlLlZhbGlkYXRpb25FcnJvcj1lbixlLmNvbXBvc2l0ZT1QbyxlLmNvbnZlcnRGaWx0ZXI9Q28sZS5kZXJlZkxheWVycz0kbyxlLmRpZmY9UW8sZS5leHByZXNzaW9uPUduLGUuZmVhdHVyZUZpbHRlcj13byxlLmZvcm1hdD1hLGUuZnVuY3Rpb249Qm4sZS5sYXRlc3Q9dCxlLm1pZ3JhdGU9RG8sZS52OD10LGUudmFsaWRhdGU9Tm4sZS52YWxpZGF0ZU1hcGJveEFwaVN1cHBvcnRlZD1XbixlLnZpc2l0PVZuLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0odCl9KSk7Y2xhc3MgaHJ7Y29uc3RydWN0b3IoZSl7dGhpcy5wYXJzZWRFeHByZXNzaW9uPWV9c3RhdGljIHBhcnNlKGUsdCl7bGV0IHI7aWYodCl7aWYocj1kci5leHByZXNzaW9uLmNyZWF0ZUV4cHJlc3Npb24oZSx7dHlwZTp0fSksInN1Y2Nlc3MiPT09ci5yZXN1bHQpcmV0dXJuIG5ldyBocihyLnZhbHVlKX1lbHNlIGlmKHI9ZHIuZXhwcmVzc2lvbi5jcmVhdGVFeHByZXNzaW9uKGUpLCJzdWNjZXNzIj09PXIucmVzdWx0KXJldHVybiBuZXcgaHIoci52YWx1ZSk7dGhyb3cgci52YWx1ZVswXX1ldmFsdWF0ZShlLHQ9e3pvb206MTR9KXtyZXR1cm4gdGhpcy5wYXJzZWRFeHByZXNzaW9uLmV2YWx1YXRlKHQsZSl9fWNvbnN0e2lzRXhwcmVzc2lvbjpmcn09cHI7bGV0IHlyO2Muc3Vic2NyaWJlKChlPT57eXI9ZX0pKTtjb25zdCBtcj17c3RyaW5nOiJGQUxMQkFDSyIsbnVtYmVyOi0xZTMsYXJyYXk6W10sb2JqZWN0Ont9LGJvb2xlYW46ITF9LGdyPShlLHQpPT57aWYoQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZS5jb25jYXQodCl9LHZyPU9iamVjdC5lbnRyaWVzKHA/LmV4cHJlc3Npb25fbmFtZT8udmFsdWVzPz97fSk/LnJlZHVjZSgoKGUsdCk9Pntjb25zdFtyLG9dPXQ7cmV0dXJuIk1hdGgiPT09bz8uZ3JvdXAmJmUucHVzaChyKSxlfSksW10pLGJyPWU9PiEhQXJyYXkuaXNBcnJheShlKSYmKHZyLmluY2x1ZGVzKGVbMF0pP2Uuc29tZSgoZT0+YnIoZSkpKToibWF0Y2giPT09ZVswXXx8ImNhc2UiPT09ZVswXSkseHI9ZT0+e2NvbnN0IHQ9ImludGVycG9sYXRlIj09PWVbMF0mJiJ6b29tIj09PWU/LlsyXT8uWzBdLHI9InN0ZXAiPT09ZVswXSYmInpvb20iPT09ZT8uWzFdPy5bMF07cmV0dXJuKHR8fHIpJiZlLnNvbWUoKGU9PmJyKGUpKSl9LHdyPWU9Pntjb25zdCB0PWVbMF07bGV0IHI9W10sbz1bXSxuPVtdLGk9e307c3dpdGNoKHQpe2Nhc2UiY2FzZSI6e3I9ZS5zbGljZSgxKTtsZXQgdD1bXTtjb25zdCBhPXIucG9wKCk7ci5mb3JFYWNoKCgoZSxyKT0+ciUyIT0wP24ucHVzaChlKTp0LnB1c2goZSkpKSxuLnB1c2goYSksdC5mb3JFYWNoKChlPT57Y29uc3Qgcj0oZT0+e2NvbnN0IHQ9ZS5mbGF0KDEvMCkscj1bImdldCIsImhhcyIsImluIl0sbz10LmZpbHRlcigoKGUsbyk9PjAhPT1vJiZyLmluY2x1ZGVzKHRbby0xXSkpKSxuPW9bMF07bGV0IGk9dC5maWx0ZXIoKGU9PiFvLmluY2x1ZGVzKGUpJiYhZnIoW2VdKSkpO3JldHVybiB0LmluY2x1ZGVzKCJsZW5ndGgiKSYmMT09PW8ubGVuZ3RoJiYoaT1pLm1hcCgoZT0+YCR7ZX1gLnJlcGVhdChlKSkpKSx7W25dOml9fSkoZSk7bz1vLmNvbmNhdCh0KSxpPXMoaSxyLGdyKX0pKTticmVha31jYXNlIm1hdGNoIjp7cj1lLnNsaWNlKDIpO2NvbnN0IHQ9ci5wb3AoKTtyLmZvckVhY2goKChlLHQpPT50JTIhPTA/bi5wdXNoKGUpOm8ucHVzaChlKSkpLG4ucHVzaCh0KTtjb25zdCBhPWVbMV0uZmxhdCgxLzApLHM9YS5maWx0ZXIoKGU9PiFmcihbZV0pKSlbMF07YS5pbmNsdWRlcygibGVuZ3RoIikmJihvPW8ubWFwKChlPT5gJHtlfWAucmVwZWF0KGUpKSkpLGk9e1tzXTpvLmZsYXQoMS8wKX07YnJlYWt9fXZyLmluY2x1ZGVzKHQpJiYobj1lLmZpbHRlcihicikpO2ZvcihsZXQgZT0wO2U8bi5sZW5ndGg7ZSsrKXtjb25zdCB0PW5bZV07aWYoYnIodCkpe2NvbnN0e2lucHV0czpyLG91dHB1dHM6YSxwcm9wZXJ0aWVzOmx9PXdyKHQpO24uc3BsaWNlKGUsMSwuLi5hKSxvPW8uY29uY2F0KHIpLGk9cyhpLGwsZ3IpfX1yZXR1cm57aW5wdXRzOm8sb3V0cHV0czpbLi4ubmV3IFNldChuKV0scHJvcGVydGllczppfX0sa3I9ZT0+e2xldCB0PVtdLHI9e307cmV0dXJuIHhyKGUpPyh7em9vbXM6dCxwcm9wZXJ0aWVzOnJ9PShlPT57Y29uc3RbdF09ZTtsZXQgcj1bXSxvPVtdLG49W10saT1bXSxhPXt9O3N3aXRjaCh0KXtjYXNlImludGVycG9sYXRlIjpjYXNlImludGVycG9sYXRlLWhjbCI6Y2FzZSJpbnRlcnBvbGF0ZS1sYWIiOnI9ZS5zbGljZSgzKSxyLmZvckVhY2goKChlLHQpPT50JTIhPTA/bi5wdXNoKGUpOm8ucHVzaChlKSkpO2JyZWFrO2Nhc2Uic3RlcCI6cj1lLnNsaWNlKDIpLHIuZm9yRWFjaCgoKGUsdCk9PnQlMj09MD9uLnB1c2goZSk6by5wdXNoKGUpKSl9Zm9yKGNvbnN0IGUgb2YgbilpZihicihlKSl7Y29uc3R7b3V0cHV0czp0LHByb3BlcnRpZXM6cn09d3IoZSk7aT1bLi4ubmV3IFNldChpLmNvbmNhdCh0KSldLGE9cyhhLHIsZ3IpfXJldHVybnt6b29tczpvLG91dHB1dHM6aSxwcm9wZXJ0aWVzOmF9fSkoZSkpOih7cHJvcGVydGllczpyfT13cihlKSkscj1PYmplY3Qua2V5cyhyKS5yZWR1Y2UoKChlLHQpPT57bGV0IG89dHlwZW9mIHJbdF1bMF07Im9iamVjdCI9PT1vJiZBcnJheS5pc0FycmF5KG8pJiYobz0iYXJyYXkiKTtjb25zdCBuPXZvaWQgMCE9PW8/clt0XS5jb25jYXQoW21yW29dXSk6clt0XTtyZXR1cm4gZVt0XT1bLi4ubmV3IFNldChuKV0sZX0pLHt9KSx7cHJvcGVydHlWYWx1ZXM6cix6b29tczp0fX0sanI9KGUsdCk9PkFycmF5LmlzQXJyYXkoZSk/ImdldCIhPT1lWzBdfHx0LmluY2x1ZGVzKGVbMV0pP2UubWFwKChlPT5qcihlLHQpKSk6ZVsxXTplLHpyPSh7bGF5ZXJUeXBlOmUscGFpbnRPckxheW91dDp0LHByb3BlcnR5SWQ6cix2YWx1ZTpvLHByb3BlcnRpZXM6bix6b29tOml9KT0+eyJ0ZXh0LWZpZWxkIj09PXImJihvPWpyKG8sT2JqZWN0LmtleXMobikpKTtjb25zdCBhPSgoe2xheWVyVHlwZTplLHByb3BlcnR5VHlwZTp0LHByb3BlcnR5SWQ6cixwcm9wZXJ0aWVzOm8sdmFsdWU6bix6b29tOml9KT0+e2NvbnN0IGE9cFtgJHt0fV8ke2V9YF1bcl0scz17dHlwZToiRmVhdHVyZSIscHJvcGVydGllczpvLGdlb21ldHJ5Om51bGx9O2xldCBsPWhyLnBhcnNlKG4sYS50eXBlKS5ldmFsdWF0ZShzLGkmJnt6b29tOml9KTtyZXR1cm4iY29sb3IiPT09YS50eXBlJiZsJiZsLmhhc093blByb3BlcnR5KCJyIikmJihsPWByZ2JhKCR7TWF0aC5yb3VuZCgyNTUqbC5yKX0sICR7TWF0aC5yb3VuZCgyNTUqbC5nKX0sICR7TWF0aC5yb3VuZCgyNTUqbC5iKX0sICR7bC5hfSlgKSwiaWNvbi1pbWFnZSI9PT1yJiZsJiZsLmhhc093blByb3BlcnR5KCJuYW1lIikmJihsPVsiaW1hZ2UiLGwubmFtZV0pLCJ0ZXh0LWZpZWxkIj09PXImJmwmJmwuaGFzT3duUHJvcGVydHkoInNlY3Rpb25zIikmJihsPShlPT57Y29uc3R7c2VjdGlvbnM6dH09ZSxyPVsiZm9ybWF0Il07Zm9yKGNvbnN0IGUgb2YgdCl7aWYoZS5pbWFnZSl7ci5wdXNoKFsiaW1hZ2UiLGUuaW1hZ2UubmFtZV0pO2NvbnRpbnVlfXIucHVzaChlLnRleHQpO2NvbnN0IHQ9e307ZS5mb250U3RhY2smJih0WyJ0ZXh0LWZvbnQiXT1bImxpdGVyYWwiLGUuZm9udFN0YWNrLnNwbGl0KCIsIildKSxlLnNjYWxlJiYodFsiZm9udC1zY2FsZSJdPWUuc2NhbGUpLGUudGV4dENvbG9yJiYodFsidGV4dC1jb2xvciJdPVsicmdiYSJdLmNvbmNhdChlLnRleHRDb2xvci50b0FycmF5KCkpKSxyLnB1c2godCl9cmV0dXJuIHJ9KShsKSksbH0pKHtsYXllclR5cGU6ZSxwcm9wZXJ0eVR5cGU6dCxwcm9wZXJ0eUlkOnIscHJvcGVydGllczpuLHZhbHVlOm8sem9vbTppfSk7cmV0dXJuIGF9LFRyPShlLHtsYXllclR5cGU6dCxwYWludE9yTGF5b3V0OnIscHJvcGVydHlJZDpvLHZhbHVlOm4scHJvcGVydGllczppfSk9Pntjb25zdCBhPXBbYCR7cn1fJHt0fWBdW29dPy5leHByZXNzaW9uPy5pbnRlcnBvbGF0ZWQ7bGV0IHM9W107YT9zLnB1c2goImludGVycG9sYXRlIixbImxpbmVhciJdLFsiem9vbSJdKToocy5wdXNoKCJzdGVwIixbInpvb20iXSksZT1bMCwuLi5lXSk7Zm9yKGxldCBsPTA7bDxlLmxlbmd0aDtsKyspe2NvbnN0IHU9ZVtsXTtsZXQgYz16cih7bGF5ZXJUeXBlOnQscGFpbnRPckxheW91dDpyLHByb3BlcnR5SWQ6byx2YWx1ZTpuLHByb3BlcnRpZXM6aSx6b29tOjA9PT11Py4xOnV9KTsidGV4dC1mb250Ij09PW8mJkFycmF5LmlzQXJyYXkoYykmJiJsaXRlcmFsIiE9PWNbMF0mJihjPVsibGl0ZXJhbCIsY10pLGF8fDAhPT11fHwwIT09bHx8cy5wdXNoKGMpLHMucHVzaCh1LGMpfXJldHVybiBzfSxfcj1lPT57Y29uc3QgdD0oZT0+WyJwYWludCIsImxheW91dCJdLm1hcCgodD0+ZVt0XT9PYmplY3QuZW50cmllcyhlW3RdKS5tYXAoKChbZSxyXSk9PmJyKHIpfHx4cihyKT97dHlwZTp0LGtleTplLHZhbHVlOnJ9OnZvaWQgMCkpLmZpbHRlcigoZT0+ZSkpOltdKSkuZmlsdGVyKChlPT5lLmxlbmd0aCkpLnJlZHVjZSgoKGUsdCk9PmUuY29uY2F0KHQpKSxbXSkubWFwKChlPT57Y29uc3R7cHJvcGVydHlWYWx1ZXM6dCx6b29tczpyfT1rcihlLnZhbHVlKTtyZXR1cm57Li4uZSxwcm9wZXJ0aWVzOnQsem9vbXM6cn19KSkpKGUpO2lmKCF0Lmxlbmd0aClyZXR1cm57ZXhwYW5kZWRMYXllcnM6W2VdLGNvbWJvTGltaXRIaXQ6ITF9O2xldCBvPVtdLG49W10saT17fTt0LmZvckVhY2goKGU9PntsZXR7dHlwZTp0LGtleTpyLHByb3BlcnRpZXM6YSx2YWx1ZTpsLHpvb21zOnV9PWU7aWYobi5wdXNoKFt0LHJdKSxpPXMoaSxhLGdyKSx1Lmxlbmd0aCl7InN0ZXAiPT09bFswXSYmKHU9dS5yZWR1Y2UoKChlLHQpPT4oZS5wdXNoKHQsdCsuMSksZSkpLFtdKSl9bz1bLi4ubmV3IFNldChvLmNvbmNhdCh1KSldfSkpO2xldCBhPXIoaSk7YT1hLnJlZHVjZSgoKGUsdCk9PihlLmZpbmQoKGU9Pk9iamVjdC5rZXlzKGUpLmV2ZXJ5KChyPT50W3JdPT09ZVtyXSkpKSl8fGUucHVzaCh0KSxlKSksW10pO2NvbnN0IGw9YS5sZW5ndGg7YT1hLnNsaWNlKDAseXIpO2NvbnN0IHU9YS5sZW5ndGg7bGV0IGM9W107Zm9yKGNvbnN0IHQgb2YgYSl7Y29uc3Qgcj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTtsZXQgaT1PYmplY3Qua2V5cyh0KS5yZWR1Y2UoKChlLHIpPT57Y29uc3Qgbz12b2lkIDAhPT1tclt0W3JdXT8iRkFMTEJBQ0siOnRbcl07cmV0dXJuIGUucHVzaChbciwiOiAiLEpTT04uc3RyaW5naWZ5KG8pXS5qb2luKCIiKSksZX0pLFtdKTtpPWAke3IuaWR9LyR7aS5qb2luKCIvIil9YCxyLmlkPWk7Zm9yKGNvbnN0IGkgb2Ygbil7Y29uc3RbbixhXT1pO2xldCBzPXJbbl1bYV07Y29uc3QgbD17bGF5ZXJUeXBlOmUudHlwZSxwYWludE9yTGF5b3V0Om4scHJvcGVydHlJZDphLHZhbHVlOnMscHJvcGVydGllczp0fTtzPW8ubGVuZ3RoP1RyKG8sbCk6enIobCksbnVsbD09PXM/ZGVsZXRlIHJbbl1bYV06cltuXVthXT1zfWMucHVzaChyKX1yZXR1cm57ZXhwYW5kZWRMYXllcnM6Yyxjb21ib0xpbWl0SGl0Omw+dX19O3ZhciBTcj0iRXhwZWN0ZWQgYSBmdW5jdGlvbiIsQXI9L15ccyt8XHMrJC9nLElyPS9eWy0rXTB4WzAtOWEtZl0rJC9pLENyPS9eMGJbMDFdKyQvaSxPcj0vXjBvWzAtN10rJC9pLEVyPXBhcnNlSW50LHFyPSJvYmplY3QiPT10eXBlb2YgaSYmaSYmaS5PYmplY3Q9PT1PYmplY3QmJmksTXI9Im9iamVjdCI9PXR5cGVvZiBzZWxmJiZzZWxmJiZzZWxmLk9iamVjdD09PU9iamVjdCYmc2VsZixOcj1xcnx8TXJ8fEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCksUnI9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxEcj1NYXRoLm1heCxQcj1NYXRoLm1pbixGcj1mdW5jdGlvbigpe3JldHVybiBOci5EYXRlLm5vdygpfTtmdW5jdGlvbiBMcihlLHQscil7dmFyIG8sbixpLGEscyxsLHU9MCxjPSExLHA9ITEsZD0hMDtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFNyKTtmdW5jdGlvbiBoKHQpe3ZhciByPW8saT1uO3JldHVybiBvPW49dm9pZCAwLHU9dCxhPWUuYXBwbHkoaSxyKX1mdW5jdGlvbiBmKGUpe3JldHVybiB1PWUscz1zZXRUaW1lb3V0KG0sdCksYz9oKGUpOmF9ZnVuY3Rpb24geShlKXt2YXIgcj1lLWw7cmV0dXJuIHZvaWQgMD09PWx8fHI+PXR8fHI8MHx8cCYmZS11Pj1pfWZ1bmN0aW9uIG0oKXt2YXIgZT1GcigpO2lmKHkoZSkpcmV0dXJuIGcoZSk7cz1zZXRUaW1lb3V0KG0sZnVuY3Rpb24oZSl7dmFyIHI9dC0oZS1sKTtyZXR1cm4gcD9QcihyLGktKGUtdSkpOnJ9KGUpKX1mdW5jdGlvbiBnKGUpe3JldHVybiBzPXZvaWQgMCxkJiZvP2goZSk6KG89bj12b2lkIDAsYSl9ZnVuY3Rpb24gdigpe3ZhciBlPUZyKCkscj15KGUpO2lmKG89YXJndW1lbnRzLG49dGhpcyxsPWUscil7aWYodm9pZCAwPT09cylyZXR1cm4gZihsKTtpZihwKXJldHVybiBzPXNldFRpbWVvdXQobSx0KSxoKGwpfXJldHVybiB2b2lkIDA9PT1zJiYocz1zZXRUaW1lb3V0KG0sdCkpLGF9cmV0dXJuIHQ9VXIodCl8fDAsJHIocikmJihjPSEhci5sZWFkaW5nLGk9KHA9Im1heFdhaXQiaW4gcik/RHIoVXIoci5tYXhXYWl0KXx8MCx0KTppLGQ9InRyYWlsaW5nImluIHI/ISFyLnRyYWlsaW5nOmQpLHYuY2FuY2VsPWZ1bmN0aW9uKCl7dm9pZCAwIT09cyYmY2xlYXJUaW1lb3V0KHMpLHU9MCxvPWw9bj1zPXZvaWQgMH0sdi5mbHVzaD1mdW5jdGlvbigpe3JldHVybiB2b2lkIDA9PT1zP2E6ZyhGcigpKX0sdn1mdW5jdGlvbiAkcihlKXt2YXIgdD10eXBlb2YgZTtyZXR1cm4hIWUmJigib2JqZWN0Ij09dHx8ImZ1bmN0aW9uIj09dCl9ZnVuY3Rpb24gVXIoZSl7aWYoIm51bWJlciI9PXR5cGVvZiBlKXJldHVybiBlO2lmKGZ1bmN0aW9uKGUpe3JldHVybiJzeW1ib2wiPT10eXBlb2YgZXx8ZnVuY3Rpb24oZSl7cmV0dXJuISFlJiYib2JqZWN0Ij09dHlwZW9mIGV9KGUpJiYiW29iamVjdCBTeW1ib2xdIj09UnIuY2FsbChlKX0oZSkpcmV0dXJuIE5hTjtpZigkcihlKSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIGUudmFsdWVPZj9lLnZhbHVlT2YoKTplO2U9JHIodCk/dCsiIjp0fWlmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gMD09PWU/ZTorZTtlPWUucmVwbGFjZShBciwiIik7dmFyIHI9Q3IudGVzdChlKTtyZXR1cm4gcnx8T3IudGVzdChlKT9FcihlLnNsaWNlKDIpLHI/Mjo4KTpJci50ZXN0KGUpP05hTjorZX12YXIgSnI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBvPSEwLG49ITA7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihTcik7cmV0dXJuICRyKHIpJiYobz0ibGVhZGluZyJpbiByPyEhci5sZWFkaW5nOm8sbj0idHJhaWxpbmciaW4gcj8hIXIudHJhaWxpbmc6biksTHIoZSx0LHtsZWFkaW5nOm8sbWF4V2FpdDp0LHRyYWlsaW5nOm59KX07c2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZT0+e2NvbnN0IHQ9ZS5kYXRhO2xldCByPVtdLG89MDtjb25zdCBuPUpyKCgoKT0+e3NlbGYucG9zdE1lc3NhZ2Uoe3Byb2dyZXNzOm99KX0pLDI1MCk7KGU9PntsZXQgdD1lO3NlbGYucG9zdE1lc3NhZ2Uoe3Byb2dyZXNzOm99KTt0cnl7dD1lLnJlZHVjZSgoKHQsaSxhKT0+e2NvbnN0e2V4cGFuZGVkTGF5ZXJzOnMsY29tYm9MaW1pdEhpdDpsfT1fcihpKTtyZXR1cm4gbCYmci5wdXNoKGkuaWQpLHQ9dC5jb25jYXQocyksbz1hL2UubGVuZ3RoLG4oKSx0fSksW10pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9c2V0VGltZW91dCgoKCk9PnNlbGYucG9zdE1lc3NhZ2Uoe3Byb2dyZXNzOm8sZXhwYW5kZWRMYXllcnM6dCxsaW1pdGVkRXhwYW5kZWRMYXllcklkczpyfSkpLDI1MCl9KSh0KX0pLCExKX0oKTsKCg==",pp=null,mp=!1,dp?cp(hp,pp,mp):function(t,e,i){var n;return function(a){return n=n||up(t,e,i),new Worker(n,a)}}(hp,pp,mp));function yp(t,e,i){const n=t.slice();return n[6]=e[i],n}function fp(t){let i,n,a,o=t[6].name+"";return{c(){i=g("option"),n=v(o),i.__value=a=t[6].value,i.value=i.__value},m(t,e){b(t,i,e),m(i,n)},p:e,d(t){t&&y(i)}}}function gp(t){let e,i,n,a,o,r,s,l,c,u,d,h;r=new id({props:{icon:nd,color:t[1].length?"red":"green"}});let p=Vd,I=[];for(let e=0;e<p.length;e+=1)I[e]=fp(yp(t,p,e));return{c(){e=g("div"),i=g("div"),n=g("div"),a=v("\n    Renderer:\n    "),o=g("div"),it(r.$$.fragment),l=x(),c=g("select");for(let t=0;t<I.length;t+=1)I[t].c();w(o,"class","icon svelte-xirs5"),w(o,"title",s=t[1]?t[1].map(Ip).join("\n\n"):""),w(i,"class","label svelte-xirs5"),w(c,"class","renderer-dropdown svelte-xirs5"),void 0===t[0]&&N((()=>t[2].call(c))),w(e,"class","container svelte-xirs5")},m(s,p){b(s,e,p),m(e,i),m(i,n),m(i,a),m(i,o),nt(r,o,null),m(e,l),m(e,c);for(let t=0;t<I.length;t+=1)I[t].m(c,null);V(c,t[0]),u=!0,d||(h=G(c,"change",t[2]),d=!0)},p(t,[e]){const i={};if(2&e&&(i.color=t[1].length?"red":"green"),r.$set(i),(!u||2&e&&s!==(s=t[1]?t[1].map(Ip).join("\n\n"):""))&&w(o,"title",s),0&e){let i;for(p=Vd,i=0;i<p.length;i+=1){const n=yp(t,p,i);I[i]?I[i].p(n,e):(I[i]=fp(n),I[i].c(),I[i].m(c,null))}for(;i<I.length;i+=1)I[i].d(1);I.length=p.length}1&e&&V(c,t[0])},i(t){u||(Q(r.$$.fragment,t),u=!0)},o(t){q(r.$$.fragment,t),u=!1},d(t){t&&y(e),at(r),f(I,t),d=!1,h()}}}Du(".container.svelte-xirs5{display:flex;justify-content:center;align-items:center}.icon.svelte-xirs5{margin-left:6px;margin-right:6px}.label.svelte-xirs5{display:flex;justify-content:center;align-items:center}.renderer-dropdown.svelte-xirs5{height:30px;font-size:12px}",{});const Ip=t=>`• ${t}`;function vp(t,e,i){let n,a,o=[];Cd.subscribe((t=>a=t));const r=t=>{Nd.set(t),a&&(i(1,o="mapbox-gl"===t?Ir(JSON.stringify(a)):Eu(JSON.stringify(a))),i(1,o=(t=>t.map((t=>{let{message:e}=t;return e=e.replace(/layers\[\d+\]\./g,(function(t,e){let i,n=t.match(/\d+/g);return n&&!isNaN(Number(n))&&(i=a?.layers[Number(n)]?.id),i?`layer "${i}" `:t+e})).replace(/layers\[\d+\]: /g,""),e})))(o)))};return t.$$.update=()=>{1&t.$$.dirty&&r(n)},[n,o,function(){n=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),i(0,n)}]}class xp extends st{constructor(t){super(),rt(this,t,vp,gp,r,{})}}function Zp(t){let i;return{c(){i=g("div")},m(t,e){b(t,i,e)},p:e,i:e,o:e,d(t){t&&y(i)}}}function Gp(t){let e,i,n,a;e=new md({props:{selectedTab:t[1]}}),e.$on("tabchange",t[5]);let o="typography"!==t[1]&&wp(t);return{c(){it(e.$$.fragment),i=x(),o&&o.c(),n=Z()},m(t,r){nt(e,t,r),b(t,i,r),o&&o.m(t,r),b(t,n,r),a=!0},p(t,i){const a={};2&i&&(a.selectedTab=t[1]),e.$set(a),"typography"!==t[1]?o?(o.p(t,i),2&i&&Q(o,1)):(o=wp(t),o.c(),Q(o,1),o.m(n.parentNode,n)):o&&(K(),q(o,1,1,(()=>{o=null})),D())},i(t){a||(Q(e.$$.fragment,t),Q(o),a=!0)},o(t){q(e.$$.fragment,t),q(o),a=!1},d(t){at(e,t),t&&y(i),o&&o.d(t),t&&y(n)}}}function wp(t){let e,i,n,a,o,r,s;return a=new id({props:{icon:ad}}),{c(){e=g("button"),i=v("Download SVG "),n=g("div"),it(a.$$.fragment),w(n,"class","icon svelte-1t6sotk"),w(e,"class","download-button svelte-1t6sotk"),e.disabled=t[3]},m(l,c){b(l,e,c),m(e,i),m(e,n),nt(a,n,null),o=!0,r||(s=G(e,"click",t[8]),r=!0)},p(t,i){(!o||8&i)&&(e.disabled=t[3])},i(t){o||(Q(a.$$.fragment,t),o=!0)},o(t){q(a.$$.fragment,t),o=!1},d(t){t&&y(e),at(a),r=!1,s()}}}function Wp(t){let e,i,n;return i=new xp({}),{c(){e=g("div"),it(i.$$.fragment),w(e,"class","renderer-switch-container svelte-1t6sotk")},m(t,a){b(t,e,a),nt(i,e,null),n=!0},i(t){n||(Q(i.$$.fragment,t),n=!0)},o(t){q(i.$$.fragment,t),n=!1},d(t){t&&y(e),at(i)}}}function Xp(t){let i;return{c(){i=g("div"),i.innerHTML="<div>Drop a style here</div>",w(i,"class","drop svelte-1t6sotk")},m(t,e){b(t,i,e)},p:e,i:e,o:e,d(t){t&&y(i)}}}function _p(t){let e,i,n,a,o,r,s,l,c;return e=new Oh({props:{selectedTab:t[1],style:t[0]}}),r=new id({props:{icon:od}}),{c(){it(e.$$.fragment),i=x(),n=g("button"),a=v("Clear style "),o=g("div"),it(r.$$.fragment),w(o,"class","icon svelte-1t6sotk"),w(n,"class","clear-style-button svelte-1t6sotk")},m(u,d){nt(e,u,d),b(u,i,d),b(u,n,d),m(n,a),m(n,o),nt(r,o,null),s=!0,l||(c=G(n,"click",t[7]),l=!0)},p(t,i){const n={};2&i&&(n.selectedTab=t[1]),1&i&&(n.style=t[0]),e.$set(n)},i(t){s||(Q(e.$$.fragment,t),Q(r.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),q(r.$$.fragment,t),s=!1},d(t){at(e,t),t&&y(i),t&&y(n),at(r),l=!1,c()}}}function Vp(t){let e,i,n,a;const o=[Bp,Sp],r=[];function s(t,e){return null!==t[4]?0:1}return e=s(t),i=r[e]=o[e](t),{c(){i.c(),n=Z()},m(t,i){r[e].m(t,i),b(t,n,i),a=!0},p(t,a){let l=e;e=s(t),e===l?r[e].p(t,a):(K(),q(r[l],1,1,(()=>{r[l]=null})),D(),i=r[e],i?i.p(t,a):(i=r[e]=o[e](t),i.c()),Q(i,1),i.m(n.parentNode,n))},i(t){a||(Q(i),a=!0)},o(t){q(i),a=!1},d(t){r[e].d(t),t&&y(n)}}}function Sp(t){let i,n,a;return n=new ld({props:{size:36,color:"#FFFFFF"}}),{c(){i=g("div"),it(n.$$.fragment),w(i,"class","mini-loader svelte-1t6sotk")},m(t,e){b(t,i,e),nt(n,i,null),a=!0},p:e,i(t){a||(Q(n.$$.fragment,t),a=!0)},o(t){q(n.$$.fragment,t),a=!1},d(t){t&&y(i),at(n)}}}function Bp(t){let e,i,n;return i=new Dh({props:{progress:t[4]}}),{c(){e=g("div"),it(i.$$.fragment),w(e,"class","loading-screen svelte-1t6sotk")},m(t,a){b(t,e,a),nt(i,e,null),n=!0},p(t,e){const n={};16&e&&(n.progress=t[4]),i.$set(n)},i(t){n||(Q(i.$$.fragment,t),n=!0)},o(t){q(i.$$.fragment,t),n=!1},d(t){t&&y(e),at(i)}}}function Lp(t){let e,i,n,o,r,s,l,c,u,d,h,p,f,I,v,Z;const W=[Gp,Zp],X=[];function _(t,e){return t[2].length?0:1}n=_(t),o=X[n]=W[n](t);let V="typography"===t[1]&&Wp();u=new op({props:{activeStyle:t[0],disabled:t[3]&&null!==t[4]}}),u.$on("styleload",t[9]);const S=[_p,Xp],B=[];function L(t,e){return t[2].length?0:t[3]?-1:1}~(h=L(t))&&(p=B[h]=S[h](t));let Y=t[3]&&Vp(t);return{c(){e=g("main"),i=g("div"),o.c(),r=x(),s=g("div"),V&&V.c(),l=x(),c=g("div"),it(u.$$.fragment),d=x(),p&&p.c(),f=x(),Y&&Y.c(),w(c,"class","custom-url-input svelte-1t6sotk"),w(s,"class","right-side-container svelte-1t6sotk"),w(i,"class","top-bar svelte-1t6sotk"),w(e,"class","svelte-1t6sotk")},m(a,o){b(a,e,o),m(e,i),X[n].m(i,null),m(i,r),m(i,s),V&&V.m(s,null),m(s,l),m(s,c),nt(u,c,null),m(e,d),~h&&B[h].m(e,null),m(e,f),Y&&Y.m(e,null),I=!0,v||(Z=[G(e,"dragover",Yp),G(e,"dragover",zp),G(e,"drop",t[6])],v=!0)},p(t,[a]){let c=n;n=_(t),n===c?X[n].p(t,a):(K(),q(X[c],1,1,(()=>{X[c]=null})),D(),o=X[n],o?o.p(t,a):(o=X[n]=W[n](t),o.c()),Q(o,1),o.m(i,r)),"typography"===t[1]?V?2&a&&Q(V,1):(V=Wp(),V.c(),Q(V,1),V.m(s,l)):V&&(K(),q(V,1,1,(()=>{V=null})),D());const d={};1&a&&(d.activeStyle=t[0]),24&a&&(d.disabled=t[3]&&null!==t[4]),u.$set(d);let m=h;h=L(t),h===m?~h&&B[h].p(t,a):(p&&(K(),q(B[m],1,1,(()=>{B[m]=null})),D()),~h?(p=B[h],p?p.p(t,a):(p=B[h]=S[h](t),p.c()),Q(p,1),p.m(e,f)):p=null),t[3]?Y?(Y.p(t,a),8&a&&Q(Y,1)):(Y=Vp(t),Y.c(),Q(Y,1),Y.m(e,null)):Y&&(K(),q(Y,1,1,(()=>{Y=null})),D())},i(t){I||(Q(o),Q(V),Q(u.$$.fragment,t),Q(p),Q(Y),I=!0)},o(t){q(o),q(V),q(u.$$.fragment,t),q(p),q(Y),I=!1},d(t){t&&y(e),X[n].d(),V&&V.d(),at(u),~h&&B[h].d(),Y&&Y.d(),v=!1,a(Z)}}}function Yp(t){t.preventDefault()}function zp(t){t.preventDefault()}function Rp(t,e,i){let n,a,{selectedTab:o}=e,{style:r}=e,{loadDefaultStyle:s=!1}=e;Jd.subscribe((t=>{i(3,n=t.loading),i(4,a=t.progress)}));let l=[];kd.subscribe((t=>{i(2,l=t.layers)})),z((()=>{const t=Object.fromEntries(window.location.hash.slice(1).split("&").map((t=>t.split("="))));t.selectedTab?i(1,o=t.selectedTab):i(1,o="fill"),s&&async function(t){i(0,r=await function(t,e){return fetch(t,e).then(Ge)}(t))}("./style.json")}));function c(){var t;t=function(){let t={};return o&&(t.selectedTab=o),t}(),window.location.hash=Object.entries(t).map((([t,e])=>[encodeURIComponent(t),encodeURIComponent(e)].join("="))).join("&")}function u(t){i(1,o=t.detail.tab),c(),window.scrollTo(0,0)}function d(t){try{i(0,r=$o(t))}catch(e){try{i(0,r=mu(t))}catch(t){console.warn(e),console.warn(t)}}i(0,r),u({detail:{tab:"fill"}})}return t.$$set=t=>{"selectedTab"in t&&i(1,o=t.selectedTab),"style"in t&&i(0,r=t.style),"loadDefaultStyle"in t&&i(10,s=t.loadDefaultStyle)},t.$$.update=()=>{1&t.$$.dirty&&r&&(kd.set(Hd),Fd.set(jd),Jd.set({loading:!0,progress:0}),(t=>{const{layers:e}=t,i=new bp;i.postMessage(e),i.addEventListener("message",(e=>{const{progress:i,expandedLayers:n,limitedExpandedLayerIds:a}=e.data;Jd.update((t=>({...t,progress:i}))),n&&kd.set({style:t,layers:n,limitHit:a})}))})(r)),4&t.$$.dirty&&l.length&&(Jd.update((t=>({...t,progress:1}))),setTimeout((()=>Jd.set({loading:!1,progress:null})),250)),1&t.$$.dirty&&Cd.set(r)},[r,o,l,n,a,u,async function(t){t.stopPropagation(),t.preventDefault();const{files:e}=t.dataTransfer,i=await e[0].text();d(JSON.parse(i))},function(){i(0,r=void 0)},function(){let t=document.getElementById(o);rp(t,{recursive:!0,properties:["font-size","font-family","text-anchor"]}),t=(new XMLSerializer).serializeToString(t);const e=new Blob([t]),i=document.createElement("a");i.download=`${r.id}-${o}-chart.svg`,i.href=window.URL.createObjectURL(e),i.click(),i.remove()},t=>{let{style:e}=t.detail;ep(r,e)||d(e)},s]}Du("main.svelte-1t6sotk{width:100%;height:100%}button.svelte-1t6sotk{margin:0px;font-size:0.9em;border-radius:4px;cursor:pointer;font-weight:bold}.custom-url-input.svelte-1t6sotk{position:relative}.drop.svelte-1t6sotk{font-size:5em;display:flex;flex-direction:column;align-items:center;height:100%;justify-content:center}.download-button.svelte-1t6sotk{position:fixed;top:calc(36px + 12px + var(--app-padding) * 2);right:12px;display:flex;align-items:center}.clear-style-button.svelte-1t6sotk{position:fixed;bottom:12px;right:12px;display:flex;align-items:center}.icon.svelte-1t6sotk{margin-left:6px}.top-bar.svelte-1t6sotk{position:fixed;background-color:white;padding:var(--app-padding);width:calc(100% - (var(--app-padding) * 2));height:36px;top:0;display:flex;align-items:center;justify-content:space-between}.loading-screen.svelte-1t6sotk{position:fixed;height:100%;width:100%;top:0;bottom:0;right:0;left:0}.mini-loader.svelte-1t6sotk{position:fixed;top:calc(36px + (var(--app-padding) * 2));right:0px;margin:36px}.right-side-container.svelte-1t6sotk{position:relative;display:flex;justify-content:center;align-items:center}.renderer-switch-container.svelte-1t6sotk{margin-right:12px;display:flex;justify-content:center;align-items:center}",{});const Cp=new class extends st{constructor(t){super(),rt(this,t,Rp,Lp,r,{selectedTab:1,style:0,loadDefaultStyle:10})}}({target:document.body,props:{loadDefaultStyle:!1}});var Mp=".mapboxgl-map,.maplibregl-map{-webkit-tap-highlight-color:rgb(0 0 0/0);font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative}.mapboxgl-canvas,.maplibregl-canvas{left:0;position:absolute;top:0}.mapboxgl-map:fullscreen,.maplibregl-map:fullscreen{height:100%;width:100%}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass,.maplibregl-canvas-container.maplibregl-interactive,.maplibregl-ctrl-group button.maplibregl-ctrl-compass{cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer,.maplibregl-canvas-container.maplibregl-interactive.maplibregl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active,.maplibregl-canvas-container.maplibregl-interactive:active,.maplibregl-ctrl-group button.maplibregl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate .maplibregl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan,.maplibregl-canvas-container.maplibregl-touch-zoom-rotate.maplibregl-touch-drag-pan .maplibregl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right,.maplibregl-ctrl-bottom-left,.maplibregl-ctrl-bottom-right,.maplibregl-ctrl-top-left,.maplibregl-ctrl-top-right{pointer-events:none;position:absolute;z-index:2}.mapboxgl-ctrl-top-left,.maplibregl-ctrl-top-left{left:0;top:0}.mapboxgl-ctrl-top-right,.maplibregl-ctrl-top-right{right:0;top:0}.mapboxgl-ctrl-bottom-left,.maplibregl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right,.maplibregl-ctrl-bottom-right{bottom:0;right:0}.mapboxgl-ctrl,.maplibregl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl,.maplibregl-ctrl-top-left .maplibregl-ctrl{float:left;margin:10px 0 0 10px}.mapboxgl-ctrl-top-right .mapboxgl-ctrl,.maplibregl-ctrl-top-right .maplibregl-ctrl{float:right;margin:10px 10px 0 0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl,.maplibregl-ctrl-bottom-left .maplibregl-ctrl{float:left;margin:0 0 10px 10px}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl,.maplibregl-ctrl-bottom-right .maplibregl-ctrl{float:right;margin:0 10px 10px 0}.mapboxgl-ctrl-group,.maplibregl-ctrl-group{background:#fff;border-radius:4px}.mapboxgl-ctrl-group:not(:empty),.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty),.maplibregl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button,.maplibregl-ctrl-group button{background-color:transparent;border:0;box-sizing:border-box;cursor:pointer;display:block;height:29px;outline:none;padding:0;width:29px}.mapboxgl-ctrl-group button+button,.maplibregl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon,.maplibregl-ctrl button .maplibregl-ctrl-icon{background-position:50%;background-repeat:no-repeat;display:block;height:100%;width:100%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon,.maplibregl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button,.maplibregl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner,.maplibregl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus,.maplibregl-ctrl-attrib-button:focus,.maplibregl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled,.maplibregl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button:disabled .maplibregl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover,.maplibregl-ctrl button:not(:disabled):hover{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-group button:focus:focus-visible,.maplibregl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible),.maplibregl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child,.maplibregl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child,.maplibregl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child,.maplibregl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-out .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-zoom-in .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-fullscreen .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-shrink .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-compass .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m10.5 14 4-8 4 8h-8z'/%3E%3Cpath d='m10.5 16 4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-terrain .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-terrain .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='%23333'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-terrain-enabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-terrain-enabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 22 22' fill='%2333b5e5'%3E%3Cpath d='m1.754 13.406 4.453-4.851 3.09 3.09 3.281 3.277.969-.969-3.309-3.312 3.844-4.121 6.148 6.886h1.082v-.855l-7.207-8.07-4.84 5.187L6.169 6.57l-5.48 5.965v.871ZM.688 16.844h20.625v1.375H.688Zm0 0'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-waiting .maplibregl-ctrl-icon{animation:maplibregl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-active-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate.maplibregl-ctrl-geolocate-background-error .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon,.maplibregl-ctrl button.maplibregl-ctrl-geolocate:disabled .maplibregl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='m14 5 1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@keyframes maplibregl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\");background-repeat:no-repeat;cursor:pointer;display:block;height:23px;margin:0 0 -4px -4px;overflow:hidden;width:88px}a.mapboxgl-ctrl-logo.mapboxgl-compact,a.maplibregl-ctrl-logo.maplibregl-compact{width:14px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo,a.maplibregl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='88' height='23' fill='none'%3E%3Cpath d='M17.408 16.796h-1.827l2.501-12.095h.198l3.324 6.533.988 2.19.988-2.19 3.258-6.533h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.929 5.644h-.098l-2.914-5.644-.757-1.71-.345 1.71zm1.958-3.42-.726 3.663a1.255 1.255 0 0 1-1.232 1.011h-1.827a1.255 1.255 0 0 1-1.229-1.509l2.501-12.095a1.255 1.255 0 0 1 1.23-1.001h.197a1.255 1.255 0 0 1 1.12.685l3.19 6.273 3.125-6.263a1.255 1.255 0 0 1 1.123-.695h.181a1.255 1.255 0 0 1 1.227.991l1.443 6.71a5.11 5.11 0 0 1 .314-.787l.009-.016a4.623 4.623 0 0 1 1.777-1.887c.782-.46 1.668-.667 2.611-.667a4.548 4.548 0 0 1 1.7.32l.306.134c.21-.16.474-.256.759-.256h1.694a1.255 1.255 0 0 1 1.212.925 1.255 1.255 0 0 1 1.212-.925h1.711c.284 0 .545.094.755.252.613-.3 1.312-.45 2.075-.45 1.356 0 2.557.445 3.482 1.4.314.319.566.676.763 1.064V4.701a1.255 1.255 0 0 1 1.255-1.255h1.86A1.255 1.255 0 0 1 54.44 4.7v9.194h2.217c.19 0 .37.043.532.118v-4.77c0-.356.147-.678.385-.906a2.416 2.416 0 0 1-.682-1.71c0-.665.267-1.253.735-1.7a2.448 2.448 0 0 1 1.722-.674 2.43 2.43 0 0 1 1.705.675c.211.2.381.43.504.683V4.7a1.255 1.255 0 0 1 1.255-1.255h1.744A1.255 1.255 0 0 1 65.812 4.7v3.335a4.76 4.76 0 0 1 1.526-.246c.938 0 1.817.214 2.59.69a4.47 4.47 0 0 1 1.67 1.743v-.98a1.255 1.255 0 0 1 1.256-1.256h1.777c.233 0 .451.064.639.174a3.407 3.407 0 0 1 1.567-.372c.346 0 .861.02 1.285.232a1.255 1.255 0 0 1 .689 1.004 4.73 4.73 0 0 1 .853-.588c.795-.44 1.675-.647 2.61-.647 1.385 0 2.65.39 3.525 1.396.836.938 1.168 2.173 1.168 3.528 0 .343-.02.694-.056 1.051a1.255 1.255 0 0 1-.947 1.09l.408.952a1.255 1.255 0 0 1-.477 1.552c-.418.268-.92.463-1.458.612-.613.171-1.304.244-2.049.244-1.06 0-2.043-.207-2.886-.698l-.015-.008c-.798-.48-1.419-1.135-1.818-1.963l-.004-.008a5.815 5.815 0 0 1-.548-2.512c0-.286.017-.567.053-.843a1.255 1.255 0 0 1-.333-.086l-.166-.004c-.223 0-.426.062-.643.228-.03.024-.142.139-.142.59v3.883a1.255 1.255 0 0 1-1.256 1.256h-1.777a1.255 1.255 0 0 1-1.256-1.256V15.69l-.032.057a4.778 4.778 0 0 1-1.86 1.833 5.04 5.04 0 0 1-2.484.634 4.47 4.47 0 0 1-1.935-.424 1.252 1.252 0 0 1-.764.258h-1.71a1.255 1.255 0 0 1-1.256-1.255V7.687a2.402 2.402 0 0 1-.428.625c.253.23.412.561.412.93v7.553a1.255 1.255 0 0 1-1.256 1.255h-1.843a1.25 1.25 0 0 1-.894-.373c-.228.23-.544.373-.894.373H51.32a1.255 1.255 0 0 1-1.256-1.255v-1.251l-.061.117a4.703 4.703 0 0 1-1.782 1.884 4.767 4.767 0 0 1-2.485.67 5.6 5.6 0 0 1-1.485-.188l.009 2.764a1.255 1.255 0 0 1-1.255 1.259h-1.729a1.255 1.255 0 0 1-1.255-1.255v-3.537a1.255 1.255 0 0 1-1.167.793h-1.679a1.25 1.25 0 0 1-.77-.263 4.47 4.47 0 0 1-1.945.429c-.885 0-1.724-.21-2.495-.632l-.017-.01a4.983 4.983 0 0 1-1.081-.836 1.255 1.255 0 0 1-1.254 1.312h-1.81a1.255 1.255 0 0 1-1.228-.99l-.782-3.625-2.044 3.939a1.255 1.255 0 0 1-1.115.676h-.098a1.255 1.255 0 0 1-1.116-.68l-2.061-3.994zM35.92 16.63l.207-.114.223-.15c.329-.237.574-.499.735-.785l.061-.118.033 1.332h1.678V9.242h-1.694l-.033 1.267c-.088-.22-.264-.438-.526-.658l-.032-.028a3.16 3.16 0 0 0-.668-.428l-.27-.12a3.293 3.293 0 0 0-1.235-.23c-.757 0-1.415.163-1.974.493a3.36 3.36 0 0 0-1.3 1.382c-.297.593-.444 1.284-.444 2.074 0 .8.17 1.503.51 2.107a3.795 3.795 0 0 0 1.382 1.381 3.883 3.883 0 0 0 1.893.477c.53 0 1.015-.11 1.455-.33zm-2.789-5.38c-.384.45-.575 1.038-.575 1.762 0 .735.186 1.332.559 1.794.384.45.933.675 1.645.675a2.25 2.25 0 0 0 .934-.19 2.17 2.17 0 0 0 .468-.29l.178-.161a2.163 2.163 0 0 0 .397-.561c.163-.333.244-.717.244-1.15v-.115c0-.472-.098-.894-.296-1.267l-.043-.077a2.211 2.211 0 0 0-.633-.709l-.13-.086-.047-.028a2.099 2.099 0 0 0-1.073-.285c-.702 0-1.244.231-1.629.692zm2.316 2.706c.163-.17.28-.407.28-.83v-.114c0-.292-.06-.508-.15-.68a.958.958 0 0 0-.353-.389.851.851 0 0 0-.464-.127c-.4 0-.56.114-.664.239l-.01.012c-.148.174-.275.45-.275.945 0 .506.122.801.27.99.097.11.266.224.68.224.303 0 .504-.09.687-.269zm7.545 1.705a2.626 2.626 0 0 0 .331.423c.213.22.464.402.755.548l.173.074c.433.17.93.255 1.49.255.68 0 1.295-.165 1.844-.493a3.447 3.447 0 0 0 1.316-1.4c.329-.603.493-1.299.493-2.089 0-1.273-.33-2.243-.988-2.913-.658-.68-1.52-1.02-2.584-1.02-.598 0-1.124.115-1.575.347a2.807 2.807 0 0 0-.415.262l-.199.166a3.35 3.35 0 0 0-.64.82V9.242h-1.712v11.553h1.729l-.017-5.134zm.53-1.138c.137.193.297.36.48.5l.155.11.053.034c.34.197.713.297 1.119.297.714 0 1.262-.225 1.645-.675.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.29 0-.569.053-.835.16a2.366 2.366 0 0 0-.284.136 1.99 1.99 0 0 0-.363.254 2.237 2.237 0 0 0-.46.569l-.082.162a2.56 2.56 0 0 0-.213 1.072v.115c0 .471.098.894.296 1.267l.135.211zm.964-.818a1.11 1.11 0 0 0 .367.385.937.937 0 0 0 .476.118c.423 0 .59-.117.687-.23.159-.194.28-.478.28-.95 0-.53-.133-.8-.266-.952l-.021-.025c-.078-.094-.231-.221-.68-.221a.995.995 0 0 0-.503.135l-.012.007a.859.859 0 0 0-.335.343c-.073.133-.132.324-.132.614v.115a1.43 1.43 0 0 0 .14.66zm15.7-6.222c.232-.23.346-.516.346-.856a1.053 1.053 0 0 0-.345-.79 1.175 1.175 0 0 0-.84-.329c-.34 0-.625.11-.855.33a1.053 1.053 0 0 0-.346.79c0 .34.115.625.346.855.23.23.516.346.856.346.34 0 .62-.115.839-.346zm4.337 9.314.033-1.332c.128.269.324.518.59.747l.098.081a3.727 3.727 0 0 0 .316.224l.223.122a3.21 3.21 0 0 0 1.44.322 3.785 3.785 0 0 0 1.875-.477 3.52 3.52 0 0 0 1.382-1.366c.352-.593.526-1.29.526-2.09 0-.79-.147-1.48-.444-2.073a3.235 3.235 0 0 0-1.283-1.399c-.549-.34-1.195-.51-1.942-.51a3.476 3.476 0 0 0-1.527.344l-.086.043-.165.09a3.412 3.412 0 0 0-.33.214c-.288.21-.507.446-.656.707a1.893 1.893 0 0 0-.099.198l.082-1.283V4.701h-1.744v12.095zm.473-2.509a2.482 2.482 0 0 0 .566.7c.078.065.159.125.245.18l.144.08a2.105 2.105 0 0 0 .975.232c.713 0 1.262-.225 1.645-.675.384-.46.576-1.053.576-1.778 0-.734-.192-1.327-.576-1.777-.373-.46-.921-.692-1.645-.692a2.18 2.18 0 0 0-1.015.235c-.147.075-.285.17-.415.282l-.15.142a2.086 2.086 0 0 0-.42.594c-.149.32-.223.685-.223 1.1v.115c0 .47.097.89.293 1.26zm2.616-.293c.157-.191.28-.479.28-.967 0-.51-.13-.79-.276-.961l-.021-.026c-.082-.1-.232-.225-.67-.225a.868.868 0 0 0-.681.279l-.012.011c-.154.155-.274.38-.274.807v.115c0 .285.057.499.144.669a1.13 1.13 0 0 0 .367.405c.137.082.28.123.455.123.423 0 .59-.118.686-.23zm8.266-3.013c.23-.087.472-.134.724-.14l.069-.002c.329 0 .542.033.642.099l.247-1.794c-.13-.066-.37-.099-.717-.099a2.3 2.3 0 0 0-.545.063 2.086 2.086 0 0 0-.411.148 2.18 2.18 0 0 0-.4.249 2.482 2.482 0 0 0-.485.499 2.659 2.659 0 0 0-.32.581l-.05.137v-1.48h-1.778v7.553h1.777v-3.884c0-.364.053-.678.159-.943a1.49 1.49 0 0 1 .466-.636 2.52 2.52 0 0 1 .399-.253 2.19 2.19 0 0 1 .224-.099zm9.784 2.656.05-.922c0-1.162-.285-2.062-.856-2.698-.559-.647-1.42-.97-2.584-.97-.746 0-1.415.163-2.007.493a3.462 3.462 0 0 0-1.4 1.382c-.329.604-.493 1.306-.493 2.106 0 .714.143 1.371.428 1.975.285.593.73 1.07 1.332 1.432.604.351 1.355.526 2.255.526.649 0 1.204-.062 1.668-.185l.044-.012.135-.04c.409-.122.736-.263.984-.421l-.542-1.267c-.2.108-.415.199-.642.274l-.297.087c-.34.088-.773.131-1.3.131-.636 0-1.135-.147-1.497-.444a1.573 1.573 0 0 1-.192-.193c-.244-.294-.415-.705-.512-1.234l-.004-.021h5.43zm-5.427-1.256-.003.022h3.752v-.138c-.007-.485-.104-.857-.288-1.118a1.056 1.056 0 0 0-.156-.176c-.307-.285-.746-.428-1.316-.428-.657 0-1.155.202-1.494.604-.253.3-.417.712-.494 1.234zm-27.053 2.77V4.7h-1.86v12.095h5.333V15.15zm7.103-5.908v7.553h-1.843V9.242h1.843z' fill='%23000' fill-opacity='.4' fill-rule='evenodd'/%3E%3Cpath d='m19.63 11.151-.757-1.71-.345 1.71-1.12 5.644h-1.827L18.083 4.7h.197l3.325 6.533.988 2.19.988-2.19L26.839 4.7h.181l2.6 12.095h-1.81l-1.218-5.644-.362-1.71-.658 1.71-2.93 5.644h-.098l-2.913-5.644zm14.836 5.81c-.68 0-1.311-.16-1.893-.478a3.795 3.795 0 0 1-1.381-1.382c-.34-.604-.51-1.306-.51-2.106 0-.79.147-1.482.444-2.074a3.364 3.364 0 0 1 1.3-1.382c.559-.33 1.217-.494 1.974-.494a3.293 3.293 0 0 1 1.234.231 3.341 3.341 0 0 1 .97.575c.264.22.44.439.527.659l.033-1.267h1.694v7.553H37.18l-.033-1.332c-.186.395-.526.746-1.02 1.053a3.167 3.167 0 0 1-1.662.444zm.296-1.482c.626 0 1.152-.214 1.58-.642.428-.44.642-1.01.642-1.711v-.115c0-.472-.098-.894-.296-1.267a2.211 2.211 0 0 0-.807-.872 2.098 2.098 0 0 0-1.119-.313c-.702 0-1.245.231-1.629.692-.384.45-.575 1.037-.575 1.76 0 .736.186 1.333.559 1.795.384.45.933.675 1.645.675zm6.521-6.237h1.711v1.4c.604-1.065 1.547-1.597 2.83-1.597 1.064 0 1.926.34 2.584 1.02.659.67.988 1.641.988 2.914 0 .79-.164 1.487-.493 2.09a3.456 3.456 0 0 1-1.316 1.399 3.51 3.51 0 0 1-1.844.493c-.636 0-1.19-.11-1.662-.329a2.665 2.665 0 0 1-1.086-.97l.017 5.134h-1.728V9.242zm4.048 6.22c.714 0 1.262-.224 1.645-.674.385-.46.576-1.048.576-1.762 0-.746-.192-1.338-.576-1.777-.372-.45-.92-.675-1.645-.675-.395 0-.768.098-1.12.296-.34.187-.613.46-.822.823-.197.351-.296.763-.296 1.234v.115c0 .472.098.894.296 1.267.209.362.483.647.823.855.34.197.713.297 1.119.297z' fill='%23fff'/%3E%3Cpath d='M51.325 4.7h1.86v10.45h3.473v1.646h-5.333zm7.12 4.542h1.843v7.553h-1.843zm.905-1.415a1.159 1.159 0 0 1-.856-.346 1.165 1.165 0 0 1-.346-.856 1.053 1.053 0 0 1 .346-.79c.23-.219.516-.329.856-.329.329 0 .609.11.839.33a1.053 1.053 0 0 1 .345.79 1.159 1.159 0 0 1-.345.855c-.22.23-.5.346-.84.346zm7.875 9.133a3.167 3.167 0 0 1-1.662-.444c-.482-.307-.817-.658-1.004-1.053l-.033 1.332h-1.71V4.701h1.743v4.657l-.082 1.283c.186-.438.548-.812 1.086-1.119a3.486 3.486 0 0 1 1.778-.477c.746 0 1.393.17 1.942.51a3.235 3.235 0 0 1 1.283 1.4c.297.592.444 1.282.444 2.072 0 .8-.175 1.498-.526 2.09a3.52 3.52 0 0 1-1.382 1.366 3.785 3.785 0 0 1-1.876.477zm-.296-1.481c.713 0 1.26-.225 1.645-.675.384-.46.577-1.053.577-1.778 0-.734-.193-1.327-.577-1.776-.373-.46-.921-.692-1.645-.692a2.115 2.115 0 0 0-1.58.659c-.428.428-.642.992-.642 1.694v.115c0 .473.098.895.296 1.267a2.385 2.385 0 0 0 .807.872 2.1 2.1 0 0 0 1.119.313zm5.927-6.237h1.777v1.481c.176-.505.46-.91.856-1.217a2.14 2.14 0 0 1 1.349-.46c.351 0 .593.032.724.098l-.247 1.794c-.099-.066-.313-.099-.642-.099-.516 0-.988.164-1.416.494-.417.329-.626.855-.626 1.58v3.883h-1.777V9.242zm9.534 7.718c-.9 0-1.651-.175-2.255-.526-.603-.362-1.047-.84-1.332-1.432a4.567 4.567 0 0 1-.428-1.975c0-.8.164-1.502.493-2.106a3.462 3.462 0 0 1 1.4-1.382c.592-.33 1.262-.494 2.007-.494 1.163 0 2.024.324 2.584.97.57.637.856 1.537.856 2.7 0 .296-.017.603-.05.92h-5.43c.12.67.356 1.153.708 1.45.362.296.86.443 1.497.443.526 0 .96-.044 1.3-.131a4.123 4.123 0 0 0 .938-.362l.542 1.267c-.274.175-.647.329-1.119.46-.472.132-1.042.197-1.711.197zm1.596-4.558c.01-.68-.137-1.158-.444-1.432-.307-.285-.746-.428-1.316-.428-1.152 0-1.815.62-1.991 1.86h3.752z' fill='%23e1e3e9'/%3E%3Cg fill-rule='evenodd' stroke-width='1.036'%3E%3Cpath d='m8.166 16.146-.002.002a1.54 1.54 0 0 1-2.009 0l-.002-.002-.043-.034-.002-.002-.199-.162H4.377a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659H8.411l-.202.164zm-1.121-.905a.29.29 0 0 0 .113.023.286.286 0 0 0 .189-.07l.077-.063c.634-.508 4.672-3.743 4.672-7.575 0-2.55-2.215-4.625-4.938-4.625S2.221 5.006 2.221 7.556c0 3.225 2.86 6.027 4.144 7.137h.004l.04.038.484.4.077.063a.628.628 0 0 0 .074.047zm-2.52-.548a16.898 16.898 0 0 1-1.183-1.315C2.187 11.942.967 9.897.967 7.555c0-3.319 2.855-5.88 6.192-5.88 3.338 0 6.193 2.561 6.193 5.881 0 2.34-1.22 4.387-2.376 5.822a16.898 16.898 0 0 1-1.182 1.315h.15a1.912 1.912 0 0 1 1.914 1.914v1.84a1.912 1.912 0 0 1-1.914 1.914H4.377a1.912 1.912 0 0 1-1.914-1.914v-1.84a1.912 1.912 0 0 1 1.914-1.914zm3.82-6.935c0 .692-.55 1.222-1.187 1.222s-1.185-.529-1.185-1.222.548-1.222 1.185-1.222c.638 0 1.186.529 1.186 1.222zm-1.186 2.477c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477zm2.048 7.71H5.114v-.838h4.093z' fill='%23000' fill-opacity='.4'/%3E%3Cpath d='M2.222 7.555c0-2.55 2.214-4.625 4.937-4.625 2.723 0 4.938 2.075 4.938 4.625 0 3.832-4.038 7.068-4.672 7.575l-.077.063a.286.286 0 0 1-.189.07.286.286 0 0 1-.188-.07l-.077-.063c-.634-.507-4.672-3.743-4.672-7.575zm4.937 2.68c1.348 0 2.442-1.11 2.442-2.478S8.507 5.28 7.159 5.28 4.72 6.39 4.72 7.758s1.092 2.477 2.44 2.477z' fill='%23e1e3e9'/%3E%3Cpath d='M4.377 15.948a.657.657 0 0 0-.659.659v1.84a.657.657 0 0 0 .659.659h5.565a.657.657 0 0 0 .659-.659v-1.84a.657.657 0 0 0-.659-.659zm4.83 1.16H5.114v.838h4.093z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib,.maplibregl-ctrl.maplibregl-ctrl-attrib{background-color:hsla(0,0%,100%,.5);margin:0;padding:0 5px}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact,.maplibregl-ctrl-attrib.maplibregl-compact{background-color:#fff;border-radius:12px;box-sizing:content-box;margin:10px;min-height:20px;padding:2px 24px 2px 0;position:relative}.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.maplibregl-ctrl-attrib.maplibregl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact-show,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact-show{border-radius:12px;padding:2px 8px 2px 28px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner,.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-attrib-button{background-color:hsla(0,0%,100%,.5);background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\");border:0;border-radius:12px;box-sizing:border-box;cursor:pointer;display:none;height:24px;outline:none;position:absolute;right:0;top:0;width:24px}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button{appearance:none;list-style:none}.maplibregl-ctrl-attrib summary.maplibregl-ctrl-attrib-button::-webkit-details-marker{display:none}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-bottom-left .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-top-left .maplibregl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.maplibregl-ctrl-attrib.maplibregl-compact .maplibregl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-inner{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button,.maplibregl-ctrl-attrib.maplibregl-compact-show .maplibregl-ctrl-attrib-button{background-color:rgb(0 0 0/5%)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-bottom-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-top-right>.maplibregl-ctrl-attrib.maplibregl-compact:after{right:0;top:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-top-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{left:0;top:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-bottom-left>.maplibregl-ctrl-attrib.maplibregl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after,.maplibregl-ctrl-attrib.maplibregl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a,.maplibregl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover,.maplibregl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-attrib-empty,.maplibregl-attrib-empty{display:none}.mapboxgl-ctrl-scale,.maplibregl-ctrl-scale{background-color:hsla(0,0%,100%,.75);border:2px solid #333;border-top:#333;box-sizing:border-box;color:#333;font-size:10px;padding:0 5px}.mapboxgl-popup,.maplibregl-popup{display:flex;left:0;pointer-events:none;position:absolute;top:0;will-change:transform}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right,.maplibregl-popup-anchor-top,.maplibregl-popup-anchor-top-left,.maplibregl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right,.maplibregl-popup-anchor-bottom,.maplibregl-popup-anchor-bottom-left,.maplibregl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left,.maplibregl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right,.maplibregl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip,.maplibregl-popup-tip{border:10px solid transparent;height:0;width:0;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip,.maplibregl-popup-anchor-top .maplibregl-popup-tip{align-self:center;border-bottom-color:#fff;border-top:none}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-top-left .maplibregl-popup-tip{align-self:flex-start;border-bottom-color:#fff;border-left:none;border-top:none}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-top-right .maplibregl-popup-tip{align-self:flex-end;border-bottom-color:#fff;border-right:none;border-top:none}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom .maplibregl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom-left .maplibregl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-bottom-right .maplibregl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip,.maplibregl-popup-anchor-left .maplibregl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip,.maplibregl-popup-anchor-right .maplibregl-popup-tip{align-self:center;border-left-color:#fff;border-right:none}.mapboxgl-popup-close-button,.maplibregl-popup-close-button{background-color:transparent;border:0;border-radius:0 3px 0 0;cursor:pointer;position:absolute;right:0;top:0}.mapboxgl-popup-close-button:hover,.maplibregl-popup-close-button:hover{background-color:rgb(0 0 0/5%)}.mapboxgl-popup-content,.maplibregl-popup-content{background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:15px 10px;pointer-events:auto;position:relative}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content,.maplibregl-popup-anchor-top-left .maplibregl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content,.maplibregl-popup-anchor-top-right .maplibregl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content,.maplibregl-popup-anchor-bottom-left .maplibregl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content,.maplibregl-popup-anchor-bottom-right .maplibregl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer,.maplibregl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *,.maplibregl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer,.maplibregl-map:hover .maplibregl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer,.maplibregl-map:active .maplibregl-popup-track-pointer{display:none}.mapboxgl-marker,.maplibregl-marker{left:0;position:absolute;top:0;will-change:transform}.mapboxgl-user-location-dot,.maplibregl-user-location-dot{background-color:#1da1f2;border-radius:50%;height:15px;width:15px}.mapboxgl-user-location-dot:before,.maplibregl-user-location-dot:before{animation:maplibregl-user-location-dot-pulse 2s infinite;background-color:#1da1f2;border-radius:50%;content:\"\";height:15px;position:absolute;width:15px}.mapboxgl-user-location-dot:after,.maplibregl-user-location-dot:after{border:2px solid #fff;border-radius:50%;box-shadow:0 0 3px rgba(0,0,0,.35);box-sizing:border-box;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px}@keyframes maplibregl-user-location-dot-pulse{0%{opacity:1;transform:scale(1)}70%{opacity:0;transform:scale(3)}to{opacity:0;transform:scale(1)}}.mapboxgl-user-location-dot-stale,.maplibregl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after,.maplibregl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle,.maplibregl-user-location-accuracy-circle{background-color:#1da1f233;border-radius:100%;height:1px;width:1px}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active,.maplibregl-crosshair,.maplibregl-crosshair .maplibregl-interactive,.maplibregl-crosshair .maplibregl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom,.maplibregl-boxzoom{background:#fff;border:2px dotted #202020;height:0;left:0;opacity:.5;position:absolute;top:0;width:0}.maplibregl-cooperative-gesture-screen{align-items:center;background:rgba(0,0,0,.4);bottom:0;color:#fff;display:flex;font-size:1.4em;justify-content:center;left:0;line-height:1.2;opacity:0;padding:1rem;pointer-events:none;position:absolute;right:0;top:0;transition:opacity 1s ease 1s}.maplibregl-cooperative-gesture-screen.maplibregl-show{opacity:1;transition:opacity .05s}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:none}@media (hover:none),(max-width:480px){.maplibregl-cooperative-gesture-screen .maplibregl-desktop-message{display:none}.maplibregl-cooperative-gesture-screen .maplibregl-mobile-message{display:block}}";Du(Mp,{});var Jp=Object.freeze({__proto__:null,css:Mp,default:Mp}),Hp=$h((function(t,e){t.exports=function(){var t,e,i;function n(n,a){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",r={};t(r),i=a(r),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=a;else t=a}return n(["exports"],(function(t){var e=i;function i(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=i,this.p2y=n}function n(t,i,n,a){const o=new e(t,i,n,a);return function(t){return o.solve(t)}}i.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,n=0;n<8;n++){var a=this.sampleCurveX(i)-t;if(Math.abs(a)<e)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i-=a/o}var r=0,s=1;for(i=t,n=0;n<20&&(a=this.sampleCurveX(i),!(Math.abs(a-t)<e));n++)t>a?r=i:s=i,i=.5*(s-r)+r;return i},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};const a=n(.25,.1,.25,1);function o(t,e,i){return Math.min(i,Math.max(e,t))}function r(t,e,i){const n=i-e,a=((t-e)%n+n)%n+e;return a===e?i:a}function s(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}let l=1;function c(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function u(t,e,i){const n={};for(const a in t)n[a]=e.call(i||this,t[a],a,t);return n}function d(t,e,i){const n={};for(const a in t)e.call(i||this,t[a],a,t)&&(n[a]=t[a]);return n}function h(t){return Array.isArray(t)?t.map(h):"object"==typeof t&&t?u(t,h):t}const p={};function m(t){p[t]||("undefined"!=typeof console&&console.warn(t),p[t]=!0)}function b(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function y(t){let e=0;for(let i,n,a=0,o=t.length,r=o-1;a<o;r=a++)i=t[a],n=t[r],e+=(n.x-i.x)*(i.y+n.y);return e}function f(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function g(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,i,n,a)=>{const o=n||a;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let I,v,x=null;function Z(t){if(null==x){const e=t.navigator?t.navigator.userAgent:null;x=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return x}function G(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const w={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(t){const e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t,e=0){const i=window.document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(I||(I=document.createElement("a")),I.href=t,I.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==v&&(v=matchMedia("(prefers-reduced-motion: reduce)")),v.matches)}};var W=X;function X(t,e){this.x=t,this.y=e}X.prototype={clone:function(){return new X(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),a=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-n*(this.y-e.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},X.convert=function(t){return t instanceof X?t:Array.isArray(t)?new X(t[0],t[1]):t};const _={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},V="mapbox-tiles";let S,B,L=500,Y=50;function z(){"undefined"==typeof caches||S||(S=caches.open(V))}let R=1/0;const C={supported:!1,testSupport:function(t){!H&&J&&(k?j(t):M=t)}};let M,J,H=!1,k=!1;function j(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,J),t.isContextLost())return;C.supported=!0}catch(t){}t.deleteTexture(e),H=!0}"undefined"!=typeof document&&(J=document.createElement("img"),J.onload=function(){M&&j(M),M=null,k=!0},J.onerror=function(){H=!0,M=null},J.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const F={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(F);class N extends Error{constructor(t,e,i,n){super(`AJAXError: ${e} (${t}): ${i}`),this.status=t,this.statusText=e,this.url=i,this.body=n}}const T=f()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function U(t,e){const i=new AbortController,n=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:T(),signal:i.signal});let a=!1,o=!1;return"json"===t.type&&n.headers.set("Accept","application/json"),((i,r,s)=>{if(o)return;const l=Date.now();fetch(n).then((i=>i.ok?((i,r,s)=>{("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((t=>{o||(r&&s&&function(t,e,i){if(z(),!S)return;const n={status:e.status,statusText:e.statusText,headers:new Headers};e.headers.forEach(((t,e)=>n.headers.set(e,t)));const a=g(e.headers.get("Cache-Control")||"");a["no-store"]||(a["max-age"]&&n.headers.set("Expires",new Date(i+1e3*a["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===B)try{new Response(new ReadableStream),B=!0}catch(t){B=!1}B?e(t.body):t.blob().then(e)}(e,(e=>{const i=new Response(e,n);z(),S&&S.then((e=>e.put(function(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}(t.url),i))).catch((t=>m(t.message)))})))}(n,r,s),a=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((t=>{o||e(new Error(t.message))}))})(i,null,l):i.blob().then((n=>e(new N(i.status,i.statusText,t.url,n)))))).catch((t=>{20!==t.code&&e(new Error(t.message))}))})(),{cancel:()=>{o=!0,a||i.abort()}}}const E=function(t,e){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){if(f()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e);if(!f()){const i=t.url.substring(0,t.url.indexOf("://"));return(_.REGISTERED_PROTOCOLS[i]||U)(t,e)}}if(!(/^file:/.test(i=t.url)||/^file:/.test(T())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return U(t,e);if(f()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){const i=new XMLHttpRequest;i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer");for(const e in t.headers)i.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=()=>{e(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let n=i.response;if("json"===t.type)try{n=JSON.parse(i.response)}catch(t){return e(t)}e(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else{const n=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});e(new N(i.status,i.statusText,t.url,n))}},i.send(t.body),{cancel:()=>i.abort()}}(t,e)},A=function(t,e){return E(s(t,{type:"arrayBuffer"}),e)};function O(t){const e=window.document.createElement("a");return e.href=t,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let K,D;K=[],D=0;const Q=function(t,e){if(C.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),D>=_.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return K.push(i),i}D++;let i=!1;const n=()=>{if(!i)for(i=!0,D--;K.length&&D<_.MAX_PARALLEL_IMAGE_REQUESTS;){const t=K.shift(),{requestParameters:e,callback:i,cancelled:n}=t;n||(t.cancel=Q(e,i).cancel)}},a=A(t,((t,i,a,o)=>{n(),t?e(t):i&&function(t,e){"function"==typeof createImageBitmap?function(t,e){const i=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(i).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(t,e):function(t,e){const i=new Image;i.onload=()=>{e(null,i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame((()=>{i.src=P}))},i.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const n=new Blob([new Uint8Array(t)],{type:"image/png"});i.src=t.byteLength?URL.createObjectURL(n):P}(t,e)}(i,((t,i)=>{null!=t?e(t):null!=i&&e(null,i,{cacheControl:a,expires:o})}))}));return{cancel:()=>{a.cancel(),n()}}};function q(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function $(t,e,i){if(i&&i[t]){const n=i[t].indexOf(e);-1!==n&&i[t].splice(n,1)}}class tt{constructor(t,e={}){s(this,e),this.type=t}}class et extends tt{constructor(t,e={}){super("error",s({error:t},e))}}class it{on(t,e){return this._listeners=this._listeners||{},q(t,e,this._listeners),this}off(t,e){return $(t,e,this._listeners),$(t,e,this._oneTimeListeners),this}once(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},q(t,e,this._oneTimeListeners),this}fire(t,e){"string"==typeof t&&(t=new tt(t,e||{}));const i=t.type;if(this.listens(i)){t.target=this;const e=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of e)i.call(this,t);const n=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const e of n)$(i,e,this._oneTimeListeners),e.call(this,t);const a=this._eventedParent;a&&(s(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),a.fire(t))}else t instanceof et&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var nt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class at{constructor(t,e,i,n){this.message=(t?`${t}: `:"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)}}function ot(t){const e=t.value;return e?[new at(t.key,e,"constants have been deprecated as of v8")]:[]}function rt(t,...e){for(const i of e)for(const e in i)t[e]=i[e];return t}function st(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function lt(t){if(Array.isArray(t))return t.map(lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const i in t)e[i]=lt(t[i]);return e}return st(t)}class ct extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class ut{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,i]of e)this.bindings[t]=i}concat(t){return new ut(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const dt={kind:"null"},ht={kind:"number"},pt={kind:"string"},mt={kind:"boolean"},bt={kind:"color"},yt={kind:"object"},ft={kind:"value"},gt={kind:"collator"},It={kind:"formatted"},vt={kind:"padding"},xt={kind:"resolvedImage"};function Zt(t,e){return{kind:"array",itemType:t,N:e}}function Gt(t){if("array"===t.kind){const e=Gt(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const wt=[dt,ht,pt,mt,bt,It,yt,Zt(ft),vt,xt];function Wt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Wt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of wt)if(!Wt(t,e))return null}return`Expected ${Gt(t)} but found ${Gt(e)} instead.`}function Xt(t,e){return e.some((e=>e.kind===t.kind))}function _t(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Vt,St={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Bt(t){return(t=Math.round(t))<0?0:t>255?255:t}function Lt(t){return Bt("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function Yt(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function zt(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{Vt={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in St)return St[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=i.indexOf("("),a=i.indexOf(")");if(-1!==n&&a+1===i.length){var o=i.substr(0,n),r=i.substr(n+1,a-(n+1)).split(","),s=1;switch(o){case"rgba":if(4!==r.length)return null;s=Yt(r.pop());case"rgb":return 3!==r.length?null:[Lt(r[0]),Lt(r[1]),Lt(r[2]),s];case"hsla":if(4!==r.length)return null;s=Yt(r.pop());case"hsl":if(3!==r.length)return null;var l=(parseFloat(r[0])%360+360)%360/360,c=Yt(r[1]),u=Yt(r[2]),d=u<=.5?u*(c+1):u+c-u*c,h=2*u-d;return[Bt(255*zt(h,d,l+1/3)),Bt(255*zt(h,d,l)),Bt(255*zt(h,d,l-1/3)),s];default:return null}}return null}}catch(t){}class Rt{constructor(t,e,i,n=1){this.r=t,this.g=e,this.b=i,this.a=n}static parse(t){if(!t)return;if(t instanceof Rt)return t;if("string"!=typeof t)return;const e=Vt(t);return e?new Rt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,i,n]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(i)},${n})`}toArray(){const{r:t,g:e,b:i,a:n}=this;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*i/n,n]}}Rt.black=new Rt(0,0,0,1),Rt.white=new Rt(1,1,1,1),Rt.transparent=new Rt(0,0,0,0),Rt.red=new Rt(1,0,0,1);class Ct{constructor(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Mt{constructor(t,e,i,n,a){this.text=t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=a}}class Jt{constructor(t){this.sections=t}static fromString(t){return new Jt([new Mt(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Jt?t:Jt.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}}class Ht{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Ht)return t;if("number"==typeof t)return new Ht([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Ht(t)}}toString(){return JSON.stringify(this.values)}}class kt{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new kt({name:t,available:!1}):null}}function jt(t,e,i,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[t,e,i,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ft(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Rt)return!0;if(t instanceof Ct)return!0;if(t instanceof Jt)return!0;if(t instanceof Ht)return!0;if(t instanceof kt)return!0;if(Array.isArray(t)){for(const e of t)if(!Ft(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Ft(t[e]))return!1;return!0}return!1}function Nt(t){if(null===t)return dt;if("string"==typeof t)return pt;if("boolean"==typeof t)return mt;if("number"==typeof t)return ht;if(t instanceof Rt)return bt;if(t instanceof Ct)return gt;if(t instanceof Jt)return It;if(t instanceof Ht)return vt;if(t instanceof kt)return xt;if(Array.isArray(t)){const e=t.length;let i;for(const e of t){const t=Nt(e);if(i){if(i===t)continue;i=ft;break}i=t}return Zt(i||ft,e)}return yt}function Tt(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Rt||t instanceof Jt||t instanceof Ht||t instanceof kt?t.toString():JSON.stringify(t)}class Ut{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ft(t[1]))return e.error("invalid value");const i=t[1];let n=Nt(i);const a=e.expectedType;return"array"!==n.kind||0!==n.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(n=a),new Ut(n,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Et{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const At={string:pt,number:ht,boolean:mt,object:yt};class Ot{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let i,n=1;const a=t[0];if("array"===a){let a,o;if(t.length>2){const i=t[1];if("string"!=typeof i||!(i in At)||"object"===i)return e.error('The item type argument of "array" must be one of string, number, boolean',1);a=At[i],n++}else a=ft;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}i=Zt(a,o)}else{if(!At[a])throw new Error(`Types doesn't contain name = ${a}`);i=At[a]}const o=[];for(;n<t.length;n++){const i=e.parse(t[n],n,ft);if(!i)return null;o.push(i)}return new Ot(i,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const i=this.args[e].evaluate(t);if(!Wt(this.type,Nt(i)))return i;if(e===this.args.length-1)throw new Et(`Expected value to be of type ${Gt(this.type)}, but found ${Gt(Nt(i))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Pt={"to-boolean":mt,"to-color":bt,"to-number":ht,"to-string":pt};class Kt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[0];if(!Pt[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");const n=Pt[i],a=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],i,ft);if(!n)return null;a.push(n)}return new Kt(n,a)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,i;for(const n of this.args){if(e=n.evaluate(t),i=null,e instanceof Rt)return e;if("string"==typeof e){const i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&(i=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:jt(e[0],e[1],e[2],e[3]),!i))return new Rt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Et(i||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("padding"===this.type.kind){let e;for(const i of this.args){e=i.evaluate(t);const n=Ht.parse(e);if(n)return n}throw new Et(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("number"===this.type.kind){let e=null;for(const i of this.args){if(e=i.evaluate(t),null===e)return 0;const n=Number(e);if(!isNaN(n))return n}throw new Et(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Jt.fromString(Tt(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?kt.fromString(Tt(this.args[0].evaluate(t))):Tt(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Dt=["Unknown","Point","LineString","Polygon"];class Qt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Dt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Rt.parse(t)),e}}class qt{constructor(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const i=t[0],n=qt.definitions[i];if(!n)return e.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const a=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,r=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[n,o]of r){s=new xe(e.registry,e.path,null,e.scope);const r=[];let l=!1;for(let e=1;e<t.length;e++){const i=t[e],a=Array.isArray(n)?n[e-1]:n.type,o=s.parse(i,1+r.length,a);if(!o){l=!0;break}r.push(o)}if(!l)if(Array.isArray(n)&&n.length!==r.length)s.error(`Expected ${n.length} arguments, but found ${r.length} instead.`);else{for(let t=0;t<r.length;t++){const e=Array.isArray(n)?n[t]:n.type,i=r[t];s.concat(t+1).checkSubtype(e,i.type)}if(0===s.errors.length)return new qt(i,a,o,r)}}if(1===r.length)e.errors.push(...s.errors);else{const i=(r.length?r:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(Gt).join(", ")})`:`(${Gt(e.type)}...)`;var e})).join(" | "),n=[];for(let i=1;i<t.length;i++){const a=e.parse(t[i],1+n.length);if(!a)return null;n.push(Gt(a.type))}e.error(`Expected arguments of type ${i}, but found (${n.join(", ")}) instead.`)}return null}static register(t,e){qt.definitions=e;for(const i in e)t[i]=qt}}class $t{constructor(t,e,i){this.type=gt,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");const n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,mt);if(!n)return null;const a=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,mt);if(!a)return null;let o=null;return i.locale&&(o=e.parse(i.locale,1,pt),!o)?null:new $t(n,a,o)}evaluate(t){return new Ct(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const te=8192;function ee(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ie(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ne(t,e){const i=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,a=Math.pow(2,e.z);return[Math.round(i*a*te),Math.round(n*a*te)]}function ae(t,e,i){const n=t[0]-e[0],a=t[1]-e[1],o=t[0]-i[0],r=t[1]-i[1];return n*r-o*a==0&&n*o<=0&&a*r<=0}function oe(t,e){let i=!1;for(let r=0,s=e.length;r<s;r++){const s=e[r];for(let e=0,r=s.length;e<r-1;e++){if(ae(t,s[e],s[e+1]))return!1;(a=s[e])[1]>(n=t)[1]!=(o=s[e+1])[1]>n[1]&&n[0]<(o[0]-a[0])*(n[1]-a[1])/(o[1]-a[1])+a[0]&&(i=!i)}}var n,a,o;return i}function re(t,e){for(let i=0;i<e.length;i++)if(oe(t,e[i]))return!0;return!1}function se(t,e,i,n){const a=n[0]-i[0],o=n[1]-i[1],r=(t[0]-i[0])*o-a*(t[1]-i[1]),s=(e[0]-i[0])*o-a*(e[1]-i[1]);return r>0&&s<0||r<0&&s>0}function le(t,e,i){for(const c of i)for(let i=0;i<c.length-1;++i)if(0!=(s=[(r=c[i+1])[0]-(o=c[i])[0],r[1]-o[1]])[0]*(l=[(a=e)[0]-(n=t)[0],a[1]-n[1]])[1]-s[1]*l[0]&&se(n,a,o,r)&&se(o,r,n,a))return!0;var n,a,o,r,s,l;return!1}function ce(t,e){for(let i=0;i<t.length;++i)if(!oe(t[i],e))return!1;for(let i=0;i<t.length-1;++i)if(le(t[i],t[i+1],e))return!1;return!0}function ue(t,e){for(let i=0;i<e.length;i++)if(ce(t,e[i]))return!0;return!1}function de(t,e,i){const n=[];for(let a=0;a<t.length;a++){const o=[];for(let n=0;n<t[a].length;n++){const r=ne(t[a][n],i);ee(e,r),o.push(r)}n.push(o)}return n}function he(t,e,i){const n=[];for(let a=0;a<t.length;a++){const o=de(t[a],e,i);n.push(o)}return n}function pe(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){const e=.5*n;let a=t[0]-i[0]>e?-n:i[0]-t[0]>e?n:0;0===a&&(a=t[0]-i[2]>e?-n:i[2]-t[0]>e?n:0),t[0]+=a}ee(e,t)}function me(t,e,i,n){const a=Math.pow(2,n.z)*te,o=[n.x*te,n.y*te],r=[];for(const n of t)for(const t of n){const n=[t.x+o[0],t.y+o[1]];pe(n,e,i,a),r.push(n)}return r}function be(t,e,i,n){const a=Math.pow(2,n.z)*te,o=[n.x*te,n.y*te],r=[];for(const i of t){const t=[];for(const n of i){const i=[n.x+o[0],n.y+o[1]];ee(e,i),t.push(i)}r.push(t)}if(e[2]-e[0]<=a/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of r)for(const n of t)pe(n,e,i,a)}var s;return r}class ye{constructor(t,e){this.type=mt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ft(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const i=e.features[t].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new ye(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new ye(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new ye(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if("Polygon"===e.type){const o=de(e.coordinates,n,a),r=me(t.geometry(),i,n,a);if(!ie(i,n))return!1;for(const t of r)if(!oe(t,o))return!1}if("MultiPolygon"===e.type){const o=he(e.coordinates,n,a),r=me(t.geometry(),i,n,a);if(!ie(i,n))return!1;for(const t of r)if(!re(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if("Polygon"===e.type){const o=de(e.coordinates,n,a),r=be(t.geometry(),i,n,a);if(!ie(i,n))return!1;for(const t of r)if(!ce(t,o))return!1}if("MultiPolygon"===e.type){const o=he(e.coordinates,n,a),r=be(t.geometry(),i,n,a);if(!ie(i,n))return!1;for(const t of r)if(!ue(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function fe(t){if(t instanceof qt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof ye)return!1;let e=!0;return t.eachChild((t=>{e&&!fe(t)&&(e=!1)})),e}function ge(t){if(t instanceof qt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ge(t)&&(e=!1)})),e}function Ie(t,e){if(t instanceof qt&&e.indexOf(t.name)>=0)return!1;let i=!0;return t.eachChild((t=>{i&&!Ie(t,e)&&(i=!1)})),i}class ve{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const i=t[1];return e.scope.has(i)?new ve(i,e.scope.get(i)):e.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class xe{constructor(t,e=[],i,n=new ut,a=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=n,this.errors=a,this.expectedType=i}parse(t,e,i,n,a={}){return e?this.concat(e,i,n)._parse(t,a):this._parse(t,a)}_parse(t,e){function i(t,e,i){return"assert"===i?new Ot(e,[t]):"coerce"===i?new Kt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=t[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const a=this.registry[n];if(a){let n=a.parse(t,this);if(!n)return null;if(this.expectedType){const t=this.expectedType,a=n.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==a.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==a.kind&&"string"!==a.kind)if("padding"!==t.kind||"value"!==a.kind&&"number"!==a.kind&&"array"!==a.kind){if(this.checkSubtype(t,a))return null}else n=i(n,t,e.typeAnnotation||"coerce");else n=i(n,t,e.typeAnnotation||"coerce");else n=i(n,t,e.typeAnnotation||"assert")}if(!(n instanceof Ut)&&"resolvedImage"!==n.type.kind&&Ze(n)){const e=new Qt;try{n=new Ut(n.type,n.evaluate(e))}catch(t){return this.error(t.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,i){const n="number"==typeof t?this.path.concat(t):this.path,a=i?this.scope.concat(i):this.scope;return new xe(this.registry,n,e||null,a,this.errors)}error(t,...e){const i=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new ct(i,t))}checkSubtype(t,e){const i=Wt(t,e);return i&&this.error(i),i}}function Ze(t){if(t instanceof ve)return Ze(t.boundExpression);if(t instanceof qt&&"error"===t.name)return!1;if(t instanceof $t)return!1;if(t instanceof ye)return!1;const e=t instanceof Kt||t instanceof Ot;let i=!0;return t.eachChild((t=>{i=e?i&&Ze(t):i&&t instanceof Ut})),!!i&&fe(t)&&Ie(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ge(t,e){const i=t.length-1;let n,a,o=0,r=i,s=0;for(;o<=r;)if(s=Math.floor((o+r)/2),n=t[s],a=t[s+1],n<=e){if(s===i||e<a)return s;o=s+1}else{if(!(n>e))throw new Et("Input is not a number.");r=s-1}return 0}class we{constructor(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of i)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const i=e.parse(t[1],1,ht);if(!i)return null;const n=[];let a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let i=1;i<t.length;i+=2){const o=1===i?-1/0:t[i],r=t[i+1],s=i,l=i+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(r,l,a);if(!c)return null;a=a||c.type,n.push([o,c])}return new we(a,i,n)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const a=e.length;return n>=e[a-1]?i[a-1].evaluate(t):i[Ge(e,n)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function We(t,e,i){return t*(1-i)+e*i}var Xe=Object.freeze({__proto__:null,number:We,color:function(t,e,i){return new Rt(We(t.r,e.r,i),We(t.g,e.g,i),We(t.b,e.b,i),We(t.a,e.a,i))},array:function(t,e,i){return t.map(((t,n)=>We(t,e[n],i)))},padding:function(t,e,i){const n=t.values,a=e.values;return new Ht([We(n[0],a[0],i),We(n[1],a[1],i),We(n[2],a[2],i),We(n[3],a[3],i)])}});const _e=.95047,Ve=1.08883,Se=4/29,Be=6/29,Le=3*Be*Be,Ye=Math.PI/180,ze=180/Math.PI;function Re(t){return t>.008856451679035631?Math.pow(t,1/3):t/Le+Se}function Ce(t){return t>Be?t*t*t:Le*(t-Se)}function Me(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Je(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function He(t){const e=Je(t.r),i=Je(t.g),n=Je(t.b),a=Re((.4124564*e+.3575761*i+.1804375*n)/_e),o=Re((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(a-o),b:200*(o-Re((.0193339*e+.119192*i+.9503041*n)/Ve)),alpha:t.a}}function ke(t){let e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*Ce(e),i=_e*Ce(i),n=Ve*Ce(n),new Rt(Me(3.2404542*i-1.5371385*e-.4985314*n),Me(-.969266*i+1.8760108*e+.041556*n),Me(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function je(t,e,i){const n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}const Fe={forward:He,reverse:ke,interpolate:function(t,e,i){return{l:We(t.l,e.l,i),a:We(t.a,e.a,i),b:We(t.b,e.b,i),alpha:We(t.alpha,e.alpha,i)}}},Ne={forward:function(t){const{l:e,a:i,b:n}=He(t),a=Math.atan2(n,i)*ze;return{h:a<0?a+360:a,c:Math.sqrt(i*i+n*n),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Ye,i=t.c;return ke({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:je(t.h,e.h,i),c:We(t.c,e.c,i),l:We(t.l,e.l,i),alpha:We(t.alpha,e.alpha,i)}}};var Te=Object.freeze({__proto__:null,lab:Fe,hcl:Ne});class Ue{constructor(t,e,i,n,a){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(const[t,e]of a)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,i,n,a){let o=0;if("exponential"===t.name)o=Ee(i,t.base,n,a);else if("linear"===t.name)o=Ee(i,1,n,a);else if("cubic-bezier"===t.name){const r=t.controlPoints;o=new e(r[0],r[1],r[2],r[3]).solve(Ee(i,1,n,a))}return o}static parse(t,e){let[i,n,a,...o]=t;if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const t=n[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:t}}else{if("cubic-bezier"!==n[0])return e.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const t=n.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(a=e.parse(a,2,ht),!a)return null;const r=[];let s=null;"interpolate-hcl"===i||"interpolate-lab"===i?s=bt:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const i=o[t],n=o[t+1],a=t+3,l=t+4;if("number"!=typeof i)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(r.length&&r[r.length-1][0]>=i)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',a);const c=e.parse(n,l,s);if(!c)return null;s=s||c.type,r.push([i,c])}return"number"===s.kind||"color"===s.kind||"padding"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Ue(s,i,n,a,r):e.error(`Type ${Gt(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);const n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);const a=e.length;if(n>=e[a-1])return i[a-1].evaluate(t);const o=Ge(e,n),r=Ue.interpolationFactor(this.interpolation,n,e[o],e[o+1]),s=i[o].evaluate(t),l=i[o+1].evaluate(t);return"interpolate"===this.operator?Xe[this.type.kind.toLowerCase()](s,l,r):"interpolate-hcl"===this.operator?Ne.reverse(Ne.interpolate(Ne.forward(s),Ne.forward(l),r)):Fe.reverse(Fe.interpolate(Fe.forward(s),Fe.forward(l),r))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Ee(t,e,i,n){const a=n-i,o=t-i;return 0===a?0:1===e?o/a:(Math.pow(e,o)-1)/(Math.pow(e,a)-1)}class Ae{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let i=null;const n=e.expectedType;n&&"value"!==n.kind&&(i=n);const a=[];for(const n of t.slice(1)){const t=e.parse(n,1+a.length,i,void 0,{typeAnnotation:"omit"});if(!t)return null;i=i||t.type,a.push(t)}if(!i)throw new Error("No output type");const o=n&&a.some((t=>Wt(n,t.type)));return new Ae(o?ft:i,a)}evaluate(t){let e,i=null,n=0;for(const a of this.args)if(n++,i=a.evaluate(t),i&&i instanceof kt&&!i.available&&(e||(e=i.name),i=null,n===this.args.length&&(i=e)),null!==i)break;return i}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}class Oe{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let n=1;n<t.length-1;n+=2){const a=t[n];if("string"!=typeof a)return e.error(`Expected string, but found ${typeof a} instead.`,n);if(/[^a-zA-Z0-9_]/.test(a))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=e.parse(t[n+1],n+1);if(!o)return null;i.push([a,o])}const n=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return n?new Oe(i,n):null}outputDefined(){return this.result.outputDefined()}}class Pe{constructor(t,e,i){this.type=t,this.index=e,this.input=i}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ht),n=e.parse(t[2],2,Zt(e.expectedType||ft));return i&&n?new Pe(n.type.itemType,i,n):null}evaluate(t){const e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new Et(`Array index out of bounds: ${e} < 0.`);if(e>=i.length)throw new Et(`Array index out of bounds: ${e} > ${i.length-1}.`);if(e!==Math.floor(e))throw new Et(`Array index must be an integer, but found ${e} instead.`);return i[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Ke{constructor(t,e){this.type=mt,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ft),n=e.parse(t[2],2,ft);return i&&n?Xt(i.type,[mt,pt,ht,dt,ft])?new Ke(i,n):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gt(i.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!_t(e,["boolean","string","number","null"]))throw new Et(`Expected first argument to be of type boolean, string, number or null, but found ${Gt(Nt(e))} instead.`);if(!_t(i,["string","array"]))throw new Et(`Expected second argument to be of type array or string, but found ${Gt(Nt(i))} instead.`);return i.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class De{constructor(t,e,i){this.type=ht,this.needle=t,this.haystack=e,this.fromIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ft),n=e.parse(t[2],2,ft);if(!i||!n)return null;if(!Xt(i.type,[mt,pt,ht,dt,ft]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gt(i.type)} instead`);if(4===t.length){const a=e.parse(t[3],3,ht);return a?new De(i,n,a):null}return new De(i,n)}evaluate(t){const e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!_t(e,["boolean","string","number","null"]))throw new Et(`Expected first argument to be of type boolean, string, number or null, but found ${Gt(Nt(e))} instead.`);if(!_t(i,["string","array"]))throw new Et(`Expected second argument to be of type array or string, but found ${Gt(Nt(i))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Qe{constructor(t,e,i,n,a,o){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=a,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const a={},o=[];for(let r=2;r<t.length-1;r+=2){let s=t[r];const l=t[r+1];Array.isArray(s)||(s=[s]);const c=e.concat(r);if(0===s.length)return c.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,Nt(t)))return null}else i=Nt(t);if(void 0!==a[String(t)])return c.error("Branch labels must be unique.");a[String(t)]=o.length}const u=e.parse(l,r,n);if(!u)return null;n=n||u.type,o.push(u)}const r=e.parse(t[1],1,ft);if(!r)return null;const s=e.parse(t[t.length-1],t.length-1,n);return s?"value"!==r.type.kind&&e.concat(1).checkSubtype(i,r.type)?null:new Qe(i,n,r,a,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(Nt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class qe{constructor(t,e,i){this.type=t,this.branches=e,this.otherwise=i}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const n=[];for(let a=1;a<t.length-1;a+=2){const o=e.parse(t[a],a,mt);if(!o)return null;const r=e.parse(t[a+1],a+1,i);if(!r)return null;n.push([o,r]),i=i||r.type}const a=e.parse(t[t.length-1],t.length-1,i);if(!a)return null;if(!i)throw new Error("Can't infer output type");return new qe(i,n,a)}evaluate(t){for(const[e,i]of this.branches)if(e.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,i]of this.branches)t(e),t(i);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}}class $e{constructor(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=e.parse(t[1],1,ft),n=e.parse(t[2],2,ht);if(!i||!n)return null;if(!Xt(i.type,[Zt(ft),pt,ft]))return e.error(`Expected first argument to be of type array or string, but found ${Gt(i.type)} instead`);if(4===t.length){const a=e.parse(t[3],3,ht);return a?new $e(i.type,i,n,a):null}return new $e(i.type,i,n)}evaluate(t){const e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!_t(e,["string","array"]))throw new Et(`Expected first argument to be of type array or string, but found ${Gt(Nt(e))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ti(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ei(t,e,i,n){return 0===n.compare(e,i)}function ii(t,e,i){const n="=="!==t&&"!="!==t;return class a{constructor(t,e,i){this.type=mt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const i=t[0];let o=e.parse(t[1],1,ft);if(!o)return null;if(!ti(i,o.type))return e.concat(1).error(`"${i}" comparisons are not supported for type '${Gt(o.type)}'.`);let r=e.parse(t[2],2,ft);if(!r)return null;if(!ti(i,r.type))return e.concat(2).error(`"${i}" comparisons are not supported for type '${Gt(r.type)}'.`);if(o.type.kind!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return e.error(`Cannot compare types '${Gt(o.type)}' and '${Gt(r.type)}'.`);n&&("value"===o.type.kind&&"value"!==r.type.kind?o=new Ot(r.type,[o]):"value"!==o.type.kind&&"value"===r.type.kind&&(r=new Ot(o.type,[r])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,gt),!s)return null}return new a(o,r,s)}evaluate(a){const o=this.lhs.evaluate(a),r=this.rhs.evaluate(a);if(n&&this.hasUntypedArgument){const e=Nt(o),i=Nt(r);if(e.kind!==i.kind||"string"!==e.kind&&"number"!==e.kind)throw new Et(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${i.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const t=Nt(o),i=Nt(r);if("string"!==t.kind||"string"!==i.kind)return e(a,o,r)}return this.collator?i(a,o,r,this.collator.evaluate(a)):e(a,o,r)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}}}const ni=ii("==",(function(t,e,i){return e===i}),ei),ai=ii("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!ei(0,e,i,n)})),oi=ii("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),ri=ii(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),si=ii("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0})),li=ii(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0}));class ci{constructor(t,e,i,n,a){this.type=pt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=a}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,ht);if(!i)return null;const n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");let a=null;if(n.locale&&(a=e.parse(n.locale,1,pt),!a))return null;let o=null;if(n.currency&&(o=e.parse(n.currency,1,pt),!o))return null;let r=null;if(n["min-fraction-digits"]&&(r=e.parse(n["min-fraction-digits"],1,ht),!r))return null;let s=null;return n["max-fraction-digits"]&&(s=e.parse(n["max-fraction-digits"],1,ht),!s)?null:new ci(i,a,o,r,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class ui{constructor(t){this.type=It,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");const n=[];let a=!1;for(let i=1;i<=t.length-1;++i){const o=t[i];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,ht),!t))return null;let i=null;if(o["text-font"]&&(i=e.parse(o["text-font"],1,Zt(pt)),!i))return null;let r=null;if(o["text-color"]&&(r=e.parse(o["text-color"],1,bt),!r))return null;const s=n[n.length-1];s.scale=t,s.font=i,s.textColor=r}else{const o=e.parse(t[i],1,ft);if(!o)return null;const r=o.type.kind;if("string"!==r&&"value"!==r&&"null"!==r&&"resolvedImage"!==r)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,n.push({content:o,scale:null,font:null,textColor:null})}}return new ui(n)}evaluate(t){return new Jt(this.sections.map((e=>{const i=e.content.evaluate(t);return Nt(i)===xt?new Mt("",i,null,null,null):new Mt(Tt(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}}class di{constructor(t){this.type=xt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const i=e.parse(t[1],1,pt);return i?new di(i):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),i=kt.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}}class hi{constructor(t){this.type=ht,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error(`Expected argument of type string or array, but found ${Gt(i.type)} instead.`):new hi(i):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Et(`Expected value to be of type string or array, but found ${Gt(Nt(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const pi={"==":ni,"!=":ai,">":ri,"<":oi,">=":li,"<=":si,array:Ot,at:Pe,boolean:Ot,case:qe,coalesce:Ae,collator:$t,format:ui,image:di,in:Ke,"index-of":De,interpolate:Ue,"interpolate-hcl":Ue,"interpolate-lab":Ue,length:hi,let:Oe,literal:Ut,match:Qe,number:Ot,"number-format":ci,object:Ot,slice:$e,step:we,string:Ot,"to-boolean":Kt,"to-color":Kt,"to-number":Kt,"to-string":Kt,var:ve,within:ye};function mi(t,[e,i,n,a]){e=e.evaluate(t),i=i.evaluate(t),n=n.evaluate(t);const o=a?a.evaluate(t):1,r=jt(e,i,n,o);if(r)throw new Et(r);return new Rt(e/255*o,i/255*o,n/255*o,o)}function bi(t,e){return t in e}function yi(t,e){const i=e[t];return void 0===i?null:i}function fi(t){return{type:t}}function gi(t){return{result:"success",value:t}}function Ii(t){return{result:"error",value:t}}function vi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function xi(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Zi(t){return!!t.expression&&t.expression.interpolated}function Gi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function wi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Wi(t){return t}function Xi(t,e){const i="color"===e.type,n=t.stops&&"object"==typeof t.stops[0][0],a=n||!(n||void 0!==t.property),o=t.type||(Zi(e)?"exponential":"interval");if(i||"padding"===e.type){const n=i?Rt.parse:Ht.parse;(t=rt({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],n(t[1])]))),t.default=n(t.default?t.default:e.default)}if(t.colorSpace&&"rgb"!==t.colorSpace&&!Te[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let r,s,l;if("exponential"===o)r=Bi;else if("interval"===o)r=Si;else if("categorical"===o){r=Vi,s=Object.create(null);for(const e of t.stops)s[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);r=Li}if(n){const i={},n=[];for(let e=0;e<t.stops.length;e++){const a=t.stops[e],o=a[0].zoom;void 0===i[o]&&(i[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},n.push(o)),i[o].stops.push([a[0].value,a[1]])}const a=[];for(const t of n)a.push([i[t].zoom,Xi(i[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Ue.interpolationFactor.bind(void 0,o),zoomStops:a.map((t=>t[0])),evaluate:({zoom:i},n)=>Bi({stops:a,base:t.base},e,i).evaluate(i,n)}}if(a){const i="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:i,interpolationFactor:Ue.interpolationFactor.bind(void 0,i),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:i})=>r(t,e,i,s,l)}}return{kind:"source",evaluate(i,n){const a=n&&n.properties?n.properties[t.property]:void 0;return void 0===a?_i(t.default,e.default):r(t,e,a,s,l)}}}function _i(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function Vi(t,e,i,n,a){return _i(typeof i===a?n[i]:void 0,t.default,e.default)}function Si(t,e,i){if("number"!==Gi(i))return _i(t.default,e.default);const n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];const a=Ge(t.stops.map((t=>t[0])),i);return t.stops[a][1]}function Bi(t,e,i){const n=void 0!==t.base?t.base:1;if("number"!==Gi(i))return _i(t.default,e.default);const a=t.stops.length;if(1===a)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[a-1][0])return t.stops[a-1][1];const o=Ge(t.stops.map((t=>t[0])),i),r=function(t,e,i,n){const a=n-i,o=t-i;return 0===a?0:1===e?o/a:(Math.pow(e,o)-1)/(Math.pow(e,a)-1)}(i,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let c=Xe[e.type]||Wi;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Te[t.colorSpace];c=(t,i)=>e.reverse(e.interpolate(e.forward(t),e.forward(i),r))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==i)return c(e,i,r)}}:c(s,l,r)}function Li(t,e,i){switch(e.type){case"color":i=Rt.parse(i);break;case"formatted":i=Jt.fromString(i.toString());break;case"resolvedImage":i=kt.fromString(i.toString());break;case"padding":i=Ht.parse(i);break;default:Gi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0)}return _i(i,t.default,e.default)}qt.register(pi,{error:[{kind:"error"},[pt],(t,[e])=>{throw new Et(e.evaluate(t))}],typeof:[pt,[ft],(t,[e])=>Gt(Nt(e.evaluate(t)))],"to-rgba":[Zt(ht,4),[bt],(t,[e])=>e.evaluate(t).toArray()],rgb:[bt,[ht,ht,ht],mi],rgba:[bt,[ht,ht,ht,ht],mi],has:{type:mt,overloads:[[[pt],(t,[e])=>bi(e.evaluate(t),t.properties())],[[pt,yt],(t,[e,i])=>bi(e.evaluate(t),i.evaluate(t))]]},get:{type:ft,overloads:[[[pt],(t,[e])=>yi(e.evaluate(t),t.properties())],[[pt,yt],(t,[e,i])=>yi(e.evaluate(t),i.evaluate(t))]]},"feature-state":[ft,[pt],(t,[e])=>yi(e.evaluate(t),t.featureState||{})],properties:[yt,[],t=>t.properties()],"geometry-type":[pt,[],t=>t.geometryType()],id:[ft,[],t=>t.id()],zoom:[ht,[],t=>t.globals.zoom],"heatmap-density":[ht,[],t=>t.globals.heatmapDensity||0],"line-progress":[ht,[],t=>t.globals.lineProgress||0],accumulated:[ft,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[ht,fi(ht),(t,e)=>{let i=0;for(const n of e)i+=n.evaluate(t);return i}],"*":[ht,fi(ht),(t,e)=>{let i=1;for(const n of e)i*=n.evaluate(t);return i}],"-":{type:ht,overloads:[[[ht,ht],(t,[e,i])=>e.evaluate(t)-i.evaluate(t)],[[ht],(t,[e])=>-e.evaluate(t)]]},"/":[ht,[ht,ht],(t,[e,i])=>e.evaluate(t)/i.evaluate(t)],"%":[ht,[ht,ht],(t,[e,i])=>e.evaluate(t)%i.evaluate(t)],ln2:[ht,[],()=>Math.LN2],pi:[ht,[],()=>Math.PI],e:[ht,[],()=>Math.E],"^":[ht,[ht,ht],(t,[e,i])=>Math.pow(e.evaluate(t),i.evaluate(t))],sqrt:[ht,[ht],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[ht,[ht],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[ht,[ht],(t,[e])=>Math.log(e.evaluate(t))],log2:[ht,[ht],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[ht,[ht],(t,[e])=>Math.sin(e.evaluate(t))],cos:[ht,[ht],(t,[e])=>Math.cos(e.evaluate(t))],tan:[ht,[ht],(t,[e])=>Math.tan(e.evaluate(t))],asin:[ht,[ht],(t,[e])=>Math.asin(e.evaluate(t))],acos:[ht,[ht],(t,[e])=>Math.acos(e.evaluate(t))],atan:[ht,[ht],(t,[e])=>Math.atan(e.evaluate(t))],min:[ht,fi(ht),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[ht,fi(ht),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[ht,[ht],(t,[e])=>Math.abs(e.evaluate(t))],round:[ht,[ht],(t,[e])=>{const i=e.evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[ht,[ht],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[ht,[ht],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[mt,[pt,ft],(t,[e,i])=>t.properties()[e.value]===i.value],"filter-id-==":[mt,[ft],(t,[e])=>t.id()===e.value],"filter-type-==":[mt,[pt],(t,[e])=>t.geometryType()===e.value],"filter-<":[mt,[pt,ft],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n<a}],"filter-id-<":[mt,[ft],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<n}],"filter->":[mt,[pt,ft],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n>a}],"filter-id->":[mt,[ft],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>n}],"filter-<=":[mt,[pt,ft],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[mt,[ft],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i<=n}],"filter->=":[mt,[pt,ft],(t,[e,i])=>{const n=t.properties()[e.value],a=i.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[mt,[ft],(t,[e])=>{const i=t.id(),n=e.value;return typeof i==typeof n&&i>=n}],"filter-has":[mt,[ft],(t,[e])=>e.value in t.properties()],"filter-has-id":[mt,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[mt,[Zt(pt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[mt,[Zt(ft)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[mt,[pt,Zt(ft)],(t,[e,i])=>i.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[mt,[pt,Zt(ft)],(t,[e,i])=>function(t,e,i,n){for(;i<=n;){const a=i+n>>1;if(e[a]===t)return!0;e[a]>t?n=a-1:i=a+1}return!1}(t.properties()[e.value],i.value,0,i.value.length-1)],all:{type:mt,overloads:[[[mt,mt],(t,[e,i])=>e.evaluate(t)&&i.evaluate(t)],[fi(mt),(t,e)=>{for(const i of e)if(!i.evaluate(t))return!1;return!0}]]},any:{type:mt,overloads:[[[mt,mt],(t,[e,i])=>e.evaluate(t)||i.evaluate(t)],[fi(mt),(t,e)=>{for(const i of e)if(i.evaluate(t))return!0;return!1}]]},"!":[mt,[mt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[mt,[pt],(t,[e])=>{const i=t.globals&&t.globals.isSupportedScript;return!i||i(e.evaluate(t))}],upcase:[pt,[pt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[pt,[pt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[pt,fi(ft),(t,e)=>e.map((e=>Tt(e.evaluate(t)))).join("")],"resolved-locale":[pt,[gt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Yi{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Qt,this._defaultValue=e?function(t){return"color"===t.type&&wi(t.default)?new Rt(0,0,0,0):"color"===t.type?Rt.parse(t.default)||null:"padding"===t.type?Ht.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,i,n,a,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,i,n,a,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new Et(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function zi(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in pi}function Ri(t,e){const i=new xe(pi,[],e?function(t){const e={color:bt,string:pt,number:ht,enum:pt,boolean:mt,formatted:It,padding:vt,resolvedImage:xt};return"array"===t.type?Zt(e[t.value]||ft,t.length):e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?gi(new Yi(n,e)):Ii(i.errors)}class Ci{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ge(e.expression)}evaluateWithoutErrorHandling(t,e,i,n,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,a,o)}evaluate(t,e,i,n,a,o){return this._styleExpression.evaluate(t,e,i,n,a,o)}}class Mi{constructor(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ge(e.expression),this.interpolationType=n}evaluateWithoutErrorHandling(t,e,i,n,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,a,o)}evaluate(t,e,i,n,a,o){return this._styleExpression.evaluate(t,e,i,n,a,o)}interpolationFactor(t,e,i){return this.interpolationType?Ue.interpolationFactor(this.interpolationType,t,e,i):0}}function Ji(t,e){const i=Ri(t,e);if("error"===i.result)return i;const n=i.value.expression,a=fe(n);if(!a&&!vi(e))return Ii([new ct("","data expressions not supported")]);const o=Ie(n,["zoom"]);if(!o&&!xi(e))return Ii([new ct("","zoom expressions not supported")]);const r=ki(n);return r||o?r instanceof ct?Ii([r]):r instanceof Ue&&!Zi(e)?Ii([new ct("",'"interpolate" expressions cannot be used with this property')]):gi(r?new Mi(a?"camera":"composite",i.value,r.labels,r instanceof Ue?r.interpolation:void 0):new Ci(a?"constant":"source",i.value)):Ii([new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Hi{constructor(t,e){this._parameters=t,this._specification=e,rt(this,Xi(this._parameters,this._specification))}static deserialize(t){return new Hi(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function ki(t){let e=null;if(t instanceof Oe)e=ki(t.result);else if(t instanceof Ae){for(const i of t.args)if(e=ki(i),e)break}else(t instanceof we||t instanceof Ue)&&t.input instanceof qt&&"zoom"===t.input.name&&(e=t);return e instanceof ct||t.eachChild((t=>{const i=ki(t);i instanceof ct?e=i:!e&&i?e=new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function ji(t){const e=t.key,i=t.value,n=t.valueSpec||{},a=t.objectElementValidators||{},o=t.style,r=t.styleSpec;let s=[];const l=Gi(i);if("object"!==l)return[new at(e,i,`object expected, ${l} found`)];for(const t in i){const l=t.split(".")[0],c=n[l]||n["*"];let u;if(a[l])u=a[l];else if(n[l])u=bn;else if(a["*"])u=a["*"];else{if(!n["*"]){s.push(new at(e,i[t],`unknown property "${t}"`));continue}u=bn}s=s.concat(u({key:(e?`${e}.`:e)+t,value:i[t],valueSpec:c,style:o,styleSpec:r,object:i,objectKey:t},i))}for(const t in n)a[t]||n[t].required&&void 0===n[t].default&&void 0===i[t]&&s.push(new at(e,i,`missing required property "${t}"`));return s}function Fi(t){const e=t.value,i=t.valueSpec,n=t.style,a=t.styleSpec,o=t.key,r=t.arrayElementValidator||bn;if("array"!==Gi(e))return[new at(o,e,`array expected, ${Gi(e)} found`)];if(i.length&&e.length!==i.length)return[new at(o,e,`array length ${i.length} expected, length ${e.length} found`)];if(i["min-length"]&&e.length<i["min-length"])return[new at(o,e,`array length at least ${i["min-length"]} expected, length ${e.length} found`)];let s={type:i.value,values:i.values};a.$version<7&&(s.function=i.function),"object"===Gi(i.value)&&(s=i.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(r({array:e,arrayIndex:t,value:e[t],valueSpec:s,style:n,styleSpec:a,key:`${o}[${t}]`}));return l}function Ni(t){const e=t.key,i=t.value,n=t.valueSpec;let a=Gi(i);return"number"===a&&i!=i&&(a="NaN"),"number"!==a?[new at(e,i,`number expected, ${a} found`)]:"minimum"in n&&i<n.minimum?[new at(e,i,`${i} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&i>n.maximum?[new at(e,i,`${i} is greater than the maximum value ${n.maximum}`)]:[]}function Ti(t){const e=t.valueSpec,i=st(t.value.type);let n,a,o,r={};const s="categorical"!==i&&void 0===t.value.property,l=!s,c="array"===Gi(t.value.stops)&&"array"===Gi(t.value.stops[0])&&"object"===Gi(t.value.stops[0][0]),u=ji({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new at(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const n=t.value;return e=e.concat(Fi({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:d})),"array"===Gi(n)&&0===n.length&&e.push(new at(t.key,n,"array must have at least one stop")),e},default:function(t){return bn({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&s&&u.push(new at(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||u.push(new at(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!Zi(t.valueSpec)&&u.push(new at(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!vi(t.valueSpec)?u.push(new at(t.key,t.value,"property functions not supported")):s&&!xi(t.valueSpec)&&u.push(new at(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==t.value.property||u.push(new at(t.key,t.value,'"property" property is required')),u;function d(t){let i=[];const n=t.value,s=t.key;if("array"!==Gi(n))return[new at(s,n,`array expected, ${Gi(n)} found`)];if(2!==n.length)return[new at(s,n,`array length 2 expected, length ${n.length} found`)];if(c){if("object"!==Gi(n[0]))return[new at(s,n,`object expected, ${Gi(n[0])} found`)];if(void 0===n[0].zoom)return[new at(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new at(s,n,"object stop key must have value")];if(o&&o>st(n[0].zoom))return[new at(s,n[0].zoom,"stop zoom values must appear in ascending order")];st(n[0].zoom)!==o&&(o=st(n[0].zoom),a=void 0,r={}),i=i.concat(ji({key:`${s}[0]`,value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ni,value:h}}))}else i=i.concat(h({key:`${s}[0]`,value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return zi(lt(n[1]))?i.concat([new at(`${s}[1]`,n[1],"expressions are not allowed in function stops.")]):i.concat(bn({key:`${s}[1]`,value:n[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function h(t,o){const s=Gi(t.value),l=st(t.value),c=null!==t.value?t.value:o;if(n){if(s!==n)return[new at(t.key,c,`${s} stop domain type must match previous stop domain type ${n}`)]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new at(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){let n=`number expected, ${s} found`;return vi(e)&&void 0===i&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at(t.key,c,n)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==a&&l<a?[new at(t.key,c,"stop domain values must appear in ascending order")]:(a=l,"categorical"===i&&l in r?[new at(t.key,c,"stop domain values must be unique")]:(r[l]=!0,[])):[new at(t.key,c,`integer expected, found ${l}`)]}}function Ui(t){const e=("property"===t.expressionContext?Ji:Ri)(lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new at(`${t.key}${e.key}`,t.value,e.message)));const i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new at(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ge(i))return[new at(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ge(i))return[new at(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Ie(i,["zoom","feature-state"]))return[new at(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!fe(i))return[new at(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ei(t){const e=t.key,i=t.value,n=t.valueSpec,a=[];return Array.isArray(n.values)?-1===n.values.indexOf(st(i))&&a.push(new at(e,i,`expected one of [${n.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(n.values).indexOf(st(i))&&a.push(new at(e,i,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(i)} found`)),a}function Ai(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Ai(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Oi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pi(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Ai(t)||(t=Qi(t));const e=Ri(t,Oi);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,i,n)=>e.value.evaluate(t,i,{},n),needGeometry:Di(t)}}function Ki(t,e){return t<e?-1:t>e?1:0}function Di(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Di(t[e]))return!0;return!1}function Qi(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?qi(t[1],t[2],"=="):"!="===e?en(qi(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?qi(t[1],t[2],e):"any"===e?(i=t.slice(1),["any"].concat(i.map(Qi))):"all"===e?["all"].concat(t.slice(1).map(Qi)):"none"===e?["all"].concat(t.slice(1).map(Qi).map(en)):"in"===e?$i(t[1],t.slice(2)):"!in"===e?en($i(t[1],t.slice(2))):"has"===e?tn(t[1]):"!has"===e?en(tn(t[1])):"within"!==e||t;var i}function qi(t,e,i){switch(t){case"$type":return[`filter-type-${i}`,e];case"$id":return[`filter-id-${i}`,e];default:return[`filter-${i}`,t,e]}}function $i(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Ki)]]:["filter-in-small",t,["literal",e]]}}function tn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function en(t){return["!",t]}function nn(t){return Ai(lt(t.value))?Ui(rt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):an(t)}function an(t){const e=t.value,i=t.key;if("array"!==Gi(e))return[new at(i,e,`array expected, ${Gi(e)} found`)];const n=t.styleSpec;let a,o=[];if(e.length<1)return[new at(i,e,"filter array must have at least 1 element")];switch(o=o.concat(Ei({key:`${i}[0]`,value:e[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),st(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===st(e[1])&&o.push(new at(i,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new at(i,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(a=Gi(e[1]),"string"!==a&&o.push(new at(`${i}[1]`,e[1],`string expected, ${a} found`)));for(let r=2;r<e.length;r++)a=Gi(e[r]),"$type"===st(e[1])?o=o.concat(Ei({key:`${i}[${r}]`,value:e[r],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new at(`${i}[${r}]`,e[r],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let n=1;n<e.length;n++)o=o.concat(an({key:`${i}[${n}]`,value:e[n],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":a=Gi(e[1]),2!==e.length?o.push(new at(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==a&&o.push(new at(`${i}[1]`,e[1],`string expected, ${a} found`));break;case"within":a=Gi(e[1]),2!==e.length?o.push(new at(i,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==a&&o.push(new at(`${i}[1]`,e[1],`object expected, ${a} found`))}return o}function on(t,e){const i=t.key,n=t.style,a=t.styleSpec,o=t.value,r=t.objectKey,s=a[`${e}_${t.layerType}`];if(!s)return[];const l=r.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return bn({key:i,value:o,valueSpec:a.transition,style:n,styleSpec:a});const c=t.valueSpec||s[r];if(!c)return[new at(i,o,`unknown property "${r}"`)];let u;if("string"===Gi(o)&&vi(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new at(i,o,`"${r}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const d=[];return"symbol"===t.layerType&&("text-field"===r&&n&&!n.glyphs&&d.push(new at(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===r&&wi(lt(o))&&"identity"===st(o.type)&&d.push(new at(i,o,'"text-font" does not support identity functions'))),d.concat(bn({key:t.key,value:o,valueSpec:c,style:n,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:r}))}function rn(t){return on(t,"paint")}function sn(t){return on(t,"layout")}function ln(t){let e=[];const i=t.value,n=t.key,a=t.style,o=t.styleSpec;i.type||i.ref||e.push(new at(n,i,'either "type" or "ref" is required'));let r=st(i.type);const s=st(i.ref);if(i.id){const o=st(i.id);for(let r=0;r<t.arrayIndex;r++){const t=a.layers[r];st(t.id)===o&&e.push(new at(n,i.id,`duplicate layer id "${i.id}", previously used at line ${t.id.__line__}`))}}if("ref"in i){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in i&&e.push(new at(n,i[t],`"${t}" is prohibited for ref layers`))})),a.layers.forEach((e=>{st(e.id)===s&&(t=e)})),t?t.ref?e.push(new at(n,i.ref,"ref cannot reference another ref layer")):r=st(t.type):e.push(new at(n,i.ref,`ref layer "${s}" not found`))}else if("background"!==r)if(i.source){const t=a.sources&&a.sources[i.source],o=t&&st(t.type);t?"vector"===o&&"raster"===r?e.push(new at(n,i.source,`layer "${i.id}" requires a raster source`)):"raster"===o&&"raster"!==r?e.push(new at(n,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==r?e.push(new at(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==r||!i.paint||!i.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new at(n,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new at(n,i,`layer "${i.id}" must specify a "source-layer"`)):e.push(new at(n,i.source,`source "${i.source}" not found`))}else e.push(new at(n,i,'missing required property "source"'));return e=e.concat(ji({key:n,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>bn({key:`${n}.type`,value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"}),filter:nn,layout:t=>ji({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>sn(rt({layerType:r},t))}}),paint:t=>ji({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>rn(rt({layerType:r},t))}})}})),e}function cn(t){const e=t.value,i=t.key,n=Gi(e);return"string"!==n?[new at(i,e,`string expected, ${n} found`)]:[]}const un={promoteId:function({key:t,value:e}){if("string"===Gi(e))return cn({key:t,value:e});{const i=[];for(const n in e)i.push(...cn({key:`${t}.${n}`,value:e[n]}));return i}}};function dn(t){const e=t.value,i=t.key,n=t.styleSpec,a=t.style;if(!e.type)return[new at(i,e,'"type" is required')];const o=st(e.type);let r;switch(o){case"vector":case"raster":case"raster-dem":return r=ji({key:i,value:e,valueSpec:n[`source_${o.replace("-","_")}`],style:t.style,styleSpec:n,objectElementValidators:un}),r;case"geojson":if(r=ji({key:i,value:e,valueSpec:n.source_geojson,style:a,styleSpec:n,objectElementValidators:un}),e.cluster)for(const t in e.clusterProperties){const[n,a]=e.clusterProperties[t],o="string"==typeof n?[n,["accumulated"],["get",t]]:n;r.push(...Ui({key:`${i}.${t}.map`,value:a,expressionContext:"cluster-map"})),r.push(...Ui({key:`${i}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return r;case"video":return ji({key:i,value:e,valueSpec:n.source_video,style:a,styleSpec:n});case"image":return ji({key:i,value:e,valueSpec:n.source_image,style:a,styleSpec:n});case"canvas":return[new at(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ei({key:`${i}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:n})}}function hn(t){const e=t.value,i=t.styleSpec,n=i.light,a=t.style;let o=[];const r=Gi(e);if(void 0===e)return o;if("object"!==r)return o=o.concat([new at("light",e,`object expected, ${r} found`)]),o;for(const t in e){const r=t.match(/^(.*)-transition$/);o=o.concat(r&&n[r[1]]&&n[r[1]].transition?bn({key:t,value:e[t],valueSpec:i.transition,style:a,styleSpec:i}):n[t]?bn({key:t,value:e[t],valueSpec:n[t],style:a,styleSpec:i}):[new at(t,e[t],`unknown property "${t}"`)])}return o}function pn(t){const e=t.value,i=t.styleSpec,n=i.terrain,a=t.style;let o=[];const r=Gi(e);if(void 0===e)return o;if("object"!==r)return o=o.concat([new at("terrain",e,`object expected, ${r} found`)]),o;for(const t in e)o=o.concat(n[t]?bn({key:t,value:e[t],valueSpec:n[t],style:a,styleSpec:i}):[new at(t,e[t],`unknown property "${t}"`)]);return o}const mn={"*":()=>[],array:Fi,boolean:function(t){const e=t.value,i=t.key,n=Gi(e);return"boolean"!==n?[new at(i,e,`boolean expected, ${n} found`)]:[]},number:Ni,color:function(t){const e=t.key,i=t.value,n=Gi(i);return"string"!==n?[new at(e,i,`color expected, ${n} found`)]:null===Vt(i)?[new at(e,i,`color expected, "${i}" found`)]:[]},constants:ot,enum:Ei,filter:nn,function:Ti,layer:ln,object:ji,source:dn,light:hn,terrain:pn,string:cn,formatted:function(t){return 0===cn(t).length?[]:Ui(t)},resolvedImage:function(t){return 0===cn(t).length?[]:Ui(t)},padding:function(t){const e=t.key,i=t.value;if("array"===Gi(i)){if(i.length<1||i.length>4)return[new at(e,i,`padding requires 1 to 4 values; ${i.length} values found`)];const t={type:"number"};let n=[];for(let a=0;a<i.length;a++)n=n.concat(bn({key:`${e}[${a}]`,value:i[a],valueSpec:t}));return n}return Ni({key:e,value:i,valueSpec:{}})}};function bn(t){const e=t.value,i=t.valueSpec,n=t.styleSpec;return i.expression&&wi(st(e))?Ti(t):i.expression&&zi(lt(e))?Ui(t):i.type&&mn[i.type]?mn[i.type](t):ji(rt({},t,{valueSpec:i.type?n[i.type]:i}))}function yn(t){const e=t.value,i=t.key,n=cn(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new at(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new at(i,e,'"glyphs" url must include a "{range}" token'))),n}function fn(t,e=nt){let i=[];return i=i.concat(bn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:yn,"*":()=>[]}})),t.constants&&(i=i.concat(ot({key:"constants",value:t.constants,style:t,styleSpec:e}))),gn(i)}function gn(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function In(t){return function(...e){return gn(t.apply(this,e))}}fn.source=In(dn),fn.light=In(hn),fn.terrain=In(pn),fn.layer=In(ln),fn.filter=In(nn),fn.paintProperty=In(rn),fn.layoutProperty=In(sn);const vn=fn,xn=vn.light,Zn=vn.paintProperty,Gn=vn.layoutProperty;function wn(t,e){let i=!1;if(e&&e.length)for(const n of e)t.fire(new et(new Error(n.message))),i=!0;return i}class Wn{constructor(t,e,i){const n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const a=new Int32Array(this.arrayBuffer);t=a[0],this.d=(e=a[1])+2*(i=a[2]);for(let t=0;t<this.d*this.d;t++){const e=a[3+t],i=a[3+t+1];n.push(e===i?null:a.subarray(e,i))}const o=a[3+n.length+1];this.keys=a.subarray(a[3+n.length],o),this.bboxes=a.subarray(o),this.insert=this._insertReadonly}else{this.d=e+2*i;for(let t=0;t<this.d*this.d;t++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;const a=i/e*t;this.min=-a,this.max=t+a}insert(t,e,i,n,a){this._forEachCell(e,i,n,a,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(a)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,i,n,a,o){this.cells[a].push(o)}query(t,e,i,n,a){const o=this.min,r=this.max;if(t<=o&&e<=o&&r<=i&&r<=n&&!a)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(t,e,i,n,this._queryCell,o,{},a),o}}_queryCell(t,e,i,n,a,o,r,s){const l=this.cells[a];if(null!==l){const a=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const d=l[u];if(void 0===r[d]){const l=4*d;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):t<=c[l+2]&&e<=c[l+3]&&i>=c[l+0]&&n>=c[l+1])?(r[d]=!0,o.push(a[d])):r[d]=!1}}}}_forEachCell(t,e,i,n,a,o,r,s){const l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(i),d=this._convertToCellCoord(n);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++){const c=this.d*l+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(l),this._convertFromCellCoord(h+1),this._convertFromCellCoord(l+1)))&&a.call(this,t,e,i,n,c,o,r,s))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let i=0;for(let t=0;t<this.cells.length;t++)i+=this.cells[t].length;const n=new Int32Array(e+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;let a=e;for(let e=0;e<t.length;e++){const i=t[e];n[3+e]=a,n.set(i,a),a+=i.length}return n[3+t.length]=a,n.set(this.keys,a),a+=this.keys.length,n[3+t.length+1]=a,n.set(this.bboxes,a),a+=this.bboxes.length,n.buffer}static serialize(t,e){const i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}}static deserialize(t){return new Wn(t.buffer)}}const Xn={};function _n(t,e,i={}){if(Xn[t])throw new Error(`${t} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Xn[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}_n("Object",Object),_n("TransferableGridIndex",Wn),_n("Color",Rt),_n("Error",Error),_n("AJAXError",N),_n("ResolvedImage",kt),_n("StylePropertyFunction",Hi),_n("StyleExpression",Yi,{omit:["_evaluator"]}),_n("ZoomDependentExpression",Mi),_n("ZoomConstantExpression",Ci),_n("CompoundExpression",qt,{omit:["_evaluate"]});for(const t in pi)pi[t]._classRegistryKey||_n(`Expression_${t}`,pi[t]);function Vn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Sn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob)return t;if(Vn(t))return e&&e.push(t),t;if(G(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const i=t;return e&&e.push(i.buffer),i}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const i=[];for(const n of t)i.push(Sn(n,e));return i}if("object"==typeof t){const i=t.constructor,n=i._classRegistryKey;if(!n)throw new Error("can't serialize object of unregistered class");if(!Xn[n])throw new Error(`${n} is not registered.`);const a=i.serialize?i.serialize(t,e):{};if(i.serialize){if(e&&a===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in t){if(!t.hasOwnProperty(i))continue;if(Xn[n].omit.indexOf(i)>=0)continue;const o=t[i];a[i]=Xn[n].shallow.indexOf(i)>=0?o:Sn(o,e)}t instanceof Error&&(a.message=t.message)}if(a.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(a.$name=n),a}throw new Error("can't serialize object of type "+typeof t)}function Bn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||Vn(t)||G(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(Bn);if("object"==typeof t){const e=t.$name||"Object";if(!Xn[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:i}=Xn[e];if(!i)throw new Error(`can't deserialize unregistered class ${e}`);if(i.deserialize)return i.deserialize(t);const n=Object.create(i.prototype);for(const i of Object.keys(t)){if("$name"===i)continue;const a=t[i];n[i]=Xn[e].shallow.indexOf(i)>=0?a:Bn(a)}return n}throw new Error("can't deserialize object of type "+typeof t)}class Ln{constructor(){this.first=!0}update(t,e){const i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))}}const Yn={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function zn(t){for(const e of t)if(Mn(e.charCodeAt(0)))return!0;return!1}function Rn(t){for(const e of t)if(!Cn(e.charCodeAt(0)))return!1;return!0}function Cn(t){return!(Yn.Arabic(t)||Yn["Arabic Supplement"](t)||Yn["Arabic Extended-A"](t)||Yn["Arabic Presentation Forms-A"](t)||Yn["Arabic Presentation Forms-B"](t))}function Mn(t){return!(746!==t&&747!==t&&(t<4352||!(Yn["Bopomofo Extended"](t)||Yn.Bopomofo(t)||Yn["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Yn["CJK Compatibility Ideographs"](t)||Yn["CJK Compatibility"](t)||Yn["CJK Radicals Supplement"](t)||Yn["CJK Strokes"](t)||!(!Yn["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Yn["CJK Unified Ideographs Extension A"](t)||Yn["CJK Unified Ideographs"](t)||Yn["Enclosed CJK Letters and Months"](t)||Yn["Hangul Compatibility Jamo"](t)||Yn["Hangul Jamo Extended-A"](t)||Yn["Hangul Jamo Extended-B"](t)||Yn["Hangul Jamo"](t)||Yn["Hangul Syllables"](t)||Yn.Hiragana(t)||Yn["Ideographic Description Characters"](t)||Yn.Kanbun(t)||Yn["Kangxi Radicals"](t)||Yn["Katakana Phonetic Extensions"](t)||Yn.Katakana(t)&&12540!==t||!(!Yn["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Yn["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Yn["Unified Canadian Aboriginal Syllabics"](t)||Yn["Unified Canadian Aboriginal Syllabics Extended"](t)||Yn["Vertical Forms"](t)||Yn["Yijing Hexagram Symbols"](t)||Yn["Yi Syllables"](t)||Yn["Yi Radicals"](t))))}function Jn(t){return!(Mn(t)||function(t){return!!(Yn["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Yn["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Yn["Letterlike Symbols"](t)||Yn["Number Forms"](t)||Yn["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Yn["Control Pictures"](t)&&9251!==t||Yn["Optical Character Recognition"](t)||Yn["Enclosed Alphanumerics"](t)||Yn["Geometric Shapes"](t)||Yn["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Yn["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Yn["CJK Symbols and Punctuation"](t)||Yn.Katakana(t)||Yn["Private Use Area"](t)||Yn["CJK Compatibility Forms"](t)||Yn["Small Form Variants"](t)||Yn["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Hn(t){return t>=1424&&t<=2303||Yn["Arabic Presentation Forms-A"](t)||Yn["Arabic Presentation Forms-B"](t)}function kn(t,e){return!(!e&&Hn(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Yn.Khmer(t))}function jn(t){for(const e of t)if(Hn(e.charCodeAt(0)))return!0;return!1}const Fn="deferred",Nn="loading",Tn="loaded";let Un=null,En="unavailable",An=null;const On=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(En="error"),Un&&Un(t)};function Pn(){Kn.fire(new tt("pluginStateChange",{pluginStatus:En,pluginURL:An}))}const Kn=new it,Dn=function(){return En},Qn=function(){if(En!==Fn||!An)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");En=Nn,Pn(),An&&A({url:An},(t=>{t?On(t):(En=Tn,Pn())}))},qn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>En===Tn||null!=qn.applyArabicShaping,isLoading:()=>En===Nn,setState(t){if(!f())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");En=t.pluginStatus,An=t.pluginURL},isParsed(){if(!f())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=qn.applyArabicShaping&&null!=qn.processBidirectionalText&&null!=qn.processStyledBidirectionalText},getPluginURL(){if(!f())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return An}};class $n{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ln,this.transition={})}isSupportedScript(t){return function(t,e){for(const i of t)if(!kn(i.charCodeAt(0),e))return!1;return!0}(t,qn.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}}}class ta{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(wi(t))return new Hi(t,e);if(zi(t)){const i=Ji(t,e);if("error"===i.result)throw new Error(i.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return i.value}{let i=t;return"color"===e.type&&"string"==typeof t?i=Rt.parse(t):"padding"!==e.type||"number"!=typeof t&&!Array.isArray(t)||(i=Ht.parse(t)),{kind:"constant",evaluate:()=>i}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)}}class ea{constructor(t){this.property=t,this.value=new ta(t,void 0)}transitioned(t,e){return new na(this.property,this.value,e,s({},t.transition,this.transition),t.now)}untransitioned(){return new na(this.property,this.value,null,{},0)}}class ia{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return h(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ea(this._values[t].property)),this._values[t].value=new ta(this._values[t].property,null===e?void 0:h(e))}getTransition(t){return h(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ea(this._values[t].property)),this._values[t].transition=h(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i);const n=this.getTransition(e);void 0!==n&&(t[`${e}-transition`]=n)}return t}transitioned(t,e){const i=new aa(this._properties);for(const n of Object.keys(this._values))i._values[n]=this._values[n].transitioned(t,e._values[n]);return i}untransitioned(){const t=new aa(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class na{constructor(t,e,i,n,a){this.property=t,this.value=e,this.begin=a+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=i)}possiblyEvaluate(t,e,i){const n=t.now||0,a=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(n>this.end)return this.prior=null,a;if(this.value.isDataDriven())return this.prior=null,a;if(n<this.begin)return o.possiblyEvaluate(t,e,i);{const r=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),a,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(r))}}return a}}class aa{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,i){const n=new sa(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].possiblyEvaluate(t,e,i);return n}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class oa{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return h(this._values[t].value)}setValue(t,e){this._values[t]=new ta(this._values[t].property,null===e?void 0:h(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const i=this.getValue(e);void 0!==i&&(t[e]=i)}return t}possiblyEvaluate(t,e,i){const n=new sa(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].possiblyEvaluate(t,e,i);return n}}class ra{constructor(t,e,i){this.property=t,this.value=e,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,i,n){return this.property.evaluate(this.value,this.parameters,t,e,i,n)}}class sa{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class la{constructor(t){this.specification=t}possiblyEvaluate(t,e){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(e)}interpolate(t,e,i){const n=Xe[this.specification.type];return n?n(t,e,i):t}}class ca{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,i,n){return new ra(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,n)}:t.expression,e)}interpolate(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new ra(this,{kind:"constant",value:void 0},t.parameters);const n=Xe[this.specification.type];return n?new ra(this,{kind:"constant",value:n(t.value.value,e.value.value,i)},t.parameters):t}evaluate(t,e,i,n,a,o){return"constant"===t.kind?t.value:t.evaluate(e,i,n,a,o)}}class ua extends ca{possiblyEvaluate(t,e,i,n){if(void 0===t.value)return new ra(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const a=t.expression.evaluate(e,null,{},i,n),o="resolvedImage"===t.property.specification.type&&"string"!=typeof a?a.name:a,r=this._calculate(o,o,o,e);return new ra(this,{kind:"constant",value:r},e)}if("camera"===t.expression.kind){const i=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new ra(this,{kind:"constant",value:i},e)}return new ra(this,t.expression,e)}evaluate(t,e,i,n,a,o){if("source"===t.kind){const r=t.evaluate(e,i,n,a,o);return this._calculate(r,r,r,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,n),t.evaluate({zoom:Math.floor(e.zoom)},i,n),t.evaluate({zoom:Math.floor(e.zoom)+1},i,n),e):t.value}_calculate(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class da{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,n){if(void 0!==t.value){if("constant"===t.expression.kind){const a=t.expression.evaluate(e,null,{},i,n);return this._calculate(a,a,a,e)}return this._calculate(t.expression.evaluate(new $n(Math.floor(e.zoom-1),e)),t.expression.evaluate(new $n(Math.floor(e.zoom),e)),t.expression.evaluate(new $n(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}}interpolate(t){return t}}class ha{constructor(t){this.specification=t}possiblyEvaluate(t,e,i,n){return!!t.expression.evaluate(e,null,{},i,n)}interpolate(){return!1}}class pa{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const i=t[e];i.specification.overridable&&this.overridableProperties.push(e);const n=this.defaultPropertyValues[e]=new ta(i,void 0),a=this.defaultTransitionablePropertyValues[e]=new ea(i);this.defaultTransitioningPropertyValues[e]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}}}_n("DataDrivenProperty",ca),_n("DataConstantProperty",la),_n("CrossFadedDataDrivenProperty",ua),_n("CrossFadedProperty",da),_n("ColorRampProperty",ha);const ma="-transition";class ba extends it{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new oa(e.layout)),e.paint)){this._transitionablePaint=new ia(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sa(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,i={}){null!=e&&this._validate(Gn,`layers.${this.id}.layout.${t}`,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith(ma)?this._transitionablePaint.getTransition(t.slice(0,-ma.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,i={}){if(null!=e&&this._validate(Zn,`layers.${this.id}.paint.${t}`,t,e,i))return!1;if(t.endsWith(ma))return this._transitionablePaint.setTransition(t.slice(0,-ma.length),e||void 0),!1;{const i=this._transitionablePaint._values[t],n="cross-faded-data-driven"===i.property.specification["property-type"],a=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const r=this._transitionablePaint._values[t].value;return r.isDataDriven()||a||n||this._handleOverridablePaintPropertyUpdate(t,o,r)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,i){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),d(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,i,n,a={}){return(!a||!1!==a.validate)&&wn(this,t.call(vn,{key:e,layerType:this.type,objectKey:i,value:n,styleSpec:nt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof ra&&vi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const ya={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class fa{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ga{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ia(t,e=1){let i=0,n=0;return{members:t.map((t=>{const a=ya[t.type].BYTES_PER_ELEMENT,o=i=va(i,Math.max(e,a)),r=t.components||1;return n=Math.max(n,a),i+=a*r,{name:t.name,type:t.type,components:r,offset:o}})),size:va(i,Math.max(n,e)),alignment:e}}function va(t,e){return Math.ceil(t/e)*e}class xa extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.int16[n+0]=e,this.int16[n+1]=i,t}}xa.prototype.bytesPerElement=4,_n("StructArrayLayout2i4",xa);class Za extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n)}emplace(t,e,i,n,a){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=n,this.int16[o+3]=a,t}}Za.prototype.bytesPerElement=8,_n("StructArrayLayout4i8",Za);class Ga extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a,o){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n,a,o)}emplace(t,e,i,n,a,o,r){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=n,this.int16[s+3]=a,this.int16[s+4]=o,this.int16[s+5]=r,t}}Ga.prototype.bytesPerElement=12,_n("StructArrayLayout2i4i12",Ga);class wa extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a,o){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n,a,o)}emplace(t,e,i,n,a,o,r){const s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[l+4]=n,this.uint8[l+5]=a,this.uint8[l+6]=o,this.uint8[l+7]=r,t}}wa.prototype.bytesPerElement=8,_n("StructArrayLayout2i4ub8",wa);class Wa extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.float32[n+0]=e,this.float32[n+1]=i,t}}Wa.prototype.bytesPerElement=8,_n("StructArrayLayout2f8",Wa);class Xa extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a,o,r,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,n,a,o,r,s,l,c)}emplace(t,e,i,n,a,o,r,s,l,c,u){const d=10*t;return this.uint16[d+0]=e,this.uint16[d+1]=i,this.uint16[d+2]=n,this.uint16[d+3]=a,this.uint16[d+4]=o,this.uint16[d+5]=r,this.uint16[d+6]=s,this.uint16[d+7]=l,this.uint16[d+8]=c,this.uint16[d+9]=u,t}}Xa.prototype.bytesPerElement=20,_n("StructArrayLayout10ui20",Xa);class _a extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a,o,r,s,l,c,u,d){const h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,n,a,o,r,s,l,c,u,d)}emplace(t,e,i,n,a,o,r,s,l,c,u,d,h){const p=12*t;return this.int16[p+0]=e,this.int16[p+1]=i,this.int16[p+2]=n,this.int16[p+3]=a,this.uint16[p+4]=o,this.uint16[p+5]=r,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=d,this.int16[p+11]=h,t}}_a.prototype.bytesPerElement=24,_n("StructArrayLayout4i4ui4i24",_a);class Va extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const a=3*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=n,t}}Va.prototype.bytesPerElement=12,_n("StructArrayLayout3f12",Va);class Sa extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Sa.prototype.bytesPerElement=4,_n("StructArrayLayout1ul4",Sa);class Ba extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a,o,r,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,n,a,o,r,s,l)}emplace(t,e,i,n,a,o,r,s,l,c){const u=10*t,d=5*t;return this.int16[u+0]=e,this.int16[u+1]=i,this.int16[u+2]=n,this.int16[u+3]=a,this.int16[u+4]=o,this.int16[u+5]=r,this.uint32[d+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,t}}Ba.prototype.bytesPerElement=20,_n("StructArrayLayout6i1ul2ui20",Ba);class La extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a,o){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n,a,o)}emplace(t,e,i,n,a,o,r){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=n,this.int16[s+3]=a,this.int16[s+4]=o,this.int16[s+5]=r,t}}La.prototype.bytesPerElement=12,_n("StructArrayLayout2i2i2i12",La);class Ya extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,n,a)}emplace(t,e,i,n,a,o){const r=4*t,s=8*t;return this.float32[r+0]=e,this.float32[r+1]=i,this.float32[r+2]=n,this.int16[s+6]=a,this.int16[s+7]=o,t}}Ya.prototype.bytesPerElement=16,_n("StructArrayLayout2f1f2i16",Ya);class za extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n)}emplace(t,e,i,n,a){const o=12*t,r=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[r+1]=n,this.float32[r+2]=a,t}}za.prototype.bytesPerElement=12,_n("StructArrayLayout2ub2f12",za);class Ra extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const a=3*t;return this.uint16[a+0]=e,this.uint16[a+1]=i,this.uint16[a+2]=n,t}}Ra.prototype.bytesPerElement=6,_n("StructArrayLayout3ui6",Ra);class Ca extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y){const f=this.length;return this.resize(f+1),this.emplace(f,t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y)}emplace(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f){const g=24*t,I=12*t,v=48*t;return this.int16[g+0]=e,this.int16[g+1]=i,this.uint16[g+2]=n,this.uint16[g+3]=a,this.uint32[I+2]=o,this.uint32[I+3]=r,this.uint32[I+4]=s,this.uint16[g+10]=l,this.uint16[g+11]=c,this.uint16[g+12]=u,this.float32[I+7]=d,this.float32[I+8]=h,this.uint8[v+36]=p,this.uint8[v+37]=m,this.uint8[v+38]=b,this.uint32[I+10]=y,this.int16[g+22]=f,t}}Ca.prototype.bytesPerElement=48,_n("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ca);class Ma extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f,g,I,v,x,Z,G,w,W,X,_){const V=this.length;return this.resize(V+1),this.emplace(V,t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f,g,I,v,x,Z,G,w,W,X,_)}emplace(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f,g,I,v,x,Z,G,w,W,X,_,V){const S=34*t,B=17*t;return this.int16[S+0]=e,this.int16[S+1]=i,this.int16[S+2]=n,this.int16[S+3]=a,this.int16[S+4]=o,this.int16[S+5]=r,this.int16[S+6]=s,this.int16[S+7]=l,this.uint16[S+8]=c,this.uint16[S+9]=u,this.uint16[S+10]=d,this.uint16[S+11]=h,this.uint16[S+12]=p,this.uint16[S+13]=m,this.uint16[S+14]=b,this.uint16[S+15]=y,this.uint16[S+16]=f,this.uint16[S+17]=g,this.uint16[S+18]=I,this.uint16[S+19]=v,this.uint16[S+20]=x,this.uint16[S+21]=Z,this.uint16[S+22]=G,this.uint32[B+12]=w,this.float32[B+13]=W,this.float32[B+14]=X,this.float32[B+15]=_,this.float32[B+16]=V,t}}Ma.prototype.bytesPerElement=68,_n("StructArrayLayout8i15ui1ul4f68",Ma);class Ja extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Ja.prototype.bytesPerElement=4,_n("StructArrayLayout1f4",Ja);class Ha extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const a=3*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.int16[a+2]=n,t}}Ha.prototype.bytesPerElement=6,_n("StructArrayLayout3i6",Ha);class ka extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,i){const n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)}emplace(t,e,i,n){const a=4*t;return this.uint32[2*t+0]=e,this.uint16[a+2]=i,this.uint16[a+3]=n,t}}ka.prototype.bytesPerElement=8,_n("StructArrayLayout1ul2ui8",ka);class ja extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const i=this.length;return this.resize(i+1),this.emplace(i,t,e)}emplace(t,e,i){const n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,t}}ja.prototype.bytesPerElement=4,_n("StructArrayLayout2ui4",ja);class Fa extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Fa.prototype.bytesPerElement=2,_n("StructArrayLayout1ui2",Fa);class Na extends ga{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,i,n){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n)}emplace(t,e,i,n,a){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=n,this.float32[o+3]=a,t}}Na.prototype.bytesPerElement=16,_n("StructArrayLayout4f16",Na);class Ta extends fa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new W(this.anchorPointX,this.anchorPointY)}}Ta.prototype.size=20;class Ua extends Ba{get(t){return new Ta(this,t)}}_n("CollisionBoxArray",Ua);class Ea extends fa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ea.prototype.size=48;class Aa extends Ca{get(t){return new Ea(this,t)}}_n("PlacedSymbolArray",Aa);class Oa extends fa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Oa.prototype.size=68;class Pa extends Ma{get(t){return new Oa(this,t)}}_n("SymbolInstanceArray",Pa);class Ka extends Ja{getoffsetX(t){return this.float32[1*t+0]}}_n("GlyphOffsetArray",Ka);class Da extends Ha{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}_n("SymbolLineVertexArray",Da);class Qa extends fa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qa.prototype.size=8;class qa extends ka{get(t){return new Qa(this,t)}}_n("FeatureIndexArray",qa);class $a extends xa{}class to extends xa{}class eo extends xa{}class io extends Ga{}class no extends wa{}class ao extends Wa{}class oo extends Xa{}class ro extends _a{}class so extends Va{}class lo extends Sa{}class co extends La{}class uo extends za{}class ho extends Ra{}class po extends ja{}const mo=Ia([{name:"a_pos",components:2,type:"Int16"}],4),{members:bo}=mo;class yo{constructor(t=[]){this.segments=t}prepareSegment(t,e,i,n){let a=this.segments[this.segments.length-1];return t>yo.MAX_VERTEX_ARRAY_LENGTH&&m(`Max vertices per segment is ${yo.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!a||a.vertexLength+t>yo.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==n)&&(a={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==n&&(a.sortKey=n),this.segments.push(a)),a}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,i,n){return new yo([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:n,vaos:{},sortKey:0}])}}function fo(t,e){return 256*(t=o(Math.floor(t),0,255))+o(Math.floor(e),0,255)}yo.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_n("SegmentVector",yo);const go=Ia([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Io={exports:{}},vo={exports:{}};vo.exports=function(t,e){var i,n,a,o,r,s,l,c;for(n=t.length-(i=3&t.length),a=e,r=3432918353,s=461845907,c=0;c<n;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,a=27492+(65535&(o=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return a^=t.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0};var xo={exports:{}};xo.exports=function(t,e){for(var i,n=t.length,a=e^n,o=0;n>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:a^=(255&t.charCodeAt(o+2))<<16;case 2:a^=(255&t.charCodeAt(o+1))<<8;case 1:a=1540483477*(65535&(a^=255&t.charCodeAt(o)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0};var Zo=vo.exports,Go=xo.exports;Io.exports=Zo,Io.exports.murmur3=Zo,Io.exports.murmur2=Go;class wo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,i,n){this.ids.push(Wo(t)),this.positions.push(e,i,n)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const e=Wo(t);let i=0,n=this.ids.length-1;for(;i<n;){const t=i+n>>1;this.ids[t]>=e?n=t:i=t+1}const a=[];for(;this.ids[i]===e;)a.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return a}static serialize(t,e){const i=new Float64Array(t.ids),n=new Uint32Array(t.positions);return Xo(i,n,0,i.length-1),e&&e.push(i.buffer,n.buffer),{ids:i,positions:n}}static deserialize(t){const e=new wo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Wo(t){const e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Io.exports(String(t))}function Xo(t,e,i,n){for(;i<n;){const a=t[i+n>>1];let o=i-1,r=n+1;for(;;){do{o++}while(t[o]<a);do{r--}while(t[r]>a);if(o>=r)break;_o(t,o,r),_o(e,3*o,3*r),_o(e,3*o+1,3*r+1),_o(e,3*o+2,3*r+2)}r-i<n-r?(Xo(t,e,i,r),i=r+1):(Xo(t,e,r+1,n),n=r)}}function _o(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}_n("FeaturePositionMap",wo);class Vo{constructor(t,e){this.gl=t.gl,this.location=e}}class So extends Vo{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Bo extends Vo{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Lo extends Vo{constructor(t,e){super(t,e),this.current=Rt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Yo=new Float32Array(16);function zo(t){return[fo(255*t.r,255*t.g),fo(255*t.b,255*t.a)]}class Ro{constructor(t,e,i){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=i}setUniform(t,e,i){t.set(i.constantOr(this.value))}getBinding(t,e,i){return"color"===this.type?new Lo(t,e):new So(t,e)}}class Co{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,i,n){const a="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;a&&t.set(a)}getBinding(t,e,i){return"u_pattern"===i.substr(0,9)?new Bo(t,e):new So(t,e)}}class Mo{constructor(t,e,i,n){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===i?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(t,e,i,n,a){const o=this.paintVertexArray.length,r=this.expression.evaluate(new $n(0),e,{},n,[],a);this.paintVertexArray.resize(t),this._setPaintValue(o,t,r)}updatePaintArray(t,e,i,n){const a=this.expression.evaluate({zoom:0},i,n);this._setPaintValue(t,e,a)}_setPaintValue(t,e,i){if("color"===this.type){const n=zo(i);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n[0],n[1])}else{for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Jo{constructor(t,e,i,n,a,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=i,this.useIntegerZoom=n,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===i?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,i,n,a){const o=this.expression.evaluate(new $n(this.zoom),e,{},n,[],a),r=this.expression.evaluate(new $n(this.zoom+1),e,{},n,[],a),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,r)}updatePaintArray(t,e,i,n){const a=this.expression.evaluate({zoom:this.zoom},i,n),o=this.expression.evaluate({zoom:this.zoom+1},i,n);this._setPaintValue(t,e,a,o)}_setPaintValue(t,e,i,n){if("color"===this.type){const a=zo(i),o=zo(n);for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,a[0],a[1],o[0],o[1])}else{for(let a=t;a<e;a++)this.paintVertexArray.emplace(a,i,n);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=o(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(n)}getBinding(t,e,i){return new So(t,e)}}class Ho{constructor(t,e,i,n,a,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=n,this.layerId=o,this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a}populatePaintArray(t,e,i){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],i)}updatePaintArray(t,e,i,n,a){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],a)}_setPaintValues(t,e,i,n){if(!n||!i)return;const{min:a,mid:o,max:r}=i,s=n[a],l=n[o],c=n[r];if(s&&l&&c)for(let i=t;i<e;i++)this.zoomInPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,go.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,go.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ko{constructor(t,e,i){this.binders={},this._buffers=[];const n=[];for(const a in t.paint._values){if(!i(a))continue;const o=t.paint.get(a);if(!(o instanceof ra&&vi(o.property.specification)))continue;const r=Fo(a,t.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],d="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[a]=d?new Co(s.value,r):new Ro(s.value,r,l),n.push(`/u_${a}`);else if("source"===s.kind||d){const i=No(a,l,"source");this.binders[a]=d?new Ho(s,l,c,e,i,t.id):new Mo(s,r,l,i),n.push(`/a_${a}`)}else{const t=No(a,l,"composite");this.binders[a]=new Jo(s,r,l,c,e,t),n.push(`/z_${a}`)}}this.cacheKey=n.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Mo||e instanceof Jo?e.maxValue:0}populatePaintArrays(t,e,i,n,a){for(const o in this.binders){const r=this.binders[o];(r instanceof Mo||r instanceof Jo||r instanceof Ho)&&r.populatePaintArray(t,e,i,n,a)}}setConstantPatternPositions(t,e){for(const i in this.binders){const n=this.binders[i];n instanceof Co&&n.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,i,n,a){let o=!1;for(const r in t){const s=e.getPositions(r);for(const e of s){const s=i.feature(e.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof Mo||l instanceof Jo||l instanceof Ho)&&!0===l.expression.isStateDependent){const c=n.paint.get(i);l.expression=c.value,l.updatePaintArray(e.start,e.end,s,t[r],a),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const i=this.binders[e];(i instanceof Ro||i instanceof Co)&&t.push(...i.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Mo||i instanceof Jo)for(let e=0;e<i.paintVertexAttributes.length;e++)t.push(i.paintVertexAttributes[e].name);else if(i instanceof Ho)for(let e=0;e<go.members.length;e++)t.push(go.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const i=this.binders[e];if(i instanceof Ro||i instanceof Co||i instanceof Jo)for(const e of i.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const i=[];for(const n in this.binders){const a=this.binders[n];if(a instanceof Ro||a instanceof Co||a instanceof Jo)for(const o of a.uniformNames)if(e[o]){const r=a.getBinding(t,e[o],o);i.push({name:o,property:n,binding:r})}}return i}setUniforms(t,e,i,n){for(const{name:t,property:a,binding:o}of e)this.binders[a].setUniform(o,n,i.get(a),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const i=this.binders[e];if(t&&i instanceof Ho){const e=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(i instanceof Mo||i instanceof Jo)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(const e in this.binders){const i=this.binders[e];(i instanceof Mo||i instanceof Jo||i instanceof Ho)&&i.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Mo||e instanceof Jo||e instanceof Ho)&&e.destroy()}}}class jo{constructor(t,e,i=(()=>!0)){this.programConfigurations={};for(const n of t)this.programConfigurations[n.id]=new ko(n,e,i);this.needsUpload=!1,this._featureMap=new wo,this._bufferOffset=0}populatePaintArrays(t,e,i,n,a,o){for(const i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(t,e,n,a,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,i,n){for(const a of i)this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,n)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Fo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function No(t,e,i){const n={color:{source:Wa,composite:Na},number:{source:Ja,composite:Wa}},a=function(t){return{"line-pattern":{source:oo,composite:oo},"fill-pattern":{source:oo,composite:oo},"fill-extrusion-pattern":{source:oo,composite:oo}}[t]}(t);return a&&a[i]||n[e][i]}_n("ConstantBinder",Ro),_n("CrossFadedConstantBinder",Co),_n("SourceExpressionBinder",Mo),_n("CrossFadedCompositeBinder",Ho),_n("CompositeExpressionBinder",Jo),_n("ProgramConfiguration",ko,{omit:["_buffers"]}),_n("ProgramConfigurationSet",jo);var To=8192;const Uo=Math.pow(2,14)-1,Eo=-Uo-1;function Ao(t){const e=To/t.extent,i=t.loadGeometry();for(let t=0;t<i.length;t++){const n=i[t];for(let t=0;t<n.length;t++){const i=n[t],a=Math.round(i.x*e),r=Math.round(i.y*e);i.x=o(a,Eo,Uo),i.y=o(r,Eo,Uo),(a<i.x||a>i.x+1||r<i.y||r>i.y+1)&&m("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Oo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Ao(t):[]}}function Po(t,e,i,n,a){t.emplaceBack(2*e+(n+1)/2,2*i+(a+1)/2)}class Ko{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new to,this.indexArray=new ho,this.segments=new yo,this.programConfigurations=new jo(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){const n=this.layers[0],a=[];let o=null,r=!1;"circle"===n.type&&(o=n.layout.get("circle-sort-key"),r=!o.isConstant());for(const{feature:e,id:n,index:s,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Oo(e,t);if(!this.layers[0]._featureFilter.filter(new $n(this.zoom),c,i))continue;const u=r?o.evaluate(c,{},i):void 0,d={id:n,properties:e.properties,type:e.type,sourceLayerIndex:l,index:s,geometry:t?c.geometry:Ao(e),patterns:{},sortKey:u};a.push(d)}r&&a.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of a){const{geometry:a,index:o,sourceLayerIndex:r}=n,s=t[o].feature;this.addFeature(n,a,o,i),e.featureIndex.insert(s,a,o,r,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,bo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,i,n){for(const i of e)for(const e of i){const i=e.x,n=e.y;if(i<0||i>=To||n<0||n>=To)continue;const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=a.vertexLength;Po(this.layoutVertexArray,i,n,-1,-1),Po(this.layoutVertexArray,i,n,1,-1),Po(this.layoutVertexArray,i,n,1,1),Po(this.layoutVertexArray,i,n,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},n)}}function Do(t,e){for(let i=0;i<t.length;i++)if(or(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(or(t,e[i]))return!0;return!!tr(t,e)}function Qo(t,e,i){return!!or(t,e)||!!ir(e,t,i)}function qo(t,e){if(1===t.length)return ar(e,t[0]);for(let i=0;i<e.length;i++){const n=e[i];for(let e=0;e<n.length;e++)if(or(t,n[e]))return!0}for(let i=0;i<t.length;i++)if(ar(e,t[i]))return!0;for(let i=0;i<e.length;i++)if(tr(t,e[i]))return!0;return!1}function $o(t,e,i){if(t.length>1){if(tr(t,e))return!0;for(let n=0;n<e.length;n++)if(ir(e[n],t,i))return!0}for(let n=0;n<t.length;n++)if(ir(t[n],e,i))return!0;return!1}function tr(t,e){if(0===t.length||0===e.length)return!1;for(let i=0;i<t.length-1;i++){const n=t[i],a=t[i+1];for(let t=0;t<e.length-1;t++)if(er(n,a,e[t],e[t+1]))return!0}return!1}function er(t,e,i,n){return b(t,i,n)!==b(e,i,n)&&b(t,e,i)!==b(t,e,n)}function ir(t,e,i){const n=i*i;if(1===e.length)return t.distSqr(e[0])<n;for(let i=1;i<e.length;i++)if(nr(t,e[i-1],e[i])<n)return!0;return!1}function nr(t,e,i){const n=e.distSqr(i);if(0===n)return t.distSqr(e);const a=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return t.distSqr(a<0?e:a>1?i:i.sub(e)._mult(a)._add(e))}function ar(t,e){let i,n,a,o=!1;for(let r=0;r<t.length;r++){i=t[r];for(let t=0,r=i.length-1;t<i.length;r=t++)n=i[t],a=i[r],n.y>e.y!=a.y>e.y&&e.x<(a.x-n.x)*(e.y-n.y)/(a.y-n.y)+n.x&&(o=!o)}return o}function or(t,e){let i=!1;for(let n=0,a=t.length-1;n<t.length;a=n++){const o=t[n],r=t[a];o.y>e.y!=r.y>e.y&&e.x<(r.x-o.x)*(e.y-o.y)/(r.y-o.y)+o.x&&(i=!i)}return i}function rr(t,e,i){const n=i[0],a=i[2];if(t.x<n.x&&e.x<n.x||t.x>a.x&&e.x>a.x||t.y<n.y&&e.y<n.y||t.y>a.y&&e.y>a.y)return!1;const o=b(t,e,i[0]);return o!==b(t,e,i[1])||o!==b(t,e,i[2])||o!==b(t,e,i[3])}function sr(t,e,i){const n=e.paint.get(t).value;return"constant"===n.kind?n.value:i.programConfigurations.get(e.id).getMaxValue(t)}function lr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function cr(t,e,i,n,a){if(!e[0]&&!e[1])return t;const o=W.convert(e)._mult(a);"viewport"===i&&o._rotate(-n);const r=[];for(let e=0;e<t.length;e++)r.push(t[e].sub(o));return r}_n("CircleBucket",Ko,{omit:["layers"]});const ur=new pa({"circle-sort-key":new ca(nt.layout_circle["circle-sort-key"])});var dr={paint:new pa({"circle-radius":new ca(nt.paint_circle["circle-radius"]),"circle-color":new ca(nt.paint_circle["circle-color"]),"circle-blur":new ca(nt.paint_circle["circle-blur"]),"circle-opacity":new ca(nt.paint_circle["circle-opacity"]),"circle-translate":new la(nt.paint_circle["circle-translate"]),"circle-translate-anchor":new la(nt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new la(nt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new la(nt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ca(nt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ca(nt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ca(nt.paint_circle["circle-stroke-opacity"])}),layout:ur},hr=1e-6,pr="undefined"!=typeof Float32Array?Float32Array:Array;function mr(){var t=new pr(9);return pr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function br(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yr(t,e,i){var n=e[0],a=e[1],o=e[2],r=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],p=e[10],m=e[11],b=e[12],y=e[13],f=e[14],g=e[15],I=i[0],v=i[1],x=i[2],Z=i[3];return t[0]=I*n+v*s+x*d+Z*b,t[1]=I*a+v*l+x*h+Z*y,t[2]=I*o+v*c+x*p+Z*f,t[3]=I*r+v*u+x*m+Z*g,t[4]=(I=i[4])*n+(v=i[5])*s+(x=i[6])*d+(Z=i[7])*b,t[5]=I*a+v*l+x*h+Z*y,t[6]=I*o+v*c+x*p+Z*f,t[7]=I*r+v*u+x*m+Z*g,t[8]=(I=i[8])*n+(v=i[9])*s+(x=i[10])*d+(Z=i[11])*b,t[9]=I*a+v*l+x*h+Z*y,t[10]=I*o+v*c+x*p+Z*f,t[11]=I*r+v*u+x*m+Z*g,t[12]=(I=i[12])*n+(v=i[13])*s+(x=i[14])*d+(Z=i[15])*b,t[13]=I*a+v*l+x*h+Z*y,t[14]=I*o+v*c+x*p+Z*f,t[15]=I*r+v*u+x*m+Z*g,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var fr,gr=yr;function Ir(){var t=new pr(3);return pr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function vr(t,e,i){var n=new pr(3);return n[0]=t,n[1]=e,n[2]=i,n}function xr(t,e,i){var n=e[0],a=e[1],o=e[2],r=e[3];return t[0]=i[0]*n+i[4]*a+i[8]*o+i[12]*r,t[1]=i[1]*n+i[5]*a+i[9]*o+i[13]*r,t[2]=i[2]*n+i[6]*a+i[10]*o+i[14]*r,t[3]=i[3]*n+i[7]*a+i[11]*o+i[15]*r,t}function Zr(){var t=new pr(4);return pr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Gr(t,e){const i=xr([],[t.x,t.y,0,1],e);return new W(i[0]/i[3],i[1]/i[3])}Ir(),fr=new pr(4),pr!=Float32Array&&(fr[0]=0,fr[1]=0,fr[2]=0,fr[3]=0),Ir(),vr(1,0,0),vr(0,1,0),Zr(),Zr(),mr(),function(){var t;t=new pr(2),pr!=Float32Array&&(t[0]=0,t[1]=0)}();class wr extends Ko{}_n("HeatmapBucket",wr,{omit:["layers"]});var Wr={paint:new pa({"heatmap-radius":new ca(nt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ca(nt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new la(nt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ha(nt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new la(nt.paint_heatmap["heatmap-opacity"])})};function Xr(t,{width:e,height:i},n,a){if(a){if(a instanceof Uint8ClampedArray)a=new Uint8Array(a.buffer);else if(a.length!==e*i*n)throw new RangeError(`mismatched image size. expected: ${a.length} but got: ${e*i*n}`)}else a=new Uint8Array(e*i*n);return t.width=e,t.height=i,t.data=a,t}function _r(t,{width:e,height:i},n){if(e===t.width&&i===t.height)return;const a=Xr({},{width:e,height:i},n);Vr(t,a,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,i)},n),t.width=e,t.height=i,t.data=a.data}function Vr(t,e,i,n,a,o){if(0===a.width||0===a.height)return e;if(a.width>t.width||a.height>t.height||i.x>t.width-a.width||i.y>t.height-a.height)throw new RangeError("out of range source coordinates for image copy");if(a.width>e.width||a.height>e.height||n.x>e.width-a.width||n.y>e.height-a.height)throw new RangeError("out of range destination coordinates for image copy");const r=t.data,s=e.data;if(r===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<a.height;l++){const c=((i.y+l)*t.width+i.x)*o,u=((n.y+l)*e.width+n.x)*o;for(let t=0;t<a.width*o;t++)s[u+t]=r[c+t]}return e}class Sr{constructor(t,e){Xr(this,t,1,e)}resize(t){_r(this,t,1)}clone(){return new Sr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,n,a){Vr(t,e,i,n,a,1)}}class Br{constructor(t,e){Xr(this,t,4,e)}resize(t){_r(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Br({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,i,n,a){Vr(t,e,i,n,a,4)}}function Lr(t){const e={},i=t.resolution||256,n=t.clips?t.clips.length:1,a=t.image||new Br({width:i,height:n});if(Math.log(i)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${i}`);const o=(i,n,o)=>{e[t.evaluationKey]=o;const r=t.expression.evaluate(e);a.data[i+n+0]=Math.floor(255*r.r/r.a),a.data[i+n+1]=Math.floor(255*r.g/r.a),a.data[i+n+2]=Math.floor(255*r.b/r.a),a.data[i+n+3]=Math.floor(255*r.a)};if(t.clips)for(let e=0,a=0;e<n;++e,a+=4*i)for(let n=0,r=0;n<i;n++,r+=4){const s=n/(i-1),{start:l,end:c}=t.clips[e];o(a,r,l*(1-s)+c*s)}else for(let t=0,e=0;t<i;t++,e+=4)o(0,e,t/(i-1));return a}_n("AlphaImage",Sr),_n("RGBAImage",Br);var Yr={paint:new pa({"hillshade-illumination-direction":new la(nt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new la(nt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new la(nt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new la(nt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new la(nt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new la(nt.paint_hillshade["hillshade-accent-color"])})};const zr=Ia([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rr}=zr;var Cr={exports:{}};function Mr(t,e,i){i=i||2;var n,a,o,r,s,l,c,u=e&&e.length,d=u?e[0]*i:t.length,h=Jr(t,0,d,i,!0),p=[];if(!h||h.next===h.prev)return p;if(u&&(h=function(t,e,i,n){var a,o,r,s=[];for(a=0,o=e.length;a<o;a++)(r=Jr(t,e[a]*n,a<o-1?e[a+1]*n:t.length,n,!1))===r.next&&(r.steiner=!0),s.push(Pr(r));for(s.sort(Ur),a=0;a<s.length;a++)i=Er(s[a],i);return i}(t,e,h,i)),t.length>80*i){n=o=t[0],a=r=t[1];for(var m=i;m<d;m+=i)(s=t[m])<n&&(n=s),(l=t[m+1])<a&&(a=l),s>o&&(o=s),l>r&&(r=l);c=0!==(c=Math.max(o-n,r-a))?32767/c:0}return kr(h,p,i,n,a,c,0),p}function Jr(t,e,i,n,a){var o,r;if(a===ss(t,e,i,n)>0)for(o=e;o<i;o+=n)r=as(o,t[o],t[o+1],r);else for(o=i-n;o>=e;o-=n)r=as(o,t[o],t[o+1],r);return r&&qr(r,r.next)&&(os(r),r=r.next),r}function Hr(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!qr(n,n.next)&&0!==Qr(n.prev,n,n.next))n=n.next;else{if(os(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function kr(t,e,i,n,a,o,r){if(t){!r&&o&&function(t,e,i,n){var a=t;do{0===a.z&&(a.z=Or(a.x,a.y,e,i,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function(t){var e,i,n,a,o,r,s,l,c=1;do{for(i=t,t=null,o=null,r=0;i;){for(r++,n=i,s=0,e=0;e<c&&(s++,n=n.nextZ);e++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(a=i,i=i.nextZ,s--):(a=n,n=n.nextZ,l--),o?o.nextZ=a:t=a,a.prevZ=o,o=a;i=n}o.nextZ=null,c*=2}while(r>1)}(a)}(t,n,a,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Fr(t,n,a,o):jr(t))e.push(s.i/i|0),e.push(t.i/i|0),e.push(l.i/i|0),os(t),t=l.next,c=l.next;else if((t=l)===c){r?1===r?kr(t=Nr(Hr(t),e,i),e,i,n,a,o,2):2===r&&Tr(t,e,i,n,a,o):kr(Hr(t),e,i,n,a,o,1);break}}}function jr(t){var e=t.prev,i=t,n=t.next;if(Qr(e,i,n)>=0)return!1;for(var a=e.x,o=i.x,r=n.x,s=e.y,l=i.y,c=n.y,u=a<o?a<r?a:r:o<r?o:r,d=s<l?s<c?s:c:l<c?l:c,h=a>o?a>r?a:r:o>r?o:r,p=s>l?s>c?s:c:l>c?l:c,m=n.next;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=d&&m.y<=p&&Kr(a,s,o,l,r,c,m.x,m.y)&&Qr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Fr(t,e,i,n){var a=t.prev,o=t,r=t.next;if(Qr(a,o,r)>=0)return!1;for(var s=a.x,l=o.x,c=r.x,u=a.y,d=o.y,h=r.y,p=s<l?s<c?s:c:l<c?l:c,m=u<d?u<h?u:h:d<h?d:h,b=s>l?s>c?s:c:l>c?l:c,y=u>d?u>h?u:h:d>h?d:h,f=Or(p,m,e,i,n),g=Or(b,y,e,i,n),I=t.prevZ,v=t.nextZ;I&&I.z>=f&&v&&v.z<=g;){if(I.x>=p&&I.x<=b&&I.y>=m&&I.y<=y&&I!==a&&I!==r&&Kr(s,u,l,d,c,h,I.x,I.y)&&Qr(I.prev,I,I.next)>=0)return!1;if(I=I.prevZ,v.x>=p&&v.x<=b&&v.y>=m&&v.y<=y&&v!==a&&v!==r&&Kr(s,u,l,d,c,h,v.x,v.y)&&Qr(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;I&&I.z>=f;){if(I.x>=p&&I.x<=b&&I.y>=m&&I.y<=y&&I!==a&&I!==r&&Kr(s,u,l,d,c,h,I.x,I.y)&&Qr(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;v&&v.z<=g;){if(v.x>=p&&v.x<=b&&v.y>=m&&v.y<=y&&v!==a&&v!==r&&Kr(s,u,l,d,c,h,v.x,v.y)&&Qr(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Nr(t,e,i){var n=t;do{var a=n.prev,o=n.next.next;!qr(a,o)&&$r(a,n,n.next,o)&&is(a,o)&&is(o,a)&&(e.push(a.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),os(n),os(n.next),n=t=o),n=n.next}while(n!==t);return Hr(n)}function Tr(t,e,i,n,a,o){var r=t;do{for(var s=r.next.next;s!==r.prev;){if(r.i!==s.i&&Dr(r,s)){var l=ns(r,s);return r=Hr(r,r.next),l=Hr(l,l.next),kr(r,e,i,n,a,o,0),void kr(l,e,i,n,a,o,0)}s=s.next}r=r.next}while(r!==t)}function Ur(t,e){return t.x-e.x}function Er(t,e){var i=function(t,e){var i,n=e,a=t.x,o=t.y,r=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=a&&s>r&&(r=s,i=n.x<n.next.x?n:n.next,s===a))return i}n=n.next}while(n!==e);if(!i)return null;var l,c=i,u=i.x,d=i.y,h=1/0;n=i;do{a>=n.x&&n.x>=u&&a!==n.x&&Kr(o<d?a:r,o,u,d,o<d?r:a,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(a-n.x),is(n,t)&&(l<h||l===h&&(n.x>i.x||n.x===i.x&&Ar(i,n)))&&(i=n,h=l)),n=n.next}while(n!==c);return i}(t,e);if(!i)return e;var n=ns(i,t);return Hr(n,n.next),Hr(i,i.next)}function Ar(t,e){return Qr(t.prev,t,e.prev)<0&&Qr(e.next,t,t.next)<0}function Or(t,e,i,n,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*a|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*a|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Pr(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Kr(t,e,i,n,a,o,r,s){return(a-r)*(e-s)>=(t-r)*(o-s)&&(t-r)*(n-s)>=(i-r)*(e-s)&&(i-r)*(o-s)>=(a-r)*(n-s)}function Dr(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&$r(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(is(t,e)&&is(e,t)&&function(t,e){var i=t,n=!1,a=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&a<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(Qr(t.prev,t,e.prev)||Qr(t,e.prev,e))||qr(t,e)&&Qr(t.prev,t,t.next)>0&&Qr(e.prev,e,e.next)>0)}function Qr(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function qr(t,e){return t.x===e.x&&t.y===e.y}function $r(t,e,i,n){var a=es(Qr(t,e,i)),o=es(Qr(t,e,n)),r=es(Qr(i,n,t)),s=es(Qr(i,n,e));return a!==o&&r!==s||!(0!==a||!ts(t,i,e))||!(0!==o||!ts(t,n,e))||!(0!==r||!ts(i,t,n))||!(0!==s||!ts(i,e,n))}function ts(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function es(t){return t>0?1:t<0?-1:0}function is(t,e){return Qr(t.prev,t,t.next)<0?Qr(t,e,t.next)>=0&&Qr(t,t.prev,e)>=0:Qr(t,e,t.prev)<0||Qr(t,t.next,e)<0}function ns(t,e){var i=new rs(t.i,t.x,t.y),n=new rs(e.i,e.x,e.y),a=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=a,a.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function as(t,e,i,n){var a=new rs(t,e,i);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function os(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function rs(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ss(t,e,i,n){for(var a=0,o=e,r=i-n;o<i;o+=n)a+=(t[r]-t[o])*(t[o+1]+t[r+1]),r=o;return a}function ls(t,e,i,n,a){cs(t,e,i||0,n||t.length-1,a||ds)}function cs(t,e,i,n,a){for(;n>i;){if(n-i>600){var o=n-i+1,r=e-i+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(r-o/2<0?-1:1);cs(t,e,Math.max(i,Math.floor(e-r*l/o+c)),Math.min(n,Math.floor(e+(o-r)*l/o+c)),a)}var u=t[e],d=i,h=n;for(us(t,i,e),a(t[n],u)>0&&us(t,i,n);d<h;){for(us(t,d,h),d++,h--;a(t[d],u)<0;)d++;for(;a(t[h],u)>0;)h--}0===a(t[i],u)?us(t,i,h):us(t,++h,n),h<=e&&(i=h+1),e<=h&&(n=h-1)}}function us(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function ds(t,e){return t<e?-1:t>e?1:0}function hs(t,e){const i=t.length;if(i<=1)return[t];const n=[];let a,o;for(let e=0;e<i;e++){const i=y(t[e]);0!==i&&(t[e].area=Math.abs(i),void 0===o&&(o=i<0),o===i<0?(a&&n.push(a),a=[t[e]]):a.push(t[e]))}if(a&&n.push(a),e>1)for(let t=0;t<n.length;t++)n[t].length<=e||(ls(n[t],e,1,n[t].length-1,ps),n[t]=n[t].slice(0,e));return n}function ps(t,e){return e.area-t.area}function ms(t,e,i){const n=i.patternDependencies;let a=!1;for(const i of e){const e=i.paint.get(`${t}-pattern`);e.isConstant()||(a=!0);const o=e.constantOr(null);o&&(a=!0,n[o.to]=!0,n[o.from]=!0)}return a}function bs(t,e,i,n,a){const o=a.patternDependencies;for(const r of e){const e=r.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:n-1},i,{},a.availableImages),s=e.evaluate({zoom:n},i,{},a.availableImages),l=e.evaluate({zoom:n+1},i,{},a.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,i.patterns[r.id]={min:t,mid:s,max:l}}}return i}Cr.exports=Mr,Cr.exports.default=Mr,Mr.deviation=function(t,e,i,n){var a=e&&e.length,o=Math.abs(ss(t,0,a?e[0]*i:t.length,i));if(a)for(var r=0,s=e.length;r<s;r++)o-=Math.abs(ss(t,e[r]*i,r<s-1?e[r+1]*i:t.length,i));var l=0;for(r=0;r<n.length;r+=3){var c=n[r]*i,u=n[r+1]*i,d=n[r+2]*i;l+=Math.abs((t[c]-t[d])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[d+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Mr.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,a=0;a<t.length;a++){for(var o=0;o<t[a].length;o++)for(var r=0;r<e;r++)i.vertices.push(t[a][o][r]);a>0&&i.holes.push(n+=t[a-1].length)}return i};class ys{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new eo,this.indexArray=new ho,this.indexArray2=new po,this.programConfigurations=new jo(t.layers,t.zoom),this.segments=new yo,this.segments2=new yo,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=ms("fill",this.layers,e);const n=this.layers[0].layout.get("fill-sort-key"),a=!n.isConstant(),o=[];for(const{feature:r,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,u=Oo(r,t);if(!this.layers[0]._featureFilter.filter(new $n(this.zoom),u,i))continue;const d=a?n.evaluate(u,{},i,e.availableImages):void 0,h={id:s,properties:r.properties,type:r.type,sourceLayerIndex:c,index:l,geometry:t?u.geometry:Ao(r),patterns:{},sortKey:d};o.push(h)}a&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of o){const{geometry:a,index:o,sourceLayerIndex:r}=n;if(this.hasPattern){const t=bs("fill",this.layers,n,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(n,a,o,i,{});e.featureIndex.insert(t[o].feature,a,o,r,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Rr),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,i,n,a){for(const t of hs(e,500)){let e=0;for(const i of t)e+=i.length;const i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=i.vertexLength,a=[],o=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&o.push(a.length/2);const i=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),n=i.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(n+e.length-1,n),a.push(e[0].x),a.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(n+t-1,n+t),a.push(e[t].x),a.push(e[t].y);i.vertexLength+=e.length,i.primitiveLength+=e.length}const r=Cr.exports(a,o);for(let t=0;t<r.length;t+=3)this.indexArray.emplaceBack(n+r[t],n+r[t+1],n+r[t+2]);i.vertexLength+=e,i.primitiveLength+=r.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a,n)}}_n("FillBucket",ys,{omit:["layers","patternFeatures"]});const fs=new pa({"fill-sort-key":new ca(nt.layout_fill["fill-sort-key"])});var gs={paint:new pa({"fill-antialias":new la(nt.paint_fill["fill-antialias"]),"fill-opacity":new ca(nt.paint_fill["fill-opacity"]),"fill-color":new ca(nt.paint_fill["fill-color"]),"fill-outline-color":new ca(nt.paint_fill["fill-outline-color"]),"fill-translate":new la(nt.paint_fill["fill-translate"]),"fill-translate-anchor":new la(nt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ua(nt.paint_fill["fill-pattern"])}),layout:fs};const Is=Ia([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vs=Ia([{name:"a_centroid",components:2,type:"Int16"}],4),{members:xs}=Is;var Zs={},Gs=W,ws=Ws;function Ws(t,e,i,n,a){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=a,t.readFields(Xs,this,e)}function Xs(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],a=e._values[t.readVarint()];e.properties[n]=a}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function _s(t){for(var e,i,n=0,a=0,o=t.length,r=o-1;a<o;r=a++)n+=((i=t[r]).x-(e=t[a]).x)*(e.y+i.y);return n}Ws.types=["Unknown","Point","LineString","Polygon"],Ws.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,a=0,o=0,r=0,s=[];t.pos<i;){if(a<=0){var l=t.readVarint();n=7&l,a=l>>3}if(a--,1===n||2===n)o+=t.readSVarint(),r+=t.readSVarint(),1===n&&(e&&s.push(e),e=[]),e.push(new Gs(o,r));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Ws.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,a=0,o=0,r=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(n<=0){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)(a+=t.readSVarint())<r&&(r=a),a>s&&(s=a),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==i)throw new Error("unknown command "+i)}return[r,l,s,c]},Ws.prototype.toGeoJSON=function(t,e,i){var n,a,o=this.extent*Math.pow(2,i),r=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=Ws.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+r)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(n=0;n<l.length;n++)d[n]=l[n][0];u(l=d);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,a=[],o=0;o<e;o++){var r=_s(t[o]);0!==r&&(void 0===n&&(n=r<0),n===r<0?(i&&a.push(i),i=[t[o]]):i.push(t[o]))}return i&&a.push(i),a}(l),n=0;n<l.length;n++)for(a=0;a<l[n].length;a++)u(l[n][a])}1===l.length?l=l[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Vs=ws,Ss=Bs;function Bs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Ls,this,e),this.length=this._features.length}function Ls(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(i))}Bs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Vs(this._pbf,e,this.extent,this._keys,this._values)};var Ys=Ss;function zs(t,e,i){if(3===t){var n=new Ys(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}Zs.VectorTile=function(t,e){this.layers=t.readFields(zs,{},e)},Zs.VectorTileFeature=ws,Zs.VectorTileLayer=Ss;const Rs=Zs.VectorTileFeature.types,Cs=Math.pow(2,13);function Ms(t,e,i,n,a,o,r,s){t.emplaceBack(e,i,2*Math.floor(n*Cs)+r,a*Cs*2,o*Cs*2,Math.round(s))}class Js{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new io,this.centroidVertexArray=new $a,this.indexArray=new ho,this.programConfigurations=new jo(t.layers,t.zoom),this.segments=new yo,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.features=[],this.hasPattern=ms("fill-extrusion",this.layers,e);for(const{feature:n,id:a,index:o,sourceLayerIndex:r}of t){const t=this.layers[0]._featureFilter.needGeometry,s=Oo(n,t);if(!this.layers[0]._featureFilter.filter(new $n(this.zoom),s,i))continue;const l={id:a,sourceLayerIndex:r,index:o,geometry:t?s.geometry:Ao(n),properties:n.properties,type:n.type,patterns:{}};this.hasPattern?this.features.push(bs("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,i,{}),e.featureIndex.insert(n,l.geometry,o,r,this.index,!0)}}addFeatures(t,e,i){for(const t of this.features){const{geometry:n}=t;this.addFeature(t,n,t.index,e,i)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xs),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,vs.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,e,i,n,a){const o={x:0,y:0,vertexCount:0};for(const i of hs(e,500)){let e=0;for(const t of i)e+=t.length;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const t of i){if(0===t.length)continue;if(ks(t))continue;let e=0;for(let i=0;i<t.length;i++){const a=t[i];if(i>=1){const r=t[i-1];if(!Hs(a,r)){n.vertexLength+4>yo.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=a.sub(r)._perp()._unit(),i=r.dist(a);e+i>32768&&(e=0),Ms(this.layoutVertexArray,a.x,a.y,t.x,t.y,0,0,e),Ms(this.layoutVertexArray,a.x,a.y,t.x,t.y,0,1,e),o.x+=2*a.x,o.y+=2*a.y,o.vertexCount+=2,e+=i,Ms(this.layoutVertexArray,r.x,r.y,t.x,t.y,0,0,e),Ms(this.layoutVertexArray,r.x,r.y,t.x,t.y,0,1,e),o.x+=2*r.x,o.y+=2*r.y,o.vertexCount+=2;const s=n.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+e>yo.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Rs[t.type])continue;const a=[],r=[],s=n.vertexLength;for(const t of i)if(0!==t.length){t!==i[0]&&r.push(a.length/2);for(let e=0;e<t.length;e++){const i=t[e];Ms(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),o.x+=i.x,o.y+=i.y,o.vertexCount+=1,a.push(i.x),a.push(i.y)}}const l=Cr.exports(a,r);for(let t=0;t<l.length;t+=3)this.indexArray.emplaceBack(s+l[t],s+l[t+2],s+l[t+1]);n.primitiveLength+=l.length/3,n.vertexLength+=e}for(let t=0;t<o.vertexCount;t++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a,n)}}function Hs(t,e){return t.x===e.x&&(t.x<0||t.x>To)||t.y===e.y&&(t.y<0||t.y>To)}function ks(t){return t.every((t=>t.x<0))||t.every((t=>t.x>To))||t.every((t=>t.y<0))||t.every((t=>t.y>To))}_n("FillExtrusionBucket",Js,{omit:["layers","features"]});var js={paint:new pa({"fill-extrusion-opacity":new la(nt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ca(nt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new la(nt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new la(nt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ua(nt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ca(nt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ca(nt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new la(nt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Fs(t,e){return t.x*e.x+t.y*e.y}function Ns(t,e){if(1===t.length){let i=0;const n=e[i++];let a;for(;!a||n.equals(a);)if(a=e[i++],!a)return 1/0;for(;i<e.length;i++){const o=e[i],r=t[0],s=a.sub(n),l=o.sub(n),c=r.sub(n),u=Fs(s,s),d=Fs(s,l),h=Fs(l,l),p=Fs(c,s),m=Fs(c,l),b=u*h-d*d,y=(h*p-d*m)/b,f=(u*m-d*p)/b,g=n.z*(1-y-f)+a.z*y+o.z*f;if(isFinite(g))return g}return 1/0}{let t=1/0;for(const i of e)t=Math.min(t,i.z);return t}}const Ts=Ia([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Us}=Ts,Es=Ia([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:As}=Es,Os=Zs.VectorTileFeature.types,Ps=Math.cos(Math.PI/180*37.5),Ks=Math.pow(2,14)/.5;class Ds{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new no,this.layoutVertexArray2=new ao,this.indexArray=new ho,this.programConfigurations=new jo(t.layers,t.zoom),this.segments=new yo,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,i){this.hasPattern=ms("line",this.layers,e);const n=this.layers[0].layout.get("line-sort-key"),a=!n.isConstant(),o=[];for(const{feature:e,id:r,index:s,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Oo(e,t);if(!this.layers[0]._featureFilter.filter(new $n(this.zoom),c,i))continue;const u=a?n.evaluate(c,{},i):void 0,d={id:r,properties:e.properties,type:e.type,sourceLayerIndex:l,index:s,geometry:t?c.geometry:Ao(e),patterns:{},sortKey:u};o.push(d)}a&&o.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of o){const{geometry:a,index:o,sourceLayerIndex:r}=n;if(this.hasPattern){const t=bs("line",this.layers,n,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(n,a,o,i,{});e.featureIndex.insert(t[o].feature,a,o,r,this.index)}}update(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)}addFeatures(t,e,i){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,As)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Us),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,i,n,a){const o=this.layers[0].layout,r=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const i of e)this.addLine(i,t,r,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a,n)}addLine(t,e,i,n,a,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const r="Polygon"===Os[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(r?3:2))return;"bevel"===i&&(a=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let d,h,p,m,b;this.e1=this.e2=-1,r&&(d=t[s-2],b=t[l].sub(d)._unit()._perp());for(let e=l;e<s;e++){if(p=e===s-1?r?t[l+1]:void 0:t[e+1],p&&t[e].equals(p))continue;b&&(m=b),d&&(h=d),d=t[e],b=p?p.sub(d)._unit()._perp():m,m=m||b;let y=m.add(b);0===y.x&&0===y.y||y._unit();const f=m.x*b.x+m.y*b.y,g=y.x*b.x+y.y*b.y,I=0!==g?1/g:1/0,v=2*Math.sqrt(2-2*g),x=g<Ps&&h&&p,Z=m.x*b.y-m.y*b.x>0;if(x&&e>l){const t=d.dist(h);if(t>2*c){const e=d.sub(d.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}const G=h&&p;let w=G?i:r?"butt":n;if(G&&"round"===w&&(I<o?w="miter":I<=2&&(w="fakeround")),"miter"===w&&I>a&&(w="bevel"),"bevel"===w&&(I>2&&(w="flipbevel"),I<a&&(w="miter")),h&&this.updateDistance(h,d),"miter"===w)y._mult(I),this.addCurrentVertex(d,y,0,0,u);else if("flipbevel"===w){if(I>100)y=b.mult(-1);else{const t=I*m.add(b).mag()/m.sub(b).mag();y._perp()._mult(t*(Z?-1:1))}this.addCurrentVertex(d,y,0,0,u),this.addCurrentVertex(d,y.mult(-1),0,0,u)}else if("bevel"===w||"fakeround"===w){const t=-Math.sqrt(I*I-1),e=Z?t:0,i=Z?0:t;if(h&&this.addCurrentVertex(d,m,e,i,u),"fakeround"===w){const t=Math.round(180*v/Math.PI/20);for(let e=1;e<t;e++){let i=e/t;if(.5!==i){const t=i-.5;i+=i*t*(i-1)*((1.0904+f*(f*(3.55645-1.43519*f)-3.2452))*t*t+(.848013+f*(.215638*f-1.06021)))}const n=b.sub(m)._mult(i)._add(m)._unit()._mult(Z?-1:1);this.addHalfVertex(d,n.x,n.y,!1,Z,0,u)}}p&&this.addCurrentVertex(d,b,-e,-i,u)}else if("butt"===w)this.addCurrentVertex(d,y,0,0,u);else if("square"===w){const t=h?1:-1;this.addCurrentVertex(d,y,t,t,u)}else"round"===w&&(h&&(this.addCurrentVertex(d,m,0,0,u),this.addCurrentVertex(d,m,1,1,u,!0)),p&&(this.addCurrentVertex(d,b,-1,-1,u,!0),this.addCurrentVertex(d,b,0,0,u)));if(x&&e<s-1){const t=d.dist(p);if(t>2*c){const e=d.add(p.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,b,0,0,u),d=e}}}}addCurrentVertex(t,e,i,n,a,o=!1){const r=e.y*n-e.x,s=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,a),this.addHalfVertex(t,r,s,o,!0,-n,a),this.distance>Ks/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,n,a,o))}addHalfVertex({x:t,y:e},i,n,a,o,r,s){const l=.5*(this.lineClips?this.scaledDistance*(Ks-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(a?1:0),(e<<1)+(o?1:0),Math.round(63*i)+128,Math.round(63*n)+128,1+(0===r?0:r<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const c=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),s.primitiveLength++),o?this.e2=c:this.e1=c}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}_n("LineBucket",Ds,{omit:["layers","patternFeatures"]});const Qs=new pa({"line-cap":new la(nt.layout_line["line-cap"]),"line-join":new ca(nt.layout_line["line-join"]),"line-miter-limit":new la(nt.layout_line["line-miter-limit"]),"line-round-limit":new la(nt.layout_line["line-round-limit"]),"line-sort-key":new ca(nt.layout_line["line-sort-key"])});var qs={paint:new pa({"line-opacity":new ca(nt.paint_line["line-opacity"]),"line-color":new ca(nt.paint_line["line-color"]),"line-translate":new la(nt.paint_line["line-translate"]),"line-translate-anchor":new la(nt.paint_line["line-translate-anchor"]),"line-width":new ca(nt.paint_line["line-width"]),"line-gap-width":new ca(nt.paint_line["line-gap-width"]),"line-offset":new ca(nt.paint_line["line-offset"]),"line-blur":new ca(nt.paint_line["line-blur"]),"line-dasharray":new da(nt.paint_line["line-dasharray"]),"line-pattern":new ua(nt.paint_line["line-pattern"]),"line-gradient":new ha(nt.paint_line["line-gradient"])}),layout:Qs};const $s=new class extends ca{possiblyEvaluate(t,e){return e=new $n(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,i,n){return e=s({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,i,n)}}(qs.paint.properties["line-width"].specification);function tl(t,e){return e>0?e+2*t:t}$s.useIntegerZoom=!0;const el=Ia([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),il=Ia([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ia([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const nl=Ia([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ia([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const al=Ia([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ol=Ia([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function rl(t,e,i){return t.sections.forEach((t=>{t.text=function(t,e,i){const n=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),qn.applyArabicShaping&&(t=qn.applyArabicShaping(t)),t}(t.text,e,i)})),t}Ia([{name:"triangle",components:3,type:"Uint16"}]),Ia([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ia([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ia([{type:"Float32",name:"offsetX"}]),Ia([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const sl={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ll=24,cl=hl,ul=function(t,e,i,n,a){var o,r,s=8*a-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=i?a-1:0,h=i?-1:1,p=t[e+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+d],d+=h,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=n;u>0;r=256*r+t[e+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return r?NaN:1/0*(p?-1:1);r+=Math.pow(2,n),o-=c}return(p?-1:1)*r*Math.pow(2,o-n)},dl=function(t,e,i,n,a,o){var r,s,l,c=8*o-a-1,u=(1<<c)-1,d=u>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,m=n?1:-1,b=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,r=u):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),(e+=r+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(r++,l/=2),r+d>=u?(s=0,r=u):r+d>=1?(s=(e*l-1)*Math.pow(2,a),r+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,a),r=0));a>=8;t[i+p]=255&s,p+=m,s/=256,a-=8);for(r=r<<a|s,c+=a;c>0;t[i+p]=255&r,p+=m,r/=256,c-=8);t[i+p-m]|=128*b};function hl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}hl.Varint=0,hl.Fixed64=1,hl.Bytes=2,hl.Fixed32=5;var pl,ml=4294967296,bl=1/ml,yl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function fl(t){return t.type===hl.Bytes?t.readVarint()+t.pos:t.pos+1}function gl(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Il(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var a=i.pos-1;a>=t;a--)i.buf[a+n]=i.buf[a]}function vl(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function xl(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Zl(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function Gl(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function wl(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function Wl(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function Xl(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function _l(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function Vl(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function Sl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Bl(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function Ll(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Yl(t,e,i){1===t&&i.readMessage(zl,e)}function zl(t,e,i){if(3===t){const{id:t,bitmap:n,width:a,height:o,left:r,top:s,advance:l}=i.readMessage(Rl,{});e.push({id:t,bitmap:new Sr({width:a+6,height:o+6},n),metrics:{width:a,height:o,left:r,top:s,advance:l}})}}function Rl(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function Cl(t){let e=0,i=0;for(const n of t)e+=n.w*n.h,i=Math.max(i,n.w);t.sort(((t,e)=>e.h-t.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}];let a=0,o=0;for(const e of t)for(let t=n.length-1;t>=0;t--){const i=n[t];if(!(e.w>i.w||e.h>i.h)){if(e.x=i.x,e.y=i.y,o=Math.max(o,e.y+e.h),a=Math.max(a,e.x+e.w),e.w===i.w&&e.h===i.h){const e=n.pop();t<n.length&&(n[t]=e)}else e.h===i.h?(i.x+=e.w,i.w-=e.w):e.w===i.w?(i.y+=e.h,i.h-=e.h):(n.push({x:i.x+e.w,y:i.y,w:i.w-e.w,h:e.h}),i.y+=e.h,i.h-=e.h);break}}return{w:a,h:o,fill:e/(a*o)||0}}hl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),a=n>>3,o=this.pos;this.type=7&n,t(a,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Sl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Ll(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Sl(this.buf,this.pos)+Sl(this.buf,this.pos+4)*ml;return this.pos+=8,t},readSFixed64:function(){var t=Sl(this.buf,this.pos)+Ll(this.buf,this.pos+4)*ml;return this.pos+=8,t},readFloat:function(){var t=ul(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=ul(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,a,o=i.buf;if(n=(112&(a=o[i.pos++]))>>4,a<128)return gl(t,n,e);if(n|=(127&(a=o[i.pos++]))<<3,a<128)return gl(t,n,e);if(n|=(127&(a=o[i.pos++]))<<10,a<128)return gl(t,n,e);if(n|=(127&(a=o[i.pos++]))<<17,a<128)return gl(t,n,e);if(n|=(127&(a=o[i.pos++]))<<24,a<128)return gl(t,n,e);if(n|=(1&(a=o[i.pos++]))<<31,a<128)return gl(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&yl?function(t,e,i){return yl.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",a=e;a<i;){var o,r,s,l=t[a],c=null,u=l>239?4:l>223?3:l>191?2:1;if(a+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[a+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(r=t[a+2],128==(192&(o=t[a+1]))&&128==(192&r)&&((c=(15&l)<<12|(63&o)<<6|63&r)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(r=t[a+2],s=t[a+3],128==(192&(o=t[a+1]))&&128==(192&r)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&r)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),a+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==hl.Bytes)return t.push(this.readVarint(e));var i=fl(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==hl.Bytes)return t.push(this.readSVarint());var e=fl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==hl.Bytes)return t.push(this.readBoolean());var e=fl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==hl.Bytes)return t.push(this.readFloat());var e=fl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==hl.Bytes)return t.push(this.readDouble());var e=fl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==hl.Bytes)return t.push(this.readFixed32());var e=fl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==hl.Bytes)return t.push(this.readSFixed32());var e=fl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==hl.Bytes)return t.push(this.readFixed64());var e=fl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==hl.Bytes)return t.push(this.readSFixed64());var e=fl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===hl.Varint)for(;this.buf[this.pos++]>127;);else if(e===hl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===hl.Fixed32)this.pos+=4;else{if(e!==hl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Bl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Bl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Bl(this.buf,-1&t,this.pos),Bl(this.buf,Math.floor(t*bl),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Bl(this.buf,-1&t,this.pos),Bl(this.buf,Math.floor(t*bl),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,a,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):a=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&(t[i++]=239,t[i++]=191,t[i++]=189,a=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&Il(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),dl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),dl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&Il(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,hl.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,vl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,xl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,wl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Zl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Gl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Wl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Xl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,_l,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Vl,e)},writeBytesField:function(t,e){this.writeTag(t,hl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,hl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,hl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,hl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,hl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,hl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,hl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,hl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,hl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,hl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Ml{constructor(t,{pixelRatio:e,version:i,stretchX:n,stretchY:a,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=n,this.stretchY=a,this.content=o,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Jl{constructor(t,e){const i={},n={};this.haveRenderCallbacks=[];const a=[];this.addImages(t,i,a),this.addImages(e,n,a);const{w:o,h:r}=Cl(a),s=new Br({width:o||1,height:r||1});for(const e in t){const n=t[e],a=i[e].paddedRect;Br.copy(n.data,s,{x:0,y:0},{x:a.x+1,y:a.y+1},n.data)}for(const t in e){const i=e[t],a=n[t].paddedRect,o=a.x+1,r=a.y+1,l=i.data.width,c=i.data.height;Br.copy(i.data,s,{x:0,y:0},{x:o,y:r},i.data),Br.copy(i.data,s,{x:0,y:c-1},{x:o,y:r-1},{width:l,height:1}),Br.copy(i.data,s,{x:0,y:0},{x:o,y:r+c},{width:l,height:1}),Br.copy(i.data,s,{x:l-1,y:0},{x:o-1,y:r},{width:1,height:c}),Br.copy(i.data,s,{x:0,y:0},{x:o+l,y:r},{width:1,height:c})}this.image=s,this.iconPositions=i,this.patternPositions=n}addImages(t,e,i){for(const n in t){const a=t[n],o={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(o),e[n]=new Ml(o,a),a.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)}patchUpdatedImage(t,e,i){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[n,a]=t.tl;i.update(e.data,void 0,{x:n,y:a})}}_n("ImagePosition",Ml),_n("ImageAtlas",Jl),t.WritingMode=void 0,(pl=t.WritingMode||(t.WritingMode={}))[pl.none=0]="none",pl[pl.horizontal=1]="horizontal",pl[pl.vertical=2]="vertical",pl[pl.horizontalOnly=3]="horizontalOnly";const Hl=-17;class kl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const i=new kl;return i.scale=t||1,i.fontStack=e,i}static forImage(t){const e=new kl;return e.imageName=t,e}}class jl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const i=new jl;for(let n=0;n<t.sections.length;n++){const a=t.sections[n];a.image?i.addImageSection(a):i.addTextSection(a,e)}return i}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i+1)||null,a=t.charCodeAt(i-1)||null;e+=n&&Jn(n)&&!sl[t[i+1]]||a&&Jn(a)&&!sl[t[i-1]]||!sl[t[i]]?t[i]:sl[t[i]]}return e}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&Nl[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let i=this.text.length-1;i>=0&&i>=t&&Nl[this.text.charCodeAt(i)];i--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const i=new jl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(kl.forText(t.scale,t.fontStack||e));const i=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(i)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void m("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(kl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):m("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fl(e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y){const f=jl.fromFeature(e,o);let g;h===t.WritingMode.vertical&&f.verticalizePunctuation();const{processBidirectionalText:I,processStyledBidirectionalText:v}=qn;if(I&&1===f.sections.length){g=[];const t=I(f.toString(),Kl(f,u,r,i,a,m,b));for(const e of t){const t=new jl;t.text=e,t.sections=f.sections;for(let i=0;i<e.length;i++)t.sectionIndex.push(0);g.push(t)}}else if(v){g=[];const t=v(f.text,f.sectionIndex,Kl(f,u,r,i,a,m,b));for(const e of t){const t=new jl;t.text=e[0],t.sectionIndex=e[1],t.sections=f.sections,g.push(t)}}else g=function(t,e){const i=[],n=t.text;let a=0;for(const n of e)i.push(t.substring(a,n)),a=n;return a<n.length&&i.push(t.substring(a,n.length)),i}(f,Kl(f,u,r,i,a,m,b));const x=[],Z={positionedLines:x,text:f.toString(),top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(e,i,n,a,o,r,s,l,c,u,d,h){let p=0,m=Hl,b=0,y=0;const f="right"===l?1:"left"===l?0:.5;let g=0;for(const s of o){s.trim();const o=s.getMaxScale(),l=(o-1)*ll,v={positionedGlyphs:[],lineOffset:0};e.positionedLines[g]=v;const x=v.positionedGlyphs;let Z=0;if(!s.length()){m+=r,++g;continue}for(let r=0;r<s.length();r++){const b=s.getSection(r),y=s.getSectionIndex(r),f=s.getCharCode(r);let g=0,v=null,G=null,w=null,W=ll;const X=!(c===t.WritingMode.horizontal||!d&&!Mn(f)||d&&(Nl[f]||(I=f,Yn.Arabic(I)||Yn["Arabic Supplement"](I)||Yn["Arabic Extended-A"](I)||Yn["Arabic Presentation Forms-A"](I)||Yn["Arabic Presentation Forms-B"](I))));if(b.imageName){const t=a[b.imageName];if(!t)continue;w=b.imageName,e.iconsInText=e.iconsInText||!0,G=t.paddedRect;const i=t.displaySize;b.scale=b.scale*ll/h,v={width:i[0],height:i[1],left:1,top:-3,advance:X?i[1]:i[0]},g=l+(ll-i[1]*b.scale),W=v.advance;const n=X?i[0]*b.scale-ll*o:i[1]*b.scale-ll*o;n>0&&n>Z&&(Z=n)}else{const t=n[b.fontStack],e=t&&t[f];if(e&&e.rect)G=e.rect,v=e.metrics;else{const t=i[b.fontStack],e=t&&t[f];if(!e)continue;v=e.metrics}g=(o-b.scale)*ll}X?(e.verticalizable=!0,x.push({glyph:f,imageName:w,x:p,y:m+g,vertical:X,scale:b.scale,fontStack:b.fontStack,sectionIndex:y,metrics:v,rect:G}),p+=W*b.scale+u):(x.push({glyph:f,imageName:w,x:p,y:m+g,vertical:X,scale:b.scale,fontStack:b.fontStack,sectionIndex:y,metrics:v,rect:G}),p+=v.advance*b.scale+u)}0!==x.length&&(b=Math.max(p-u,b),Ql(x,0,x.length-1,f,Z)),p=0;const G=r*o+Z;v.lineOffset=Math.max(Z,l),m+=G,y=Math.max(G,y),++g}var I;const v=m-Hl,{horizontalAlign:x,verticalAlign:Z}=Dl(s);(function(t,e,i,n,a,o,r,s,l){const c=(e-i)*a;let u=0;u=o!==r?-s*n-Hl:(-n*l+.5)*r;for(const e of t)for(const t of e.positionedGlyphs)t.x+=c,t.y+=u})(e.positionedLines,f,x,Z,b,y,r,v,o.length),e.top+=-Z*v,e.bottom=e.top+v,e.left+=-x*b,e.right=e.left+b}(Z,i,n,a,g,s,l,c,h,u,p,y),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(x)&&Z}const Nl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Tl={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Ul(t,e,i,n,a,o){if(e.imageName){const t=n[e.imageName];return t?t.displaySize[0]*e.scale*ll/o+a:0}{const n=i[e.fontStack],o=n&&n[t];return o?o.metrics.advance*e.scale+a:0}}function El(t,e,i,n){const a=Math.pow(t-e,2);return n?t<e?a/2:2*a:a+Math.abs(i)*i}function Al(t,e,i){let n=0;return 10===t&&(n-=1e4),i&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Ol(t,e,i,n,a,o){let r=null,s=El(e,i,a,o);for(const t of n){const n=El(e-t.x,i,a,o)+t.badness;n<=s&&(r=t,s=n)}return{index:t,x:e,priorBreak:r,badness:s}}function Pl(t){return t?Pl(t.priorBreak).concat(t.index):[]}function Kl(t,e,i,n,a,o,r){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,i,n,a,o){let r=0;for(let i=0;i<t.length();i++){const s=t.getSection(i);r+=Ul(t.getCharCode(i),s,n,a,e,o)}return r/Math.max(1,Math.ceil(r/i))}(t,e,i,n,a,r),c=t.text.indexOf("​")>=0;let u=0;for(let i=0;i<t.length();i++){const o=t.getSection(i),h=t.getCharCode(i);if(Nl[h]||(u+=Ul(h,o,n,a,e,r)),i<t.length()-1){const e=!((d=h)<11904||!(Yn["Bopomofo Extended"](d)||Yn.Bopomofo(d)||Yn["CJK Compatibility Forms"](d)||Yn["CJK Compatibility Ideographs"](d)||Yn["CJK Compatibility"](d)||Yn["CJK Radicals Supplement"](d)||Yn["CJK Strokes"](d)||Yn["CJK Symbols and Punctuation"](d)||Yn["CJK Unified Ideographs Extension A"](d)||Yn["CJK Unified Ideographs"](d)||Yn["Enclosed CJK Letters and Months"](d)||Yn["Halfwidth and Fullwidth Forms"](d)||Yn.Hiragana(d)||Yn["Ideographic Description Characters"](d)||Yn["Kangxi Radicals"](d)||Yn["Katakana Phonetic Extensions"](d)||Yn.Katakana(d)||Yn["Vertical Forms"](d)||Yn["Yi Radicals"](d)||Yn["Yi Syllables"](d)));(Tl[h]||e||o.imageName)&&s.push(Ol(i+1,u,l,s,Al(h,t.getCharCode(i+1),e&&c),!1))}}var d;return Pl(Ol(t.length(),u,l,s,0,!0))}function Dl(t){let e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function Ql(t,e,i,n,a){if(!n&&!a)return;const o=t[i],r=(t[i].x+o.metrics.advance*o.scale)*n;for(let n=e;n<=i;n++)t[n].x-=r,t[n].y+=a}function ql(t,e,i){const{horizontalAlign:n,verticalAlign:a}=Dl(i),o=e[0]-t.displaySize[0]*n,r=e[1]-t.displaySize[1]*a;return{image:t,top:r,bottom:r+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function $l(t,e,i,n,a,o){const r=t.image;let s;if(r.content){const t=r.content,e=r.pixelRatio||1;s=[t[0]/e,t[1]/e,r.displaySize[0]-t[2]/e,r.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,d,h,p;"width"===i||"both"===i?(p=a[0]+l-n[3],d=a[0]+c+n[1]):(p=a[0]+(l+c-r.displaySize[0])/2,d=p+r.displaySize[0]);const m=e.top*o,b=e.bottom*o;return"height"===i||"both"===i?(u=a[1]+m-n[0],h=a[1]+b+n[2]):(u=a[1]+(m+b-r.displaySize[1])/2,h=u+r.displaySize[1]),{image:r,top:u,right:d,bottom:h,left:p,collisionPadding:s}}const tc=128;function ec(t,e){const{expression:i}=e;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new $n(t+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:n}=i;let a=0;for(;a<e.length&&e[a]<=t;)a++;a=Math.max(0,a-1);let o=a;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const r=e[a],s=e[o];return"composite"===i.kind?{kind:"composite",minZoom:r,maxZoom:s,interpolationType:n}:{kind:"camera",minZoom:r,maxZoom:s,minSize:i.evaluate(new $n(r)),maxSize:i.evaluate(new $n(s)),interpolationType:n}}}class ic extends W{constructor(t,e,i,n){super(t,e),this.angle=i,void 0!==n&&(this.segment=n)}clone(){return new ic(this.x,this.y,this.angle,this.segment)}}function nc(t,e,i,n,a){if(void 0===e.segment)return!0;let o=e,r=e.segment+1,s=0;for(;s>-i/2;){if(r--,r<0)return!1;s-=t[r].dist(o),o=t[r]}s+=t[r].dist(t[r+1]),r++;const l=[];let c=0;for(;s<i/2;){const e=t[r],i=t[r+1];if(!i)return!1;let o=t[r-1].angleTo(e)-e.angleTo(i);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>a)return!1;r++,s+=e.dist(i)}return!0}function ac(t){let e=0;for(let i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function oc(t,e,i){return t?.6*e*i:0}function rc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function sc(t,e,i,n,a,o){const r=oc(i,a,o),s=rc(i,n)*o;let l=0;const c=ac(t)/2;for(let i=0;i<t.length-1;i++){const n=t[i],a=t[i+1],o=n.dist(a);if(l+o>c){const u=(c-l)/o,d=We(n.x,a.x,u),h=We(n.y,a.y,u),p=new ic(d,h,a.angleTo(n),i);return p._round(),!r||nc(t,p,s,r,e)?p:void 0}l+=o}}function lc(t,e,i,n,a,o,r,s,l){const c=oc(n,o,r),u=rc(n,a),d=u*r,h=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-d<e/4&&(e=d+e/4),cc(t,h?e/2*s%e:(u/2+2*o)*r*s%e,e,c,i,d,h,!1,l)}function cc(t,e,i,n,a,o,r,s,l){const c=o/2,u=ac(t);let d=0,h=e-i,p=[];for(let e=0;e<t.length-1;e++){const r=t[e],s=t[e+1],m=r.dist(s),b=s.angleTo(r);for(;h+i<d+m;){h+=i;const y=(h-d)/m,f=We(r.x,s.x,y),g=We(r.y,s.y,y);if(f>=0&&f<l&&g>=0&&g<l&&h-c>=0&&h+c<=u){const i=new ic(f,g,b,e);i._round(),n&&!nc(t,i,o,n,a)||p.push(i)}}d+=m}return s||p.length||r||(p=cc(t,d/2,i,n,a,o,r,!0,l)),p}function uc(t,e,i,n,a){const o=[];for(let r=0;r<t.length;r++){const s=t[r];let l;for(let t=0;t<s.length-1;t++){let r=s[t],c=s[t+1];r.x<e&&c.x<e||(r.x<e?r=new W(e,r.y+(e-r.x)/(c.x-r.x)*(c.y-r.y))._round():c.x<e&&(c=new W(e,r.y+(e-r.x)/(c.x-r.x)*(c.y-r.y))._round()),r.y<i&&c.y<i||(r.y<i?r=new W(r.x+(i-r.y)/(c.y-r.y)*(c.x-r.x),i)._round():c.y<i&&(c=new W(r.x+(i-r.y)/(c.y-r.y)*(c.x-r.x),i)._round()),r.x>=n&&c.x>=n||(r.x>=n?r=new W(n,r.y+(n-r.x)/(c.x-r.x)*(c.y-r.y))._round():c.x>=n&&(c=new W(n,r.y+(n-r.x)/(c.x-r.x)*(c.y-r.y))._round()),r.y>=a&&c.y>=a||(r.y>=a?r=new W(r.x+(a-r.y)/(c.y-r.y)*(c.x-r.x),a)._round():c.y>=a&&(c=new W(r.x+(a-r.y)/(c.y-r.y)*(c.x-r.x),a)._round()),l&&r.equals(l[l.length-1])||(l=[r],o.push(l)),l.push(c)))))}}return o}function dc(t,e,i,n){const a=[],o=t.image,r=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,c=t.right-t.left,u=t.bottom-t.top,d=o.stretchX||[[0,s]],h=o.stretchY||[[0,l]],p=(t,e)=>t+e[1]-e[0],m=d.reduce(p,0),b=h.reduce(p,0),y=s-m,f=l-b;let g=0,I=m,v=0,x=b,Z=0,G=y,w=0,X=f;if(o.content&&n){const t=o.content;g=hc(d,0,t[0]),v=hc(h,0,t[1]),I=hc(d,t[0],t[2]),x=hc(h,t[1],t[3]),Z=t[0]-g,w=t[1]-v,G=t[2]-t[0]-I,X=t[3]-t[1]-x}const _=(n,a,s,l)=>{const d=mc(n.stretch-g,I,c,t.left),h=bc(n.fixed-Z,G,n.stretch,m),p=mc(a.stretch-v,x,u,t.top),y=bc(a.fixed-w,X,a.stretch,b),f=mc(s.stretch-g,I,c,t.left),_=bc(s.fixed-Z,G,s.stretch,m),V=mc(l.stretch-v,x,u,t.top),S=bc(l.fixed-w,X,l.stretch,b),B=new W(d,p),L=new W(f,p),Y=new W(f,V),z=new W(d,V),R=new W(h/r,y/r),C=new W(_/r,S/r),M=e*Math.PI/180;if(M){const t=Math.sin(M),e=Math.cos(M),i=[e,-t,t,e];B._matMult(i),L._matMult(i),z._matMult(i),Y._matMult(i)}const J=n.stretch+n.fixed,H=a.stretch+a.fixed;return{tl:B,tr:L,bl:z,br:Y,tex:{x:o.paddedRect.x+1+J,y:o.paddedRect.y+1+H,w:s.stretch+s.fixed-J,h:l.stretch+l.fixed-H},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:C,minFontScaleX:G/r/c,minFontScaleY:X/r/u,isSDF:i}};if(n&&(o.stretchX||o.stretchY)){const t=pc(d,y,m),e=pc(h,f,b);for(let i=0;i<t.length-1;i++){const n=t[i],o=t[i+1];for(let t=0;t<e.length-1;t++)a.push(_(n,e[t],o,e[t+1]))}}else a.push(_({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return a}function hc(t,e,i){let n=0;for(const a of t)n+=Math.max(e,Math.min(i,a[1]))-Math.max(e,Math.min(i,a[0]));return n}function pc(t,e,i){const n=[{fixed:-1,stretch:0}];for(const[e,i]of t){const t=n[n.length-1];n.push({fixed:e-t.stretch,stretch:t.stretch}),n.push({fixed:e-t.stretch,stretch:t.stretch+(i-e)})}return n.push({fixed:e+1,stretch:i}),n}function mc(t,e,i,n){return t/e*i+n}function bc(t,e,i,n){return t-e*i/n}_n("Anchor",ic);class yc{constructor(t,e,i,n,a,o,r,s,l,c){if(this.boxStartIndex=t.length,l){let t=o.top,e=o.bottom;const i=o.collisionPadding;i&&(t-=i[1],e+=i[3]);let n=e-t;n>0&&(n=Math.max(10,n),this.circleDiameter=n)}else{let l=o.top*r-s[0],u=o.bottom*r+s[2],d=o.left*r-s[3],h=o.right*r+s[1];const p=o.collisionPadding;if(p&&(d-=p[0]*r,l-=p[1]*r,h+=p[2]*r,u+=p[3]*r),c){const t=new W(d,l),e=new W(h,l),i=new W(d,u),n=new W(h,u),a=c*Math.PI/180;t._rotate(a),e._rotate(a),i._rotate(a),n._rotate(a),d=Math.min(t.x,e.x,i.x,n.x),h=Math.max(t.x,e.x,i.x,n.x),l=Math.min(t.y,e.y,i.y,n.y),u=Math.max(t.y,e.y,i.y,n.y)}t.emplaceBack(e.x,e.y,d,l,h,u,i,n,a)}this.boxEndIndex=t.length}}class fc{constructor(t=[],e=gc){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:i}=this,n=e[t];for(;t>0;){const a=t-1>>1,o=e[a];if(i(n,o)>=0)break;e[t]=o,t=a}e[t]=n}_down(t){const{data:e,compare:i}=this,n=this.length>>1,a=e[t];for(;t<n;){let n=1+(t<<1),o=e[n];const r=n+1;if(r<this.length&&i(e[r],o)<0&&(n=r,o=e[r]),i(o,a)>=0)break;e[t]=o,t=n}e[t]=a}}function gc(t,e){return t<e?-1:t>e?1:0}function Ic(t,e=1,i=!1){let n=1/0,a=1/0,o=-1/0,r=-1/0;const s=t[0];for(let t=0;t<s.length;t++){const e=s[t];(!t||e.x<n)&&(n=e.x),(!t||e.y<a)&&(a=e.y),(!t||e.x>o)&&(o=e.x),(!t||e.y>r)&&(r=e.y)}const l=Math.min(o-n,r-a);let c=l/2;const u=new fc([],vc);if(0===l)return new W(n,a);for(let e=n;e<o;e+=l)for(let i=a;i<r;i+=l)u.push(new xc(e+c,i+c,c,t));let d=function(t){let e=0,i=0,n=0;const a=t[0];for(let t=0,o=a.length,r=o-1;t<o;r=t++){const o=a[t],s=a[r],l=o.x*s.y-s.x*o.y;i+=(o.x+s.x)*l,n+=(o.y+s.y)*l,e+=3*l}return new xc(i/e,n/e,0,t)}(t),h=u.length;for(;u.length;){const n=u.pop();(n.d>d.d||!d.d)&&(d=n,i&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,h)),n.max-d.d<=e||(c=n.h/2,u.push(new xc(n.p.x-c,n.p.y-c,c,t)),u.push(new xc(n.p.x+c,n.p.y-c,c,t)),u.push(new xc(n.p.x-c,n.p.y+c,c,t)),u.push(new xc(n.p.x+c,n.p.y+c,c,t)),h+=4)}return i&&(console.log(`num probes: ${h}`),console.log(`best distance: ${d.d}`)),d.p}function vc(t,e){return e.max-t.max}function xc(t,e,i,n){this.p=new W(t,e),this.h=i,this.d=function(t,e){let i=!1,n=1/0;for(let a=0;a<e.length;a++){const o=e[a];for(let e=0,a=o.length,r=a-1;e<a;r=e++){const a=o[e],s=o[r];a.y>t.y!=s.y>t.y&&t.x<(s.x-a.x)*(t.y-a.y)/(s.y-a.y)+a.x&&(i=!i),n=Math.min(n,nr(t,a,s))}}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}const Zc=Number.POSITIVE_INFINITY;function Gc(t,e){return e[1]!==Zc?function(t,e,i){let n=0,a=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":a=i-7;break;case"bottom-right":case"bottom-left":case"bottom":a=7-i}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,a]}(t,e[0],e[1]):function(t,e){let i=0,n=0;e<0&&(e=0);const a=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=a-7;break;case"bottom-right":case"bottom-left":n=7-a;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":i=-a;break;case"top-left":case"bottom-left":i=a;break;case"left":i=e;break;case"right":i=-e}return[i,n]}(t,e[0])}function wc(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Wc(e,i,n,a,o,r,s,l,c,u,d){let h=r.textMaxSize.evaluate(i,{});void 0===h&&(h=s);const p=e.layers[0].layout,b=p.get("icon-offset").evaluate(i,{},d),y=Vc(n.horizontal),f=s/24,g=e.tilePixelRatio*f,I=e.tilePixelRatio*h/24,v=e.tilePixelRatio*l,x=e.tilePixelRatio*p.get("symbol-spacing"),Z=p.get("text-padding")*e.tilePixelRatio,G=function(t,e,i,n=1){const a=t.get("icon-padding").evaluate(e,{},i),o=a&&a.values;return[o[0]*n,o[1]*n,o[2]*n,o[3]*n]}(p,i,d,e.tilePixelRatio),w=p.get("text-max-angle")/180*Math.PI,W="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),X="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),_=p.get("symbol-placement"),V=x/2,S=p.get("icon-text-fit");let B;a&&"none"!==S&&(e.allowVerticalPlacement&&n.vertical&&(B=$l(a,n.vertical,S,p.get("icon-text-fit-padding"),b,f)),y&&(a=$l(a,y,S,p.get("icon-text-fit-padding"),b,f)));const L=(l,h)=>{h.x<0||h.x>=To||h.y<0||h.y>=To||function(e,i,n,a,o,r,s,l,c,u,d,h,p,b,y,f,g,I,v,x,Z,G,w,W,X){const _=e.addToLineVertexArray(i,n);let V,S,B,L,Y=0,z=0,R=0,C=0,M=-1,J=-1;const H={};let k=Io.exports(""),j=0,F=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[j,F]=l.layout.get("text-offset").evaluate(Z,{},W).map((t=>t*ll)):(j=l.layout.get("text-radial-offset").evaluate(Z,{},W)*ll,F=Zc),e.allowVerticalPlacement&&a.vertical){const t=l.layout.get("text-rotate").evaluate(Z,{},W)+90;B=new yc(c,i,u,d,h,a.vertical,p,b,y,t),s&&(L=new yc(c,i,u,d,h,s,g,I,y,t))}if(o){const n=l.layout.get("icon-rotate").evaluate(Z,{}),a="none"!==l.layout.get("icon-text-fit"),r=dc(o,n,w,a),p=s?dc(s,n,w,a):void 0;S=new yc(c,i,u,d,h,o,g,I,!1,n),Y=4*r.length;const b=e.iconSizeData;let y=null;"source"===b.kind?(y=[tc*l.layout.get("icon-size").evaluate(Z,{})],y[0]>Xc&&m(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===b.kind&&(y=[tc*G.compositeIconSizes[0].evaluate(Z,{},W),tc*G.compositeIconSizes[1].evaluate(Z,{},W)],(y[0]>Xc||y[1]>Xc)&&m(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,r,y,x,v,Z,t.WritingMode.none,i,_.lineStartIndex,_.lineLength,-1,W),M=e.icon.placedSymbolArray.length-1,p&&(z=4*p.length,e.addSymbols(e.icon,p,y,x,v,Z,t.WritingMode.vertical,i,_.lineStartIndex,_.lineLength,-1,W),J=e.icon.placedSymbolArray.length-1)}const N=Object.keys(a.horizontal);for(const n of N){const o=a.horizontal[n];if(!V){k=Io.exports(o.text);const t=l.layout.get("text-rotate").evaluate(Z,{},W);V=new yc(c,i,u,d,h,o,p,b,y,t)}const s=1===o.positionedLines.length;if(R+=_c(e,i,o,r,l,y,Z,f,_,a.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,s?N:[n],H,M,G,W),s)break}a.vertical&&(C+=_c(e,i,a.vertical,r,l,y,Z,f,_,t.WritingMode.vertical,["vertical"],H,J,G,W));const T=V?V.boxStartIndex:e.collisionBoxArray.length,U=V?V.boxEndIndex:e.collisionBoxArray.length,E=B?B.boxStartIndex:e.collisionBoxArray.length,A=B?B.boxEndIndex:e.collisionBoxArray.length,O=S?S.boxStartIndex:e.collisionBoxArray.length,P=S?S.boxEndIndex:e.collisionBoxArray.length,K=L?L.boxStartIndex:e.collisionBoxArray.length,D=L?L.boxEndIndex:e.collisionBoxArray.length;let Q=-1;const q=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;Q=q(V,Q),Q=q(B,Q),Q=q(S,Q),Q=q(L,Q);const $=Q>-1?1:0;$&&(Q*=X/ll),e.glyphOffsetArray.length>=Jc.MAX_GLYPHS&&m("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Z.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,Z.sortKey),e.symbolInstances.emplaceBack(i.x,i.y,H.right>=0?H.right:-1,H.center>=0?H.center:-1,H.left>=0?H.left:-1,H.vertical||-1,M,J,k,T,U,E,A,O,P,K,D,u,R,C,Y,z,$,0,p,j,F,Q)}(e,h,l,n,a,o,B,e.layers[0],e.collisionBoxArray,i.index,i.sourceLayerIndex,e.index,g,[Z,Z,Z,Z],W,c,v,G,X,b,i,r,u,d,s)};if("line"===_)for(const t of uc(i.geometry,0,0,To,To)){const i=lc(t,x,w,n.vertical||y,a,24,I,e.overscaling,To);for(const n of i){const i=y;i&&Sc(e,i.text,V,n)||L(t,n)}}else if("line-center"===_){for(const t of i.geometry)if(t.length>1){const e=sc(t,w,n.vertical||y,a,24,I);e&&L(t,e)}}else if("Polygon"===i.type)for(const t of hs(i.geometry,0)){const e=Ic(t,16);L(t[0],new ic(e.x,e.y,0))}else if("LineString"===i.type)for(const t of i.geometry)L(t,new ic(t[0].x,t[0].y,0));else if("Point"===i.type)for(const t of i.geometry)for(const e of t)L([e],new ic(e.x,e.y,0))}const Xc=32640;function _c(t,e,i,n,a,o,r,s,l,c,u,d,h,p,b){const y=function(t,e,i,n,a,o,r,s){const l=n.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[];for(const t of e.positionedLines)for(const n of t.positionedGlyphs){if(!n.rect)continue;const o=n.rect||{};let u=4,d=!0,h=1,p=0;const m=(a||s)&&n.vertical,b=n.metrics.advance*n.scale/2;if(s&&e.verticalizable){const e=(n.scale-1)*ll,i=(ll-n.metrics.width*n.scale)/2;p=t.lineOffset/2-(n.imageName?-i:e)}if(n.imageName){const t=r[n.imageName];d=t.sdf,h=t.pixelRatio,u=1/h}const y=a?[n.x+b,n.y]:[0,0];let f=a?[0,0]:[n.x+b+i[0],n.y+i[1]-p],g=[0,0];m&&(g=f,f=[0,0]);const I=(n.metrics.left-u)*n.scale-b+f[0],v=(-n.metrics.top-u)*n.scale+f[1],x=I+o.w*n.scale/h,Z=v+o.h*n.scale/h,G=new W(I,v),w=new W(x,v),X=new W(I,Z),_=new W(x,Z);if(m){const t=new W(-b,b-Hl),e=-Math.PI/2,i=12-b,a=new W(22-i,-(n.imageName?i:0)),o=new W(...g);G._rotateAround(e,t)._add(a)._add(o),w._rotateAround(e,t)._add(a)._add(o),X._rotateAround(e,t)._add(a)._add(o),_._rotateAround(e,t)._add(a)._add(o)}if(l){const t=Math.sin(l),e=Math.cos(l),i=[e,-t,t,e];G._matMult(i),w._matMult(i),X._matMult(i),_._matMult(i)}const V=new W(0,0),S=new W(0,0);c.push({tl:G,tr:w,bl:X,br:_,tex:o,writingMode:e.writingMode,glyphOffset:y,sectionIndex:n.sectionIndex,isSDF:d,pixelOffsetTL:V,pixelOffsetBR:S,minFontScaleX:0,minFontScaleY:0})}return c}(0,i,s,a,o,r,n,t.allowVerticalPlacement),f=t.textSizeData;let g=null;"source"===f.kind?(g=[tc*a.layout.get("text-size").evaluate(r,{})],g[0]>Xc&&m(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===f.kind&&(g=[tc*p.compositeTextSizes[0].evaluate(r,{},b),tc*p.compositeTextSizes[1].evaluate(r,{},b)],(g[0]>Xc||g[1]>Xc)&&m(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,y,g,s,o,r,c,e,l.lineStartIndex,l.lineLength,h,b);for(const e of u)d[e]=t.text.placedSymbolArray.length-1;return 4*y.length}function Vc(t){for(const e in t)return t[e];return null}function Sc(t,e,i,n){const a=t.compareText;if(e in a){const t=a[e];for(let e=t.length-1;e>=0;e--)if(n.dist(t[e])<i)return!0}else a[e]=[];return a[e].push(n),!1}const Bc=Zs.VectorTileFeature.types,Lc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Yc(t,e,i,n,a,o,r,s,l,c,u,d,h){const p=s?Math.min(Xc,Math.round(s[0])):0,m=s?Math.min(Xc,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*n),Math.round(32*a),o,r,(p<<1)+(l?1:0),m,16*c,16*u,256*d,256*h)}function zc(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function Rc(t){for(const e of t.sections)if(jn(e.text))return!0;return!1}class Cc{constructor(t){this.layoutVertexArray=new ro,this.indexArray=new ho,this.programConfigurations=t,this.segments=new yo,this.dynamicLayoutVertexArray=new so,this.opacityVertexArray=new lo,this.placedSymbolArray=new Aa}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,i,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,el.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,il.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Lc,!0),this.opacityVertexBuffer.itemSize=1),(i||n)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}_n("SymbolBuffers",Cc);class Mc{constructor(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new yo,this.collisionVertexArray=new uo}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,nl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}_n("CollisionBuffers",Mc);class Jc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=br([]),this.placementViewportMatrix=br([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ec(this.zoom,i["text-size"]),this.iconSizeData=ec(this.zoom,i["icon-size"]);const n=this.layers[0].layout,a=n.get("symbol-sort-key"),o=n.get("symbol-z-order");this.canOverlap="never"!==Nc(n,"text-overlap","text-allow-overlap")||"never"!==Nc(n,"icon-overlap","icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!a.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((e=>t.WritingMode[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Cc(new jo(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Cc(new jo(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Ka,this.lineVertexArray=new Da,this.symbolInstances=new Pa}calculateGlyphDependencies(t,e,i,n,a){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||n)&&a){const i=sl[t.charAt(o)];i&&(e[i.charCodeAt(0)]=!0)}}populate(e,i,n){const a=this.layers[0],o=a.layout,r=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Jt&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==r.value.kind||r.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,d=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const h=i.iconDependencies,p=i.glyphDependencies,m=i.availableImages,b=new $n(this.zoom);for(const{feature:i,id:s,index:l,sourceLayerIndex:y}of e){const e=a._featureFilter.needGeometry,f=Oo(i,e);if(!a._featureFilter.filter(b,f,n))continue;let g,I;if(e||(f.geometry=Ao(i)),c){const t=a.getValueAndResolveTokens("text-field",f,n,m),e=Jt.factory(t);Rc(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Dn()||this.hasRTLText&&qn.isParsed())&&(g=rl(e,a,f))}if(u){const t=a.getValueAndResolveTokens("icon-image",f,n,m);I=t instanceof kt?t:kt.fromString(t)}if(!g&&!I)continue;const v=this.sortFeaturesByKey?d.evaluate(f,{},n):void 0;if(this.features.push({id:s,text:g,icon:I,index:l,sourceLayerIndex:y,geometry:f.geometry,properties:i.properties,type:Bc[i.type],sortKey:v}),I&&(h[I.name]=!0),g){const e=r.evaluate(f,{},n).join(","),i="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.WritingMode.vertical)>=0;for(const t of g.sections)if(t.image)h[t.image.name]=!0;else{const n=zn(g.toString()),a=t.fontStack||e,o=p[a]=p[a]||{};this.calculateGlyphDependencies(t.text,o,i,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(t){const e={},i={},n=[];let a=0;function o(e){n.push(t[e]),a++}function r(t,e,a){const o=i[t];return delete i[t],i[e]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(a[0]),o}function s(t,i,a){const o=e[i];return delete e[i],e[t]=o,n[o].geometry[0].shift(),n[o].geometry[0]=a[0].concat(n[o].geometry[0]),o}function l(t,e,i){const n=i?e[0][e[0].length-1]:e[0][0];return`${t}:${n.x}:${n.y}`}for(let c=0;c<t.length;c++){const u=t[c],d=u.geometry,h=u.text?u.text.toString():null;if(!h){o(c);continue}const p=l(h,d),m=l(h,d,!0);if(p in i&&m in e&&i[p]!==e[m]){const t=s(p,m,d),a=r(p,m,n[t].geometry);delete e[p],delete i[m],i[l(h,n[a].geometry,!0)]=a,n[t].geometry=null}else p in i?r(p,m,d):m in e?s(p,m,d):(o(c),e[p]=a-1,i[m]=a-1)}return n.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const i=this.lineVertexArray.length;if(void 0!==t.segment){let i=t.dist(e[t.segment+1]),n=t.dist(e[t.segment]);const a={};for(let n=t.segment+1;n<e.length;n++)a[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:i},n<e.length-1&&(i+=e[n+1].dist(e[n]));for(let i=t.segment||0;i>=0;i--)a[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:n},i>0&&(n+=e[i-1].dist(e[i]));for(let t=0;t<e.length;t++){const e=a[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,i,n,a,o,r,s,l,c,u,d,h){const p=e.indexArray,m=e.layoutVertexArray,b=e.segments.prepareSegment(4*i.length,m,p,this.canOverlap?r.sortKey:void 0),y=this.glyphOffsetArray.length,f=b.vertexLength,g=this.allowVerticalPlacement&&s===t.WritingMode.vertical?Math.PI/2:0,I=r.text&&r.text.sections;for(let t=0;t<i.length;t++){const{tl:a,tr:o,bl:s,br:c,tex:u,pixelOffsetTL:d,pixelOffsetBR:y,minFontScaleX:f,minFontScaleY:v,glyphOffset:x,isSDF:Z,sectionIndex:G}=i[t],w=b.vertexLength,W=x[1];Yc(m,l.x,l.y,a.x,W+a.y,u.x,u.y,n,Z,d.x,d.y,f,v),Yc(m,l.x,l.y,o.x,W+o.y,u.x+u.w,u.y,n,Z,y.x,d.y,f,v),Yc(m,l.x,l.y,s.x,W+s.y,u.x,u.y+u.h,n,Z,d.x,y.y,f,v),Yc(m,l.x,l.y,c.x,W+c.y,u.x+u.w,u.y+u.h,n,Z,y.x,y.y,f,v),zc(e.dynamicLayoutVertexArray,l,g),p.emplaceBack(w,w+1,w+2),p.emplaceBack(w+1,w+2,w+3),b.vertexLength+=4,b.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),t!==i.length-1&&G===i[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,r,r.index,{},h,I&&I[G])}e.placedSymbolArray.emplaceBack(l.x,l.y,y,this.glyphOffsetArray.length-y,f,c,u,l.segment,n?n[0]:0,n?n[1]:0,a[0],a[1],s,0,!1,0,d)}_addCollisionDebugVertex(t,e,i,n,a,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,n,a,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(t,e,i,n,a,o,r){const s=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),l=s.vertexLength,c=a.layoutVertexArray,u=a.collisionVertexArray,d=r.anchorX,h=r.anchorY;this._addCollisionDebugVertex(c,u,o,d,h,new W(t,e)),this._addCollisionDebugVertex(c,u,o,d,h,new W(i,e)),this._addCollisionDebugVertex(c,u,o,d,h,new W(i,n)),this._addCollisionDebugVertex(c,u,o,d,h,new W(t,n)),s.vertexLength+=4;const p=a.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),s.primitiveLength+=4}addDebugCollisionBoxes(t,e,i,n){for(let a=t;a<e;a++){const t=this.collisionBoxArray.get(a);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,n?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,i)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Mc(co,al.members,po),this.iconCollisionBox=new Mc(co,al.members,po);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,i,n,a,o,r,s,l){const c={};for(let n=e;n<i;n++){const e=t.get(n);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.textFeatureIndex=e.featureIndex;break}for(let e=n;e<a;e++){const i=t.get(e);c.verticalTextBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.verticalTextFeatureIndex=i.featureIndex;break}for(let e=o;e<r;e++){const i=t.get(e);c.iconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.iconFeatureIndex=i.featureIndex;break}for(let e=s;e<l;e++){const i=t.get(e);c.verticalIconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.verticalIconFeatureIndex=i.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const i=t.placedSymbolArray.get(e),n=i.vertexStartIndex+4*i.numGlyphs;for(let e=i.vertexStartIndex;e<n;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),i=Math.cos(t),n=[],a=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const r=this.symbolInstances.get(t);n.push(0|Math.round(e*r.anchorX+i*r.anchorY)),a.push(r.featureIndex)}return o.sort(((t,e)=>n[t]-n[e]||a[e]-a[t])),o}addToSortKeyRanges(t,e){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,i)=>{t>=0&&i.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}_n("SymbolBucket",Jc,{omit:["layers","collisionBoxArray","features","compareText"]}),Jc.MAX_GLYPHS=65535,Jc.addDynamicAttributes=zc;const Hc=new pa({"symbol-placement":new la(nt.layout_symbol["symbol-placement"]),"symbol-spacing":new la(nt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new la(nt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ca(nt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new la(nt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new la(nt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new la(nt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new la(nt.layout_symbol["icon-ignore-placement"]),"icon-optional":new la(nt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new la(nt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ca(nt.layout_symbol["icon-size"]),"icon-text-fit":new la(nt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new la(nt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ca(nt.layout_symbol["icon-image"]),"icon-rotate":new ca(nt.layout_symbol["icon-rotate"]),"icon-padding":new ca(nt.layout_symbol["icon-padding"]),"icon-keep-upright":new la(nt.layout_symbol["icon-keep-upright"]),"icon-offset":new ca(nt.layout_symbol["icon-offset"]),"icon-anchor":new ca(nt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new la(nt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new la(nt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new la(nt.layout_symbol["text-rotation-alignment"]),"text-field":new ca(nt.layout_symbol["text-field"]),"text-font":new ca(nt.layout_symbol["text-font"]),"text-size":new ca(nt.layout_symbol["text-size"]),"text-max-width":new ca(nt.layout_symbol["text-max-width"]),"text-line-height":new la(nt.layout_symbol["text-line-height"]),"text-letter-spacing":new ca(nt.layout_symbol["text-letter-spacing"]),"text-justify":new ca(nt.layout_symbol["text-justify"]),"text-radial-offset":new ca(nt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new la(nt.layout_symbol["text-variable-anchor"]),"text-anchor":new ca(nt.layout_symbol["text-anchor"]),"text-max-angle":new la(nt.layout_symbol["text-max-angle"]),"text-writing-mode":new la(nt.layout_symbol["text-writing-mode"]),"text-rotate":new ca(nt.layout_symbol["text-rotate"]),"text-padding":new la(nt.layout_symbol["text-padding"]),"text-keep-upright":new la(nt.layout_symbol["text-keep-upright"]),"text-transform":new ca(nt.layout_symbol["text-transform"]),"text-offset":new ca(nt.layout_symbol["text-offset"]),"text-allow-overlap":new la(nt.layout_symbol["text-allow-overlap"]),"text-overlap":new la(nt.layout_symbol["text-overlap"]),"text-ignore-placement":new la(nt.layout_symbol["text-ignore-placement"]),"text-optional":new la(nt.layout_symbol["text-optional"])});var kc={paint:new pa({"icon-opacity":new ca(nt.paint_symbol["icon-opacity"]),"icon-color":new ca(nt.paint_symbol["icon-color"]),"icon-halo-color":new ca(nt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ca(nt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ca(nt.paint_symbol["icon-halo-blur"]),"icon-translate":new la(nt.paint_symbol["icon-translate"]),"icon-translate-anchor":new la(nt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ca(nt.paint_symbol["text-opacity"]),"text-color":new ca(nt.paint_symbol["text-color"],{runtimeType:bt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new ca(nt.paint_symbol["text-halo-color"]),"text-halo-width":new ca(nt.paint_symbol["text-halo-width"]),"text-halo-blur":new ca(nt.paint_symbol["text-halo-blur"]),"text-translate":new la(nt.paint_symbol["text-translate"]),"text-translate-anchor":new la(nt.paint_symbol["text-translate-anchor"])}),layout:Hc};class jc{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:dt,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}_n("FormatSectionOverride",jc,{omit:["defaultValue"]});class Fc extends ba{constructor(t){super(t,kc)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const i of t)e.indexOf(i)<0&&e.push(i);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,i,n){const a=this.layout.get(t).evaluate(e,{},i,n),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||zi(o.value)||!a?a:function(t,e){return e.replace(/{([^{}]+)}/g,((e,i)=>i in t?String(t[i]):""))}(e.properties,a)}createBucket(t){return new Jc(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of kc.paint.overridableProperties){if(!Fc.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),i=new jc(e),n=new Yi(i,e.property.specification);let a=null;a="constant"===e.value.kind||"source"===e.value.kind?new Ci("source",n):new Mi("composite",n,e.value.zoomStops),this.paint._values[t]=new ra(e.property,a,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,i){return!(!this.layout||e.isDataDriven()||i.isDataDriven())&&Fc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const i=t.get("text-field"),n=kc.paint.properties[e];let a=!1;const o=t=>{for(const e of t)if(n.overrides&&n.overrides.hasOverride(e))return void(a=!0)};if("constant"===i.value.kind&&i.value.value instanceof Jt)o(i.value.value.sections);else if("source"===i.value.kind){const t=e=>{a||(e instanceof Ut&&Nt(e.value)===It?o(e.value.sections):e instanceof ui?o(e.sections):e.eachChild(t))},e=i.value;e._styleExpression&&t(e._styleExpression.expression)}return a}}function Nc(t,e,i){let n="never";const a=t.get(e);return a?n=a:t.get(i)&&(n="always"),n}var Tc={paint:new pa({"background-color":new la(nt.paint_background["background-color"]),"background-pattern":new da(nt.paint_background["background-pattern"]),"background-opacity":new la(nt.paint_background["background-opacity"])})},Uc={paint:new pa({"raster-opacity":new la(nt.paint_raster["raster-opacity"]),"raster-hue-rotate":new la(nt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new la(nt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new la(nt.paint_raster["raster-brightness-max"]),"raster-saturation":new la(nt.paint_raster["raster-saturation"]),"raster-contrast":new la(nt.paint_raster["raster-contrast"]),"raster-resampling":new la(nt.paint_raster["raster-resampling"]),"raster-fade-duration":new la(nt.paint_raster["raster-fade-duration"])})};class Ec extends ba{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Ac={circle:class extends ba{constructor(t){super(t,dr)}createBucket(t){return new Ko(t)}queryRadius(t){const e=t;return sr("circle-radius",this,e)+sr("circle-stroke-width",this,e)+lr(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,i,n,a,o,r,s){const l=cr(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,r),c=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),u="map"===this.paint.get("circle-pitch-alignment"),d=u?l:function(t,e){return t.map((t=>Gr(t,e)))}(l,s),h=u?c*r:c;for(const t of n)for(const e of t){const t=u?e:Gr(e,s);let i=h;const n=xr([],[e.x,e.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?i*=n[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(i*=o.cameraToCenterDistance/n[3]),Qo(d,t,i))return!0}return!1}},heatmap:class extends ba{constructor(t){super(t,Wr),this._updateColorRamp()}createBucket(t){return new wr(t)}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Lr({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends ba{constructor(t){super(t,Yr)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends ba{constructor(t){super(t,gs)}recalculate(t,e){super.recalculate(t,e);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new ys(t)}queryRadius(){return lr(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,i,n,a,o,r){return qo(cr(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,r),n)}isTileClipped(){return!0}},"fill-extrusion":class extends ba{constructor(t){super(t,js)}createBucket(t){return new Js(t)}queryRadius(){return lr(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,i,n,a,o,r,s){const l=cr(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,r),c=this.paint.get("fill-extrusion-height").evaluate(e,i),u=this.paint.get("fill-extrusion-base").evaluate(e,i),d=function(t,e,i,n){const a=[];for(const i of t){const t=[i.x,i.y,0,1];xr(t,t,e),a.push(new W(t[0]/t[3],t[1]/t[3]))}return a}(l,s),h=function(t,e,i,n){const a=[],o=[],r=n[8]*e,s=n[9]*e,l=n[10]*e,c=n[11]*e,u=n[8]*i,d=n[9]*i,h=n[10]*i,p=n[11]*i;for(const e of t){const t=[],i=[];for(const a of e){const e=a.x,o=a.y,m=n[0]*e+n[4]*o+n[12],b=n[1]*e+n[5]*o+n[13],y=n[2]*e+n[6]*o+n[14],f=n[3]*e+n[7]*o+n[15],g=y+l,I=f+c,v=m+u,x=b+d,Z=y+h,G=f+p,w=new W((m+r)/I,(b+s)/I);w.z=g/I,t.push(w);const X=new W(v/G,x/G);X.z=Z/G,i.push(X)}a.push(t),o.push(i)}return[a,o]}(n,u,c,s);return function(t,e,i){let n=1/0;qo(i,e)&&(n=Ns(i,e[0]));for(let a=0;a<e.length;a++){const o=e[a],r=t[a];for(let t=0;t<o.length-1;t++){const e=o[t],a=[e,o[t+1],r[t+1],r[t],e];Do(i,a)&&(n=Math.min(n,Ns(i,a)))}}return n!==1/0&&n}(h[0],h[1],d)}},line:class extends ba{constructor(t){super(t,qs),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof we,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=$s.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Ds(t)}queryRadius(t){const e=t,i=tl(sr("line-width",this,e),sr("line-gap-width",this,e)),n=sr("line-offset",this,e);return i/2+Math.abs(n)+lr(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,i,n,a,o,r){const s=cr(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,r),l=r/2*tl(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),c=this.paint.get("line-offset").evaluate(e,i);return c&&(n=function(t,e){const i=[];for(let n=0;n<t.length;n++){const a=t[n],o=[];for(let t=0;t<a.length;t++){const i=a[t-1],n=a[t],r=a[t+1],s=0===t?new W(0,0):n.sub(i)._unit()._perp(),l=t===a.length-1?new W(0,0):r.sub(n)._unit()._perp(),c=s._add(l)._unit(),u=c.x*l.x+c.y*l.y;0!==u&&c._mult(1/u),o.push(c._mult(e)._add(n))}i.push(o)}return i}(n,c*r)),function(t,e,i){for(let n=0;n<e.length;n++){const a=e[n];if(t.length>=3)for(let e=0;e<a.length;e++)if(or(t,a[e]))return!0;if($o(t,a,i))return!0}return!1}(s,n,l)}isTileClipped(){return!0}},symbol:Fc,background:class extends ba{constructor(t){super(t,Tc)}},raster:class extends ba{constructor(t){super(t,Uc)}}};class Oc{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Pc=6371008.8;class Kc{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Kc(r(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,i=this.lat*e,n=t.lat*e,a=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return Pc*Math.acos(Math.min(a,1))}toBounds(t=0){const e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Dc(new Kc(this.lng-i,this.lat-e),new Kc(this.lng+i,this.lat+e))}static convert(t){if(t instanceof Kc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Kc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Kc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Dc{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Kc?new Kc(t.lng,t.lat):Kc.convert(t),this}setSouthWest(t){return this._sw=t instanceof Kc?new Kc(t.lng,t.lat):Kc.convert(t),this}extend(t){const e=this._sw,i=this._ne;let n,a;if(t instanceof Kc)n=t,a=t;else{if(!(t instanceof Dc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Dc.convert(t)):this.extend(Kc.convert(t)):this;if(n=t._sw,a=t._ne,!n||!a)return this}return e||i?(e.lng=Math.min(n.lng,e.lng),e.lat=Math.min(n.lat,e.lat),i.lng=Math.max(a.lng,i.lng),i.lat=Math.max(a.lat,i.lat)):(this._sw=new Kc(n.lng,n.lat),this._ne=new Kc(a.lng,a.lat)),this}getCenter(){return new Kc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Kc(this.getWest(),this.getNorth())}getSouthEast(){return new Kc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:i}=Kc.convert(t);let n=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&n}static convert(t){return t instanceof Dc?t:t?new Dc(t):t}}const Qc=2*Math.PI*Pc;function qc(t){return Qc*Math.cos(t*Math.PI/180)}function $c(t){return(180+t)/360}function tu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function eu(t,e){return t/qc(e)}function iu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class nu{constructor(t,e,i=0){this.x=+t,this.y=+e,this.z=+i}static fromLngLat(t,e=0){const i=Kc.convert(t);return new nu($c(i.lng),tu(i.lat),eu(e,i.lat))}toLngLat(){return new Kc(360*this.x-180,iu(this.y))}toAltitude(){return this.z*qc(iu(this.y))}meterInMercatorCoordinateUnits(){return 1/Qc*(t=iu(this.y),1/Math.cos(t*Math.PI/180));var t}}function au(t,e,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}class ou{constructor(t,e,i){if(t<0||t>25||i<0||i>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))throw new Error(`x=${e}, y=${i}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=e,this.y=i,this.key=lu(0,t,t,e,i)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,i){const n=(o=this.y,r=this.z,s=au(256*(a=this.x),256*(o=Math.pow(2,r)-o-1),r),l=au(256*(a+1),256*(o+1),r),s[0]+","+s[1]+","+l[0]+","+l[1]);var a,o,r,s,l;const c=function(t,e,i){let n,a="";for(let o=t;o>0;o--)n=1<<o-1,a+=(e&n?1:0)+(i&n?2:0);return a}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,n)}isChildOf(t){const e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}getTilePoint(t){const e=Math.pow(2,this.z);return new W((t.x*e-this.x)*To,(t.y*e-this.y)*To)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ru{constructor(t,e){this.wrap=t,this.canonical=e,this.key=lu(t,e.z,e.z,e.x,e.y)}}class su{constructor(t,e,i,n,a){if(t<i)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${i}`);this.overscaledZ=t,this.wrap=e,this.canonical=new ou(i,+n,+a),this.key=lu(e,t,i,n,a)}clone(){return new su(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const e=this.canonical.z-t;return t>this.canonical.z?new su(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new su(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const i=this.canonical.z-t;return t>this.canonical.z?lu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):lu(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new su(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,i=2*this.canonical.x,n=2*this.canonical.y;return[new su(e,this.wrap,e,i,n),new su(e,this.wrap,e,i+1,n),new su(e,this.wrap,e,i,n+1),new su(e,this.wrap,e,i+1,n+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new su(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new su(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ru(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new nu(t.x-this.wrap,t.y))}}function lu(t,e,i,n,a){(t*=2)<0&&(t=-1*t-1);const o=1<<i;return(o*o*t+o*a+n).toString(36)+i.toString(36)+e.toString(36)}_n("CanonicalTileID",ou),_n("OverscaledTileID",su,{omit:["posMatrix"]});class cu{constructor(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return void m(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(let t=0;t<n;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(n,t)]=this.data[this._idx(n-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,n)]=this.data[this._idx(t,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let t=0;t<n;t++)for(let e=0;e<n;e++){const i=this.get(t,e);i>this.max&&(this.max=i),i<this.min&&(this.min=i)}}get(t,e){const i=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[n],i[n+1],i[n+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,i){return(256*t*256+256*e+i)/10-1e4}_unpackTerrarium(t,e,i){return 256*t+e+i/256-32768}getPixels(){return new Br({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let n=e*this.dim,a=e*this.dim+this.dim,o=i*this.dim,r=i*this.dim+this.dim;switch(e){case-1:n=a-1;break;case 1:a=n+1}switch(i){case-1:o=r-1;break;case 1:r=o+1}const s=-e*this.dim,l=-i*this.dim;for(let e=o;e<r;e++)for(let i=n;i<a;i++)this.data[this._idx(i,e)]=t.data[this._idx(i+s,e+l)]}}_n("DEMData",cu);class uu{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class du{constructor(t,e,i,n,a){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=n,this.properties=t.properties,this.id=a}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class hu{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Wn(To,16,0),this.grid3D=new Wn(To,16,0),this.featureIndexArray=new qa,this.promoteId=e}insert(t,e,i,n,a,o){const r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,a);const s=o?this.grid3D:this.grid;for(let t=0;t<e.length;t++){const i=e[t],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<i.length;t++){const e=i[t];n[0]=Math.min(n[0],e.x),n[1]=Math.min(n[1],e.y),n[2]=Math.max(n[2],e.x),n[3]=Math.max(n[3],e.y)}n[0]<To&&n[1]<To&&n[2]>=0&&n[3]>=0&&s.insert(r,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Zs.VectorTile(new cl(this.rawTileData)).layers,this.sourceLayerCoder=new uu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,i,n){this.loadVTLayers();const a=t.params||{},o=To/t.tileSize/t.scale,r=Pi(a.filter),s=t.queryGeometry,l=t.queryPadding*o,c=mu(s),u=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),d=mu(t.cameraQueryGeometry),h=this.grid3D.query(d.minX-l,d.minY-l,d.maxX+l,d.maxY+l,((e,i,n,a)=>function(t,e,i,n,a){for(const o of t)if(e<=o.x&&i<=o.y&&n>=o.x&&a>=o.y)return!0;const o=[new W(e,i),new W(e,a),new W(n,a),new W(n,i)];if(t.length>2)for(const e of o)if(or(t,e))return!0;for(let e=0;e<t.length-1;e++)if(rr(t[e],t[e+1],o))return!0;return!1}(t.cameraQueryGeometry,e-l,i-l,n+l,a+l)));for(const t of h)u.push(t);u.sort(bu);const p={};let m;for(let l=0;l<u.length;l++){const c=u[l];if(c===m)continue;m=c;const d=this.featureIndexArray.get(c);let h=null;this.loadMatchingFeature(p,d.bucketIndex,d.sourceLayerIndex,d.featureIndex,r,a.layers,a.availableImages,e,i,n,((e,i,n)=>(h||(h=Ao(e)),i.queryIntersectsFeature(s,e,n,h,this.z,t.transform,o,t.pixelPosMatrix))))}return p}loadMatchingFeature(t,e,i,n,a,o,r,l,c,u,d){const h=this.bucketLayerIDs[e];if(o&&!function(t,e){for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,h))return;const p=this.sourceLayerCoder.decode(i),m=this.vtLayers[p].feature(n);if(a.needGeometry){const t=Oo(m,!0);if(!a.filter(new $n(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!a.filter(new $n(this.tileID.overscaledZ),m))return;const b=this.getId(m,p);for(let e=0;e<h.length;e++){const i=h[e];if(o&&o.indexOf(i)<0)continue;const a=l[i];if(!a)continue;let p={};b&&u&&(p=u.getState(a.sourceLayer||"_geojsonTileLayer",b));const y=s({},c[i]);y.paint=pu(y.paint,a.paint,m,p,r),y.layout=pu(y.layout,a.layout,m,p,r);const f=!d||d(m,a,p);if(!f)continue;const g=new du(m,this.z,this.x,this.y,b);g.layer=y;let I=t[i];void 0===I&&(I=t[i]=[]),I.push({featureIndex:n,feature:g,intersectionZ:f})}}lookupSymbolFeatures(t,e,i,n,a,o,r,s){const l={};this.loadVTLayers();const c=Pi(a);for(const a of t)this.loadMatchingFeature(l,i,n,a,c,o,r,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const i of e)if(t===i)return!0;return!1}getId(t,e){let i=t.id;return this.promoteId&&(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof i&&(i=Number(i))),i}}function pu(t,e,i,n,a){return u(t,((t,o)=>{const r=e instanceof sa?e.get(o):null;return r&&r.evaluate?r.evaluate(i,n,a):r}))}function mu(t){let e=1/0,i=1/0,n=-1/0,a=-1/0;for(const o of t)e=Math.min(e,o.x),i=Math.min(i,o.y),n=Math.max(n,o.x),a=Math.max(a,o.y);return{minX:e,minY:i,maxX:n,maxY:a}}function bu(t,e){return e-t}var yu;_n("FeatureIndex",hu,{omit:["rawTileData","sourceLayerCoder"]}),t.PerformanceMarkers=void 0,(yu=t.PerformanceMarkers||(t.PerformanceMarkers={})).create="create",yu.load="load",yu.fullLoad="fullLoad";let fu=null,gu=[];const Iu=1e3/30,vu={mark(t){performance.mark(t)},frame(t){const e=t;null!=fu&&gu.push(e-fu),fu=e},clearMetrics(){fu=null,gu=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const e in t.PerformanceMarkers)performance.clearMarks(t.PerformanceMarkers[e])},getPerformanceMetrics(){performance.measure("loadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.load),performance.measure("fullLoadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.fullLoad);const e=performance.getEntriesByName("loadTime")[0].duration,i=performance.getEntriesByName("fullLoadTime")[0].duration,n=gu.length,a=1/(gu.reduce(((t,e)=>t+e),0)/n/1e3),o=gu.filter((t=>t>Iu)).reduce(((t,e)=>t+(e-Iu)/Iu),0);return{loadTime:e,fullLoadTime:i,fps:a,percentDroppedFrames:o/(n+o)*100}}};t.AJAXError=N,t.ARRAY_TYPE=pr,t.Actor=class{constructor(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},c(["receive","process"],this),this.invoker=new Oc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=f()?t:window}send(t,e,i,n,a=!1){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[o]=i);const r=Z(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:t,hasCallback:!!i,targetMapId:n,mustQueue:a,sourceMapId:this.mapId,data:Sn(e,r)},r),{cancel:()=>{i&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:n,sourceMapId:this.mapId})}}}receive(t){const e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];const t=this.cancelCallbacks[i];delete this.cancelCallbacks[i],t&&t()}else f()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)}process(){if(!this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,e){if("<response>"===e.type){const i=this.callbacks[t];delete this.callbacks[t],i&&(e.error?i(Bn(e.error)):i(null,Bn(e.data)))}else{let i=!1;const n=Z(this.globalScope)?void 0:[],a=e.hasCallback?(e,a)=>{i=!0,delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Sn(e):null,data:Sn(a,n)},n)}:t=>{i=!0};let o=null;const r=Bn(e.data);if(this.parent[e.type])o=this.parent[e.type](e.sourceMapId,r,a);else if(this.parent.getWorkerSource){const t=e.type.split(".");o=this.parent.getWorkerSource(e.sourceMapId,t[0],r.source)[t[1]](r,a)}else a(new Error(`Could not find function ${e.type}`));!i&&o&&o.cancel&&(this.cancelCallbacks[t]=o.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.AlphaImage=Sr,t.CanonicalTileID=ou,t.CollisionBoxArray=Ua,t.CollisionCircleLayoutArray=class extends Ya{},t.Color=Rt,t.DEMData=cu,t.DataConstantProperty=la,t.DictionaryCoder=uu,t.EXTENT=To,t.ErrorEvent=et,t.EvaluationParameters=$n,t.Event=tt,t.Evented=it,t.FeatureIndex=hu,t.FillBucket=ys,t.FillExtrusionBucket=Js,t.GeoJSONFeature=du,t.ImageAtlas=Jl,t.ImagePosition=Ml,t.LineBucket=Ds,t.LineStripIndexArray=class extends Fa{},t.LngLat=Kc,t.LngLatBounds=Dc,t.MercatorCoordinate=nu,t.ONE_EM=ll,t.OverscaledTileID=su,t.PerformanceUtils=vu,t.PosArray=$a,t.Properties=pa,t.QuadTriangleArray=class extends Ra{},t.RGBAImage=Br,t.RasterBoundsArray=class extends Za{},t.RequestPerformance=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.ResourceType=F,t.SegmentVector=yo,t.SymbolBucket=Jc,t.Transitionable=ia,t.TriangleIndexArray=ho,t.Uniform1f=So,t.Uniform1i=class extends Vo{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends Vo{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends Vo{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=Bo,t.UniformColor=Lo,t.UniformMatrix4f=class extends Vo{constructor(t,e){super(t,e),this.current=Yo}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=ru,t.ValidationError=at,t.ZoomHistory=Ln,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=zc,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);let n=t.length;const a=new Array(t.length);let o=null;t.forEach(((t,r)=>{e(t,((t,e)=>{t&&(o=t),a[r]=e,0==--n&&i(o,a)}))}))},t.bezier=n,t.bindAll=c,t.cacheEntryPossiblyAdded=function(t){R++,R>Y&&(t.getActor().send("enforceCacheSizeLimit",L),R=0)},t.clamp=o,t.clearTileCache=function(t){const e=caches.delete(V);t&&e.catch(t).then((()=>t()))},t.clipLine=uc,t.clone=function(t){var e=new pr(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=h,t.clone$2=function(t){var e=new pr(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=ol,t.config=_,t.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.create=function(){var t=new pr(16);return pr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=mr,t.createExpression=Ri,t.createFilter=Pi,t.createLayout=Ia,t.createStyleLayer=function(t){return"custom"===t.type?new Ec(t):new Ac[t.type](t)},t.cross=function(t,e,i){var n=e[0],a=e[1],o=e[2],r=i[0],s=i[1],l=i[2];return t[0]=a*l-o*s,t[1]=o*r-n*l,t[2]=n*s-a*r,t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=a,t.emitValidationErrors=wn,t.enforceCacheSizeLimit=function(t){z(),S&&S.then((e=>{e.keys().then((i=>{for(let n=0;n<i.length-t;n++)e.delete(i[n])}))}))},t.equals=function(t,e){var i=t[0],n=t[1],a=t[2],o=t[3],r=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],m=t[12],b=t[13],y=t[14],f=t[15],g=e[0],I=e[1],v=e[2],x=e[3],Z=e[4],G=e[5],w=e[6],W=e[7],X=e[8],_=e[9],V=e[10],S=e[11],B=e[12],L=e[13],Y=e[14],z=e[15];return Math.abs(i-g)<=hr*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(n-I)<=hr*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(a-v)<=hr*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-x)<=hr*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(r-Z)<=hr*Math.max(1,Math.abs(r),Math.abs(Z))&&Math.abs(s-G)<=hr*Math.max(1,Math.abs(s),Math.abs(G))&&Math.abs(l-w)<=hr*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(c-W)<=hr*Math.max(1,Math.abs(c),Math.abs(W))&&Math.abs(u-X)<=hr*Math.max(1,Math.abs(u),Math.abs(X))&&Math.abs(d-_)<=hr*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(h-V)<=hr*Math.max(1,Math.abs(h),Math.abs(V))&&Math.abs(p-S)<=hr*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(m-B)<=hr*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(b-L)<=hr*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(y-Y)<=hr*Math.max(1,Math.abs(y),Math.abs(Y))&&Math.abs(f-z)<=hr*Math.max(1,Math.abs(f),Math.abs(z))},t.evaluateSizeForFeature=function(t,{uSize:e,uSizeT:i},{lowerSize:n,upperSize:a}){return"source"===t.kind?n/tc:"composite"===t.kind?We(n/tc,a/tc,i):e},t.evaluateSizeForZoom=function(t,e){let i=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){const{interpolationType:a,minZoom:r,maxZoom:s}=t,l=a?o(Ue.interpolationFactor(a,e,r,s),0,1):0;"camera"===t.kind?n=We(t.minSize,t.maxSize,l):i=l}return{uSizeT:i,uSize:n}},t.evaluateVariableOffset=Gc,t.evented=Kn,t.exported=w,t.exported$1=C,t.extend=s,t.filterObject=d,t.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.getAnchorAlignment=Dl,t.getAnchorJustification=wc,t.getArrayBuffer=A,t.getImage=Q,t.getJSON=function(t,e){return E(s(t,{type:"json"}),e)},t.getOverlapMode=Nc,t.getRTLTextPluginStatus=Dn,t.getReferrer=T,t.getVideo=function(t,e){const i=window.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(let e=0;e<t.length;e++){const n=window.document.createElement("source");O(t[e])||(i.crossOrigin="Anonymous"),n.src=t[e],i.appendChild(n)}return{cancel:()=>{}}},t.identity=br,t.invert=function(t,e){var i=e[0],n=e[1],a=e[2],o=e[3],r=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],m=e[12],b=e[13],y=e[14],f=e[15],g=i*s-n*r,I=i*l-a*r,v=i*c-o*r,x=n*l-a*s,Z=n*c-o*s,G=a*c-o*l,w=u*b-d*m,W=u*y-h*m,X=u*f-p*m,_=d*y-h*b,V=d*f-p*b,S=h*f-p*y,B=g*S-I*V+v*_+x*X-Z*W+G*w;return B?(t[0]=(s*S-l*V+c*_)*(B=1/B),t[1]=(a*V-n*S-o*_)*B,t[2]=(b*G-y*Z+f*x)*B,t[3]=(h*Z-d*G-p*x)*B,t[4]=(l*X-r*S-c*W)*B,t[5]=(i*S-a*X+o*W)*B,t[6]=(y*v-m*G-f*I)*B,t[7]=(u*G-h*v+p*I)*B,t[8]=(r*V-s*X+c*w)*B,t[9]=(n*X-i*V-o*w)*B,t[10]=(m*Z-b*v+f*g)*B,t[11]=(d*v-u*Z-p*g)*B,t[12]=(s*W-r*_-l*w)*B,t[13]=(i*_-n*W+a*w)*B,t[14]=(b*I-m*x-y*g)*B,t[15]=(u*x-d*I+h*g)*B,t):null},t.isImageBitmap=G,t.isSafari=Z,t.isWorker=f,t.keysDifference=function(t,e){const i=[];for(const n in t)n in e||i.push(n);return i},t.lazyLoadRTLTextPlugin=function(){qn.isLoading()||qn.isLoaded()||"deferred"!==Dn()||Qn()},t.makeRequest=E,t.mapObject=u,t.mercatorXfromLng=$c,t.mercatorYfromLat=tu,t.mercatorZfromAltitude=eu,t.mul=gr,t.mul$1=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},t.multiply=yr,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var i=e[0],n=e[1],a=e[2],o=i*i+n*n+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=We,t.ortho=function(t,e,i,n,a,o,r){var s=1/(e-i),l=1/(n-a),c=1/(o-r);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(a+n)*l,t[14]=(r+o)*c,t[15]=1,t},t.parseCacheControl=g,t.parseGlyphPbf=function(t){return new cl(t).readFields(Yl,[])},t.pbf=cl,t.performSymbolLayout=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=To/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;const i=e.bucket.layers[0].layout,n=e.bucket.layers[0]._unevaluatedLayout._values,a={layoutIconSize:n["icon-size"].possiblyEvaluate(new $n(e.bucket.zoom+1),e.canonical),layoutTextSize:n["text-size"].possiblyEvaluate(new $n(e.bucket.zoom+1),e.canonical),textMaxSize:n["text-size"].possiblyEvaluate(new $n(18))};if("composite"===e.bucket.textSizeData.kind){const{minZoom:t,maxZoom:i}=e.bucket.textSizeData;a.compositeTextSizes=[n["text-size"].possiblyEvaluate(new $n(t),e.canonical),n["text-size"].possiblyEvaluate(new $n(i),e.canonical)]}if("composite"===e.bucket.iconSizeData.kind){const{minZoom:t,maxZoom:i}=e.bucket.iconSizeData;a.compositeIconSizes=[n["icon-size"].possiblyEvaluate(new $n(t),e.canonical),n["icon-size"].possiblyEvaluate(new $n(i),e.canonical)]}const o=i.get("text-line-height")*ll,r="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),s=i.get("text-keep-upright"),l=i.get("text-size");for(const n of e.bucket.features){const c=i.get("text-font").evaluate(n,{},e.canonical).join(","),u=l.evaluate(n,{},e.canonical),d=a.layoutTextSize.evaluate(n,{},e.canonical),h=a.layoutIconSize.evaluate(n,{},e.canonical),p={horizontal:{},vertical:void 0},b=n.text;let y,f=[0,0];if(b){const a=b.toString(),l=i.get("text-letter-spacing").evaluate(n,{},e.canonical)*ll,h=Rn(a)?l:0,m=i.get("text-anchor").evaluate(n,{},e.canonical),y=i.get("text-variable-anchor");if(!y){const t=i.get("text-radial-offset").evaluate(n,{},e.canonical);f=t?Gc(m,[t*ll,Zc]):i.get("text-offset").evaluate(n,{},e.canonical).map((t=>t*ll))}let g=r?"center":i.get("text-justify").evaluate(n,{},e.canonical);const I=i.get("symbol-placement"),v="point"===I?i.get("text-max-width").evaluate(n,{},e.canonical)*ll:0,x=()=>{e.bucket.allowVerticalPlacement&&zn(a)&&(p.vertical=Fl(b,e.glyphMap,e.glyphPositions,e.imagePositions,c,v,o,m,"left",h,f,t.WritingMode.vertical,!0,I,d,u))};if(!r&&y){const i="auto"===g?y.map((t=>wc(t))):[g];let n=!1;for(let a=0;a<i.length;a++){const r=i[a];if(!p.horizontal[r])if(n)p.horizontal[r]=p.horizontal[0];else{const i=Fl(b,e.glyphMap,e.glyphPositions,e.imagePositions,c,v,o,"center",r,h,f,t.WritingMode.horizontal,!1,I,d,u);i&&(p.horizontal[r]=i,n=1===i.positionedLines.length)}}x()}else{"auto"===g&&(g=wc(m));const i=Fl(b,e.glyphMap,e.glyphPositions,e.imagePositions,c,v,o,m,g,h,f,t.WritingMode.horizontal,!1,I,d,u);i&&(p.horizontal[g]=i),x(),zn(a)&&r&&s&&(p.vertical=Fl(b,e.glyphMap,e.glyphPositions,e.imagePositions,c,v,o,m,g,h,f,t.WritingMode.vertical,!1,I,d,u))}}let g=!1;if(n.icon&&n.icon.name){const t=e.imageMap[n.icon.name];t&&(y=ql(e.imagePositions[n.icon.name],i.get("icon-offset").evaluate(n,{},e.canonical),i.get("icon-anchor").evaluate(n,{},e.canonical)),g=!!t.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=g:e.bucket.sdfIcons!==g&&m("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.bucket.pixelRatio||0!==i.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0))}const I=Vc(p.horizontal)||p.vertical;e.bucket.iconsInText=!!I&&I.iconsInText,(I||y)&&Wc(e.bucket,n,p,y,e.imageMap,a,d,h,f,g,e.canonical)}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,n,a){var o,r=1/Math.tan(e/2);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(t[10]=(a+n)*(o=1/(n-a)),t[14]=2*a*n*o):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){const i={};for(let n=0;n<e.length;n++){const a=e[n];a in t&&(i[a]=t[a])}return i},t.plugin=qn,t.pointGeometry=W,t.polygonIntersectsPolygon=Do,t.potpack=Cl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=_n,t.registerForPluginStateChange=function(t){return t({pluginStatus:En,pluginURL:An}),Kn.on("pluginStateChange",t),t},t.renderColorRamp=Lr,t.rotateX=function(t,e,i){var n=Math.sin(i),a=Math.cos(i),o=e[4],r=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+c*n,t[5]=r*a+u*n,t[6]=s*a+d*n,t[7]=l*a+h*n,t[8]=c*a-o*n,t[9]=u*a-r*n,t[10]=d*a-s*n,t[11]=h*a-l*n,t},t.rotateZ=function(t,e,i){var n=Math.sin(i),a=Math.cos(i),o=e[0],r=e[1],s=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+c*n,t[1]=r*a+u*n,t[2]=s*a+d*n,t[3]=l*a+h*n,t[4]=c*a-o*n,t[5]=u*a-r*n,t[6]=d*a-s*n,t[7]=h*a-l*n,t},t.scale=function(t,e,i){var n=i[0],a=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.setCacheLimits=function(t,e){L=t,Y=e},t.setRTLTextPlugin=function(t,e,i=!1){if(En===Fn||En===Nn||En===Tn)throw new Error("setRTLTextPlugin cannot be called multiple times.");An=w.resolveURL(t),En=Fn,Un=e,Pn(),i||Qn()},t.spec=nt,t.sphericalToCartesian=function([t,e,i]){return e+=90,e*=Math.PI/180,i*=Math.PI/180,{x:t*Math.cos(e)*Math.sin(i),y:t*Math.sin(e)*Math.sin(i),z:t*Math.cos(i)}},t.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},t.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},t.toEvaluationFeature=Oo,t.transformMat3=function(t,e,i){var n=e[0],a=e[1],o=e[2];return t[0]=n*i[0]+a*i[3]+o*i[6],t[1]=n*i[1]+a*i[4]+o*i[7],t[2]=n*i[2]+a*i[5]+o*i[8],t},t.transformMat4=xr,t.transformMat4$1=function(t,e,i){var n=e[0],a=e[1];return t[0]=i[0]*n+i[4]*a+i[12],t[1]=i[1]*n+i[5]*a+i[13],t},t.translate=function(t,e,i){var n,a,o,r,s,l,c,u,d,h,p,m,b=i[0],y=i[1],f=i[2];return e===t?(t[12]=e[0]*b+e[4]*y+e[8]*f+e[12],t[13]=e[1]*b+e[5]*y+e[9]*f+e[13],t[14]=e[2]*b+e[6]*y+e[10]*f+e[14],t[15]=e[3]*b+e[7]*y+e[11]*f+e[15]):(a=e[1],o=e[2],r=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],p=e[10],m=e[11],t[0]=n=e[0],t[1]=a,t[2]=o,t[3]=r,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=p,t[11]=m,t[12]=n*b+s*y+d*f+e[12],t[13]=a*b+l*y+h*f+e[13],t[14]=o*b+c*y+p*f+e[14],t[15]=r*b+u*y+m*f+e[15]),t},t.triggerPluginCompletionEvent=On,t.unicodeBlockLookup=Yn,t.uniqueId=function(){return l++},t.validateCustomStyleLayer=function(t){const e=[],i=t.id;return void 0===i&&e.push({message:`layers.${i}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${i}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateLight=xn,t.validateStyle=vn,t.vectorTile=Zs,t.warnOnce=m,t.wrap=r})),n(["./shared"],(function(t){function e(t){const i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){let i="[";for(const n of t)i+=`${e(n)},`;return`${i}]`}const n=Object.keys(t).sort();let a="{";for(let i=0;i<n.length;i++)a+=`${JSON.stringify(n[i])}:${e(t[n[i]])},`;return`${a}}`}function i(i){let n="";for(const a of t.refProperties)n+=`/${e(i[a])}`;return n}class n{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,n){for(const i of e){this._layerConfigs[i.id]=i;const e=this._layers[i.id]=t.createStyleLayer(i);e._featureFilter=t.createFilter(e.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const t of n)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const a=function(t,e){const n={};for(let a=0;a<t.length;a++){const o=e&&e[t[a].id]||i(t[a]);e&&(e[t[a].id]=o);let r=n[o];r||(r=n[o]=[]),r.push(t[a])}const a=[];for(const t in n)a.push(n[t]);return a}(Object.values(this._layerConfigs),this.keyCache);for(const t of a){const e=t.map((t=>this._layers[t.id])),i=e[0];if("none"===i.visibility)continue;const n=i.source||"";let a=this.familiesBySource[n];a||(a=this.familiesBySource[n]={});const o=i.sourceLayer||"_geojsonTileLayer";let r=a[o];r||(r=a[o]=[]),r.push(e)}}}class a{constructor(e){const i={},n=[];for(const t in e){const a=e[t],o=i[t]={};for(const t in a){const e=a[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const i={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};n.push(i),o[t]={rect:i,metrics:e.metrics}}}const{w:a,h:o}=t.potpack(n),r=new t.AlphaImage({width:a||1,height:o||1});for(const n in e){const a=e[n];for(const e in a){const o=a[+e];if(!o||0===o.bitmap.width||0===o.bitmap.height)continue;const s=i[n][e].rect;t.AlphaImage.copy(o.bitmap,r,{x:0,y:0},{x:s.x+1,y:s.y+1},o.bitmap)}}this.image=r,this.positions=i}}t.register("GlyphAtlas",a);class o{constructor(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId}parse(e,i,n,o,s){this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;const l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];const u={},d={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n},h=i.familiesBySource[this.source];for(const i in h){const a=e.layers[i];if(!a)continue;1===a.version&&t.warnOnce(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const o=l.encode(i),s=[];for(let t=0;t<a.length;t++){const e=a.feature(t),n=c.getId(e,i);s.push({feature:e,id:n,index:t,sourceLayerIndex:o})}for(const e of h[i]){const i=e[0];i.source!==this.source&&t.warnOnce(`layer.source = ${i.source} does not equal this.source = ${this.source}`),i.minzoom&&this.zoom<Math.floor(i.minzoom)||i.maxzoom&&this.zoom>=i.maxzoom||"none"!==i.visibility&&(r(e,this.zoom,n),(u[i.id]=i.createBucket({index:c.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:o,sourceID:this.source})).populate(s,d,this.tileID.canonical),c.bucketLayerIDs.push(e.map((t=>t.id))))}}let p,m,b,y;const f=t.mapObject(d.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(f).length?o.send("getGlyphs",{uid:this.uid,stacks:f},((t,e)=>{p||(p=t,m=e,v.call(this))})):m={};const g=Object.keys(d.iconDependencies);g.length?o.send("getImages",{icons:g,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{p||(p=t,b=e,v.call(this))})):b={};const I=Object.keys(d.patternDependencies);function v(){if(p)return s(p);if(m&&b&&y){const e=new a(m),i=new t.ImageAtlas(b,y);for(const a in u){const o=u[a];o instanceof t.SymbolBucket?(r(o.layers,this.zoom,n),t.performSymbolLayout({bucket:o,glyphMap:m,glyphPositions:e.positions,imageMap:b,imagePositions:i.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):o.hasPattern&&(o instanceof t.LineBucket||o instanceof t.FillBucket||o instanceof t.FillExtrusionBucket)&&(r(o.layers,this.zoom,n),o.addFeatures(d,this.tileID.canonical,i.patternPositions))}this.status="done",s(null,{buckets:Object.values(u).filter((t=>!t.isEmpty())),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:i,glyphMap:this.returnDependencies?m:null,iconMap:this.returnDependencies?b:null,glyphPositions:this.returnDependencies?e.positions:null})}}I.length?o.send("getImages",{icons:I,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{p||(p=t,y=e,v.call(this))})):y={},v.call(this)}}function r(e,i,n){const a=new t.EvaluationParameters(i);for(const t of e)t.recalculate(a,n)}function s(e,i){const n=t.getArrayBuffer(e.request,((e,n,a,o)=>{e?i(e):n&&i(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(n)),rawData:n,cacheControl:a,expires:o})}));return()=>{n.cancel(),i()}}class l{constructor(t,e,i,n){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=n||s,this.loading={},this.loaded={}}loadTile(e,i){const n=e.uid;this.loading||(this.loading={});const a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),r=this.loading[n]=new o(e);r.abort=this.loadVectorData(e,((e,o)=>{if(delete this.loading[n],e||!o)return r.status="done",this.loaded[n]=r,i(e);const s=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);const c={};if(a){const t=a.finish();t&&(c.resourceTiming=JSON.parse(JSON.stringify(t)))}r.vectorTile=o.vectorTile,r.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return i(e);i(null,t.extend({rawTileData:s.slice(0)},n,l,c))})),this.loaded=this.loaded||{},this.loaded[n]=r}))}reloadTile(t,e){const i=this.loaded,n=t.uid,a=this;if(i&&i[n]){const o=i[n];o.showCollisionBoxes=t.showCollisionBoxes;const r=(t,i)=>{const n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,this.availableImages,a.actor,n)),e(t,i)};"parsing"===o.status?o.reloadCallback=r:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,r):r())}}abortTile(t,e){const i=this.loading,n=t.uid;i&&i[n]&&i[n].abort&&(i[n].abort(),delete i[n]),e()}removeTile(t,e){const i=this.loaded,n=t.uid;i&&i[n]&&delete i[n],e()}}class c{constructor(){this.loaded={}}loadTile(e,i){const{uid:n,encoding:a,rawImageData:o}=e,r=t.isImageBitmap(o)?this.getImageData(o):o,s=new t.DEMData(n,r,a);this.loaded=this.loaded||{},this.loaded[n]=s,i(null,s)}getImageData(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const i=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)}removeTile(t){const e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]}}var u=function t(e,i){var n,a=e&&e.type;if("FeatureCollection"===a)for(n=0;n<e.features.length;n++)t(e.features[n],i);else if("GeometryCollection"===a)for(n=0;n<e.geometries.length;n++)t(e.geometries[n],i);else if("Feature"===a)t(e.geometry,i);else if("Polygon"===a)d(e.coordinates,i);else if("MultiPolygon"===a)for(n=0;n<e.coordinates.length;n++)d(e.coordinates[n],i);return e};function d(t,e){if(0!==t.length){h(t[0],e);for(var i=1;i<t.length;i++)h(t[i],!e)}}function h(t,e){for(var i=0,n=0,a=0,o=t.length,r=o-1;a<o;r=a++){var s=(t[a][0]-t[r][0])*(t[r][1]+t[a][1]),l=i+s;n+=Math.abs(i)>=Math.abs(s)?i-l+s:s-l+i,i=l}i+n>=0!=!!e&&t.reverse()}const p=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class m{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const i of this._feature.geometry)e.push([new t.pointGeometry(i[0],i[1])]);return e}{const e=[];for(const i of this._feature.geometry){const n=[];for(const e of i)n.push(new t.pointGeometry(e[0],e[1]));e.push(n)}return e}}toGeoJSON(t,e,i){return p.call(this,t,e,i)}}class b{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new m(this._features[t])}}var y={exports:{}},f=t.pointGeometry,g=t.vectorTile.VectorTileFeature,I=v;function v(t,e){this.options=e||{},this.features=t,this.length=t.length}function x(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}v.prototype.feature=function(t){return new x(this.features[t],this.options.extent)},x.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var i=t[e],n=[],a=0;a<i.length;a++)n.push(new f(i[a][0],i[a][1]));this.geometry.push(n)}return this.geometry},x.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,n=1/0,a=-1/0,o=0;o<t.length;o++)for(var r=t[o],s=0;s<r.length;s++){var l=r[s];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),a=Math.max(a,l.y)}return[e,n,i,a]},x.prototype.toGeoJSON=g.prototype.toGeoJSON;var Z=t.pbf,G=I;function w(t){var e=new Z;return function(t,e){for(var i in t.layers)e.writeMessage(3,W,t.layers[i])}(t,e),e.finish()}function W(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,X,n);var a=n.keys;for(i=0;i<a.length;i++)e.writeStringField(3,a[i]);var o=n.values;for(i=0;i<o.length;i++)e.writeMessage(4,L,o[i])}function X(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,_,t),e.writeVarintField(3,i.type),e.writeMessage(4,B,i)}function _(t,e){var i=t.feature,n=t.keys,a=t.values,o=t.keycache,r=t.valuecache;for(var s in i.properties){var l=i.properties[s],c=o[s];if(null!==l){void 0===c&&(n.push(s),o[s]=c=n.length-1),e.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,h=r[d];void 0===h&&(a.push(l),r[d]=h=a.length-1),e.writeVarint(h)}}}function V(t,e){return(e<<3)+(7&t)}function S(t){return t<<1^t>>31}function B(t,e){for(var i=t.loadGeometry(),n=t.type,a=0,o=0,r=i.length,s=0;s<r;s++){var l=i[s],c=1;1===n&&(c=l.length),e.writeVarint(V(1,c));for(var u=3===n?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==n&&e.writeVarint(V(2,u-1));var h=l[d].x-a,p=l[d].y-o;e.writeVarint(S(h)),e.writeVarint(S(p)),a+=h,o+=p}3===n&&e.writeVarint(V(7,1))}}function L(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function Y(t,e,i,n,a,o){if(a-n<=i)return;const r=n+a>>1;z(t,e,r,n,a,o%2),Y(t,e,i,n,r-1,o+1),Y(t,e,i,r+1,a,o+1)}function z(t,e,i,n,a,o){for(;a>n;){if(a-n>600){const r=a-n+1,s=i-n+1,l=Math.log(r),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(r-c)/r)*(s-r/2<0?-1:1);z(t,e,i,Math.max(n,Math.floor(i-s*c/r+u)),Math.min(a,Math.floor(i+(r-s)*c/r+u)),o)}const r=e[2*i+o];let s=n,l=a;for(R(t,e,n,i),e[2*a+o]>r&&R(t,e,n,a);s<l;){for(R(t,e,s,l),s++,l--;e[2*s+o]<r;)s++;for(;e[2*l+o]>r;)l--}e[2*n+o]===r?R(t,e,n,l):(l++,R(t,e,l,a)),l<=i&&(n=l+1),i<=l&&(a=l-1)}}function R(t,e,i,n){C(t,i,n),C(e,2*i,2*n),C(e,2*i+1,2*n+1)}function C(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function M(t,e,i,n){const a=t-i,o=e-n;return a*a+o*o}y.exports=w,y.exports.fromVectorTileJs=w,y.exports.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var n in t)i[n]=new G(t[n].features,e),i[n].name=n,i[n].version=e.version,i[n].extent=e.extent;return w({layers:i})},y.exports.GeoJSONWrapper=G;const J=t=>t[0],H=t=>t[1];class k{constructor(t,e=J,i=H,n=64,a=Float64Array){this.nodeSize=n,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,r=this.ids=new o(t.length),s=this.coords=new a(2*t.length);for(let n=0;n<t.length;n++)r[n]=n,s[2*n]=e(t[n]),s[2*n+1]=i(t[n]);Y(r,s,n,0,r.length-1,0)}range(t,e,i,n){return function(t,e,i,n,a,o,r){const s=[0,t.length-1,0],l=[];let c,u;for(;s.length;){const d=s.pop(),h=s.pop(),p=s.pop();if(h-p<=r){for(let r=p;r<=h;r++)c=e[2*r],u=e[2*r+1],c>=i&&c<=a&&u>=n&&u<=o&&l.push(t[r]);continue}const m=Math.floor((p+h)/2);c=e[2*m],u=e[2*m+1],c>=i&&c<=a&&u>=n&&u<=o&&l.push(t[m]);const b=(d+1)%2;(0===d?i<=c:n<=u)&&(s.push(p),s.push(m-1),s.push(b)),(0===d?a>=c:o>=u)&&(s.push(m+1),s.push(h),s.push(b))}return l}(this.ids,this.coords,t,e,i,n,this.nodeSize)}within(t,e,i){return function(t,e,i,n,a,o){const r=[0,t.length-1,0],s=[],l=a*a;for(;r.length;){const c=r.pop(),u=r.pop(),d=r.pop();if(u-d<=o){for(let a=d;a<=u;a++)M(e[2*a],e[2*a+1],i,n)<=l&&s.push(t[a]);continue}const h=Math.floor((d+u)/2),p=e[2*h],m=e[2*h+1];M(p,m,i,n)<=l&&s.push(t[h]);const b=(c+1)%2;(0===c?i-a<=p:n-a<=m)&&(r.push(d),r.push(h-1),r.push(b)),(0===c?i+a>=p:n+a>=m)&&(r.push(h+1),r.push(u),r.push(b))}return s}(this.ids,this.coords,t,e,i,this.nodeSize)}}const j={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},F=Math.fround||(N=new Float32Array(1),t=>(N[0]=+t,N[0]));var N;class T{constructor(t){this.options=Q(Object.create(j),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:i,maxZoom:n,nodeSize:a}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let r=[];for(let e=0;e<t.length;e++)t[e].geometry&&r.push(E(t[e],e));this.trees[n+1]=new k(r,q,$,a,Float32Array),e&&console.timeEnd(o);for(let t=n;t>=i;t--){const i=+Date.now();r=this._cluster(r,t),this.trees[t]=new k(r,q,$,a,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,r.length,+Date.now()-i)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let i=((t[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,t[1]));let a=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,a=180;else if(i>a){const t=this.getClusters([i,n,180,o],e),r=this.getClusters([-180,n,a,o],e);return t.concat(r)}const r=this.trees[this._limitZoom(e)],s=r.range(P(i),K(o),P(a),K(n)),l=[];for(const t of s){const e=r.points[t];l.push(e.numPoints?A(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),i=this._getOriginZoom(t),n="No cluster with the specified id.",a=this.trees[i];if(!a)throw new Error(n);const o=a.points[e];if(!o)throw new Error(n);const r=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=a.within(o.x,o.y,r),l=[];for(const e of s){const i=a.points[e];i.parentId===t&&l.push(i.numPoints?A(i):this.points[i.index])}if(0===l.length)throw new Error(n);return l}getLeaves(t,e,i){const n=[];return this._appendLeaves(n,t,e=e||10,i=i||0,0),n}getTile(t,e,i){const n=this.trees[this._limitZoom(t)],a=Math.pow(2,t),{extent:o,radius:r}=this.options,s=r/o,l=(i-s)/a,c=(i+1+s)/a,u={features:[]};return this._addTileFeatures(n.range((e-s)/a,l,(e+1+s)/a,c),n.points,e,i,a,u),0===e&&this._addTileFeatures(n.range(1-s/a,l,1,c),n.points,a,i,a,u),e===a-1&&this._addTileFeatures(n.range(0,l,s/a,c),n.points,-1,i,a,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e}_appendLeaves(t,e,i,n,a){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?a+o.point_count<=n?a+=o.point_count:a=this._appendLeaves(t,o.cluster_id,i,n,a):a<n?a++:t.push(e),t.length===i)break}return a}_addTileFeatures(t,e,i,n,a,o){for(const r of t){const t=e[r],s=t.numPoints;let l,c,u;if(s)l=O(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=P(e.geometry.coordinates[0]),u=K(e.geometry.coordinates[1])}const d={type:1,geometry:[[Math.round(this.options.extent*(c*a-i)),Math.round(this.options.extent*(u*a-n))]],tags:l};let h;s?h=t.id:this.options.generateId?h=t.index:this.points[t.index].id&&(h=this.points[t.index].id),void 0!==h&&(d.id=h),o.features.push(d)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const i=[],{radius:n,extent:a,reduce:o,minPoints:r}=this.options,s=n/(a*Math.pow(2,e));for(let n=0;n<t.length;n++){const a=t[n];if(a.zoom<=e)continue;a.zoom=e;const l=this.trees[e+1],c=l.within(a.x,a.y,s),u=a.numPoints||1;let d=u;for(const t of c){const i=l.points[t];i.zoom>e&&(d+=i.numPoints||1)}if(d>u&&d>=r){let t=a.x*u,r=a.y*u,s=o&&u>1?this._map(a,!0):null;const h=(n<<5)+(e+1)+this.points.length;for(const i of c){const n=l.points[i];if(n.zoom<=e)continue;n.zoom=e;const c=n.numPoints||1;t+=n.x*c,r+=n.y*c,n.parentId=h,o&&(s||(s=this._map(a,!0)),o(s,this._map(n)))}a.parentId=h,i.push(U(t/d,r/d,h,d,s))}else if(i.push(a),d>1)for(const t of c){const n=l.points[t];n.zoom<=e||(n.zoom=e,i.push(n))}}return i}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?Q({},t.properties):t.properties;const i=this.points[t.index].properties,n=this.options.map(i);return e&&n===i?Q({},n):n}}function U(t,e,i,n,a){return{x:F(t),y:F(e),zoom:1/0,id:i,parentId:-1,numPoints:n,properties:a}}function E(t,e){const[i,n]=t.geometry.coordinates;return{x:F(P(i)),y:F(K(n)),zoom:1/0,index:e,parentId:-1}}function A(t){return{type:"Feature",id:t.id,properties:O(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),D(t.y)]}};var e}function O(t){const e=t.numPoints,i=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return Q(Q({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function P(t){return t/360+.5}function K(t){const e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function D(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function Q(t,e){for(const i in e)t[i]=e[i];return t}function q(t){return t.x}function $(t){return t.y}function tt(t,e,i,n){for(var a,o=n,r=i-e>>1,s=i-e,l=t[e],c=t[e+1],u=t[i],d=t[i+1],h=e+3;h<i;h+=3){var p=et(t[h],t[h+1],l,c,u,d);if(p>o)a=h,o=p;else if(p===o){var m=Math.abs(h-r);m<s&&(a=h,s=m)}}o>n&&(a-e>3&&tt(t,e,a,n),t[a+2]=o,i-a>3&&tt(t,a,i,n))}function et(t,e,i,n,a,o){var r=a-i,s=o-n;if(0!==r||0!==s){var l=((t-i)*r+(e-n)*s)/(r*r+s*s);l>1?(i=a,n=o):l>0&&(i+=r*l,n+=s*l)}return(r=t-i)*r+(s=e-n)*s}function it(t,e,i,n){var a={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)nt(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)nt(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++)nt(t,e[n][a])}(a),a}function nt(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function at(t,e,i,n){if(e.geometry){var a=e.geometry.coordinates,o=e.geometry.type,r=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===o)ot(a,s);else if("MultiPoint"===o)for(var c=0;c<a.length;c++)ot(a[c],s);else if("LineString"===o)rt(a,s,r,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(c=0;c<a.length;c++)rt(a[c],s=[],r,!1),t.push(it(l,"LineString",s,e.properties));return}st(a,s,r,!1)}else if("Polygon"===o)st(a,s,r,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)at(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},i,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<a.length;c++){var u=[];st(a[c],u,r,!0),s.push(u)}}t.push(it(l,o,s,e.properties))}}function ot(t,e){e.push(lt(t[0])),e.push(ct(t[1])),e.push(0)}function rt(t,e,i,n){for(var a,o,r=0,s=0;s<t.length;s++){var l=lt(t[s][0]),c=ct(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(r+=n?(a*c-l*o)/2:Math.sqrt(Math.pow(l-a,2)+Math.pow(c-o,2))),a=l,o=c}var u=e.length-3;e[2]=1,tt(e,0,u,i),e[u+2]=1,e.size=Math.abs(r),e.start=0,e.end=e.size}function st(t,e,i,n){for(var a=0;a<t.length;a++){var o=[];rt(t[a],o,i,n),e.push(o)}}function lt(t){return t/360+.5}function ct(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function ut(t,e,i,n,a,o,r,s){if(n/=e,o>=(i/=e)&&r<n)return t;if(r<i||o>=n)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],d=u.geometry,h=u.type,p=0===a?u.minX:u.minY,m=0===a?u.maxX:u.maxY;if(p>=i&&m<n)l.push(u);else if(!(m<i||p>=n)){var b=[];if("Point"===h||"MultiPoint"===h)dt(d,b,i,n,a);else if("LineString"===h)ht(d,b,i,n,a,!1,s.lineMetrics);else if("MultiLineString"===h)mt(d,b,i,n,a,!1);else if("Polygon"===h)mt(d,b,i,n,a,!0);else if("MultiPolygon"===h)for(var y=0;y<d.length;y++){var f=[];mt(d[y],f,i,n,a,!0),f.length&&b.push(f)}if(b.length){if(s.lineMetrics&&"LineString"===h){for(y=0;y<b.length;y++)l.push(it(u.id,h,b[y],u.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===b.length?(h="LineString",b=b[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===b.length?"Point":"MultiPoint"),l.push(it(u.id,h,b,u.tags))}}}return l.length?l:null}function dt(t,e,i,n,a){for(var o=0;o<t.length;o+=3){var r=t[o+a];r>=i&&r<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function ht(t,e,i,n,a,o,r){for(var s,l,c=pt(t),u=0===a?yt:ft,d=t.start,h=0;h<t.length-3;h+=3){var p=t[h],m=t[h+1],b=t[h+2],y=t[h+3],f=t[h+4],g=0===a?p:m,I=0===a?y:f,v=!1;r&&(s=Math.sqrt(Math.pow(p-y,2)+Math.pow(m-f,2))),g<i?I>i&&(l=u(c,p,m,y,f,i),r&&(c.start=d+s*l)):g>n?I<n&&(l=u(c,p,m,y,f,n),r&&(c.start=d+s*l)):bt(c,p,m,b),I<i&&g>=i&&(l=u(c,p,m,y,f,i),v=!0),I>n&&g<=n&&(l=u(c,p,m,y,f,n),v=!0),!o&&v&&(r&&(c.end=d+s*l),e.push(c),c=pt(t)),r&&(d+=s)}var x=t.length-3;p=t[x],m=t[x+1],b=t[x+2],(g=0===a?p:m)>=i&&g<=n&&bt(c,p,m,b),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&bt(c,c[0],c[1],c[2]),c.length&&e.push(c)}function pt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function mt(t,e,i,n,a,o){for(var r=0;r<t.length;r++)ht(t[r],e,i,n,a,o,!1)}function bt(t,e,i,n){t.push(e),t.push(i),t.push(n)}function yt(t,e,i,n,a,o){var r=(o-e)/(n-e);return t.push(o),t.push(i+(a-i)*r),t.push(1),r}function ft(t,e,i,n,a,o){var r=(o-i)/(a-i);return t.push(e+(n-e)*r),t.push(o),t.push(1),r}function gt(t,e){for(var i=[],n=0;n<t.length;n++){var a,o=t[n],r=o.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)a=It(o.geometry,e);else if("MultiLineString"===r||"Polygon"===r){a=[];for(var s=0;s<o.geometry.length;s++)a.push(It(o.geometry[s],e))}else if("MultiPolygon"===r)for(a=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(It(o.geometry[s][c],e));a.push(l)}i.push(it(o.id,r,a,o.tags))}return i}function It(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function vt(t,e){if(t.transformed)return t;var i,n,a,o=1<<t.z,r=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(xt(c[n],c[n+1],e,o,r,s));else for(n=0;n<c.length;n++){var d=[];for(a=0;a<c[n].length;a+=2)d.push(xt(c[n][a],c[n][a+1],e,o,r,s));l.geometry.push(d)}}return t.transformed=!0,t}function xt(t,e,i,n,a,o){return[Math.round(i*(t*n-a)),Math.round(i*(e*n-o))]}function Zt(t,e,i,n,a){for(var o=e===a.maxZoom?0:a.tolerance/((1<<e)*a.extent),r={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){r.numFeatures++,Gt(r,t[s],o,a);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,d=t[s].maxY;l<r.minX&&(r.minX=l),c<r.minY&&(r.minY=c),u>r.maxX&&(r.maxX=u),d>r.maxY&&(r.maxY=d)}return r}function Gt(t,e,i,n){var a=e.geometry,o=e.type,r=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<a.length;s+=3)r.push(a[s]),r.push(a[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)wt(r,a,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<a.length;s++)wt(r,a[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<a.length;l++){var c=a[l];for(s=0;s<c.length;s++)wt(r,c[s],t,i,!0,0===s)}if(r.length){var u=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var d in u={},e.tags)u[d]=e.tags[d];u.mapbox_clip_start=a.start/a.size,u.mapbox_clip_end=a.end/a.size}var h={geometry:r,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(h.id=e.id),t.features.push(h)}}function wt(t,e,i,n,a,o){var r=n*n;if(n>0&&e.size<(a?r:n))i.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>r)&&(i.numSimplified++,s.push(e[l]),s.push(e[l+1])),i.numPoints++;a&&function(t,e){for(var i=0,n=0,a=t.length,o=a-2;n<a;o=n,n+=2)i+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(i>0===e)for(n=0,a=t.length;n<a/2;n+=2){var r=t[n],s=t[n+1];t[n]=t[a-2-n],t[n+1]=t[a-1-n],t[a-2-n]=r,t[a-1-n]=s}}(s,o),t.push(s)}}function Wt(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)at(i,t.features[n],e,n);else at(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=function(t,e){var i=e.buffer/e.extent,n=t,a=ut(t,1,-1-i,i,0,-1,2,e),o=ut(t,1,1-i,2+i,0,-1,2,e);return(a||o)&&(n=ut(t,1,-i,1+i,0,-1,2,e)||[],a&&(n=gt(a,1).concat(n)),o&&(n=n.concat(gt(o,-1)))),n}(n,e),n.length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Xt(t,e,i){return 32*((1<<t)*i+e)+t}function _t(t,e){const i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const n=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!n)return e(null,null);const a=new b(n.features);let o=y.exports(a);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:a,rawData:o.buffer})}Wt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Wt.prototype.splitTile=function(t,e,i,n,a,o,r){for(var s=[t,e,i,n],l=this.options,c=l.debug;s.length;){n=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,d=Xt(e,i,n),h=this.tiles[d];if(!h&&(c>1&&console.time("creation"),h=this.tiles[d]=Zt(t,e,i,n,l),this.tileCoords.push({z:e,x:i,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=t,a){if(e===l.maxZoom||e===a)continue;var m=1<<a-e;if(i!==Math.floor(o/m)||n!==Math.floor(r/m))continue}else if(e===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==t.length){c>1&&console.time("clipping");var b,y,f,g,I,v,x=.5*l.buffer/l.extent,Z=.5-x,G=.5+x,w=1+x;b=y=f=g=null,I=ut(t,u,i-x,i+G,0,h.minX,h.maxX,l),v=ut(t,u,i+Z,i+w,0,h.minX,h.maxX,l),t=null,I&&(b=ut(I,u,n-x,n+G,1,h.minY,h.maxY,l),y=ut(I,u,n+Z,n+w,1,h.minY,h.maxY,l),I=null),v&&(f=ut(v,u,n-x,n+G,1,h.minY,h.maxY,l),g=ut(v,u,n+Z,n+w,1,h.minY,h.maxY,l),v=null),c>1&&console.timeEnd("clipping"),s.push(b||[],e+1,2*i,2*n),s.push(y||[],e+1,2*i,2*n+1),s.push(f||[],e+1,2*i+1,2*n),s.push(g||[],e+1,2*i+1,2*n+1)}}},Wt.prototype.getTile=function(t,e,i){var n=this.options,a=n.extent,o=n.debug;if(t<0||t>24)return null;var r=1<<t,s=Xt(t,e=(e%r+r)%r,i);if(this.tiles[s])return vt(this.tiles[s],a);o>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,c=t,u=e,d=i;!l&&c>0;)c--,u=Math.floor(u/2),d=Math.floor(d/2),l=this.tiles[Xt(c,u,d)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,d),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,d,t,e,i),o>1&&console.timeEnd("drilling down"),this.tiles[s]?vt(this.tiles[s],a):null):null};class Vt extends l{constructor(t,e,i,n){super(t,e,i,_t),n&&(this.loadGeoJSON=n)}loadData(e,i){var n;null===(n=this._pendingRequest)||void 0===n||n.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request);this._pendingCallback=i,this._pendingRequest=this.loadGeoJSON(e,((n,o)=>{if(delete this._pendingCallback,delete this._pendingRequest,n||!o)return i(n);if("object"!=typeof o)return i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{u(o,!0);try{if(e.filter){const i=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===i.result)throw new Error(i.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const n=o.features.filter((t=>i.value.evaluate({zoom:0},t)));o={type:"FeatureCollection",features:n}}this._geoJSONIndex=e.cluster?new T(function({superclusterOptions:e,clusterProperties:i}){if(!i||!e)return e;const n={},a={},o={accumulated:null,zoom:0},r={properties:null},s=Object.keys(i);for(const e of s){const[o,r]=i[e],s=t.createExpression(r),l=t.createExpression("string"==typeof o?[o,["accumulated"],["get",e]]:o);n[e]=s.value,a[e]=l.value}return e.map=t=>{r.properties=t;const e={};for(const t of s)e[t]=n[t].evaluate(o,r);return e},e.reduce=(t,e)=>{r.properties=e;for(const e of s)o.accumulated=t[e],t[e]=a[e].evaluate(o,r)},e}(e)).load(o.features):function(t,e){return new Wt(t,e)}(o,e.geojsonVtOptions)}catch(n){return i(n)}this.loaded={};const r={};if(a){const t=a.finish();t&&(r.resourceTiming={},r.resourceTiming[e.source]=JSON.parse(JSON.stringify(t)))}i(null,r)}}))}reloadTile(t,e){const i=this.loaded;return i&&i[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,i){if(e.request)return t.getJSON(e.request,i);if("string"==typeof e.data)try{i(null,JSON.parse(e.data))}catch(t){i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}else i(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class St{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Vt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}setReferrer(t,e){this.referrer=e}setImages(t,e,i){this.availableImages[t]=e;for(const i in this.workerSources[t]){const n=this.workerSources[t][i];for(const t in n)n[t].availableImages=e}i()}setLayers(t,e,i){this.getLayerIndex(t).replace(e),i()}updateLayers(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()}loadTile(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)}loadDEMTile(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)}reloadTile(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)}abortTile(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)}removeTile(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)}removeDEMTile(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)}removeSource(t,e,i){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,i):i()}loadWorkerSource(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}}syncRTLPluginState(e,i,n){try{t.plugin.setState(i);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const i=t.plugin.isParsed();n(i?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),i)}}catch(t){n(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e}getWorkerSource(t,e,i){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][i]){const n={send:(e,i,n)=>{this.actor.send(e,i,n,t)}};this.workerSources[t][e][i]=new this.workerSourceTypes[e](n,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][i]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,i){t.enforceCacheSizeLimit(i)}}return t.isWorker()&&(self.worker=new St(self)),St})),n(["./shared"],(function(t){var e=i;function i(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===n[e=t&&t.failIfMajorPerformanceCaveat]&&(n[e]=function(t){var e,n=function(t){var e=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}(t);if(!n)return!1;try{e=n.createShader(n.VERTEX_SHADER)}catch(t){return!1}return!(!e||n.isContextLost())&&(n.shaderSource(e,"void main() {}"),n.compileShader(e),!0===n.getShaderParameter(e,n.COMPILE_STATUS))}(e)),n[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var n={};function a(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!a(t[i],e[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(!a(t[i],e[i]))return!1;return!0}return t===e}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class o{static testProp(t){if(!o.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in o.docStyle)return t[e];return t[0]}static create(t,e,i){const n=window.document.createElement(t);return void 0!==e&&(n.className=e),i&&i.appendChild(n),n}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){o.docStyle&&o.selectProp&&(o.userSelect=o.docStyle[o.selectProp],o.docStyle[o.selectProp]="none")}static enableDrag(){o.docStyle&&o.selectProp&&(o.docStyle[o.selectProp]=o.userSelect)}static setTransform(t,e){t.style[o.transformProp]=e}static addEventListener(t,e,i,n={}){t.addEventListener(e,i,"passive"in n?n:n.capture)}static removeEventListener(t,e,i,n={}){t.removeEventListener(e,i,"passive"in n?n:n.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",o.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",o.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",o.suppressClickInternal,!0)}),0)}static mousePos(e,i){const n=e.getBoundingClientRect();return new t.pointGeometry(i.clientX-n.left-e.clientLeft,i.clientY-n.top-e.clientTop)}static touchPos(e,i){const n=e.getBoundingClientRect(),a=[];for(let o=0;o<i.length;o++)a.push(new t.pointGeometry(i[o].clientX-n.left-e.clientLeft,i[o].clientY-n.top-e.clientTop));return a}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}o.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,o.selectProp=o.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o.transformProp=o.testProp(["transform","WebkitTransform"]);class r{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeSpriteURL(t,e,i){const n=function(t){const e=t.match(s);if(!e)throw new Error(`Unable to parse URL "${t}"`);return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}(t);return n.path+=`${e}${i}`,function(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}(n)}setTransformRequest(t){this._transformRequestFn=t}}const s=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class l{constructor(t,e,i,n){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,n)}update(e,i,n){const{width:a,height:o}=e,r=!(this.size&&this.size[0]===a&&this.size[1]===o||n),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(i&&i.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!i||!1!==i.premultiply)),r)this.size=[a,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,a,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:i,y:r}=n||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texSubImage2D(l.TEXTURE_2D,0,i,r,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,i,r,a,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(t,e,i){const{context:n}=this,{gl:a}=n;a.bindTexture(a.TEXTURE_2D,this.texture),i!==a.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=a.LINEAR),t!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function c(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class u extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,e)&&(this.images[t]=e)}_validate(e,i){let n=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),n=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),n=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),n=!1),n}_validateStretch(t,e){if(!t)return!0;let i=0;for(const n of t){if(n[0]<i||n[1]<n[0]||e<n[1])return!1;i=n[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){const i=this.images[t];if(i.data.width!==e.data.width||i.data.height!==e.data.height)throw new Error(`size mismatch between old image (${i.data.width}x${i.data.height}) and new image (${e.data.width}x${e.data.height}).`);e.version=i.version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let i=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,i){const n={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?n[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,n)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const i=this.patterns[e],n=this.getImage(e);if(!n)return null;if(i&&i.position.version===n.version)return i.position;if(i)i.position.version=n.version;else{const i={w:n.data.width+2,h:n.data.height+2,x:0,y:0},a=new t.ImagePosition(i,n);this.patterns[e]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[e].position}bind(t){const e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:i,h:n}=t.potpack(e),a=this.atlasImage;a.resize({width:i||1,height:n||1});for(const e in this.patterns){const{bin:i}=this.patterns[e],n=i.x+1,o=i.y+1,r=this.images[e].data,s=r.width,l=r.height;t.RGBAImage.copy(r,a,{x:0,y:0},{x:n,y:o},{width:s,height:l}),t.RGBAImage.copy(r,a,{x:0,y:l-1},{x:n,y:o-1},{width:s,height:1}),t.RGBAImage.copy(r,a,{x:0,y:0},{x:n,y:o+l},{width:s,height:1}),t.RGBAImage.copy(r,a,{x:s-1,y:0},{x:n-1,y:o},{width:1,height:l}),t.RGBAImage.copy(r,a,{x:0,y:0},{x:n+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const i of e){if(this.callbackDispatchedThisFrame[i])continue;this.callbackDispatchedThisFrame[i]=!0;const e=this.images[i];e||t.warnOnce(`Image with ID: "${i}" was not found`),c(e)&&this.updateImage(i,e)}}}const d=1e20;function h(t,e,i,n,a,o,r,s,l){for(let c=e;c<e+n;c++)p(t,i*o+c,o,a,r,s,l);for(let c=i;c<i+a;c++)p(t,c*o+e,1,n,r,s,l)}function p(t,e,i,n,a,o,r){o[0]=0,r[0]=-d,r[1]=d,a[0]=t[e];for(let s=1,l=0,c=0;s<n;s++){a[s]=t[e+s*i];const n=s*s;do{const t=o[l];c=(a[s]-a[t]+n-t*t)/(s-t)/2}while(c<=r[l]&&--l>-1);l++,o[l]=s,r[l]=c,r[l+1]=d}for(let s=0,l=0;s<n;s++){for(;r[l+1]<s;)l++;const n=o[l],c=s-n;t[e+s*i]=a[n]+c*c}}class m{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(e,i){const n=[];for(const t in e)for(const i of e[t])n.push({stack:t,id:i});t.asyncAll(n,(({stack:t,id:e},i)=>{let n=this.entries[t];n||(n=this.entries[t]={glyphs:{},requests:{},ranges:{}});let a=n.glyphs[e];if(void 0!==a)return void i(null,{stack:t,id:e,glyph:a});if(a=this._tinySDF(n,t,e),a)return n.glyphs[e]=a,void i(null,{stack:t,id:e,glyph:a});const o=Math.floor(e/256);if(256*o>65535)return void i(new Error("glyphs > 65535 not supported"));if(n.ranges[o])return void i(null,{stack:t,id:e,glyph:a});let r=n.requests[o];r||(r=n.requests[o]=[],m.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(n.glyphs[+t]=e[+t]);n.ranges[o]=!0}for(const i of r)i(t,e);delete n.requests[o]}))),r.push(((n,a)=>{n?i(n):a&&i(null,{stack:t,id:e,glyph:a[e]||null})}))}),((t,e)=>{if(t)i(t);else if(e){const t={};for(const{stack:i,id:n,glyph:a}of e)(t[i]||(t[i]={}))[n]=a&&{id:a.id,bitmap:a.bitmap.clone(),metrics:a.metrics};i(null,t)}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.unicodeBlockLookup["CJK Unified Ideographs"](e)||t.unicodeBlockLookup["Hangul Syllables"](e)||t.unicodeBlockLookup.Hiragana(e)||t.unicodeBlockLookup.Katakana(e))}_tinySDF(e,i,n){const a=this.localIdeographFontFamily;if(!a)return;if(!this._doesCharSupportLocalGlyph(n))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(i)?t="900":/medium/i.test(i)?t="500":/light/i.test(i)&&(t="200"),o=e.tinySDF=new m.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:a,fontWeight:t})}const r=o.draw(String.fromCharCode(n));return{id:n,bitmap:new t.AlphaImage({width:r.width||30,height:r.height||30},r.data),metrics:{width:r.glyphWidth||24,height:r.glyphHeight||24,left:r.glyphLeft||0,top:r.glyphTop-27||-8,advance:r.glyphAdvance||24}}}}m.loadGlyphRange=function(e,i,n,a,o){const r=256*i,s=r+255,l=a.transformRequest(n.replace("{fontstack}",e).replace("{range}",`${r}-${s}`),t.ResourceType.Glyphs);t.getArrayBuffer(l,((e,i)=>{if(e)o(e);else if(i){const e={};for(const n of t.parseGlyphPbf(i))e[n.id]=n;o(null,e)}}))},m.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:i=8,cutoff:n=.25,fontFamily:a="sans-serif",fontWeight:o="normal",fontStyle:r="normal"}={}){this.buffer=e,this.cutoff=n,this.radius=i;const s=this.size=t+4*e,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${r} ${o} ${t}px ${a}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:i,actualBoundingBoxDescent:n,actualBoundingBoxLeft:a,actualBoundingBoxRight:o}=this.ctx.measureText(t),r=Math.ceil(i),s=Math.min(this.size-this.buffer,Math.ceil(o-a)),l=Math.min(this.size-this.buffer,r+Math.ceil(n)),c=s+2*this.buffer,u=l+2*this.buffer,p=Math.max(c*u,0),m=new Uint8ClampedArray(p),b={data:m,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:r,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return b;const{ctx:y,buffer:f,gridInner:g,gridOuter:I}=this;y.clearRect(f,f,s,l),y.fillText(t,f,f+r);const v=y.getImageData(f,f,s,l);I.fill(d,0,p),g.fill(0,0,p);for(let t=0;t<l;t++)for(let e=0;e<s;e++){const i=v.data[4*(t*s+e)+3]/255;if(0===i)continue;const n=(t+f)*c+e+f;if(1===i)I[n]=0,g[n]=d;else{const t=.5-i;I[n]=t>0?t*t:0,g[n]=t<0?t*t:0}}h(I,0,0,c,u,c,this.f,this.v,this.z),h(g,f,f,s,l,c,this.f,this.v,this.z);for(let t=0;t<p;t++){const e=Math.sqrt(I[t])-Math.sqrt(g[t]);m[t]=Math.round(255-255*(e/this.radius+this.cutoff))}return b}};const b=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))}interpolate(e,i,n){return{x:t.number(e.x,i.x,n),y:t.number(e.y,i.y,n),z:t.number(e.z,i.z,n)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),y="-transition";class f extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(b),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,i={}){if(!this._validate(t.validateLight,e,i))for(const t in e){const i=e[t];t.endsWith(y)?this._transitionable.setTransition(t.slice(0,-y.length),i):this._transitionable.setValue(t,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,i,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class g{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]}getDashRanges(t,e,i){const n=[];let a=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,r=!0;n.push({left:a,right:o,isDash:r,zeroLength:0===t[0]});let s=t[0];for(let e=1;e<t.length;e++){r=!r;const l=t[e];a=s*i,s+=l,o=s*i,n.push({left:a,right:o,isDash:r,zeroLength:0===l})}return n}addRoundDash(t,e,i){const n=e/2;for(let e=-i;e<=i;e++){const a=this.width*(this.nextRow+i+e);let o=0,r=t[o];for(let s=0;s<this.width;s++){s/r.right>1&&(r=t[++o]);const l=Math.abs(s-r.left),c=Math.abs(s-r.right),u=Math.min(l,c);let d;const h=e/i*(n+1);if(r.isDash){const t=n-Math.abs(h);d=Math.sqrt(u*u+t*t)}else d=n-Math.sqrt(u*u+h*h);this.data[a+s]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(t){for(let e=t.length-1;e>=0;--e){const i=t[e],n=t[e+1];i.zeroLength?t.splice(e,1):n&&n.isDash===i.isDash&&(n.left=i.left,t.splice(e,1))}const e=t[0],i=t[t.length-1];e.isDash===i.isDash&&(e.left=i.left-this.width,i.right=e.right+this.width);const n=this.width*this.nextRow;let a=0,o=t[a];for(let e=0;e<this.width;e++){e/o.right>1&&(o=t[++a]);const i=Math.abs(e-o.left),r=Math.abs(e-o.right),s=Math.min(i,r);this.data[n+e]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(e,i){const n=i?7:0,a=2*n+1;if(this.nextRow+a>this.height)return t.warnOnce("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,a=this.getDashRanges(e,this.width,t);i?this.addRoundDash(a,t,n):this.addRegularDash(a)}const r={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:o};return this.nextRow+=a,this.dirty=!0,r}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class I{constructor(e,i){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const n=this.workerPool.acquire(this.id);for(let t=0;t<n.length;t++){const e=new I.Actor(n[t],i,this.id);e.name=`Worker ${t}`,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,i,n){t.asyncAll(this.actors,((t,n)=>{t.send(e,i,n)}),n=n||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function v(e,i,n){const a=function(i,a){if(i)return n(i);if(a){const i=t.pick(t.extend(a,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(i.vectorLayers=a.vector_layers,i.vectorLayerIds=i.vectorLayers.map((t=>t.id))),n(null,i)}};return e.url?t.getJSON(i.transformRequest(e.url,t.ResourceType.Source),a):t.exported.frame((()=>a(null,e)))}I.Actor=t.Actor;class x{constructor(e,i,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=n||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const i=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),a=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),r=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=n&&e.x<o&&e.y>=a&&e.y<r}}class Z extends t.Evented{constructor(e,i,n,a){if(super(),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(i,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=v(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new x(i.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,i){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),a={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(n,a){return delete e.request,e.aborted?i(null):n&&404!==n.status?i(n):(a&&a.resourceTiming&&(e.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&e.setExpiryData(a),e.loadVectorData(a,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}a.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",a,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",a,o.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class G extends t.Evented{constructor(e,i,n,a){super(),this.id=e,this.dispatcher=n,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},i),t.extend(this,t.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=v(this._options,this.map._requestManager,((e,i)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(t.extend(this,i),i.bounds&&(this.tileBounds=new x(i.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,i){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),((n,a,o)=>{if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(a){this.map._refreshExpiredTiles&&e.setExpiryData(o);const n=this.map.painter.context,r=n.gl;e.texture=this.map.painter.getTileTexture(a.width),e.texture?e.texture.update(a,{useMipmap:!0}):(e.texture=new l(n,a,r.RGBA,{useMipmap:!0}),e.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),n.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),i(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let w;class W extends G{constructor(e,i,n,a){super(e,i,n,a),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,i){const n=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function a(t,n){t&&(e.state="errored",i(t)),n&&(e.dem=n,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),function(n,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;const i=t.isImageBitmap(o)&&(null==w&&(w="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),w)?o:t.exported.getImageData(o,1),n={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:i,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",n,a.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)}_getNeighboringTiles(e){const i=e.canonical,n=Math.pow(2,i.z),a=(i.x-1+n)%n,o=0===i.x?e.wrap-1:e.wrap,r=(i.x+1+n)%n,s=i.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,i.z,a,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,r,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,a,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,r,i.y-1).key]={backfilled:!1}),i.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,a,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,r,i.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class X extends t.Evented{constructor(e,i,n,a){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=n.getActor(),this.setEventedParent(a),this._data=i.data,this._options=t.extend({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:t.EXTENT,radius:(i.clusterRadius||50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},n),this}_updateWorkerData(e){const i=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(i.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(n),this._pendingLoads++,this.fire(new t.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,i,((i,n)=>{if(this._pendingLoads--,this._removed||n&&n.abandoned)return void this.fire(new t.Event("dataabort",{dataType:"source",sourceDataType:e}));let a=null;if(n&&n.resourceTiming&&n.resourceTiming[this.id]&&(a=n.resourceTiming[this.id].slice(0)),i)return void this.fire(new t.ErrorEvent(i));const o={dataType:"source",sourceDataType:e};this._collectResourceTiming&&a&&a.length>0&&t.extend(o,{resourceTiming:a}),this.fire(new t.Event("data",o))}))}loaded(){return 0===this._pendingLoads}loadTile(t,e){const i=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const n={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(i,n,((n,a)=>(delete t.request,t.unloadVectorData(),t.aborted?e(null):n?e(n):(t.loadVectorData(a,this.map.painter,"reloadTile"===i),e(null)))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class V extends t.Evented{constructor(t,e,i,n){super(),this.id=t,this.dispatcher=i,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=e}load(e,i){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((n,a)=>{this._loaded=!0,n?this.fire(new t.ErrorEvent(n)):a&&(this.image=a,e&&(this.coordinates=e),i&&i(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const i=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let i=1/0,n=1/0,a=-1/0,o=-1/0;for(const t of e)i=Math.min(i,t.x),n=Math.min(n,t.y),a=Math.max(a,t.x),o=Math.max(o,t.y);const r=Math.max(a-i,o-n),s=Math.max(0,Math.floor(-Math.log(r)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((i+a)/2*l),Math.floor((n+o)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const n=i.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,_.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class S extends V{constructor(t,e,i,n){super(t,e,i,n),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const i of e.urls)this.urls.push(this.map._requestManager.transformRequest(i,t.ResourceType.Source).url);t.getVideo(this.urls,((e,i)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,i=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,_.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new l(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class B extends V{constructor(e,i,n,a){super(e,i,n,a),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,n=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,_.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l(i,this.canvas,n.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const L={vector:Z,raster:G,"raster-dem":W,geojson:X,video:S,image:V,canvas:B};function Y(e,i){const n=t.create();return t.translate(n,n,[1,1,0]),t.scale(n,n,[.5*e.width,.5*e.height,1]),t.multiply(n,n,e.calculatePosMatrix(i.toUnwrapped()))}function z(t,e,i,n,a,o){const r=function(t,e,i){if(t)for(const n of t){const t=e[n];if(t&&t.source===i&&"fill-extrusion"===t.type)return!0}else for(const t in e){const n=e[t];if(n.source===i&&"fill-extrusion"===n.type)return!0}return!1}(a&&a.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(n,s,r);l.sort(R);const c=[];for(const n of l)c.push({wrappedTileID:n.tileID.wrapped().key,queryResults:n.tile.queryRenderedFeatures(e,i,t._state,n.queryGeometry,n.cameraQueryGeometry,n.scale,a,o,s,Y(t.transform,n.tileID))});const u=function(t){const e={},i={};for(const n of t){const t=n.queryResults,a=n.wrappedTileID,o=i[a]=i[a]||{};for(const i in t){const n=t[i],a=o[i]=o[i]||{},r=e[i]=e[i]||[];for(const t of n)a[t.featureIndex]||(a[t.featureIndex]=!0,r.push(t))}}return e}(c);for(const e in u)u[e].forEach((e=>{const i=e.feature,n=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return u}function R(t,e){const i=t.tileID,n=e.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}class C{constructor(e,i){this.tileID=e,this.uid=t.uniqueId(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const i=e+this.timeAdded;i<t.exported.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.textures.forEach((e=>t.saveTileTexture(e))),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(e,i,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){const i={};if(!e)return i;for(const n of t){const t=n.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){n.layers=t,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)i[e.id]=n}}return i}(e.buckets,i.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const i=this.buckets[e];if(i instanceof t.SymbolBucket){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const i=this.buckets[e];if(i instanceof t.SymbolBucket&&i.hasRTLText){this.hasRTLText=!0,t.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const t in this.buckets){const e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(t).queryRadius(e))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const i=this.buckets[e];i.uploadPending()&&i.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,i,n,a,o,r,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:a,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:r,queryPadding:this.queryPadding*l},t,e,i):{}}querySourceFeatures(e,i){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const a=n.loadVTLayers(),o=i?i.sourceLayer:"",r=a._geojsonTileLayer||a[o];if(!r)return;const s=t.createFilter(i&&i.filter),{z:l,x:c,y:u}=this.tileID.canonical,d={z:l,x:c,y:u};for(let i=0;i<r.length;i++){const a=r.feature(i);if(s.needGeometry){const e=t.toEvaluationFeature(a,!0);if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),a))continue;const h=n.getId(a,o),p=new t.GeoJSONFeature(a,l,c,u,h);p.tile=d,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const i=this.expirationTime;if(e.cacheControl){const i=t.parseCacheControl(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const t=Date.now();let e=!1;if(this.expirationTime>t)e=!1;else if(i)if(this.expirationTime<i)e=!0;else{const n=this.expirationTime-i;n?this.expirationTime=t+Math.max(n,3e4):e=!0}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const n in this.buckets){if(!e.style.hasLayer(n))continue;const a=this.buckets[n],o=a.layers[0].sourceLayer||"_geojsonTileLayer",r=i[o],s=t[o];if(!r||!s||0===Object.keys(s).length)continue;a.update(s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(a)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=t.exported.now()+e}setDependencies(t,e){const i={};for(const t of e)i[t]=!0;this.dependencies[t]=i}hasDependency(t,e){for(const i of t){const t=this.dependencies[i];if(t)for(const i of e)if(t[i])return!0}return!1}}class M{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,i){const n=t.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const a={value:e,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout((()=>{this.remove(t,a)}),i)),this.data[n].push(a),this.order.push(n),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const i=t.wrapped().key,n=void 0===e?0:this.data[i].indexOf(e),a=this.data[i][n];return this.data[i].splice(n,1),a.timeout&&clearTimeout(a.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(a.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const i in this.data)for(const n of this.data[i])t(n.value)||e.push(n);for(const t of e)this.remove(t.value.tileID,t)}}class J{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,i,n){const a=String(i);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][a]=this.stateChanges[e][a]||{},t.extend(this.stateChanges[e][a],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==a&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][a]){this.deletedStates[e][a]={};for(const t in this.state[e][a])n[t]||(this.deletedStates[e][a][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][a]&&null===this.deletedStates[e][a][t]&&delete this.deletedStates[e][a][t]}removeFeatureState(t,e,i){if(null===this.deletedStates[t])return;const n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(i in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][i]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}getState(e,i){const n=String(i),a=t.extend({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][i];if(null===t)return{};for(const e in t)delete a[e]}return a}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(e,i){const n={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const i={};for(const n in this.stateChanges[e])this.state[e][n]||(this.state[e][n]={}),t.extend(this.state[e][n],this.stateChanges[e][n]),i[n]=this.state[e][n];n[e]=i}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const i={};if(null===this.deletedStates[e])for(const t in this.state[e])i[t]={},this.state[e][t]={};else for(const t in this.deletedStates[e]){if(null===this.deletedStates[e][t])this.state[e][t]={};else for(const i of Object.keys(this.deletedStates[e][t]))delete this.state[e][t][i];i[t]=this.state[e][t]}n[e]=n[e]||{},t.extend(n[e],i)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const t in e)e[t].setFeatureState(n,i)}}class H extends t.Evented{constructor(e,i,n){super(),this.id=e,this.dispatcher=n,this.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(e,i,n,a){const o=new L[i.type](e,i,n,a);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(e,i,n,this),this._tiles={},this._cache=new M(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new J}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,e){return this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(e){this._source.abortTile&&this._source.abortTile(e,(()=>{})),this._source.fire(new t.Event("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(k).map((t=>t.key))}getRenderableIds(e){const i=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&i.push(this._tiles[t]);return e?i.sort(((e,i)=>{const n=e.tileID,a=i.tileID,o=new t.pointGeometry(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),r=new t.pointGeometry(a.canonical.x,a.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-a.overscaledZ||r.y-o.y||r.x-o.x})).map((t=>t.tileID.key)):i.map((t=>t.tileID)).sort(k).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,e){const i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))}_tileLoaded(e,i,n,a){if(a)return e.state="errored",void(404!==a.status?this._source.fire(new t.ErrorEvent(a,{tile:e})):this.update(this.transform,this.terrain));e.timeAdded=t.exported.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(t){const e=this.getRenderableIds();for(let n=0;n<e.length;n++){const a=e[n];if(t.neighboringTiles&&t.neighboringTiles[a]){const e=this.getTileByID(a);i(t,e),i(e,t)}}function i(t,e){t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0;let i=e.tileID.canonical.x-t.tileID.canonical.x;const n=e.tileID.canonical.y-t.tileID.canonical.y,a=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===n||Math.abs(n)>1||(Math.abs(i)>1&&(1===Math.abs(i+a)?i+=a:1===Math.abs(i-a)&&(i-=a)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,i,n){for(const a in this._tiles){let o=this._tiles[a];if(n[a]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)continue;let r=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(r=t)}let s=r;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){n[r.key]=r;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(let i=t.overscaledZ-1;i>=e;i--){const e=t.scaledTo(i),n=this._getLoadedTile(e);if(n)return n}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,n=Math.floor(e*i*5),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(a)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const i in this._tiles){const n=this._tiles[i];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+e),t[n.tileID.key]=n}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}update(e,i){if(this.transform=e,this.terrain=i,!this._sourceLoaded||this._paused)return;let n;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:i}),this._source.hasTile&&(n=n.filter((t=>this._source.hasTile(t))))):n=[];const a=e.coveringZoomLevel(this._source),o=Math.max(a-H.maxOverzooming,this._source.minzoom),r=Math.max(a+H.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const t={};for(const e of n)if(e.canonical.z>this._source.minzoom){const i=e.scaledTo(e.canonical.z-1);t[i.key]=i;const n=e.scaledTo(Math.max(this._source.minzoom,Math.min(e.canonical.z,5)));t[n.key]=n}n=n.concat(Object.values(t))}const s=this._updateRetainedTiles(n,a);if(j(this._source.type)){const e={},l={},c=Object.keys(s);for(const i of c){const n=s[i],a=this._tiles[i];if(!a||a.fadeEndTime&&a.fadeEndTime<=t.exported.now())continue;const r=this.findLoadedParent(n,o);r&&(this._addTile(r.tileID),e[r.tileID.key]=r.tileID),l[i]=n}this._retainLoadedChildren(l,a,r,s);for(const t in e)s[t]||(this._coveredTiles[t]=!0,s[t]=e[t]);if(i){const t={},e={};for(const i of n)this._tiles[i.key].hasData()?t[i.key]=i:e[i.key]=i;for(const i in e){const n=e[i].children(this._source.maxzoom);this._tiles[n[0].key]&&this._tiles[n[1].key]&&this._tiles[n[2].key]&&this._tiles[n[3].key]&&(t[n[0].key]=s[n[0].key]=n[0],t[n[1].key]=s[n[1].key]=n[1],t[n[2].key]=s[n[2].key]=n[2],t[n[3].key]=s[n[3].key]=n[3],delete e[i])}for(const i in e){const n=this.findLoadedParent(e[i],this._source.minzoom);if(n){t[n.tileID.key]=s[n.tileID.key]=n.tileID;for(const e in t)t[e].isChildOf(n.tileID)&&delete t[e]}}for(const e in this._tiles)t[e]||(this._coveredTiles[e]=!0)}}for(const t in s)this._tiles[t].clearFadeHold();const l=t.keysDifference(this._tiles,s);for(const t of l){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){const i={},n={},a=Math.max(e-H.maxOverzooming,this._source.minzoom),o=Math.max(e+H.maxUnderzooming,this._source.minzoom),r={};for(const n of t){const t=this._addTile(n);i[n.key]=n,t.hasData()||e<this._source.maxzoom&&(r[n.key]=n)}this._retainLoadedChildren(r,e,o,i);for(const o of t){let t=this._tiles[o.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){const t=o.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){i[t.key]=t;continue}}else{const t=o.children(this._source.maxzoom);if(i[t[0].key]&&i[t[1].key]&&i[t[2].key]&&i[t[3].key])continue}let r=t.wasRequested();for(let e=o.overscaledZ-1;e>=a;--e){const a=o.scaledTo(e);if(n[a.key])break;if(n[a.key]=!0,t=this.getTile(a),!t&&r&&(t=this._addTile(a)),t&&(i[a.key]=a,r=t.wasRequested(),t.hasData()))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let i,n=this._tiles[t].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){i=this._loadedParentTiles[n.key];break}e.push(n.key);const t=n.scaledTo(n.overscaledZ-1);if(i=this._getLoadedTile(t),i)break;n=t}for(const t of e)this._loadedParentTiles[t]=i}}_addTile(e){let i=this._tiles[e.key];if(i)return i;i=this._cache.getAndRemove(e),i&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));const n=i;return i||(i=new C(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i.uses++,this._tiles[e.key]=i,n||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const i=e.getExpiryTimeout();i&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),i))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(e,i,n){const a=[],o=this.transform;if(!o)return a;const r=n?o.getCameraQueryGeometry(e):e,s=e.map((t=>o.pointCoordinate(t,this.terrain))),l=r.map((t=>o.pointCoordinate(t,this.terrain))),c=this.getIds();let u=1/0,d=1/0,h=-1/0,p=-1/0;for(const t of l)u=Math.min(u,t.x),d=Math.min(d,t.y),h=Math.max(h,t.x),p=Math.max(p,t.y);for(let e=0;e<c.length;e++){const n=this._tiles[c[e]];if(n.holdingForFade())continue;const r=n.tileID,m=Math.pow(2,o.zoom-n.tileID.overscaledZ),b=i*n.queryPadding*t.EXTENT/n.tileSize/m,y=[r.getTilePoint(new t.MercatorCoordinate(u,d)),r.getTilePoint(new t.MercatorCoordinate(h,p))];if(y[0].x-b<t.EXTENT&&y[0].y-b<t.EXTENT&&y[1].x+b>=0&&y[1].y+b>=0){const t=s.map((t=>r.getTilePoint(t))),e=l.map((t=>r.getTilePoint(t)));a.push({tile:n,tileID:r,queryGeometry:t,cameraQueryGeometry:e,scale:m})}}return a}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.posMatrix=this.transform.calculatePosMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(j(this._source.type))for(const e in this._tiles){const i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.exported.now())return!0}return!1}setFeatureState(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)}removeFeatureState(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,i){const n=this._tiles[t];n&&n.setDependencies(e,i)}reloadTilesForDependencies(t,e){for(const i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((i=>!i.hasDependency(t,e)))}}function k(t,e){const i=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function j(t){return"raster"===t||"image"===t||"video"===t}H.maxOverzooming=10,H.maxUnderzooming=3;const F="mapboxgl_preloaded_worker_pool";class N{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<N.workerCount;)this.workers.push(new Worker(xa.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[F]}numActive(){return Object.keys(this.active).length}}const T=Math.floor(t.exported.hardwareConcurrency/2);let U;function E(){return U||(U=new N),U}function A(e,i){const n={};for(const t in e)"ref"!==t&&(n[t]=e[t]);return t.refProperties.forEach((t=>{t in i&&(n[t]=i[t])})),n}function O(t){t=t.slice();const e=Object.create(null);for(let i=0;i<t.length;i++)e[t[i].id]=t[i];for(let i=0;i<t.length;i++)"ref"in t[i]&&(t[i]=A(t[i],e[t[i].ref]));return t}N.workerCount=Math.max(Math.min(T,6),1);const P={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function K(t,e,i){i.push({command:P.addSource,args:[t,e[t]]})}function D(t,e,i){e.push({command:P.removeSource,args:[t]}),i[t]=!0}function Q(t,e,i,n){D(t,i,n),K(t,e,i)}function q(t,e,i){let n;for(n in t[i])if(Object.prototype.hasOwnProperty.call(t[i],n)&&"data"!==n&&!a(t[i][n],e[i][n]))return!1;for(n in e[i])if(Object.prototype.hasOwnProperty.call(e[i],n)&&"data"!==n&&!a(t[i][n],e[i][n]))return!1;return!0}function $(t,e,i,n,o,r){let s;for(s in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,s)&&(a(t[s],e[s])||i.push({command:r,args:[n,s,e[s],o]}));for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&!Object.prototype.hasOwnProperty.call(t,s)&&(a(t[s],e[s])||i.push({command:r,args:[n,s,e[s],o]}))}function tt(t){return t.id}function et(t,e){return t[e.id]=e,t}class it{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let i=1,n=this._distances[i];const a=e*this.paddedLength+this.padding;for(;n<a&&i<this._distances.length;)n=this._distances[++i];const o=i-1,r=this._distances[o],s=n-r,l=s>0?(a-r)/s:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}function nt(t,e){let i=!0;return"always"===t||"never"!==t&&"never"!==e||(i=!1),i}class at{constructor(t,e,i){const n=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(let t=0;t<this.xCellCount*this.yCellCount;t++)n.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,i,n,a){this._forEachCell(e,i,n,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(a)}insertCircle(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n)}_insertBoxCell(t,e,i,n,a,o){this.boxCells[a].push(o)}_insertCircleCell(t,e,i,n,a,o){this.circleCells[a].push(o)}_query(t,e,i,n,a,o,r){if(i<0||t>this.width||n<0||e>this.height)return[];const s=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(a)return[{key:null,x1:t,y1:e,x2:i,y2:n}];for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],i=this.circles[3*t+1],n=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-n,y1:i-n,x2:e+n,y2:i+n})}}else this._forEachCell(t,e,i,n,this._queryCell,s,{hitTest:a,overlapMode:o,seenUids:{box:{},circle:{}}},r);return s}query(t,e,i,n){return this._query(t,e,i,n,!1,null)}hitTest(t,e,i,n,a,o){return this._query(t,e,i,n,!0,a,o).length>0}hitTestCircle(t,e,i,n,a){const o=t-i,r=t+i,s=e-i,l=e+i;if(r<0||o>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(o,s,r,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},a),c.length>0}_queryCell(t,e,i,n,a,o,r,s){const{seenUids:l,hitTest:c,overlapMode:u}=r,d=this.boxCells[a];if(null!==d){const a=this.bboxes;for(const r of d)if(!l.box[r]){l.box[r]=!0;const d=4*r,h=this.boxKeys[r];if(t<=a[d+2]&&e<=a[d+3]&&i>=a[d+0]&&n>=a[d+1]&&(!s||s(h))&&(!c||!nt(u,h.overlapMode))&&(o.push({key:h,x1:a[d],y1:a[d+1],x2:a[d+2],y2:a[d+3]}),c))return!0}}const h=this.circleCells[a];if(null!==h){const a=this.circles;for(const r of h)if(!l.circle[r]){l.circle[r]=!0;const d=3*r,h=this.circleKeys[r];if(this._circleAndRectCollide(a[d],a[d+1],a[d+2],t,e,i,n)&&(!s||s(h))&&(!c||!nt(u,h.overlapMode))){const t=a[d],e=a[d+1],i=a[d+2];if(o.push({key:h,x1:t-i,y1:e-i,x2:t+i,y2:e+i}),c)return!0}}}return!1}_queryCellCircle(t,e,i,n,a,o,r,s){const{circle:l,seenUids:c,overlapMode:u}=r,d=this.boxCells[a];if(null!==d){const t=this.bboxes;for(const e of d)if(!c.box[e]){c.box[e]=!0;const i=4*e,n=this.boxKeys[e];if(this._circleAndRectCollide(l.x,l.y,l.radius,t[i+0],t[i+1],t[i+2],t[i+3])&&(!s||s(n))&&!nt(u,n.overlapMode))return o.push(!0),!0}}const h=this.circleCells[a];if(null!==h){const t=this.circles;for(const e of h)if(!c.circle[e]){c.circle[e]=!0;const i=3*e,n=this.circleKeys[e];if(this._circlesCollide(t[i],t[i+1],t[i+2],l.x,l.y,l.radius)&&(!s||s(n))&&!nt(u,n.overlapMode))return o.push(!0),!0}}}_forEachCell(t,e,i,n,a,o,r,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),d=this._convertToYCellCoord(n);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++)if(a.call(this,t,e,i,n,this.xCellCount*l+h,o,r,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,i,n,a,o){const r=n-t,s=a-e,l=i+o;return l*l>r*r+s*s}_circleAndRectCollide(t,e,i,n,a,o,r){const s=(o-n)/2,l=Math.abs(t-(n+s));if(l>s+i)return!1;const c=(r-a)/2,u=Math.abs(e-(a+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;const d=l-s,h=u-c;return d*d+h*h<=i*i}}function ot(e,i,n,a,o){const r=t.create();return i?(t.scale(r,r,[1/o,1/o,1]),n||t.rotateZ(r,r,a.angle)):t.multiply(r,a.labelPlaneMatrix,e),r}function rt(e,i,n,a,o){if(i){const i=t.clone(e);return t.scale(i,i,[o,o,1]),n||t.rotateZ(i,i,-a.angle),i}return a.glCoordMatrix}function st(e,i,n){let a;n?(a=[e.x,e.y,n(e.x,e.y),1],t.transformMat4(a,a,i)):(a=[e.x,e.y,0,1],gt(a,a,i));const o=a[3];return{point:new t.pointGeometry(a[0]/o,a[1]/o),signedDistanceFromCamera:o}}function lt(t,e){return.5+t/e*.5}function ct(t,e){const i=t[0]/t[3],n=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&n>=-e[1]&&n<=e[1]}function ut(e,i,n,a,o,r,s,l,c,u){const d=a?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(d,n.transform.zoom),p=[256/n.width*2+1,256/n.height*2+1],m=a?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;m.clear();const b=e.lineVertexArray,y=a?e.text.placedSymbolArray:e.icon.placedSymbolArray,f=n.transform.width/n.transform.height;let g=!1;for(let a=0;a<y.length;a++){const I=y.get(a);if(I.hidden||I.writingMode===t.WritingMode.vertical&&!g){ft(I.numGlyphs,m);continue}let v;if(g=!1,u?(v=[I.anchorX,I.anchorY,u(I.anchorX,I.anchorY),1],t.transformMat4(v,v,i)):(v=[I.anchorX,I.anchorY,0,1],gt(v,v,i)),!ct(v,p)){ft(I.numGlyphs,m);continue}const x=lt(n.transform.cameraToCenterDistance,v[3]),Z=t.evaluateSizeForFeature(d,h,I),G=s?Z/x:Z*x,w=new t.pointGeometry(I.anchorX,I.anchorY),W=st(w,o,u).point,X={},_=pt(I,G,!1,l,i,o,r,e.glyphOffsetArray,b,m,W,w,X,f,c,u);g=_.useVertical,(_.notEnoughRoom||g||_.needsFlipping&&pt(I,G,!0,l,i,o,r,e.glyphOffsetArray,b,m,W,w,X,f,c,u).notEnoughRoom)&&ft(I.numGlyphs,m)}a?e.text.dynamicLayoutVertexBuffer.updateData(m):e.icon.dynamicLayoutVertexBuffer.updateData(m)}function dt(t,e,i,n,a,o,r,s,l,c,u,d,h){const p=s.glyphStartIndex+s.numGlyphs,m=s.lineStartIndex,b=s.lineStartIndex+s.lineLength,y=e.getoffsetX(s.glyphStartIndex),f=e.getoffsetX(p-1),g=bt(t*y,i,n,a,o,r,s.segment,m,b,l,c,u,d,h);if(!g)return null;const I=bt(t*f,i,n,a,o,r,s.segment,m,b,l,c,u,d,h);return I?{first:g,last:I}:null}function ht(e,i,n,a){return e===t.WritingMode.horizontal&&Math.abs(n.y-i.y)>Math.abs(n.x-i.x)*a?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<n.y:i.x>n.x)?{needsFlipping:!0}:null}function pt(e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y){const f=i/24,g=e.lineOffsetX*f,I=e.lineOffsetY*f;let v;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,i=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,u=dt(f,l,g,I,n,d,h,e,c,r,p,b,y);if(!u)return{notEnoughRoom:!0};const x=st(u.first.point,s,y).point,Z=st(u.last.point,s,y).point;if(a&&!n){const t=ht(e.writingMode,x,Z,m);if(t)return t}v=[u.first];for(let a=e.glyphStartIndex+1;a<t-1;a++)v.push(bt(f*l.getoffsetX(a),g,I,n,d,h,e.segment,i,o,c,r,p,b,y));v.push(u.last)}else{if(a&&!n){const i=st(h,o,y).point,n=e.lineStartIndex+e.segment+1,a=new t.pointGeometry(c.getx(n),c.gety(n)),r=st(a,o,y),s=r.signedDistanceFromCamera>0?r.point:mt(h,a,i,1,o,y),l=ht(e.writingMode,i,s,m);if(l)return l}const i=bt(f*l.getoffsetX(e.glyphStartIndex),g,I,n,d,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,r,p,b,y);if(!i)return{notEnoughRoom:!0};v=[i]}for(const e of v)t.addDynamicAttributes(u,e.point,e.angle);return{}}function mt(t,e,i,n,a,o){const r=st(t.add(t.sub(e)._unit()),a,o).point,s=i.sub(r);return i.add(s._mult(n/s.mag()))}function bt(e,i,n,a,o,r,s,l,c,u,d,h,p,m){const b=a?e-i:e+i;let y=b>0?1:-1,f=0;a&&(y*=-1,f=Math.PI),y<0&&(f+=Math.PI);let g=y>0?l+s:l+s+1,I=o,v=o,x=0,Z=0;const G=Math.abs(b),w=[];for(;x+Z<=G;){if(g+=y,g<l||g>=c)return null;if(v=I,w.push(I),I=h[g],void 0===I){const e=new t.pointGeometry(u.getx(g),u.gety(g)),i=st(e,d,m);if(i.signedDistanceFromCamera>0)I=h[g]=i.point;else{const i=g-y;I=mt(0===x?r:new t.pointGeometry(u.getx(i),u.gety(i)),e,v,G-x+1,d,m)}}x+=Z,Z=v.dist(I)}const W=(G-x)/Z,X=I.sub(v),_=X.mult(W)._add(v);_._add(X._unit()._perp()._mult(n*y));const V=f+Math.atan2(I.y-v.y,I.x-v.x);return w.push(_),{point:_,angle:p?V:0,path:w}}const yt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ft(t,e){for(let i=0;i<t;i++){const t=e.length;e.resize(t+4),e.float32.set(yt,3*t)}}function gt(t,e,i){const n=e[0],a=e[1];return t[0]=i[0]*n+i[4]*a+i[12],t[1]=i[1]*n+i[5]*a+i[13],t[3]=i[3]*n+i[7]*a+i[15],t}const It=100;class vt{constructor(t,e=new at(t.width+200,t.height+200,25),i=new at(t.width+200,t.height+200,25)){this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+It,this.screenBottomBoundary=t.height+It,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,e,i,n,a,o){const r=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY,o),s=i*r.perspectiveRatio,l=t.x1*s+r.point.x,c=t.y1*s+r.point.y,u=t.x2*s+r.point.x,d=t.y2*s+r.point.y;return!this.isInsideGrid(l,c,u,d)||"always"!==e&&this.grid.hitTest(l,c,u,d,e,a)||r.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,c,u,d],offscreen:this.isOffscreen(l,c,u,d)}}placeCollisionCircles(e,i,n,a,o,r,s,l,c,u,d,h,p,m){const b=[],y=new t.pointGeometry(i.anchorX,i.anchorY),f=st(y,r,m),g=lt(this.transform.cameraToCenterDistance,f.signedDistanceFromCamera),I=(u?o/g:o*g)/t.ONE_EM,v=st(y,s,m).point,x=dt(I,a,i.lineOffsetX*I,i.lineOffsetY*I,!1,v,y,i,n,s,{},!1,m);let Z=!1,G=!1,w=!0;if(x){const i=.5*h*g+p,n=new t.pointGeometry(-100,-100),a=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new it,r=x.first,s=x.last;let u=[];for(let t=r.path.length-1;t>=1;t--)u.push(r.path[t]);for(let t=1;t<s.path.length;t++)u.push(s.path[t]);const y=2.5*i;if(l){const t=u.map((t=>st(t,l,m)));u=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let f=[];if(u.length>0){const e=u[0].clone(),i=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),i.x=Math.max(i.x,u[t].x),i.y=Math.max(i.y,u[t].y);f=e.x>=n.x&&i.x<=a.x&&e.y>=n.y&&i.y<=a.y?[u]:i.x<n.x||e.x>a.x||i.y<n.y||e.y>a.y?[]:t.clipLine([u],n.x,n.y,a.x,a.y)}for(const t of f){o.reset(t,.25*i);let n=0;n=o.length<=.5*i?1:Math.ceil(o.paddedLength/y)+1;for(let t=0;t<n;t++){const a=t/Math.max(n-1,1),r=o.lerp(a),s=r.x+It,l=r.y+It;b.push(s,l,i,0);const u=s-i,h=l-i,p=s+i,m=l+i;if(w=w&&this.isOffscreen(u,h,p,m),G=G||this.isInsideGrid(u,h,p,m),"always"!==e&&this.grid.hitTestCircle(s,l,i,e,d)&&(Z=!0,!c))return{circles:[],offscreen:!1,collisionDetected:Z}}}}return{circles:!c&&Z||!G||g<this.perspectiveRatioCutoff?[]:b,offscreen:w,collisionDetected:Z}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let n=1/0,a=1/0,o=-1/0,r=-1/0;for(const s of e){const e=new t.pointGeometry(s.x+It,s.y+It);n=Math.min(n,e.x),a=Math.min(a,e.y),o=Math.max(o,e.x),r=Math.max(r,e.y),i.push(e)}const s=this.grid.query(n,a,o,r).concat(this.ignoredGrid.query(n,a,o,r)),l={},c={};for(const e of s){const n=e.key;if(void 0===l[n.bucketInstanceId]&&(l[n.bucketInstanceId]={}),l[n.bucketInstanceId][n.featureIndex])continue;const a=[new t.pointGeometry(e.x1,e.y1),new t.pointGeometry(e.x2,e.y1),new t.pointGeometry(e.x2,e.y2),new t.pointGeometry(e.x1,e.y2)];t.polygonIntersectsPolygon(i,a)&&(l[n.bucketInstanceId][n.featureIndex]=!0,void 0===c[n.bucketInstanceId]&&(c[n.bucketInstanceId]=[]),c[n.bucketInstanceId].push(n.featureIndex))}return c}insertCollisionBox(t,e,i,n,a,o){(i?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:a,collisionGroupID:o,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,i,n,a,o){const r=i?this.ignoredGrid:this.grid,s={bucketInstanceId:n,featureIndex:a,collisionGroupID:o,overlapMode:e};for(let e=0;e<t.length;e+=4)r.insertCircle(s,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,i,n,a){let o;return a?(o=[i,n,a(i,n),1],t.transformMat4(o,o,e)):(o=[i,n,0,1],gt(o,o,e)),{point:new t.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+It,(-o[1]/o[3]+1)/2*this.transform.height+It),perspectiveRatio:.5+this.transform.cameraToCenterDistance/o[3]*.5}}isOffscreen(t,e,i,n){return i<It||t>=this.screenRightBoundary||n<It||e>this.screenBottomBoundary}isInsideGrid(t,e,i,n){return i>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function xt(e,i,n){return i*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}class Zt{constructor(t,e,i,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class Gt{constructor(t,e,i,n,a){this.text=new Zt(t?t.text:null,e,i,a),this.icon=new Zt(t?t.icon:null,e,n,a)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class wt{constructor(t,e,i){this.text=t,this.icon=e,this.skipFade=i}}class Wt{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Xt{constructor(t,e,i,n,a){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=a}}class _t{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Vt(e,i,n,a,o){const{horizontalAlign:r,verticalAlign:s}=t.getAnchorAlignment(e),l=-(r-.5)*i,c=-(s-.5)*n,u=t.evaluateVariableOffset(e,a);return new t.pointGeometry(l+u[0]*o,c+u[1]*o)}function St(e,i,n,a,o,r){const{x1:s,x2:l,y1:c,y2:u,anchorPointX:d,anchorPointY:h}=e,p=new t.pointGeometry(i,n);return a&&p._rotate(o?r:-r),{x1:s+p.x,y1:c+p.y,x2:l+p.x,y2:u+p.y,anchorPointX:d,anchorPointY:h}}class Bt{constructor(t,e,i,n,a){this.transform=t.clone(),this.terrain=e,this.collisionIndex=new vt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new _t(n),this.collisionCircleArrays={},this.prevPlacement=a,a&&(a.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,i,n,a){const o=n.getBucket(i),r=n.latestFeatureIndex;if(!o||!r||i.id!==o.layerIds[0])return;const s=n.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/t.EXTENT,d=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),m=xt(n,1,this.transform.zoom),b=ot(d,h,p,this.transform,m);let y=null;if(h){const e=rt(d,h,p,this.transform,m);y=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Xt(o.bucketInstanceId,r,o.sourceLayerIndex,o.index,n.tileID);const f={bucket:o,layout:l,posMatrix:d,textLabelPlaneMatrix:b,labelToScreenMatrix:y,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(a)for(const t of o.sortKeyRanges){const{sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:a}=t;e.push({sortKey:i,symbolInstanceStart:n,symbolInstanceEnd:a,parameters:f})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:f})}attemptAnchorPlacement(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b){const y=[d.textOffset0,d.textOffset1],f=Vt(t,i,n,y,a),g=this.collisionIndex.placeCollisionBox(St(e,f.x,f.y,o,r,this.transform.angle),u,s,l,c.predicate,b);if((!m||0!==this.collisionIndex.placeCollisionBox(St(m,f.x,f.y,o,r,this.transform.angle),u,s,l,c.predicate,b).box.length)&&g.box.length>0){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID].text&&(e=this.prevPlacement.variableOffsets[d.crossTileID].anchor),0===d.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[d.crossTileID]={textOffset:y,width:i,height:n,anchor:t,textBoxScale:a,prevAnchor:e},this.markUsedJustification(h,t,d,p),h.allowVerticalPlacement&&(this.markUsedOrientation(h,p,d),this.placedOrientations[d.crossTileID]=p),{shift:f,placedGlyphBoxes:g}}}placeLayerBucketPart(e,i,n){const{bucket:a,layout:o,posMatrix:r,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:d,partiallyEvaluatedTextSize:h,collisionGroup:p}=e.parameters,m=o.get("text-optional"),b=o.get("icon-optional"),y=t.getOverlapMode(o,"text-overlap","text-allow-overlap"),f="always"===y,g=t.getOverlapMode(o,"icon-overlap","icon-allow-overlap"),I="always"===g,v="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),Z="none"!==o.get("icon-text-fit"),G="viewport-y"===o.get("symbol-z-order"),w=f&&(I||!a.hasIconData()||b),W=I&&(f||!a.hasTextData()||m);!a.collisionArrays&&d&&a.deserializeCollisionBoxes(d);const X=(e,d)=>{if(i[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new wt(!1,!1,!1));let I=!1,G=!1,X=!0,_=null,V={box:null,offscreen:null},S={box:null,offscreen:null},B=null,L=null,Y=null,z=0,R=0,C=0;d.textFeatureIndex?z=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(z=e.featureIndex),d.verticalTextFeatureIndex&&(R=d.verticalTextFeatureIndex);const M=this.retainedQueryData[a.bucketInstanceId].tileID,J=this.terrain?(t,e)=>this.terrain.getElevation(M,t,e):null;for(const t of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const e=d[t];e&&(e.elevation=J?J(e.anchorPointX,e.anchorPointY):0)}const H=d.textBox;if(H){const i=i=>{let n=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!i&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,n=t,this.markUsedOrientation(a,n,e))}return n},n=(i,n)=>{if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&d.verticalTextBox){for(const e of a.writingModes)if(e===t.WritingMode.vertical?(V=n(),S=V):V=i(),V&&V.box&&V.box.length)break}else V=i()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];s.indexOf(t.anchor)>0&&(s=s.filter((e=>e!==t.anchor)),s.unshift(t.anchor))}const l=(t,i,n)=>{const o=t.x2-t.x1,l=t.y2-t.y1,u=e.textBoxScale,d=Z&&"never"===g?i:null;let h={box:[],offscreen:!1};const m="never"!==y?2*s.length:s.length;for(let i=0;i<m;++i){const m=this.attemptAnchorPlacement(s[i%s.length],t,o,l,u,v,x,c,r,p,i>=s.length?y:"never",e,a,n,d,J);if(m&&(h=m.placedGlyphBoxes,h&&h.box&&h.box.length)){I=!0,_=m.shift;break}}return h};n((()=>l(H,d.iconBox,t.WritingMode.horizontal)),(()=>{const i=d.verticalTextBox;return a.allowVerticalPlacement&&!(V&&V.box&&V.box.length)&&e.numVerticalGlyphVertices>0&&i?l(i,d.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),V&&(I=V.box,X=V.offscreen);const u=i(V&&V.box);if(!I&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(a,t.anchor,e,u))}}else{const o=(t,i)=>{const n=this.collisionIndex.placeCollisionBox(t,y,c,r,p.predicate,J);return n&&n.box&&n.box.length&&(this.markUsedOrientation(a,i,e),this.placedOrientations[e.crossTileID]=i),n};n((()=>o(H,t.WritingMode.horizontal)),(()=>{const i=d.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?o(i,t.WritingMode.vertical):{box:null,offscreen:null}})),i(V&&V.box&&V.box.length)}}if(B=V,I=B&&B.box&&B.box.length>0,X=B&&B.offscreen,e.useRuntimeCollisionCircles){const i=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),c=t.evaluateSizeForFeature(a.textSizeData,h,i),u=o.get("text-padding");L=this.collisionIndex.placeCollisionCircles(y,i,a.lineVertexArray,a.glyphOffsetArray,c,r,s,l,n,x,p.predicate,e.collisionCircleDiameter,u,J),L.circles.length&&L.collisionDetected&&!n&&t.warnOnce("Collisions detected, but collision boxes are not shown"),I=f||L.circles.length>0&&!L.collisionDetected,X=X&&L.offscreen}if(d.iconFeatureIndex&&(C=d.iconFeatureIndex),d.iconBox){const t=t=>{const e=Z&&_?St(t,_.x,_.y,v,x,this.transform.angle):t;return this.collisionIndex.placeCollisionBox(e,g,c,r,p.predicate,J)};S&&S.box&&S.box.length&&d.verticalIconBox?(Y=t(d.verticalIconBox),G=Y.box.length>0):(Y=t(d.iconBox),G=Y.box.length>0),X=X&&Y.offscreen}const k=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,j=b||0===e.numIconVertices;if(k||j?j?k||(G=G&&I):I=G&&I:G=I=G&&I,I&&B&&B.box&&this.collisionIndex.insertCollisionBox(B.box,y,o.get("text-ignore-placement"),a.bucketInstanceId,S&&S.box&&R?R:z,p.ID),G&&Y&&this.collisionIndex.insertCollisionBox(Y.box,g,o.get("icon-ignore-placement"),a.bucketInstanceId,C,p.ID),L&&(I&&this.collisionIndex.insertCollisionCircles(L.circles,y,o.get("text-ignore-placement"),a.bucketInstanceId,z,p.ID),n)){const t=a.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Wt);for(let t=0;t<L.circles.length;t+=4)e.circles.push(L.circles[t+0]),e.circles.push(L.circles[t+1]),e.circles.push(L.circles[t+2]),e.circles.push(L.collisionDetected?1:0)}if(0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===a.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new wt(I||w,G||W,X||a.justReloaded),i[e.crossTileID]=!0};if(G){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=a.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const i=t[e];X(a.symbolInstances.get(i),a.collisionArrays[i])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)X(a.symbolInstances.get(t),a.collisionArrays[t]);if(n&&a.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[a.bucketInstanceId];t.invert(e.invProjMatrix,r),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}markUsedJustification(e,i,n,a){let o;o=a===t.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];const r=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const t of r)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:n.crossTileID)}markUsedOrientation(e,i,n){const a=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,o=i===t.WritingMode.vertical?i:0,r=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];for(const t of r)e.text.placedSymbolArray.get(t).placedOrientation=a;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const n=e?e.symbolFadeChange(t):1,a=e?e.opacities:{},o=e?e.variableOffsets:{},r=e?e.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],o=a[t];o?(this.opacities[t]=new Gt(o,n,e.text,e.icon),i=i||e.text!==o.text.placed||e.icon!==o.icon.placed):(this.opacities[t]=new Gt(null,n,e.text,e.icon,e.skipFade),i=i||e.text||e.icon)}for(const t in a){const e=a[t];if(!this.opacities[t]){const a=new Gt(e,n,!1,!1);a.isHidden()||(this.opacities[t]=a,i=i||e.text.placed||e.icon.placed)}}for(const t in o)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=o[t]);for(const t in r)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=r[t]);if(e&&void 0===e.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const i={};for(const n of e){const e=n.getBucket(t);e&&n.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,i,n.collisionBoxArray)}}updateBucketOpacities(e,i,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const a=e.layers[0].layout,o=new Gt(null,0,!1,!1,!0),r=a.get("text-allow-overlap"),s=a.get("icon-allow-overlap"),l=a.get("text-variable-anchor"),c="map"===a.get("text-rotation-alignment"),u="map"===a.get("text-pitch-alignment"),d="none"!==a.get("icon-text-fit"),h=new Gt(null,0,r&&(s||!e.hasIconData()||a.get("icon-optional")),s&&(r||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);const p=(t,e,i)=>{for(let n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(i)};for(let n=0;n<e.symbolInstances.length;n++){const a=e.symbolInstances.get(n),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:s,crossTileID:m}=a;let b=this.opacities[m];i[m]?b=o:b||(b=h,this.opacities[m]=b),i[m]=!0;const y=a.numIconVertices>0,f=this.placedOrientations[a.crossTileID],g=f===t.WritingMode.vertical,I=f===t.WritingMode.horizontal||f===t.WritingMode.horizontalOnly;if(r>0||s>0){const t=kt(b.text);p(e.text,r,g?jt:t),p(e.text,s,I?jt:t);const i=b.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||g?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=i||I?1:0);const n=this.variableOffsets[a.crossTileID];n&&this.markUsedJustification(e,n.anchor,a,f);const o=this.placedOrientations[a.crossTileID];o&&(this.markUsedJustification(e,"left",a,o),this.markUsedOrientation(e,o,a))}if(y){const t=kt(b.icon),i=!(d&&a.verticalPlacedIconSymbolIndex&&g);a.placedIconSymbolIndex>=0&&(p(e.icon,a.numIconVertices,i?t:jt),e.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=b.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,a.numVerticalIconVertices,i?jt:t),e.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=b.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const i=e.collisionArrays[n];if(i){let n=new t.pointGeometry(0,0);if(i.textBox||i.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[m];e?(n=Vt(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),c&&n._rotate(u?this.transform.angle:-this.transform.angle)):t=!1}i.textBox&&Lt(e.textCollisionBox.collisionVertexArray,b.text.placed,!t||g,n.x,n.y),i.verticalTextBox&&Lt(e.textCollisionBox.collisionVertexArray,b.text.placed,!t||I,n.x,n.y)}const a=Boolean(!I&&i.verticalIconBox);i.iconBox&&Lt(e.iconCollisionBox.collisionVertexArray,b.icon.placed,a,d?n.x:0,d?n.y:0),i.verticalIconBox&&Lt(e.iconCollisionBox.collisionVertexArray,b.icon.placed,!a,d?n.x:0,d?n.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t}setStale(){this.stale=!0}}function Lt(t,e,i,n,a){t.emplaceBack(e?1:0,i?1:0,n||0,a||0),t.emplaceBack(e?1:0,i?1:0,n||0,a||0),t.emplaceBack(e?1:0,i?1:0,n||0,a||0),t.emplaceBack(e?1:0,i?1:0,n||0,a||0)}const Yt=Math.pow(2,25),zt=Math.pow(2,24),Rt=Math.pow(2,17),Ct=Math.pow(2,16),Mt=Math.pow(2,9),Jt=Math.pow(2,8),Ht=Math.pow(2,1);function kt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Yt+e*zt+i*Rt+e*Ct+i*Mt+e*Jt+i*Ht+e}const jt=0;class Ft{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,i,n,a){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,a())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,a())return!0;return!1}}class Nt{constructor(t,e,i,n,a,o,r,s){this.placement=new Bt(t,e,o,r,s),this._currentPlacementIndex=i.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=a,this._done=!1}isDone(){return this._done}continuePlacement(e,i,n){const a=t.exported.now(),o=()=>{const e=t.exported.now()-a;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=i[e[this._currentPlacementIndex]],a=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=a)&&(!t.maxzoom||t.maxzoom>a)){if(this._inProgressLayer||(this._inProgressLayer=new Ft(t)),this._inProgressLayer.continuePlacement(n[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Tt=512/t.EXTENT/2;class Ut{constructor(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let i=0;i<e.length;i++){const n=e.get(i),a=n.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}getScaledCoordinates(e,i){const n=Tt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*n),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*n)}}findMatches(t,e,i){const n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let a=0;a<t.length;a++){const o=t.get(a);if(o.crossTileID)continue;const r=this.indexedSymbolInstances[o.key];if(!r)continue;const s=this.getScaledCoordinates(o,e);for(const t of r)if(Math.abs(t.coord.x-s.x)<=n&&Math.abs(t.coord.y-s.y)<=n&&!i[t.crossTileID]){i[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class Et{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class At{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const i=this.indexes[t],n={};for(const t in i){const a=i[t];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),n[a.tileID.key]=a}this.indexes[t]=n}this.lng=t}addBucket(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const n=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const a=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in a){const o=a[i];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,n)}else{const o=a[t.scaledTo(Number(i)).key];o&&o.findMatches(e.symbolInstances,t,n)}}for(let t=0;t<e.symbolInstances.length;t++){const a=e.symbolInstances.get(t);a.crossTileID||(a.crossTileID=i.generate(),n[a.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ut(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const i in e.indexedSymbolInstances)for(const n of e.indexedSymbolInstances[i])delete this.usedCrossTileIDs[t][n.crossTileID]}removeStaleBuckets(t){let e=!1;for(const i in this.indexes){const n=this.indexes[i];for(const a in n)t[n[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[a]),delete n[a],e=!0)}return e}}class Ot{constructor(){this.layerIndexes={},this.crossTileIDs=new Et,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,i){let n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new At);let a=!1;const o={};n.handleWrapJump(i);for(const i of e){const e=i.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(i.tileID,e,this.crossTileIDs)&&(a=!0),o[e.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(a=!0),a}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}var Pt=t.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Kt extends t.Evented{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=t._cache.max,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const t in this._tiles){const e=this._tiles[t];e.textures.forEach((t=>t.destroy())),e.textures=[]}}update(e,i){this.sourceCache.update(e,i),this._renderableTilesKeys=[];for(const n of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:i}))this._renderableTilesKeys.push(n.key),this._tiles[n.key]||(n.posMatrix=new Float64Array(16),t.ortho(n.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),this._tiles[n.key]=new C(n,this.tileSize))}removeOutdated(t){const e={};this.renderHistory=this.renderHistory.filter(((t,e)=>this.renderHistory.indexOf(t)===e)).slice(0,this.renderHistorySize);for(const t of this._renderableTilesKeys)e[t]=!0;for(const t of this.renderHistory)e[t]=!0;for(const i in this._tiles)e[i]||(this._tiles[i].clearTextures(t),delete this._tiles[i])}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(e){const i={};for(const n of this._renderableTilesKeys){const a=this._tiles[n].tileID;if(a.canonical.equals(e.canonical)){const a=e.clone();a.posMatrix=new Float64Array(16),t.ortho(a.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),i[n]=a}else if(a.canonical.isChildOf(e.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const r=a.canonical.z-e.canonical.z,s=a.canonical.x-(a.canonical.x>>r<<r),l=a.canonical.y-(a.canonical.y>>r<<r),c=t.EXTENT>>r;t.ortho(o.posMatrix,0,c,0,c,0,1),t.translate(o.posMatrix,o.posMatrix,[-s*c,-l*c,0]),i[n]=o}else if(e.canonical.isChildOf(a.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const r=e.canonical.z-a.canonical.z,s=e.canonical.x-(e.canonical.x>>r<<r),l=e.canonical.y-(e.canonical.y>>r<<r),c=t.EXTENT>>r;t.ortho(o.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),t.translate(o.posMatrix,o.posMatrix,[s*c,l*c,0]),t.scale(o.posMatrix,o.posMatrix,[1/2**r,1/2**r,0]),i[n]=o}}return i}getSourceTile(t,e){const i=this.sourceCache._source;let n=t.overscaledZ-this.deltaZoom;if(n>i.maxzoom&&(n=i.maxzoom),n<i.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(n).key);let a=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!a||!a.dem)&&e)for(;n>=i.minzoom&&(!a||!a.dem);)a=this.sourceCache.getTileByID(t.scaledTo(n--).key);return a}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter((e=>e.timeLoaded>=t))}}class Dt{constructor(t,e,i){this.style=t,this.sourceCache=new Kt(e),this.options=i,this.exaggeration="number"==typeof i.exaggeration?i.exaggeration:1,this.elevationOffset="number"==typeof i.elevationOffset?i.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(e,i,n,a=t.EXTENT){if(!(i>=0&&i<a&&n>=0&&n<a))return this.elevationOffset;let o=0;const r=this.getTerrainData(e);if(r.tile&&r.tile.dem){const e=t.transformMat4$1([],[i/a*t.EXTENT,n/a*t.EXTENT],r.u_terrain_matrix),s=[e[0]*r.tile.dem.dim,e[1]*r.tile.dem.dim],l=[Math.floor(s[0]),Math.floor(s[1])],c=r.tile.dem.get(l[0],l[1]),u=r.tile.dem.get(l[0],l[1]+1),d=r.tile.dem.get(l[0]+1,l[1]),h=r.tile.dem.get(l[0]+1,l[1]+1);o=t.number(t.number(c,u,s[0]-l[0]),t.number(d,h,s[0]-l[0]),s[1]-l[1])}return o}rememberForRerender(t,e){for(const i in this.sourceCache._tiles){const n=this.sourceCache._tiles[i];(n.tileID.equals(e)||n.tileID.isChildOf(e))&&(t===this.sourceCache.sourceCache.id&&(n.timeLoaded=Date.now()),this._rerender[t]=this._rerender[t]||{},this._rerender[t][n.tileID.key]=!0)}}needsRerender(t,e){return this._rerender[t]&&this._rerender[t][e.key]}clearRerenderCache(){this._rerender={}}getElevation(e,i,n,a=t.EXTENT){return(this.getDEMElevation(e,i,n,a)+this.elevationOffset)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.style.map.painter.context,i=new t.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l(e,i,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l(e,new t.RGBAImage({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.identity([])}const i=this.sourceCache.getSourceTile(e,!0);if(i&&i.dem&&(!i.demTexture||i.needsTerrainPrepare)){const t=this.style.map.painter.context;i.demTexture=this.style.map.painter.getTileTexture(i.dem.stride),i.demTexture?i.demTexture.update(i.dem.getPixels(),{premultiply:!1}):i.demTexture=new l(t,i.dem.getPixels(),t.gl.RGBA,{premultiply:!1}),i.demTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),i.needsTerrainPrepare=!1}const n=i&&i+i.tileID.key+e.key;if(n&&!this._demMatrixCache[n]){const n=this.sourceCache.sourceCache._source.maxzoom;let a=e.canonical.z-i.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=n?a=e.canonical.z-n:t.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>a<<a),r=e.canonical.y-(e.canonical.y>>a<<a),s=t.fromScaling(new Float64Array(16),[1/(t.EXTENT<<a),1/(t.EXTENT<<a),0]);t.translate(s,s,[o*t.EXTENT,r*t.EXTENT,0]),this._demMatrixCache[e.key]={matrix:s,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:i&&i.dem&&i.dem.dim||1,u_terrain_matrix:n?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:i&&i.dem&&i.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(i&&i.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:i}}getRTTFramebuffer(){const t=this.style.map.painter;if(!this._rttFramebuffer){const e=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=t.context.createFramebuffer(e,e,!0),this._rttFramebuffer.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,e,e))}return this._rttFramebuffer}getFramebuffer(t){const e=this.style.map.painter,i=e.width/devicePixelRatio,n=e.height/devicePixelRatio;return!this._fbo||this._fbo.width===i&&this._fbo.height===n||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l(e.context,{width:i,height:n,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l(e.context,{width:i,height:n,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=e.context.createFramebuffer(i,n,!0),this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,i,n))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const i=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,e=0;t<this._coordsTextureSize;t++)for(let n=0;n<this._coordsTextureSize;n++,e+=4)i[e+0]=255&n,i[e+1]=255&t,i[e+2]=n>>8<<4|t>>8,i[e+3]=0;const n=new t.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(i.buffer)),a=new l(e,n,e.gl.RGBA,{premultiply:!1});return a.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=a,a}pointCoordinate(e){const i=new Uint8Array(4),n=this.style.map.painter,a=n.context,o=a.gl;a.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),o.readPixels(e.x,n.height/devicePixelRatio-e.y-1,1,1,o.RGBA,o.UNSIGNED_BYTE,i),a.bindFramebuffer.set(null);const r=i[0]+(i[2]>>4<<8),s=i[1]+((15&i[2])<<8),l=this.coordsIndex[255-i[3]],c=l&&this.sourceCache.getTileByID(l);if(!c)return null;const u=this._coordsTextureSize,d=(1<<c.tileID.canonical.z)*u;return new t.MercatorCoordinate((c.tileID.canonical.x*u+r)/d,(c.tileID.canonical.y*u+s)/d,this.getElevation(c.tileID,r,s,u))}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.style.map.painter.context,i=new t.PosArray,n=new t.TriangleIndexArray,a=this.meshSize,o=t.EXTENT/a,r=a*a;for(let t=0;t<=a;t++)for(let e=0;e<=a;e++)i.emplaceBack(e*o,t*o);for(let t=0;t<r;t+=a+1)for(let e=0;e<a;e++)n.emplaceBack(e+t,a+e+t+1,a+e+t+2),n.emplaceBack(e+t,a+e+t+2,e+t+1);return this._mesh={indexBuffer:e.createIndexBuffer(n),vertexBuffer:e.createVertexBuffer(i,Pt.members),segments:t.SegmentVector.simpleSegment(0,0,i.length,n.length)},this._mesh}getMinMaxElevation(t){const e=this.getTerrainData(t).tile,i={minElevation:null,maxElevation:null};return e&&e.dem&&(i.minElevation=(e.dem.min+this.elevationOffset)*this.exaggeration,i.maxElevation=(e.dem.max+this.elevationOffset)*this.exaggeration),i}}const Qt=(e,i)=>t.emitValidationErrors(e,i&&i.filter((t=>"source.canvas"!==t.identifier))),qt=t.pick(P,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),$t=t.pick(P,["setCenter","setZoom","setBearing","setPitch"]),te=function(){const e={},i=t.spec.$version;for(const n in t.spec.$root){const a=t.spec.$root[n];if(a.required){let t=null;t="version"===n?i:"array"===a.type?[]:{},null!=t&&(e[n]=t)}}return e}();class ee extends t.Evented{constructor(e,i={}){super(),this.map=e,this.dispatcher=new I(E(),this),this.imageManager=new u,this.imageManager.setEventedParent(this),this.glyphManager=new m(e._requestManager,i.localIdeographFontFamily),this.lineAtlas=new g(256,512),this.crossTileSymbolIndex=new Ot,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const n=this;this._rtlTextPluginCallback=ee.registerForPluginStateChange((e=>{n.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,i)=>{if(t.triggerPluginCompletionEvent(e),i&&i.every((t=>t)))for(const t in n.sourceCaches)n.sourceCaches[t].reload()}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.sourceCaches[t.sourceId];if(!e)return;const i=e.getSource();if(i&&i.vectorLayerIds)for(const t in this._layers){const e=this._layers[t];e.source===i.id&&this._validateLayer(e)}}))}loadURL(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const n="boolean"!=typeof i.validate||i.validate,a=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(a,((e,i)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):i&&this._load(i,n)}))}loadJSON(e,i={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==i.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(te,!1)}_load(e,i){if(i&&Qt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);const n=O(this.stylesheet.layers);this._order=n.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let e of n)e=t.createStyleLayer(e),e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new f(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,i,n,a){let o,r,s;const l=n>1?"@2x":"";let c=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,l,".json"),t.ResourceType.SpriteJSON),((t,e)=>{c=null,s||(s=t,o=e,d())})),u=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,l,".png"),t.ResourceType.SpriteImage),((t,e)=>{u=null,s||(s=t,r=e,d())}));function d(){if(s)a(s);else if(o&&r){const e=t.exported.getImageData(r),i={};for(const n in o){const{width:a,height:r,x:s,y:l,sdf:c,pixelRatio:u,stretchX:d,stretchY:h,content:p}=o[n],m=new t.RGBAImage({width:a,height:r});t.RGBAImage.copy(e,m,{x:s,y:l},{x:0,y:0},{width:a,height:r}),i[n]={data:m,pixelRatio:u,sdf:c,stretchX:d,stretchY:h,content:p}}a(null,i)}}return{cancel(){c&&(c.cancel(),c=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,this.map.getPixelRatio(),((e,i)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(i)for(const t in i)this.imageManager.addImage(t,i[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const i=this.sourceCaches[e.source];if(!i)return;const n=e.sourceLayer;if(!n)return;const a=i.getSource();("geojson"===a.type||a.vectorLayerIds&&-1===a.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${n}" does not exist on source "${a.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const i of t){const t=this._layers[i];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const i=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(t.length||i.length)&&this._updateWorkerLayers(t,i);for(const t in this._updatedSources){const e=this._updatedSources[t];if("reload"===e)this._reloadSource(t);else{if("clear"!==e)throw new Error(`Invalid action ${e}`);this._clearSource(t)}}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const n={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];n[t]=e.used,e.used=!1}for(const t of this._order){const i=this._layers[t];i.recalculate(e,this._availableImages),!i.isHidden(e.zoom)&&i.source&&(this.sourceCaches[i.source].used=!0)}for(const e in n){const i=this.sourceCaches[e];n[e]!==i.used&&i.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:e}))}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(e){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),e){const t=this.sourceCaches[e.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);this.terrain=new Dt(this,t,e),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=t=>{t.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=t=>{t.tile&&(t.sourceId===e.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(t.sourceId,t.tile.tileID)):"geojson"===t.source.type&&this.terrain.rememberForRerender(t.sourceId,t.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new t.Event("terrain",{terrain:e}))}setState(e){if(this._checkLoaded(),Qt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=O(e.layers);const i=function(t,e){if(!t)return[{command:P.setStyle,args:[e]}];let i=[];try{if(!a(t.version,e.version))return[{command:P.setStyle,args:[e]}];a(t.center,e.center)||i.push({command:P.setCenter,args:[e.center]}),a(t.zoom,e.zoom)||i.push({command:P.setZoom,args:[e.zoom]}),a(t.bearing,e.bearing)||i.push({command:P.setBearing,args:[e.bearing]}),a(t.pitch,e.pitch)||i.push({command:P.setPitch,args:[e.pitch]}),a(t.sprite,e.sprite)||i.push({command:P.setSprite,args:[e.sprite]}),a(t.glyphs,e.glyphs)||i.push({command:P.setGlyphs,args:[e.glyphs]}),a(t.transition,e.transition)||i.push({command:P.setTransition,args:[e.transition]}),a(t.light,e.light)||i.push({command:P.setLight,args:[e.light]});const n={},o=[];!function(t,e,i,n){let o;for(o in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,o)&&(Object.prototype.hasOwnProperty.call(e,o)||D(o,i,n));for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(Object.prototype.hasOwnProperty.call(t,o)?a(t[o],e[o])||("geojson"===t[o].type&&"geojson"===e[o].type&&q(t,e,o)?i.push({command:P.setGeoJSONSourceData,args:[o,e[o].data]}):Q(o,e,i,n)):K(o,e,i))}(t.sources,e.sources,o,n);const r=[];t.layers&&t.layers.forEach((t=>{n[t.source]?i.push({command:P.removeLayer,args:[t.id]}):r.push(t)})),i=i.concat(o),function(t,e,i){e=e||[];const n=(t=t||[]).map(tt),o=e.map(tt),r=t.reduce(et,{}),s=e.reduce(et,{}),l=n.slice(),c=Object.create(null);let u,d,h,p,m,b,y;for(u=0,d=0;u<n.length;u++)h=n[u],Object.prototype.hasOwnProperty.call(s,h)?d++:(i.push({command:P.removeLayer,args:[h]}),l.splice(l.indexOf(h,d),1));for(u=0,d=0;u<o.length;u++)h=o[o.length-1-u],l[l.length-1-u]!==h&&(Object.prototype.hasOwnProperty.call(r,h)?(i.push({command:P.removeLayer,args:[h]}),l.splice(l.lastIndexOf(h,l.length-d),1)):d++,b=l[l.length-u],i.push({command:P.addLayer,args:[s[h],b]}),l.splice(l.length-u,0,h),c[h]=!0);for(u=0;u<o.length;u++)if(h=o[u],p=r[h],m=s[h],!c[h]&&!a(p,m))if(a(p.source,m.source)&&a(p["source-layer"],m["source-layer"])&&a(p.type,m.type)){for(y in $(p.layout,m.layout,i,h,null,P.setLayoutProperty),$(p.paint,m.paint,i,h,null,P.setPaintProperty),a(p.filter,m.filter)||i.push({command:P.setFilter,args:[h,m.filter]}),a(p.minzoom,m.minzoom)&&a(p.maxzoom,m.maxzoom)||i.push({command:P.setLayerZoomRange,args:[h,m.minzoom,m.maxzoom]}),p)Object.prototype.hasOwnProperty.call(p,y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?$(p[y],m[y],i,h,y.slice(6),P.setPaintProperty):a(p[y],m[y])||i.push({command:P.setLayerProperty,args:[h,y,m[y]]}));for(y in m)Object.prototype.hasOwnProperty.call(m,y)&&!Object.prototype.hasOwnProperty.call(p,y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?$(p[y],m[y],i,h,y.slice(6),P.setPaintProperty):a(p[y],m[y])||i.push({command:P.setLayerProperty,args:[h,y,m[y]]}))}else i.push({command:P.removeLayer,args:[h]}),b=l[l.lastIndexOf(h)+1],i.push({command:P.addLayer,args:[m,b]})}(r,e.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:P.setStyle,args:[e]}]}return i}(this.serialize(),e).filter((t=>!(t.command in $t)));if(0===i.length)return!1;const n=i.filter((t=>!(t.command in qt)));if(n.length>0)throw new Error(`Unimplemented: ${n.map((t=>t.command)).join(", ")}.`);return i.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,i),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,i,n={}){if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,i,null,n))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const a=this.sourceCaches[e]=new H(e,i,this.dispatcher);a.style=this,a.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:a.serialize(),sourceId:e}))),a.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${i}" is using it.`)));const i=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],i.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),i.setEventedParent(null),i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error(`There is no source with this ID=${t}`);const i=this.sourceCaches[t].getSource();if("geojson"!==i.type)throw new Error(`geojsonSource.type is ${i.type}, which is !== 'geojson`);i.setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(e,i,n={}){this._checkLoaded();const a=e.id;if(this.getLayer(a))return void this.fire(new t.ErrorEvent(new Error(`Layer "${a}" already exists on this map.`)));let o;if("custom"===e.type){if(Qt(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(a,e.source),e=t.clone$1(e),e=t.extend(e,{source:a})),this._validate(t.validateStyle.layer,`layers.${a}`,e,{arrayIndex:-1},n))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:a}}),this._serializedLayers[o.id]=o.serialize()}const r=i?this._order.indexOf(i):this._order.length;if(i&&-1===r)this.fire(new t.ErrorEvent(new Error(`Cannot add layer "${a}" before non-existing layer "${i}".`)));else{if(this._order.splice(r,0,a),this._layerOrderChanged=!0,this._layers[a]=o,this._removedLayers[a]&&o.source&&"custom"!==o.type){const t=this._removedLayers[a];delete this._removedLayers[a],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,i){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===i)return;const n=this._order.indexOf(e);this._order.splice(n,1);const a=i?this._order.indexOf(i):this._order.length;i&&-1===a?this.fire(new t.ErrorEvent(new Error(`Cannot move layer "${e}" before non-existing layer "${i}".`))):(this._order.splice(a,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const i=this._layers[e];if(!i)return void this.fire(new t.ErrorEvent(new Error(`Cannot remove non-existing layer "${e}".`)));i.setEventedParent(null);const n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(e,i,n){this._checkLoaded();const a=this.getLayer(e);a?a.minzoom===i&&a.maxzoom===n||(null!=i&&(a.minzoom=i),null!=n&&(a.maxzoom=n),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,i,n={}){this._checkLoaded();const o=this.getLayer(e);if(o){if(!a(o.filter,i))return null==i?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateStyle.filter,`layers.${o.id}.filter`,i,null,n)||(o.filter=t.clone$1(i),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,i,n,o={}){this._checkLoaded();const r=this.getLayer(e);r?a(r.getLayoutProperty(i),n)||(r.setLayoutProperty(i,n,o),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,i){const n=this.getLayer(e);if(n)return n.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,i,n,o={}){this._checkLoaded();const r=this.getLayer(e);r?a(r.getPaintProperty(i),n)||(r.setPaintProperty(i,n,o)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,i){this._checkLoaded();const n=e.source,a=e.sourceLayer,o=this.sourceCaches[n];if(void 0===o)return void this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const r=o.getSource().type;"geojson"===r&&a?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==r||a?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(a,e.id,i)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,i){this._checkLoaded();const n=e.source,a=this.sourceCaches[n];if(void 0===a)return void this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)));const o=a.getSource().type,r="vector"===o?e.sourceLayer:void 0;"vector"!==o||r?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):a.removeFeatureState(r,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const i=e.source,n=e.sourceLayer,a=this.sourceCaches[i];if(void 0!==a)return"vector"!==a.getSource().type||n?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),a.getFeatureState(n,e.id)):void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(t=>t.serialize())),layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,i={},n=[];for(let a=this._order.length-1;a>=0;a--){const o=this._order[a];if(e(o)){i[o]=a;for(const e of t){const t=e[o];if(t)for(const e of t)n.push(e)}}}n.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const a=[];for(let o=this._order.length-1;o>=0;o--){const r=this._order[o];if(e(r))for(let t=n.length-1;t>=0;t--){const e=n[t].feature;if(i[e.layer.id]<o)break;a.push(e),n.pop()}else for(const e of t){const t=e[r];if(t)for(const e of t)a.push(e.feature)}}return a}queryRenderedFeatures(e,i,n){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const a={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of i.layers){const i=this._layers[e];if(!i)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];a[i.source]=!0}}const o=[];i.availableImages=this._availableImages;for(const t in this.sourceCaches)i.layers&&!a[t]||o.push(z(this.sourceCaches[t],this._layers,this._serializedLayers,e,i,n));return this.placement&&o.push(function(t,e,i,n,a,o,r){const s={},l=o.queryRenderedSymbols(n),c=[];for(const t of Object.keys(l).map(Number))c.push(r[t]);c.sort(R);for(const i of c){const n=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,a.filter,a.layers,a.availableImages,t);for(const t in n){const e=s[t]=s[t]||[],a=n[t];a.sort(((t,e)=>{const n=i.featureSortOrder;if(n){const i=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(const t of a)e.push(t)}}for(const e in s)s[e].forEach((n=>{const a=n.feature,o=i[t[e].source].getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=o}));return s}(this._layers,this._serializedLayers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const n=this.sourceCaches[e];return n?function(t,e){const i=t.getRenderableIds().map((e=>t.getTileByID(e))),n=[],a={};for(let t=0;t<i.length;t++){const o=i[t],r=o.tileID.canonical.key;a[r]||(a[r]=!0,o.querySourceFeatures(n,e))}return n}(n,i):[]}addSourceType(t,e,i){return ee.getSourceType(t)?i(new Error(`A source type called "${t}" already exists.`)):(ee.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(e,i={}){this._checkLoaded();const n=this.light.getLight();let o=!1;for(const t in e)if(!a(e[t],n[t])){o=!0;break}if(!o)return;const r={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(r)}_validate(e,i,n,a,o={}){return(!o||!1!==o.validate)&&Qt(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:n,styleSpec:t.spec},a)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const e in this.sourceCaches)this.sourceCaches[e].update(t,this.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(e,i,n,a,o=!1){let r=!1,s=!1;const l={};for(const t of this._order){const i=this._layers[t];if("symbol"!==i.type)continue;if(!l[i.source]){const t=this.sourceCaches[i.source];l[i.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(i,l[i.source],e.center.lng);r=r||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Nt(e,this.terrain,this._order,o,i,n,a,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),r&&this.pauseablePlacement.placement.setStale()),s||r)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();const n=this.sourceCaches[e.source];n&&n.setDependencies(e.tileID.key,e.type,e.icons)}getGlyphs(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)}getResource(e,i,n){return t.makeRequest(i,n)}}ee.getSourceType=function(t){return L[t]},ee.setSourceType=function(t,e){L[t]=e},ee.registerForPluginStateChange=t.registerForPluginStateChange;var ie="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const ne={prelude:ae("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:ae("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ae("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ae("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:ae("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ae("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:ae("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ae("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ae("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ae("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ae("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:ae("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:ae("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:ae("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:ae("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:ae("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:ae("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ae("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ae("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:ae("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:ae("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:ae("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:ae("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ae("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:ae("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:ae("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:ae("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ie),terrainDepth:ae("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ie),terrainCoords:ae("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ie)};function ae(t,e){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=e.match(/attribute ([\w]+) ([\w]+)/g),a=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),r=o?o.concat(a):a,s={};return{fragmentSource:t=t.replace(i,((t,e,i,n,a)=>(s[a]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${a}\nvarying ${i} ${n} ${a};\n#else\nuniform ${i} ${n} u_${a};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${a}\n    ${i} ${n} ${a} = u_${a};\n#endif\n`))),vertexSource:e=e.replace(i,((t,e,i,n,a)=>{const o="float"===n?"vec2":"vec4",r=a.match(/color/)?"color":o;return s[a]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${a}\nuniform lowp float u_${a}_t;\nattribute ${i} ${o} a_${a};\nvarying ${i} ${n} ${a};\n#else\nuniform ${i} ${n} u_${a};\n#endif\n`:"vec4"===r?`\n#ifndef HAS_UNIFORM_u_${a}\n    ${a} = a_${a};\n#else\n    ${i} ${n} ${a} = u_${a};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${a}\n    ${a} = unpack_mix_${r}(a_${a}, u_${a}_t);\n#else\n    ${i} ${n} ${a} = u_${a};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${a}\nuniform lowp float u_${a}_t;\nattribute ${i} ${o} a_${a};\n#else\nuniform ${i} ${n} u_${a};\n#endif\n`:"vec4"===r?`\n#ifndef HAS_UNIFORM_u_${a}\n    ${i} ${n} ${a} = a_${a};\n#else\n    ${i} ${n} ${a} = u_${a};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${a}\n    ${i} ${n} ${a} = unpack_mix_${r}(a_${a}, u_${a}_t);\n#else\n    ${i} ${n} ${a} = u_${a};\n#endif\n`})),staticAttributes:n,staticUniforms:r}}class oe{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,i,n,a,o,r,s,l){this.context=t;let c=this.boundPaintVertexBuffers.length!==n.length;for(let t=0;!c&&t<n.length;t++)this.boundPaintVertexBuffers[t]!==n[t]&&(c=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!c&&this.boundIndexBuffer===a&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===r&&this.boundDynamicVertexBuffer2===s&&this.boundDynamicVertexBuffer3===l?(t.bindVertexArrayOES.set(this.vao),r&&r.bind(),a&&a.dynamicDraw&&a.bind(),s&&s.bind(),l&&l.bind()):this.freshBind(e,i,n,a,o,r,s,l)}freshBind(t,e,i,n,a,o,r,s){let l;const c=t.numAttributes,u=this.context,d=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=a,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=r,this.boundDynamicVertexBuffer3=s;else{l=u.currentNumAttributes||0;for(let t=c;t<l;t++)d.disableVertexAttribArray(t)}e.enableAttributes(d,t);for(const e of i)e.enableAttributes(d,t);o&&o.enableAttributes(d,t),r&&r.enableAttributes(d,t),s&&s.enableAttributes(d,t),e.bind(),e.setVertexAttribPointers(d,t,a);for(const e of i)e.bind(),e.setVertexAttribPointers(d,t,a);o&&(o.bind(),o.setVertexAttribPointers(d,t,a)),n&&n.bind(),r&&(r.bind(),r.setVertexAttribPointers(d,t,a)),s&&(s.bind(),s.setVertexAttribPointers(d,t,a)),u.currentNumAttributes=c}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function re(t){const e=[];for(let i=0;i<t.length;i++){if(null===t[i])continue;const n=t[i].split(" ");e.push(n.pop())}return e}class se{constructor(e,i,n,a,o,r,s){const l=e.gl;this.program=l.createProgram();const c=re(n.staticAttributes),u=a?a.getBinderAttributes():[],d=c.concat(u),h=ne.prelude.staticUniforms?re(ne.prelude.staticUniforms):[],p=n.staticUniforms?re(n.staticUniforms):[],m=a?a.getBinderUniforms():[],b=h.concat(p).concat(m),y=[];for(const t of b)y.indexOf(t)<0&&y.push(t);const f=a?a.defines():[];r&&f.push("#define OVERDRAW_INSPECTOR;"),s&&f.push("#define TERRAIN3D;");const g=f.concat(ne.prelude.fragmentSource,n.fragmentSource).join("\n"),I=f.concat(ne.prelude.vertexSource,n.vertexSource).join("\n"),v=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(v,g),l.compileShader(v),l.attachShader(this.program,v);const x=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(x,I),l.compileShader(x),l.attachShader(this.program,x),this.attributes={};const Z={};this.numAttributes=d.length;for(let t=0;t<this.numAttributes;t++)d[t]&&(l.bindAttribLocation(this.program,t,d[t]),this.attributes[d[t]]=t);l.linkProgram(this.program),l.deleteShader(x),l.deleteShader(v);for(let t=0;t<y.length;t++){const e=y[t];if(e&&!Z[e]){const t=l.getUniformLocation(this.program,e);t&&(Z[e]=t)}}this.fixedUniforms=o(e,Z),this.terrainUniforms=((e,i)=>({u_depth:new t.Uniform1i(e,i.u_depth),u_terrain:new t.Uniform1i(e,i.u_terrain),u_terrain_dim:new t.Uniform1f(e,i.u_terrain_dim),u_terrain_matrix:new t.UniformMatrix4f(e,i.u_terrain_matrix),u_terrain_unpack:new t.Uniform4f(e,i.u_terrain_unpack),u_terrain_offset:new t.Uniform1f(e,i.u_terrain_offset),u_terrain_exaggeration:new t.Uniform1f(e,i.u_terrain_exaggeration)}))(e,Z),this.binderUniforms=a?a.getUniforms(e,Z):[]}draw(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f){const g=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(n),t.setColorMode(a),t.setCullFace(o),s){t.activeTexture.set(g.TEXTURE2),g.bindTexture(g.TEXTURE_2D,s.depthTexture),t.activeTexture.set(g.TEXTURE3),g.bindTexture(g.TEXTURE_2D,s.texture);for(const t in this.terrainUniforms)this.terrainUniforms[t].set(s[t])}for(const t in this.fixedUniforms)this.fixedUniforms[t].set(r[t]);m&&m.setUniforms(t,this.binderUniforms,h,{zoom:p});let I=0;switch(e){case g.LINES:I=2;break;case g.TRIANGLES:I=3;break;case g.LINE_STRIP:I=1}for(const i of d.get()){const n=i.vaos||(i.vaos={});(n[l]||(n[l]=new oe)).bind(t,this,c,m?m.getPaintVertexBuffers():[],u,i.vertexOffset,b,y,f),g.drawElements(e,i.primitiveLength*I,g.UNSIGNED_SHORT,i.primitiveOffset*I*2)}}}function le(t,e,i){const n=1/xt(i,1,e.transform.tileZoom),a=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/a,r=o*(i.tileID.canonical.x+i.tileID.wrap*a),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[r>>16,s>>16],u_pixel_coord_lower:[65535&r,65535&s]}}const ce=(e,i,n,a)=>{const o=i.style.light,r=o.properties.get("position"),s=[r.x,r.y,r.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(l,-i.transform.angle),t.transformMat3(s,s,l);const c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+n,u_opacity:a}},ue=(e,i,n,a,o,r,s)=>t.extend(ce(e,i,n,a),le(r,i,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),de=t=>({u_matrix:t}),he=(e,i,n,a)=>t.extend(de(e),le(n,i,a)),pe=(t,e)=>({u_matrix:t,u_world:e}),me=(e,i,n,a,o)=>t.extend(he(e,i,n,a),{u_world:o}),be=(t,e,i,n)=>{const a=t.transform;let o,r;if("map"===n.paint.get("circle-pitch-alignment")){const t=xt(i,1,a.zoom);o=!0,r=[t,t]}else o=!1,r=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,i,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:r}},ye=(t,e,i)=>{const n=xt(i,1,e.zoom),a=Math.pow(2,e.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[e.pixelsToGLUnits[0]/(n*a),e.pixelsToGLUnits[1]/(n*a)],u_overscale_factor:o}},fe=(t,e,i=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}),ge=t=>({u_matrix:t}),Ie=(t,e,i,n)=>({u_matrix:t,u_extrude_scale:xt(e,1,i),u_intensity:n});function ve(e,i){const n=Math.pow(2,i.canonical.z),a=i.canonical.y;return[new t.MercatorCoordinate(0,a/n).toLngLat().lat,new t.MercatorCoordinate(0,(a+1)/n).toLngLat().lat]}const xe=(t,e,i,n)=>{const a=t.transform;return{u_matrix:Xe(t,e,i,n),u_ratio:1/xt(e,1,a.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Ze=(e,i,n,a,o)=>t.extend(xe(e,i,n,o),{u_image:0,u_image_height:a}),Ge=(t,e,i,n,a)=>{const o=t.transform,r=We(e,o);return{u_matrix:Xe(t,e,i,a),u_texsize:e.imageAtlasTexture.size,u_ratio:1/xt(e,1,o.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[r,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},we=(e,i,n,a,o,r)=>{const s=e.lineAtlas,l=We(i,e.transform),c="round"===n.layout.get("line-cap"),u=s.getDash(a.from,c),d=s.getDash(a.to,c),h=u.width*o.fromScale,p=d.width*o.toScale;return t.extend(xe(e,i,n,r),{u_patternscale_a:[l/h,-u.height/2],u_patternscale_b:[l/p,-d.height/2],u_sdfgamma:s.width/(256*Math.min(h,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:d.y,u_mix:o.t})};function We(t,e){return 1/xt(t,1,e.tileZoom)}function Xe(t,e,i,n){return t.translatePosMatrix(n?n.posMatrix:e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const _e=(t,e,i,n,a)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(r=a.paint.get("raster-saturation"),r>0?1-1/(1.001-r):-r),u_contrast_factor:(o=a.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Ve(a.paint.get("raster-hue-rotate"))};var o,r};function Ve(t){t*=Math.PI/180;const e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}const Se=(t,e,i,n,a,o,r,s,l,c)=>{const u=a.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:r,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:c,u_texture:0}},Be=(e,i,n,a,o,r,s,l,c,u,d)=>{const h=o.transform;return t.extend(Se(e,i,n,a,o,r,s,l,c,u),{u_gamma_scale:a?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:o.pixelRatio,u_is_halo:+d})},Le=(e,i,n,a,o,r,s,l,c,u)=>t.extend(Be(e,i,n,a,o,r,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),Ye=(t,e,i)=>({u_matrix:t,u_opacity:e,u_color:i}),ze=(e,i,n,a,o,r)=>t.extend(function(t,e,i,n){const a=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),{width:r,height:s}=i.imageManager.getPixelSize(),l=Math.pow(2,n.tileID.overscaledZ),c=n.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=c*(n.tileID.canonical.x+n.tileID.wrap*l),d=c*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:a.tl,u_pattern_br_a:a.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[r,s],u_mix:e.t,u_pattern_size_a:a.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/xt(n,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,d>>16],u_pixel_coord_lower:[65535&u,65535&d]}}(a,r,n,o),{u_matrix:e,u_opacity:i}),Re={fillExtrusion:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fillExtrusionPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}),fill:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),fillPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),fillOutline:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}),fillOutlinePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),circle:(e,i)=>({u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),collisionBox:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}),collisionCircle:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}),debug:(e,i)=>({u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}),clippingMask:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmap:(e,i)=>({u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),heatmapTexture:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}),hillshade:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}),hillshadePrepare:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}),line:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}),lineGradient:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image),u_image_height:new t.Uniform1f(e,i.u_image_height)}),linePattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}),lineSDF:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}),raster:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}),symbolIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}),symbolSDF:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),symbolTextAndIcon:(e,i)=>({u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}),background:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}),backgroundPattern:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}),terrain:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texture:new t.Uniform1i(e,i.u_texture)}),terrainDepth:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}),terrainCoords:(e,i)=>({u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texture:new t.Uniform1i(e,i.u_texture),u_terrain_coords_id:new t.Uniform1f(e,i.u_terrain_coords_id)})};class Ce{constructor(t,e,i){this.context=t;const n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Me={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Je{constructor(t,e,i,n){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;const a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let i=0;i<this.attributes.length;i++){const n=e.attributes[this.attributes[i].name];void 0!==n&&t.enableVertexAttribArray(n)}}setVertexAttribPointers(t,e,i){for(let n=0;n<this.attributes.length;n++){const a=this.attributes[n],o=e.attributes[a.name];void 0!==o&&t.vertexAttribPointer(o,a.components,t[Me[a.type]],!1,this.itemSize,a.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class He{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ke extends He{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class je extends He{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Fe extends He{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Ne extends He{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Te extends He{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Ue extends He{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Ee extends He{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Ae extends He{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Oe extends He{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class Pe extends He{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Ke extends He{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class De extends He{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Qe extends He{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class qe extends He{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class $e extends He{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class ti extends He{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class ei extends He{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class ii extends He{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class ni extends He{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class ai extends He{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class oi extends He{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ri extends He{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class si extends He{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class li extends He{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ci extends He{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ui extends He{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class di extends He{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class hi extends He{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class pi extends He{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class mi extends He{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class bi extends He{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class yi extends He{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class fi extends yi{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class gi extends yi{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ii{constructor(t,e,i,n){this.context=t,this.width=e,this.height=i;const a=t.gl,o=this.framebuffer=a.createFramebuffer();if(this.colorAttachment=new fi(t,o),n&&(this.depthAttachment=new gi(t,o)),a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class vi{constructor(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i}}vi.Replace=[1,0],vi.disabled=new vi(vi.Replace,t.Color.transparent,[!1,!1,!1,!1]),vi.unblended=new vi(vi.Replace,t.Color.transparent,[!0,!0,!0,!0]),vi.alphaBlended=new vi([1,771],t.Color.transparent,[!0,!0,!0,!0]);class xi{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ke(this),this.clearDepth=new je(this),this.clearStencil=new Fe(this),this.colorMask=new Ne(this),this.depthMask=new Te(this),this.stencilMask=new Ue(this),this.stencilFunc=new Ee(this),this.stencilOp=new Ae(this),this.stencilTest=new Oe(this),this.depthRange=new Pe(this),this.depthTest=new Ke(this),this.depthFunc=new De(this),this.blend=new Qe(this),this.blendFunc=new qe(this),this.blendColor=new $e(this),this.blendEquation=new ti(this),this.cullFace=new ei(this),this.cullFaceSide=new ii(this),this.frontFace=new ni(this),this.program=new ai(this),this.activeTexture=new oi(this),this.viewport=new ri(this),this.bindFramebuffer=new si(this),this.bindRenderbuffer=new li(this),this.bindTexture=new ci(this),this.bindVertexBuffer=new ui(this),this.bindElementBuffer=new di(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new hi(this),this.pixelStoreUnpack=new pi(this),this.pixelStoreUnpackPremultiplyAlpha=new mi(this),this.pixelStoreUnpackFlipY=new bi(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Ce(this,t,e)}createVertexBuffer(t,e,i){return new Je(this,t,e,i)}createRenderbuffer(t,e,i){const n=this.gl,a=n.createRenderbuffer();return this.bindRenderbuffer.set(a),n.renderbufferStorage(n.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),a}createFramebuffer(t,e,i){return new Ii(this,t,e,i)}clear({color:t,depth:e}){const i=this.gl;let n=0;t&&(n|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(n|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),i.clear(n)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){a(t.blendFunction,vi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Zi{constructor(t,e,i){this.func=t,this.mask=e,this.range=i}}Zi.ReadOnly=!1,Zi.ReadWrite=!0,Zi.disabled=new Zi(519,Zi.ReadOnly,[0,1]);const Gi=7680;class wi{constructor(t,e,i,n,a,o){this.test=t,this.ref=e,this.mask=i,this.fail=n,this.depthFail=a,this.pass=o}}wi.disabled=new wi({func:519,mask:0},0,0,Gi,Gi,Gi);class Wi{constructor(t,e,i){this.enable=t,this.mode=e,this.frontFace=i}}let Xi;function _i(e,i,n,a,o,r,s){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),d=[];let h=0,p=0;for(let m=0;m<a.length;m++){const b=a[m],y=i.getTile(b),f=y.getBucket(n);if(!f)continue;let g=b.posMatrix;0===o[0]&&0===o[1]||(g=e.translatePosMatrix(b.posMatrix,y,o,r));const I=s?f.textCollisionBox:f.iconCollisionBox,v=f.collisionCircleArray;if(v.length>0){const i=t.create(),n=g;t.mul(i,f.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(i,i,f.placementViewportMatrix),d.push({circleArray:v,circleOffset:p,transform:n,invTransform:i,coord:b}),h+=v.length/4,p=h}I&&u.draw(l,c.LINES,Zi.disabled,wi.disabled,e.colorModeForRenderPass(),Wi.disabled,ye(g,e.transform,y),e.style.terrain&&e.style.terrain.getTerrainData(b),n.id,I.layoutVertexBuffer,I.indexBuffer,I.segments,null,e.transform.zoom,null,null,I.collisionVertexBuffer)}if(!s||!d.length)return;const m=e.useProgram("collisionCircle"),b=new t.CollisionCircleLayoutArray;b.resize(4*h),b._trim();let y=0;for(const t of d)for(let e=0;e<t.circleArray.length/4;e++){const i=4*e,n=t.circleArray[i+0],a=t.circleArray[i+1],o=t.circleArray[i+2],r=t.circleArray[i+3];b.emplace(y++,n,a,o,r,0),b.emplace(y++,n,a,o,r,1),b.emplace(y++,n,a,o,r,2),b.emplace(y++,n,a,o,r,3)}(!Xi||Xi.length<2*h)&&(Xi=function(e){const i=2*e,n=new t.QuadTriangleArray;n.resize(i),n._trim();for(let t=0;t<i;t++){const e=6*t;n.uint16[e+0]=4*t+0,n.uint16[e+1]=4*t+1,n.uint16[e+2]=4*t+2,n.uint16[e+3]=4*t+2,n.uint16[e+4]=4*t+3,n.uint16[e+5]=4*t+0}return n}(h));const f=l.createIndexBuffer(Xi,!0),g=l.createVertexBuffer(b,t.collisionCircleLayout.members,!0);for(const i of d){const a={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(I=e.transform).cameraToCenterDistance,u_viewport_size:[I.width,I.height]};m.draw(l,c.TRIANGLES,Zi.disabled,wi.disabled,e.colorModeForRenderPass(),Wi.disabled,a,e.style.terrain&&e.style.terrain.getTerrainData(i.coord),n.id,g,f,t.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,e.transform.zoom,null,null,null)}var I;g.destroy(),f.destroy()}Wi.disabled=new Wi(!1,1029,2305),Wi.backCCW=new Wi(!0,1029,2305);const Vi=t.identity(new Float32Array(16));function Si(e,i,n,a,o,r){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),c=-(s-.5)*i,u=-(l-.5)*n,d=t.evaluateVariableOffset(e,a);return new t.pointGeometry((c/o+d[0])*r,(u/o+d[1])*r)}function Bi(e,i,n,a,o,r,s,l,c,u,d){const h=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,b={};p.clear();for(let m=0;m<h.length;m++){const y=h.get(m),f=e.allowVerticalPlacement&&!y.placedOrientation,g=y.hidden||!y.crossTileID||f?null:a[y.crossTileID];if(g){const a=new t.pointGeometry(y.anchorX,y.anchorY),h=st(a,n?s:r,d),m=lt(o.cameraToCenterDistance,h.signedDistanceFromCamera);let f=t.evaluateSizeForFeature(e.textSizeData,c,y)*m/t.ONE_EM;n&&(f*=e.tilePixelRatio/l);const{width:I,height:v,anchor:x,textOffset:Z,textBoxScale:G}=g,w=Si(x,I,v,Z,G,f),W=n?st(a.add(w),r,d).point:h.point.add(i?w.rotate(-o.angle):w),X=e.allowVerticalPlacement&&y.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<y.numGlyphs;e++)t.addDynamicAttributes(p,W,X);u&&y.associatedIconIndex>=0&&(b[y.associatedIconIndex]={shiftedAnchor:W,angle:X})}else ft(y.numGlyphs,p)}if(u){m.clear();const i=e.icon.placedSymbolArray;for(let e=0;e<i.length;e++){const n=i.get(e);if(n.hidden)ft(n.numGlyphs,m);else{const i=b[e];if(i)for(let e=0;e<n.numGlyphs;e++)t.addDynamicAttributes(m,i.shiftedAnchor,i.angle);else ft(n.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function Li(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Yi(e,i,n,a,o,r,s,l,c,u,d,h){const p=e.context,m=p.gl,b=e.transform,y="map"===l,f="map"===c,g="viewport"!==l&&"point"!==n.layout.get("symbol-placement"),I=y&&!f&&!g,v=!n.layout.get("symbol-sort-key").isConstant();let x=!1;const Z=e.depthModeForSublayer(0,Zi.ReadOnly),G=n.layout.get("text-variable-anchor"),w=[];for(const l of a){const a=i.getTile(l),c=a.getBucket(n);if(!c)continue;const d=o?c.text:c.icon;if(!d||!d.segments.get().length)continue;const h=d.programConfigurations.get(n.id),p=o||c.sdfIcons,Z=o?c.textSizeData:c.iconSizeData,W=f||0!==b.pitch,X=e.useProgram(Li(p,o,c),h),_=t.evaluateSizeForZoom(Z,b.zoom),V=e.style.terrain&&e.style.terrain.getTerrainData(l);let S,B,L,Y,z=[0,0],R=null;if(o){if(B=a.glyphAtlasTexture,L=m.LINEAR,S=a.glyphAtlasTexture.size,c.iconsInText){z=a.imageAtlasTexture.size,R=a.imageAtlasTexture;const t="composite"===Z.kind||"camera"===Z.kind;Y=W||e.options.rotating||e.options.zooming||t?m.LINEAR:m.NEAREST}}else{const t=1!==n.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;B=a.imageAtlasTexture,L=p||e.options.rotating||e.options.zooming||t||W?m.LINEAR:m.NEAREST,S=a.imageAtlasTexture.size}const C=xt(a,1,e.transform.zoom),M=ot(l.posMatrix,f,y,e.transform,C),J=rt(l.posMatrix,f,y,e.transform,C),H=G&&c.hasTextData(),k="none"!==n.layout.get("icon-text-fit")&&H&&c.hasIconData();if(g){const t=e.style.terrain?(t,i)=>e.style.terrain.getElevation(l,t,i):null,i="map"===n.layout.get("text-rotation-alignment");ut(c,l.posMatrix,e,o,M,J,f,u,i,t)}const j=e.translatePosMatrix(l.posMatrix,a,r,s),F=g||o&&G||k?Vi:M,N=e.translatePosMatrix(J,a,r,s,!0),T=p&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let U;U=p?c.iconsInText?Le(Z.kind,_,I,f,e,j,F,N,S,z):Be(Z.kind,_,I,f,e,j,F,N,o,S,!0):Se(Z.kind,_,I,f,e,j,F,N,o,S);const E={program:X,buffers:d,uniformValues:U,atlasTexture:B,atlasTextureIcon:R,atlasInterpolation:L,atlasInterpolationIcon:Y,isSDF:p,hasHalo:T};if(v&&c.canOverlap){x=!0;const e=d.segments.get();for(const i of e)w.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:E,terrainData:V})}else w.push({segments:d.segments,sortKey:0,state:E,terrainData:V})}x&&w.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of w){const i=t.state;if(p.activeTexture.set(m.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,m.CLAMP_TO_EDGE),i.atlasTextureIcon&&(p.activeTexture.set(m.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),i.isSDF){const a=i.uniformValues;i.hasHalo&&(a.u_is_halo=1,zi(i.buffers,t.segments,n,e,i.program,Z,d,h,a,t.terrainData)),a.u_is_halo=0}zi(i.buffers,t.segments,n,e,i.program,Z,d,h,i.uniformValues,t.terrainData)}}function zi(t,e,i,n,a,o,r,s,l,c){const u=n.context;a.draw(u,u.gl.TRIANGLES,o,r,s,Wi.disabled,l,c,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,n.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Ri(t,e,i,n,a,o,r){const s=t.context.gl,l=i.paint.get("fill-pattern"),c=l&&l.constantOr(1),u=i.getCrossfadeParameters();let d,h,p,m,b;r?(h=c&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=s.LINES):(h=c?"fillPattern":"fill",d=s.TRIANGLES);for(const y of n){const n=e.getTile(y);if(c&&!n.patternsLoaded())continue;const f=n.getBucket(i);if(!f)continue;const g=f.programConfigurations.get(i.id),I=t.useProgram(h,g),v=t.style.terrain&&t.style.terrain.getTerrainData(y);c&&(t.context.activeTexture.set(s.TEXTURE0),n.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),g.updatePaintBuffers(u));const x=l.constantOr(null);if(x&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[x.to.toString()],i=t.patternPositions[x.from.toString()];e&&i&&g.setConstantPatternPositions(e,i)}const Z=v?y:null,G=t.translatePosMatrix(Z?Z.posMatrix:y.posMatrix,n,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(r){m=f.indexBuffer2,b=f.segments2;const e=[s.drawingBufferWidth,s.drawingBufferHeight];p="fillOutlinePattern"===h&&c?me(G,t,u,n,e):pe(G,e)}else m=f.indexBuffer,b=f.segments,p=c?he(G,t,u,n):de(G);I.draw(t.context,d,a,t.stencilModeForClipping(y),o,Wi.disabled,p,v,i.id,f.layoutVertexBuffer,m,b,i.paint,t.transform.zoom,g)}}function Ci(t,e,i,n,a,o,r){const s=t.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),d=i.getCrossfadeParameters(),h=i.paint.get("fill-extrusion-opacity");for(const p of n){const n=e.getTile(p),m=n.getBucket(i);if(!m)continue;const b=t.style.terrain&&t.style.terrain.getTerrainData(p),y=m.programConfigurations.get(i.id),f=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",y);u&&(t.context.activeTexture.set(l.TEXTURE0),n.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(d));const g=c.constantOr(null);if(g&&n.imageAtlas){const t=n.imageAtlas,e=t.patternPositions[g.to.toString()],i=t.patternPositions[g.from.toString()];e&&i&&y.setConstantPatternPositions(e,i)}const I=t.translatePosMatrix(p.posMatrix,n,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),v=i.paint.get("fill-extrusion-vertical-gradient"),x=u?ue(I,t,v,h,p,d,n):ce(I,t,v,h);f.draw(s,s.gl.TRIANGLES,a,o,r,Wi.backCCW,x,b,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,t.transform.zoom,y,t.style.terrain&&m.centroidVertexBuffer)}}function Mi(t,e,i,n,a,o,r){const s=t.context,l=s.gl,c=i.fbo;if(!c)return;const u=t.useProgram("hillshade"),d=t.style.terrain&&t.style.terrain.getTerrainData(e);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,a,o,r,Wi.disabled,((t,e,i,n)=>{const a=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),r=i.paint.get("hillshade-accent-color");let s=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:n?n.posMatrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:ve(0,e.tileID),u_light:[i.paint.get("hillshade-exaggeration"),s],u_shadow:a,u_highlight:o,u_accent:r}})(t,i,n,d?e:null),d,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function Ji(e,i,n,a,o,r){const s=e.context,c=s.gl,u=i.dem;if(u&&u.data){const d=u.dim,h=u.stride,p=u.getPixels();if(s.activeTexture.set(c.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(h),i.demTexture){const t=i.demTexture;t.update(p,{premultiply:!1}),t.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else i.demTexture=new l(s,p,c.RGBA,{premultiply:!1}),i.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);s.activeTexture.set(c.TEXTURE0);let m=i.fbo;if(!m){const t=new l(s,{width:d,height:d,data:null},c.RGBA);t.bind(c.LINEAR,c.CLAMP_TO_EDGE),m=i.fbo=s.createFramebuffer(d,d,!0),m.colorAttachment.set(t.texture)}s.bindFramebuffer.set(m.framebuffer),s.viewport.set([0,0,d,d]),e.useProgram("hillshadePrepare").draw(s,c.TRIANGLES,a,o,r,Wi.disabled,((e,i)=>{const n=i.stride,a=t.create();return t.ortho(a,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(a,a,[0,-t.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:i.getUnpackVector()}})(i.tileID,u),null,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Hi(e,i,n,a,o,r){const s=a.paint.get("raster-fade-duration");if(!r&&s>0){const a=t.exported.now(),r=(a-e.timeAdded)/s,l=i?(a-i.timeAdded)/s:-1,c=n.getSource(),u=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!i||Math.abs(i.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),h=d&&e.refreshedUponExpiration?1:t.clamp(d?r:1-l,0,1);return e.refreshedUponExpiration&&r>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}const ki=new t.Color(1,0,0,1),ji=new t.Color(0,1,0,1),Fi=new t.Color(0,0,1,1),Ni=new t.Color(1,0,1,1),Ti=new t.Color(0,1,1,1);function Ui(t,e,i,n){Ai(t,0,e+i/2,t.transform.width,i,n)}function Ei(t,e,i,n){Ai(t,e-i/2,0,i,t.transform.height,n)}function Ai(t,e,i,n,a,o){const r=t.context,s=r.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*t.pixelRatio,i*t.pixelRatio,n*t.pixelRatio,a*t.pixelRatio),r.clear({color:o}),s.disable(s.SCISSOR_TEST)}function Oi(e,i,n){const a=e.context,o=a.gl,r=n.posMatrix,s=e.useProgram("debug"),l=Zi.disabled,c=wi.disabled,u=e.colorModeForRenderPass(),d="$debug",h=e.style.terrain&&e.style.terrain.getTerrainData(n);a.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE);const p=i.getTileByID(n.key).latestRawTileData,m=Math.floor((p&&p.byteLength||0)/1024),b=i.getTile(n).tileSize,y=512/Math.min(b,512)*(n.overscaledZ/e.transform.zoom)*.5;let f=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(f+=` => ${n.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const i=t.debugOverlayCanvas,n=t.context.gl,a=t.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,i.width,i.height),a.shadowColor="white",a.shadowBlur=2,a.lineWidth=1.5,a.strokeStyle="white",a.textBaseline="top",a.font="bold 36px Open Sans, sans-serif",a.fillText(e,5,5),a.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,`${f} ${m}kB`),s.draw(a,o.TRIANGLES,l,c,vi.alphaBlended,Wi.disabled,fe(r,t.Color.transparent,y),null,d,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(a,o.LINE_STRIP,l,c,u,Wi.disabled,fe(r,t.Color.red),h,d,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function Pi(t,e,i){const n=t.context,a=n.gl,o=t.colorModeForRenderPass(),r=new Zi(a.LEQUAL,Zi.ReadWrite,t.depthRangeFor3D),s=t.useProgram("terrain"),l=e.getTerrainMesh(),c=e.getTerrainData(i.tileID);n.bindFramebuffer.set(null),n.viewport.set([0,0,t.width,t.height]),n.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.getRTTFramebuffer().colorAttachment.get());const u=t.transform.calculatePosMatrix(i.tileID.toUnwrapped());s.draw(n,a.TRIANGLES,r,wi.disabled,o,Wi.backCCW,{u_matrix:u,u_texture:0},c,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}function Ki(t,e,i,n){const a=t.context,o=i.tileSize*e.qualityFactor;i.textures[n]||(i.textures[n]=t.getTileTexture(o)||new l(a,{width:o,height:o,data:null},a.gl.RGBA),i.textures[n].bind(a.gl.LINEAR,a.gl.CLAMP_TO_EDGE),0===n&&e.sourceCache.renderHistory.unshift(i.tileID.key));const r=e.getRTTFramebuffer();r.colorAttachment.set(i.textures[n].texture),a.bindFramebuffer.set(r.framebuffer),a.viewport.set([0,0,o,o])}class Di{constructor(t){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=t,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=t.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const t=this.painter.style,e=t.terrain;for(const i in t.sourceCaches){this._coordsDescendingInv[i]={};const n=t.sourceCaches[i].getVisibleCoordinates();for(const t of n){const n=e.sourceCache.getTerrainCoords(t);for(const t in n)this._coordsDescendingInv[i][t]||(this._coordsDescendingInv[i][t]=[]),this._coordsDescendingInv[i][t].push(n[t])}}for(const e of t._order){const i=t._layers[e],n=i.source;if(this._renderToTexture[i.type]&&!this._coordsDescendingInvStr[n]){this._coordsDescendingInvStr[n]={};for(const t in this._coordsDescendingInv[n])this._coordsDescendingInvStr[n][t]=this._coordsDescendingInv[n][t].map((t=>t.key)).sort().join()}}return this._renderableTiles.forEach((t=>{for(const i in this._coordsDescendingInvStr){const n=this._coordsDescendingInvStr[i][t.tileID.key];n&&n!==t.textureCoords[i]&&t.clearTextures(this.painter),e.needsRerender(i,t.tileID)&&t.clearTextures(this.painter)}this._rerender[t.tileID.key]=!t.textures.length})),e.clearRerenderCache(),e.sourceCache.removeOutdated(this.painter),this}renderLayer(e){const i=e.type,n=this.painter,a=n.style._order,o=n.currentLayer,r=o+1===a.length;if(this._renderToTexture[i]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=i,this._stacks[this._stacks.length-1].push(a[o]),!r))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===i||this._renderToTexture[i]&&r){this._prevType=i;const r=this._stacks.length-1,s=this._stacks[r]||[];for(const e of this._renderableTiles){if(Ki(n,n.style.terrain,e,r),this._rerender[e.tileID.key]){n.context.clear({color:t.Color.transparent});for(let t=0;t<s.length;t++){const i=n.style._layers[s[t]],a=i.source?this._coordsDescendingInv[i.source][e.tileID.key]:[e.tileID];n._renderTileClippingMasks(i,a),n.renderLayer(n,n.style.sourceCaches[i.source],i,a),i.source&&(e.textureCoords[i.source]=this._coordsDescendingInvStr[i.source][e.tileID.key])}}Pi(n,n.style.terrain,e)}if("hillshade"===i){this._stacks.push([a[o]]);for(const i of this._renderableTiles){const a=this._coordsDescendingInv[e.source][i.tileID.key];Ki(n,n.style.terrain,i,this._stacks.length-1),n.context.clear({color:t.Color.transparent}),n._renderTileClippingMasks(e,a),n.renderLayer(n,n.style.sourceCaches[e.source],e,a),Pi(n,n.style.terrain,i)}return!0}return this._renderToTexture[i]}return!1}}const Qi={symbol:function(e,i,n,a,o){if("translucent"!==e.renderPass)return;const r=wi.disabled,s=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,i,n,a,o,r,s){const l=i.transform,c="map"===o,u="map"===r;for(const o of e){const e=a.getTile(o),r=e.getBucket(n);if(!r||!r.text||!r.text.segments.get().length)continue;const d=t.evaluateSizeForZoom(r.textSizeData,l.zoom),h=xt(e,1,i.transform.zoom),p=ot(o.posMatrix,u,c,i.transform,h),m="none"!==n.layout.get("icon-text-fit")&&r.hasIconData();if(d){const t=Math.pow(2,l.zoom-e.tileID.overscaledZ);Bi(r,c,u,s,l,p,o.posMatrix,t,d,m,i.style.terrain?(t,e)=>i.style.terrain.getElevation(o,t,e):null)}}}(a,e,n,i,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),o),0!==n.paint.get("icon-opacity").constantOr(1)&&Yi(e,i,n,a,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),r,s),0!==n.paint.get("text-opacity").constantOr(1)&&Yi(e,i,n,a,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),r,s),i.map.showCollisionBoxes&&(_i(e,i,n,a,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),_i(e,i,n,a,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))},circle:function(e,i,n,a){if("translucent"!==e.renderPass)return;const o=n.paint.get("circle-opacity"),r=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=!n.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===r.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,d=e.depthModeForSublayer(0,Zi.ReadOnly),h=wi.disabled,p=e.colorModeForRenderPass(),m=[];for(let o=0;o<a.length;o++){const r=a[o],s=i.getTile(r),c=s.getBucket(n);if(!c)continue;const u=c.programConfigurations.get(n.id),d=e.useProgram("circle",u),h=c.layoutVertexBuffer,p=c.indexBuffer,b=e.style.terrain&&e.style.terrain.getTerrainData(r),y={programConfiguration:u,program:d,layoutVertexBuffer:h,indexBuffer:p,uniformValues:be(e,r,s,n),terrainData:b};if(l){const e=c.segments.get();for(const i of e)m.push({segments:new t.SegmentVector([i]),sortKey:i.sortKey,state:y})}else m.push({segments:c.segments,sortKey:0,state:y})}l&&m.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of m){const{programConfiguration:i,program:a,layoutVertexBuffer:o,indexBuffer:r,uniformValues:s,terrainData:l}=t.state;a.draw(c,u.TRIANGLES,d,h,p,Wi.disabled,s,l,n.id,o,r,t.segments,n.paint,e.transform.zoom,i)}},heatmap:function(e,i,n,a){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,r=o.gl,s=wi.disabled,l=new vi([r.ONE,r.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){const n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let a=i.heatmapFbo;if(a)n.bindTexture(n.TEXTURE_2D,a.colorAttachment.get()),t.bindFramebuffer.set(a.framebuffer);else{const o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),a=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,n){const a=t.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,e.width/4,e.height/4,0,a.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),n.colorAttachment.set(i)}(t,e,o,a)}}(o,e,n),o.clear({color:t.Color.transparent});for(let t=0;t<a.length;t++){const c=a[t];if(i.hasRenderableParent(c))continue;const u=i.getTile(c),d=u.getBucket(n);if(!d)continue;const h=d.programConfigurations.get(n.id),p=e.useProgram("heatmap",h),{zoom:m}=e.transform;p.draw(o,r.TRIANGLES,Zi.disabled,s,l,Wi.disabled,Ie(c.posMatrix,u,m,n.paint.get("heatmap-intensity")),null,n.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,n.paint,e.transform.zoom,h)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){const n=e.context,a=n.gl,o=i.heatmapFbo;if(!o)return;n.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(a.TEXTURE1);let r=i.colorRampTexture;r||(r=i.colorRampTexture=new l(n,i.colorRamp,a.RGBA)),r.bind(a.LINEAR,a.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,a.TRIANGLES,Zi.disabled,wi.disabled,e.colorModeForRenderPass(),Wi.disabled,((e,i,n,a)=>{const o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);const r=e.context.gl;return{u_matrix:o,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(e,i),null,i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}(e,n))},line:function(e,i,n,a){if("translucent"!==e.renderPass)return;const o=n.paint.get("line-opacity"),r=n.paint.get("line-width");if(0===o.constantOr(1)||0===r.constantOr(1))return;const s=e.depthModeForSublayer(0,Zi.ReadOnly),c=e.colorModeForRenderPass(),u=n.paint.get("line-dasharray"),d=n.paint.get("line-pattern"),h=d.constantOr(1),p=n.paint.get("line-gradient"),m=n.getCrossfadeParameters(),b=h?"linePattern":u?"lineSDF":p?"lineGradient":"line",y=e.context,f=y.gl;let g=!0;for(const o of a){const a=i.getTile(o);if(h&&!a.patternsLoaded())continue;const r=a.getBucket(n);if(!r)continue;const I=r.programConfigurations.get(n.id),v=e.context.program.get(),x=e.useProgram(b,I),Z=g||x.program!==v,G=e.style.terrain&&e.style.terrain.getTerrainData(o),w=d.constantOr(null);if(w&&a.imageAtlas){const t=a.imageAtlas,e=t.patternPositions[w.to.toString()],i=t.patternPositions[w.from.toString()];e&&i&&I.setConstantPatternPositions(e,i)}const W=G?o:null,X=h?Ge(e,a,n,m,W):u?we(e,a,n,u,m,W):p?Ze(e,a,n,r.lineClipsArray.length,W):xe(e,a,n,W);if(h)y.activeTexture.set(f.TEXTURE0),a.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),I.updatePaintBuffers(m);else if(u&&(Z||e.lineAtlas.dirty))y.activeTexture.set(f.TEXTURE0),e.lineAtlas.bind(y);else if(p){const a=r.gradients[n.id];let s=a.texture;if(n.gradientVersion!==a.version){let c=256;if(n.stepInterpolant){const n=i.getSource().maxzoom,a=o.canonical.z===n?Math.ceil(1<<e.transform.maxZoom-o.canonical.z):1;c=t.clamp(t.nextPowerOfTwo(r.maxLineLength/t.EXTENT*1024*a),256,y.maxTextureSize)}a.gradient=t.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:c,image:a.gradient||void 0,clips:r.lineClipsArray}),a.texture?a.texture.update(a.gradient):a.texture=new l(y,a.gradient,f.RGBA),a.version=n.gradientVersion,s=a.texture}y.activeTexture.set(f.TEXTURE0),s.bind(n.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE)}x.draw(y,f.TRIANGLES,s,e.stencilModeForClipping(o),c,Wi.disabled,X,G,n.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,n.paint,e.transform.zoom,I,r.layoutVertexBuffer2),g=!1}},fill:function(e,i,n,a){const o=n.paint.get("fill-color"),r=n.paint.get("fill-opacity");if(0===r.constantOr(1))return;const s=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===r.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?Zi.ReadWrite:Zi.ReadOnly);Ri(e,i,n,a,t,s,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){const t=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Zi.ReadOnly);Ri(e,i,n,a,t,s,!0)}},"fill-extrusion":function(t,e,i,n){const a=i.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){const o=new Zi(t.context.gl.LEQUAL,Zi.ReadWrite,t.depthRangeFor3D);if(1!==a||i.paint.get("fill-extrusion-pattern").constantOr(1))Ci(t,e,i,n,o,wi.disabled,vi.disabled),Ci(t,e,i,n,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const a=t.colorModeForRenderPass();Ci(t,e,i,n,o,wi.disabled,a)}}},hillshade:function(t,e,i,n){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const a=t.context,o=t.depthModeForSublayer(0,Zi.ReadOnly),r=t.colorModeForRenderPass(),[s,l]="translucent"===t.renderPass?t.stencilConfigForOverlap(n):[{},n];for(const n of l){const a=e.getTile(n);void 0!==a.needsHillshadePrepare&&a.needsHillshadePrepare&&"offscreen"===t.renderPass?Ji(t,a,i,o,wi.disabled,r):"translucent"===t.renderPass&&Mi(t,n,a,i,o,s[n.overscaledZ],r)}a.viewport.set([0,0,t.width,t.height])},raster:function(t,e,i,n){if("translucent"!==t.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!n.length)return;const a=t.context,o=a.gl,r=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),[c,u]=r instanceof V?[{},n]:t.stencilConfigForOverlap(n),d=u[u.length-1].overscaledZ,h=!t.options.moving;for(const n of u){const u=t.depthModeForSublayer(n.overscaledZ-d,1===i.paint.get("raster-opacity")?Zi.ReadWrite:Zi.ReadOnly,o.LESS),p=e.getTile(n);p.registerFadeDuration(i.paint.get("raster-fade-duration"));const m=e.findLoadedParent(n,0),b=Hi(p,m,e,i,t.transform,t.style.terrain);let y,f;const g="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;a.activeTexture.set(o.TEXTURE0),p.texture.bind(g,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(o.TEXTURE1),m?(m.texture.bind(g,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,m.tileID.overscaledZ-p.tileID.overscaledZ),f=[p.tileID.canonical.x*y%1,p.tileID.canonical.y*y%1]):p.texture.bind(g,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const I=t.style.terrain&&t.style.terrain.getTerrainData(n),v=I?n:null,x=v?v.posMatrix:t.transform.calculatePosMatrix(n.toUnwrapped(),h),Z=_e(x,f||[0,0],y||1,b,i);r instanceof V?s.draw(a,o.TRIANGLES,u,wi.disabled,l,Wi.disabled,Z,I,i.id,r.boundsBuffer,t.quadTriangleIndexBuffer,r.boundsSegments):s.draw(a,o.TRIANGLES,u,c[n.overscaledZ],l,Wi.disabled,Z,I,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i,n){const a=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0===o)return;const r=t.context,s=r.gl,l=t.transform,c=l.tileSize,u=i.paint.get("background-pattern");if(t.isPatternMissing(u))return;const d=!u&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==d)return;const h=wi.disabled,p=t.depthModeForSublayer(0,"opaque"===d?Zi.ReadWrite:Zi.ReadOnly),m=t.colorModeForRenderPass(),b=t.useProgram(u?"backgroundPattern":"background"),y=n||l.coveringTiles({tileSize:c,terrain:t.style.terrain});u&&(r.activeTexture.set(s.TEXTURE0),t.imageManager.bind(t.context));const f=i.getCrossfadeParameters();for(const e of y){const l=n?e.posMatrix:t.transform.calculatePosMatrix(e.toUnwrapped()),d=u?ze(l,o,t,u,{tileID:e,tileSize:c},f):Ye(l,o,a),y=t.style.terrain&&t.style.terrain.getTerrainData(e);b.draw(r,s.TRIANGLES,p,h,m,Wi.disabled,d,y,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},debug:function(t,e,i){for(let n=0;n<i.length;n++)Oi(t,e,i[n])},custom:function(t,e,i){const n=t.context,a=i.implementation;if("offscreen"===t.renderPass){const e=a.prerender;e&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),e.call(a,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(wi.disabled);const e="3d"===a.renderingMode?new Zi(t.context.gl.LEQUAL,Zi.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Zi.ReadOnly);n.setDepthMode(e),a.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}};class qi{constructor(e,i){this.context=new xi(e),this.transform=i,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.create(),renderTime:0},this.setup(),this.numSublayers=H.maxUnderzooming+H.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ot,this.gpuTimers={}}resize(t,e,i){if(this.width=t*i,this.height=e*i,this.pixelRatio=i,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style._order)this.style._layers[t].resize()}setup(){const e=this.context,i=new t.PosArray;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,Pt.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,Pt.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const a=new t.RasterBoundsArray;a.emplaceBack(0,0,0,0),a.emplaceBack(t.EXTENT,0,t.EXTENT,0),a.emplaceBack(0,t.EXTENT,0,t.EXTENT),a.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(a,_.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.PosArray;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Pt.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.LineStripIndexArray;r.emplaceBack(0),r.emplaceBack(1),r.emplaceBack(3),r.emplaceBack(2),r.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(r);const s=new t.TriangleIndexArray;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new l(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);const c=this.context.gl;this.stencilClearMode=new wi({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO)}clearStencil(){const e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const n=t.create();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,Zi.disabled,this.stencilClearMode,vi.disabled,Wi.disabled,ge(n),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;const i=this.context,n=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(vi.disabled),i.setDepthMode(Zi.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of e){const e=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,o=this.style.terrain&&this.style.terrain.getTerrainData(t);a.draw(i,n.TRIANGLES,Zi.disabled,new wi({func:n.ALWAYS,mask:0},e,255,n.KEEP,n.KEEP,n.REPLACE),vi.disabled,Wi.disabled,ge(t.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,e=this.context.gl;return new wi({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){const e=this.context.gl;return new wi({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){const e=this.context.gl,i=t.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),n=i[i.length-1].overscaledZ,a=i[0].overscaledZ-n+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();const t={};for(let i=0;i<a;i++)t[i+n]=new wi({func:e.GEQUAL,mask:255},i+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=a,[t,i]}return[{[n]:wi.disabled},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new vi([e.CONSTANT_COLOR,e.ONE],new t.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?vi.unblended:vi.alphaBlended}depthModeForSublayer(t,e,i){if(!this.opaquePassEnabledForLayer())return Zi.disabled;const n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Zi(i||this.context.gl.LEQUAL,e,[n,n])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,i){this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const n=this.style._order,a=this.style.sourceCaches,o=this.style.terrain&&new Di(this);for(const t in a){const e=a[t];e.used&&e.prepare(this.context)}const r={},s={},l={};for(const t in a){const e=a[t];r[t]=e.getVisibleCoordinates(),s[t]=r[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<n.length;t++)if(this.style._layers[n[t]].is3D()){this.opaquePassCutoff=t;break}if(o){this.opaquePassCutoff=0;const e=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!t.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||e.length)&&(t.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,i){const n=e.context,a=n.gl,o=vi.unblended,r=new Zi(a.LEQUAL,Zi.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");n.bindFramebuffer.set(i.getFramebuffer("depth").framebuffer),n.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),n.clear({color:t.Color.transparent,depth:1});for(const t of l){const l=i.getTerrainData(t.tileID),u=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());c.draw(n,a.TRIANGLES,r,wi.disabled,o,Wi.backCCW,{u_matrix:u},l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height])}(this,this.style.terrain),function(e,i){const n=e.context,a=n.gl,o=vi.unblended,r=new Zi(a.LEQUAL,Zi.ReadWrite,[0,1]),s=i.getTerrainMesh(),l=i.getCoordsTexture(),c=i.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");n.bindFramebuffer.set(i.getFramebuffer("coords").framebuffer),n.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),n.clear({color:t.Color.transparent,depth:1}),i.coordsIndex=[];for(const t of c){const c=i.getTerrainData(t.tileID);n.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,l.texture);const d=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());u.draw(n,a.TRIANGLES,r,wi.disabled,o,Wi.backCCW,{u_matrix:d,u_terrain_coords_id:(255-i.coordsIndex.length)/255,u_texture:0},c,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),i.coordsIndex.push(t.tileID.key)}n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const t of n){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const i=s[e.source];("custom"===e.type||i.length)&&this.renderLayer(this,a[e.source],e,i)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!o)for(this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[n[this.currentLayer]],e=a[t.source],i=r[t.source];this._renderTileClippingMasks(t,i),this.renderLayer(this,e,t,i)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const t=this.style._layers[n[this.currentLayer]],e=a[t.source];if(o&&o.renderLayer(t))continue;const i=("symbol"===t.type?l:s)[t.source];this._renderTileClippingMasks(t,r[t.source]),this.renderLayer(this,e,t,i)}if(this.options.showTileBoundaries){let t,e;Object.values(this.style._layers).forEach((i=>{i.source&&!i.isHidden(this.transform.zoom)&&(i.source!==(e&&e.id)&&(e=this.style.sourceCaches[i.source]),(!t||t.getSource().maxzoom<e.getSource().maxzoom)&&(t=e))})),t&&Qi.debug(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;Ui(t,t.transform.height-(e.top||0),3,ki),Ui(t,e.bottom||0,3,ji),Ei(t,e.left||0,3,Fi),Ei(t,t.transform.width-(e.right||0),3,Ni);const i=t.transform.centerPoint;!function(t,e,i,n){Ai(t,e-1,i-10,2,20,n),Ai(t,e-10,i-1,20,2,n)}(t,i.x,t.transform.height-i.y,Ti)}(this),this.context.setDefault()}renderLayer(t,e,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||(n||[]).length)&&(this.id=i.id,this.gpuTimingStart(i),Qi[i.type](t,e,i,n,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const i in t){const n=t[i],a=this.context.extTimerQuery,o=a.getQueryObjectEXT(n.query,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(n.query),e[i]=o}return e}translatePosMatrix(e,i,n,a,o){if(!n[0]&&!n[1])return e;const r=o?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(r){const t=Math.sin(r),e=Math.cos(r);n=[n[0]*e-n[1]*t,n[0]*t+n[1]*e]}const s=[o?n[0]:xt(i,n[0],this.transform.zoom),o?n[1]:xt(i,n[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i}useProgram(t,e){this.cache=this.cache||{};const i=t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[i]||(this.cache[i]=new se(this.context,t,ne[t],e,Re[t],this._showOverdrawInspector,this.style.terrain)),this.cache[i]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class $i{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,i,n){const a=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=1/(n=t.transformMat4([],n,e))[3]/i*a;return t.mul$1(n,n,[o,o,1/n[3],o])})),r=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const i=t.sub([],o[e[0]],o[e[1]]),n=t.sub([],o[e[2]],o[e[1]]),a=t.normalize([],t.cross([],i,n)),r=-t.dot(a,o[e[1]]);return a.concat(r)}));return new $i(o,r)}}class tn{constructor(e,i){this.min=e,this.max=i,this.center=t.scale$1([],t.add([],this.min,this.max),.5)}quadrant(e){const i=[e%2==0,e<2],n=t.clone$2(this.min),a=t.clone$2(this.max);for(let t=0;t<i.length;t++)n[t]=i[t]?this.min[t]:this.center[t],a[t]=i[t]?this.center[t]:this.max[t];return a[2]=this.max[2],new tn(n,a)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(e){const i=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let a=0;a<e.planes.length;a++){const o=e.planes[a];let r=0;for(let e=0;e<i.length;e++)t.dot$1(o,i[e])>=0&&r++;if(0===r)return 0;r!==i.length&&(n=!1)}if(n)return 2;for(let t=0;t<3;t++){let i=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let a=0;a<e.points.length;a++){const o=e.points[a][t]-this.min[t];i=Math.min(i,o),n=Math.max(n,o)}if(n<0||i>this.max[t]-this.min[t])return 0}return 1}}class en{constructor(t=0,e=0,i=0,n=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=n}interpolate(e,i,n){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,n)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,n)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,n)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,n)),this}getCenter(e,i){const n=t.clamp((this.left+e-this.right)/2,0,e),a=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.pointGeometry(n,a)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new en(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class nn{constructor(e,i,n,a,o){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===o||!!o,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==n?0:n,this._maxPitch=null==a?60:a,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new en,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t._elevation=this._elevation,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const i=-t.wrap(e,-180,180)*Math.PI/180;var n;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=(n=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(t,e,i){var n=e[0],a=e[1],o=e[2],r=e[3],s=Math.sin(i),l=Math.cos(i);t[0]=n*l+o*s,t[1]=a*l+r*s,t[2]=n*-s+o*l,t[3]=a*-s+r*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const n=this.pointCoordinate(new t.pointGeometry(0,0)),a=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),r=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(n.x,a.x,o.x,r.x)),l=Math.floor(Math.max(n.x,a.x,o.x,r.x)),c=1;for(let n=s-c;n<=l+c;n++)0!==n&&i.push(new t.UnwrappedTileID(n,e))}return i}coveringTiles(e){var i,n;let a=this.coveringZoomLevel(e);const o=a;if(void 0!==e.minzoom&&a<e.minzoom)return[];void 0!==e.maxzoom&&a>e.maxzoom&&(a=e.maxzoom);const r=this.pointCoordinate(this.getCameraPoint()),s=t.MercatorCoordinate.fromLngLat(this.center),l=Math.pow(2,a),c=[l*r.x,l*r.y,0],u=[l*s.x,l*s.y,0],d=$i.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a);let h=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(h=a);const p=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,m=t=>({aabb:new tn([t*l,0,0],[(t+1)*l,l,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),b=[],y=[],f=a,g=e.reparseOverscaled?o:a;if(this._renderWorldCopies)for(let t=1;t<=3;t++)b.push(m(-t)),b.push(m(t));for(b.push(m(0));b.length>0;){const a=b.pop(),o=a.x,r=a.y;let s=a.fullyVisible;if(!s){const t=a.aabb.intersects(d);if(0===t)continue;s=2===t}const l=e.terrain?c:u,m=a.aabb.distanceX(l),I=a.aabb.distanceY(l),v=Math.max(Math.abs(m),Math.abs(I)),x=p+(1<<f-a.zoom)-2;if(a.zoom===f||v>x&&a.zoom>=h){const e=f-a.zoom,i=c[0]-.5-(o<<e),n=c[1]-.5-(r<<e);y.push({tileID:new t.OverscaledTileID(a.zoom===f?g:a.zoom,a.wrap,a.zoom,o,r),distanceSq:t.sqrLen([u[0]-.5-o,u[1]-.5-r]),tileDistanceToCamera:Math.sqrt(i*i+n*n)})}else for(let l=0;l<4;l++){const c=(o<<1)+l%2,u=(r<<1)+(l>>1),d=a.zoom+1;let h=a.aabb.quadrant(l);if(e.terrain){const o=new t.OverscaledTileID(d,a.wrap,d,c,u),r=e.terrain.getMinMaxElevation(o),s=null!==(i=r.minElevation)&&void 0!==i?i:this.elevation,l=null!==(n=r.maxElevation)&&void 0!==n?n:this.elevation;h=new tn([h.min[0],h.min[1],s],[h.max[0],h.max[1],l])}b.push({aabb:h,zoom:d,x:c,y:u,wrap:a.wrap,fullyVisible:s})}}return y.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(t){this.freezeElevation||(this.elevation=t?this.getElevation(this._center,t):0)}getElevation(e,i){const n=t.MercatorCoordinate.fromLngLat(e),a=(1<<this.tileZoom)*t.EXTENT,o=n.x*a,r=n.y*a,s=Math.floor(o/t.EXTENT),l=Math.floor(r/t.EXTENT),c=new t.OverscaledTileID(this.tileZoom,0,this.tileZoom,s,l);return i.getElevation(c,o%t.EXTENT,r%t.EXTENT,t.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const i=this.pointLocation(this.centerPoint,e),n=this.getElevation(i,e);if(!(this.elevation-n))return;const a=this.getCameraPosition(),o=t.MercatorCoordinate.fromLngLat(a.lngLat,a.altitude),r=t.MercatorCoordinate.fromLngLat(i,n),s=o.x-r.x,l=o.y-r.y,c=o.z-r.z,u=Math.sqrt(s*s+l*l+c*c),d=this.scaleZoom(this.cameraToCenterDistance/u/this.tileSize);this._elevation=n,this._center=i,this.zoom=d}setLocationAtPoint(e,i){const n=this.pointCoordinate(i),a=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),r=new t.MercatorCoordinate(o.x-(n.x-a.x),o.y-(n.y-a.y));this.center=this.coordinateLocation(r),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,e){return e?this.coordinatePoint(this.locationCoordinate(t),this.getElevation(t,e),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,e){return this.coordinateLocation(this.pointCoordinate(t,e))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(e,i){if(i){const t=i.pointCoordinate(e);if(null!=t)return t}const n=[e.x,e.y,0,1],a=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(a,a,this.pixelMatrixInverse);const o=n[3],r=a[3],s=n[1]/o,l=a[1]/r,c=n[2]/o,u=a[2]/r,d=c===u?0:(0-c)/(u-c);return new t.MercatorCoordinate(t.number(n[0]/o,a[0]/r,d)/this.worldSize,t.number(s,l,d)/this.worldSize)}coordinatePoint(e,i=0,n=this.pixelMatrix){const a=[e.x*this.worldSize,e.y*this.worldSize,i,1];return t.transformMat4(a,a,n),new t.pointGeometry(a[0]/a[3],a[1]/a[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(0,e))).extend(this.pointLocation(new t.pointGeometry(this.width,e))).extend(this.pointLocation(new t.pointGeometry(this.width,this.height))).extend(this.pointLocation(new t.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,i=!1){const n=e.key,a=i?this._alignedPosMatrixCache:this._posMatrixCache;if(a[n])return a[n];const o=e.canonical,r=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*r,o.y*r,0]),t.scale(l,l,[r/t.EXTENT,r/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),a[n]=new Float32Array(l),a[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,i,n,a,o=-90,r=90,s=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const i=this.latRange;o=t.mercatorYfromLat(i[1])*this.worldSize,r=t.mercatorYfromLat(i[0])*this.worldSize,e=r-o<c.y?c.y/(r-o):0}if(this.lngRange){const e=this.lngRange;s=t.wrap(t.mercatorXfromLng(e[0])*this.worldSize,0,this.worldSize),l=t.wrap(t.mercatorXfromLng(e[1])*this.worldSize,0,this.worldSize),l<s&&(l+=this.worldSize),i=l-s<c.x?c.x/(l-s):0}const d=this.point,h=Math.max(i||0,e||0);if(h)return this.center=this.unproject(new t.pointGeometry(i?(l+s)/2:d.x,e?(r+o)/2:d.y)),this.zoom+=this.scaleZoom(h),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const t=d.y,e=c.y/2;t-e<o&&(a=o+e),t+e>r&&(a=r-e)}if(this.lngRange){const e=(s+l)/2,i=t.wrap(d.x,e-this.worldSize/2,e+this.worldSize/2),a=c.x/2;i-a<s&&(n=s+a),i+a>l&&(n=l-a)}void 0===n&&void 0===a||(this.center=this.unproject(new t.pointGeometry(void 0!==n?n:d.x,void 0!==a?a:d.y)).wrap()),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,i=this.point.x,n=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let a=t.identity(new Float64Array(16));t.scale(a,a,[this.width/2,-this.height/2,1]),t.translate(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=t.identity(new Float64Array(16)),t.scale(a,a,[1,-1,1]),t.translate(a,a,[-1,-1,0]),t.scale(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const o=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),s=Math.sin(r)*this.cameraToSeaLevelDistance/Math.sin(t.clamp(Math.PI-o-r,.01,Math.PI-.01)),l=this.getHorizon(),c=2*Math.atan(l/this.cameraToCenterDistance)*(.5+e.y/(2*l)),u=Math.sin(c)*this.cameraToSeaLevelDistance/Math.sin(t.clamp(Math.PI-o-c,.01,Math.PI-.01)),d=Math.cos(Math.PI/2-this._pitch)*s+this.cameraToSeaLevelDistance,h=Math.cos(Math.PI/2-this._pitch)*u+this.cameraToSeaLevelDistance,p=1.01*Math.min(d,h),m=this.height/50;a=new Float64Array(16),t.perspective(a,this._fov,this.width/this.height,m,p),a[8]=2*-e.x/this.width,a[9]=2*e.y/this.height,t.scale(a,a,[1,-1,1]),t.translate(a,a,[0,0,-this.cameraToCenterDistance]),t.rotateX(a,a,this._pitch),t.rotateZ(a,a,this.angle),t.translate(a,a,[-i,-n,0]),this.mercatorMatrix=t.scale([],a,[this.worldSize,this.worldSize,this.worldSize]),t.scale(a,a,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,a),t.translate(a,a,[0,0,-this.elevation]),this.projMatrix=a,this.invProjMatrix=t.invert([],a),this.pixelMatrix3D=t.multiply(new Float64Array(16),this.labelPlaneMatrix,a);const b=this.width%2/2,y=this.height%2/2,f=Math.cos(this.angle),g=Math.sin(this.angle),I=i-Math.round(i)+f*b+g*y,v=n-Math.round(n)+f*y+g*b,x=new Float64Array(a);if(t.translate(x,x,[I>.5?I-1:I,v>.5?v-1:v,0]),this.alignedProjMatrix=x,a=t.invert(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.pointGeometry(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}getCameraQueryGeometry(e){const i=this.getCameraPoint();if(1===e.length)return[e[0],i];{let n=i.x,a=i.y,o=i.x,r=i.y;for(const t of e)n=Math.min(n,t.x),a=Math.min(a,t.y),o=Math.max(o,t.x),r=Math.max(r,t.y);return[new t.pointGeometry(n,a),new t.pointGeometry(o,a),new t.pointGeometry(o,r),new t.pointGeometry(n,r),new t.pointGeometry(n,a)]}}}class an{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t,e){let i=!1,n=null;const a=()=>{n=null,i&&(t(),n=setTimeout(a,300),i=!1)};return()=>(i=!0,n||a(),n)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const e=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,n),o=Math.round(e.lng*a)/a,r=Math.round(e.lat*a)/a,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=t?`/${o}/${r}/${i}`:`${i}/${r}/${o}`,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const t=this._hashName;let e=!1;const i=window.location.hash.slice(1).split("&").map((i=>{const n=i.split("=")[0];return n===t?(e=!0,`${n}=${c}`):i})).filter((t=>t));return e||i.push(`${t}=${c}`),`#${i.join("&")}`}return`#${c}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((t=>t.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}}}const on={linearity:.3,easing:t.bezier(0,0,.3,1)},rn=t.extend({deceleration:2500,maxSpeed:1400},on),sn=t.extend({deceleration:20,maxSpeed:1400},on),ln=t.extend({deceleration:1e3,maxSpeed:360},on),cn=t.extend({deceleration:1e3,maxSpeed:90},on);class un{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,i=t.exported.now();for(;e.length>0&&i-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)i.zoom+=t.zoomDelta||0,i.bearing+=t.bearingDelta||0,i.pitch+=t.pitchDelta||0,t.panDelta&&i.pan._add(t.panDelta),t.around&&(i.around=t.around),t.pinchAround&&(i.pinchAround=t.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(i.pan.mag()){const o=hn(i.pan.mag(),n,t.extend({},rn,e||{}));a.offset=i.pan.mult(o.amount/i.pan.mag()),a.center=this._map.transform.center,dn(a,o)}if(i.zoom){const t=hn(i.zoom,n,sn);a.zoom=this._map.transform.zoom+t.amount,dn(a,t)}if(i.bearing){const e=hn(i.bearing,n,ln);a.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),dn(a,e)}if(i.pitch){const t=hn(i.pitch,n,cn);a.pitch=this._map.transform.pitch+t.amount,dn(a,t)}if(a.zoom||a.bearing){const t=void 0===i.pinchAround?i.around:i.pinchAround;a.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(a,{noMoveStart:!0})}}function dn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function hn(e,i,n){const{maxSpeed:a,linearity:o,deceleration:r}=n,s=t.clamp(e*o/(i/1e3),-a,a),l=Math.abs(s)/(r*o);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}class pn extends t.Event{constructor(e,i,n,a={}){const r=o.mousePos(i.getCanvasContainer(),n),s=i.unproject(r);super(e,t.extend({point:r,lngLat:s,originalEvent:n},a)),this._defaultPrevented=!1,this.target=i}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class mn extends t.Event{constructor(e,i,n){const a="touchend"===e?n.changedTouches:n.touches,r=o.touchPos(i.getCanvasContainer(),a),s=r.map((t=>i.unproject(t))),l=r.reduce(((t,e,i,n)=>t.add(e.div(n.length))),new t.pointGeometry(0,0));super(e,{points:r,point:l,lngLats:s,lngLat:i.unproject(l),originalEvent:n}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class bn extends t.Event{constructor(t,e,i){super(t,{originalEvent:i}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class yn{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new bn(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new pn(t.type,this._map,t))}mouseup(t){this._map.fire(new pn(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new pn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new pn(t.type,this._map,t))}mouseover(t){this._map.fire(new pn(t.type,this._map,t))}mouseout(t){this._map.fire(new pn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new mn(t.type,this._map,t))}touchmove(t){this._map.fire(new mn(t.type,this._map,t))}touchend(t){this._map.fire(new mn(t.type,this._map,t))}touchcancel(t){this._map.fire(new mn(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fn{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new pn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new pn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gn{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(o.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const i=e;if(this._lastPos.equals(i)||!this._box&&i.dist(this._startPos)<this._clickTolerance)return;const n=this._startPos;this._lastPos=i,this._box||(this._box=o.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const a=Math.min(n.x,i.x),r=Math.max(n.x,i.x),s=Math.min(n.y,i.y),l=Math.max(n.y,i.y);o.setTransform(this._box,`translate(${a}px,${s}px)`),this._box.style.width=r-a+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,i){if(!this._active)return;if(0!==e.button)return;const n=this._startPos,a=i;if(this.reset(),o.suppressClick(),n.x!==a.x||n.y!==a.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(n,a,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))}}function In(t,e){if(t.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${t.length}, points ${e.length}`);const i={};for(let n=0;n<t.length;n++)i[t[n].identifier]=e[n];return i}class vn{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,i,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){const i=new t.pointGeometry(0,0);for(const t of e)i._add(t);return i.div(e.length)}(i),this.touches=In(n,i)))}touchmove(t,e,i){if(this.aborted||!this.centroid)return;const n=In(i,e);for(const t in this.touches){const e=this.touches[t],i=n[t];(!i||i.dist(e)>30)&&(this.aborted=!0)}}touchend(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class xn{constructor(t){this.singleTap=new vn(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,i){this.singleTap.touchstart(t,e,i)}touchmove(t,e,i){this.singleTap.touchmove(t,e,i)}touchend(t,e,i){const n=this.singleTap.touchend(t,e,i);if(n){const e=t.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(n)<30;if(e&&i||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class Zn{constructor(){this._zoomIn=new xn({numTouches:1,numTaps:2}),this._zoomOut=new xn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)}touchmove(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)}touchend(t,e,i){const n=this._zoomIn.touchend(t,e,i),a=this._zoomOut.touchend(t,e,i);return n?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(n)},{originalEvent:t})}):a?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(a)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Gn={0:1,2:2};class wn{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const i=o.mouseButton(t);this._correctButton(t,i)&&(this._lastPoint=e,this._eventButton=i)}mousemoveWindow(t,e){const i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){const i=Gn[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)}mouseupWindow(t){this._lastPoint&&o.mouseButton(t)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wn extends wn{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class Xn extends wn{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(t){t.preventDefault()}}class _n extends wn{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(t){t.preventDefault()}}class Vn{constructor(t,e){this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=e,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(t,e,i){return this._calculateTransform(t,e,i)}touchmove(t,e,i){if(this._map._cooperativeGestures&&(2===this._minTouches&&i.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,i.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)}touchend(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,i,n){n.length>0&&(this._active=!0);const a=In(n,i),o=new t.pointGeometry(0,0),r=new t.pointGeometry(0,0);let s=0;for(const t in a){const e=a[t],i=this._touches[t];i&&(o._add(e),r._add(e.sub(i)),s++,a[t]=e)}if(this._touches=a,s<this._minTouches||!r.mag())return;const l=r.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,i){return{}}touchstart(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,i){if(!this._firstTwoTouches)return;t.preventDefault();const[n,a]=this._firstTwoTouches,o=Bn(i,e,n),r=Bn(i,e,a);if(!o||!r)return;const s=this._aroundCenter?null:o.add(r).div(2);return this._move([o,r],s,t)}touchend(t,e,i){if(!this._firstTwoTouches)return;const[n,a]=this._firstTwoTouches,r=Bn(i,e,n),s=Bn(i,e,a);r&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Bn(t,e,i){for(let n=0;n<t.length;n++)if(t[n].identifier===i)return e[n]}function Ln(t,e){return Math.log(t/e)/Math.LN2}class Yn extends Sn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ln(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ln(this._distance,i),pinchAround:e}}}function zn(t,e){return 180*t.angleWith(e)/Math.PI}class Rn extends Sn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zn(this._vector,i),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,i=zn(t,this._startVector);return Math.abs(i)<e}}function Cn(t){return Math.abs(t.y)>Math.abs(t.x)}class Mn extends Sn{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,e,i){super.touchstart(t,e,i),this._currentTouchCount=i.length}_start(t){this._lastPoints=t,Cn(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,i){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const n=t[0].sub(this._lastPoints[0]),a=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(n,a,i.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+a.y)/2*-.5}):void 0}gestureBeginsVertically(t,e,i){if(void 0!==this._valid)return this._valid;const n=t.mag()>=2,a=e.mag()>=2;if(!n&&!a)return;if(!n||!a)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return Cn(t)&&Cn(e)&&o}}const Jn={panStep:100,bearingStep:15,pitchStep:10};class Hn{constructor(){const t=Jn;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,i=0,n=0,a=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),a=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),a=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?n=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,n=0),{cameraAnimation:r=>{const s=r.getZoom();r.easeTo({duration:300,easeId:"keyboardHandler",easing:kn,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:r.getBearing()+i*this._bearingStep,pitch:r.getPitch()+n*this._pitchStep,offset:[-a*this._panStep,-o*this._panStep],center:r.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function kn(t){return t*(2-t)}const jn=4.000244140625;class Fn{constructor(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;e.preventDefault()}let i=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const n=t.exported.now(),a=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==i&&i%jn==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(a*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const i=o.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(i)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>jn?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==i&&(i=1/i);const n="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(n*i))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:e.zoom,n=this._startZoom,a=this._easing;let o,r=!1;if("wheel"===this._type&&n&&a){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),s=a(e);o=t.number(n,i,s),e<1?this._frameId||(this._frameId=!0):r=!0}else o=i,r=!0;return this._active=!0,r&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!r,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let i=t.ease;if(this._prevEase){const e=this._prevEase,n=(t.exported.now()-e.start)/e.duration,a=e.easing(n+.01)-e.easing(n),o=.27/Math.sqrt(a*a+1e-4)*.01,r=Math.sqrt(.0729-o*o);i=t.bezier(o,r,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:i},i}reset(){this._active=!1}}class Nn{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Tn{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Un{constructor(){this._tap=new xn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))}touchmove(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const n=e[0],a=n.y-this._swipePoint.y;return this._swipePoint=n,t.preventDefault(),this._active=!0,{zoomDelta:a/128}}}else this._tap.touchmove(t,e,i)}touchend(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class En{constructor(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class An{constructor(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class On{constructor(t,e,i,n){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Pn=t=>t.zoom||t.drag||t.pitch||t.rotate;class Kn extends t.Event{}function Dn(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Qn{constructor(e,i){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new un(e),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(i),t.bindAll(["handleEvent","handleWindowEvent"],this);const n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,e,i]of this._listeners)o.addEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[t,e,i]of this._listeners)o.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new yn(e,t));const n=e.boxZoom=new gn(e,t);this._add("boxZoom",n);const a=new Zn,o=new Tn;e.doubleClickZoom=new Nn(o,a),this._add("tapZoom",a),this._add("clickZoom",o);const r=new Un;this._add("tapDragZoom",r);const s=e.touchPitch=new Mn(e);this._add("touchPitch",s);const l=new Xn(t),c=new _n(t);e.dragRotate=new An(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Wn(t),d=new Vn(t,e);e.dragPan=new En(i,u,d),this._add("mousePan",u),this._add("touchPan",d,["touchZoom","touchRotate"]);const h=new Rn,p=new Yn;e.touchZoomRotate=new On(i,p,h,r),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);const m=e.scrollZoom=new Fn(e,this);this._add("scrollZoom",m,["mousePan"]);const b=e.keyboard=new Hn;this._add("keyboard",b),this._add("blockableMapEvent",new fn(e));for(const i of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[i]&&e[i].enable(t[i])}_add(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Pn(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,i){for(const n in t)if(n!==i&&(!e||e.indexOf(n)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const i of t)this._el.contains(i.target)&&e.push(i);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const i="renderFrame"===t.type?void 0:t,n={needsRenderFrame:!1},a={},r={},s=t.touches,l=s?this._getMapTouches(s):void 0,c=l?o.touchPos(this._el,l):o.mousePos(this._el,t);for(const{handlerName:o,handler:s,allowed:u}of this._handlers){if(!s.isEnabled())continue;let d;this._blockedByActive(r,u,o)?s.reset():s[e||t.type]&&(d=s[e||t.type](t,c,l),this.mergeHandlerResult(n,a,d,o,i),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||s.isActive())&&(r[o]=s)}const u={};for(const t in this._previousActiveHandlers)r[t]||(u[t]=i);this._previousActiveHandlers=r,(Object.keys(u).length||Dn(n))&&(this._changes.push([n,a,u]),this._triggerRenderFrame()),(Object.keys(r).length||Dn(n))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:d}=n;d&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],d(this._map))}mergeHandlerResult(e,i,n,a,o){if(!n)return;t.extend(e,n);const r={handlerName:a,originalEvent:n.originalEvent||o};void 0!==n.zoomDelta&&(i.zoom=r),void 0!==n.panDelta&&(i.drag=r),void 0!==n.pitchDelta&&(i.pitch=r),void 0!==n.bearingDelta&&(i.rotate=r)}_applyChanges(){const e={},i={},n={};for(const[a,o,r]of this._changes)a.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(a.panDelta)),a.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+a.zoomDelta),a.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+a.bearingDelta),a.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+a.pitchDelta),void 0!==a.around&&(e.around=a.around),void 0!==a.pinchAround&&(e.pinchAround=a.pinchAround),a.noInertia&&(e.noInertia=a.noInertia),t.extend(i,o),t.extend(n,r);this._updateMapTransform(e,i,n),this._changes=[]}_updateMapTransform(e,i,n){const a=this._map,o=a.transform,r=a.style&&a.style.terrain;if(!(Dn(e)||r&&this._drag))return this._fireEvents(i,n,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:d,pinchAround:h}=e;void 0!==h&&(d=h),a._stop(!0),d=d||a.transform.centerPoint;const p=o.pointLocation(s?d.sub(s):d);c&&(o.bearing+=c),u&&(o.pitch+=u),l&&(o.zoom+=l),r?i.drag&&!this._drag?(this._drag={center:o.centerPoint,lngLat:o.pointLocation(d),point:d,handlerName:i.drag.handlerName},a.fire(new t.Event("freezeElevation",{freeze:!0}))):this._drag&&n[this._drag.handlerName]?(a.fire(new t.Event("freezeElevation",{freeze:!1})),this._drag=null):i.drag&&this._drag&&(o.center=o.pointLocation(o.centerPoint.sub(s))):o.setLocationAtPoint(p,d),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(i,n,!0)}_fireEvents(e,i,n){const a=Pn(this._eventsInProgress),o=Pn(e),r={};for(const t in e){const{originalEvent:i}=e[t];this._eventsInProgress[t]||(r[`${t}start`]=i),this._eventsInProgress[t]=e[t]}!a&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in r)this._fireEvent(t,r[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:i}=e[t];this._fireEvent(t,i)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:n}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=i[e]||n,s[`${t}end`]=l)}for(const t in s)this._fireEvent(t,s[t]);const c=Pn(this._eventsInProgress);if(n&&(a||o)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(i(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Kn("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const qn={extend:(e,...i)=>t.extend(e,...i),run(t){t()},logToElement(t,e=!1,i="log"){const n=window.document.getElementById(i);n&&(e&&(n.innerHTML=""),n.innerHTML+=`<br>${t}`)}};class $n extends t.Evented{constructor(e,i){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=i.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,i,n){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),n)}panTo(e,i,n){return this.easeTo(t.extend({center:e},i),n)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,i,n){return this.easeTo(t.extend({zoom:e},i),n)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,i,n){return this.easeTo(t.extend({bearing:e},i),n)}resetNorth(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this}resetNorthPitch(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,i){e=t.LngLatBounds.convert(e);const n=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,i)}_cameraForBoxAndBearing(e,i,n,a){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(a=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding){const t=a.padding;a.padding={top:t,bottom:t,right:t,left:t}}a.padding=t.extend(o,a.padding);const r=this.transform,s=r.padding,l=r.project(t.LngLat.convert(e)),c=r.project(t.LngLat.convert(i)),u=l.rotate(-n*Math.PI/180),d=c.rotate(-n*Math.PI/180),h=new t.pointGeometry(Math.max(u.x,d.x),Math.max(u.y,d.y)),p=new t.pointGeometry(Math.min(u.x,d.x),Math.min(u.y,d.y)),m=h.sub(p),b=(r.width-(s.left+s.right+a.padding.left+a.padding.right))/m.x,y=(r.height-(s.top+s.bottom+a.padding.top+a.padding.bottom))/m.y;if(y<0||b<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const f=Math.min(r.scaleZoom(r.scale*Math.min(b,y)),a.maxZoom),g=t.pointGeometry.convert(a.offset),I=new t.pointGeometry((a.padding.left-a.padding.right)/2,(a.padding.top-a.padding.bottom)/2).rotate(n*Math.PI/180),v=g.add(I).mult(r.scale/r.zoomScale(f));return{center:r.unproject(l.add(c).div(2).sub(v)),zoom:f,bearing:n}}fitBounds(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)}fitScreenCoordinates(e,i,n,a,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(i)),n,a),a,o)}_fitInternal(e,i,n){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,n):this.flyTo(i,n)):this}jumpTo(e,i){this.stop();const n=this.transform;let a=!1,o=!1,r=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(a=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(r=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),a&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),o&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),r&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))}calculateCameraOptionsFromTo(e,i,n,a=0){const o=t.MercatorCoordinate.fromLngLat(e,i),r=t.MercatorCoordinate.fromLngLat(n,a),s=r.x-o.x,l=r.y-o.y,c=r.z-o.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const d=Math.hypot(s,l),h=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let m=180*Math.acos(d/u)/Math.PI;return m=c<0?90-m:90+m,{center:r.toLngLat(),zoom:h,pitch:m,bearing:p}}easeTo(e,i){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const n=this.transform,a=this.getZoom(),o=this.getBearing(),r=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:a,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:r,d="padding"in e?e.padding:n.padding,h=t.pointGeometry.convert(e.offset);let p=n.centerPoint.add(h);const m=n.pointLocation(p),b=t.LngLat.convert(e.center||m);this._normalizeCenter(b);const y=n.project(m),f=n.project(b).sub(y),g=n.zoomScale(l-a);let I,v;e.around&&(I=t.LngLat.convert(e.around),v=n.locationPoint(I));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==a,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==r,this._padding=!n.isPaddingEqual(d),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,x),this._ease((e=>{if(this._zooming&&(n.zoom=t.number(a,l,e)),this._rotating&&(n.bearing=t.number(o,c,e)),this._pitching&&(n.pitch=t.number(r,u,e)),this._padding&&(n.interpolatePadding(s,d,e),p=n.centerPoint.add(h)),I)n.setLocationAtPoint(I,v);else{const t=n.zoomScale(n.zoom-a),i=l>a?Math.min(2,g):Math.max(.5,g),o=Math.pow(i,1-e),r=n.unproject(y.add(f.mult(e*o)).mult(t));n.setLocationAtPoint(n.renderWorldCopies?r.wrap():r,p)}this._fireMoveEvents(i)}),(t=>{this._afterEase(i,t)}),e),this}_prepareEase(e,i,n={}){this._moving=!0,this.fire(new t.Event("freezeElevation",{freeze:!0})),i||n.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId,this.fire(new t.Event("freezeElevation",{freeze:!1}));const n=this._zooming,a=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),a&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,i){if(!e.essential&&t.exported.prefersReducedMotion){const n=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const n=this.transform,a=this.getZoom(),o=this.getBearing(),r=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,n.minZoom,n.maxZoom):a,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:r,d="padding"in e?e.padding:n.padding,h=n.zoomScale(l-a),p=t.pointGeometry.convert(e.offset);let m=n.centerPoint.add(p);const b=n.pointLocation(m),y=t.LngLat.convert(e.center||b);this._normalizeCenter(y);const f=n.project(b),g=n.project(y).sub(f);let I=e.curve;const v=Math.max(n.width,n.height),x=v/h,Z=g.mag();if("minZoom"in e){const i=t.clamp(Math.min(e.minZoom,a,l),n.minZoom,n.maxZoom),o=v/n.zoomScale(i-a);I=Math.sqrt(o/Z*2)}const G=I*I;function w(t){const e=(x*x-v*v+(t?-1:1)*G*G*Z*Z)/(2*(t?x:v)*G*Z);return Math.log(Math.sqrt(e*e+1)-e)}function W(t){return(Math.exp(t)-Math.exp(-t))/2}function X(t){return(Math.exp(t)+Math.exp(-t))/2}const _=w(0);let V=function(t){return X(_)/X(_+I*t)},S=function(t){return v*((X(_)*(W(e=_+I*t)/X(e))-W(_))/G)/Z;var e},B=(w(1)-_)/I;if(Math.abs(Z)<1e-6||!isFinite(B)){if(Math.abs(v-x)<1e-6)return this.easeTo(e,i);const t=x<v?-1:1;B=Math.abs(Math.log(x/v))/I,S=function(){return 0},V=function(e){return Math.exp(t*I*e)}}return e.duration="duration"in e?+e.duration:1e3*B/("screenSpeed"in e?+e.screenSpeed/I:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==r,this._padding=!n.isPaddingEqual(d),this._prepareEase(i,!1),this._ease((e=>{const h=e*B,b=1/V(h);n.zoom=1===e?l:a+n.scaleZoom(b),this._rotating&&(n.bearing=t.number(o,c,e)),this._pitching&&(n.pitch=t.number(r,u,e)),this._padding&&(n.interpolatePadding(s,d,e),m=n.centerPoint.add(p));const I=1===e?y:n.unproject(f.add(g.mult(S(h))).mult(b));n.setLocationAtPoint(n.renderWorldCopies?I.wrap():I,m),this._fireMoveEvents(i)}),(()=>this._afterEase(i)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,i,n){!1===n.animate||0===n.duration?(e(1),i()):(this._easeStart=t.exported.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,i){e=t.wrap(e,-180,180);const n=Math.abs(e-i);return Math.abs(e-360-i)<n&&(e-=360),Math.abs(e+360-i)<n&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}}class ta{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=o.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const i=this._map._getUIString(`AttributionControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style.sourceCaches;for(const i in e){const n=e[i];if(n.used||n.usedForTerrain){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t=t.filter((t=>String(t).trim())),t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,i)=>{for(let n=i+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0}));const i=t.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,t.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ea{constructor(e={}){this.options=e,t.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=o.create("div","maplibregl-ctrl mapboxgl-ctrl");const e=o.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact","mapboxgl-compact"):e.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class ia{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,i=e?this._queue.concat(e):this._queue;for(const e of i)if(e.id===t)return void(e.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const e=this._currentlyRunning=this._queue;this._queue=[];for(const i of e)if(!i.cancelled&&(i.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const na={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},aa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},oa={showCompass:!0,showZoom:!0,visualizePitch:!1};class ra{constructor(e,i,n=!1){this._clickTolerance=10,this.element=i,this.mouseRotate=new Xn({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,n&&(this.mousePitch=new _n({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(i,"mousedown",this.mousedown),o.addEventListener(i,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(i,"touchmove",this.touchmove),o.addEventListener(i,"touchend",this.touchend),o.addEventListener(i,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),o.disableDrag()}move(t,e){const i=this.map,n=this.mouseRotate.mousemoveWindow(t,e);if(n&&n.bearingDelta&&i.setBearing(i.getBearing()+n.bearingDelta),this.mousePitch){const n=this.mousePitch.mousemoveWindow(t,e);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}}off(){const t=this.element;o.removeEventListener(t,"mousedown",this.mousedown),o.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(t,"touchmove",this.touchmove),o.removeEventListener(t,"touchend",this.touchend),o.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(window,"mousemove",this.mousemove),o.removeEventListener(window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),o.mousePos(this.element,e)),o.addEventListener(window,"mousemove",this.mousemove),o.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,o.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function sa(e,i,n){if(e=new t.LngLat(e.lng,e.lat),i){const a=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),r=n.locationPoint(e).distSqr(i);n.locationPoint(a).distSqr(i)<r?e=a:n.locationPoint(o).distSqr(i)<r&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){const t=n.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=n.width&&t.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}const la={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ca(t,e,i){const n=t.classList;for(const t in la)n.remove(`maplibregl-${i}-anchor-${t}`,`mapboxgl-${i}-anchor-${t}`);n.add(`maplibregl-${i}-anchor-${e}`,`mapboxgl-${i}-anchor-${e}`)}class ua extends t.Evented{constructor(e,i){if(super(),(e instanceof HTMLElement||i)&&(e=t.extend({element:e},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const i=o.createNS("http://www.w3.org/2000/svg","svg"),n=41,a=27;i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height",`${n}px`),i.setAttributeNS(null,"width",`${a}px`),i.setAttributeNS(null,"viewBox",`0 0 ${a} ${n}`);const r=o.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=o.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const d=o.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(d);const h=o.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(p);const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");const b=o.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"transform","translate(8.0, 8.0)");const y=o.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");const f=o.createNS("http://www.w3.org/2000/svg","circle");f.setAttributeNS(null,"fill","#FFFFFF"),f.setAttributeNS(null,"cx","5.5"),f.setAttributeNS(null,"cy","5.5"),f.setAttributeNS(null,"r","5.4999962"),b.appendChild(y),b.appendChild(f),s.appendChild(l),s.appendChild(u),s.appendChild(h),s.appendChild(m),s.appendChild(b),i.appendChild(s),i.setAttributeNS(null,"height",n*this._scale+"px"),i.setAttributeNS(null,"width",a*this._scale+"px"),this._element.appendChild(i),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),ca(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,i=13.5,n=Math.sqrt(Math.pow(i,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[n,-1*(e-i+n)],"bottom-right":[-n,-1*(e-i+n)],left:[i,-1*(e-i)],right:[-i,-1*(e-i)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=sa(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),o.setTransform(this._element,`${la[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${i} ${e}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const t=this._map.unproject(this._pos),e=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=t.distanceTo(this._lngLat)>20*e?"0.2":"1.0",this._opacityTimeout=null}),100))}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const da={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ha,pa=0,ma=!1;const ba={maxWidth:100,unit:"metric"};function ya(t,e,i){const n=i&&i.maxWidth||100,a=t._container.clientHeight/2,o=t.unproject([0,a]),r=t.unproject([n,a]),s=o.distanceTo(r);if(i&&"imperial"===i.unit){const i=3.2808*s;i>5280?fa(e,n,i/5280,t._getUIString("ScaleControl.Miles")):fa(e,n,i,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?fa(e,n,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?fa(e,n,s/1e3,t._getUIString("ScaleControl.Kilometers")):fa(e,n,s,t._getUIString("ScaleControl.Meters"))}function fa(t,e,i,n){const a=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(i),e*i}(i);t.style.width=e*(a/i)+"px",t.innerHTML=`${a}&nbsp;${n}`}const ga={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ia=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function va(e){if(e){if("number"==typeof e){const i=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(i,i),"top-right":new t.pointGeometry(-i,i),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(i,-i),"bottom-right":new t.pointGeometry(-i,-i),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const i=t.pointGeometry.convert(e);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return va(new t.pointGeometry(0,0))}const xa={supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends $n{constructor(e){var i;if(t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},aa,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new nn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._interactive=e.interactive,this._cooperativeGestures=e.cooperativeGestures,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new ia,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},na,e.locale),this._clickTolerance=e.clickTolerance,this._pixelRatio=null!==(i=e.pixelRatio)&&void 0!==i?i:devicePixelRatio,this._requestManager=new r(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Qn(this,e),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=e.hash&&new an("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new ta({customAttribution:e.customAttribution})),e.maplibreLogo&&this.addControl(new ea,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.Event("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=e.onAdd(this);this._controls.push(e);const a=this._controlPositions[i];return-1!==i.indexOf("bottom")?a.insertBefore(n,a.firstChild):a.appendChild(n),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}calculateCameraOptionsFromTo(t,e,i,n){return null==n&&this.style.terrain&&(n=this.transform.getElevation(i,this.style.terrain)),super.calculateCameraOptionsFromTo(t,e,i,n)}resize(e){const i=this._containerDimensions(),n=i[0],a=i[1];this._resizeCanvas(n,a,this.getPixelRatio()),this.transform.resize(n,a),this.painter.resize(n,a,this.getPixelRatio());const o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){const[e,i]=this._containerDimensions();this._pixelRatio=t,this._resizeCanvas(e,i,t),this.painter.resize(e,i,t)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint(t.LngLat.convert(e),this.style&&this.style.terrain)}unproject(e){return this.transform.pointLocation(t.pointGeometry.convert(e),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(t,e,i){if("mouseenter"===t||"mouseover"===t){let n=!1;const a=a=>{const o=this.getLayer(e)?this.queryRenderedFeatures(a.point,{layers:[e]}):[];o.length?n||(n=!0,i.call(this,new pn(t,this,a.originalEvent,{features:o}))):n=!1};return{layer:e,listener:i,delegates:{mousemove:a,mouseout:()=>{n=!1}}}}if("mouseleave"===t||"mouseout"===t){let n=!1;const a=a=>{(this.getLayer(e)?this.queryRenderedFeatures(a.point,{layers:[e]}):[]).length?n=!0:n&&(n=!1,i.call(this,new pn(t,this,a.originalEvent)))},o=e=>{n&&(n=!1,i.call(this,new pn(t,this,e.originalEvent)))};return{layer:e,listener:i,delegates:{mousemove:a,mouseout:o}}}{const n=t=>{const n=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,i.call(this,t),delete t.features)};return{layer:e,listener:i,delegates:{[t]:n}}}}on(t,e,i){if(void 0===i)return super.on(t,e);const n=this._createDelegatedListener(t,e,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(n);for(const t in n.delegates)this.on(t,n.delegates[t]);return this}once(t,e,i){if(void 0===i)return super.once(t,e);const n=this._createDelegatedListener(t,e,i);for(const t in n.delegates)this.once(t,n.delegates[t]);return this}off(t,e,i){return void 0===i?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(n=>{const a=this._delegatedListeners[t];for(let t=0;t<a.length;t++){const n=a[t];if(n.layer===e&&n.listener===i){for(const t in n.delegates)this.off(t,n.delegates[t]);return a.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,i){if(!this.style)return[];let n;if(void 0!==i||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.pointGeometry||"number"==typeof e[0])n=[t.pointGeometry.convert(e)];else{const i=t.pointGeometry.convert(e[0]),a=t.pointGeometry.convert(e[1]);n=[i,new t.pointGeometry(a.x,i.y),a,new t.pointGeometry(i.x,a.y),i]}return this.style.queryRenderedFeatures(n,i,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new ee(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ee(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,i){if("string"==typeof e){const n=this._requestManager.transformRequest(e,t.ResourceType.Style);t.getJSON(n,((e,n)=>{e?this.fire(new t.ErrorEvent(e)):n&&this._updateDiff(n,i)}))}else"object"==typeof e&&this._updateDiff(e,i)}_updateDiff(e,i){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(e,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}setTerrain(t){return this.style.setTerrain(t),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const t=this.style&&this.style.sourceCaches;for(const e in t){const i=t[e]._tiles;for(const t in i){const e=i[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,i,{pixelRatio:n=1,sdf:a=!1,stretchX:o,stretchY:r,content:s}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||t.isImageBitmap(i)){const{width:l,height:c,data:u}=t.exported.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:n,stretchX:o,stretchY:r,content:s,sdf:a,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=i,d=i;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:n,stretchX:o,stretchY:r,content:s,sdf:a,version:0,userImage:d}),d.onAdd&&d.onAdd(this,e)}}}updateImage(e,i){const n=this.style.getImage(e);if(!n)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const a=i instanceof HTMLImageElement||t.isImageBitmap(i)?t.exported.getImageData(i):i,{width:o,height:r,data:s}=a;if(void 0===o||void 0===r)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==n.data.width||r!==n.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(i instanceof HTMLImageElement||t.isImageBitmap(i));n.data.replace(s,l),this.style.updateImage(e,n)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)}setFilter(t,e,i={}){return this.style.setFilter(t,e,i),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,i,n={}){return this.style.setPaintProperty(t,e,i,n),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,i,n={}){return this.style.setLayoutProperty(t,e,i,n),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){const t=this._container;t.classList.add("maplibregl-map","mapboxgl-map");const e=this._canvasContainer=o.create("div","maplibregl-canvas-container mapboxgl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=o.create("canvas","maplibregl-canvas mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const i=this._containerDimensions();this._resizeCanvas(i[0],i[1],this.getPixelRatio());const n=this._controlContainer=o.create("div","maplibregl-control-container mapboxgl-control-container",t),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{a[t]=o.create("div",`maplibregl-ctrl-${t} mapboxgl-ctrl-${t}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const t=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=o.create("div","maplibregl-cooperative-gesture-screen",t);let e="Control",i="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(i="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",e="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${i}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",(t=>{t.key===e&&(this._metaPress=!0)})),document.addEventListener("keyup",(t=>{t.key===e&&(this._metaPress=!1)})),this._canvasContainer.addEventListener("wheel",(t=>{this._onCooperativeGesture(t,this._metaPress,1)}),!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(t,e,i){this._canvas.width=i*t,this._canvas.height=i*e,this._canvas.style.width=`${t}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);n?(this.painter=new qi(n,this.transform),t.exported$1.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(t,e,i){return!e&&i<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(e){let i,n=0;const a=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=a.createQueryEXT(),a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),n=t.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=t.exported.now();this.style.zoomHistory.update(e,i);const n=new t.EvaluationParameters(e,{now:i,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=n.crossFadingFactor();1===a&&a===this._crossFadingFactor||(o=!0,this._crossFadingFactor=a),this.style.update(n)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-n;a.endQueryEXT(a.TIME_ELAPSED_EXT,i),setTimeout((()=>{const n=a.getQueryObjectEXT(i,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(i),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:n}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const i=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:i}))}),50)}const r=this._sourcesDirty||this._styleDirty||this._placementDirty;return r||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||r||(this._fullyLoaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),o.remove(this._canvasContainer),o.remove(this._controlContainer),this._cooperativeGestures&&o.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),t.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=t.exported.frame((e=>{t.PerformanceUtils.frame(e),this._frame=null,this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,i){t.setCacheLimits(e,i)}get version(){return"2.4.0"}},NavigationControl:class{constructor(e){this.options=t.extend({},oa,e),this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ra(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const i=o.create("button",t,this._container);return i.type="button",i.addEventListener("click",e),i}_setButtonTitle(t,e){const i=this._map._getUIString(`NavigationControl.${e}`);t.title=i,t.setAttribute("aria-label",i)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},da,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var e;return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==ha?e(ha):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((t=>{ha="denied"!==t.state,e(ha)})):(ha=!!window.navigator.geolocation,e(ha)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pa=0,ma=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,a=this._map.getBearing(),o=t.extend({bearing:a},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(n),o,{geolocateSource:!0})}_updateMarker(e){if(e){const i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),n=e.distanceTo(i),a=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=`${a}px`,this._circleElement.style.height=`${a}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&ma)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ua(this._dotElement),this._circleElement=o.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ua({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pa--,ma=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pa++,pa>1?(t={maximumAge:6e5,timeout:0},ma=!0):(t=this.options.positionOptions,ma=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ta,LogoControl:ea,ScaleControl:class{constructor(e){this.options=t.extend({},ba,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ya(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,ya(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(e){this.options=e,t.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=o.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=o.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),o.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){o.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(ga),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){const e=document.createDocumentFragment(),i=document.createElement("body");let n;for(i.innerHTML=t;n=i.firstChild,n;)e.appendChild(n);return this.setDOMContent(e)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=o.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=sa(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const e=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let i=this.options.anchor;const n=va(this.options.offset);if(!i){const t=this._container.offsetWidth,a=this._container.offsetHeight;let o;o=e.y+n.bottom.y<a?["top"]:e.y>this._map.transform.height-a?["bottom"]:[],e.x<t/2?o.push("left"):e.x>this._map.transform.width-t/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}const a=e.add(n[i]).round();o.setTransform(this._container,`${la[i]} translate(${a.x}px,${a.y}px)`),ca(this._container,i,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(Ia);t&&t.focus()}_onClose(){this.remove()}},Marker:ua,Style:ee,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,AJAXError:t.AJAXError,config:t.config,CanvasSource:B,GeoJSONSource:X,ImageSource:V,RasterDEMTileSource:W,RasterTileSource:G,VectorTileSource:Z,VideoSource:S,prewarm:function(){E().acquire(F)},clearPrewarmedResources:function(){const t=U;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(F),U=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return N.workerCount},set workerCount(t){N.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",addProtocol(e,i){t.config.REGISTERED_PROTOCOLS[e]=i},removeProtocol(e){delete t.config.REGISTERED_PROTOCOLS[e]}};return qn.extend(xa,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics}),xa})),i}()})),kp=t({__proto__:null,default:Hp},[Hp]),jp=".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}to{-o-transform:rotate(1turn)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}to{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}";Du(jp,{});var Fp=Object.freeze({__proto__:null,css:jp,default:jp}),Np=$h((function(t,e){t.exports=function(){var t,e,i;function n(n,a){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",r={};t(r),i=a(r),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=a;else t=a}return n(["exports"],(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=n;function n(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var i,n,a,o,r;for(void 0===e&&(e=1e-6),a=t,r=0;r<8;r++){if(o=this.sampleCurveX(a)-t,Math.abs(o)<e)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a-=o/s}if((a=t)<(i=0))return i;if(a>(n=1))return n;for(;i<n;){if(o=this.sampleCurveX(a),Math.abs(o-t)<e)return a;t>o?i=a:n=a,a=.5*(n-i)+i}return a},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var a=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=i*this.x+e*this.y;return this.x=e*this.x-i*this.y,this.y=n,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),a=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=e.x+i*(this.x-e.x)-n*(this.y-e.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var r="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function l(t,e,n,a){var o=new i(t,e,n,a);return function(t){return o.solve(t)}}var c=l(.25,.1,.25,1);function u(t,e,i){return Math.min(i,Math.max(e,t))}function d(t,e,i){var n=i-e,a=((t-e)%n+n)%n+e;return a===e?i:a}function h(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var n=0,a=e;n<a.length;n+=1){var o=a[n];for(var r in o)t[r]=o[r]}return t}var p=1;function m(){return p++}function b(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function y(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function f(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function g(t,e){return-1!==t.indexOf(e,t.length-e.length)}function I(t,e,i){var n={};for(var a in t)n[a]=e.call(i||this,t[a],a,t);return n}function v(t,e,i){var n={};for(var a in t)e.call(i||this,t[a],a,t)&&(n[a]=t[a]);return n}function x(t){return Array.isArray(t)?t.map(x):"object"==typeof t&&t?I(t,x):t}var Z={};function G(t){Z[t]||("undefined"!=typeof console&&console.warn(t),Z[t]=!0)}function w(t,e,i){return(i.y-t.y)*(e.x-t.x)>(e.y-t.y)*(i.x-t.x)}function W(t){for(var e=0,i=0,n=t.length,a=n-1,o=void 0,r=void 0;i<n;a=i++)e+=((r=t[a]).x-(o=t[i]).x)*(o.y+r.y);return e}function X(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function _(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,i,n,a){var o=n||a;return e[i]=!o||o.toLowerCase(),""})),e["max-age"]){var i=parseInt(e["max-age"],10);isNaN(i)?delete e["max-age"]:e["max-age"]=i}return e}var V=null;function S(t){if(null==V){var e=t.navigator?t.navigator.userAgent:null;V=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return V}function B(t){try{var e=r[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var L,Y,z,R,C=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),M=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,J=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame,H={now:C,frame:function(t){var e=M(t);return{cancel:function(){return J(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var i=r.document.createElement("canvas"),n=i.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return i.width=t.width,i.height=t.height,n.drawImage(t,0,0,t.width,t.height),n.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return L||(L=r.document.createElement("a")),L.href=t,L.href},hardwareConcurrency:r.navigator&&r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(null==Y&&(Y=r.matchMedia("(prefers-reduced-motion: reduce)")),Y.matches)}},k={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},j={supported:!1,testSupport:function(t){!F&&R&&(N?T(t):z=t)}},F=!1,N=!1;function T(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,R),t.isContextLost())return;j.supported=!0}catch(t){}t.deleteTexture(e),F=!0}r.document&&((R=r.document.createElement("img")).onload=function(){z&&T(z),z=null,N=!0},R.onerror=function(){F=!0,z=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var U="01",E=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function A(t){return 0===t.indexOf("mapbox:")}E.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",U,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},E.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},E.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},E.prototype.normalizeStyleURL=function(t,e){if(!A(t))return t;var i=D(t);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},E.prototype.normalizeGlyphsURL=function(t,e){if(!A(t))return t;var i=D(t);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||e)},E.prototype.normalizeSourceURL=function(t,e){if(!A(t))return t;var i=D(t);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||e)},E.prototype.normalizeSpriteURL=function(t,e,i,n){var a=D(t);return A(t)?(a.path="/styles/v1"+a.path+"/sprite"+e+i,this._makeAPIURL(a,this._customAccessToken||n)):(a.path+=""+e+i,Q(a))},E.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!A(t))return t;var i=D(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(H.devicePixelRatio>=2||512===e?"@2x":"")+(j.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var n=this._customAccessToken||function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e].match(/^access_token=(.*)$/);if(n)return n[1]}return null}(i.params)||k.ACCESS_TOKEN;return k.REQUIRE_ACCESS_TOKEN&&n&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,n)},E.prototype.canonicalizeTileURL=function(t,e){var i=D(t);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return t;var n="mapbox://tiles/";n+=i.path.replace("/v4/","");var a=i.params;return e&&(a=a.filter((function(t){return!t.match(/^access_token=/)}))),a.length&&(n+="?"+a.join("&")),n},E.prototype.canonicalizeTileset=function(t,e){for(var i=!!e&&A(e),n=[],a=0,o=t.tiles||[];a<o.length;a+=1){var r=o[a];P(r)?n.push(this.canonicalizeTileURL(r,i)):n.push(r)}return n},E.prototype._makeAPIURL=function(t,e){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",n=D(k.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"http"===t.protocol){var a=t.params.indexOf("secure");a>=0&&t.params.splice(a,1)}if("/"!==n.path&&(t.path=""+n.path+t.path),!k.REQUIRE_ACCESS_TOKEN)return Q(t);if(!(e=e||k.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),Q(t)};var O=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function P(t){return O.test(t)}var K=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function D(t){var e=t.match(K);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Q(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function q(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(r.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var $=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(t){var e,i=q(k.ACCESS_TOKEN);return e=i&&i.u?r.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):k.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},$.prototype.fetchEventData=function(){var t=B("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{var n=r.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var a=r.localStorage.getItem(i);a&&(this.anonId=a)}catch(t){G("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var t=B("localStorage"),e=this.getStorageKey(),i=this.getStorageKey("uuid");if(t)try{r.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){G("Unable to write to LocalStorage")}},$.prototype.processRequests=function(t){},$.prototype.postEvent=function(t,e,i,n){var a=this;if(k.EVENTS_URL){var o=D(k.EVENTS_URL);o.params.push("access_token="+(n||k.ACCESS_TOKEN||""));var r={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:U,userId:this.anonId},s=e?h(r,e):r,l={url:Q(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=xt(l,(function(t){a.pendingRequest=null,i(t),a.saveEventData(),a.processRequests(n)}))}},$.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var tt,et,it=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,i,n){this.skuToken=i,(k.EVENTS_URL&&n||k.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return A(t)||P(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},n)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),n=i.id,a=i.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),y(this.anonId)||(this.anonId=b()),this.postEvent(a,{skuToken:this.skuToken},(function(t){t||n&&(e.success[n]=!0)}),t))}},e}($),nt=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){k.EVENTS_URL&&k.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return A(t)||P(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=q(k.ACCESS_TOKEN),n=i?i.u:k.ACCESS_TOKEN,a=n!==this.eventData.tokenU;y(this.anonId)||(this.anonId=b(),a=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var r=new Date(this.eventData.lastSuccess),s=new Date(o),l=(o-this.eventData.lastSuccess)/864e5;a=a||l>=1||l<-1||r.getDate()!==s.getDate()}else a=!0;if(!a)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=n)}),t)}},e}($)),at=nt.postTurnstileEvent.bind(nt),ot=new it,rt=ot.postMapLoadEvent.bind(ot),st=500,lt=50;function ct(){r.caches&&!tt&&(tt=r.caches.open("mapbox-tiles"))}function ut(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var dt,ht=1/0;function pt(){return null==dt&&(dt=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof r.createImageBitmap),dt}var mt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(mt);var bt,yt,ft=function(t){function e(e,i,n){401===i&&P(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=i,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),gt=X()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===r.location.protocol?r.parent:r).location.href},It=function(t,e){if(!(/^file:/.test(i=t.url)||/^file:/.test(gt())&&!/^\w+:/.test(i))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return function(t,e){var i,n=new r.AbortController,a=new r.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:gt(),signal:n.signal}),o=!1,s=!1,l=(i=a.url).indexOf("sku=")>0&&P(i);"json"===t.type&&a.headers.set("Accept","application/json");var c=function(i,n,o){if(!s){if(i&&"SecurityError"!==i.message&&G(i),n&&o)return u(n);var c=Date.now();r.fetch(a).then((function(i){if(i.ok){var n=l?i.clone():null;return u(i,n,c)}return e(new ft(i.statusText,i.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},u=function(i,n,l){("arrayBuffer"===t.type?i.arrayBuffer():"json"===t.type?i.json():i.text()).then((function(t){s||(n&&l&&function(t,e,i){if(ct(),tt){var n={status:e.status,statusText:e.statusText,headers:new r.Headers};e.headers.forEach((function(t,e){return n.headers.set(e,t)}));var a=_(e.headers.get("Cache-Control")||"");a["no-store"]||(a["max-age"]&&n.headers.set("Expires",new Date(i+1e3*a["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-i<42e4||function(t,e){if(void 0===et)try{new Response(new ReadableStream),et=!0}catch(t){et=!1}et?e(t.body):t.blob().then(e)}(e,(function(e){var i=new r.Response(e,n);ct(),tt&&tt.then((function(e){return e.put(ut(t.url),i)})).catch((function(t){return G(t.message)}))})))}}(a,n,l),o=!0,e(null,t,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(t){s||e(new Error(t.message))}))};return l?function(t,e){if(ct(),!tt)return e(null);var i=ut(t.url);tt.then((function(t){t.match(i).then((function(n){var a=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),i=_(t.headers.get("Cache-Control")||"");return e>Date.now()&&!i["no-cache"]}(n);t.delete(i),a&&t.put(i,n.clone()),e(null,n,a)})).catch(e)})).catch(e)}(a,c):c(null,null),{cancel:function(){s=!0,o||n.abort()}}}(t,e);if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var i;return function(t,e){var i=new r.XMLHttpRequest;for(var n in i.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(i.responseType="arraybuffer"),t.headers)i.setRequestHeader(n,t.headers[n]);return"json"===t.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===t.credentials,i.onerror=function(){e(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var n=i.response;if("json"===t.type)try{n=JSON.parse(i.response)}catch(t){return e(t)}e(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else e(new ft(i.statusText,i.status,t.url))},i.send(t.body),{cancel:function(){return i.abort()}}}(t,e)},vt=function(t,e){return It(h(t,{type:"arrayBuffer"}),e)},xt=function(t,e){return It(h(t,{method:"POST"}),e)},Zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";bt=[],yt=0;var Gt=function(t,e){if(j.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),yt>=k.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return bt.push(i),i}yt++;var n=!1,a=function(){if(!n)for(n=!0,yt--;bt.length&&yt<k.MAX_PARALLEL_IMAGE_REQUESTS;){var t=bt.shift();t.cancelled||(t.cancel=Gt(t.requestParameters,t.callback).cancel)}},o=vt(t,(function(t,i,n,o){a(),t?e(t):i&&(pt()?function(t,e){var i=new r.Blob([new Uint8Array(t)],{type:"image/png"});r.createImageBitmap(i).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(i,e):function(t,e,i,n){var a=new r.Image,o=r.URL;a.onload=function(){e(null,a),o.revokeObjectURL(a.src),a.onload=null,r.requestAnimationFrame((function(){a.src=Zt}))},a.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new r.Blob([new Uint8Array(t)],{type:"image/png"});a.cacheControl=i,a.expires=n,a.src=t.byteLength?o.createObjectURL(s):Zt}(i,e,n,o))}));return{cancel:function(){o.cancel(),a()}}};function wt(t,e,i){i[t]&&-1!==i[t].indexOf(e)||(i[t]=i[t]||[],i[t].push(e))}function Wt(t,e,i){if(i&&i[t]){var n=i[t].indexOf(e);-1!==n&&i[t].splice(n,1)}}var Xt=function(t,e){void 0===e&&(e={}),h(this,e),this.type=t},_t=function(t){function e(e,i){void 0===i&&(i={}),t.call(this,"error",h({error:e},i))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Xt),Vt=function(){};Vt.prototype.on=function(t,e){return this._listeners=this._listeners||{},wt(t,e,this._listeners),this},Vt.prototype.off=function(t,e){return Wt(t,e,this._listeners),Wt(t,e,this._oneTimeListeners),this},Vt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},wt(t,e,this._oneTimeListeners),this},Vt.prototype.fire=function(t,e){"string"==typeof t&&(t=new Xt(t,e||{}));var i=t.type;if(this.listens(i)){t.target=this;for(var n=0,a=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];n<a.length;n+=1)a[n].call(this,t);for(var o=0,r=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];o<r.length;o+=1){var s=r[o];Wt(i,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(h(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof _t&&console.error(t.error);return this},Vt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Vt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var St={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Bt=function(t,e,i,n){this.message=(t?t+": ":"")+i,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function Lt(t){var e=t.value;return e?[new Bt(t.key,e,"constants have been deprecated as of v8")]:[]}function Yt(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var n=0,a=e;n<a.length;n+=1){var o=a[n];for(var r in o)t[r]=o[r]}return t}function zt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Rt(t){if(Array.isArray(t))return t.map(Rt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Rt(t[i]);return e}return zt(t)}var Ct=function(t){function e(e,i){t.call(this,i),this.message=i,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Mt=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,n=e;i<n.length;i+=1){var a=n[i];this.bindings[a[0]]=a[1]}};Mt.prototype.concat=function(t){return new Mt(this,t)},Mt.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Mt.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Jt={kind:"null"},Ht={kind:"number"},kt={kind:"string"},jt={kind:"boolean"},Ft={kind:"color"},Nt={kind:"object"},Tt={kind:"value"},Ut={kind:"collator"},Et={kind:"formatted"},At={kind:"resolvedImage"};function Ot(t,e){return{kind:"array",itemType:t,N:e}}function Pt(t){if("array"===t.kind){var e=Pt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var Kt=[Jt,Ht,kt,jt,Ft,Et,Nt,Ot(Tt),At];function Dt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Dt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,n=Kt;i<n.length;i+=1)if(!Dt(n[i],e))return null}return"Expected "+Pt(t)+" but found "+Pt(e)+" instead."}function Qt(t,e){return e.some((function(e){return e.kind===t.kind}))}function qt(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var $t=e((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function a(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function r(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),d=s.substr(l+1,c-(l+1)).split(","),h=1;switch(u){case"rgba":if(4!==d.length)return null;h=o(d.pop());case"rgb":return 3!==d.length?null:[a(d[0]),a(d[1]),a(d[2]),h];case"hsla":if(4!==d.length)return null;h=o(d.pop());case"hsl":if(3!==d.length)return null;var p=(parseFloat(d[0])%360+360)%360/360,m=o(d[1]),b=o(d[2]),y=b<=.5?b*(m+1):b+m-b*m,f=2*b-y;return[n(255*r(f,y,p+1/3)),n(255*r(f,y,p)),n(255*r(f,y,p-1/3)),h];default:return null}}return null}}catch(t){}})).parseCSSColor,te=function(t,e,i,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=i,this.a=n};te.parse=function(t){if(t){if(t instanceof te)return t;if("string"==typeof t){var e=$t(t);if(e)return new te(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},te.prototype.toString=function(){var t=this.toArray(),e=t[1],i=t[2],n=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(i)+","+n+")"},te.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},te.black=new te(0,0,0,1),te.white=new te(1,1,1,1),te.transparent=new te(0,0,0,0),te.red=new te(1,0,0,1);var ee=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ee.prototype.compare=function(t,e){return this.collator.compare(t,e)},ee.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ie=function(t,e,i,n,a){this.text=t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=a},ne=function(t){this.sections=t};ne.fromString=function(t){return new ne([new ie(t,null,null,null,null)])},ne.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ne.factory=function(t){return t instanceof ne?t:ne.fromString(t)},ne.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ne.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var n=i[e];if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var a={};n.fontStack&&(a["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(a["font-scale"]=n.scale),n.textColor&&(a["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(a)}}return t};var ae=function(t){this.name=t.name,this.available=t.available};function oe(t,e,i,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,i,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function re(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof te)return!0;if(t instanceof ee)return!0;if(t instanceof ne)return!0;if(t instanceof ae)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1)if(!re(i[e]))return!1;return!0}if("object"==typeof t){for(var n in t)if(!re(t[n]))return!1;return!0}return!1}function se(t){if(null===t)return Jt;if("string"==typeof t)return kt;if("boolean"==typeof t)return jt;if("number"==typeof t)return Ht;if(t instanceof te)return Ft;if(t instanceof ee)return Ut;if(t instanceof ne)return Et;if(t instanceof ae)return At;if(Array.isArray(t)){for(var e,i=t.length,n=0,a=t;n<a.length;n+=1){var o=se(a[n]);if(e){if(e===o)continue;e=Tt;break}e=o}return Ot(e||Tt,i)}return Nt}function le(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof te||t instanceof ne||t instanceof ae?t.toString():JSON.stringify(t)}ae.prototype.toString=function(){return this.name},ae.fromString=function(t){return t?new ae({name:t,available:!1}):null},ae.prototype.serialize=function(){return["image",this.name]};var ce=function(t,e){this.type=t,this.value=e};ce.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!re(t[1]))return e.error("invalid value");var i=t[1],n=se(i),a=e.expectedType;return"array"!==n.kind||0!==n.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(n=a),new ce(n,i)},ce.prototype.evaluate=function(){return this.value},ce.prototype.eachChild=function(){},ce.prototype.outputDefined=function(){return!0},ce.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof te?["rgba"].concat(this.value.toArray()):this.value instanceof ne?this.value.serialize():this.value};var ue=function(t){this.name="ExpressionEvaluationError",this.message=t};ue.prototype.toJSON=function(){return this.message};var de={string:kt,number:Ht,boolean:jt,object:Nt},he=function(t,e){this.type=t,this.args=e};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,n=1,a=t[0];if("array"===a){var o,r;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in de)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=de[s],n++}else o=Tt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);r=t[2],n++}i=Ot(o,r)}else i=de[a];for(var l=[];n<t.length;n++){var c=e.parse(t[n],n,Tt);if(!c)return null;l.push(c)}return new he(i,l)},he.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!Dt(this.type,se(i)))return i;if(e===this.args.length-1)throw new ue("Expected value to be of type "+Pt(this.type)+", but found "+Pt(se(i))+" instead.")}return null},he.prototype.eachChild=function(t){this.args.forEach(t)},he.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},he.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var pe=function(t){this.type=Et,this.sections=t};pe.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var n=[],a=!1,o=1;o<=t.length-1;++o){var r=t[o];if(a&&"object"==typeof r&&!Array.isArray(r)){a=!1;var s=null;if(r["font-scale"]&&!(s=e.parse(r["font-scale"],1,Ht)))return null;var l=null;if(r["text-font"]&&!(l=e.parse(r["text-font"],1,Ot(kt))))return null;var c=null;if(r["text-color"]&&!(c=e.parse(r["text-color"],1,Ft)))return null;var u=n[n.length-1];u.scale=s,u.font=l,u.textColor=c}else{var d=e.parse(t[o],1,Tt);if(!d)return null;var h=d.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,n.push({content:d,scale:null,font:null,textColor:null})}}return new pe(n)},pe.prototype.evaluate=function(t){return new ne(this.sections.map((function(e){var i=e.content.evaluate(t);return se(i)===At?new ie("",i,null,null,null):new ie(le(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},pe.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var n=i[e];t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}},pe.prototype.outputDefined=function(){return!1},pe.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var n=i[e];t.push(n.content.serialize());var a={};n.scale&&(a["font-scale"]=n.scale.serialize()),n.font&&(a["text-font"]=n.font.serialize()),n.textColor&&(a["text-color"]=n.textColor.serialize()),t.push(a)}return t};var me=function(t){this.type=At,this.input=t};me.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,kt);return i?new me(i):e.error("No image name provided.")},me.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=ae.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},me.prototype.eachChild=function(t){t(this.input)},me.prototype.outputDefined=function(){return!1},me.prototype.serialize=function(){return["image",this.input.serialize()]};var be={"to-boolean":jt,"to-color":Ft,"to-number":Ht,"to-string":kt},ye=function(t,e){this.type=t,this.args=e};ye.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var n=be[i],a=[],o=1;o<t.length;o++){var r=e.parse(t[o],o,Tt);if(!r)return null;a.push(r)}return new ye(n,a)},ye.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,n=0,a=this.args;n<a.length;n+=1){if(i=null,(e=a[n].evaluate(t))instanceof te)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":oe(e[0],e[1],e[2],e[3])))return new te(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ue(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var r=null,s=0,l=this.args;s<l.length;s+=1){if(null===(r=l[s].evaluate(t)))return 0;var c=Number(r);if(!isNaN(c))return c}throw new ue("Could not convert "+JSON.stringify(r)+" to number.")}return"formatted"===this.type.kind?ne.fromString(le(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ae.fromString(le(this.args[0].evaluate(t))):le(this.args[0].evaluate(t))},ye.prototype.eachChild=function(t){this.args.forEach(t)},ye.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ye.prototype.serialize=function(){if("formatted"===this.type.kind)return new pe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new me(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var fe=["Unknown","Point","LineString","Polygon"],ge=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ge.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ge.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?fe[this.feature.type]:this.feature.type:null},ge.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ge.prototype.canonicalID=function(){return this.canonical},ge.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ge.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=te.parse(t)),e};var Ie=function(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n};Ie.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Ie.prototype.eachChild=function(t){this.args.forEach(t)},Ie.prototype.outputDefined=function(){return!1},Ie.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},Ie.parse=function(t,e){var i,n=t[0],a=Ie.definitions[n];if(!a)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(a)?a[0]:a.type,r=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,s=r.filter((function(e){var i=e[0];return!Array.isArray(i)||i.length===t.length-1})),l=null,c=0,u=s;c<u.length;c+=1){var d=u[c],h=d[0],p=d[1];l=new Fe(e.registry,e.path,null,e.scope);for(var m=[],b=!1,y=1;y<t.length;y++){var f=t[y],g=Array.isArray(h)?h[y-1]:h.type,I=l.parse(f,1+m.length,g);if(!I){b=!0;break}m.push(I)}if(!b)if(Array.isArray(h)&&h.length!==m.length)l.error("Expected "+h.length+" arguments, but found "+m.length+" instead.");else{for(var v=0;v<m.length;v++){var x=Array.isArray(h)?h[v]:h.type,Z=m[v];l.concat(v+1).checkSubtype(x,Z.type)}if(0===l.errors.length)return new Ie(n,o,p,m)}}if(1===s.length)(i=e.errors).push.apply(i,l.errors);else{for(var G=(s.length?s:r).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Pt).join(", ")+")":"("+Pt(e.type)+"...)"})).join(" | "),w=[],W=1;W<t.length;W++){var X=e.parse(t[W],1+w.length);if(!X)return null;w.push(Pt(X.type))}e.error("Expected arguments of type "+G+", but found ("+w.join(", ")+") instead.")}return null},Ie.register=function(t,e){for(var i in Ie.definitions=e,e)t[i]=Ie};var ve=function(t,e,i){this.type=Ut,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function xe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ze(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ge(t,e){var i=(180+t[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,a=Math.pow(2,e.z);return[Math.round(i*a*8192),Math.round(n*a*8192)]}function we(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function We(t,e){for(var i,n,a,o,r,s,l,c=!1,u=0,d=e.length;u<d;u++)for(var h=e[u],p=0,m=h.length;p<m-1;p++){if((o=(i=t)[0]-(n=h[p])[0])*(l=i[1]-(a=h[p+1])[1])-(s=i[0]-a[0])*(r=i[1]-n[1])==0&&o*s<=0&&r*l<=0)return!1;we(t,h[p],h[p+1])&&(c=!c)}return c}function Xe(t,e){for(var i=0;i<e.length;i++)if(We(t,e[i]))return!0;return!1}function _e(t,e,i,n){var a=n[0]-i[0],o=n[1]-i[1],r=(t[0]-i[0])*o-a*(t[1]-i[1]),s=(e[0]-i[0])*o-a*(e[1]-i[1]);return r>0&&s<0||r<0&&s>0}function Ve(t,e,i){for(var n=0,a=i;n<a.length;n+=1)for(var o=a[n],r=0;r<o.length-1;++r)if(0!=(d=[(u=o[r+1])[0]-(c=o[r])[0],u[1]-c[1]])[0]*(h=[(l=e)[0]-(s=t)[0],l[1]-s[1]])[1]-d[1]*h[0]&&_e(s,l,c,u)&&_e(c,u,s,l))return!0;var s,l,c,u,d,h;return!1}function Se(t,e){for(var i=0;i<t.length;++i)if(!We(t[i],e))return!1;for(var n=0;n<t.length-1;++n)if(Ve(t[n],t[n+1],e))return!1;return!0}function Be(t,e){for(var i=0;i<e.length;i++)if(Se(t,e[i]))return!0;return!1}function Le(t,e,i){for(var n=[],a=0;a<t.length;a++){for(var o=[],r=0;r<t[a].length;r++){var s=Ge(t[a][r],i);xe(e,s),o.push(s)}n.push(o)}return n}function Ye(t,e,i){for(var n=[],a=0;a<t.length;a++){var o=Le(t[a],e,i);n.push(o)}return n}function ze(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){var a=.5*n,o=t[0]-i[0]>a?-n:i[0]-t[0]>a?n:0;0===o&&(o=t[0]-i[2]>a?-n:i[2]-t[0]>a?n:0),t[0]+=o}xe(e,t)}function Re(t,e,i,n){for(var a=8192*Math.pow(2,n.z),o=[8192*n.x,8192*n.y],r=[],s=0,l=t;s<l.length;s+=1)for(var c=0,u=l[s];c<u.length;c+=1){var d=u[c],h=[d.x+o[0],d.y+o[1]];ze(h,e,i,a),r.push(h)}return r}function Ce(t,e,i,n){for(var a,o=8192*Math.pow(2,n.z),r=[8192*n.x,8192*n.y],s=[],l=0,c=t;l<c.length;l+=1){for(var u=[],d=0,h=c[l];d<h.length;d+=1){var p=h[d],m=[p.x+r[0],p.y+r[1]];xe(e,m),u.push(m)}s.push(u)}if(e[2]-e[0]<=o/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(var b=0,y=s;b<y.length;b+=1)for(var f=0,g=y[b];f<g.length;f+=1)ze(g[f],e,i,o)}return s}ve.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,jt);if(!n)return null;var a=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,jt);if(!a)return null;var o=null;return i.locale&&!(o=e.parse(i.locale,1,kt))?null:new ve(n,a,o)},ve.prototype.evaluate=function(t){return new ee(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},ve.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},ve.prototype.outputDefined=function(){return!1},ve.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Me=function(t,e){this.type=jt,this.geojson=t,this.geometries=e};function Je(t){if(t instanceof Ie){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Me)return!1;var e=!0;return t.eachChild((function(t){e&&!Je(t)&&(e=!1)})),e}function He(t){if(t instanceof Ie&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!He(t)&&(e=!1)})),e}function ke(t,e){if(t instanceof Ie&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!ke(t,e)&&(i=!1)})),i}Me.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(re(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var n=0;n<i.features.length;++n){var a=i.features[n].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new Me(i,i.features[n].geometry)}else if("Feature"===i.type){var o=i.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Me(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Me(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Me.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if("Polygon"===e.type){var o=Le(e.coordinates,n,a),r=Re(t.geometry(),i,n,a);if(!Ze(i,n))return!1;for(var s=0,l=r;s<l.length;s+=1)if(!We(l[s],o))return!1}if("MultiPolygon"===e.type){var c=Ye(e.coordinates,n,a),u=Re(t.geometry(),i,n,a);if(!Ze(i,n))return!1;for(var d=0,h=u;d<h.length;d+=1)if(!Xe(h[d],c))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],a=t.canonicalID();if("Polygon"===e.type){var o=Le(e.coordinates,n,a),r=Ce(t.geometry(),i,n,a);if(!Ze(i,n))return!1;for(var s=0,l=r;s<l.length;s+=1)if(!Se(l[s],o))return!1}if("MultiPolygon"===e.type){var c=Ye(e.coordinates,n,a),u=Ce(t.geometry(),i,n,a);if(!Ze(i,n))return!1;for(var d=0,h=u;d<h.length;d+=1)if(!Be(h[d],c))return!1}return!0}(t,this.geometries)}return!1},Me.prototype.eachChild=function(){},Me.prototype.outputDefined=function(){return!0},Me.prototype.serialize=function(){return["within",this.geojson]};var je=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};je.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new je(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},je.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},je.prototype.eachChild=function(){},je.prototype.outputDefined=function(){return!1},je.prototype.serialize=function(){return["var",this.name]};var Fe=function(t,e,i,n,a){void 0===e&&(e=[]),void 0===n&&(n=new Mt),void 0===a&&(a=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=n,this.errors=a,this.expectedType=i};function Ne(t,e){for(var i,n=t.length-1,a=0,o=n,r=0;a<=o;)if((i=t[r=Math.floor((a+o)/2)])<=e){if(r===n||e<t[r+1])return r;a=r+1}else{if(!(i>e))throw new ue("Input is not a number.");o=r-1}return 0}Fe.prototype.parse=function(t,e,i,n,a){return void 0===a&&(a={}),e?this.concat(e,i,n)._parse(t,a):this._parse(t,a)},Fe.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new he(e,[t]):"coerce"===i?new ye(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var a=this.registry[n];if(a){var o=a.parse(t,this);if(!o)return null;if(this.expectedType){var r=this.expectedType,s=o.type;if("string"!==r.kind&&"number"!==r.kind&&"boolean"!==r.kind&&"object"!==r.kind&&"array"!==r.kind||"value"!==s.kind)if("color"!==r.kind&&"formatted"!==r.kind&&"resolvedImage"!==r.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(r,s))return null}else o=i(o,r,e.typeAnnotation||"coerce");else o=i(o,r,e.typeAnnotation||"assert")}if(!(o instanceof ce)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof je)return t(e.boundExpression);if(e instanceof Ie&&"error"===e.name)return!1;if(e instanceof ve)return!1;if(e instanceof Me)return!1;var i=e instanceof ye||e instanceof he,n=!0;return e.eachChild((function(e){n=i?n&&t(e):n&&e instanceof ce})),!!n&&Je(e)&&ke(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new ge;try{o=new ce(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Fe.prototype.concat=function(t,e,i){var n="number"==typeof t?this.path.concat(t):this.path,a=i?this.scope.concat(i):this.scope;return new Fe(this.registry,n,e||null,a,this.errors)},Fe.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Ct(n,t))},Fe.prototype.checkSubtype=function(t,e){var i=Dt(t,e);return i&&this.error(i),i};var Te=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,a=i;n<a.length;n+=1){var o=a[n],r=o[1];this.labels.push(o[0]),this.outputs.push(r)}};function Ue(t,e,i){return t*(1-i)+e*i}Te.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,Ht);if(!i)return null;var n=[],a=null;e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(var o=1;o<t.length;o+=2){var r=1===o?-1/0:t[o],s=t[o+1],l=o,c=o+1;if("number"!=typeof r)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(n.length&&n[n.length-1][0]>=r)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var u=e.parse(s,c,a);if(!u)return null;a=a||u.type,n.push([r,u])}return new Te(a,i,n)},Te.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);var a=e.length;return n>=e[a-1]?i[a-1].evaluate(t):i[Ne(e,n)].evaluate(t)},Te.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},Te.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Te.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Ee=Object.freeze({__proto__:null,number:Ue,color:function(t,e,i){return new te(Ue(t.r,e.r,i),Ue(t.g,e.g,i),Ue(t.b,e.b,i),Ue(t.a,e.a,i))},array:function(t,e,i){return t.map((function(t,n){return Ue(t,e[n],i)}))}}),Ae=6/29*3*(6/29),Oe=Math.PI/180,Pe=180/Math.PI;function Ke(t){return t>.008856451679035631?Math.pow(t,1/3):t/Ae+4/29}function De(t){return t>6/29?t*t*t:Ae*(t-4/29)}function Qe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function qe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function $e(t){var e=qe(t.r),i=qe(t.g),n=qe(t.b),a=Ke((.4124564*e+.3575761*i+.1804375*n)/.95047),o=Ke((.2126729*e+.7151522*i+.072175*n)/1);return{l:116*o-16,a:500*(a-o),b:200*(o-Ke((.0193339*e+.119192*i+.9503041*n)/1.08883)),alpha:t.a}}function ti(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=1*De(e),i=.95047*De(i),n=1.08883*De(n),new te(Qe(3.2404542*i-1.5371385*e-.4985314*n),Qe(-.969266*i+1.8760108*e+.041556*n),Qe(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function ei(t,e,i){var n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}var ii={forward:$e,reverse:ti,interpolate:function(t,e,i){return{l:Ue(t.l,e.l,i),a:Ue(t.a,e.a,i),b:Ue(t.b,e.b,i),alpha:Ue(t.alpha,e.alpha,i)}}},ni={forward:function(t){var e=$e(t),i=e.l,n=e.a,a=e.b,o=Math.atan2(a,n)*Pe;return{h:o<0?o+360:o,c:Math.sqrt(n*n+a*a),l:i,alpha:t.a}},reverse:function(t){var e=t.h*Oe,i=t.c;return ti({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:ei(t.h,e.h,i),c:Ue(t.c,e.c,i),l:Ue(t.l,e.l,i),alpha:Ue(t.alpha,e.alpha,i)}}},ai=Object.freeze({__proto__:null,lab:ii,hcl:ni}),oi=function(t,e,i,n,a){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(var o=0,r=a;o<r.length;o+=1){var s=r[o],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function ri(t,e,i,n){var a=n-i,o=t-i;return 0===a?0:1===e?o/a:(Math.pow(e,o)-1)/(Math.pow(e,a)-1)}oi.interpolationFactor=function(t,e,n,a){var o=0;if("exponential"===t.name)o=ri(e,t.base,n,a);else if("linear"===t.name)o=ri(e,1,n,a);else if("cubic-bezier"===t.name){var r=t.controlPoints;o=new i(r[0],r[1],r[2],r[3]).solve(ri(e,1,n,a))}return o},oi.parse=function(t,e){var i=t[0],n=t[1],a=t[2],o=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var r=n[1];if("number"!=typeof r)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:r}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(a=e.parse(a,2,Ht)))return null;var l=[],c=null;"interpolate-hcl"===i||"interpolate-lab"===i?c=Ft:e.expectedType&&"value"!==e.expectedType.kind&&(c=e.expectedType);for(var u=0;u<o.length;u+=2){var d=o[u],h=o[u+1],p=u+3,m=u+4;if("number"!=typeof d)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(l.length&&l[l.length-1][0]>=d)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var b=e.parse(h,m,c);if(!b)return null;c=c||b.type,l.push([d,b])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new oi(c,i,n,a,l):e.error("Type "+Pt(c)+" is not interpolatable.")},oi.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);var a=e.length;if(n>=e[a-1])return i[a-1].evaluate(t);var o=Ne(e,n),r=oi.interpolationFactor(this.interpolation,n,e[o],e[o+1]),s=i[o].evaluate(t),l=i[o+1].evaluate(t);return"interpolate"===this.operator?Ee[this.type.kind.toLowerCase()](s,l,r):"interpolate-hcl"===this.operator?ni.reverse(ni.interpolate(ni.forward(s),ni.forward(l),r)):ii.reverse(ii.interpolate(ii.forward(s),ii.forward(l),r))},oi.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},oi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},oi.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var si=function(t,e){this.type=t,this.args=e};si.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,n=e.expectedType;n&&"value"!==n.kind&&(i=n);for(var a=[],o=0,r=t.slice(1);o<r.length;o+=1){var s=e.parse(r[o],1+a.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,a.push(s)}var l=n&&a.some((function(t){return Dt(n,t.type)}));return new si(l?Tt:i,a)},si.prototype.evaluate=function(t){for(var e,i=null,n=0,a=0,o=this.args;a<o.length&&(n++,(i=o[a].evaluate(t))&&i instanceof ae&&!i.available&&(e||(e=i.name),i=null,n===this.args.length&&(i=e)),null===i);a+=1);return i},si.prototype.eachChild=function(t){this.args.forEach(t)},si.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},si.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var li=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};li.prototype.evaluate=function(t){return this.result.evaluate(t)},li.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},li.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],n=1;n<t.length-1;n+=2){var a=t[n];if("string"!=typeof a)return e.error("Expected string, but found "+typeof a+" instead.",n);if(/[^a-zA-Z0-9_]/.test(a))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var o=e.parse(t[n+1],n+1);if(!o)return null;i.push([a,o])}var r=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return r?new li(i,r):null},li.prototype.outputDefined=function(){return this.result.outputDefined()},li.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var n=i[e];t.push(n[0],n[1].serialize())}return t.push(this.result.serialize()),t};var ci=function(t,e,i){this.type=t,this.index=e,this.input=i};ci.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Ht),n=e.parse(t[2],2,Ot(e.expectedType||Tt));return i&&n?new ci(n.type.itemType,i,n):null},ci.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new ue("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new ue("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new ue("Array index must be an integer, but found "+e+" instead.");return i[e]},ci.prototype.eachChild=function(t){t(this.index),t(this.input)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ui=function(t,e){this.type=jt,this.needle=t,this.haystack=e};ui.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Tt),n=e.parse(t[2],2,Tt);return i&&n?Qt(i.type,[jt,kt,Ht,Jt,Tt])?new ui(i,n):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Pt(i.type)+" instead"):null},ui.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!qt(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+Pt(se(e))+" instead.");if(!qt(i,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+Pt(se(i))+" instead.");return i.indexOf(e)>=0},ui.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},ui.prototype.outputDefined=function(){return!0},ui.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var di=function(t,e,i){this.type=Ht,this.needle=t,this.haystack=e,this.fromIndex=i};di.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Tt),n=e.parse(t[2],2,Tt);if(!i||!n)return null;if(!Qt(i.type,[jt,kt,Ht,Jt,Tt]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Pt(i.type)+" instead");if(4===t.length){var a=e.parse(t[3],3,Ht);return a?new di(i,n,a):null}return new di(i,n)},di.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!qt(e,["boolean","string","number","null"]))throw new ue("Expected first argument to be of type boolean, string, number or null, but found "+Pt(se(e))+" instead.");if(!qt(i,["string","array"]))throw new ue("Expected second argument to be of type array or string, but found "+Pt(se(i))+" instead.");if(this.fromIndex){var n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)},di.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},di.prototype.outputDefined=function(){return!1},di.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hi=function(t,e,i,n,a,o){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=a,this.otherwise=o};hi.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var a={},o=[],r=2;r<t.length-1;r+=2){var s=t[r],l=t[r+1];Array.isArray(s)||(s=[s]);var c=e.concat(r);if(0===s.length)return c.error("Expected at least one branch label.");for(var u=0,d=s;u<d.length;u+=1){var h=d[u];if("number"!=typeof h&&"string"!=typeof h)return c.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,se(h)))return null}else i=se(h);if(void 0!==a[String(h)])return c.error("Branch labels must be unique.");a[String(h)]=o.length}var p=e.parse(l,r,n);if(!p)return null;n=n||p.type,o.push(p)}var m=e.parse(t[1],1,Tt);if(!m)return null;var b=e.parse(t[t.length-1],t.length-1,n);return b?"value"!==m.type.kind&&e.concat(1).checkSubtype(i,m.type)?null:new hi(i,n,m,a,o,b):null},hi.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(se(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},hi.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},hi.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},hi.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],n={},a=0,o=Object.keys(this.cases).sort();a<o.length;a+=1){var r=o[a];void 0===(d=n[this.cases[r]])?(n[this.cases[r]]=i.length,i.push([this.cases[r],[r]])):i[d][1].push(r)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,c=i;l<c.length;l+=1){var u=c[l],d=u[0],h=u[1];e.push(1===h.length?s(h[0]):h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var pi=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};pi.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var n=[],a=1;a<t.length-1;a+=2){var o=e.parse(t[a],a,jt);if(!o)return null;var r=e.parse(t[a+1],a+1,i);if(!r)return null;n.push([o,r]),i=i||r.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new pi(i,n,s):null},pi.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var n=i[e],a=n[1];if(n[0].evaluate(t))return a.evaluate(t)}return this.otherwise.evaluate(t)},pi.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var n=i[e],a=n[1];t(n[0]),t(a)}t(this.otherwise)},pi.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},pi.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var mi=function(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n};function bi(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function yi(t,e,i,n){return 0===n.compare(e,i)}function fi(t,e,i){var n="=="!==t&&"!="!==t;return function(){function a(t,e,i){this.type=jt,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return a.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],o=e.parse(t[1],1,Tt);if(!o)return null;if(!bi(i,o.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+Pt(o.type)+"'.");var r=e.parse(t[2],2,Tt);if(!r)return null;if(!bi(i,r.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+Pt(r.type)+"'.");if(o.type.kind!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return e.error("Cannot compare types '"+Pt(o.type)+"' and '"+Pt(r.type)+"'.");n&&("value"===o.type.kind&&"value"!==r.type.kind?o=new he(r.type,[o]):"value"!==o.type.kind&&"value"===r.type.kind&&(r=new he(o.type,[r])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Ut)))return null}return new a(o,r,s)},a.prototype.evaluate=function(a){var o=this.lhs.evaluate(a),r=this.rhs.evaluate(a);if(n&&this.hasUntypedArgument){var s=se(o),l=se(r);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new ue('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var c=se(o),u=se(r);if("string"!==c.kind||"string"!==u.kind)return e(a,o,r)}return this.collator?i(a,o,r,this.collator.evaluate(a)):e(a,o,r)},a.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},a}()}mi.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,Tt),n=e.parse(t[2],2,Ht);if(!i||!n)return null;if(!Qt(i.type,[Ot(Tt),kt,Tt]))return e.error("Expected first argument to be of type array or string, but found "+Pt(i.type)+" instead");if(4===t.length){var a=e.parse(t[3],3,Ht);return a?new mi(i.type,i,n,a):null}return new mi(i.type,i,n)},mi.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!qt(e,["string","array"]))throw new ue("Expected first argument to be of type array or string, but found "+Pt(se(e))+" instead.");if(this.endIndex){var n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)},mi.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},mi.prototype.outputDefined=function(){return!1},mi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var gi=fi("==",(function(t,e,i){return e===i}),yi),Ii=fi("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!yi(0,e,i,n)})),vi=fi("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),xi=fi(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),Zi=fi("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0})),Gi=fi(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0})),wi=function(t,e,i,n,a){this.type=kt,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=n,this.maxFractionDigits=a};wi.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Ht);if(!i)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var a=null;if(n.locale&&!(a=e.parse(n.locale,1,kt)))return null;var o=null;if(n.currency&&!(o=e.parse(n.currency,1,kt)))return null;var r=null;if(n["min-fraction-digits"]&&!(r=e.parse(n["min-fraction-digits"],1,Ht)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,Ht))?null:new wi(i,a,o,r,s)},wi.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},wi.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},wi.prototype.outputDefined=function(){return!1},wi.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var Wi=function(t){this.type=Ht,this.input=t};Wi.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+Pt(i.type)+" instead."):new Wi(i):null},Wi.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ue("Expected value to be of type string or array, but found "+Pt(se(e))+" instead.")},Wi.prototype.eachChild=function(t){t(this.input)},Wi.prototype.outputDefined=function(){return!1},Wi.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Xi={"==":gi,"!=":Ii,">":xi,"<":vi,">=":Gi,"<=":Zi,array:he,at:ci,boolean:he,case:pi,coalesce:si,collator:ve,format:pe,image:me,in:ui,"index-of":di,interpolate:oi,"interpolate-hcl":oi,"interpolate-lab":oi,length:Wi,let:li,literal:ce,match:hi,number:he,"number-format":wi,object:he,slice:mi,step:Te,string:he,"to-boolean":ye,"to-color":ye,"to-number":ye,"to-string":ye,var:je,within:Me};function _i(t,e){var i=e[0],n=e[1],a=e[2],o=e[3];i=i.evaluate(t),n=n.evaluate(t),a=a.evaluate(t);var r=o?o.evaluate(t):1,s=oe(i,n,a,r);if(s)throw new ue(s);return new te(i/255*r,n/255*r,a/255*r,r)}function Vi(t,e){return t in e}function Si(t,e){var i=e[t];return void 0===i?null:i}function Bi(t){return{type:t}}function Li(t){return{result:"success",value:t}}function Yi(t){return{result:"error",value:t}}function zi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Ri(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Ci(t){return!!t.expression&&t.expression.interpolated}function Mi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Ji(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Hi(t){return t}function ki(t,e,i){return void 0!==t?t:void 0!==e?e:void 0!==i?i:void 0}function ji(t,e,i,n,a){return ki(typeof i===a?n[i]:void 0,t.default,e.default)}function Fi(t,e,i){if("number"!==Mi(i))return ki(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[n-1][0])return t.stops[n-1][1];var a=Ne(t.stops.map((function(t){return t[0]})),i);return t.stops[a][1]}function Ni(t,e,i){var n=void 0!==t.base?t.base:1;if("number"!==Mi(i))return ki(t.default,e.default);var a=t.stops.length;if(1===a)return t.stops[0][1];if(i<=t.stops[0][0])return t.stops[0][1];if(i>=t.stops[a-1][0])return t.stops[a-1][1];var o=Ne(t.stops.map((function(t){return t[0]})),i),r=function(t,e,i,n){var a=n-i,o=t-i;return 0===a?0:1===e?o/a:(Math.pow(e,o)-1)/(Math.pow(e,a)-1)}(i,n,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1],c=Ee[e.type]||Hi;if(t.colorSpace&&"rgb"!==t.colorSpace){var u=ai[t.colorSpace];c=function(t,e){return u.reverse(u.interpolate(u.forward(t),u.forward(e),r))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==i&&void 0!==n)return c(i,n,r)}}:c(s,l,r)}function Ti(t,e,i){return"color"===e.type?i=te.parse(i):"formatted"===e.type?i=ne.fromString(i.toString()):"resolvedImage"===e.type?i=ae.fromString(i.toString()):Mi(i)===e.type||"enum"===e.type&&e.values[i]||(i=void 0),ki(i,t.default,e.default)}Ie.register(Xi,{error:[{kind:"error"},[kt],function(t,e){throw new ue(e[0].evaluate(t))}],typeof:[kt,[Tt],function(t,e){return Pt(se(e[0].evaluate(t)))}],"to-rgba":[Ot(Ht,4),[Ft],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ft,[Ht,Ht,Ht],_i],rgba:[Ft,[Ht,Ht,Ht,Ht],_i],has:{type:jt,overloads:[[[kt],function(t,e){return Vi(e[0].evaluate(t),t.properties())}],[[kt,Nt],function(t,e){var i=e[1];return Vi(e[0].evaluate(t),i.evaluate(t))}]]},get:{type:Tt,overloads:[[[kt],function(t,e){return Si(e[0].evaluate(t),t.properties())}],[[kt,Nt],function(t,e){var i=e[1];return Si(e[0].evaluate(t),i.evaluate(t))}]]},"feature-state":[Tt,[kt],function(t,e){return Si(e[0].evaluate(t),t.featureState||{})}],properties:[Nt,[],function(t){return t.properties()}],"geometry-type":[kt,[],function(t){return t.geometryType()}],id:[Tt,[],function(t){return t.id()}],zoom:[Ht,[],function(t){return t.globals.zoom}],"heatmap-density":[Ht,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ht,[],function(t){return t.globals.lineProgress||0}],accumulated:[Tt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Ht,Bi(Ht),function(t,e){for(var i=0,n=0,a=e;n<a.length;n+=1)i+=a[n].evaluate(t);return i}],"*":[Ht,Bi(Ht),function(t,e){for(var i=1,n=0,a=e;n<a.length;n+=1)i*=a[n].evaluate(t);return i}],"-":{type:Ht,overloads:[[[Ht,Ht],function(t,e){var i=e[1];return e[0].evaluate(t)-i.evaluate(t)}],[[Ht],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ht,[Ht,Ht],function(t,e){var i=e[1];return e[0].evaluate(t)/i.evaluate(t)}],"%":[Ht,[Ht,Ht],function(t,e){var i=e[1];return e[0].evaluate(t)%i.evaluate(t)}],ln2:[Ht,[],function(){return Math.LN2}],pi:[Ht,[],function(){return Math.PI}],e:[Ht,[],function(){return Math.E}],"^":[Ht,[Ht,Ht],function(t,e){var i=e[1];return Math.pow(e[0].evaluate(t),i.evaluate(t))}],sqrt:[Ht,[Ht],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Ht,[Ht],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Ht,[Ht],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Ht,[Ht],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Ht,[Ht],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Ht,[Ht],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Ht,[Ht],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Ht,[Ht],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Ht,[Ht],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Ht,[Ht],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Ht,Bi(Ht),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Ht,Bi(Ht),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Ht,[Ht],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Ht,[Ht],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[Ht,[Ht],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Ht,[Ht],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[jt,[kt,Tt],function(t,e){var i=e[0],n=e[1];return t.properties()[i.value]===n.value}],"filter-id-==":[jt,[Tt],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[jt,[kt],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[jt,[kt,Tt],function(t,e){var i=e[0],n=e[1],a=t.properties()[i.value],o=n.value;return typeof a==typeof o&&a<o}],"filter-id-<":[jt,[Tt],function(t,e){var i=e[0],n=t.id(),a=i.value;return typeof n==typeof a&&n<a}],"filter->":[jt,[kt,Tt],function(t,e){var i=e[0],n=e[1],a=t.properties()[i.value],o=n.value;return typeof a==typeof o&&a>o}],"filter-id->":[jt,[Tt],function(t,e){var i=e[0],n=t.id(),a=i.value;return typeof n==typeof a&&n>a}],"filter-<=":[jt,[kt,Tt],function(t,e){var i=e[0],n=e[1],a=t.properties()[i.value],o=n.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[jt,[Tt],function(t,e){var i=e[0],n=t.id(),a=i.value;return typeof n==typeof a&&n<=a}],"filter->=":[jt,[kt,Tt],function(t,e){var i=e[0],n=e[1],a=t.properties()[i.value],o=n.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[jt,[Tt],function(t,e){var i=e[0],n=t.id(),a=i.value;return typeof n==typeof a&&n>=a}],"filter-has":[jt,[Tt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[jt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[jt,[Ot(kt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[jt,[Ot(Tt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[jt,[kt,Ot(Tt)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[jt,[kt,Ot(Tt)],function(t,e){var i=e[0],n=e[1];return function(t,e,i,n){for(;i<=n;){var a=i+n>>1;if(e[a]===t)return!0;e[a]>t?n=a-1:i=a+1}return!1}(t.properties()[i.value],n.value,0,n.value.length-1)}],all:{type:jt,overloads:[[[jt,jt],function(t,e){var i=e[1];return e[0].evaluate(t)&&i.evaluate(t)}],[Bi(jt),function(t,e){for(var i=0,n=e;i<n.length;i+=1)if(!n[i].evaluate(t))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],function(t,e){var i=e[1];return e[0].evaluate(t)||i.evaluate(t)}],[Bi(jt),function(t,e){for(var i=0,n=e;i<n.length;i+=1)if(n[i].evaluate(t))return!0;return!1}]]},"!":[jt,[jt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[jt,[kt],function(t,e){var i=t.globals&&t.globals.isSupportedScript;return!i||i(e[0].evaluate(t))}],upcase:[kt,[kt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[kt,[kt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[kt,Bi(Tt),function(t,e){return e.map((function(e){return le(e.evaluate(t))})).join("")}],"resolved-locale":[kt,[Ut],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Ui=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new ge,this._defaultValue=e?function(t){return"color"===t.type&&Ji(t.default)?new te(0,0,0,0):"color"===t.type?te.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Ei(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Xi}function Ai(t,e){var i=new Fe(Xi,[],e?function(t){var e={color:Ft,string:kt,number:Ht,enum:kt,boolean:jt,formatted:Et,resolvedImage:At};return"array"===t.type?Ot(e[t.value]||Tt,t.length):e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Li(new Ui(n,e)):Yi(i.errors)}Ui.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,a,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Ui.prototype.evaluate=function(t,e,i,n,a,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=o||null;try{var r=this.expression.evaluate(this._evaluator);if(null==r||"number"==typeof r&&r!=r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new ue("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Oi=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!He(e.expression)};Oi.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,a,o)},Oi.prototype.evaluate=function(t,e,i,n,a,o){return this._styleExpression.evaluate(t,e,i,n,a,o)};var Pi=function(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!He(e.expression),this.interpolationType=n};function Ki(t,e){if("error"===(t=Ai(t,e)).result)return t;var i=t.value.expression,n=Je(i);if(!n&&!zi(e))return Yi([new Ct("","data expressions not supported")]);var a=ke(i,["zoom"]);if(!a&&!Ri(e))return Yi([new Ct("","zoom expressions not supported")]);var o=function t(e){var i=null;if(e instanceof li)i=t(e.result);else if(e instanceof si)for(var n=0,a=e.args;n<a.length&&!(i=t(a[n]));n+=1);else(e instanceof Te||e instanceof oi)&&e.input instanceof Ie&&"zoom"===e.input.name&&(i=e);return i instanceof Ct||e.eachChild((function(e){var n=t(e);n instanceof Ct?i=n:!i&&n?i=new Ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&n&&i!==n&&(i=new Ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return o||a?o instanceof Ct?Yi([o]):o instanceof oi&&!Ci(e)?Yi([new Ct("",'"interpolate" expressions cannot be used with this property')]):Li(o?new Pi(n?"camera":"composite",t.value,o.labels,o instanceof oi?o.interpolation:void 0):new Oi(n?"constant":"source",t.value)):Yi([new Ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Pi.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,a,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,a,o)},Pi.prototype.evaluate=function(t,e,i,n,a,o){return this._styleExpression.evaluate(t,e,i,n,a,o)},Pi.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?oi.interpolationFactor(this.interpolationType,t,e,i):0};var Di=function(t,e){this._parameters=t,this._specification=e,Yt(this,function t(e,i){var n,a,o,r="color"===i.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||!(s||void 0!==e.property),c=e.type||(Ci(i)?"exponential":"interval");if(r&&((e=Yt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],te.parse(t[1])]}))),e.default=te.parse(e.default?e.default:i.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!ai[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)n=Ni;else if("interval"===c)n=Fi;else if("categorical"===c){n=ji,a=Object.create(null);for(var u=0,d=e.stops;u<d.length;u+=1){var h=d[u];a[h[0]]=h[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');n=Ti}if(s){for(var p={},m=[],b=0;b<e.stops.length;b++){var y=e.stops[b],f=y[0].zoom;void 0===p[f]&&(p[f]={zoom:f,type:e.type,property:e.property,default:e.default,stops:[]},m.push(f)),p[f].stops.push([y[0].value,y[1]])}for(var g=[],I=0,v=m;I<v.length;I+=1){var x=v[I];g.push([p[x].zoom,t(p[x],i)])}var Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:oi.interpolationFactor.bind(void 0,Z),zoomStops:g.map((function(t){return t[0]})),evaluate:function(t,n){var a=t.zoom;return Ni({stops:g,base:e.base},i,a).evaluate(a,n)}}}if(l){var G="exponential"===c?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:G,interpolationFactor:oi.interpolationFactor.bind(void 0,G),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return n(e,i,t.zoom,a,o)}}}return{kind:"source",evaluate:function(t,r){var s=r&&r.properties?r.properties[e.property]:void 0;return void 0===s?ki(e.default,i.default):n(e,i,s,a,o)}}}(this._parameters,this._specification))};function Qi(t){var e=t.key,i=t.value,n=t.valueSpec||{},a=t.objectElementValidators||{},o=t.style,r=t.styleSpec,s=[],l=Mi(i);if("object"!==l)return[new Bt(e,i,"object expected, "+l+" found")];for(var c in i){var u=c.split(".")[0],d=n[u]||n["*"],h=void 0;if(a[u])h=a[u];else if(n[u])h=Gn;else if(a["*"])h=a["*"];else{if(!n["*"]){s.push(new Bt(e,i[c],'unknown property "'+c+'"'));continue}h=Gn}s=s.concat(h({key:(e?e+".":e)+c,value:i[c],valueSpec:d,style:o,styleSpec:r,object:i,objectKey:c},i))}for(var p in n)a[p]||n[p].required&&void 0===n[p].default&&void 0===i[p]&&s.push(new Bt(e,i,'missing required property "'+p+'"'));return s}function qi(t){var e=t.value,i=t.valueSpec,n=t.style,a=t.styleSpec,o=t.key,r=t.arrayElementValidator||Gn;if("array"!==Mi(e))return[new Bt(o,e,"array expected, "+Mi(e)+" found")];if(i.length&&e.length!==i.length)return[new Bt(o,e,"array length "+i.length+" expected, length "+e.length+" found")];if(i["min-length"]&&e.length<i["min-length"])return[new Bt(o,e,"array length at least "+i["min-length"]+" expected, length "+e.length+" found")];var s={type:i.value,values:i.values};a.$version<7&&(s.function=i.function),"object"===Mi(i.value)&&(s=i.value);for(var l=[],c=0;c<e.length;c++)l=l.concat(r({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:n,styleSpec:a,key:o+"["+c+"]"}));return l}function $i(t){var e=t.key,i=t.value,n=t.valueSpec,a=Mi(i);return"number"===a&&i!=i&&(a="NaN"),"number"!==a?[new Bt(e,i,"number expected, "+a+" found")]:"minimum"in n&&i<n.minimum?[new Bt(e,i,i+" is less than the minimum value "+n.minimum)]:"maximum"in n&&i>n.maximum?[new Bt(e,i,i+" is greater than the maximum value "+n.maximum)]:[]}function tn(t){var e,i,n,a=t.valueSpec,o=zt(t.value.type),r={},s="categorical"!==o&&void 0===t.value.property,l=!s,c="array"===Mi(t.value.stops)&&"array"===Mi(t.value.stops[0])&&"object"===Mi(t.value.stops[0][0]),u=Qi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Bt(t.key,t.value,'identity function may not have a "stops" property')];var e=[],i=t.value;return e=e.concat(qi({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:d})),"array"===Mi(i)&&0===i.length&&e.push(new Bt(t.key,i,"array must have at least one stop")),e},default:function(t){return Gn({key:t.key,value:t.value,valueSpec:a,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&u.push(new Bt(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||u.push(new Bt(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Ci(t.valueSpec)&&u.push(new Bt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!zi(t.valueSpec)?u.push(new Bt(t.key,t.value,"property functions not supported")):s&&!Ri(t.valueSpec)&&u.push(new Bt(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!c||void 0!==t.value.property||u.push(new Bt(t.key,t.value,'"property" property is required')),u;function d(t){var e=[],o=t.value,s=t.key;if("array"!==Mi(o))return[new Bt(s,o,"array expected, "+Mi(o)+" found")];if(2!==o.length)return[new Bt(s,o,"array length 2 expected, length "+o.length+" found")];if(c){if("object"!==Mi(o[0]))return[new Bt(s,o,"object expected, "+Mi(o[0])+" found")];if(void 0===o[0].zoom)return[new Bt(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Bt(s,o,"object stop key must have value")];if(n&&n>zt(o[0].zoom))return[new Bt(s,o[0].zoom,"stop zoom values must appear in ascending order")];zt(o[0].zoom)!==n&&(n=zt(o[0].zoom),i=void 0,r={}),e=e.concat(Qi({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:$i,value:h}}))}else e=e.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Ei(Rt(o[1]))?e.concat([new Bt(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Gn({key:s+"[1]",value:o[1],valueSpec:a,style:t.style,styleSpec:t.styleSpec}))}function h(t,n){var s=Mi(t.value),l=zt(t.value),c=null!==t.value?t.value:n;if(e){if(s!==e)return[new Bt(t.key,c,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Bt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var u="number expected, "+s+" found";return zi(a)&&void 0===o&&(u+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Bt(t.key,c,u)]}return"categorical"!==o||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==o&&"number"===s&&void 0!==i&&l<i?[new Bt(t.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===o&&l in r?[new Bt(t.key,c,"stop domain values must be unique")]:(r[l]=!0,[])):[new Bt(t.key,c,"integer expected, found "+l)]}}function en(t){var e=("property"===t.expressionContext?Ki:Ai)(Rt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Bt(""+t.key+e.key,t.value,e.message)}));var i=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!i.outputDefined())return[new Bt(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!He(i))return[new Bt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!He(i))return[new Bt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!ke(i,["zoom","feature-state"]))return[new Bt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Je(i))return[new Bt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nn(t){var e=t.key,i=t.value,n=t.valueSpec,a=[];return Array.isArray(n.values)?-1===n.values.indexOf(zt(i))&&a.push(new Bt(e,i,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(n.values).indexOf(zt(i))&&a.push(new Bt(e,i,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(i)+" found")),a}function an(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var n=i[e];if(!an(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Di.deserialize=function(t){return new Di(t._parameters,t._specification)},Di.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var on={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rn(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};an(t)||(t=ln(t));var e=Ai(t,on);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,i,n){return e.value.evaluate(t,i,{},n)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(t)}}function sn(t,e){return t<e?-1:t>e?1:0}function ln(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?cn(t[1],t[2],"=="):"!="===i?hn(cn(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?cn(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(ln))):"all"===i?["all"].concat(t.slice(1).map(ln)):"none"===i?["all"].concat(t.slice(1).map(ln).map(hn)):"in"===i?un(t[1],t.slice(2)):"!in"===i?hn(un(t[1],t.slice(2))):"has"===i?dn(t[1]):"!has"===i?hn(dn(t[1])):"within"!==i||t}function cn(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function un(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(sn)]]:["filter-in-small",t,["literal",e]]}}function dn(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function hn(t){return["!",t]}function pn(t){return an(Rt(t.value))?en(Yt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var i=e.value,n=e.key;if("array"!==Mi(i))return[new Bt(n,i,"array expected, "+Mi(i)+" found")];var a,o=e.styleSpec,r=[];if(i.length<1)return[new Bt(n,i,"filter array must have at least 1 element")];switch(r=r.concat(nn({key:n+"[0]",value:i[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),zt(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===zt(i[1])&&r.push(new Bt(n,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&r.push(new Bt(n,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(a=Mi(i[1]))&&r.push(new Bt(n+"[1]",i[1],"string expected, "+a+" found"));for(var s=2;s<i.length;s++)a=Mi(i[s]),"$type"===zt(i[1])?r=r.concat(nn({key:n+"["+s+"]",value:i[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&r.push(new Bt(n+"["+s+"]",i[s],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var l=1;l<i.length;l++)r=r.concat(t({key:n+"["+l+"]",value:i[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=Mi(i[1]),2!==i.length?r.push(new Bt(n,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==a&&r.push(new Bt(n+"[1]",i[1],"string expected, "+a+" found"));break;case"within":a=Mi(i[1]),2!==i.length?r.push(new Bt(n,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==a&&r.push(new Bt(n+"[1]",i[1],"object expected, "+a+" found"))}return r}(t)}function mn(t,e){var i=t.key,n=t.style,a=t.styleSpec,o=t.value,r=t.objectKey,s=a[e+"_"+t.layerType];if(!s)return[];var l=r.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Gn({key:i,value:o,valueSpec:a.transition,style:n,styleSpec:a});var c,u=t.valueSpec||s[r];if(!u)return[new Bt(i,o,'unknown property "'+r+'"')];if("string"===Mi(o)&&zi(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new Bt(i,o,'"'+r+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(c[1])+" }`.")];var d=[];return"symbol"===t.layerType&&("text-field"===r&&n&&!n.glyphs&&d.push(new Bt(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===r&&Ji(Rt(o))&&"identity"===zt(o.type)&&d.push(new Bt(i,o,'"text-font" does not support identity functions'))),d.concat(Gn({key:t.key,value:o,valueSpec:u,style:n,styleSpec:a,expressionContext:"property",propertyType:e,propertyKey:r}))}function bn(t){return mn(t,"paint")}function yn(t){return mn(t,"layout")}function fn(t){var e=[],i=t.value,n=t.key,a=t.style,o=t.styleSpec;i.type||i.ref||e.push(new Bt(n,i,'either "type" or "ref" is required'));var r,s=zt(i.type),l=zt(i.ref);if(i.id)for(var c=zt(i.id),u=0;u<t.arrayIndex;u++){var d=a.layers[u];zt(d.id)===c&&e.push(new Bt(n,i.id,'duplicate layer id "'+i.id+'", previously used at line '+d.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(t){t in i&&e.push(new Bt(n,i[t],'"'+t+'" is prohibited for ref layers'))})),a.layers.forEach((function(t){zt(t.id)===l&&(r=t)})),r?r.ref?e.push(new Bt(n,i.ref,"ref cannot reference another ref layer")):s=zt(r.type):e.push(new Bt(n,i.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(i.source){var h=a.sources&&a.sources[i.source],p=h&&zt(h.type);h?"vector"===p&&"raster"===s?e.push(new Bt(n,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===p&&"raster"!==s?e.push(new Bt(n,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==p||i["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new Bt(n,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===p&&h.lineMetrics||e.push(new Bt(n,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Bt(n,i,'layer "'+i.id+'" must specify a "source-layer"')):e.push(new Bt(n,i.source,'source "'+i.source+'" not found'))}else e.push(new Bt(n,i,'missing required property "source"'));return e=e.concat(Qi({key:n,value:i,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Gn({key:n+".type",value:i.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:i,objectKey:"type"})},filter:pn,layout:function(t){return Qi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return yn(Yt({layerType:s},t))}}})},paint:function(t){return Qi({layer:i,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return bn(Yt({layerType:s},t))}}})}}}))}function gn(t){var e=t.value,i=t.key,n=Mi(e);return"string"!==n?[new Bt(i,e,"string expected, "+n+" found")]:[]}var In={promoteId:function(t){var e=t.key,i=t.value;if("string"===Mi(i))return gn({key:e,value:i});var n=[];for(var a in i)n.push.apply(n,gn({key:e+"."+a,value:i[a]}));return n}};function vn(t){var e=t.value,i=t.key,n=t.styleSpec,a=t.style;if(!e.type)return[new Bt(i,e,'"type" is required')];var o,r=zt(e.type);switch(r){case"vector":case"raster":case"raster-dem":return Qi({key:i,value:e,valueSpec:n["source_"+r.replace("-","_")],style:t.style,styleSpec:n,objectElementValidators:In});case"geojson":if(o=Qi({key:i,value:e,valueSpec:n.source_geojson,style:a,styleSpec:n,objectElementValidators:In}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],c=l[0],u="string"==typeof c?[c,["accumulated"],["get",s]]:c;o.push.apply(o,en({key:i+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),o.push.apply(o,en({key:i+"."+s+".reduce",value:u,expressionContext:"cluster-reduce"}))}return o;case"video":return Qi({key:i,value:e,valueSpec:n.source_video,style:a,styleSpec:n});case"image":return Qi({key:i,value:e,valueSpec:n.source_image,style:a,styleSpec:n});case"canvas":return[new Bt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nn({key:i+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:n})}}function xn(t){var e=t.value,i=t.styleSpec,n=i.light,a=t.style,o=[],r=Mi(e);if(void 0===e)return o;if("object"!==r)return o.concat([new Bt("light",e,"object expected, "+r+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);o=o.concat(l&&n[l[1]]&&n[l[1]].transition?Gn({key:s,value:e[s],valueSpec:i.transition,style:a,styleSpec:i}):n[s]?Gn({key:s,value:e[s],valueSpec:n[s],style:a,styleSpec:i}):[new Bt(s,e[s],'unknown property "'+s+'"')])}return o}var Zn={"*":function(){return[]},array:qi,boolean:function(t){var e=t.value,i=t.key,n=Mi(e);return"boolean"!==n?[new Bt(i,e,"boolean expected, "+n+" found")]:[]},number:$i,color:function(t){var e=t.key,i=t.value,n=Mi(i);return"string"!==n?[new Bt(e,i,"color expected, "+n+" found")]:null===$t(i)?[new Bt(e,i,'color expected, "'+i+'" found')]:[]},constants:Lt,enum:nn,filter:pn,function:tn,layer:fn,object:Qi,source:vn,light:xn,string:gn,formatted:function(t){return 0===gn(t).length?[]:en(t)},resolvedImage:function(t){return 0===gn(t).length?[]:en(t)}};function Gn(t){var e=t.value,i=t.valueSpec,n=t.styleSpec;return i.expression&&Ji(zt(e))?tn(t):i.expression&&Ei(Rt(e))?en(t):i.type&&Zn[i.type]?Zn[i.type](t):Qi(Yt({},t,{valueSpec:i.type?n[i.type]:i}))}function wn(t){var e=t.value,i=t.key,n=gn(t);return n.length||(-1===e.indexOf("{fontstack}")&&n.push(new Bt(i,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Bt(i,e,'"glyphs" url must include a "{range}" token'))),n}function Wn(t,e){void 0===e&&(e=St);var i=[];return i=i.concat(Gn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:wn,"*":function(){return[]}}})),t.constants&&(i=i.concat(Lt({key:"constants",value:t.constants,style:t,styleSpec:e}))),Xn(i)}function Xn(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function _n(t){return function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return Xn(t.apply(this,e))}}Wn.source=_n(vn),Wn.light=_n(xn),Wn.layer=_n(fn),Wn.filter=_n(pn),Wn.paintProperty=_n(bn),Wn.layoutProperty=_n(yn);var Vn=Wn,Sn=Vn.light,Bn=Vn.paintProperty,Ln=Vn.layoutProperty;function Yn(t,e){var i=!1;if(e&&e.length)for(var n=0,a=e;n<a.length;n+=1)t.fire(new _t(new Error(a[n].message))),i=!0;return i}var zn=Rn;function Rn(t,e,i){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var a=new Int32Array(this.arrayBuffer);t=a[0],this.d=(e=a[1])+2*(i=a[2]);for(var o=0;o<this.d*this.d;o++){var r=a[3+o],s=a[3+o+1];n.push(r===s?null:a.subarray(r,s))}var l=a[3+n.length+1];this.keys=a.subarray(a[3+n.length],l),this.bboxes=a.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*i;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=i,this.scale=e/t,this.uid=0;var u=i/e*t;this.min=-u,this.max=t+u}Rn.prototype.insert=function(t,e,i,n,a){this._forEachCell(e,i,n,a,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(a)},Rn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rn.prototype._insertCell=function(t,e,i,n,a,o){this.cells[a].push(o)},Rn.prototype.query=function(t,e,i,n,a){var o=this.min,r=this.max;if(t<=o&&e<=o&&r<=i&&r<=n&&!a)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,i,n,this._queryCell,s,{},a),s},Rn.prototype._queryCell=function(t,e,i,n,a,o,r,s){var l=this.cells[a];if(null!==l)for(var c=this.keys,u=this.bboxes,d=0;d<l.length;d++){var h=l[d];if(void 0===r[h]){var p=4*h;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):t<=u[p+2]&&e<=u[p+3]&&i>=u[p+0]&&n>=u[p+1])?(r[h]=!0,o.push(c[h])):r[h]=!1}}},Rn.prototype._forEachCell=function(t,e,i,n,a,o,r,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(i),d=this._convertToCellCoord(n),h=l;h<=u;h++)for(var p=c;p<=d;p++){var m=this.d*p+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(p),this._convertFromCellCoord(h+1),this._convertFromCellCoord(p+1)))&&a.call(this,t,e,i,n,m,o,r,s))return}},Rn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Rn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Rn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,i=0,n=0;n<this.cells.length;n++)i+=this.cells[n].length;var a=new Int32Array(e+i+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var o=e,r=0;r<t.length;r++){var s=t[r];a[3+r]=o,a.set(s,o),o+=s.length}return a[3+t.length]=o,a.set(this.keys,o),a[3+t.length+1]=o+=this.keys.length,a.set(this.bboxes,o),o+=this.bboxes.length,a.buffer};var Cn=r.ImageData,Mn=r.ImageBitmap,Jn={};function Hn(t,e,i){void 0===i&&(i={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Jn[t]={klass:e,omit:i.omit||[],shallow:i.shallow||[]}}for(var kn in Hn("Object",Object),zn.serialize=function(t,e){var i=t.toArrayBuffer();return e&&e.push(i),{buffer:i}},zn.deserialize=function(t){return new zn(t.buffer)},Hn("Grid",zn),Hn("Color",te),Hn("Error",Error),Hn("ResolvedImage",ae),Hn("StylePropertyFunction",Di),Hn("StyleExpression",Ui,{omit:["_evaluator"]}),Hn("ZoomDependentExpression",Pi),Hn("ZoomConstantExpression",Oi),Hn("CompoundExpression",Ie,{omit:["_evaluate"]}),Xi)Xi[kn]._classRegistryKey||Hn("Expression_"+kn,Xi[kn]);function jn(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Fn(t){return Mn&&t instanceof Mn}function Nn(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(jn(t)||Fn(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var i=t;return e&&e.push(i.buffer),i}if(t instanceof Cn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],a=0,o=t;a<o.length;a+=1)n.push(Nn(o[a],e));return n}if("object"==typeof t){var r=t.constructor,s=r._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=r.serialize?r.serialize(t,e):{};if(!r.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(Jn[s].omit.indexOf(c)>=0)){var u=t[c];l[c]=Jn[s].shallow.indexOf(c)>=0?u:Nn(u,e)}t instanceof Error&&(l.message=t.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof t)}function Tn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||jn(t)||Fn(t)||ArrayBuffer.isView(t)||t instanceof Cn)return t;if(Array.isArray(t))return t.map(Tn);if("object"==typeof t){var e=t.$name||"Object",i=Jn[e].klass;if(!i)throw new Error("can't deserialize unregistered class "+e);if(i.deserialize)return i.deserialize(t);for(var n=Object.create(i.prototype),a=0,o=Object.keys(t);a<o.length;a+=1){var r=o[a];if("$name"!==r){var s=t[r];n[r]=Jn[e].shallow.indexOf(r)>=0?s:Tn(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var Un=function(){this.first=!0};Un.prototype.update=function(t,e){var i=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=i,!0))};var En={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function An(t){for(var e=0,i=t;e<i.length;e+=1)if(On(i[e].charCodeAt(0)))return!0;return!1}function On(t){return!(746!==t&&747!==t&&(t<4352||!(En["Bopomofo Extended"](t)||En.Bopomofo(t)||En["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||En["CJK Compatibility Ideographs"](t)||En["CJK Compatibility"](t)||En["CJK Radicals Supplement"](t)||En["CJK Strokes"](t)||!(!En["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||En["CJK Unified Ideographs Extension A"](t)||En["CJK Unified Ideographs"](t)||En["Enclosed CJK Letters and Months"](t)||En["Hangul Compatibility Jamo"](t)||En["Hangul Jamo Extended-A"](t)||En["Hangul Jamo Extended-B"](t)||En["Hangul Jamo"](t)||En["Hangul Syllables"](t)||En.Hiragana(t)||En["Ideographic Description Characters"](t)||En.Kanbun(t)||En["Kangxi Radicals"](t)||En["Katakana Phonetic Extensions"](t)||En.Katakana(t)&&12540!==t||!(!En["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!En["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||En["Unified Canadian Aboriginal Syllabics"](t)||En["Unified Canadian Aboriginal Syllabics Extended"](t)||En["Vertical Forms"](t)||En["Yijing Hexagram Symbols"](t)||En["Yi Syllables"](t)||En["Yi Radicals"](t))))}function Pn(t){return!(On(t)||function(t){return!!(En["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||En["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||En["Letterlike Symbols"](t)||En["Number Forms"](t)||En["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||En["Control Pictures"](t)&&9251!==t||En["Optical Character Recognition"](t)||En["Enclosed Alphanumerics"](t)||En["Geometric Shapes"](t)||En["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||En["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||En["CJK Symbols and Punctuation"](t)||En.Katakana(t)||En["Private Use Area"](t)||En["CJK Compatibility Forms"](t)||En["Small Form Variants"](t)||En["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Kn(t){return t>=1424&&t<=2303||En["Arabic Presentation Forms-A"](t)||En["Arabic Presentation Forms-B"](t)}function Dn(t,e){return!(!e&&Kn(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||En.Khmer(t))}function Qn(t){for(var e=0,i=t;e<i.length;e+=1)if(Kn(i[e].charCodeAt(0)))return!0;return!1}var qn=null,$n="unavailable",ta=null,ea=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&($n="error"),qn&&qn(t)};function ia(){na.fire(new Xt("pluginStateChange",{pluginStatus:$n,pluginURL:ta}))}var na=new Vt,aa=function(){return $n},oa=function(){if("deferred"!==$n||!ta)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$n="loading",ia(),ta&&vt({url:ta},(function(t){t?ea(t):($n="loaded",ia())}))},ra={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===$n||null!=ra.applyArabicShaping},isLoading:function(){return"loading"===$n},setState:function(t){$n=t.pluginStatus,ta=t.pluginURL},isParsed:function(){return null!=ra.applyArabicShaping&&null!=ra.processBidirectionalText&&null!=ra.processStyledBidirectionalText},getPluginURL:function(){return ta}},sa=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Un,this.transition={})};sa.prototype.isSupportedScript=function(t){return function(t,e){for(var i=0,n=t;i<n.length;i+=1)if(!Dn(n[i].charCodeAt(0),e))return!1;return!0}(t,ra.isLoaded())},sa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},sa.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),i=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*e}};var la=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Ji(t))return new Di(t,e);if(Ei(t)){var i=Ki(t,e);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=te.parse(t)),{kind:"constant",evaluate:function(){return n}}}(void 0===e?t.specification.default:e,t.specification)};la.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},la.prototype.possiblyEvaluate=function(t,e,i){return this.property.possiblyEvaluate(this,t,e,i)};var ca=function(t){this.property=t,this.value=new la(t,void 0)};ca.prototype.transitioned=function(t,e){return new da(this.property,this.value,e,h({},t.transition,this.transition),t.now)},ca.prototype.untransitioned=function(){return new da(this.property,this.value,null,{},0)};var ua=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};ua.prototype.getValue=function(t){return x(this._values[t].value.value)},ua.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ca(this._values[t].property)),this._values[t].value=new la(this._values[t].property,null===e?void 0:x(e))},ua.prototype.getTransition=function(t){return x(this._values[t].transition)},ua.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new ca(this._values[t].property)),this._values[t].transition=x(e)||void 0},ua.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e],a=this.getValue(n);void 0!==a&&(t[n]=a);var o=this.getTransition(n);void 0!==o&&(t[n+"-transition"]=o)}return t},ua.prototype.transitioned=function(t,e){for(var i=new ha(this._properties),n=0,a=Object.keys(this._values);n<a.length;n+=1){var o=a[n];i._values[o]=this._values[o].transitioned(t,e._values[o])}return i},ua.prototype.untransitioned=function(){for(var t=new ha(this._properties),e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e];t._values[n]=this._values[n].untransitioned()}return t};var da=function(t,e,i,n,a){this.property=t,this.value=e,this.begin=a+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=i)};da.prototype.possiblyEvaluate=function(t,e,i){var n=t.now||0,a=this.value.possiblyEvaluate(t,e,i),o=this.prior;if(o){if(n>this.end)return this.prior=null,a;if(this.value.isDataDriven())return this.prior=null,a;if(n<this.begin)return o.possiblyEvaluate(t,e,i);var r=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,i),a,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)}(r))}return a};var ha=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};ha.prototype.possiblyEvaluate=function(t,e,i){for(var n=new ba(this._properties),a=0,o=Object.keys(this._values);a<o.length;a+=1){var r=o[a];n._values[r]=this._values[r].possiblyEvaluate(t,e,i)}return n},ha.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var pa=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};pa.prototype.getValue=function(t){return x(this._values[t].value)},pa.prototype.setValue=function(t,e){this._values[t]=new la(this._values[t].property,null===e?void 0:x(e))},pa.prototype.serialize=function(){for(var t={},e=0,i=Object.keys(this._values);e<i.length;e+=1){var n=i[e],a=this.getValue(n);void 0!==a&&(t[n]=a)}return t},pa.prototype.possiblyEvaluate=function(t,e,i){for(var n=new ba(this._properties),a=0,o=Object.keys(this._values);a<o.length;a+=1){var r=o[a];n._values[r]=this._values[r].possiblyEvaluate(t,e,i)}return n};var ma=function(t,e,i){this.property=t,this.value=e,this.parameters=i};ma.prototype.isConstant=function(){return"constant"===this.value.kind},ma.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},ma.prototype.evaluate=function(t,e,i,n){return this.property.evaluate(this.value,this.parameters,t,e,i,n)};var ba=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};ba.prototype.get=function(t){return this._values[t]};var ya=function(t){this.specification=t};ya.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},ya.prototype.interpolate=function(t,e,i){var n=Ee[this.specification.type];return n?n(t,e,i):t};var fa=function(t,e){this.specification=t,this.overrides=e};fa.prototype.possiblyEvaluate=function(t,e,i,n){return new ma(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},i,n)}:t.expression,e)},fa.prototype.interpolate=function(t,e,i){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new ma(this,{kind:"constant",value:void 0},t.parameters);var n=Ee[this.specification.type];return n?new ma(this,{kind:"constant",value:n(t.value.value,e.value.value,i)},t.parameters):t},fa.prototype.evaluate=function(t,e,i,n,a,o){return"constant"===t.kind?t.value:t.evaluate(e,i,n,a,o)};var ga=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,i,n){if(void 0===t.value)return new ma(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var a=t.expression.evaluate(e,null,{},i,n),o="resolvedImage"===t.property.specification.type&&"string"!=typeof a?a.name:a,r=this._calculate(o,o,o,e);return new ma(this,{kind:"constant",value:r},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new ma(this,{kind:"constant",value:s},e)}return new ma(this,t.expression,e)},e.prototype.evaluate=function(t,e,i,n,a,o){if("source"===t.kind){var r=t.evaluate(e,i,n,a,o);return this._calculate(r,r,r,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},i,n),t.evaluate({zoom:Math.floor(e.zoom)},i,n),t.evaluate({zoom:Math.floor(e.zoom)+1},i,n),e):t.value},e.prototype._calculate=function(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},e.prototype.interpolate=function(t){return t},e}(fa),Ia=function(t){this.specification=t};Ia.prototype.possiblyEvaluate=function(t,e,i,n){if(void 0!==t.value){if("constant"===t.expression.kind){var a=t.expression.evaluate(e,null,{},i,n);return this._calculate(a,a,a,e)}return this._calculate(t.expression.evaluate(new sa(Math.floor(e.zoom-1),e)),t.expression.evaluate(new sa(Math.floor(e.zoom),e)),t.expression.evaluate(new sa(Math.floor(e.zoom+1),e)),e)}},Ia.prototype._calculate=function(t,e,i,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:i,to:e}},Ia.prototype.interpolate=function(t){return t};var va=function(t){this.specification=t};va.prototype.possiblyEvaluate=function(t,e,i,n){return!!t.expression.evaluate(e,null,{},i,n)},va.prototype.interpolate=function(){return!1};var xa=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var i=t[e];i.specification.overridable&&this.overridableProperties.push(e);var n=this.defaultPropertyValues[e]=new la(i,void 0),a=this.defaultTransitionablePropertyValues[e]=new ca(i);this.defaultTransitioningPropertyValues[e]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};Hn("DataDrivenProperty",fa),Hn("DataConstantProperty",ya),Hn("CrossFadedDataDrivenProperty",ga),Hn("CrossFadedProperty",Ia),Hn("ColorRampProperty",va);var Za=function(t){function e(e,i){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),i.layout&&(this._unevaluatedLayout=new pa(i.layout)),i.paint)){for(var n in this._transitionablePaint=new ua(i.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var a in e.layout)this.setLayoutProperty(a,e.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ba(i.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,i){void 0===i&&(i={}),null!=e&&this._validate(Ln,"layers."+this.id+".layout."+t,t,e,i)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return g(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,i){if(void 0===i&&(i={}),null!=e&&this._validate(Bn,"layers."+this.id+".paint."+t,t,e,i))return!1;if(g(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var n=this._transitionablePaint._values[t],a="cross-faded-data-driven"===n.property.specification["property-type"],o=n.value.isDataDriven(),r=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||a||this._handleOverridablePaintPropertyUpdate(t,r,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,i){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),v(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,i,n,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Yn(this,t.call(Vn,{key:e,layerType:this.type,objectKey:i,value:n,styleSpec:St,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof ma&&zi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Vt),Ga={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},wa=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Wa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Xa(t,e){void 0===e&&(e=1);var i=0,n=0;return{members:t.map((function(t){var a=Ga[t.type].BYTES_PER_ELEMENT,o=i=_a(i,Math.max(e,a)),r=t.components||1;return n=Math.max(n,a),i+=a*r,{name:t.name,type:t.type,components:r,offset:o}})),size:_a(i,Math.max(n,e)),alignment:e}}function _a(t,e){return Math.ceil(t/e)*e}Wa.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Wa.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Wa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Wa.prototype.clear=function(){this.length=0},Wa.prototype.resize=function(t){this.reserve(t),this.length=t},Wa.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Wa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Va=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=i,t},e}(Wa);Va.prototype.bytesPerElement=4,Hn("StructArrayLayout2i4",Va);var Sa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,a){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=i,this.int16[o+2]=n,this.int16[o+3]=a,t},e}(Wa);Sa.prototype.bytesPerElement=8,Hn("StructArrayLayout4i8",Sa);var Ba=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a,o){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n,a,o)},e.prototype.emplace=function(t,e,i,n,a,o,r){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=n,this.int16[s+3]=a,this.int16[s+4]=o,this.int16[s+5]=r,t},e}(Wa);Ba.prototype.bytesPerElement=12,Hn("StructArrayLayout2i4i12",Ba);var La=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a,o){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n,a,o)},e.prototype.emplace=function(t,e,i,n,a,o,r){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.uint8[l+4]=n,this.uint8[l+5]=a,this.uint8[l+6]=o,this.uint8[l+7]=r,t},e}(Wa);La.prototype.bytesPerElement=8,Hn("StructArrayLayout2i4ub8",La);var Ya=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=i,t},e}(Wa);Ya.prototype.bytesPerElement=8,Hn("StructArrayLayout2f8",Ya);var za=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a,o,r,s,l,c){var u=this.length;return this.resize(u+1),this.emplace(u,t,e,i,n,a,o,r,s,l,c)},e.prototype.emplace=function(t,e,i,n,a,o,r,s,l,c,u){var d=10*t;return this.uint16[d+0]=e,this.uint16[d+1]=i,this.uint16[d+2]=n,this.uint16[d+3]=a,this.uint16[d+4]=o,this.uint16[d+5]=r,this.uint16[d+6]=s,this.uint16[d+7]=l,this.uint16[d+8]=c,this.uint16[d+9]=u,t},e}(Wa);za.prototype.bytesPerElement=20,Hn("StructArrayLayout10ui20",za);var Ra=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a,o,r,s,l,c,u,d){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,i,n,a,o,r,s,l,c,u,d)},e.prototype.emplace=function(t,e,i,n,a,o,r,s,l,c,u,d,h){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=i,this.int16[p+2]=n,this.int16[p+3]=a,this.uint16[p+4]=o,this.uint16[p+5]=r,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=d,this.int16[p+11]=h,t},e}(Wa);Ra.prototype.bytesPerElement=24,Hn("StructArrayLayout4i4ui4i24",Ra);var Ca=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var a=3*t;return this.float32[a+0]=e,this.float32[a+1]=i,this.float32[a+2]=n,t},e}(Wa);Ca.prototype.bytesPerElement=12,Hn("StructArrayLayout3f12",Ca);var Ma=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Wa);Ma.prototype.bytesPerElement=4,Hn("StructArrayLayout1ul4",Ma);var Ja=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a,o,r,s,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,i,n,a,o,r,s,l)},e.prototype.emplace=function(t,e,i,n,a,o,r,s,l,c){var u=10*t,d=5*t;return this.int16[u+0]=e,this.int16[u+1]=i,this.int16[u+2]=n,this.int16[u+3]=a,this.int16[u+4]=o,this.int16[u+5]=r,this.uint32[d+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,t},e}(Wa);Ja.prototype.bytesPerElement=20,Hn("StructArrayLayout6i1ul2ui20",Ja);var Ha=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a,o){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,i,n,a,o)},e.prototype.emplace=function(t,e,i,n,a,o,r){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=i,this.int16[s+2]=n,this.int16[s+3]=a,this.int16[s+4]=o,this.int16[s+5]=r,t},e}(Wa);Ha.prototype.bytesPerElement=12,Hn("StructArrayLayout2i2i2i12",Ha);var ka=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,i,n,a)},e.prototype.emplace=function(t,e,i,n,a,o){var r=4*t,s=8*t;return this.float32[r+0]=e,this.float32[r+1]=i,this.float32[r+2]=n,this.int16[s+6]=a,this.int16[s+7]=o,t},e}(Wa);ka.prototype.bytesPerElement=16,Hn("StructArrayLayout2f1f2i16",ka);var ja=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,a){var o=12*t,r=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=i,this.float32[r+1]=n,this.float32[r+2]=a,t},e}(Wa);ja.prototype.bytesPerElement=12,Hn("StructArrayLayout2ub2f12",ja);var Fa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var a=3*t;return this.uint16[a+0]=e,this.uint16[a+1]=i,this.uint16[a+2]=n,t},e}(Wa);Fa.prototype.bytesPerElement=6,Hn("StructArrayLayout3ui6",Fa);var Na=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y){var f=this.length;return this.resize(f+1),this.emplace(f,t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y)},e.prototype.emplace=function(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f){var g=24*t,I=12*t,v=48*t;return this.int16[g+0]=e,this.int16[g+1]=i,this.uint16[g+2]=n,this.uint16[g+3]=a,this.uint32[I+2]=o,this.uint32[I+3]=r,this.uint32[I+4]=s,this.uint16[g+10]=l,this.uint16[g+11]=c,this.uint16[g+12]=u,this.float32[I+7]=d,this.float32[I+8]=h,this.uint8[v+36]=p,this.uint8[v+37]=m,this.uint8[v+38]=b,this.uint32[I+10]=y,this.int16[g+22]=f,t},e}(Wa);Na.prototype.bytesPerElement=48,Hn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Na);var Ta=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f,g,I,v,x,Z,G,w,W,X,_){var V=this.length;return this.resize(V+1),this.emplace(V,t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f,g,I,v,x,Z,G,w,W,X,_)},e.prototype.emplace=function(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f,g,I,v,x,Z,G,w,W,X,_,V){var S=34*t,B=17*t;return this.int16[S+0]=e,this.int16[S+1]=i,this.int16[S+2]=n,this.int16[S+3]=a,this.int16[S+4]=o,this.int16[S+5]=r,this.int16[S+6]=s,this.int16[S+7]=l,this.uint16[S+8]=c,this.uint16[S+9]=u,this.uint16[S+10]=d,this.uint16[S+11]=h,this.uint16[S+12]=p,this.uint16[S+13]=m,this.uint16[S+14]=b,this.uint16[S+15]=y,this.uint16[S+16]=f,this.uint16[S+17]=g,this.uint16[S+18]=I,this.uint16[S+19]=v,this.uint16[S+20]=x,this.uint16[S+21]=Z,this.uint16[S+22]=G,this.uint32[B+12]=w,this.float32[B+13]=W,this.float32[B+14]=X,this.float32[B+15]=_,this.float32[B+16]=V,t},e}(Wa);Ta.prototype.bytesPerElement=68,Hn("StructArrayLayout8i15ui1ul4f68",Ta);var Ua=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Wa);Ua.prototype.bytesPerElement=4,Hn("StructArrayLayout1f4",Ua);var Ea=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var a=3*t;return this.int16[a+0]=e,this.int16[a+1]=i,this.int16[a+2]=n,t},e}(Wa);Ea.prototype.bytesPerElement=6,Hn("StructArrayLayout3i6",Ea);var Aa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,i)},e.prototype.emplace=function(t,e,i,n){var a=4*t;return this.uint32[2*t+0]=e,this.uint16[a+2]=i,this.uint16[a+3]=n,t},e}(Wa);Aa.prototype.bytesPerElement=8,Hn("StructArrayLayout1ul2ui8",Aa);var Oa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var i=this.length;return this.resize(i+1),this.emplace(i,t,e)},e.prototype.emplace=function(t,e,i){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=i,t},e}(Wa);Oa.prototype.bytesPerElement=4,Hn("StructArrayLayout2ui4",Oa);var Pa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Wa);Pa.prototype.bytesPerElement=2,Hn("StructArrayLayout1ui2",Pa);var Ka=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,i,n){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,i,n)},e.prototype.emplace=function(t,e,i,n,a){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=i,this.float32[o+2]=n,this.float32[o+3]=a,t},e}(Wa);Ka.prototype.bytesPerElement=16,Hn("StructArrayLayout4f16",Ka);var Da=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new a(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,i),e}(wa);Da.prototype.size=20;var Qa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Da(this,t)},e}(Ja);Hn("CollisionBoxArray",Qa);var qa=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,i),e}(wa);qa.prototype.size=48;var $a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new qa(this,t)},e}(Na);Hn("PlacedSymbolArray",$a);var to=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,i),e}(wa);to.prototype.size=68;var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new to(this,t)},e}(Ta);Hn("SymbolInstanceArray",eo);var io=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Ua);Hn("GlyphOffsetArray",io);var no=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Ea);Hn("SymbolLineVertexArray",no);var ao=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,i),e}(wa);ao.prototype.size=8;var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ao(this,t)},e}(Aa);Hn("FeatureIndexArray",oo);var ro=Xa([{name:"a_pos",components:2,type:"Int16"}],4).members,so=function(t){void 0===t&&(t=[]),this.segments=t};function lo(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}so.prototype.prepareSegment=function(t,e,i,n){var a=this.segments[this.segments.length-1];return t>so.MAX_VERTEX_ARRAY_LENGTH&&G("Max vertices per segment is "+so.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!a||a.vertexLength+t>so.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==n)&&(a={vertexOffset:e.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==n&&(a.sortKey=n),this.segments.push(a)),a},so.prototype.get=function(){return this.segments},so.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var i=e[t];for(var n in i.vaos)i.vaos[n].destroy()}},so.simpleSegment=function(t,e,i,n){return new so([{vertexOffset:t,primitiveOffset:e,vertexLength:i,primitiveLength:n,vaos:{},sortKey:0}])},so.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Hn("SegmentVector",so);var co=Xa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),uo=e((function(t){t.exports=function(t,e){var i,n,a,o,r,s,l,c;for(n=t.length-(i=3&t.length),a=e,r=3432918353,s=461845907,c=0;c<n;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,a=27492+(65535&(o=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return a^=t.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}})),ho=e((function(t){t.exports=function(t,e){for(var i,n=t.length,a=e^n,o=0;n>=4;)i=1540483477*(65535&(i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:a^=(255&t.charCodeAt(o+2))<<16;case 2:a^=(255&t.charCodeAt(o+1))<<8;case 1:a=1540483477*(65535&(a^=255&t.charCodeAt(o)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0}})),po=uo,mo=ho;po.murmur3=uo,po.murmur2=mo;var bo=function(){this.ids=[],this.positions=[],this.indexed=!1};bo.prototype.add=function(t,e,i,n){this.ids.push(fo(t)),this.positions.push(e,i,n)},bo.prototype.getPositions=function(t){for(var e=fo(t),i=0,n=this.ids.length-1;i<n;){var a=i+n>>1;this.ids[a]>=e?n=a:i=a+1}for(var o=[];this.ids[i]===e;)o.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return o},bo.serialize=function(t,e){var i=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,i,n,a){for(;n<a;){for(var o=e[n+a>>1],r=n-1,s=a+1;;){do{r++}while(e[r]<o);do{s--}while(e[s]>o);if(r>=s)break;go(e,r,s),go(i,3*r,3*s),go(i,3*r+1,3*s+1),go(i,3*r+2,3*s+2)}s-n<a-s?(t(e,i,n,s),n=s+1):(t(e,i,s+1,a),a=s)}}(i,n,0,i.length-1),e&&e.push(i.buffer,n.buffer),{ids:i,positions:n}},bo.deserialize=function(t){var e=new bo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var yo=Math.pow(2,53)-1;function fo(t){var e=+t;return!isNaN(e)&&e<=yo?e:po(String(t))}function go(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}Hn("FeaturePositionMap",bo);var Io=function(t,e){this.gl=t.gl,this.location=e},vo=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Io),xo=function(t){function e(e,i){t.call(this,e,i),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Io),Zo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Io),Go=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Io),wo=function(t){function e(e,i){t.call(this,e,i),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Io),Wo=function(t){function e(e,i){t.call(this,e,i),this.current=te.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Io),Xo=new Float32Array(16),_o=function(t){function e(e,i){t.call(this,e,i),this.current=Xo}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Io);function Vo(t){return[lo(255*t.r,255*t.g),lo(255*t.b,255*t.a)]}var So=function(t,e,i){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=i};So.prototype.setUniform=function(t,e,i){t.set(i.constantOr(this.value))},So.prototype.getBinding=function(t,e,i){return"color"===this.type?new Wo(t,e):new xo(t,e)};var Bo=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Bo.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Bo.prototype.setUniform=function(t,e,i,n){var a="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;a&&t.set(a)},Bo.prototype.getBinding=function(t,e,i){return"u_pattern"===i.substr(0,9)?new wo(t,e):new xo(t,e)};var Lo=function(t,e,i,n){this.expression=t,this.type=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new n};Lo.prototype.populatePaintArray=function(t,e,i,n,a){var o=this.paintVertexArray.length,r=this.expression.evaluate(new sa(0),e,{},n,[],a);this.paintVertexArray.resize(t),this._setPaintValue(o,t,r)},Lo.prototype.updatePaintArray=function(t,e,i,n){var a=this.expression.evaluate({zoom:0},i,n);this._setPaintValue(t,e,a)},Lo.prototype._setPaintValue=function(t,e,i){if("color"===this.type)for(var n=Vo(i),a=t;a<e;a++)this.paintVertexArray.emplace(a,n[0],n[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Lo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Lo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Yo=function(t,e,i,n,a,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=i,this.useIntegerZoom=n,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new o};Yo.prototype.populatePaintArray=function(t,e,i,n,a){var o=this.expression.evaluate(new sa(this.zoom),e,{},n,[],a),r=this.expression.evaluate(new sa(this.zoom+1),e,{},n,[],a),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,r)},Yo.prototype.updatePaintArray=function(t,e,i,n){var a=this.expression.evaluate({zoom:this.zoom},i,n),o=this.expression.evaluate({zoom:this.zoom+1},i,n);this._setPaintValue(t,e,a,o)},Yo.prototype._setPaintValue=function(t,e,i,n){if("color"===this.type)for(var a=Vo(i),o=Vo(n),r=t;r<e;r++)this.paintVertexArray.emplace(r,a[0],a[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,i,n);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(n))}},Yo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Yo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Yo.prototype.setUniform=function(t,e){var i=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,n=u(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);t.set(n)},Yo.prototype.getBinding=function(t,e,i){return new xo(t,e)};var zo=function(t,e,i,n,a,o){this.expression=t,this.type=e,this.useIntegerZoom=i,this.zoom=n,this.layerId=o,this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};zo.prototype.populatePaintArray=function(t,e,i){var n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(n,t,e.patterns&&e.patterns[this.layerId],i)},zo.prototype.updatePaintArray=function(t,e,i,n,a){this._setPaintValues(t,e,i.patterns&&i.patterns[this.layerId],a)},zo.prototype._setPaintValues=function(t,e,i,n){if(n&&i){var a=n[i.min],o=n[i.mid],r=n[i.max];if(a&&o&&r)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],o.pixelRatio,r.pixelRatio)}},zo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,co.members,this.expression.isStateDependent))},zo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ro=function(t,e,i){this.binders={},this._buffers=[];var n=[];for(var a in t.paint._values)if(i(a)){var o=t.paint.get(a);if(o instanceof ma&&zi(o.property.specification)){var r=Mo(a,t.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],d="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[a]=d?new Bo(s.value,r):new So(s.value,r,l),n.push("/u_"+a);else if("source"===s.kind||d){var h=Jo(a,l,"source");this.binders[a]=d?new zo(s,l,c,e,h,t.id):new Lo(s,r,l,h),n.push("/a_"+a)}else{var p=Jo(a,l,"composite");this.binders[a]=new Yo(s,r,l,c,e,p),n.push("/z_"+a)}}}this.cacheKey=n.sort().join("")};Ro.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Lo||e instanceof Yo?e.maxValue:0},Ro.prototype.populatePaintArrays=function(t,e,i,n,a){for(var o in this.binders){var r=this.binders[o];(r instanceof Lo||r instanceof Yo||r instanceof zo)&&r.populatePaintArray(t,e,i,n,a)}},Ro.prototype.setConstantPatternPositions=function(t,e){for(var i in this.binders){var n=this.binders[i];n instanceof Bo&&n.setConstantPatternPositions(t,e)}},Ro.prototype.updatePaintArrays=function(t,e,i,n,a){var o=!1;for(var r in t)for(var s=0,l=e.getPositions(r);s<l.length;s+=1){var c=l[s],u=i.feature(c.index);for(var d in this.binders){var h=this.binders[d];if((h instanceof Lo||h instanceof Yo||h instanceof zo)&&!0===h.expression.isStateDependent){var p=n.paint.get(d);h.expression=p.value,h.updatePaintArray(c.start,c.end,u,t[r],a),o=!0}}}return o},Ro.prototype.defines=function(){var t=[];for(var e in this.binders){var i=this.binders[e];(i instanceof So||i instanceof Bo)&&t.push.apply(t,i.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},Ro.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof Lo||i instanceof Yo)for(var n=0;n<i.paintVertexAttributes.length;n++)t.push(i.paintVertexAttributes[n].name);else if(i instanceof zo)for(var a=0;a<co.members.length;a++)t.push(co.members[a].name)}return t},Ro.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var i=this.binders[e];if(i instanceof So||i instanceof Bo||i instanceof Yo)for(var n=0,a=i.uniformNames;n<a.length;n+=1)t.push(a[n])}return t},Ro.prototype.getPaintVertexBuffers=function(){return this._buffers},Ro.prototype.getUniforms=function(t,e){var i=[];for(var n in this.binders){var a=this.binders[n];if(a instanceof So||a instanceof Bo||a instanceof Yo)for(var o=0,r=a.uniformNames;o<r.length;o+=1){var s=r[o];if(e[s]){var l=a.getBinding(t,e[s],s);i.push({name:s,property:n,binding:l})}}}return i},Ro.prototype.setUniforms=function(t,e,i,n){for(var a=0,o=e;a<o.length;a+=1){var r=o[a],s=r.name,l=r.property;this.binders[l].setUniform(r.binding,n,i.get(l),s)}},Ro.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var i=this.binders[e];if(t&&i instanceof zo){var n=2===t.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;n&&this._buffers.push(n)}else(i instanceof Lo||i instanceof Yo)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Ro.prototype.upload=function(t){for(var e in this.binders){var i=this.binders[e];(i instanceof Lo||i instanceof Yo||i instanceof zo)&&i.upload(t)}this.updatePaintBuffers()},Ro.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Lo||e instanceof Yo||e instanceof zo)&&e.destroy()}};var Co=function(t,e,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var n=0,a=t;n<a.length;n+=1){var o=a[n];this.programConfigurations[o.id]=new Ro(o,e,i)}this.needsUpload=!1,this._featureMap=new bo,this._bufferOffset=0};function Mo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Jo(t,e,i){var n={color:{source:Ya,composite:Ka},number:{source:Ua,composite:Ya}},a=function(t){return{"line-pattern":{source:za,composite:za},"fill-pattern":{source:za,composite:za},"fill-extrusion-pattern":{source:za,composite:za}}[t]}(t);return a&&a[i]||n[e][i]}Co.prototype.populatePaintArrays=function(t,e,i,n,a,o){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,n,a,o);void 0!==e.id&&this._featureMap.add(e.id,i,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Co.prototype.updatePaintArrays=function(t,e,i,n){for(var a=0,o=i;a<o.length;a+=1){var r=o[a];this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,e,r,n)||this.needsUpload}},Co.prototype.get=function(t){return this.programConfigurations[t]},Co.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Co.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Hn("ConstantBinder",So),Hn("CrossFadedConstantBinder",Bo),Hn("SourceExpressionBinder",Lo),Hn("CrossFadedCompositeBinder",zo),Hn("CompositeExpressionBinder",Yo),Hn("ProgramConfiguration",Ro,{omit:["_buffers"]}),Hn("ProgramConfigurationSet",Co);var Ho=Math.pow(2,14)-1,ko=-Ho-1;function jo(t){for(var e=8192/t.extent,i=t.loadGeometry(),n=0;n<i.length;n++)for(var a=i[n],o=0;o<a.length;o++){var r=a[o],s=Math.round(r.x*e),l=Math.round(r.y*e);r.x=u(s,ko,Ho),r.y=u(l,ko,Ho),(s<r.x||s>r.x+1||l<r.y||l>r.y+1)&&G("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function Fo(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?jo(t):[]}}function No(t,e,i,n,a){t.emplaceBack(2*e+(n+1)/2,2*i+(a+1)/2)}var To=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Va,this.indexArray=new Fa,this.segments=new so,this.programConfigurations=new Co(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Uo(t,e){for(var i=0;i<t.length;i++)if($o(e,t[i]))return!0;for(var n=0;n<e.length;n++)if($o(t,e[n]))return!0;return!!Po(t,e)}function Eo(t,e,i){return!!$o(t,e)||!!Do(e,t,i)}function Ao(t,e){if(1===t.length)return qo(e,t[0]);for(var i=0;i<e.length;i++)for(var n=e[i],a=0;a<n.length;a++)if($o(t,n[a]))return!0;for(var o=0;o<t.length;o++)if(qo(e,t[o]))return!0;for(var r=0;r<e.length;r++)if(Po(t,e[r]))return!0;return!1}function Oo(t,e,i){if(t.length>1){if(Po(t,e))return!0;for(var n=0;n<e.length;n++)if(Do(e[n],t,i))return!0}for(var a=0;a<t.length;a++)if(Do(t[a],e,i))return!0;return!1}function Po(t,e){if(0===t.length||0===e.length)return!1;for(var i=0;i<t.length-1;i++)for(var n=t[i],a=t[i+1],o=0;o<e.length-1;o++)if(Ko(n,a,e[o],e[o+1]))return!0;return!1}function Ko(t,e,i,n){return w(t,i,n)!==w(e,i,n)&&w(t,e,i)!==w(t,e,n)}function Do(t,e,i){var n=i*i;if(1===e.length)return t.distSqr(e[0])<n;for(var a=1;a<e.length;a++)if(Qo(t,e[a-1],e[a])<n)return!0;return!1}function Qo(t,e,i){var n=e.distSqr(i);if(0===n)return t.distSqr(e);var a=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;return t.distSqr(a<0?e:a>1?i:i.sub(e)._mult(a)._add(e))}function qo(t,e){for(var i,n,a,o=!1,r=0;r<t.length;r++)for(var s=0,l=(i=t[r]).length-1;s<i.length;l=s++)(n=i[s]).y>e.y!=(a=i[l]).y>e.y&&e.x<(a.x-n.x)*(e.y-n.y)/(a.y-n.y)+n.x&&(o=!o);return o}function $o(t,e){for(var i=!1,n=0,a=t.length-1;n<t.length;a=n++){var o=t[n],r=t[a];o.y>e.y!=r.y>e.y&&e.x<(r.x-o.x)*(e.y-o.y)/(r.y-o.y)+o.x&&(i=!i)}return i}function tr(t,e,i){var n=i[0],a=i[2];if(t.x<n.x&&e.x<n.x||t.x>a.x&&e.x>a.x||t.y<n.y&&e.y<n.y||t.y>a.y&&e.y>a.y)return!1;var o=w(t,e,i[0]);return o!==w(t,e,i[1])||o!==w(t,e,i[2])||o!==w(t,e,i[3])}function er(t,e,i){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:i.programConfigurations.get(e.id).getMaxValue(t)}function ir(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function nr(t,e,i,n,o){if(!e[0]&&!e[1])return t;var r=a.convert(e)._mult(o);"viewport"===i&&r._rotate(-n);for(var s=[],l=0;l<t.length;l++)s.push(t[l].sub(r));return s}To.prototype.populate=function(t,e,i){var n=this.layers[0],a=[],o=null;"circle"===n.type&&(o=n.layout.get("circle-sort-key"));for(var r=0,s=t;r<s.length;r+=1){var l=s[r],c=l.feature,u=l.id,d=l.index,h=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=Fo(c,p);if(this.layers[0]._featureFilter.filter(new sa(this.zoom),m,i)){var b=o?o.evaluate(m,{},i):void 0,y={id:u,properties:c.properties,type:c.type,sourceLayerIndex:h,index:d,geometry:p?m.geometry:jo(c),patterns:{},sortKey:b};a.push(y)}}o&&a.sort((function(t,e){return t.sortKey-e.sortKey}));for(var f=0,g=a;f<g.length;f+=1){var I=g[f],v=I.geometry,x=I.index,Z=I.sourceLayerIndex,G=t[x].feature;this.addFeature(I,v,x,i),e.featureIndex.insert(G,v,x,Z,this.index)}},To.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},To.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},To.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},To.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ro),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},To.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},To.prototype.addFeature=function(t,e,i,n){for(var a=0,o=e;a<o.length;a+=1)for(var r=0,s=o[a];r<s.length;r+=1){var l=s[r],c=l.x,u=l.y;if(!(c<0||c>=8192||u<0||u>=8192)){var d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=d.vertexLength;No(this.layoutVertexArray,c,u,-1,-1),No(this.layoutVertexArray,c,u,1,-1),No(this.layoutVertexArray,c,u,1,1),No(this.layoutVertexArray,c,u,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),d.vertexLength+=4,d.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,{},n)},Hn("CircleBucket",To,{omit:["layers"]});var ar=new xa({"circle-sort-key":new fa(St.layout_circle["circle-sort-key"])}),or={paint:new xa({"circle-radius":new fa(St.paint_circle["circle-radius"]),"circle-color":new fa(St.paint_circle["circle-color"]),"circle-blur":new fa(St.paint_circle["circle-blur"]),"circle-opacity":new fa(St.paint_circle["circle-opacity"]),"circle-translate":new ya(St.paint_circle["circle-translate"]),"circle-translate-anchor":new ya(St.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ya(St.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ya(St.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new fa(St.paint_circle["circle-stroke-width"]),"circle-stroke-color":new fa(St.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new fa(St.paint_circle["circle-stroke-opacity"])}),layout:ar},rr="undefined"!=typeof Float32Array?Float32Array:Array;function sr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lr(t,e,i){var n=e[0],a=e[1],o=e[2],r=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],p=e[10],m=e[11],b=e[12],y=e[13],f=e[14],g=e[15],I=i[0],v=i[1],x=i[2],Z=i[3];return t[0]=I*n+v*s+x*d+Z*b,t[1]=I*a+v*l+x*h+Z*y,t[2]=I*o+v*c+x*p+Z*f,t[3]=I*r+v*u+x*m+Z*g,t[4]=(I=i[4])*n+(v=i[5])*s+(x=i[6])*d+(Z=i[7])*b,t[5]=I*a+v*l+x*h+Z*y,t[6]=I*o+v*c+x*p+Z*f,t[7]=I*r+v*u+x*m+Z*g,t[8]=(I=i[8])*n+(v=i[9])*s+(x=i[10])*d+(Z=i[11])*b,t[9]=I*a+v*l+x*h+Z*y,t[10]=I*o+v*c+x*p+Z*f,t[11]=I*r+v*u+x*m+Z*g,t[12]=(I=i[12])*n+(v=i[13])*s+(x=i[14])*d+(Z=i[15])*b,t[13]=I*a+v*l+x*h+Z*y,t[14]=I*o+v*c+x*p+Z*f,t[15]=I*r+v*u+x*m+Z*g,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,i=arguments.length;i--;)e+=t[i]*t[i];return Math.sqrt(e)});var cr,ur=lr;function dr(t,e,i){var n=e[0],a=e[1],o=e[2],r=e[3];return t[0]=i[0]*n+i[4]*a+i[8]*o+i[12]*r,t[1]=i[1]*n+i[5]*a+i[9]*o+i[13]*r,t[2]=i[2]*n+i[6]*a+i[10]*o+i[14]*r,t[3]=i[3]*n+i[7]*a+i[11]*o+i[15]*r,t}cr=new rr(3),rr!=Float32Array&&(cr[0]=0,cr[1]=0,cr[2]=0),function(){var t=new rr(4);rr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var hr=(function(){var t=new rr(2);rr!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,or)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new To(t)},e.prototype.queryRadius=function(t){var e=t;return er("circle-radius",this,e)+er("circle-stroke-width",this,e)+ir(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,n,a,o,r,s){for(var l=nr(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,r),c=this.paint.get("circle-radius").evaluate(e,i)+this.paint.get("circle-stroke-width").evaluate(e,i),u="map"===this.paint.get("circle-pitch-alignment"),d=u?l:function(t,e){return t.map((function(t){return pr(t,e)}))}(l,s),h=u?c*r:c,p=0,m=n;p<m.length;p+=1)for(var b=0,y=m[p];b<y.length;b+=1){var f=y[b],g=u?f:pr(f,s),I=h,v=dr([],[f.x,f.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?I*=v[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(I*=o.cameraToCenterDistance/v[3]),Eo(d,g,I))return!0}return!1},e}(Za));function pr(t,e){var i=dr([],[t.x,t.y,0,1],e);return new a(i[0]/i[3],i[1]/i[3])}var mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(To);function br(t,e,i,n){var a=e.width,o=e.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==a*o*i)throw new RangeError("mismatched image size")}else n=new Uint8Array(a*o*i);return t.width=a,t.height=o,t.data=n,t}function yr(t,e,i){var n=e.width,a=e.height;if(n!==t.width||a!==t.height){var o=br({},{width:n,height:a},i);fr(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,a)},i),t.width=n,t.height=a,t.data=o.data}}function fr(t,e,i,n,a,o){if(0===a.width||0===a.height)return e;if(a.width>t.width||a.height>t.height||i.x>t.width-a.width||i.y>t.height-a.height)throw new RangeError("out of range source coordinates for image copy");if(a.width>e.width||a.height>e.height||n.x>e.width-a.width||n.y>e.height-a.height)throw new RangeError("out of range destination coordinates for image copy");for(var r=t.data,s=e.data,l=0;l<a.height;l++)for(var c=((i.y+l)*t.width+i.x)*o,u=((n.y+l)*e.width+n.x)*o,d=0;d<a.width*o;d++)s[u+d]=r[c+d];return e}Hn("HeatmapBucket",mr,{omit:["layers"]});var gr=function(t,e){br(this,t,1,e)};gr.prototype.resize=function(t){yr(this,t,1)},gr.prototype.clone=function(){return new gr({width:this.width,height:this.height},new Uint8Array(this.data))},gr.copy=function(t,e,i,n,a){fr(t,e,i,n,a,1)};var Ir=function(t,e){br(this,t,4,e)};Ir.prototype.resize=function(t){yr(this,t,4)},Ir.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},Ir.prototype.clone=function(){return new Ir({width:this.width,height:this.height},new Uint8Array(this.data))},Ir.copy=function(t,e,i,n,a){fr(t,e,i,n,a,4)},Hn("AlphaImage",gr),Hn("RGBAImage",Ir);var vr={paint:new xa({"heatmap-radius":new fa(St.paint_heatmap["heatmap-radius"]),"heatmap-weight":new fa(St.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ya(St.paint_heatmap["heatmap-intensity"]),"heatmap-color":new va(St.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ya(St.paint_heatmap["heatmap-opacity"])})};function xr(t){var e={},i=t.resolution||256,n=t.clips?t.clips.length:1,a=t.image||new Ir({width:i,height:n}),o=function(i,n,o){e[t.evaluationKey]=o;var r=t.expression.evaluate(e);a.data[i+n+0]=Math.floor(255*r.r/r.a),a.data[i+n+1]=Math.floor(255*r.g/r.a),a.data[i+n+2]=Math.floor(255*r.b/r.a),a.data[i+n+3]=Math.floor(255*r.a)};if(t.clips)for(var r=0,s=0;r<n;++r,s+=4*i)for(var l=0,c=0;l<i;l++,c+=4){var u=l/(i-1),d=t.clips[r];o(s,c,d.start*(1-u)+d.end*u)}else for(var h=0,p=0;h<i;h++,p+=4)o(0,p,h/(i-1));return a}var Zr=function(t){function e(e){t.call(this,e,vr),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new mr(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=xr({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Za),Gr={paint:new xa({"hillshade-illumination-direction":new ya(St.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ya(St.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ya(St.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ya(St.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ya(St.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ya(St.paint_hillshade["hillshade-accent-color"])})},wr=function(t){function e(e){t.call(this,e,Gr)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Za),Wr=Xa([{name:"a_pos",components:2,type:"Int16"}],4).members,Xr=Vr,_r=Vr;function Vr(t,e,i){i=i||2;var n,a,o,r,s,l,c,u=e&&e.length,d=u?e[0]*i:t.length,h=Sr(t,0,d,i,!0),p=[];if(!h||h.next===h.prev)return p;if(u&&(h=function(t,e,i,n){var a,o,r,s=[];for(a=0,o=e.length;a<o;a++)(r=Sr(t,e[a]*n,a<o-1?e[a+1]*n:t.length,n,!1))===r.next&&(r.steiner=!0),s.push(jr(r));for(s.sort(Mr),a=0;a<s.length;a++)Jr(s[a],i),i=Br(i,i.next);return i}(t,e,h,i)),t.length>80*i){n=o=t[0],a=r=t[1];for(var m=i;m<d;m+=i)(s=t[m])<n&&(n=s),(l=t[m+1])<a&&(a=l),s>o&&(o=s),l>r&&(r=l);c=0!==(c=Math.max(o-n,r-a))?1/c:0}return Lr(h,p,i,n,a,c),p}function Sr(t,e,i,n,a){var o,r;if(a===$r(t,e,i,n)>0)for(o=e;o<i;o+=n)r=Dr(o,t[o],t[o+1],r);else for(o=i-n;o>=e;o-=n)r=Dr(o,t[o],t[o+1],r);return r&&Ur(r,r.next)&&(Qr(r),r=r.next),r}function Br(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!Ur(n,n.next)&&0!==Tr(n.prev,n,n.next))n=n.next;else{if(Qr(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function Lr(t,e,i,n,a,o,r){if(t){!r&&o&&function(t,e,i,n){var a=t;do{null===a.z&&(a.z=kr(a.x,a.y,e,i,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function(t){var e,i,n,a,o,r,s,l,c=1;do{for(i=t,t=null,o=null,r=0;i;){for(r++,n=i,s=0,e=0;e<c&&(s++,n=n.nextZ);e++);for(l=c;s>0||l>0&&n;)0!==s&&(0===l||!n||i.z<=n.z)?(a=i,i=i.nextZ,s--):(a=n,n=n.nextZ,l--),o?o.nextZ=a:t=a,a.prevZ=o,o=a;i=n}o.nextZ=null,c*=2}while(r>1)}(a)}(t,n,a,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?zr(t,n,a,o):Yr(t))e.push(s.i/i),e.push(t.i/i),e.push(l.i/i),Qr(t),t=l.next,c=l.next;else if((t=l)===c){r?1===r?Lr(t=Rr(Br(t),e,i),e,i,n,a,o,2):2===r&&Cr(t,e,i,n,a,o):Lr(Br(t),e,i,n,a,o,1);break}}}function Yr(t){var e=t.prev,i=t,n=t.next;if(Tr(e,i,n)>=0)return!1;for(var a=t.next.next;a!==t.prev;){if(Fr(e.x,e.y,i.x,i.y,n.x,n.y,a.x,a.y)&&Tr(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function zr(t,e,i,n){var a=t.prev,o=t,r=t.next;if(Tr(a,o,r)>=0)return!1;for(var s=a.x>o.x?a.x>r.x?a.x:r.x:o.x>r.x?o.x:r.x,l=a.y>o.y?a.y>r.y?a.y:r.y:o.y>r.y?o.y:r.y,c=kr(a.x<o.x?a.x<r.x?a.x:r.x:o.x<r.x?o.x:r.x,a.y<o.y?a.y<r.y?a.y:r.y:o.y<r.y?o.y:r.y,e,i,n),u=kr(s,l,e,i,n),d=t.prevZ,h=t.nextZ;d&&d.z>=c&&h&&h.z<=u;){if(d!==t.prev&&d!==t.next&&Fr(a.x,a.y,o.x,o.y,r.x,r.y,d.x,d.y)&&Tr(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,h!==t.prev&&h!==t.next&&Fr(a.x,a.y,o.x,o.y,r.x,r.y,h.x,h.y)&&Tr(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&Fr(a.x,a.y,o.x,o.y,r.x,r.y,d.x,d.y)&&Tr(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;h&&h.z<=u;){if(h!==t.prev&&h!==t.next&&Fr(a.x,a.y,o.x,o.y,r.x,r.y,h.x,h.y)&&Tr(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function Rr(t,e,i){var n=t;do{var a=n.prev,o=n.next.next;!Ur(a,o)&&Er(a,n,n.next,o)&&Pr(a,o)&&Pr(o,a)&&(e.push(a.i/i),e.push(n.i/i),e.push(o.i/i),Qr(n),Qr(n.next),n=t=o),n=n.next}while(n!==t);return Br(n)}function Cr(t,e,i,n,a,o){var r=t;do{for(var s=r.next.next;s!==r.prev;){if(r.i!==s.i&&Nr(r,s)){var l=Kr(r,s);return r=Br(r,r.next),l=Br(l,l.next),Lr(r,e,i,n,a,o),void Lr(l,e,i,n,a,o)}s=s.next}r=r.next}while(r!==t)}function Mr(t,e){return t.x-e.x}function Jr(t,e){if(e=function(t,e){var i,n=e,a=t.x,o=t.y,r=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=a&&s>r){if(r=s,s===a){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(a===r)return i;var l,c=i,u=i.x,d=i.y,h=1/0;n=i;do{a>=n.x&&n.x>=u&&a!==n.x&&Fr(o<d?a:r,o,u,d,o<d?r:a,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(a-n.x),Pr(n,t)&&(l<h||l===h&&(n.x>i.x||n.x===i.x&&Hr(i,n)))&&(i=n,h=l)),n=n.next}while(n!==c);return i}(t,e)){var i=Kr(e,t);Br(e,e.next),Br(i,i.next)}}function Hr(t,e){return Tr(t.prev,t,e.prev)<0&&Tr(e.next,t,t.next)<0}function kr(t,e,i,n,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*a)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function jr(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function Fr(t,e,i,n,a,o,r,s){return(a-r)*(e-s)-(t-r)*(o-s)>=0&&(t-r)*(n-s)-(i-r)*(e-s)>=0&&(i-r)*(o-s)-(a-r)*(n-s)>=0}function Nr(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Er(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(Pr(t,e)&&Pr(e,t)&&function(t,e){var i=t,n=!1,a=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&a<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(Tr(t.prev,t,e.prev)||Tr(t,e.prev,e))||Ur(t,e)&&Tr(t.prev,t,t.next)>0&&Tr(e.prev,e,e.next)>0)}function Tr(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Ur(t,e){return t.x===e.x&&t.y===e.y}function Er(t,e,i,n){var a=Or(Tr(t,e,i)),o=Or(Tr(t,e,n)),r=Or(Tr(i,n,t)),s=Or(Tr(i,n,e));return a!==o&&r!==s||!(0!==a||!Ar(t,i,e))||!(0!==o||!Ar(t,n,e))||!(0!==r||!Ar(i,t,n))||!(0!==s||!Ar(i,e,n))}function Ar(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Or(t){return t>0?1:t<0?-1:0}function Pr(t,e){return Tr(t.prev,t,t.next)<0?Tr(t,e,t.next)>=0&&Tr(t,t.prev,e)>=0:Tr(t,e,t.prev)<0||Tr(t,t.next,e)<0}function Kr(t,e){var i=new qr(t.i,t.x,t.y),n=new qr(e.i,e.x,e.y),a=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=a,a.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function Dr(t,e,i,n){var a=new qr(t,e,i);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function Qr(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function qr(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $r(t,e,i,n){for(var a=0,o=e,r=i-n;o<i;o+=n)a+=(t[r]-t[o])*(t[o+1]+t[r+1]),r=o;return a}function ts(t,e,i,n,a){!function t(e,i,n,a,o){for(;a>n;){if(a-n>600){var r=a-n+1,s=i-n+1,l=Math.log(r),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(r-c)/r)*(s-r/2<0?-1:1);t(e,i,Math.max(n,Math.floor(i-s*c/r+u)),Math.min(a,Math.floor(i+(r-s)*c/r+u)),o)}var d=e[i],h=n,p=a;for(es(e,n,i),o(e[a],d)>0&&es(e,n,a);h<p;){for(es(e,h,p),h++,p--;o(e[h],d)<0;)h++;for(;o(e[p],d)>0;)p--}0===o(e[n],d)?es(e,n,p):es(e,++p,a),p<=i&&(n=p+1),i<=p&&(a=p-1)}}(t,e,i||0,n||t.length-1,a||is)}function es(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function is(t,e){return t<e?-1:t>e?1:0}function ns(t,e){var i=t.length;if(i<=1)return[t];for(var n,a,o=[],r=0;r<i;r++){var s=W(t[r]);0!==s&&(t[r].area=Math.abs(s),void 0===a&&(a=s<0),a===s<0?(n&&o.push(n),n=[t[r]]):n.push(t[r]))}if(n&&o.push(n),e>1)for(var l=0;l<o.length;l++)o[l].length<=e||(ts(o[l],e,1,o[l].length-1,as),o[l]=o[l].slice(0,e));return o}function as(t,e){return e.area-t.area}function os(t,e,i){for(var n=i.patternDependencies,a=!1,o=0,r=e;o<r.length;o+=1){var s=r[o].paint.get(t+"-pattern");s.isConstant()||(a=!0);var l=s.constantOr(null);l&&(a=!0,n[l.to]=!0,n[l.from]=!0)}return a}function rs(t,e,i,n,a){for(var o=a.patternDependencies,r=0,s=e;r<s.length;r+=1){var l=s[r],c=l.paint.get(t+"-pattern").value;if("constant"!==c.kind){var u=c.evaluate({zoom:n-1},i,{},a.availableImages),d=c.evaluate({zoom:n},i,{},a.availableImages),h=c.evaluate({zoom:n+1},i,{},a.availableImages);d=d&&d.name?d.name:d,h=h&&h.name?h.name:h,o[u=u&&u.name?u.name:u]=!0,o[d]=!0,o[h]=!0,i.patterns[l.id]={min:u,mid:d,max:h}}}return i}Vr.deviation=function(t,e,i,n){var a=e&&e.length,o=Math.abs($r(t,0,a?e[0]*i:t.length,i));if(a)for(var r=0,s=e.length;r<s;r++)o-=Math.abs($r(t,e[r]*i,r<s-1?e[r+1]*i:t.length,i));var l=0;for(r=0;r<n.length;r+=3){var c=n[r]*i,u=n[r+1]*i,d=n[r+2]*i;l+=Math.abs((t[c]-t[d])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[d+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Vr.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,a=0;a<t.length;a++){for(var o=0;o<t[a].length;o++)for(var r=0;r<e;r++)i.vertices.push(t[a][o][r]);a>0&&i.holes.push(n+=t[a-1].length)}return i},Xr.default=_r;var ss=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Va,this.indexArray=new Fa,this.indexArray2=new Oa,this.programConfigurations=new Co(t.layers,t.zoom),this.segments=new so,this.segments2=new so,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};ss.prototype.populate=function(t,e,i){this.hasPattern=os("fill",this.layers,e);for(var n=this.layers[0].layout.get("fill-sort-key"),a=[],o=0,r=t;o<r.length;o+=1){var s=r[o],l=s.feature,c=s.id,u=s.index,d=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,p=Fo(l,h);if(this.layers[0]._featureFilter.filter(new sa(this.zoom),p,i)){var m=n?n.evaluate(p,{},i,e.availableImages):void 0,b={id:c,properties:l.properties,type:l.type,sourceLayerIndex:d,index:u,geometry:h?p.geometry:jo(l),patterns:{},sortKey:m};a.push(b)}}n&&a.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,f=a;y<f.length;y+=1){var g=f[y],I=g.geometry,v=g.index,x=g.sourceLayerIndex;if(this.hasPattern){var Z=rs("fill",this.layers,g,this.zoom,e);this.patternFeatures.push(Z)}else this.addFeature(g,I,v,i,{});e.featureIndex.insert(t[v].feature,I,v,x,this.index)}},ss.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ss.prototype.addFeatures=function(t,e,i){for(var n=0,a=this.patternFeatures;n<a.length;n+=1){var o=a[n];this.addFeature(o,o.geometry,o.index,e,i)}},ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ss.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Wr),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ss.prototype.addFeature=function(t,e,i,n,a){for(var o=0,r=ns(e,500);o<r.length;o+=1){for(var s=r[o],l=0,c=0,u=s;c<u.length;c+=1)l+=u[c].length;for(var d=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),h=d.vertexLength,p=[],m=[],b=0,y=s;b<y.length;b+=1){var f=y[b];if(0!==f.length){f!==s[0]&&m.push(p.length/2);var g=this.segments2.prepareSegment(f.length,this.layoutVertexArray,this.indexArray2),I=g.vertexLength;this.layoutVertexArray.emplaceBack(f[0].x,f[0].y),this.indexArray2.emplaceBack(I+f.length-1,I),p.push(f[0].x),p.push(f[0].y);for(var v=1;v<f.length;v++)this.layoutVertexArray.emplaceBack(f[v].x,f[v].y),this.indexArray2.emplaceBack(I+v-1,I+v),p.push(f[v].x),p.push(f[v].y);g.vertexLength+=f.length,g.primitiveLength+=f.length}}for(var x=Xr(p,m),Z=0;Z<x.length;Z+=3)this.indexArray.emplaceBack(h+x[Z],h+x[Z+1],h+x[Z+2]);d.vertexLength+=l,d.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a,n)},Hn("FillBucket",ss,{omit:["layers","patternFeatures"]});var ls=new xa({"fill-sort-key":new fa(St.layout_fill["fill-sort-key"])}),cs={paint:new xa({"fill-antialias":new ya(St.paint_fill["fill-antialias"]),"fill-opacity":new fa(St.paint_fill["fill-opacity"]),"fill-color":new fa(St.paint_fill["fill-color"]),"fill-outline-color":new fa(St.paint_fill["fill-outline-color"]),"fill-translate":new ya(St.paint_fill["fill-translate"]),"fill-translate-anchor":new ya(St.paint_fill["fill-translate-anchor"]),"fill-pattern":new ga(St.paint_fill["fill-pattern"])}),layout:ls},us=function(t){function e(e){t.call(this,e,cs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new ss(t)},e.prototype.queryRadius=function(){return ir(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,n,a,o,r){return Ao(nr(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,r),n)},e.prototype.isTileClipped=function(){return!0},e}(Za),ds=Xa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,hs=ps;function ps(t,e,i,n,a){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=a,t.readFields(ms,this,e)}function ms(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],a=e._values[t.readVarint()];e.properties[n]=a}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}function bs(t){for(var e,i,n=0,a=0,o=t.length,r=o-1;a<o;r=a++)n+=((i=t[r]).x-(e=t[a]).x)*(e.y+i.y);return n}ps.types=["Unknown","Point","LineString","Polygon"],ps.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,o=0,r=0,s=0,l=[];t.pos<i;){if(o<=0){var c=t.readVarint();n=7&c,o=c>>3}if(o--,1===n||2===n)r+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new a(r,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},ps.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,i=1,n=0,a=0,o=0,r=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(n<=0){var u=t.readVarint();i=7&u,n=u>>3}if(n--,1===i||2===i)(a+=t.readSVarint())<r&&(r=a),a>s&&(s=a),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==i)throw new Error("unknown command "+i)}return[r,l,s,c]},ps.prototype.toGeoJSON=function(t,e,i){var n,a,o=this.extent*Math.pow(2,i),r=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=ps.types[this.type];function u(t){for(var e=0;e<t.length;e++){var i=t[e];t[e]=[360*(i.x+r)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(n=0;n<l.length;n++)d[n]=l[n][0];u(l=d);break;case 2:for(n=0;n<l.length;n++)u(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,a=[],o=0;o<e;o++){var r=bs(t[o]);0!==r&&(void 0===n&&(n=r<0),n===r<0?(i&&a.push(i),i=[t[o]]):i.push(t[o]))}return i&&a.push(i),a}(l),n=0;n<l.length;n++)for(a=0;a<l[n].length;a++)u(l[n][a])}1===l.length?l=l[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var ys=fs;function fs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(gs,this,e),this.length=this._features.length}function gs(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(i))}function Is(t,e,i){if(3===t){var n=new ys(i,i.readVarint()+i.pos);n.length&&(e[n.name]=n)}}fs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new hs(this._pbf,e,this.extent,this._keys,this._values)};var vs={VectorTile:function(t,e){this.layers=t.readFields(Is,{},e)},VectorTileFeature:hs,VectorTileLayer:ys},xs=vs.VectorTileFeature.types,Zs=Math.pow(2,13);function Gs(t,e,i,n,a,o,r,s){t.emplaceBack(e,i,2*Math.floor(n*Zs)+r,a*Zs*2,o*Zs*2,Math.round(s))}var ws=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ba,this.indexArray=new Fa,this.programConfigurations=new Co(t.layers,t.zoom),this.segments=new so,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Ws(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}ws.prototype.populate=function(t,e,i){this.features=[],this.hasPattern=os("fill-extrusion",this.layers,e);for(var n=0,a=t;n<a.length;n+=1){var o=a[n],r=o.feature,s=o.id,l=o.index,c=o.sourceLayerIndex,u=this.layers[0]._featureFilter.needGeometry,d=Fo(r,u);if(this.layers[0]._featureFilter.filter(new sa(this.zoom),d,i)){var h={id:s,sourceLayerIndex:c,index:l,geometry:u?d.geometry:jo(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(rs("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,l,i,{}),e.featureIndex.insert(r,h.geometry,l,c,this.index,!0)}}},ws.prototype.addFeatures=function(t,e,i){for(var n=0,a=this.features;n<a.length;n+=1){var o=a[n];this.addFeature(o,o.geometry,o.index,e,i)}},ws.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ds),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ws.prototype.addFeature=function(t,e,i,n,a){for(var o=0,r=ns(e,500);o<r.length;o+=1){for(var s=r[o],l=0,c=0,u=s;c<u.length;c+=1)l+=u[c].length;for(var d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,p=s;h<p.length;h+=1){var m=p[h];if(0!==m.length&&!((Y=m).every((function(t){return t.x<0}))||Y.every((function(t){return t.x>8192}))||Y.every((function(t){return t.y<0}))||Y.every((function(t){return t.y>8192}))))for(var b=0,y=0;y<m.length;y++){var f=m[y];if(y>=1){var g=m[y-1];if(!Ws(f,g)){d.vertexLength+4>so.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var I=f.sub(g)._perp()._unit(),v=g.dist(f);b+v>32768&&(b=0),Gs(this.layoutVertexArray,f.x,f.y,I.x,I.y,0,0,b),Gs(this.layoutVertexArray,f.x,f.y,I.x,I.y,0,1,b),Gs(this.layoutVertexArray,g.x,g.y,I.x,I.y,0,0,b+=v),Gs(this.layoutVertexArray,g.x,g.y,I.x,I.y,0,1,b);var x=d.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),d.vertexLength+=4,d.primitiveLength+=2}}}}if(d.vertexLength+l>so.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===xs[t.type]){for(var Z=[],G=[],w=d.vertexLength,W=0,X=s;W<X.length;W+=1){var _=X[W];if(0!==_.length){_!==s[0]&&G.push(Z.length/2);for(var V=0;V<_.length;V++){var S=_[V];Gs(this.layoutVertexArray,S.x,S.y,0,0,1,1,0),Z.push(S.x),Z.push(S.y)}}}for(var B=Xr(Z,G),L=0;L<B.length;L+=3)this.indexArray.emplaceBack(w+B[L],w+B[L+2],w+B[L+1]);d.primitiveLength+=B.length/3,d.vertexLength+=l}}var Y;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a,n)},Hn("FillExtrusionBucket",ws,{omit:["layers","features"]});var Xs={paint:new xa({"fill-extrusion-opacity":new ya(St["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new fa(St["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ya(St["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ya(St["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ga(St["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new fa(St["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new fa(St["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ya(St["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},_s=function(t){function e(e){t.call(this,e,Xs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ws(t)},e.prototype.queryRadius=function(){return ir(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,i,n,o,r,s,l){var c=nr(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),r.angle,s),u=this.paint.get("fill-extrusion-height").evaluate(e,i),d=this.paint.get("fill-extrusion-base").evaluate(e,i),h=function(t,e,i,n){for(var o=[],r=0,s=t;r<s.length;r+=1){var l=s[r],c=[l.x,l.y,0,1];dr(c,c,e),o.push(new a(c[0]/c[3],c[1]/c[3]))}return o}(c,l),p=function(t,e,i,n){for(var o=[],r=[],s=n[8]*e,l=n[9]*e,c=n[10]*e,u=n[11]*e,d=n[8]*i,h=n[9]*i,p=n[10]*i,m=n[11]*i,b=0,y=t;b<y.length;b+=1){for(var f=[],g=[],I=0,v=y[b];I<v.length;I+=1){var x=v[I],Z=x.x,G=x.y,w=n[0]*Z+n[4]*G+n[12],W=n[1]*Z+n[5]*G+n[13],X=n[2]*Z+n[6]*G+n[14],_=n[3]*Z+n[7]*G+n[15],V=X+c,S=_+u,B=w+d,L=W+h,Y=X+p,z=_+m,R=new a((w+s)/S,(W+l)/S);R.z=V/S,f.push(R);var C=new a(B/z,L/z);C.z=Y/z,g.push(C)}o.push(f),r.push(g)}return[o,r]}(n,d,u,l);return function(t,e,i){var n=1/0;Ao(i,e)&&(n=Ss(i,e[0]));for(var a=0;a<e.length;a++)for(var o=e[a],r=t[a],s=0;s<o.length-1;s++){var l=o[s],c=[l,o[s+1],r[s+1],r[s],l];Uo(i,c)&&(n=Math.min(n,Ss(i,c)))}return n!==1/0&&n}(p[0],p[1],h)},e}(Za);function Vs(t,e){return t.x*e.x+t.y*e.y}function Ss(t,e){if(1===t.length){for(var i,n=0,a=e[n++];!i||a.equals(i);)if(!(i=e[n++]))return 1/0;for(;n<e.length;n++){var o=e[n],r=t[0],s=i.sub(a),l=o.sub(a),c=r.sub(a),u=Vs(s,s),d=Vs(s,l),h=Vs(l,l),p=Vs(c,s),m=Vs(c,l),b=u*h-d*d,y=(h*p-d*m)/b,f=(u*m-d*p)/b,g=a.z*(1-y-f)+i.z*y+o.z*f;if(isFinite(g))return g}return 1/0}for(var I=1/0,v=0,x=e;v<x.length;v+=1)I=Math.min(I,x[v].z);return I}var Bs=Xa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ls=Xa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ys=vs.VectorTileFeature.types,zs=Math.cos(Math.PI/180*37.5),Rs=Math.pow(2,14)/.5,Cs=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(t){e.gradients[t.id]={}})),this.layoutVertexArray=new La,this.layoutVertexArray2=new Ya,this.indexArray=new Fa,this.programConfigurations=new Co(t.layers,t.zoom),this.segments=new so,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Cs.prototype.populate=function(t,e,i){this.hasPattern=os("line",this.layers,e);for(var n=this.layers[0].layout.get("line-sort-key"),a=[],o=0,r=t;o<r.length;o+=1){var s=r[o],l=s.feature,c=s.id,u=s.index,d=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,p=Fo(l,h);if(this.layers[0]._featureFilter.filter(new sa(this.zoom),p,i)){var m=n?n.evaluate(p,{},i):void 0,b={id:c,properties:l.properties,type:l.type,sourceLayerIndex:d,index:u,geometry:h?p.geometry:jo(l),patterns:{},sortKey:m};a.push(b)}}n&&a.sort((function(t,e){return t.sortKey-e.sortKey}));for(var y=0,f=a;y<f.length;y+=1){var g=f[y],I=g.geometry,v=g.index,x=g.sourceLayerIndex;if(this.hasPattern){var Z=rs("line",this.layers,g,this.zoom,e);this.patternFeatures.push(Z)}else this.addFeature(g,I,v,i,{});e.featureIndex.insert(t[v].feature,I,v,x,this.index)}},Cs.prototype.update=function(t,e,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,i)},Cs.prototype.addFeatures=function(t,e,i){for(var n=0,a=this.patternFeatures;n<a.length;n+=1){var o=a[n];this.addFeature(o,o.geometry,o.index,e,i)}},Cs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Cs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Cs.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Ls)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Cs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Cs.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Cs.prototype.addFeature=function(t,e,i,n,a){var o=this.layers[0].layout,r=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var u=0,d=e;u<d.length;u+=1)this.addLine(d[u],t,r,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,i,a,n)},Cs.prototype.addLine=function(t,e,i,n,a,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var r=0;r<t.length-1;r++)this.totalDistance+=t[r].dist(t[r+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Ys[e.type],l=t.length;l>=2&&t[l-1].equals(t[l-2]);)l--;for(var c=0;c<l-1&&t[c].equals(t[c+1]);)c++;if(!(l<(s?3:2))){"bevel"===i&&(a=1.05);var u,d=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),p=void 0,m=void 0,b=void 0,y=void 0;this.e1=this.e2=-1,s&&(y=t[c].sub(u=t[l-2])._unit()._perp());for(var f=c;f<l;f++)if(!(m=f===l-1?s?t[c+1]:void 0:t[f+1])||!t[f].equals(m)){y&&(b=y),u&&(p=u),u=t[f],y=m?m.sub(u)._unit()._perp():b;var g=(b=b||y).add(y);0===g.x&&0===g.y||g._unit();var I=b.x*y.x+b.y*y.y,v=g.x*y.x+g.y*y.y,x=0!==v?1/v:1/0,Z=2*Math.sqrt(2-2*v),G=v<zs&&p&&m,w=b.x*y.y-b.y*y.x>0;if(G&&f>c){var W=u.dist(p);if(W>2*d){var X=u.sub(u.sub(p)._mult(d/W)._round());this.updateDistance(p,X),this.addCurrentVertex(X,b,0,0,h),p=X}}var _=p&&m,V=_?i:s?"butt":n;if(_&&"round"===V&&(x<o?V="miter":x<=2&&(V="fakeround")),"miter"===V&&x>a&&(V="bevel"),"bevel"===V&&(x>2&&(V="flipbevel"),x<a&&(V="miter")),p&&this.updateDistance(p,u),"miter"===V)g._mult(x),this.addCurrentVertex(u,g,0,0,h);else if("flipbevel"===V){if(x>100)g=y.mult(-1);else{var S=x*b.add(y).mag()/b.sub(y).mag();g._perp()._mult(S*(w?-1:1))}this.addCurrentVertex(u,g,0,0,h),this.addCurrentVertex(u,g.mult(-1),0,0,h)}else if("bevel"===V||"fakeround"===V){var B=-Math.sqrt(x*x-1),L=w?B:0,Y=w?0:B;if(p&&this.addCurrentVertex(u,b,L,Y,h),"fakeround"===V)for(var z=Math.round(180*Z/Math.PI/20),R=1;R<z;R++){var C=R/z;if(.5!==C){var M=C-.5;C+=C*M*(C-1)*((1.0904+I*(I*(3.55645-1.43519*I)-3.2452))*M*M+(.848013+I*(.215638*I-1.06021)))}var J=y.sub(b)._mult(C)._add(b)._unit()._mult(w?-1:1);this.addHalfVertex(u,J.x,J.y,!1,w,0,h)}m&&this.addCurrentVertex(u,y,-L,-Y,h)}else if("butt"===V)this.addCurrentVertex(u,g,0,0,h);else if("square"===V){var H=p?1:-1;this.addCurrentVertex(u,g,H,H,h)}else"round"===V&&(p&&(this.addCurrentVertex(u,b,0,0,h),this.addCurrentVertex(u,b,1,1,h,!0)),m&&(this.addCurrentVertex(u,y,-1,-1,h,!0),this.addCurrentVertex(u,y,0,0,h)));if(G&&f<l-1){var k=u.dist(m);if(k>2*d){var j=u.add(m.sub(u)._mult(d/k)._round());this.updateDistance(u,j),this.addCurrentVertex(j,y,0,0,h),u=j}}}}},Cs.prototype.addCurrentVertex=function(t,e,i,n,a,o){void 0===o&&(o=!1);var r=e.y*n-e.x,s=-e.y-e.x*n;this.addHalfVertex(t,e.x+e.y*i,e.y-e.x*i,o,!1,i,a),this.addHalfVertex(t,r,s,o,!0,-n,a),this.distance>Rs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,i,n,a,o))},Cs.prototype.addHalfVertex=function(t,e,i,n,a,o,r){var s=.5*(this.lineClips?this.scaledDistance*(Rs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(n?1:0),(t.y<<1)+(a?1:0),Math.round(63*e)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var l=r.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),r.primitiveLength++),a?this.e2=l:this.e1=l},Cs.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Cs.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Hn("LineBucket",Cs,{omit:["layers","patternFeatures"]});var Ms=new xa({"line-cap":new ya(St.layout_line["line-cap"]),"line-join":new fa(St.layout_line["line-join"]),"line-miter-limit":new ya(St.layout_line["line-miter-limit"]),"line-round-limit":new ya(St.layout_line["line-round-limit"]),"line-sort-key":new fa(St.layout_line["line-sort-key"])}),Js={paint:new xa({"line-opacity":new fa(St.paint_line["line-opacity"]),"line-color":new fa(St.paint_line["line-color"]),"line-translate":new ya(St.paint_line["line-translate"]),"line-translate-anchor":new ya(St.paint_line["line-translate-anchor"]),"line-width":new fa(St.paint_line["line-width"]),"line-gap-width":new fa(St.paint_line["line-gap-width"]),"line-offset":new fa(St.paint_line["line-offset"]),"line-blur":new fa(St.paint_line["line-blur"]),"line-dasharray":new Ia(St.paint_line["line-dasharray"]),"line-pattern":new ga(St.paint_line["line-pattern"]),"line-gradient":new va(St.paint_line["line-gradient"])}),layout:Ms},Hs=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,i){return i=new sa(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),t.prototype.possiblyEvaluate.call(this,e,i)},e.prototype.evaluate=function(e,i,n,a){return i=h({},i,{zoom:Math.floor(i.zoom)}),t.prototype.evaluate.call(this,e,i,n,a)},e}(fa))(Js.paint.properties["line-width"].specification);Hs.useIntegerZoom=!0;var ks=function(t){function e(e){t.call(this,e,Js),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Te,this.gradientVersion=(this.gradientVersion+1)%s)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,i){t.prototype.recalculate.call(this,e,i),this.paint._values["line-floorwidth"]=Hs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Cs(t)},e.prototype.queryRadius=function(t){var e=t,i=js(er("line-width",this,e),er("line-gap-width",this,e)),n=er("line-offset",this,e);return i/2+Math.abs(n)+ir(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,i,n,o,r,s){var l=nr(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),r.angle,s),c=s/2*js(this.paint.get("line-width").evaluate(e,i),this.paint.get("line-gap-width").evaluate(e,i)),u=this.paint.get("line-offset").evaluate(e,i);return u&&(n=function(t,e){for(var i=[],n=new a(0,0),o=0;o<t.length;o++){for(var r=t[o],s=[],l=0;l<r.length;l++){var c=r[l],u=r[l+1],d=0===l?n:c.sub(r[l-1])._unit()._perp(),h=l===r.length-1?n:u.sub(c)._unit()._perp(),p=d._add(h)._unit();p._mult(1/(p.x*h.x+p.y*h.y)),s.push(p._mult(e)._add(c))}i.push(s)}return i}(n,u*s)),function(t,e,i){for(var n=0;n<e.length;n++){var a=e[n];if(t.length>=3)for(var o=0;o<a.length;o++)if($o(t,a[o]))return!0;if(Oo(t,a,i))return!0}return!1}(l,n,c)},e.prototype.isTileClipped=function(){return!0},e}(Za);function js(t,e){return e>0?e+2*t:t}var Fs=Xa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ns=Xa([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ts=(Xa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Xa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Us=(Xa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Xa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Es=Xa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function As(t,e,i){return t.sections.forEach((function(t){t.text=function(t,e,i){var n=e.layout.get("text-transform").evaluate(i,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),ra.applyArabicShaping&&(t=ra.applyArabicShaping(t)),t}(t.text,e,i)})),t}Xa([{name:"triangle",components:3,type:"Uint16"}]),Xa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Xa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Xa([{type:"Float32",name:"offsetX"}]),Xa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Os={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Ps=function(t,e,i,n,a){var o,r,s=8*a-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=i?a-1:0,h=i?-1:1,p=t[e+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+d],d+=h,u-=8);for(r=o&(1<<-u)-1,o>>=-u,u+=n;u>0;r=256*r+t[e+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return r?NaN:1/0*(p?-1:1);r+=Math.pow(2,n),o-=c}return(p?-1:1)*r*Math.pow(2,o-n)},Ks=function(t,e,i,n,a,o){var r,s,l,c=8*o-a-1,u=(1<<c)-1,d=u>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,m=n?1:-1,b=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,r=u):(r=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-r))<1&&(r--,l*=2),(e+=r+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(r++,l/=2),r+d>=u?(s=0,r=u):r+d>=1?(s=(e*l-1)*Math.pow(2,a),r+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,a),r=0));a>=8;t[i+p]=255&s,p+=m,s/=256,a-=8);for(r=r<<a|s,c+=a;c>0;t[i+p]=255&r,p+=m,r/=256,c-=8);t[i+p-m]|=128*b},Ds=Qs;function Qs(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Qs.Varint=0,Qs.Fixed64=1,Qs.Bytes=2,Qs.Fixed32=5;var qs="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $s(t){return t.type===Qs.Bytes?t.readVarint()+t.pos:t.pos+1}function tl(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function el(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var a=i.pos-1;a>=t;a--)i.buf[a+n]=i.buf[a]}function il(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function nl(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function al(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function ol(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function rl(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function sl(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function ll(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function cl(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function ul(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function dl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function hl(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function pl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function ml(t,e,i){1===t&&i.readMessage(bl,e)}function bl(t,e,i){if(3===t){var n=i.readMessage(yl,{}),a=n.width,o=n.height,r=n.left,s=n.top,l=n.advance;e.push({id:n.id,bitmap:new gr({width:a+6,height:o+6},n.bitmap),metrics:{width:a,height:o,left:r,top:s,advance:l}})}}function yl(t,e,i){1===t?e.id=i.readVarint():2===t?e.bitmap=i.readBytes():3===t?e.width=i.readVarint():4===t?e.height=i.readVarint():5===t?e.left=i.readSVarint():6===t?e.top=i.readSVarint():7===t&&(e.advance=i.readVarint())}function fl(t){for(var e=0,i=0,n=0,a=t;n<a.length;n+=1){var o=a[n];e+=o.w*o.h,i=Math.max(i,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),i),h:1/0}],s=0,l=0,c=0,u=t;c<u.length;c+=1)for(var d=u[c],h=r.length-1;h>=0;h--){var p=r[h];if(!(d.w>p.w||d.h>p.h)){if(d.x=p.x,d.y=p.y,l=Math.max(l,d.y+d.h),s=Math.max(s,d.x+d.w),d.w===p.w&&d.h===p.h){var m=r.pop();h<r.length&&(r[h]=m)}else d.h===p.h?(p.x+=d.w,p.w-=d.w):d.w===p.w?(p.y+=d.h,p.h-=d.h):(r.push({x:p.x+d.w,y:p.y,w:p.w-d.w,h:d.h}),p.y+=d.h,p.h-=d.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}Qs.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),a=n>>3,o=this.pos;this.type=7&n,t(a,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=dl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=pl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=dl(this.buf,this.pos)+4294967296*dl(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=dl(this.buf,this.pos)+4294967296*pl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Ps(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ps(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,a,o=i.buf;if(n=(112&(a=o[i.pos++]))>>4,a<128)return tl(t,n,e);if(n|=(127&(a=o[i.pos++]))<<3,a<128)return tl(t,n,e);if(n|=(127&(a=o[i.pos++]))<<10,a<128)return tl(t,n,e);if(n|=(127&(a=o[i.pos++]))<<17,a<128)return tl(t,n,e);if(n|=(127&(a=o[i.pos++]))<<24,a<128)return tl(t,n,e);if(n|=(1&(a=o[i.pos++]))<<31,a<128)return tl(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&qs?function(t,e,i){return qs.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){for(var n="",a=e;a<i;){var o,r,s,l=t[a],c=null,u=l>239?4:l>223?3:l>191?2:1;if(a+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[a+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(r=t[a+2],128==(192&(o=t[a+1]))&&128==(192&r)&&((c=(15&l)<<12|(63&o)<<6|63&r)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(r=t[a+2],s=t[a+3],128==(192&(o=t[a+1]))&&128==(192&r)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&r)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),a+=u}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Qs.Bytes)return t.push(this.readVarint(e));var i=$s(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Qs.Bytes)return t.push(this.readSVarint());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Qs.Bytes)return t.push(this.readBoolean());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Qs.Bytes)return t.push(this.readFloat());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Qs.Bytes)return t.push(this.readDouble());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Qs.Bytes)return t.push(this.readFixed32());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Qs.Bytes)return t.push(this.readSFixed32());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Qs.Bytes)return t.push(this.readFixed64());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Qs.Bytes)return t.push(this.readSFixed64());var e=$s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Qs.Varint)for(;this.buf[this.pos++]>127;);else if(e===Qs.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Qs.Fixed32)this.pos+=4;else{if(e!==Qs.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),hl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),hl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),hl(this.buf,-1&t,this.pos),hl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),hl(this.buf,-1&t,this.pos),hl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;if(t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,i.buf[i.pos]=127&(t>>>=7)}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,a,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):a=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&(t[i++]=239,t[i++]=191,t[i++]=189,a=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&el(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Ks(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Ks(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&el(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,Qs.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,il,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,nl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,rl,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,al,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ol,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,sl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,ll,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,cl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,ul,e)},writeBytesField:function(t,e){this.writeTag(t,Qs.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Qs.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Qs.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Qs.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Qs.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Qs.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Qs.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Qs.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Qs.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Qs.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var gl=function(t,e){var i=e.pixelRatio,n=e.version,a=e.stretchX,o=e.stretchY,r=e.content;this.paddedRect=t,this.pixelRatio=i,this.stretchX=a,this.stretchY=o,this.content=r,this.version=n},Il={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Il.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Il.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Il.tlbr.get=function(){return this.tl.concat(this.br)},Il.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(gl.prototype,Il);var vl=function(t,e){var i={},n={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,i,a),this.addImages(e,n,a);var o=fl(a),r=new Ir({width:o.w||1,height:o.h||1});for(var s in t){var l=t[s],c=i[s].paddedRect;Ir.copy(l.data,r,{x:0,y:0},{x:c.x+1,y:c.y+1},l.data)}for(var u in e){var d=e[u],h=n[u].paddedRect,p=h.x+1,m=h.y+1,b=d.data.width,y=d.data.height;Ir.copy(d.data,r,{x:0,y:0},{x:p,y:m},d.data),Ir.copy(d.data,r,{x:0,y:y-1},{x:p,y:m-1},{width:b,height:1}),Ir.copy(d.data,r,{x:0,y:0},{x:p,y:m+y},{width:b,height:1}),Ir.copy(d.data,r,{x:b-1,y:0},{x:p-1,y:m},{width:1,height:y}),Ir.copy(d.data,r,{x:0,y:0},{x:p+b,y:m},{width:1,height:y})}this.image=r,this.iconPositions=i,this.patternPositions=n};vl.prototype.addImages=function(t,e,i){for(var n in t){var a=t[n],o={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(o),e[n]=new gl(o,a),a.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},vl.prototype.patchUpdatedImages=function(t,e){for(var i in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[i],t.getImage(i),e),this.patchUpdatedImage(this.patternPositions[i],t.getImage(i),e)},vl.prototype.patchUpdatedImage=function(t,e,i){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl;i.update(e.data,void 0,{x:n[0],y:n[1]})}},Hn("ImagePosition",gl),Hn("ImageAtlas",vl);var xl={horizontal:1,vertical:2,horizontalOnly:3},Zl=function(){this.scale=1,this.fontStack="",this.imageName=null};Zl.forText=function(t,e){var i=new Zl;return i.scale=t||1,i.fontStack=e,i},Zl.forImage=function(t){var e=new Zl;return e.imageName=t,e};var Gl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function wl(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b){var y,f=Gl.fromFeature(t,a);d===xl.vertical&&f.verticalizePunctuation();var g=ra.processBidirectionalText,I=ra.processStyledBidirectionalText;if(g&&1===f.sections.length){y=[];for(var v=0,x=g(f.toString(),Ll(f,c,o,e,n,p,m));v<x.length;v+=1){var Z=x[v],G=new Gl;G.text=Z,G.sections=f.sections;for(var w=0;w<Z.length;w++)G.sectionIndex.push(0);y.push(G)}}else if(I){y=[];for(var W=0,X=I(f.text,f.sectionIndex,Ll(f,c,o,e,n,p,m));W<X.length;W+=1){var _=X[W],V=new Gl;V.text=_[0],V.sectionIndex=_[1],V.sections=f.sections,y.push(V)}}else y=function(t,e){for(var i=[],n=t.text,a=0,o=0,r=e;o<r.length;o+=1){var s=r[o];i.push(t.substring(a,s)),a=s}return a<n.length&&i.push(t.substring(a,n.length)),i}(f,Ll(f,c,o,e,n,p,m));var S=[],B={positionedLines:S,text:f.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(t,e,i,n,a,o,r,s,l,c,u,d){for(var h=0,p=-17,m=0,b=0,y="right"===s?1:"left"===s?0:.5,f=0,g=0,I=a;g<I.length;g+=1){var v=I[g];v.trim();var x=v.getMaxScale(),Z=24*(x-1),G={positionedGlyphs:[],lineOffset:0};t.positionedLines[f]=G;var w=G.positionedGlyphs,W=0;if(v.length()){for(var X=0;X<v.length();X++){var _=v.getSection(X),V=v.getSectionIndex(X),S=v.getCharCode(X),B=0,L=null,Y=null,z=null,R=24,C=!(l===xl.horizontal||!u&&!On(S)||u&&(Wl[S]||(U=S,En.Arabic(U)||En["Arabic Supplement"](U)||En["Arabic Extended-A"](U)||En["Arabic Presentation Forms-A"](U)||En["Arabic Presentation Forms-B"](U))));if(_.imageName){var M=n[_.imageName];if(!M)continue;z=_.imageName,t.iconsInText=t.iconsInText||!0,Y=M.paddedRect;var J=M.displaySize;_.scale=24*_.scale/d,B=Z+(24-J[1]*_.scale),R=(L={width:J[0],height:J[1],left:1,top:-3,advance:C?J[1]:J[0]}).advance;var H=C?J[0]*_.scale-24*x:J[1]*_.scale-24*x;H>0&&H>W&&(W=H)}else{var k=i[_.fontStack],j=k&&k[S];if(j&&j.rect)Y=j.rect,L=j.metrics;else{var F=e[_.fontStack],N=F&&F[S];if(!N)continue;L=N.metrics}B=24*(x-_.scale)}C?(t.verticalizable=!0,w.push({glyph:S,imageName:z,x:h,y:p+B,vertical:C,scale:_.scale,fontStack:_.fontStack,sectionIndex:V,metrics:L,rect:Y}),h+=R*_.scale+c):(w.push({glyph:S,imageName:z,x:h,y:p+B,vertical:C,scale:_.scale,fontStack:_.fontStack,sectionIndex:V,metrics:L,rect:Y}),h+=L.advance*_.scale+c)}0!==w.length&&(m=Math.max(h-c,m),zl(w,0,w.length-1,y,W)),h=0;var T=o*x+W;G.lineOffset=Math.max(W,Z),p+=T,b=Math.max(T,b),++f}else p+=o,++f}var U,E=p- -17,A=Yl(r),O=A.horizontalAlign,P=A.verticalAlign;(function(t,e,i,n,a,o,r,s,l){var c,u=(e-i)*a;c=o!==r?-s*n- -17:(-n*l+.5)*r;for(var d=0,h=t;d<h.length;d+=1)for(var p=0,m=h[d].positionedGlyphs;p<m.length;p+=1){var b=m[p];b.x+=u,b.y+=c}})(t.positionedLines,y,O,P,m,b,o,E,a.length),t.top+=-P*E,t.bottom=t.top+E,t.left+=-O*m,t.right=t.left+m}(B,e,i,n,y,r,s,l,d,c,h,b),!function(t){for(var e=0,i=t;e<i.length;e+=1)if(0!==i[e].positionedGlyphs.length)return!1;return!0}(S)&&B}Gl.fromFeature=function(t,e){for(var i=new Gl,n=0;n<t.sections.length;n++){var a=t.sections[n];a.image?i.addImageSection(a):i.addTextSection(a,e)}return i},Gl.prototype.length=function(){return this.text.length},Gl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Gl.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},Gl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Gl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i+1)||null,a=t.charCodeAt(i-1)||null;e+=n&&Pn(n)&&!Os[t[i+1]]||a&&Pn(a)&&!Os[t[i-1]]||!Os[t[i]]?t[i]:Os[t[i]]}return e}(this.text)},Gl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Wl[this.text.charCodeAt(e)];e++)t++;for(var i=this.text.length,n=this.text.length-1;n>=0&&n>=t&&Wl[this.text.charCodeAt(n)];n--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)},Gl.prototype.substring=function(t,e){var i=new Gl;return i.text=this.text.substring(t,e),i.sectionIndex=this.sectionIndex.slice(t,e),i.sections=this.sections,i},Gl.prototype.toString=function(){return this.text},Gl.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,i){return Math.max(e,t.sections[i].scale)}),0)},Gl.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Zl.forText(t.scale,t.fontStack||e));for(var i=this.sections.length-1,n=0;n<t.text.length;++n)this.sectionIndex.push(i)},Gl.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(Zl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):G("Reached maximum number of images 6401")}else G("Can't add FormattedSection with an empty image.")},Gl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Wl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Xl={};function _l(t,e,i,n,a,o){if(e.imageName){var r=n[e.imageName];return r?r.displaySize[0]*e.scale*24/o+a:0}var s=i[e.fontStack],l=s&&s[t];return l?l.metrics.advance*e.scale+a:0}function Vl(t,e,i,n){var a=Math.pow(t-e,2);return n?t<e?a/2:2*a:a+Math.abs(i)*i}function Sl(t,e,i){var n=0;return 10===t&&(n-=1e4),i&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function Bl(t,e,i,n,a,o){for(var r=null,s=Vl(e,i,a,o),l=0,c=n;l<c.length;l+=1){var u=c[l],d=Vl(e-u.x,i,a,o)+u.badness;d<=s&&(r=u,s=d)}return{index:t,x:e,priorBreak:r,badness:s}}function Ll(t,e,i,n,a,o,r){if("point"!==o)return[];if(!t)return[];for(var s,l=[],c=function(t,e,i,n,a,o){for(var r=0,s=0;s<t.length();s++){var l=t.getSection(s);r+=_l(t.getCharCode(s),l,n,a,e,o)}return r/Math.max(1,Math.ceil(r/i))}(t,e,i,n,a,r),u=t.text.indexOf("​")>=0,d=0,h=0;h<t.length();h++){var p=t.getSection(h),m=t.getCharCode(h);if(Wl[m]||(d+=_l(m,p,n,a,e,r)),h<t.length()-1){var b=!((s=m)<11904||!(En["Bopomofo Extended"](s)||En.Bopomofo(s)||En["CJK Compatibility Forms"](s)||En["CJK Compatibility Ideographs"](s)||En["CJK Compatibility"](s)||En["CJK Radicals Supplement"](s)||En["CJK Strokes"](s)||En["CJK Symbols and Punctuation"](s)||En["CJK Unified Ideographs Extension A"](s)||En["CJK Unified Ideographs"](s)||En["Enclosed CJK Letters and Months"](s)||En["Halfwidth and Fullwidth Forms"](s)||En.Hiragana(s)||En["Ideographic Description Characters"](s)||En["Kangxi Radicals"](s)||En["Katakana Phonetic Extensions"](s)||En.Katakana(s)||En["Vertical Forms"](s)||En["Yi Radicals"](s)||En["Yi Syllables"](s)));(Xl[m]||b||p.imageName)&&l.push(Bl(h+1,d,c,l,Sl(m,t.getCharCode(h+1),b&&u),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Bl(t.length(),d,c,l,0,!0))}function Yl(t){var e=.5,i=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:e,verticalAlign:i}}function zl(t,e,i,n,a){if(n||a)for(var o=t[i],r=(t[i].x+o.metrics.advance*o.scale)*n,s=e;s<=i;s++)t[s].x-=r,t[s].y+=a}function Rl(t,e,i,n,a,o){var r,s=t.image;if(s.content){var l=s.content,c=s.pixelRatio||1;r=[l[0]/c,l[1]/c,s.displaySize[0]-l[2]/c,s.displaySize[1]-l[3]/c]}var u,d,h,p,m=e.left*o,b=e.right*o;"width"===i||"both"===i?(p=a[0]+m-n[3],d=a[0]+b+n[1]):d=(p=a[0]+(m+b-s.displaySize[0])/2)+s.displaySize[0];var y=e.top*o,f=e.bottom*o;return"height"===i||"both"===i?(u=a[1]+y-n[0],h=a[1]+f+n[2]):h=(u=a[1]+(y+f-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:u,right:d,bottom:h,left:p,collisionPadding:r}}Xl[10]=!0,Xl[32]=!0,Xl[38]=!0,Xl[40]=!0,Xl[41]=!0,Xl[43]=!0,Xl[45]=!0,Xl[47]=!0,Xl[173]=!0,Xl[183]=!0,Xl[8203]=!0,Xl[8208]=!0,Xl[8211]=!0,Xl[8231]=!0;var Cl=function(t){function e(e,i,n,a){t.call(this,e,i),this.angle=n,void 0!==a&&(this.segment=a)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(a);function Ml(t,e){var i=e.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new sa(t+1))};if("source"===i.kind)return{kind:"source"};for(var n=i.zoomStops,a=i.interpolationType,o=0;o<n.length&&n[o]<=t;)o++;for(var r=o=Math.max(0,o-1);r<n.length&&n[r]<t+1;)r++;r=Math.min(n.length-1,r);var s=n[o],l=n[r];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:a}:{kind:"camera",minZoom:s,maxZoom:l,minSize:i.evaluate(new sa(s)),maxSize:i.evaluate(new sa(l)),interpolationType:a}}function Jl(t,e,i){var n=e.uSize,a=i.lowerSize;return"source"===t.kind?a/128:"composite"===t.kind?Ue(a/128,i.upperSize/128,e.uSizeT):n}function Hl(t,e){var i=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var a=t.interpolationType,o=a?u(oi.interpolationFactor(a,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?n=Ue(t.minSize,t.maxSize,o):i=o}return{uSizeT:i,uSize:n}}Hn("Anchor",Cl);var kl=Object.freeze({__proto__:null,getSizeData:Ml,evaluateSizeForFeature:Jl,evaluateSizeForZoom:Hl,SIZE_PACK_FACTOR:128});function jl(t,e,i,n,a){if(void 0===e.segment)return!0;for(var o=e,r=e.segment+1,s=0;s>-i/2;){if(--r<0)return!1;s-=t[r].dist(o),o=t[r]}s+=t[r].dist(t[r+1]),r++;for(var l=[],c=0;s<i/2;){var u=t[r],d=t[r+1];if(!d)return!1;var h=t[r-1].angleTo(u)-u.angleTo(d);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:h}),c+=h;s-l[0].distance>n;)c-=l.shift().angleDelta;if(c>a)return!1;r++,s+=u.dist(d)}return!0}function Fl(t){for(var e=0,i=0;i<t.length-1;i++)e+=t[i].dist(t[i+1]);return e}function Nl(t,e,i){return t?.6*e*i:0}function Tl(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Ul(t,e,i,n,a,o){for(var r=Nl(i,a,o),s=Tl(i,n)*o,l=0,c=Fl(t)/2,u=0;u<t.length-1;u++){var d=t[u],h=t[u+1],p=d.dist(h);if(l+p>c){var m=(c-l)/p,b=Ue(d.x,h.x,m),y=Ue(d.y,h.y,m),f=new Cl(b,y,h.angleTo(d),u);return f._round(),!r||jl(t,f,s,r,e)?f:void 0}l+=p}}function El(t,e,i,n,a,o,r,s,l){var c=Nl(n,o,r),u=Tl(n,a),d=u*r,h=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-d<e/4&&(e=d+e/4),function t(e,i,n,a,o,r,s,l,c){for(var u=r/2,d=Fl(e),h=0,p=i-n,m=[],b=0;b<e.length-1;b++){for(var y=e[b],f=e[b+1],g=y.dist(f),I=f.angleTo(y);p+n<h+g;){var v=((p+=n)-h)/g,x=Ue(y.x,f.x,v),Z=Ue(y.y,f.y,v);if(x>=0&&x<c&&Z>=0&&Z<c&&p-u>=0&&p+u<=d){var G=new Cl(x,Z,I,b);G._round(),a&&!jl(e,G,r,a,o)||m.push(G)}}h+=g}return l||m.length||s||(m=t(e,h/2,n,a,o,r,s,!0,c)),m}(t,h?e/2*s%e:(u/2+2*o)*r*s%e,e,c,i,d,h,!1,l)}function Al(t,e,i,n,o){for(var r=[],s=0;s<t.length;s++)for(var l=t[s],c=void 0,u=0;u<l.length-1;u++){var d=l[u],h=l[u+1];d.x<e&&h.x<e||(d.x<e?d=new a(e,d.y+(e-d.x)/(h.x-d.x)*(h.y-d.y))._round():h.x<e&&(h=new a(e,d.y+(e-d.x)/(h.x-d.x)*(h.y-d.y))._round()),d.y<i&&h.y<i||(d.y<i?d=new a(d.x+(i-d.y)/(h.y-d.y)*(h.x-d.x),i)._round():h.y<i&&(h=new a(d.x+(i-d.y)/(h.y-d.y)*(h.x-d.x),i)._round()),d.x>=n&&h.x>=n||(d.x>=n?d=new a(n,d.y+(n-d.x)/(h.x-d.x)*(h.y-d.y))._round():h.x>=n&&(h=new a(n,d.y+(n-d.x)/(h.x-d.x)*(h.y-d.y))._round()),d.y>=o&&h.y>=o||(d.y>=o?d=new a(d.x+(o-d.y)/(h.y-d.y)*(h.x-d.x),o)._round():h.y>=o&&(h=new a(d.x+(o-d.y)/(h.y-d.y)*(h.x-d.x),o)._round()),c&&d.equals(c[c.length-1])||r.push(c=[d]),c.push(h)))))}return r}function Ol(t,e,i,n){var o=[],r=t.image,s=r.pixelRatio,l=r.paddedRect.w-2,c=r.paddedRect.h-2,u=t.right-t.left,d=t.bottom-t.top,h=r.stretchX||[[0,l]],p=r.stretchY||[[0,c]],m=function(t,e){return t+e[1]-e[0]},b=h.reduce(m,0),y=p.reduce(m,0),f=l-b,g=c-y,I=0,v=b,x=0,Z=y,G=0,w=f,W=0,X=g;if(r.content&&n){var _=r.content;I=Pl(h,0,_[0]),x=Pl(p,0,_[1]),v=Pl(h,_[0],_[2]),Z=Pl(p,_[1],_[3]),G=_[0]-I,W=_[1]-x,w=_[2]-_[0]-v,X=_[3]-_[1]-Z}var V=function(n,o,l,c){var h=Dl(n.stretch-I,v,u,t.left),p=Ql(n.fixed-G,w,n.stretch,b),m=Dl(o.stretch-x,Z,d,t.top),f=Ql(o.fixed-W,X,o.stretch,y),g=Dl(l.stretch-I,v,u,t.left),_=Ql(l.fixed-G,w,l.stretch,b),V=Dl(c.stretch-x,Z,d,t.top),S=Ql(c.fixed-W,X,c.stretch,y),B=new a(h,m),L=new a(g,m),Y=new a(g,V),z=new a(h,V),R=new a(p/s,f/s),C=new a(_/s,S/s),M=e*Math.PI/180;if(M){var J=Math.sin(M),H=Math.cos(M),k=[H,-J,J,H];B._matMult(k),L._matMult(k),z._matMult(k),Y._matMult(k)}var j=n.stretch+n.fixed,F=o.stretch+o.fixed;return{tl:B,tr:L,bl:z,br:Y,tex:{x:r.paddedRect.x+1+j,y:r.paddedRect.y+1+F,w:l.stretch+l.fixed-j,h:c.stretch+c.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:C,minFontScaleX:w/s/u,minFontScaleY:X/s/d,isSDF:i}};if(n&&(r.stretchX||r.stretchY))for(var S=Kl(h,f,b),B=Kl(p,g,y),L=0;L<S.length-1;L++)for(var Y=S[L],z=S[L+1],R=0;R<B.length-1;R++)o.push(V(Y,B[R],z,B[R+1]));else o.push(V({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function Pl(t,e,i){for(var n=0,a=0,o=t;a<o.length;a+=1){var r=o[a];n+=Math.max(e,Math.min(i,r[1]))-Math.max(e,Math.min(i,r[0]))}return n}function Kl(t,e,i){for(var n=[{fixed:-1,stretch:0}],a=0,o=t;a<o.length;a+=1){var r=o[a],s=r[0],l=r[1],c=n[n.length-1];n.push({fixed:s-c.stretch,stretch:c.stretch}),n.push({fixed:s-c.stretch,stretch:c.stretch+(l-s)})}return n.push({fixed:e+1,stretch:i}),n}function Dl(t,e,i,n){return t/e*i+n}function Ql(t,e,i,n){return t-e*i/n}var ql=function(t,e,i,n,o,r,s,l,c,u){if(this.boxStartIndex=t.length,c){var d=r.top,h=r.bottom,p=r.collisionPadding;p&&(d-=p[1],h+=p[3]);var m=h-d;m>0&&(m=Math.max(10,m),this.circleDiameter=m)}else{var b=r.top*s-l,y=r.bottom*s+l,f=r.left*s-l,g=r.right*s+l,I=r.collisionPadding;if(I&&(f-=I[0]*s,b-=I[1]*s,g+=I[2]*s,y+=I[3]*s),u){var v=new a(f,b),x=new a(g,b),Z=new a(f,y),G=new a(g,y),w=u*Math.PI/180;v._rotate(w),x._rotate(w),Z._rotate(w),G._rotate(w),f=Math.min(v.x,x.x,Z.x,G.x),g=Math.max(v.x,x.x,Z.x,G.x),b=Math.min(v.y,x.y,Z.y,G.y),y=Math.max(v.y,x.y,Z.y,G.y)}t.emplaceBack(e.x,e.y,f,b,g,y,i,n,o)}this.boxEndIndex=t.length},$l=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=tc),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function tc(t,e){return t<e?-1:t>e?1:0}function ec(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1);for(var n=1/0,o=1/0,r=-1/0,s=-1/0,l=t[0],c=0;c<l.length;c++){var u=l[c];(!c||u.x<n)&&(n=u.x),(!c||u.y<o)&&(o=u.y),(!c||u.x>r)&&(r=u.x),(!c||u.y>s)&&(s=u.y)}var d=Math.min(r-n,s-o),h=d/2,p=new $l([],ic);if(0===d)return new a(n,o);for(var m=n;m<r;m+=d)for(var b=o;b<s;b+=d)p.push(new nc(m+h,b+h,h,t));for(var y=function(t){for(var e=0,i=0,n=0,a=t[0],o=0,r=a.length,s=r-1;o<r;s=o++){var l=a[o],c=a[s],u=l.x*c.y-c.x*l.y;i+=(l.x+c.x)*u,n+=(l.y+c.y)*u,e+=3*u}return new nc(i/e,n/e,0,t)}(t),f=p.length;p.length;){var g=p.pop();(g.d>y.d||!y.d)&&(y=g,i&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,f)),g.max-y.d<=e||(p.push(new nc(g.p.x-(h=g.h/2),g.p.y-h,h,t)),p.push(new nc(g.p.x+h,g.p.y-h,h,t)),p.push(new nc(g.p.x-h,g.p.y+h,h,t)),p.push(new nc(g.p.x+h,g.p.y+h,h,t)),f+=4)}return i&&(console.log("num probes: "+f),console.log("best distance: "+y.d)),y.p}function ic(t,e){return e.max-t.max}function nc(t,e,i,n){this.p=new a(t,e),this.h=i,this.d=function(t,e){for(var i=!1,n=1/0,a=0;a<e.length;a++)for(var o=e[a],r=0,s=o.length,l=s-1;r<s;l=r++){var c=o[r],u=o[l];c.y>t.y!=u.y>t.y&&t.x<(u.x-c.x)*(t.y-c.y)/(u.y-c.y)+c.x&&(i=!i),n=Math.min(n,Qo(t,c,u))}return(i?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}$l.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},$l.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},$l.prototype.peek=function(){return this.data[0]},$l.prototype._up=function(t){for(var e=this.data,i=this.compare,n=e[t];t>0;){var a=t-1>>1,o=e[a];if(i(n,o)>=0)break;e[t]=o,t=a}e[t]=n},$l.prototype._down=function(t){for(var e=this.data,i=this.compare,n=this.length>>1,a=e[t];t<n;){var o=1+(t<<1),r=e[o],s=o+1;if(s<this.length&&i(e[s],r)<0&&(o=s,r=e[s]),i(r,a)>=0)break;e[t]=r,t=o}e[t]=a};var ac=Number.POSITIVE_INFINITY;function oc(t,e){return e[1]!==ac?function(t,e,i){var n=0,a=0;switch(e=Math.abs(e),i=Math.abs(i),t){case"top-right":case"top-left":case"top":a=i-7;break;case"bottom-right":case"bottom-left":case"bottom":a=7-i}switch(t){case"top-right":case"bottom-right":case"right":n=-e;break;case"top-left":case"bottom-left":case"left":n=e}return[n,a]}(t,e[0],e[1]):function(t,e){var i=0,n=0;e<0&&(e=0);var a=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=a-7;break;case"bottom-right":case"bottom-left":n=7-a;break;case"bottom":n=7-e;break;case"top":n=e-7}switch(t){case"top-right":case"bottom-right":i=-a;break;case"top-left":case"bottom-left":i=a;break;case"left":i=e;break;case"right":i=-e}return[i,n]}(t,e[0])}function rc(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sc(t,e,i,n,o,r,s,l,c,u,d,h,p,m,b){var y=function(t,e,i,n,o,r,s,l){for(var c=n.layout.get("text-rotate").evaluate(r,{})*Math.PI/180,u=[],d=0,h=e.positionedLines;d<h.length;d+=1)for(var p=h[d],m=0,b=p.positionedGlyphs;m<b.length;m+=1){var y=b[m];if(y.rect){var f=y.rect||{},g=4,I=!0,v=1,x=0,Z=(o||l)&&y.vertical,G=y.metrics.advance*y.scale/2;if(l&&e.verticalizable&&(x=p.lineOffset/2-(y.imageName?-(24-y.metrics.width*y.scale)/2:24*(y.scale-1))),y.imageName){var w=s[y.imageName];I=w.sdf,g=1/(v=w.pixelRatio)}var W=o?[y.x+G,y.y]:[0,0],X=o?[0,0]:[y.x+G+i[0],y.y+i[1]-x],_=[0,0];Z&&(_=X,X=[0,0]);var V=(y.metrics.left-g)*y.scale-G+X[0],S=(-y.metrics.top-g)*y.scale+X[1],B=V+f.w*y.scale/v,L=S+f.h*y.scale/v,Y=new a(V,S),z=new a(B,S),R=new a(V,L),C=new a(B,L);if(Z){var M=new a(-G,G- -17),J=-Math.PI/2,H=12-G,k=new a(22-H,-(y.imageName?H:0)),j=new(Function.prototype.bind.apply(a,[null].concat(_)));Y._rotateAround(J,M)._add(k)._add(j),z._rotateAround(J,M)._add(k)._add(j),R._rotateAround(J,M)._add(k)._add(j),C._rotateAround(J,M)._add(k)._add(j)}if(c){var F=Math.sin(c),N=Math.cos(c),T=[N,-F,F,N];Y._matMult(T),z._matMult(T),R._matMult(T),C._matMult(T)}var U=new a(0,0),E=new a(0,0);u.push({tl:Y,tr:z,bl:R,br:C,tex:f,writingMode:e.writingMode,glyphOffset:W,sectionIndex:y.sectionIndex,isSDF:I,pixelOffsetTL:U,pixelOffsetBR:E,minFontScaleX:0,minFontScaleY:0})}}return u}(0,i,l,o,r,s,n,t.allowVerticalPlacement),f=t.textSizeData,g=null;"source"===f.kind?(g=[128*o.layout.get("text-size").evaluate(s,{})])[0]>32640&&G(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===f.kind&&((g=[128*m.compositeTextSizes[0].evaluate(s,{},b),128*m.compositeTextSizes[1].evaluate(s,{},b)])[0]>32640||g[1]>32640)&&G(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,y,g,l,r,s,u,e,c.lineStartIndex,c.lineLength,p,b);for(var I=0,v=d;I<v.length;I+=1)h[v[I]]=t.text.placedSymbolArray.length-1;return 4*y.length}function lc(t){for(var e in t)return t[e];return null}function cc(t,e,i,n){var a=t.compareText;if(e in a){for(var o=a[e],r=o.length-1;r>=0;r--)if(n.dist(o[r])<i)return!0}else a[e]=[];return a[e].push(n),!1}var uc=vs.VectorTileFeature.types,dc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hc(t,e,i,n,a,o,r,s,l,c,u,d,h){var p=s?Math.min(32640,Math.round(s[0])):0,m=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,i,Math.round(32*n),Math.round(32*a),o,r,(p<<1)+(l?1:0),m,16*c,16*u,256*d,256*h)}function pc(t,e,i){t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i),t.emplaceBack(e.x,e.y,i)}function mc(t){for(var e=0,i=t.sections;e<i.length;e+=1)if(Qn(i[e].text))return!0;return!1}var bc=function(t){this.layoutVertexArray=new Ra,this.indexArray=new Fa,this.programConfigurations=t,this.segments=new so,this.dynamicLayoutVertexArray=new Ca,this.opacityVertexArray=new Ma,this.placedSymbolArray=new $a};bc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},bc.prototype.upload=function(t,e,i,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Fs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Ns.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,dc,!0),this.opacityVertexBuffer.itemSize=1),(i||n)&&this.programConfigurations.upload(t))},bc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Hn("SymbolBuffers",bc);var yc=function(t,e,i){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new i,this.segments=new so,this.collisionVertexArray=new ja};yc.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Ts.members,!0)},yc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Hn("CollisionBuffers",yc);var fc=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=sr([]),this.placementViewportMatrix=sr([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ml(this.zoom,e["text-size"]),this.iconSizeData=Ml(this.zoom,e["icon-size"]);var i=this.layers[0].layout,n=i.get("symbol-sort-key"),a=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==n.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(t){return xl[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};fc.prototype.createArrays=function(){this.text=new bc(new Co(this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new bc(new Co(this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new io,this.lineVertexArray=new no,this.symbolInstances=new eo},fc.prototype.calculateGlyphDependencies=function(t,e,i,n,a){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(i||n)&&a){var r=Os[t.charAt(o)];r&&(e[r.charCodeAt(0)]=!0)}},fc.prototype.populate=function(t,e,i){var n=this.layers[0],a=n.layout,o=a.get("text-font"),r=a.get("text-field"),s=a.get("icon-image"),l=("constant"!==r.value.kind||r.value.value instanceof ne&&!r.value.value.isEmpty()||r.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,u=a.get("symbol-sort-key");if(this.features=[],l||c){for(var d=e.iconDependencies,h=e.glyphDependencies,p=e.availableImages,m=new sa(this.zoom),b=0,y=t;b<y.length;b+=1){var f=y[b],g=f.feature,I=f.id,v=f.index,x=f.sourceLayerIndex,Z=n._featureFilter.needGeometry,G=Fo(g,Z);if(n._featureFilter.filter(m,G,i)){Z||(G.geometry=jo(g));var w=void 0;if(l){var W=n.getValueAndResolveTokens("text-field",G,i,p),X=ne.factory(W);mc(X)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===aa()||this.hasRTLText&&ra.isParsed())&&(w=As(X,n,G))}var _=void 0;if(c){var V=n.getValueAndResolveTokens("icon-image",G,i,p);_=V instanceof ae?V:ae.fromString(V)}if(w||_){var S=this.sortFeaturesByKey?u.evaluate(G,{},i):void 0;if(this.features.push({id:I,text:w,icon:_,index:v,sourceLayerIndex:x,geometry:G.geometry,properties:g.properties,type:uc[g.type],sortKey:S}),_&&(d[_.name]=!0),w){var B=o.evaluate(G,{},i).join(","),L="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(xl.vertical)>=0;for(var Y=0,z=w.sections;Y<z.length;Y+=1){var R=z[Y];if(R.image)d[R.image.name]=!0;else{var C=An(w.toString()),M=R.fontStack||B,J=h[M]=h[M]||{};this.calculateGlyphDependencies(R.text,J,L,this.allowVerticalPlacement,C)}}}}}}"line"===a.get("symbol-placement")&&(this.features=function(t){var e={},i={},n=[],a=0;function o(e){n.push(t[e]),a++}function r(t,e,a){var o=i[t];return delete i[t],i[e]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(a[0]),o}function s(t,i,a){var o=e[i];return delete e[i],e[t]=o,n[o].geometry[0].shift(),n[o].geometry[0]=a[0].concat(n[o].geometry[0]),o}function l(t,e,i){var n=i?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var c=0;c<t.length;c++){var u=t[c],d=u.geometry,h=u.text?u.text.toString():null;if(h){var p=l(h,d),m=l(h,d,!0);if(p in i&&m in e&&i[p]!==e[m]){var b=s(p,m,d),y=r(p,m,n[b].geometry);delete e[p],delete i[m],i[l(h,n[y].geometry,!0)]=y,n[b].geometry=null}else p in i?r(p,m,d):m in e?s(p,m,d):(o(c),e[p]=a-1,i[m]=a-1)}else o(c)}return n.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},fc.prototype.update=function(t,e,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,i),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,i))},fc.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},fc.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},fc.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},fc.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},fc.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},fc.prototype.addToLineVertexArray=function(t,e){var i=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),a=t.dist(e[t.segment]),o={},r=t.segment+1;r<e.length;r++)o[r]={x:e[r].x,y:e[r].y,tileUnitDistanceFromAnchor:n},r<e.length-1&&(n+=e[r+1].dist(e[r]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:a},s>0&&(a+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var c=o[l];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},fc.prototype.addSymbols=function(t,e,i,n,a,o,r,s,l,c,u,d){for(var h=t.indexArray,p=t.layoutVertexArray,m=t.segments.prepareSegment(4*e.length,p,h,this.canOverlap?o.sortKey:void 0),b=this.glyphOffsetArray.length,y=m.vertexLength,f=this.allowVerticalPlacement&&r===xl.vertical?Math.PI/2:0,g=o.text&&o.text.sections,I=0;I<e.length;I++){var v=e[I],x=v.tl,Z=v.tr,G=v.bl,w=v.br,W=v.tex,X=v.pixelOffsetTL,_=v.pixelOffsetBR,V=v.minFontScaleX,S=v.minFontScaleY,B=v.glyphOffset,L=v.isSDF,Y=v.sectionIndex,z=m.vertexLength,R=B[1];hc(p,s.x,s.y,x.x,R+x.y,W.x,W.y,i,L,X.x,X.y,V,S),hc(p,s.x,s.y,Z.x,R+Z.y,W.x+W.w,W.y,i,L,_.x,X.y,V,S),hc(p,s.x,s.y,G.x,R+G.y,W.x,W.y+W.h,i,L,X.x,_.y,V,S),hc(p,s.x,s.y,w.x,R+w.y,W.x+W.w,W.y+W.h,i,L,_.x,_.y,V,S),pc(t.dynamicLayoutVertexArray,s,f),h.emplaceBack(z,z+1,z+2),h.emplaceBack(z+1,z+2,z+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(B[0]),I!==e.length-1&&Y===e[I+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},d,g&&g[Y])}t.placedSymbolArray.emplaceBack(s.x,s.y,b,this.glyphOffsetArray.length-b,y,l,c,s.segment,i?i[0]:0,i?i[1]:0,n[0],n[1],r,0,!1,0,u)},fc.prototype._addCollisionDebugVertex=function(t,e,i,n,a,o){return e.emplaceBack(0,0),t.emplaceBack(i.x,i.y,n,a,Math.round(o.x),Math.round(o.y))},fc.prototype.addCollisionDebugVertices=function(t,e,i,n,o,r,s){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,u=o.layoutVertexArray,d=o.collisionVertexArray,h=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(u,d,r,h,p,new a(t,e)),this._addCollisionDebugVertex(u,d,r,h,p,new a(i,e)),this._addCollisionDebugVertex(u,d,r,h,p,new a(i,n)),this._addCollisionDebugVertex(u,d,r,h,p,new a(t,n)),l.vertexLength+=4;var m=o.indexArray;m.emplaceBack(c,c+1),m.emplaceBack(c+1,c+2),m.emplaceBack(c+2,c+3),m.emplaceBack(c+3,c),l.primitiveLength+=4},fc.prototype.addDebugCollisionBoxes=function(t,e,i,n){for(var a=t;a<e;a++){var o=this.collisionBoxArray.get(a);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,n?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,i)}},fc.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new yc(Ha,Us.members,Oa),this.iconCollisionBox=new yc(Ha,Us.members,Oa);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},fc.prototype._deserializeCollisionBoxesForSymbol=function(t,e,i,n,a,o,r,s,l){for(var c={},u=e;u<i;u++){var d=t.get(u);c.textBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},c.textFeatureIndex=d.featureIndex;break}for(var h=n;h<a;h++){var p=t.get(h);c.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},c.verticalTextFeatureIndex=p.featureIndex;break}for(var m=o;m<r;m++){var b=t.get(m);c.iconBox={x1:b.x1,y1:b.y1,x2:b.x2,y2:b.y2,anchorPointX:b.anchorPointX,anchorPointY:b.anchorPointY},c.iconFeatureIndex=b.featureIndex;break}for(var y=s;y<l;y++){var f=t.get(y);c.verticalIconBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.verticalIconFeatureIndex=f.featureIndex;break}return c},fc.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var i=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},fc.prototype.hasTextData=function(){return this.text.segments.get().length>0},fc.prototype.hasIconData=function(){return this.icon.segments.get().length>0},fc.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},fc.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},fc.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},fc.prototype.addIndicesForPlacedSymbol=function(t,e){for(var i=t.placedSymbolArray.get(e),n=i.vertexStartIndex+4*i.numGlyphs,a=i.vertexStartIndex;a<n;a+=4)t.indexArray.emplaceBack(a,a+1,a+2),t.indexArray.emplaceBack(a+1,a+2,a+3)},fc.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),i=Math.cos(t),n=[],a=[],o=[],r=0;r<this.symbolInstances.length;++r){o.push(r);var s=this.symbolInstances.get(r);n.push(0|Math.round(e*s.anchorX+i*s.anchorY)),a.push(s.featureIndex)}return o.sort((function(t,e){return n[t]-n[e]||a[e]-a[t]})),o},fc.prototype.addToSortKeyRanges=function(t,e){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===e?i.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},fc.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,n=this.symbolInstanceIndexes;i<n.length;i+=1){var a=this.symbolInstances.get(n[i]);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(t,i,n){t>=0&&n.indexOf(t)===i&&e.addIndicesForPlacedSymbol(e.text,t)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Hn("SymbolBucket",fc,{omit:["layers","collisionBoxArray","features","compareText"]}),fc.MAX_GLYPHS=65535,fc.addDynamicAttributes=pc;var gc=new xa({"symbol-placement":new ya(St.layout_symbol["symbol-placement"]),"symbol-spacing":new ya(St.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ya(St.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new fa(St.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ya(St.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ya(St.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ya(St.layout_symbol["icon-ignore-placement"]),"icon-optional":new ya(St.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ya(St.layout_symbol["icon-rotation-alignment"]),"icon-size":new fa(St.layout_symbol["icon-size"]),"icon-text-fit":new ya(St.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ya(St.layout_symbol["icon-text-fit-padding"]),"icon-image":new fa(St.layout_symbol["icon-image"]),"icon-rotate":new fa(St.layout_symbol["icon-rotate"]),"icon-padding":new ya(St.layout_symbol["icon-padding"]),"icon-keep-upright":new ya(St.layout_symbol["icon-keep-upright"]),"icon-offset":new fa(St.layout_symbol["icon-offset"]),"icon-anchor":new fa(St.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ya(St.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ya(St.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ya(St.layout_symbol["text-rotation-alignment"]),"text-field":new fa(St.layout_symbol["text-field"]),"text-font":new fa(St.layout_symbol["text-font"]),"text-size":new fa(St.layout_symbol["text-size"]),"text-max-width":new fa(St.layout_symbol["text-max-width"]),"text-line-height":new ya(St.layout_symbol["text-line-height"]),"text-letter-spacing":new fa(St.layout_symbol["text-letter-spacing"]),"text-justify":new fa(St.layout_symbol["text-justify"]),"text-radial-offset":new fa(St.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ya(St.layout_symbol["text-variable-anchor"]),"text-anchor":new fa(St.layout_symbol["text-anchor"]),"text-max-angle":new ya(St.layout_symbol["text-max-angle"]),"text-writing-mode":new ya(St.layout_symbol["text-writing-mode"]),"text-rotate":new fa(St.layout_symbol["text-rotate"]),"text-padding":new ya(St.layout_symbol["text-padding"]),"text-keep-upright":new ya(St.layout_symbol["text-keep-upright"]),"text-transform":new fa(St.layout_symbol["text-transform"]),"text-offset":new fa(St.layout_symbol["text-offset"]),"text-allow-overlap":new ya(St.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ya(St.layout_symbol["text-ignore-placement"]),"text-optional":new ya(St.layout_symbol["text-optional"])}),Ic={paint:new xa({"icon-opacity":new fa(St.paint_symbol["icon-opacity"]),"icon-color":new fa(St.paint_symbol["icon-color"]),"icon-halo-color":new fa(St.paint_symbol["icon-halo-color"]),"icon-halo-width":new fa(St.paint_symbol["icon-halo-width"]),"icon-halo-blur":new fa(St.paint_symbol["icon-halo-blur"]),"icon-translate":new ya(St.paint_symbol["icon-translate"]),"icon-translate-anchor":new ya(St.paint_symbol["icon-translate-anchor"]),"text-opacity":new fa(St.paint_symbol["text-opacity"]),"text-color":new fa(St.paint_symbol["text-color"],{runtimeType:Ft,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new fa(St.paint_symbol["text-halo-color"]),"text-halo-width":new fa(St.paint_symbol["text-halo-width"]),"text-halo-blur":new fa(St.paint_symbol["text-halo-blur"]),"text-translate":new ya(St.paint_symbol["text-translate"]),"text-translate-anchor":new ya(St.paint_symbol["text-translate-anchor"])}),layout:gc},vc=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Jt,this.defaultValue=t};vc.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},vc.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},vc.prototype.outputDefined=function(){return!1},vc.prototype.serialize=function(){return null},Hn("FormatSectionOverride",vc,{omit:["defaultValue"]});var xc=function(t){function e(e){t.call(this,e,Ic)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,i){if(t.prototype.recalculate.call(this,e,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var n=this.layout.get("text-writing-mode");if(n){for(var a=[],o=0,r=n;o<r.length;o+=1){var s=r[o];a.indexOf(s)<0&&a.push(s)}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,i,n){var a=this.layout.get(t).evaluate(e,{},i,n),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Ei(o.value)||!a?a:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,i){return i in t?String(t[i]):""}))}(e.properties,a)},e.prototype.createBucket=function(t){return new fc(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,i=Ic.paint.overridableProperties;t<i.length;t+=1){var n=i[t];if(e.hasPaintOverride(this.layout,n)){var a,o=this.paint.get(n),r=new vc(o),s=new Ui(r,o.property.specification);a="constant"===o.value.kind||"source"===o.value.kind?new Oi("source",s):new Pi("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[n]=new ma(o.property,a,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,i,n){return!(!this.layout||i.isDataDriven()||n.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var i=t.get("text-field"),n=Ic.paint.properties[e],a=!1,o=function(t){for(var e=0,i=t;e<i.length;e+=1)if(n.overrides&&n.overrides.hasOverride(i[e]))return void(a=!0)};if("constant"===i.value.kind&&i.value.value instanceof ne)o(i.value.value.sections);else if("source"===i.value.kind){var r=function(t){a||(t instanceof ce&&se(t.value)===Et?o(t.value.sections):t instanceof pe?o(t.sections):t.eachChild(r))},s=i.value;s._styleExpression&&r(s._styleExpression.expression)}return a},e}(Za),Zc={paint:new xa({"background-color":new ya(St.paint_background["background-color"]),"background-pattern":new Ia(St.paint_background["background-pattern"]),"background-opacity":new ya(St.paint_background["background-opacity"])})},Gc=function(t){function e(e){t.call(this,e,Zc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Za),wc={paint:new xa({"raster-opacity":new ya(St.paint_raster["raster-opacity"]),"raster-hue-rotate":new ya(St.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ya(St.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ya(St.paint_raster["raster-brightness-max"]),"raster-saturation":new ya(St.paint_raster["raster-saturation"]),"raster-contrast":new ya(St.paint_raster["raster-contrast"]),"raster-resampling":new ya(St.paint_raster["raster-resampling"]),"raster-fade-duration":new ya(St.paint_raster["raster-fade-duration"])})},Wc=function(t){function e(e){t.call(this,e,wc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Za),Xc=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(Za),_c={circle:hr,heatmap:Zr,hillshade:wr,fill:us,"fill-extrusion":_s,line:ks,symbol:xc,background:Gc,raster:Wc},Vc=r.HTMLImageElement,Sc=r.HTMLCanvasElement,Bc=r.HTMLVideoElement,Lc=r.ImageData,Yc=r.ImageBitmap,zc=function(t,e,i,n){this.context=t,this.format=i,this.texture=t.gl.createTexture(),this.update(e,n)};zc.prototype.update=function(t,e,i){var n=t.width,a=t.height,o=!(this.size&&this.size[0]===n&&this.size[1]===a||i),r=this.context,s=r.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),r.pixelStoreUnpackFlipY.set(!1),r.pixelStoreUnpack.set(1),r.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[n,a],t instanceof Vc||t instanceof Sc||t instanceof Bc||t instanceof Lc||Yc&&t instanceof Yc?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,a,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=i||{x:0,y:0},c=l.x,u=l.y;t instanceof Vc||t instanceof Sc||t instanceof Bc||t instanceof Lc||Yc&&t instanceof Yc?s.texSubImage2D(s.TEXTURE_2D,0,c,u,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,c,u,n,a,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},zc.prototype.bind=function(t,e,i){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),i!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},zc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},zc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Rc=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Rc.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Rc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Cc=function(t,e,i){this.target=t,this.parent=e,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Rc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?t:r};function Mc(t,e,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}Cc.prototype.send=function(t,e,i,n,a){var o=this;void 0===a&&(a=!1);var r=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[r]=i);var s=S(this.globalScope)?void 0:[];return this.target.postMessage({id:r,type:t,hasCallback:!!i,targetMapId:n,mustQueue:a,sourceMapId:this.mapId,data:Nn(e,s)},s),{cancel:function(){i&&delete o.callbacks[r],o.target.postMessage({id:r,type:"<cancel>",targetMapId:n,sourceMapId:o.mapId})}}},Cc.prototype.receive=function(t){var e=t.data,i=e.id;if(i&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[i];var n=this.cancelCallbacks[i];delete this.cancelCallbacks[i],n&&n()}else X()||e.mustQueue?(this.tasks[i]=e,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,e)},Cc.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Cc.prototype.processTask=function(t,e){var i=this;if("<response>"===e.type){var n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Tn(e.error)):n(null,Tn(e.data)))}else{var a=!1,o=S(this.globalScope)?void 0:[],r=e.hasCallback?function(e,n){a=!0,delete i.cancelCallbacks[t],i.target.postMessage({id:t,type:"<response>",sourceMapId:i.mapId,error:e?Nn(e):null,data:Nn(n,o)},o)}:function(t){a=!0},s=null,l=Tn(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,l,r);else if(this.parent.getWorkerSource){var c=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,c[0],l.source)[c[1]](l,r)}else r(new Error("Could not find function "+e.type));!a&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Cc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Jc=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Jc.prototype.setNorthEast=function(t){return this._ne=t instanceof Hc?new Hc(t.lng,t.lat):Hc.convert(t),this},Jc.prototype.setSouthWest=function(t){return this._sw=t instanceof Hc?new Hc(t.lng,t.lat):Hc.convert(t),this},Jc.prototype.extend=function(t){var e,i,n=this._sw,a=this._ne;if(t instanceof Hc)e=t,i=t;else{if(!(t instanceof Jc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Jc.convert(t)):this.extend(Hc.convert(t)):this;if(i=t._ne,!(e=t._sw)||!i)return this}return n||a?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),a.lng=Math.max(i.lng,a.lng),a.lat=Math.max(i.lat,a.lat)):(this._sw=new Hc(e.lng,e.lat),this._ne=new Hc(i.lng,i.lat)),this},Jc.prototype.getCenter=function(){return new Hc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Jc.prototype.getSouthWest=function(){return this._sw},Jc.prototype.getNorthEast=function(){return this._ne},Jc.prototype.getNorthWest=function(){return new Hc(this.getWest(),this.getNorth())},Jc.prototype.getSouthEast=function(){return new Hc(this.getEast(),this.getSouth())},Jc.prototype.getWest=function(){return this._sw.lng},Jc.prototype.getSouth=function(){return this._sw.lat},Jc.prototype.getEast=function(){return this._ne.lng},Jc.prototype.getNorth=function(){return this._ne.lat},Jc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Jc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Jc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Jc.prototype.contains=function(t){var e=Hc.convert(t),i=e.lng,n=e.lat,a=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(a=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&a},Jc.convert=function(t){return!t||t instanceof Jc?t:new Jc(t)};var Hc=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Hc.prototype.wrap=function(){return new Hc(d(this.lng,-180,180),this.lat)},Hc.prototype.toArray=function(){return[this.lng,this.lat]},Hc.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Hc.prototype.distanceTo=function(t){var e=Math.PI/180,i=this.lat*e,n=t.lat*e,a=Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(a,1))},Hc.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return new Jc(new Hc(this.lng-i,this.lat-e),new Hc(this.lng+i,this.lat+e))},Hc.convert=function(t){if(t instanceof Hc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Hc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Hc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var kc=2*Math.PI*6371008.8;function jc(t){return kc*Math.cos(t*Math.PI/180)}function Fc(t){return(180+t)/360}function Nc(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Tc(t,e){return t/jc(e)}function Uc(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var Ec=function(t,e,i){void 0===i&&(i=0),this.x=+t,this.y=+e,this.z=+i};Ec.fromLngLat=function(t,e){void 0===e&&(e=0);var i=Hc.convert(t);return new Ec(Fc(i.lng),Nc(i.lat),Tc(e,i.lat))},Ec.prototype.toLngLat=function(){return new Hc(360*this.x-180,Uc(this.y))},Ec.prototype.toAltitude=function(){return this.z*jc(Uc(this.y))},Ec.prototype.meterInMercatorCoordinateUnits=function(){return 1/kc*(t=Uc(this.y),1/Math.cos(t*Math.PI/180));var t};var Ac=function(t,e,i){this.z=t,this.x=e,this.y=i,this.key=Kc(0,t,t,e,i)};Ac.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Ac.prototype.url=function(t,e){var i,n,a,o,r,s=(n=this.y,a=this.z,o=Mc(256*(i=this.x),256*(n=Math.pow(2,a)-n-1),a),r=Mc(256*(i+1),256*(n+1),a),o[0]+","+o[1]+","+r[0]+","+r[1]),l=function(t,e,i){for(var n,a="",o=t;o>0;o--)a+=(e&(n=1<<o-1)?1:0)+(i&n?2:0);return a}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Ac.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new a(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Ac.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Oc=function(t,e){this.wrap=t,this.canonical=e,this.key=Kc(t,e.z,e.z,e.x,e.y)},Pc=function(t,e,i,n,a){this.overscaledZ=t,this.wrap=e,this.canonical=new Ac(i,+n,+a),this.key=Kc(e,t,i,n,a)};function Kc(t,e,i,n,a){(t*=2)<0&&(t=-1*t-1);var o=1<<i;return(o*o*t+o*a+n).toString(36)+i.toString(36)+e.toString(36)}Pc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Pc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Pc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Pc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Pc.prototype.calculateScaledKey=function(t,e){var i=this.canonical.z-t;return t>this.canonical.z?Kc(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Kc(this.wrap*+e,t,t,this.canonical.x>>i,this.canonical.y>>i)},Pc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Pc.prototype.children=function(t){if(this.overscaledZ>=t)return[new Pc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,i=2*this.canonical.x,n=2*this.canonical.y;return[new Pc(e,this.wrap,e,i,n),new Pc(e,this.wrap,e,i+1,n),new Pc(e,this.wrap,e,i,n+1),new Pc(e,this.wrap,e,i+1,n+1)]},Pc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Pc.prototype.wrapped=function(){return new Pc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Pc.prototype.unwrapTo=function(t){return new Pc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Pc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Pc.prototype.toUnwrapped=function(){return new Oc(this.wrap,this.canonical)},Pc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Pc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Ec(t.x-this.wrap,t.y))},Hn("CanonicalTileID",Ac),Hn("OverscaledTileID",Pc,{omit:["posMatrix"]});var Dc=function(t,e,i){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return G('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var n=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=i||"mapbox";for(var a=0;a<n;a++)this.data[this._idx(-1,a)]=this.data[this._idx(0,a)],this.data[this._idx(n,a)]=this.data[this._idx(n-1,a)],this.data[this._idx(a,-1)]=this.data[this._idx(a,0)],this.data[this._idx(a,n)]=this.data[this._idx(a,n-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(n,-1)]=this.data[this._idx(n-1,0)],this.data[this._idx(-1,n)]=this.data[this._idx(0,n-1)],this.data[this._idx(n,n)]=this.data[this._idx(n-1,n-1)]};Dc.prototype.get=function(t,e){var i=new Uint8Array(this.data.buffer),n=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[n],i[n+1],i[n+2])},Dc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Dc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Dc.prototype._unpackMapbox=function(t,e,i){return(256*t*256+256*e+i)/10-1e4},Dc.prototype._unpackTerrarium=function(t,e,i){return 256*t+e+i/256-32768},Dc.prototype.getPixels=function(){return new Ir({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Dc.prototype.backfillBorder=function(t,e,i){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,a=e*this.dim+this.dim,o=i*this.dim,r=i*this.dim+this.dim;switch(e){case-1:n=a-1;break;case 1:a=n+1}switch(i){case-1:o=r-1;break;case 1:r=o+1}for(var s=-e*this.dim,l=-i*this.dim,c=o;c<r;c++)for(var u=n;u<a;u++)this.data[this._idx(u,c)]=t.data[this._idx(u+s,c+l)]},Hn("DEMData",Dc);var Qc=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var i=t[e];this._stringToNumber[i]=e,this._numberToString[e]=i}};Qc.prototype.encode=function(t){return this._stringToNumber[t]},Qc.prototype.decode=function(t){return this._numberToString[t]};var qc=function(t,e,i,n,a){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=i,t._y=n,this.properties=t.properties,this.id=a},$c={geometry:{configurable:!0}};$c.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},$c.geometry.set=function(t){this._geometry=t},qc.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(qc.prototype,$c);var tu=function(){this.state={},this.stateChanges={},this.deletedStates={}};tu.prototype.updateState=function(t,e,i){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},h(this.stateChanges[t][n],i),null===this.deletedStates[t])for(var a in this.deletedStates[t]={},this.state[t])a!==n&&(this.deletedStates[t][a]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var o in this.deletedStates[t][n]={},this.state[t][n])i[o]||(this.deletedStates[t][n][o]=null);else for(var r in i)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][r]&&delete this.deletedStates[t][n][r]},tu.prototype.removeFeatureState=function(t,e,i){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},i&&void 0!==e)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][i]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][n])for(i in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][i]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},tu.prototype.getState=function(t,e){var i=String(e),n=h({},(this.state[t]||{})[i],(this.stateChanges[t]||{})[i]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var a=this.deletedStates[t][e];if(null===a)return{};for(var o in a)delete n[o]}return n},tu.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},tu.prototype.coalesceChanges=function(t,e){var i={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var a={};for(var o in this.stateChanges[n])this.state[n][o]||(this.state[n][o]={}),h(this.state[n][o],this.stateChanges[n][o]),a[o]=this.state[n][o];i[n]=a}for(var r in this.deletedStates){this.state[r]=this.state[r]||{};var s={};if(null===this.deletedStates[r])for(var l in this.state[r])s[l]={},this.state[r][l]={};else for(var c in this.deletedStates[r]){if(null===this.deletedStates[r][c])this.state[r][c]={};else for(var u=0,d=Object.keys(this.deletedStates[r][c]);u<d.length;u+=1)delete this.state[r][c][d[u]];s[c]=this.state[r][c]}i[r]=i[r]||{},h(i[r],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var p in t)t[p].setFeatureState(i,e)};var eu=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new zn(8192,16,0),this.grid3D=new zn(8192,16,0),this.featureIndexArray=new oo,this.promoteId=e};function iu(t,e,i,n,a){return I(t,(function(t,o){var r=e instanceof ba?e.get(o):null;return r&&r.evaluate?r.evaluate(i,n,a):r}))}function nu(t){for(var e=1/0,i=1/0,n=-1/0,a=-1/0,o=0,r=t;o<r.length;o+=1){var s=r[o];e=Math.min(e,s.x),i=Math.min(i,s.y),n=Math.max(n,s.x),a=Math.max(a,s.y)}return{minX:e,minY:i,maxX:n,maxY:a}}function au(t,e){return e-t}eu.prototype.insert=function(t,e,i,n,a,o){var r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,a);for(var s=o?this.grid3D:this.grid,l=0;l<e.length;l++){for(var c=e[l],u=[1/0,1/0,-1/0,-1/0],d=0;d<c.length;d++){var h=c[d];u[0]=Math.min(u[0],h.x),u[1]=Math.min(u[1],h.y),u[2]=Math.max(u[2],h.x),u[3]=Math.max(u[3],h.y)}u[0]<8192&&u[1]<8192&&u[2]>=0&&u[3]>=0&&s.insert(r,u[0],u[1],u[2],u[3])}},eu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new vs.VectorTile(new Ds(this.rawTileData)).layers,this.sourceLayerCoder=new Qc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},eu.prototype.query=function(t,e,i,n){var o=this;this.loadVTLayers();for(var r=t.params||{},s=8192/t.tileSize/t.scale,l=rn(r.filter),c=t.queryGeometry,u=t.queryPadding*s,d=nu(c),h=this.grid.query(d.minX-u,d.minY-u,d.maxX+u,d.maxY+u),p=nu(t.cameraQueryGeometry),m=this.grid3D.query(p.minX-u,p.minY-u,p.maxX+u,p.maxY+u,(function(e,i,n,o){return function(t,e,i,n,o){for(var r=0,s=t;r<s.length;r+=1){var l=s[r];if(e<=l.x&&i<=l.y&&n>=l.x&&o>=l.y)return!0}var c=[new a(e,i),new a(e,o),new a(n,o),new a(n,i)];if(t.length>2)for(var u=0,d=c;u<d.length;u+=1)if($o(t,d[u]))return!0;for(var h=0;h<t.length-1;h++)if(tr(t[h],t[h+1],c))return!0;return!1}(t.cameraQueryGeometry,e-u,i-u,n+u,o+u)})),b=0,y=m;b<y.length;b+=1)h.push(y[b]);h.sort(au);for(var f,g={},I=function(a){var u=h[a];if(u!==f){f=u;var d=o.featureIndexArray.get(u),p=null;o.loadMatchingFeature(g,d.bucketIndex,d.sourceLayerIndex,d.featureIndex,l,r.layers,r.availableImages,e,i,n,(function(e,i,n){return p||(p=jo(e)),i.queryIntersectsFeature(c,e,n,p,o.z,t.transform,s,t.pixelPosMatrix)}))}},v=0;v<h.length;v++)I(v);return g},eu.prototype.loadMatchingFeature=function(t,e,i,n,a,o,r,s,l,c,u){var d=this.bucketLayerIDs[e];if(!o||function(t,e){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])>=0)return!0;return!1}(o,d)){var p=this.sourceLayerCoder.decode(i),m=this.vtLayers[p].feature(n);if(a.needGeometry){var b=Fo(m,!0);if(!a.filter(new sa(this.tileID.overscaledZ),b,this.tileID.canonical))return}else if(!a.filter(new sa(this.tileID.overscaledZ),m))return;for(var y=this.getId(m,p),f=0;f<d.length;f++){var g=d[f];if(!(o&&o.indexOf(g)<0)){var I=s[g];if(I){var v={};void 0!==y&&c&&(v=c.getState(I.sourceLayer||"_geojsonTileLayer",y));var x=h({},l[g]);x.paint=iu(x.paint,I.paint,m,v,r),x.layout=iu(x.layout,I.layout,m,v,r);var Z=!u||u(m,I,v);if(Z){var G=new qc(m,this.z,this.x,this.y,y);G.layer=x;var w=t[g];void 0===w&&(w=t[g]=[]),w.push({featureIndex:n,feature:G,intersectionZ:Z})}}}}}},eu.prototype.lookupSymbolFeatures=function(t,e,i,n,a,o,r,s){var l={};this.loadVTLayers();for(var c=rn(a),u=0,d=t;u<d.length;u+=1)this.loadMatchingFeature(l,i,n,d[u],c,o,r,s,e);return l},eu.prototype.hasLayer=function(t){for(var e=0,i=this.bucketLayerIDs;e<i.length;e+=1)for(var n=0,a=i[e];n<a.length;n+=1)if(t===a[n])return!0;return!1},eu.prototype.getId=function(t,e){var i=t.id;return this.promoteId&&"boolean"==typeof(i=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(i=Number(i)),i},Hn("FeatureIndex",eu,{omit:["rawTileData","sourceLayerCoder"]});var ou=function(t,e){this.tileID=t,this.uid=m(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ou.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<H.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},ou.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},ou.prototype.loadVectorData=function(t,e,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var i={};if(!e)return i;for(var n=function(){var t=o[a],n=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return n.filter((function(e){return e.id===t}))[0]})));for(var r=0,s=n;r<s.length;r+=1)i[s[r].id]=t}},a=0,o=t;a<o.length;a+=1)n();return i}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var a=this.buckets[n];if(a instanceof fc){if(this.hasSymbolBuckets=!0,!i)break;a.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var r=this.buckets[o];if(r instanceof fc&&r.hasRTLText){this.hasRTLText=!0,ra.isLoading()||ra.isLoaded()||"deferred"!==aa()||oa();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(l))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Qa},ou.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ou.prototype.getBucket=function(t){return this.buckets[t.id]},ou.prototype.upload=function(t){for(var e in this.buckets){var i=this.buckets[e];i.uploadPending()&&i.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new zc(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new zc(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},ou.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},ou.prototype.queryRenderedFeatures=function(t,e,i,n,a,o,r,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:a,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:r,queryPadding:this.queryPadding*l},t,e,i):{}},ou.prototype.querySourceFeatures=function(t,e){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var n=i.loadVTLayers(),a=e?e.sourceLayer:"",o=n._geojsonTileLayer||n[a];if(o)for(var r=rn(e&&e.filter),s=this.tileID.canonical,l=s.z,c=s.x,u=s.y,d={z:l,x:c,y:u},h=0;h<o.length;h++){var p=o.feature(h);if(r.needGeometry){var m=Fo(p,!0);if(!r.filter(new sa(this.tileID.overscaledZ),m,this.tileID.canonical))continue}else if(!r.filter(new sa(this.tileID.overscaledZ),p))continue;var b=i.getId(p,a),y=new qc(p,l,c,u,b);y.tile=d,t.push(y)}}},ou.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},ou.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ou.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var i=_(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),a=!1;if(this.expirationTime>n)a=!1;else if(e)if(this.expirationTime<e)a=!0;else{var o=this.expirationTime-e;o?this.expirationTime=n+Math.max(o,3e4):a=!0}else a=!0;a?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ou.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},ou.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var i=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets)if(e.style.hasLayer(n)){var a=this.buckets[n],o=a.layers[0].sourceLayer||"_geojsonTileLayer",r=i[o],s=t[o];if(r&&s&&0!==Object.keys(s).length){a.update(s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=e&&e.style&&e.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(a)))}}}},ou.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},ou.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<H.now()},ou.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ou.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=H.now()+t},ou.prototype.setDependencies=function(t,e){for(var i={},n=0,a=e;n<a.length;n+=1)i[a[n]]=!0;this.dependencies[t]=i},ou.prototype.hasDependency=function(t,e){for(var i=0,n=t;i<n.length;i+=1){var a=this.dependencies[n[i]];if(a)for(var o=0,r=e;o<r.length;o+=1)if(a[r[o]])return!0}return!1};var ru=r.performance,su=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},ru.mark(this._marks.start)};su.prototype.finish=function(){ru.mark(this._marks.end);var t=ru.getEntriesByName(this._marks.measure);return 0===t.length&&(ru.measure(this._marks.measure,this._marks.start,this._marks.end),t=ru.getEntriesByName(this._marks.measure),ru.clearMarks(this._marks.start),ru.clearMarks(this._marks.end),ru.clearMeasures(this._marks.measure)),t},t.Actor=Cc,t.AlphaImage=gr,t.CanonicalTileID=Ac,t.CollisionBoxArray=Qa,t.Color=te,t.DEMData=Dc,t.DataConstantProperty=ya,t.DictionaryCoder=Qc,t.EXTENT=8192,t.ErrorEvent=_t,t.EvaluationParameters=sa,t.Event=Xt,t.Evented=Vt,t.FeatureIndex=eu,t.FillBucket=ss,t.FillExtrusionBucket=ws,t.ImageAtlas=vl,t.ImagePosition=gl,t.LineBucket=Cs,t.LngLat=Hc,t.LngLatBounds=Jc,t.MercatorCoordinate=Ec,t.ONE_EM=24,t.OverscaledTileID=Pc,t.Point=a,t.Point$1=a,t.Properties=xa,t.Protobuf=Ds,t.RGBAImage=Ir,t.RequestManager=E,t.RequestPerformance=su,t.ResourceType=mt,t.SegmentVector=so,t.SourceFeatureState=tu,t.StructArrayLayout1ui2=Pa,t.StructArrayLayout2f1f2i16=ka,t.StructArrayLayout2i4=Va,t.StructArrayLayout3ui6=Fa,t.StructArrayLayout4i8=Sa,t.SymbolBucket=fc,t.Texture=zc,t.Tile=ou,t.Transitionable=ua,t.Uniform1f=xo,t.Uniform1i=vo,t.Uniform2f=Zo,t.Uniform3f=Go,t.Uniform4f=wo,t.UniformColor=Wo,t.UniformMatrix4f=_o,t.UnwrappedTileID=Oc,t.ValidationError=Bt,t.WritingMode=xl,t.ZoomHistory=Un,t.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},t.addDynamicAttributes=pc,t.asyncAll=function(t,e,i){if(!t.length)return i(null,[]);var n=t.length,a=new Array(t.length),o=null;t.forEach((function(t,r){e(t,(function(t,e){t&&(o=t),a[r]=e,0==--n&&i(o,a)}))}))},t.bezier=l,t.bindAll=f,t.browser=H,t.cacheEntryPossiblyAdded=function(t){++ht>lt&&(t.getActor().send("enforceCacheSizeLimit",st),ht=0)},t.clamp=u,t.clearTileCache=function(t){var e=r.caches.delete("mapbox-tiles");t&&e.catch(t).then((function(){return t()}))},t.clipLine=Al,t.clone=function(t){var e=new rr(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=x,t.clone$2=function(t){var e=new rr(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=Es,t.config=k,t.create=function(){var t=new rr(16);return rr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new rr(9);return rr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new rr(4);return rr!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Ai,t.createLayout=Xa,t.createStyleLayer=function(t){return"custom"===t.type?new Xc(t):new _c[t.type](t)},t.cross=function(t,e,i){var n=e[0],a=e[1],o=e[2],r=i[0],s=i[1],l=i[2];return t[0]=a*l-o*s,t[1]=o*r-n*l,t[2]=n*s-a*r,t},t.deepEqual=function t(e,i){if(Array.isArray(e)){if(!Array.isArray(i)||e.length!==i.length)return!1;for(var n=0;n<e.length;n++)if(!t(e[n],i[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==i){if("object"!=typeof i)return!1;if(Object.keys(e).length!==Object.keys(i).length)return!1;for(var a in e)if(!t(e[a],i[a]))return!1;return!0}return e===i},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=c,t.emitValidationErrors=Yn,t.endsWith=g,t.enforceCacheSizeLimit=function(t){ct(),tt&&tt.then((function(e){e.keys().then((function(i){for(var n=0;n<i.length-t;n++)e.delete(i[n])}))}))},t.evaluateSizeForFeature=Jl,t.evaluateSizeForZoom=Hl,t.evaluateVariableOffset=oc,t.evented=na,t.extend=h,t.featureFilter=rn,t.filterObject=v,t.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Yl,t.getAnchorJustification=rc,t.getArrayBuffer=vt,t.getImage=Gt,t.getJSON=function(t,e){return It(h(t,{type:"json"}),e)},t.getRTLTextPluginStatus=aa,t.getReferrer=gt,t.getVideo=function(t,e){var i,n,a=r.document.createElement("video");a.muted=!0,a.onloadstart=function(){e(null,a)};for(var o=0;o<t.length;o++){var s=r.document.createElement("source");i=t[o],n=void 0,(n=r.document.createElement("a")).href=i,(n.protocol!==r.document.location.protocol||n.host!==r.document.location.host)&&(a.crossOrigin="Anonymous"),s.src=t[o],a.appendChild(s)}return{cancel:function(){}}},t.identity=sr,t.invert=function(t,e){var i=e[0],n=e[1],a=e[2],o=e[3],r=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],m=e[12],b=e[13],y=e[14],f=e[15],g=i*s-n*r,I=i*l-a*r,v=i*c-o*r,x=n*l-a*s,Z=n*c-o*s,G=a*c-o*l,w=u*b-d*m,W=u*y-h*m,X=u*f-p*m,_=d*y-h*b,V=d*f-p*b,S=h*f-p*y,B=g*S-I*V+v*_+x*X-Z*W+G*w;return B?(t[0]=(s*S-l*V+c*_)*(B=1/B),t[1]=(a*V-n*S-o*_)*B,t[2]=(b*G-y*Z+f*x)*B,t[3]=(h*Z-d*G-p*x)*B,t[4]=(l*X-r*S-c*W)*B,t[5]=(i*S-a*X+o*W)*B,t[6]=(y*v-m*G-f*I)*B,t[7]=(u*G-h*v+p*I)*B,t[8]=(r*V-s*X+c*w)*B,t[9]=(n*X-i*V-o*w)*B,t[10]=(m*Z-b*v+f*g)*B,t[11]=(d*v-u*Z-p*g)*B,t[12]=(s*W-r*_-l*w)*B,t[13]=(i*_-n*W+a*w)*B,t[14]=(b*I-m*x-y*g)*B,t[15]=(u*x-d*I+h*g)*B,t):null},t.isChar=En,t.isMapboxURL=A,t.keysDifference=function(t,e){var i=[];for(var n in t)n in e||i.push(n);return i},t.makeRequest=It,t.mapObject=I,t.mercatorXfromLng=Fc,t.mercatorYfromLat=Nc,t.mercatorZfromAltitude=Tc,t.mul=ur,t.multiply=lr,t.mvt=vs,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var i=e[0],n=e[1],a=e[2],o=i*i+n*n+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ue,t.offscreenCanvasSupported=pt,t.ortho=function(t,e,i,n,a,o,r){var s=1/(e-i),l=1/(n-a),c=1/(o-r);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*s,t[13]=(a+n)*l,t[14]=(r+o)*c,t[15]=1,t},t.parseGlyphPBF=function(t){return new Ds(t).readFields(ml,[])},t.pbf=Ds,t.performSymbolLayout=function(t,e,i,n,a,o,r){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.kind){var u=t.textSizeData,d=u.maxZoom;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new sa(u.minZoom),r),l["text-size"].possiblyEvaluate(new sa(d),r)]}if("composite"===t.iconSizeData.kind){var h=t.iconSizeData,p=h.maxZoom;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new sa(h.minZoom),r),l["icon-size"].possiblyEvaluate(new sa(p),r)]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new sa(t.zoom+1),r),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new sa(t.zoom+1),r),c.textMaxSize=l["text-size"].possiblyEvaluate(new sa(18));for(var m=24*s.get("text-line-height"),b="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),y=s.get("text-keep-upright"),f=s.get("text-size"),g=function(){var o=v[I],l=s.get("text-font").evaluate(o,{},r).join(","),u=f.evaluate(o,{},r),d=c.layoutTextSize.evaluate(o,{},r),h=c.layoutIconSize.evaluate(o,{},r),p={horizontal:{},vertical:void 0},g=o.text,x=[0,0];if(g){var Z=g.toString(),w=24*s.get("text-letter-spacing").evaluate(o,{},r),W=function(t){for(var e=0,i=t;e<i.length;e+=1)if(n=i[e].charCodeAt(0),En.Arabic(n)||En["Arabic Supplement"](n)||En["Arabic Extended-A"](n)||En["Arabic Presentation Forms-A"](n)||En["Arabic Presentation Forms-B"](n))return!1;var n;return!0}(Z)?w:0,X=s.get("text-anchor").evaluate(o,{},r),_=s.get("text-variable-anchor");if(!_){var V=s.get("text-radial-offset").evaluate(o,{},r);x=V?oc(X,[24*V,ac]):s.get("text-offset").evaluate(o,{},r).map((function(t){return 24*t}))}var S=b?"center":s.get("text-justify").evaluate(o,{},r),B=s.get("symbol-placement"),L="point"===B?24*s.get("text-max-width").evaluate(o,{},r):0,Y=function(){t.allowVerticalPlacement&&An(Z)&&(p.vertical=wl(g,e,i,a,l,L,m,X,"left",W,x,xl.vertical,!0,B,d,u))};if(!b&&_){for(var z="auto"===S?_.map((function(t){return rc(t)})):[S],R=!1,C=0;C<z.length;C++){var M=z[C];if(!p.horizontal[M])if(R)p.horizontal[M]=p.horizontal[0];else{var J=wl(g,e,i,a,l,L,m,"center",M,W,x,xl.horizontal,!1,B,d,u);J&&(p.horizontal[M]=J,R=1===J.positionedLines.length)}}Y()}else{"auto"===S&&(S=rc(X));var H=wl(g,e,i,a,l,L,m,X,S,W,x,xl.horizontal,!1,B,d,u);H&&(p.horizontal[S]=H),Y(),An(Z)&&b&&y&&(p.vertical=wl(g,e,i,a,l,L,m,X,S,W,x,xl.vertical,!1,B,d,u))}}var k=void 0,j=!1;if(o.icon&&o.icon.name){var F=n[o.icon.name];F&&(k=function(t,e,i){var n=Yl(i),a=e[0]-t.displaySize[0]*n.horizontalAlign,o=e[1]-t.displaySize[1]*n.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:a,right:a+t.displaySize[0]}}(a[o.icon.name],s.get("icon-offset").evaluate(o,{},r),s.get("icon-anchor").evaluate(o,{},r)),j=F.sdf,void 0===t.sdfIcons?t.sdfIcons=F.sdf:t.sdfIcons!==F.sdf&&G("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(F.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var N=lc(p.horizontal)||p.vertical;t.iconsInText=!!N&&N.iconsInText,(N||k)&&function(t,e,i,n,a,o,r,s,l,c,u){var d=o.textMaxSize.evaluate(e,{});void 0===d&&(d=r);var h,p=t.layers[0].layout,m=p.get("icon-offset").evaluate(e,{},u),b=lc(i.horizontal),y=r/24,f=t.tilePixelRatio*y,g=t.tilePixelRatio*d/24,I=t.tilePixelRatio*s,v=t.tilePixelRatio*p.get("symbol-spacing"),x=p.get("text-padding")*t.tilePixelRatio,Z=p.get("icon-padding")*t.tilePixelRatio,w=p.get("text-max-angle")/180*Math.PI,W="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),X="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),_=p.get("symbol-placement"),V=v/2,S=p.get("icon-text-fit");n&&"none"!==S&&(t.allowVerticalPlacement&&i.vertical&&(h=Rl(n,i.vertical,S,p.get("icon-text-fit-padding"),m,y)),b&&(n=Rl(n,b,S,p.get("icon-text-fit-padding"),m,y)));var B=function(s,d){d.x<0||d.x>=8192||d.y<0||d.y>=8192||function(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b,y,f,g,I,v,x,Z,w,W){var X,_,V,S,B,L=t.addToLineVertexArray(e,i),Y=0,z=0,R=0,C=0,M=-1,J=-1,H={},k=po(""),j=0,F=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(j=(X=s.layout.get("text-offset").evaluate(v,{},w).map((function(t){return 24*t})))[0],F=X[1]):(j=24*s.layout.get("text-radial-offset").evaluate(v,{},w),F=ac),t.allowVerticalPlacement&&n.vertical){var N=s.layout.get("text-rotate").evaluate(v,{},w)+90;S=new ql(l,e,c,u,d,n.vertical,h,p,m,N),r&&(B=new ql(l,e,c,u,d,r,y,f,m,N))}if(a){var T=s.layout.get("icon-rotate").evaluate(v,{}),U="none"!==s.layout.get("icon-text-fit"),E=Ol(a,T,Z,U),A=r?Ol(r,T,Z,U):void 0;V=new ql(l,e,c,u,d,a,y,f,!1,T),Y=4*E.length;var O=t.iconSizeData,P=null;"source"===O.kind?(P=[128*s.layout.get("icon-size").evaluate(v,{})])[0]>32640&&G(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===O.kind&&((P=[128*x.compositeIconSizes[0].evaluate(v,{},w),128*x.compositeIconSizes[1].evaluate(v,{},w)])[0]>32640||P[1]>32640)&&G(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,E,P,I,g,v,!1,e,L.lineStartIndex,L.lineLength,-1,w),M=t.icon.placedSymbolArray.length-1,A&&(z=4*A.length,t.addSymbols(t.icon,A,P,I,g,v,xl.vertical,e,L.lineStartIndex,L.lineLength,-1,w),J=t.icon.placedSymbolArray.length-1)}for(var K in n.horizontal){var D=n.horizontal[K];if(!_){k=po(D.text);var Q=s.layout.get("text-rotate").evaluate(v,{},w);_=new ql(l,e,c,u,d,D,h,p,m,Q)}var q=1===D.positionedLines.length;if(R+=sc(t,e,D,o,s,m,v,b,L,n.vertical?xl.horizontal:xl.horizontalOnly,q?Object.keys(n.horizontal):[K],H,M,x,w),q)break}n.vertical&&(C+=sc(t,e,n.vertical,o,s,m,v,b,L,xl.vertical,["vertical"],H,J,x,w));var $=_?_.boxStartIndex:t.collisionBoxArray.length,tt=_?_.boxEndIndex:t.collisionBoxArray.length,et=S?S.boxStartIndex:t.collisionBoxArray.length,it=S?S.boxEndIndex:t.collisionBoxArray.length,nt=V?V.boxStartIndex:t.collisionBoxArray.length,at=V?V.boxEndIndex:t.collisionBoxArray.length,ot=B?B.boxStartIndex:t.collisionBoxArray.length,rt=B?B.boxEndIndex:t.collisionBoxArray.length,st=-1,lt=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=lt(_,st),st=lt(S,st),st=lt(V,st);var ct=(st=lt(B,st))>-1?1:0;ct&&(st*=W/24),t.glyphOffsetArray.length>=fc.MAX_GLYPHS&&G("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==v.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,v.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,H.right>=0?H.right:-1,H.center>=0?H.center:-1,H.left>=0?H.left:-1,H.vertical||-1,M,J,k,$,tt,et,it,nt,at,ot,rt,c,R,C,Y,z,ct,0,h,j,F,st)}(t,d,s,i,n,a,h,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,f,x,W,l,I,Z,X,m,e,o,c,u,r)};if("line"===_)for(var L=0,Y=Al(e.geometry,0,0,8192,8192);L<Y.length;L+=1)for(var z=Y[L],R=0,C=El(z,v,w,i.vertical||b,n,24,g,t.overscaling,8192);R<C.length;R+=1){var M=C[R];b&&cc(t,b.text,V,M)||B(z,M)}else if("line-center"===_)for(var J=0,H=e.geometry;J<H.length;J+=1){var k=H[J];if(k.length>1){var j=Ul(k,w,i.vertical||b,n,24,g);j&&B(k,j)}}else if("Polygon"===e.type)for(var F=0,N=ns(e.geometry,0);F<N.length;F+=1){var T=N[F],U=ec(T,16);B(T[0],new Cl(U.x,U.y,0))}else if("LineString"===e.type)for(var E=0,A=e.geometry;E<A.length;E+=1){var O=A[E];B(O,new Cl(O[0].x,O[0].y,0))}else if("Point"===e.type)for(var P=0,K=e.geometry;P<K.length;P+=1)for(var D=0,Q=K[P];D<Q.length;D+=1){var q=Q[D];B([q],new Cl(q.x,q.y,0))}}(t,o,p,k,n,c,d,h,x,j,r)},I=0,v=t.features;I<v.length;I+=1)g();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,i,n,a){var o,r=1/Math.tan(e/2);return t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(t[10]=(a+n)*(o=1/(n-a)),t[14]=2*a*n*o):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){for(var i={},n=0;n<e.length;n++){var a=e[n];a in t&&(i[a]=t[a])}return i},t.plugin=ra,t.polygonIntersectsPolygon=Uo,t.postMapLoadEvent=rt,t.postTurnstileEvent=at,t.potpack=fl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Hn,t.registerForPluginStateChange=function(t){return t({pluginStatus:$n,pluginURL:ta}),na.on("pluginStateChange",t),t},t.renderColorRamp=xr,t.rotate=function(t,e,i){var n=e[0],a=e[1],o=e[2],r=e[3],s=Math.sin(i),l=Math.cos(i);return t[0]=n*l+o*s,t[1]=a*l+r*s,t[2]=n*-s+o*l,t[3]=a*-s+r*l,t},t.rotateX=function(t,e,i){var n=Math.sin(i),a=Math.cos(i),o=e[4],r=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+c*n,t[5]=r*a+u*n,t[6]=s*a+d*n,t[7]=l*a+h*n,t[8]=c*a-o*n,t[9]=u*a-r*n,t[10]=d*a-s*n,t[11]=h*a-l*n,t},t.rotateZ=function(t,e,i){var n=Math.sin(i),a=Math.cos(i),o=e[0],r=e[1],s=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+c*n,t[1]=r*a+u*n,t[2]=s*a+d*n,t[3]=l*a+h*n,t[4]=c*a-o*n,t[5]=u*a-r*n,t[6]=d*a-s*n,t[7]=h*a-l*n,t},t.scale=function(t,e,i){var n=i[0],a=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},t.scale$2=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},t.setCacheLimits=function(t,e){st=t,lt=e},t.setRTLTextPlugin=function(t,e,i){if(void 0===i&&(i=!1),"deferred"===$n||"loading"===$n||"loaded"===$n)throw new Error("setRTLTextPlugin cannot be called multiple times.");ta=H.resolveURL(t),$n="deferred",qn=e,ia(),i||oa()},t.sphericalToCartesian=function(t){var e=t[0],i=t[1],n=t[2];return i+=90,i*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(i)*Math.sin(n),y:e*Math.sin(i)*Math.sin(n),z:e*Math.cos(n)}},t.sqrLen=function(t){var e=t[0],i=t[1];return e*e+i*i},t.styleSpec=St,t.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},t.symbolSize=kl,t.transformMat3=function(t,e,i){var n=e[0],a=e[1],o=e[2];return t[0]=n*i[0]+a*i[3]+o*i[6],t[1]=n*i[1]+a*i[4]+o*i[7],t[2]=n*i[2]+a*i[5]+o*i[8],t},t.transformMat4=dr,t.translate=function(t,e,i){var n,a,o,r,s,l,c,u,d,h,p,m,b=i[0],y=i[1],f=i[2];return e===t?(t[12]=e[0]*b+e[4]*y+e[8]*f+e[12],t[13]=e[1]*b+e[5]*y+e[9]*f+e[13],t[14]=e[2]*b+e[6]*y+e[10]*f+e[14],t[15]=e[3]*b+e[7]*y+e[11]*f+e[15]):(a=e[1],o=e[2],r=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],p=e[10],m=e[11],t[0]=n=e[0],t[1]=a,t[2]=o,t[3]=r,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=d,t[9]=h,t[10]=p,t[11]=m,t[12]=n*b+s*y+d*f+e[12],t[13]=a*b+l*y+h*f+e[13],t[14]=o*b+c*y+p*f+e[14],t[15]=r*b+u*y+m*f+e[15]),t},t.triggerPluginCompletionEvent=ea,t.uniqueId=m,t.validateCustomStyleLayer=function(t){var e=[],i=t.id;return void 0===i&&e.push({message:"layers."+i+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+i+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Sn,t.validateStyle=Vn,t.values=function(t){var e=[];for(var i in t)e.push(t[i]);return e},t.vectorTile=vs,t.version="1.13.2",t.warnOnce=G,t.webpSupported=j,t.window=r,t.wrap=d})),n(["./shared"],(function(t){function e(t){var i=typeof t;if("number"===i||"boolean"===i||"string"===i||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",a=0,o=t;a<o.length;a+=1)n+=e(o[a])+",";return n+"]"}for(var r=Object.keys(t).sort(),s="{",l=0;l<r.length;l++)s+=JSON.stringify(r[l])+":"+e(t[r[l]])+",";return s+"}"}function i(i){for(var n="",a=0,o=t.refProperties;a<o.length;a+=1)n+="/"+e(i[o[a]]);return n}var n=function(t){this.keyCache={},t&&this.replace(t)};n.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},n.prototype.update=function(e,n){for(var a=this,o=0,r=e;o<r.length;o+=1){var s=r[o];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var c=0,u=n;c<u.length;c+=1){var d=u[c];delete this.keyCache[d],delete this._layerConfigs[d],delete this._layers[d]}this.familiesBySource={};for(var h=0,p=function(t,e){for(var n={},a=0;a<t.length;a++){var o=e&&e[t[a].id]||i(t[a]);e&&(e[t[a].id]=o);var r=n[o];r||(r=n[o]=[]),r.push(t[a])}var s=[];for(var l in n)s.push(n[l]);return s}(t.values(this._layerConfigs),this.keyCache);h<p.length;h+=1){var m=p[h].map((function(t){return a._layers[t.id]})),b=m[0];if("none"!==b.visibility){var y=b.source||"",f=this.familiesBySource[y];f||(f=this.familiesBySource[y]={});var g=b.sourceLayer||"_geojsonTileLayer",I=f[g];I||(I=f[g]=[]),I.push(m)}}};var a=function(e){var i={},n=[];for(var a in e){var o=e[a],r=i[a]={};for(var s in o){var l=o[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var c={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};n.push(c),r[s]={rect:c,metrics:l.metrics}}}}var u=t.potpack(n),d=new t.AlphaImage({width:u.w||1,height:u.h||1});for(var h in e){var p=e[h];for(var m in p){var b=p[+m];if(b&&0!==b.bitmap.width&&0!==b.bitmap.height){var y=i[h][m].rect;t.AlphaImage.copy(b.bitmap,d,{x:0,y:0},{x:y.x+1,y:y.y+1},b.bitmap)}}}this.image=d,this.positions=i};t.register("GlyphAtlas",a);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function r(e,i,n){for(var a=new t.EvaluationParameters(i),o=0,r=e;o<r.length;o+=1)r[o].recalculate(a,n)}function s(e,i){var n=t.getArrayBuffer(e.request,(function(e,n,a,o){e?i(e):n&&i(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(n)),rawData:n,cacheControl:a,expires:o})}));return function(){n.cancel(),i()}}o.prototype.parse=function(e,i,n,o,s){var l=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var c=new t.DictionaryCoder(Object.keys(e.layers).sort()),u=new t.FeatureIndex(this.tileID,this.promoteId);u.bucketLayerIDs=[];var d,h,p,m,b={},y={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:n},f=i.familiesBySource[this.source];for(var g in f){var I=e.layers[g];if(I){1===I.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+g+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var v=c.encode(g),x=[],Z=0;Z<I.length;Z++){var G=I.feature(Z),w=u.getId(G,g);x.push({feature:G,id:w,index:Z,sourceLayerIndex:v})}for(var W=0,X=f[g];W<X.length;W+=1){var _=X[W],V=_[0];V.minzoom&&this.zoom<Math.floor(V.minzoom)||V.maxzoom&&this.zoom>=V.maxzoom||"none"!==V.visibility&&(r(_,this.zoom,n),(b[V.id]=V.createBucket({index:u.bucketLayerIDs.length,layers:_,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:v,sourceID:this.source})).populate(x,y,this.tileID.canonical),u.bucketLayerIDs.push(_.map((function(t){return t.id}))))}}}var S=t.mapObject(y.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(S).length?o.send("getGlyphs",{uid:this.uid,stacks:S},(function(t,e){d||(d=t,h=e,Y.call(l))})):h={};var B=Object.keys(y.iconDependencies);B.length?o.send("getImages",{icons:B,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){d||(d=t,p=e,Y.call(l))})):p={};var L=Object.keys(y.patternDependencies);function Y(){if(d)return s(d);if(h&&p&&m){var e=new a(h),i=new t.ImageAtlas(p,m);for(var o in b){var l=b[o];l instanceof t.SymbolBucket?(r(l.layers,this.zoom,n),t.performSymbolLayout(l,h,e.positions,p,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof t.LineBucket||l instanceof t.FillBucket||l instanceof t.FillExtrusionBucket)&&(r(l.layers,this.zoom,n),l.addFeatures(y,this.tileID.canonical,i.patternPositions))}this.status="done",s(null,{buckets:t.values(b).filter((function(t){return!t.isEmpty()})),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:i,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}L.length?o.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){d||(d=t,m=e,Y.call(l))})):m={},Y.call(this)};var l=function(t,e,i,n){this.actor=t,this.layerIndex=e,this.availableImages=i,this.loadVectorData=n||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(e,i){var n=this,a=e.uid;this.loading||(this.loading={});var r=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[a]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete n.loading[a],e||!o)return s.status="done",n.loaded[a]=s,i(e);var l=o.rawData,c={};o.expires&&(c.expires=o.expires),o.cacheControl&&(c.cacheControl=o.cacheControl);var u={};if(r){var d=r.finish();d&&(u.resourceTiming=JSON.parse(JSON.stringify(d)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(e,n){if(e||!n)return i(e);i(null,t.extend({rawTileData:l.slice(0)},n,c,u))})),n.loaded=n.loaded||{},n.loaded[a]=s}))},l.prototype.reloadTile=function(t,e){var i=this,n=this.loaded,a=t.uid,o=this;if(n&&n[a]){var r=n[a];r.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,n){var a=r.reloadCallback;a&&(delete r.reloadCallback,r.parse(r.vectorTile,o.layerIndex,i.availableImages,o.actor,a)),e(t,n)};"parsing"===r.status?r.reloadCallback=s:"done"===r.status&&(r.vectorTile?r.parse(r.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},l.prototype.abortTile=function(t,e){var i=this.loading,n=t.uid;i&&i[n]&&i[n].abort&&(i[n].abort(),delete i[n]),e()},l.prototype.removeTile=function(t,e){var i=this.loaded,n=t.uid;i&&i[n]&&delete i[n],e()};var c=t.window.ImageBitmap,u=function(){this.loaded={}};function d(t,e){if(0!==t.length){h(t[0],e);for(var i=1;i<t.length;i++)h(t[i],!e)}}function h(t,e){for(var i=0,n=0,a=t.length,o=a-1;n<a;o=n++)i+=(t[n][0]-t[o][0])*(t[o][1]+t[n][1]);i>=0!=!!e&&t.reverse()}u.prototype.loadTile=function(e,i){var n=e.uid,a=e.encoding,o=e.rawImageData,r=c&&o instanceof c?this.getImageData(o):o,s=new t.DEMData(n,r,a);this.loaded=this.loaded||{},this.loaded[n]=s,i(null,s)},u.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)},u.prototype.removeTile=function(t){var e=this.loaded,i=t.uid;e&&e[i]&&delete e[i]};var p=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,m=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};m.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],i=0,n=this._feature.geometry;i<n.length;i+=1){var a=n[i];e.push([new t.Point$1(a[0],a[1])])}return e}for(var o=[],r=0,s=this._feature.geometry;r<s.length;r+=1){for(var l=[],c=0,u=s[r];c<u.length;c+=1){var d=u[c];l.push(new t.Point$1(d[0],d[1]))}o.push(l)}return o},m.prototype.toGeoJSON=function(t,e,i){return p.call(this,t,e,i)};var b=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};b.prototype.feature=function(t){return new m(this._features[t])};var y=t.vectorTile.VectorTileFeature,f=g;function g(t,e){this.options=e||{},this.features=t,this.length=t.length}function I(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}g.prototype.feature=function(t){return new I(this.features[t],this.options.extent)},I.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var n=e[i],a=[],o=0;o<n.length;o++)a.push(new t.Point$1(n[o][0],n[o][1]));this.geometry.push(a)}return this.geometry},I.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,i=-1/0,n=1/0,a=-1/0,o=0;o<t.length;o++)for(var r=t[o],s=0;s<r.length;s++){var l=r[s];e=Math.min(e,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),a=Math.max(a,l.y)}return[e,n,i,a]},I.prototype.toGeoJSON=y.prototype.toGeoJSON;var v=Z,x=f;function Z(e){var i=new t.pbf;return function(t,e){for(var i in t.layers)e.writeMessage(3,G,t.layers[i])}(e,i),i.finish()}function G(t,e){var i;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<t.length;i++)n.feature=t.feature(i),e.writeMessage(2,w,n);var a=n.keys;for(i=0;i<a.length;i++)e.writeStringField(3,a[i]);var o=n.values;for(i=0;i<o.length;i++)e.writeMessage(4,S,o[i])}function w(t,e){var i=t.feature;void 0!==i.id&&e.writeVarintField(1,i.id),e.writeMessage(2,W,t),e.writeVarintField(3,i.type),e.writeMessage(4,V,i)}function W(t,e){var i=t.feature,n=t.keys,a=t.values,o=t.keycache,r=t.valuecache;for(var s in i.properties){var l=o[s];void 0===l&&(n.push(s),o[s]=l=n.length-1),e.writeVarint(l);var c=i.properties[s],u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var d=u+":"+c,h=r[d];void 0===h&&(a.push(c),r[d]=h=a.length-1),e.writeVarint(h)}}function X(t,e){return(e<<3)+(7&t)}function _(t){return t<<1^t>>31}function V(t,e){for(var i=t.loadGeometry(),n=t.type,a=0,o=0,r=i.length,s=0;s<r;s++){var l=i[s],c=1;1===n&&(c=l.length),e.writeVarint(X(1,c));for(var u=3===n?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==n&&e.writeVarint(X(2,u-1));var h=l[d].x-a,p=l[d].y-o;e.writeVarint(_(h)),e.writeVarint(_(p)),a+=h,o+=p}3===n&&e.writeVarint(X(7,1))}}function S(t,e){var i=typeof t;"string"===i?e.writeStringField(1,t):"boolean"===i?e.writeBooleanField(7,t):"number"===i&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function B(t,e,i,n){L(t,i,n),L(e,2*i,2*n),L(e,2*i+1,2*n+1)}function L(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function Y(t,e,i,n){var a=t-i,o=e-n;return a*a+o*o}v.fromVectorTileJs=Z,v.fromGeojsonVt=function(t,e){e=e||{};var i={};for(var n in t)i[n]=new f(t[n].features,e),i[n].name=n,i[n].version=e.version,i[n].extent=e.extent;return Z({layers:i})},v.GeoJSONWrapper=x;var z=function(t){return t[0]},R=function(t){return t[1]},C=function(t,e,i,n,a){void 0===e&&(e=z),void 0===i&&(i=R),void 0===n&&(n=64),void 0===a&&(a=Float64Array),this.nodeSize=n,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,r=this.ids=new o(t.length),s=this.coords=new a(2*t.length),l=0;l<t.length;l++)r[l]=l,s[2*l]=e(t[l]),s[2*l+1]=i(t[l]);!function t(e,i,n,a,o,r){if(!(o-a<=n)){var s=a+o>>1;!function t(e,i,n,a,o,r){for(;o>a;){if(o-a>600){var s=o-a+1,l=n-a+1,c=Math.log(s),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(e,i,n,Math.max(a,Math.floor(n-l*u/s+d)),Math.min(o,Math.floor(n+(s-l)*u/s+d)),r)}var h=i[2*n+r],p=a,m=o;for(B(e,i,a,n),i[2*o+r]>h&&B(e,i,a,o);p<m;){for(B(e,i,p,m),p++,m--;i[2*p+r]<h;)p++;for(;i[2*m+r]>h;)m--}i[2*a+r]===h?B(e,i,a,m):B(e,i,++m,o),m<=n&&(a=m+1),n<=m&&(o=m-1)}}(e,i,s,a,o,r%2),t(e,i,n,a,s-1,r+1),t(e,i,n,s+1,o,r+1)}}(r,s,n,0,r.length-1,0)};C.prototype.range=function(t,e,i,n){return function(t,e,i,n,a,o,r){for(var s,l,c=[0,t.length-1,0],u=[];c.length;){var d=c.pop(),h=c.pop(),p=c.pop();if(h-p<=r)for(var m=p;m<=h;m++)l=e[2*m+1],(s=e[2*m])>=i&&s<=a&&l>=n&&l<=o&&u.push(t[m]);else{var b=Math.floor((p+h)/2);l=e[2*b+1],(s=e[2*b])>=i&&s<=a&&l>=n&&l<=o&&u.push(t[b]);var y=(d+1)%2;(0===d?i<=s:n<=l)&&(c.push(p),c.push(b-1),c.push(y)),(0===d?a>=s:o>=l)&&(c.push(b+1),c.push(h),c.push(y))}}return u}(this.ids,this.coords,t,e,i,n,this.nodeSize)},C.prototype.within=function(t,e,i){return function(t,e,i,n,a,o){for(var r=[0,t.length-1,0],s=[],l=a*a;r.length;){var c=r.pop(),u=r.pop(),d=r.pop();if(u-d<=o)for(var h=d;h<=u;h++)Y(e[2*h],e[2*h+1],i,n)<=l&&s.push(t[h]);else{var p=Math.floor((d+u)/2),m=e[2*p],b=e[2*p+1];Y(m,b,i,n)<=l&&s.push(t[p]);var y=(c+1)%2;(0===c?i-a<=m:n-a<=b)&&(r.push(d),r.push(p-1),r.push(y)),(0===c?i+a>=m:n+a>=b)&&(r.push(p+1),r.push(u),r.push(y))}}return s}(this.ids,this.coords,t,e,i,this.nodeSize)};var M={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},J=function(t){this.options=U(Object.create(M),t),this.trees=new Array(this.options.maxZoom+1)};function H(t,e,i,n,a){return{x:t,y:e,zoom:1/0,id:i,parentId:-1,numPoints:n,properties:a}}function k(t,e){var i=t.geometry.coordinates,n=i[1];return{x:N(i[0]),y:T(n),zoom:1/0,index:e,parentId:-1}}function j(t){return{type:"Feature",id:t.id,properties:F(t),geometry:{type:"Point",coordinates:[(n=t.x,360*(n-.5)),(e=t.y,i=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var e,i,n}function F(t){var e=t.numPoints,i=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return U(U({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:i})}function N(t){return t/360+.5}function T(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function U(t,e){for(var i in e)t[i]=e[i];return t}function E(t){return t.x}function A(t){return t.y}function O(t,e,i,n,a,o){var r=a-i,s=o-n;if(0!==r||0!==s){var l=((t-i)*r+(e-n)*s)/(r*r+s*s);l>1?(i=a,n=o):l>0&&(i+=r*l,n+=s*l)}return(r=t-i)*r+(s=e-n)*s}function P(t,e,i,n){var a={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)K(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)K(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++)K(t,e[n][a])}(a),a}function K(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function D(t,e,i,n){if(e.geometry){var a=e.geometry.coordinates,o=e.geometry.type,r=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=e.id;if(i.promoteId?l=e.properties[i.promoteId]:i.generateId&&(l=n||0),"Point"===o)Q(a,s);else if("MultiPoint"===o)for(var c=0;c<a.length;c++)Q(a[c],s);else if("LineString"===o)q(a,s,r,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(c=0;c<a.length;c++)q(a[c],s=[],r,!1),t.push(P(l,"LineString",s,e.properties));return}$(a,s,r,!1)}else if("Polygon"===o)$(a,s,r,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)D(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},i,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<a.length;c++){var u=[];$(a[c],u,r,!0),s.push(u)}}t.push(P(l,o,s,e.properties))}}function Q(t,e){e.push(tt(t[0])),e.push(et(t[1])),e.push(0)}function q(t,e,i,n){for(var a,o,r=0,s=0;s<t.length;s++){var l=tt(t[s][0]),c=et(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(r+=n?(a*c-l*o)/2:Math.sqrt(Math.pow(l-a,2)+Math.pow(c-o,2))),a=l,o=c}var u=e.length-3;e[2]=1,function t(e,i,n,a){for(var o,r=a,s=n-i>>1,l=n-i,c=e[i],u=e[i+1],d=e[n],h=e[n+1],p=i+3;p<n;p+=3){var m=O(e[p],e[p+1],c,u,d,h);if(m>r)o=p,r=m;else if(m===r){var b=Math.abs(p-s);b<l&&(o=p,l=b)}}r>a&&(o-i>3&&t(e,i,o,a),e[o+2]=r,n-o>3&&t(e,o,n,a))}(e,0,u,i),e[u+2]=1,e.size=Math.abs(r),e.start=0,e.end=e.size}function $(t,e,i,n){for(var a=0;a<t.length;a++){var o=[];q(t[a],o,i,n),e.push(o)}}function tt(t){return t/360+.5}function et(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:i>1?1:i}function it(t,e,i,n,a,o,r,s){if(n/=e,o>=(i/=e)&&r<n)return t;if(r<i||o>=n)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],d=u.geometry,h=u.type,p=0===a?u.minX:u.minY,m=0===a?u.maxX:u.maxY;if(p>=i&&m<n)l.push(u);else if(!(m<i||p>=n)){var b=[];if("Point"===h||"MultiPoint"===h)nt(d,b,i,n,a);else if("LineString"===h)at(d,b,i,n,a,!1,s.lineMetrics);else if("MultiLineString"===h)rt(d,b,i,n,a,!1);else if("Polygon"===h)rt(d,b,i,n,a,!0);else if("MultiPolygon"===h)for(var y=0;y<d.length;y++){var f=[];rt(d[y],f,i,n,a,!0),f.length&&b.push(f)}if(b.length){if(s.lineMetrics&&"LineString"===h){for(y=0;y<b.length;y++)l.push(P(u.id,h,b[y],u.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===b.length?(h="LineString",b=b[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===b.length?"Point":"MultiPoint"),l.push(P(u.id,h,b,u.tags))}}}return l.length?l:null}function nt(t,e,i,n,a){for(var o=0;o<t.length;o+=3){var r=t[o+a];r>=i&&r<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function at(t,e,i,n,a,o,r){for(var s,l,c=ot(t),u=0===a?lt:ct,d=t.start,h=0;h<t.length-3;h+=3){var p=t[h],m=t[h+1],b=t[h+2],y=t[h+3],f=t[h+4],g=0===a?p:m,I=0===a?y:f,v=!1;r&&(s=Math.sqrt(Math.pow(p-y,2)+Math.pow(m-f,2))),g<i?I>i&&(l=u(c,p,m,y,f,i),r&&(c.start=d+s*l)):g>n?I<n&&(l=u(c,p,m,y,f,n),r&&(c.start=d+s*l)):st(c,p,m,b),I<i&&g>=i&&(l=u(c,p,m,y,f,i),v=!0),I>n&&g<=n&&(l=u(c,p,m,y,f,n),v=!0),!o&&v&&(r&&(c.end=d+s*l),e.push(c),c=ot(t)),r&&(d+=s)}var x=t.length-3;p=t[x],m=t[x+1],b=t[x+2],(g=0===a?p:m)>=i&&g<=n&&st(c,p,m,b),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&st(c,c[0],c[1],c[2]),c.length&&e.push(c)}function ot(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function rt(t,e,i,n,a,o){for(var r=0;r<t.length;r++)at(t[r],e,i,n,a,o,!1)}function st(t,e,i,n){t.push(e),t.push(i),t.push(n)}function lt(t,e,i,n,a,o){var r=(o-e)/(n-e);return t.push(o),t.push(i+(a-i)*r),t.push(1),r}function ct(t,e,i,n,a,o){var r=(o-i)/(a-i);return t.push(e+(n-e)*r),t.push(o),t.push(1),r}function ut(t,e){for(var i=[],n=0;n<t.length;n++){var a,o=t[n],r=o.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)a=dt(o.geometry,e);else if("MultiLineString"===r||"Polygon"===r){a=[];for(var s=0;s<o.geometry.length;s++)a.push(dt(o.geometry[s],e))}else if("MultiPolygon"===r)for(a=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(dt(o.geometry[s][c],e));a.push(l)}i.push(P(o.id,r,a,o.tags))}return i}function dt(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function ht(t,e){if(t.transformed)return t;var i,n,a,o=1<<t.z,r=t.x,s=t.y;for(i=0;i<t.features.length;i++){var l=t.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(n=0;n<c.length;n+=2)l.geometry.push(pt(c[n],c[n+1],e,o,r,s));else for(n=0;n<c.length;n++){var d=[];for(a=0;a<c[n].length;a+=2)d.push(pt(c[n][a],c[n][a+1],e,o,r,s));l.geometry.push(d)}}return t.transformed=!0,t}function pt(t,e,i,n,a,o){return[Math.round(i*(t*n-a)),Math.round(i*(e*n-o))]}function mt(t,e,i,n,a){for(var o=e===a.maxZoom?0:a.tolerance/((1<<e)*a.extent),r={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){r.numFeatures++,bt(r,t[s],o,a);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,d=t[s].maxY;l<r.minX&&(r.minX=l),c<r.minY&&(r.minY=c),u>r.maxX&&(r.maxX=u),d>r.maxY&&(r.maxY=d)}return r}function bt(t,e,i,n){var a=e.geometry,o=e.type,r=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<a.length;s+=3)r.push(a[s]),r.push(a[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)yt(r,a,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<a.length;s++)yt(r,a[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<a.length;l++){var c=a[l];for(s=0;s<c.length;s++)yt(r,c[s],t,i,!0,0===s)}if(r.length){var u=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var d in u={},e.tags)u[d]=e.tags[d];u.mapbox_clip_start=a.start/a.size,u.mapbox_clip_end=a.end/a.size}var h={geometry:r,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(h.id=e.id),t.features.push(h)}}function yt(t,e,i,n,a,o){var r=n*n;if(n>0&&e.size<(a?r:n))i.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>r)&&(i.numSimplified++,s.push(e[l]),s.push(e[l+1])),i.numPoints++;a&&function(t,e){for(var i=0,n=0,a=t.length,o=a-2;n<a;o=n,n+=2)i+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(i>0===e)for(n=0,a=t.length;n<a/2;n+=2){var r=t[n],s=t[n+1];t[n]=t[a-2-n],t[n+1]=t[a-1-n],t[a-2-n]=r,t[a-1-n]=s}}(s,o),t.push(s)}}function ft(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)D(i,t.features[n],e,n);else D(i,"Feature"===t.type?t:{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(t,e){var i=e.buffer/e.extent,n=t,a=it(t,1,-1-i,i,0,-1,2,e),o=it(t,1,1-i,2+i,0,-1,2,e);return(a||o)&&(n=it(t,1,-i,1+i,0,-1,2,e)||[],a&&(n=ut(a,1).concat(n)),o&&(n=n.concat(ut(o,-1)))),n}(n,e)).length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function gt(t,e,i){return 32*((1<<t)*i+e)+t}function It(t,e){var i=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var n=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!n)return e(null,null);var a=new b(n.features),o=v(a);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:a,rawData:o.buffer})}J.prototype.load=function(t){var e=this.options,i=e.log,n=e.minZoom,a=e.maxZoom,o=e.nodeSize;i&&console.time("total time");var r="prepare "+t.length+" points";i&&console.time(r),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(k(t[l],l));this.trees[a+1]=new C(s,E,A,o,Float32Array),i&&console.timeEnd(r);for(var c=a;c>=n;c--){var u=+Date.now();s=this._cluster(s,c),this.trees[c]=new C(s,E,A,o,Float32Array),i&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-u)}return i&&console.timeEnd("total time"),this},J.prototype.getClusters=function(t,e){var i=((t[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,t[1])),a=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)i=-180,a=180;else if(i>a){var r=this.getClusters([i,n,180,o],e),s=this.getClusters([-180,n,a,o],e);return r.concat(s)}for(var l=this.trees[this._limitZoom(e)],c=[],u=0,d=l.range(N(i),T(o),N(a),T(n));u<d.length;u+=1){var h=l.points[d[u]];c.push(h.numPoints?j(h):this.points[h.index])}return c},J.prototype.getChildren=function(t){var e=this._getOriginId(t),i=this._getOriginZoom(t),n="No cluster with the specified id.",a=this.trees[i];if(!a)throw new Error(n);var o=a.points[e];if(!o)throw new Error(n);for(var r=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=[],l=0,c=a.within(o.x,o.y,r);l<c.length;l+=1){var u=a.points[c[l]];u.parentId===t&&s.push(u.numPoints?j(u):this.points[u.index])}if(0===s.length)throw new Error(n);return s},J.prototype.getLeaves=function(t,e,i){var n=[];return this._appendLeaves(n,t,e=e||10,i=i||0,0),n},J.prototype.getTile=function(t,e,i){var n=this.trees[this._limitZoom(t)],a=Math.pow(2,t),o=this.options,r=o.radius/o.extent,s=(i-r)/a,l=(i+1+r)/a,c={features:[]};return this._addTileFeatures(n.range((e-r)/a,s,(e+1+r)/a,l),n.points,e,i,a,c),0===e&&this._addTileFeatures(n.range(1-r/a,s,1,l),n.points,a,i,a,c),e===a-1&&this._addTileFeatures(n.range(0,s,r/a,l),n.points,-1,i,a,c),c.features.length?c:null},J.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var i=this.getChildren(t);if(e++,1!==i.length)break;t=i[0].properties.cluster_id}return e},J.prototype._appendLeaves=function(t,e,i,n,a){for(var o=0,r=this.getChildren(e);o<r.length;o+=1){var s=r[o],l=s.properties;if(l&&l.cluster?a+l.point_count<=n?a+=l.point_count:a=this._appendLeaves(t,l.cluster_id,i,n,a):a<n?a++:t.push(s),t.length===i)break}return a},J.prototype._addTileFeatures=function(t,e,i,n,a,o){for(var r=0,s=t;r<s.length;r+=1){var l=e[s[r]],c=l.numPoints,u={type:1,geometry:[[Math.round(this.options.extent*(l.x*a-i)),Math.round(this.options.extent*(l.y*a-n))]],tags:c?F(l):this.points[l.index].properties},d=void 0;c?d=l.id:this.options.generateId?d=l.index:this.points[l.index].id&&(d=this.points[l.index].id),void 0!==d&&(u.id=d),o.features.push(u)}},J.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},J.prototype._cluster=function(t,e){for(var i=[],n=this.options,a=n.reduce,o=n.minPoints,r=n.radius/(n.extent*Math.pow(2,e)),s=0;s<t.length;s++){var l=t[s];if(!(l.zoom<=e)){l.zoom=e;for(var c=this.trees[e+1],u=c.within(l.x,l.y,r),d=l.numPoints||1,h=d,p=0,m=u;p<m.length;p+=1){var b=c.points[m[p]];b.zoom>e&&(h+=b.numPoints||1)}if(h>=o){for(var y=l.x*d,f=l.y*d,g=a&&d>1?this._map(l,!0):null,I=(s<<5)+(e+1)+this.points.length,v=0,x=u;v<x.length;v+=1){var Z=c.points[x[v]];if(!(Z.zoom<=e)){Z.zoom=e;var G=Z.numPoints||1;y+=Z.x*G,f+=Z.y*G,Z.parentId=I,a&&(g||(g=this._map(l,!0)),a(g,this._map(Z)))}}l.parentId=I,i.push(H(y/h,f/h,I,h,g))}else if(i.push(l),h>1)for(var w=0,W=u;w<W.length;w+=1){var X=c.points[W[w]];X.zoom<=e||(X.zoom=e,i.push(X))}}}return i},J.prototype._getOriginId=function(t){return t-this.points.length>>5},J.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},J.prototype._map=function(t,e){if(t.numPoints)return e?U({},t.properties):t.properties;var i=this.points[t.index].properties,n=this.options.map(i);return e&&n===i?U({},n):n},ft.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ft.prototype.splitTile=function(t,e,i,n,a,o,r){for(var s=[t,e,i,n],l=this.options,c=l.debug;s.length;){n=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,d=gt(e,i,n),h=this.tiles[d];if(!h&&(c>1&&console.time("creation"),h=this.tiles[d]=mt(t,e,i,n,l),this.tileCoords.push({z:e,x:i,y:n}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=t,a){if(e===l.maxZoom||e===a)continue;var m=1<<a-e;if(i!==Math.floor(o/m)||n!==Math.floor(r/m))continue}else if(e===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==t.length){c>1&&console.time("clipping");var b,y,f,g,I,v,x=.5*l.buffer/l.extent,Z=.5-x,G=.5+x,w=1+x;b=y=f=g=null,I=it(t,u,i-x,i+G,0,h.minX,h.maxX,l),v=it(t,u,i+Z,i+w,0,h.minX,h.maxX,l),t=null,I&&(b=it(I,u,n-x,n+G,1,h.minY,h.maxY,l),y=it(I,u,n+Z,n+w,1,h.minY,h.maxY,l),I=null),v&&(f=it(v,u,n-x,n+G,1,h.minY,h.maxY,l),g=it(v,u,n+Z,n+w,1,h.minY,h.maxY,l),v=null),c>1&&console.timeEnd("clipping"),s.push(b||[],e+1,2*i,2*n),s.push(y||[],e+1,2*i,2*n+1),s.push(f||[],e+1,2*i+1,2*n),s.push(g||[],e+1,2*i+1,2*n+1)}}},ft.prototype.getTile=function(t,e,i){var n=this.options,a=n.extent,o=n.debug;if(t<0||t>24)return null;var r=1<<t,s=gt(t,e=(e%r+r)%r,i);if(this.tiles[s])return ht(this.tiles[s],a);o>1&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var l,c=t,u=e,d=i;!l&&c>0;)c--,u=Math.floor(u/2),d=Math.floor(d/2),l=this.tiles[gt(c,u,d)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,d),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,d,t,e,i),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ht(this.tiles[s],a):null):null};var vt=function(e){function i(t,i,n,a){e.call(this,t,i,n,It),a&&(this.loadGeoJSON=a)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var a=!!(n&&n.request&&n.request.collectResourceTiming)&&new t.RequestPerformance(n.request);this.loadGeoJSON(n,(function(o,r){if(o||!r)return i(o);if("object"!=typeof r)return i(new Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."));!function t(e,i){var n,a=e&&e.type;if("FeatureCollection"===a)for(n=0;n<e.features.length;n++)t(e.features[n],i);else if("GeometryCollection"===a)for(n=0;n<e.geometries.length;n++)t(e.geometries[n],i);else if("Feature"===a)t(e.geometry,i);else if("Polygon"===a)d(e.coordinates,i);else if("MultiPolygon"===a)for(n=0;n<e.coordinates.length;n++)d(e.coordinates[n],i);return e}(r,!0);try{if(n.filter){var s=t.createExpression(n.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(t){return t.key+": "+t.message})).join(", "));var l=r.features.filter((function(t){return s.value.evaluate({zoom:0},t)}));r={type:"FeatureCollection",features:l}}e._geoJSONIndex=n.cluster?new J(function(e){var i=e.superclusterOptions,n=e.clusterProperties;if(!n||!i)return i;for(var a={},o={},r={accumulated:null,zoom:0},s={properties:null},l=Object.keys(n),c=0,u=l;c<u.length;c+=1){var d=u[c],h=n[d],p=h[0],m=t.createExpression(h[1]),b=t.createExpression("string"==typeof p?[p,["accumulated"],["get",d]]:p);a[d]=m.value,o[d]=b.value}return i.map=function(t){s.properties=t;for(var e={},i=0,n=l;i<n.length;i+=1){var o=n[i];e[o]=a[o].evaluate(r,s)}return e},i.reduce=function(t,e){s.properties=e;for(var i=0,n=l;i<n.length;i+=1){var a=n[i];r.accumulated=t[a],t[a]=o[a].evaluate(r,s)}},i}(n)).load(r.features):function(t,e){return new ft(t,e)}(r,n.geojsonVtOptions)}catch(o){return i(o)}e.loaded={};var c={};if(a){var u=a.finish();u&&(c.resourceTiming={},c.resourceTiming[n.source]=JSON.parse(JSON.stringify(u)))}i(null,c)}))}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(t,i){var n=this.loaded;return n&&n[t.uid]?e.prototype.reloadTile.call(this,t,i):this.loadTile(t,i)},i.prototype.loadGeoJSON=function(e,i){if(e.request)t.getJSON(e.request,i);else{if("string"!=typeof e.data)return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(e.data))}catch(t){return i(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},i.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},i.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},i.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},i}(l),xt=function(e){var i=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:vt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(i.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');i.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return xt.prototype.setReferrer=function(t,e){this.referrer=e},xt.prototype.setImages=function(t,e,i){for(var n in this.availableImages[t]=e,this.workerSources[t]){var a=this.workerSources[t][n];for(var o in a)a[o].availableImages=e}i()},xt.prototype.setLayers=function(t,e,i){this.getLayerIndex(t).replace(e),i()},xt.prototype.updateLayers=function(t,e,i){this.getLayerIndex(t).update(e.layers,e.removedIds),i()},xt.prototype.loadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).loadTile(e,i)},xt.prototype.loadDEMTile=function(t,e,i){this.getDEMWorkerSource(t,e.source).loadTile(e,i)},xt.prototype.reloadTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).reloadTile(e,i)},xt.prototype.abortTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).abortTile(e,i)},xt.prototype.removeTile=function(t,e,i){this.getWorkerSource(t,e.type,e.source).removeTile(e,i)},xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},xt.prototype.removeSource=function(t,e,i){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,i):i()}},xt.prototype.loadWorkerSource=function(t,e,i){try{this.self.importScripts(e.url),i()}catch(t){i(t.toString())}},xt.prototype.syncRTLPluginState=function(e,i,n){try{t.plugin.setState(i);var a=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=a){this.self.importScripts(a);var o=t.plugin.isParsed();n(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+a),o)}}catch(t){n(t.toString())}},xt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e},xt.prototype.getWorkerSource=function(t,e,i){var n=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][i]||(this.workerSources[t][e][i]=new this.workerSourceTypes[e]({send:function(e,i,a){n.actor.send(e,i,a,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][i]},xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new u),this.demWorkerSources[t][e]},xt.prototype.enforceCacheSizeLimit=function(e,i){t.enforceCacheSizeLimit(i)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt})),n(["./shared"],(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!i(t)}function i(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(i);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()?(void 0===n[i=t&&t.failIfMajorPerformanceCaveat]&&(n[i]=function(t){var i=function(t){var i=document.createElement("canvas"),n=Object.create(e.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,i.probablySupportsContext?i.probablySupportsContext("webgl",n)||i.probablySupportsContext("experimental-webgl",n):i.supportsContext?i.supportsContext("webgl",n)||i.supportsContext("experimental-webgl",n):i.getContext("webgl",n)||i.getContext("experimental-webgl",n)}(t);if(!i)return!1;var n=i.createShader(i.VERTEX_SHADER);return!(!n||i.isContextLost())&&(i.shaderSource(n,"void main() {}"),i.compileShader(n),!0===i.getShaderParameter(n,i.COMPILE_STATUS))}(i)),n[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=i);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i={create:function(e,i,n){var a=t.window.document.createElement(e);return void 0!==i&&(a.className=i),n&&n.appendChild(a),a},createNS:function(e,i){return t.window.document.createElementNS(e,i)}},n=t.window.document&&t.window.document.documentElement.style;function a(t){if(!n)return t[0];for(var e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}var o,r=a(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){n&&r&&(o=n[r],n[r]="none")},i.enableDrag=function(){n&&r&&(n[r]=o)};var s=a(["transform","WebkitTransform"]);i.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",c,c),t.window.removeEventListener("test",c,c)}catch(t){l=!1}i.addEventListener=function(t,e,i,n){void 0===n&&(n={}),t.addEventListener(e,i,"passive"in n&&l?n:n.capture)},i.removeEventListener=function(t,e,i,n){void 0===n&&(n={}),t.removeEventListener(e,i,"passive"in n&&l?n:n.capture)};var u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};function d(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}i.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",u,!0)}),0)},i.mousePos=function(e,i){var n=e.getBoundingClientRect();return new t.Point(i.clientX-n.left-e.clientLeft,i.clientY-n.top-e.clientTop)},i.touchPos=function(e,i){for(var n=e.getBoundingClientRect(),a=[],o=0;o<i.length;o++)a.push(new t.Point(i[o].clientX-n.left-e.clientLeft,i[o].clientY-n.top-e.clientTop));return a},i.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},i.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var h=function(e){function i(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,i=this.requestors;e<i.length;e+=1){var n=i[e];this._notify(n.ids,n.callback)}this.requestors=[]}},i.prototype.getImage=function(t){return this.images[t]},i.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},i.prototype._validate=function(e,i){var n=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),n=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),n=!1),this._validateContent(i.content,i)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),n=!1),n},i.prototype._validateStretch=function(t,e){if(!t)return!0;for(var i=0,n=0,a=t;n<a.length;n+=1){var o=a[n];if(o[0]<i||o[1]<o[0]||e<o[1])return!1;i=o[1]}return!0},i.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},i.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},i.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(t,e){var i=!0;if(!this.isLoaded())for(var n=0,a=t;n<a.length;n+=1)this.images[a[n]]||(i=!1);this.isLoaded()||i?this._notify(t,e):this.requestors.push({ids:t,callback:e})},i.prototype._notify=function(e,i){for(var n={},a=0,o=e;a<o.length;a+=1){var r=o[a];this.images[r]||this.fire(new t.Event("styleimagemissing",{id:r}));var s=this.images[r];s?n[r]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+r+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,n)},i.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},i.prototype.getPattern=function(e){var i=this.patterns[e],n=this.getImage(e);if(!n)return null;if(i&&i.position.version===n.version)return i.position;if(i)i.position.version=n.version;else{var a={w:n.data.width+2,h:n.data.height+2,x:0,y:0},o=new t.ImagePosition(a,n);this.patterns[e]={bin:a,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},i.prototype.bind=function(e){var i=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var e=[];for(var i in this.patterns)e.push(this.patterns[i].bin);var n=t.potpack(e),a=n.w,o=n.h,r=this.atlasImage;for(var s in r.resize({width:a||1,height:o||1}),this.patterns){var l=this.patterns[s].bin,c=l.x+1,u=l.y+1,d=this.images[s].data,h=d.width,p=d.height;t.RGBAImage.copy(d,r,{x:0,y:0},{x:c,y:u},{width:h,height:p}),t.RGBAImage.copy(d,r,{x:0,y:p-1},{x:c,y:u-1},{width:h,height:1}),t.RGBAImage.copy(d,r,{x:0,y:0},{x:c,y:u+p},{width:h,height:1}),t.RGBAImage.copy(d,r,{x:h-1,y:0},{x:c-1,y:u},{width:1,height:p}),t.RGBAImage.copy(d,r,{x:0,y:0},{x:c+h,y:u},{width:1,height:p})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var a=this.images[n];d(a)&&this.updateImage(n,a)}}},i}(t.Evented),p=y,m=y,b=1e20;function y(t,e,i,n,a,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=a||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var r=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=r,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(r*r),this.gridInner=new Float64Array(r*r),this.f=new Float64Array(r),this.d=new Float64Array(r),this.z=new Float64Array(r+1),this.v=new Int16Array(r),this.middle=Math.round(r/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function f(t,e,i,n,a,o,r){for(var s=0;s<e;s++){for(var l=0;l<i;l++)n[l]=t[l*e+s];for(g(n,a,o,r,i),l=0;l<i;l++)t[l*e+s]=a[l]}for(l=0;l<i;l++){for(s=0;s<e;s++)n[s]=t[l*e+s];for(g(n,a,o,r,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(a[s])}}function g(t,e,i,n,a){i[0]=0,n[0]=-b,n[1]=+b;for(var o=1,r=0;o<a;o++){for(var s=(t[o]+o*o-(t[i[r]]+i[r]*i[r]))/(2*o-2*i[r]);s<=n[r];)r--,s=(t[o]+o*o-(t[i[r]]+i[r]*i[r]))/(2*o-2*i[r]);i[++r]=o,n[r]=s,n[r+1]=+b}for(o=0,r=0;o<a;o++){for(;n[r+1]<o;)r++;e[o]=(o-i[r])*(o-i[r])+t[i[r]]}}y.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var a=e.data[4*n+3]/255;this.gridOuter[n]=1===a?0:0===a?b:Math.pow(Math.max(0,.5-a),2),this.gridInner[n]=1===a?b:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(f(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),f(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++)i[n]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[n]-this.gridInner[n])/this.radius+this.cutoff))));return i},p.default=m;var I=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};I.prototype.setURL=function(t){this.url=t},I.prototype.getGlyphs=function(e,i){var n=this,a=[];for(var o in e)for(var r=0,s=e[o];r<s.length;r+=1)a.push({stack:o,id:s[r]});t.asyncAll(a,(function(t,e){var i=t.stack,a=t.id,o=n.entries[i];o||(o=n.entries[i]={glyphs:{},requests:{},ranges:{}});var r=o.glyphs[a];if(void 0===r){if(r=n._tinySDF(o,i,a))return o.glyphs[a]=r,void e(null,{stack:i,id:a,glyph:r});var s=Math.floor(a/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:i,id:a,glyph:r});else{var l=o.requests[s];l||(l=o.requests[s]=[],I.loadGlyphRange(i,s,n.url,n.requestManager,(function(t,e){if(e){for(var i in e)n._doesCharSupportLocalGlyph(+i)||(o.glyphs[+i]=e[+i]);o.ranges[s]=!0}for(var a=0,r=l;a<r.length;a+=1)(0,r[a])(t,e);delete o.requests[s]}))),l.push((function(t,n){t?e(t):n&&e(null,{stack:i,id:a,glyph:n[a]||null})}))}}else e(null,{stack:i,id:a,glyph:r})}),(function(t,e){if(t)i(t);else if(e){for(var n={},a=0,o=e;a<o.length;a+=1){var r=o[a],s=r.stack,l=r.id,c=r.glyph;(n[s]||(n[s]={}))[l]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}i(null,n)}}))},I.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},I.prototype._tinySDF=function(e,i,n){var a=this.localIdeographFontFamily;if(a&&this._doesCharSupportLocalGlyph(n)){var o=e.tinySDF;if(!o){var r="400";/bold/i.test(i)?r="900":/medium/i.test(i)?r="500":/light/i.test(i)&&(r="200"),o=e.tinySDF=new I.TinySDF(24,3,8,.25,a,r)}return{id:n,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},I.loadGlyphRange=function(e,i,n,a,o){var r=256*i,s=r+255,l=a.transformRequest(a.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",r+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,(function(e,i){if(e)o(e);else if(i){for(var n={},a=0,r=t.parseGlyphPBF(i);a<r.length;a+=1){var s=r[a];n[s.id]=s}o(null,n)}}))},I.TinySDF=p;var v=function(){this.specification=t.styleSpec.light.position};v.prototype.possiblyEvaluate=function(e,i){return t.sphericalToCartesian(e.expression.evaluate(i))},v.prototype.interpolate=function(e,i,n){return{x:t.number(e.x,i.x,n),y:t.number(e.y,i.y,n),z:t.number(e.z,i.z,n)}};var x=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new v,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),Z=function(e){function i(i){e.call(this),this._transitionable=new t.Transitionable(x),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(e,i){if(void 0===i&&(i={}),!this._validate(t.validateLight,e,i))for(var n in e){var a=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),a):this._transitionable.setValue(n,a)}},i.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},i.prototype._validate=function(e,i,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},i}(t.Evented),G=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};G.prototype.getDash=function(t,e){var i=t.join(",")+String(e);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(t,e)),this.dashEntry[i]},G.prototype.getDashRanges=function(t,e,i){var n=[],a=t.length%2==1?-t[t.length-1]*i:0,o=t[0]*i,r=!0;n.push({left:a,right:o,isDash:r,zeroLength:0===t[0]});for(var s=t[0],l=1;l<t.length;l++){var c=t[l];n.push({left:a=s*i,right:o=(s+=c)*i,isDash:r=!r,zeroLength:0===c})}return n},G.prototype.addRoundDash=function(t,e,i){for(var n=e/2,a=-i;a<=i;a++)for(var o=this.width*(this.nextRow+i+a),r=0,s=t[r],l=0;l<this.width;l++){l/s.right>1&&(s=t[++r]);var c=Math.abs(l-s.left),u=Math.abs(l-s.right),d=Math.min(c,u),h=void 0,p=a/i*(n+1);if(s.isDash){var m=n-Math.abs(p);h=Math.sqrt(d*d+m*m)}else h=n-Math.sqrt(d*d+p*p);this.data[o+l]=Math.max(0,Math.min(255,h+128))}},G.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var i=t[e],n=t[e+1];i.zeroLength?t.splice(e,1):n&&n.isDash===i.isDash&&(n.left=i.left,t.splice(e,1))}var a=t[0],o=t[t.length-1];a.isDash===o.isDash&&(a.left=o.left-this.width,o.right=a.right+this.width);for(var r=this.width*this.nextRow,s=0,l=t[s],c=0;c<this.width;c++){c/l.right>1&&(l=t[++s]);var u=Math.abs(c-l.left),d=Math.abs(c-l.right),h=Math.min(u,d);this.data[r+c]=Math.max(0,Math.min(255,(l.isDash?h:-h)+128))}},G.prototype.addDash=function(e,i){var n=i?7:0,a=2*n+1;if(this.nextRow+a>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,r=0;r<e.length;r++)o+=e[r];if(0!==o){var s=this.width/o,l=this.getDashRanges(e,this.width,s);i?this.addRoundDash(l,s,n):this.addRegularDash(l)}var c={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:o};return this.nextRow+=a,this.dirty=!0,c},G.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var w=function e(i,n){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var a=this.workerPool.acquire(this.id),o=0;o<a.length;o++){var r=new e.Actor(a[o],n,this.id);r.name="Worker "+o,this.actors.push(r)}};function W(e,i,n){var a=function(a,o){if(a)return n(a);if(o){var r=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(r.vectorLayers=o.vector_layers,r.vectorLayerIds=r.vectorLayers.map((function(t){return t.id}))),r.tiles=i.canonicalizeTileset(r,e.url),n(null,r)}};return e.url?t.getJSON(i.transformRequest(i.normalizeSourceURL(e.url),t.ResourceType.Source),a):t.browser.frame((function(){return a(null,e)}))}w.prototype.broadcast=function(e,i,n){t.asyncAll(this.actors,(function(t,n){t.send(e,i,n)}),n=n||function(){})},w.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},w.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},w.Actor=t.Actor;var X=function(e,i,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=i||0,this.maxzoom=n||24};X.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},X.prototype.contains=function(e){var i=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*i),a=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*i),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*i),r=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*i);return e.x>=n&&e.x<o&&e.y>=a&&e.y<r};var _=function(e){function i(i,n,a,o){if(e.call(this),this.id=i,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=W(this._options,this.map._requestManager,(function(i,n){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new X(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(n.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},i.prototype.setTiles=function(t){var e=this;return this.setSourceProperty((function(){e._options.tiles=t})),this},i.prototype.setUrl=function(t){var e=this;return this.setSourceProperty((function(){e.url=t,e._options.url=t})),this},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.loadTile=function(e,i){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(n,a){return delete e.request,e.aborted?i(null):n&&404!==n.status?i(n):(a&&a.resourceTiming&&(e.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&e.setExpiryData(a),e.loadVectorData(a,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}a.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=i:e.request=e.actor.send("reloadTile",a,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",a,o.bind(this)))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(t.Evented),V=function(e){function i(i,n,a,o){e.call(this),this.id=i,this.dispatcher=a,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=W(this._options,this.map._requestManager,(function(i,n){e._tileJSONRequest=null,e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new X(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles),t.postMapLoadEvent(n.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return t.extend({},this._options)},i.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},i.prototype.loadTile=function(e,i){var n=this,a=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(a,t.ResourceType.Tile),(function(a,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(a)e.state="errored",i(a);else if(o){n.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var r=n.map.painter.context,s=r.gl;e.texture=n.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(r,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(n.dispatcher),i(null)}}))},i.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},i.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},i.prototype.hasTransition=function(){return!1},i}(t.Evented),S=function(e){function i(i,n,a,o){e.call(this,i,n,a,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(e,i){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function a(t,n){t&&(e.state="errored",i(t)),n&&(e.dem=n,e.needsHillshadePrepare=!0,e.state="loaded",i(null))}e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),function(n,o){if(delete e.request,e.aborted)e.state="unloaded",i(null);else if(n)e.state="errored",i(n);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var r=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:r,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,a.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},i.prototype._getNeighboringTiles=function(e){var i=e.canonical,n=Math.pow(2,i.z),a=(i.x-1+n)%n,o=0===i.x?e.wrap-1:e.wrap,r=(i.x+1+n)%n,s=i.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,i.z,a,i.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,r,i.y).key]={backfilled:!1},i.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,a,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,r,i.y-1).key]={backfilled:!1}),i.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,o,i.z,a,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,i.z,r,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},i}(V),B=function(e){function i(i,n,a,o){e.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=a.getActor(),this.setEventedParent(o),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;var r=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*r,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*r,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(n.clusterRadius||50)*r,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(i){if(i)e.fire(new t.ErrorEvent(i));else{var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",n))}}))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setData=function(e){var i=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)i.fire(new t.ErrorEvent(e));else{var n={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(n.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new t.Event("data",n))}})),this},i.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},i.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},i.prototype.getClusterLeaves=function(t,e,i,n){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:i},n),this},i.prototype._updateWorkerData=function(e){var i=this;this._loaded=!1;var n=t.extend({},this.workerOptions),a=this._data;"string"==typeof a?(n.request=this.map._requestManager.transformRequest(t.browser.resolveURL(a),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(a),this.actor.send(this.type+".loadData",n,(function(t,a){i._removed||a&&a.abandoned||(i._loaded=!0,a&&a.resourceTiming&&a.resourceTiming[i.id]&&(i._resourceTiming=a.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:n.source},null),e(t))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(e,i){var n=this,a=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(a,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?i(null):t?i(t):(e.loadVectorData(o,n.map.painter,"reloadTile"===a),i(null))}))},i.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},i.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(t.Evented),L=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Y=function(e){function i(t,i,n,a){e.call(this),this.id=t,this.dispatcher=n,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(a),this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(e,i){var n=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(a,o){n._loaded=!0,a?n.fire(new t.ErrorEvent(a)):o&&(n.image=o,e&&(n.coordinates=e),i&&i(),n._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(t){this.map=t,this.load()},i.prototype.setCoordinates=function(e){var i=this;this.coordinates=e;var n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var i=1/0,n=1/0,a=-1/0,o=-1/0,r=0,s=e;r<s.length;r+=1){var l=s[r];i=Math.min(i,l.x),n=Math.min(n,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}var c=Math.max(a-i,o-n),u=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),d=Math.pow(2,u);return new t.CanonicalTileID(u,Math.floor((i+a)/2*d),Math.floor((n+o)/2*d))}(n),this.minzoom=this.maxzoom=this.tileID.z;var a=n.map((function(t){return i.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(a[3].x,a[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(a[2].x,a[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,i=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[n];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(t.Evented),z=function(e){function i(t,i,n,a){e.call(this,t,i,n,a),this.roundZoom=!0,this.type="video",this.options=i}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){var e=this;this._loaded=!1;var i=this.options;this.urls=[];for(var n=0,a=i.urls;n<a.length;n+=1)this.urls.push(this.map._requestManager.transformRequest(a[n],t.ResourceType.Source).url);t.getVideo(this.urls,(function(i,n){e._loaded=!0,i?e.fire(new t.ErrorEvent(i)):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(e){if(this.video){var i=this.video.seekable;e<i.start(0)||e>i.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=e}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,i=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[n];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(Y),R=function(e){function i(i,n,a,o){e.call(this,i,n,a,o),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,n=i.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(i,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[a];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var i=e[t];if(isNaN(i)||i<=0)return!0}return!1},i}(Y),C={vector:_,raster:V,"raster-dem":S,geojson:B,video:z,image:Y,canvas:R};function M(e,i){var n=t.identity([]);return t.translate(n,n,[1,1,0]),t.scale(n,n,[.5*e.width,.5*e.height,1]),t.multiply(n,n,e.calculatePosMatrix(i.toUnwrapped()))}function J(t,e,i,n,a,o){var r=function(t,e,i){if(t)for(var n=0,a=t;n<a.length;n+=1){var o=e[a[n]];if(o&&o.source===i&&"fill-extrusion"===o.type)return!0}else for(var r in e){var s=e[r];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(a&&a.layers,e,t.id),s=o.maxPitchScaleFactor(),l=t.tilesIn(n,s,r);l.sort(H);for(var c=[],u=0,d=l;u<d.length;u+=1){var h=d[u];c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,i,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,a,o,s,M(t.transform,h.tileID))})}var p=function(t){for(var e={},i={},n=0,a=t;n<a.length;n+=1){var o=a[n],r=o.queryResults,s=o.wrappedTileID,l=i[s]=i[s]||{};for(var c in r)for(var u=r[c],d=l[c]=l[c]||{},h=e[c]=e[c]||[],p=0,m=u;p<m.length;p+=1){var b=m[p];d[b.featureIndex]||(d[b.featureIndex]=!0,h.push(b))}}return e}(c);for(var m in p)p[m].forEach((function(e){var i=e.feature,n=t.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return p}function H(t,e){var i=t.tileID,n=e.tileID;return i.overscaledZ-n.overscaledZ||i.canonical.y-n.canonical.y||i.wrap-n.wrap||i.canonical.x-n.canonical.x}var k=function(t,e){this.max=t,this.onRemove=e,this.reset()};k.prototype.reset=function(){for(var t in this.data)for(var e=0,i=this.data[t];e<i.length;e+=1){var n=i[e];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},k.prototype.add=function(t,e,i){var n=this,a=t.wrapped().key;void 0===this.data[a]&&(this.data[a]=[]);var o={value:e,timeout:void 0};if(void 0!==i&&(o.timeout=setTimeout((function(){n.remove(t,o)}),i)),this.data[a].push(o),this.order.push(a),this.order.length>this.max){var r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this},k.prototype.has=function(t){return t.wrapped().key in this.data},k.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},k.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},k.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},k.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},k.prototype.remove=function(t,e){if(!this.has(t))return this;var i=t.wrapped().key,n=void 0===e?0:this.data[i].indexOf(e),a=this.data[i][n];return this.data[i].splice(n,1),a.timeout&&clearTimeout(a.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(a.value),this.order.splice(this.order.indexOf(i),1),this},k.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},k.prototype.filter=function(t){var e=[];for(var i in this.data)for(var n=0,a=this.data[i];n<a.length;n+=1){var o=a[n];t(o.value)||e.push(o)}for(var r=0,s=e;r<s.length;r+=1){var l=s[r];this.remove(l.value.tileID,l)}};var j=function(t,e,i){this.context=t;var n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};j.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},j.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},j.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},N=function(t,e,i,n){this.length=e.length,this.attributes=i,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};N.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},N.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},N.prototype.enableAttributes=function(t,e){for(var i=0;i<this.attributes.length;i++){var n=e.attributes[this.attributes[i].name];void 0!==n&&t.enableVertexAttribArray(n)}},N.prototype.setVertexAttribPointers=function(t,e,i){for(var n=0;n<this.attributes.length;n++){var a=this.attributes[n],o=e.attributes[a.name];void 0!==o&&t.vertexAttribPointer(o,a.components,t[F[a.type]],!1,this.itemSize,a.offset+this.itemSize*(i||0))}},N.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var T=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};T.prototype.get=function(){return this.current},T.prototype.set=function(t){},T.prototype.getDefault=function(){return this.default},T.prototype.setDefault=function(){this.set(this.default)};var U=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(T),E=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(T),A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(T),O=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(T),P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(T),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(T),D=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(T),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(T),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(T),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(T),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(T),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(T),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(T),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(T),at=function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getDefault=function(){return t.Color.transparent},i.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},i}(T),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(T),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(T),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(T),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(T),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(T),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(T),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(T),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(T),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(T),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(T),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(T),yt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(T),ft=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(T),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(T),It=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(T),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(T),xt=function(t){function e(e,i){t.call(this,e),this.context=e,this.parent=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(T),Zt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(xt),Gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(xt),wt=function(t,e,i,n){this.context=t,this.width=e,this.height=i;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Zt(t,a),n&&(this.depthAttachment=new Gt(t,a))};wt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var i=this.depthAttachment.get();i&&t.deleteRenderbuffer(i)}t.deleteFramebuffer(this.framebuffer)};var Wt=function(t,e,i){this.func=t,this.mask=e,this.range=i};Wt.ReadOnly=!1,Wt.ReadWrite=!0,Wt.disabled=new Wt(519,Wt.ReadOnly,[0,1]);var Xt=function(t,e,i,n,a,o){this.test=t,this.ref=e,this.mask=i,this.fail=n,this.depthFail=a,this.pass=o};Xt.disabled=new Xt({func:519,mask:0},0,0,7680,7680,7680);var _t=function(t,e,i){this.blendFunction=t,this.blendColor=e,this.mask=i};_t.disabled=new _t(_t.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),_t.unblended=new _t(_t.Replace,t.Color.transparent,[!0,!0,!0,!0]),_t.alphaBlended=new _t([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Vt=function(t,e,i){this.enable=t,this.mode=e,this.frontFace=i};Vt.disabled=new Vt(!1,1029,2305),Vt.backCCW=new Vt(!0,1029,2305);var St=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new U(this),this.clearDepth=new E(this),this.clearStencil=new A(this),this.colorMask=new O(this),this.depthMask=new P(this),this.stencilMask=new K(this),this.stencilFunc=new D(this),this.stencilOp=new Q(this),this.stencilTest=new q(this),this.depthRange=new $(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new it(this),this.blendFunc=new nt(this),this.blendColor=new at(this),this.blendEquation=new ot(this),this.cullFace=new rt(this),this.cullFaceSide=new st(this),this.frontFace=new lt(this),this.program=new ct(this),this.activeTexture=new ut(this),this.viewport=new dt(this),this.bindFramebuffer=new ht(this),this.bindRenderbuffer=new pt(this),this.bindTexture=new mt(this),this.bindVertexBuffer=new bt(this),this.bindElementBuffer=new yt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ft(this),this.pixelStoreUnpack=new gt(this),this.pixelStoreUnpackPremultiplyAlpha=new It(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};St.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},St.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},St.prototype.createIndexBuffer=function(t,e){return new j(this,t,e)},St.prototype.createVertexBuffer=function(t,e,i){return new N(this,t,e,i)},St.prototype.createRenderbuffer=function(t,e,i){var n=this.gl,a=n.createRenderbuffer();return this.bindRenderbuffer.set(a),n.renderbufferStorage(n.RENDERBUFFER,t,e,i),this.bindRenderbuffer.set(null),a},St.prototype.createFramebuffer=function(t,e,i){return new wt(this,t,e,i)},St.prototype.clear=function(t){var e=t.color,i=t.depth,n=this.gl,a=0;e&&(a|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(a|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),n.clear(a)},St.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},St.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},St.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},St.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,_t.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},St.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Bt=function(e){function i(i,n,a){var o=this;e.call(this),this.id=i,this.dispatcher=a,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,i,n,a){var o=new C[i.type](e,i,n,a);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(i,n,a,this),this._tiles={},this._cache=new k(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},i.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},i.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},i.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[e];i.upload(t),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Lt).map((function(t){return t.key}))},i.prototype.getRenderableIds=function(e){var i=this,n=[];for(var a in this._tiles)this._isIdRenderable(a,e)&&n.push(this._tiles[a]);return e?n.sort((function(e,n){var a=e.tileID,o=n.tileID,r=new t.Point(a.canonical.x,a.canonical.y)._rotate(i.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(i.transform.angle);return a.overscaledZ-o.overscaledZ||s.y-r.y||s.x-r.x})).map((function(t){return t.tileID.key})):n.map((function(t){return t.tileID})).sort(Lt).map((function(t){return t.key}))},i.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},i.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},i.prototype._reloadTile=function(t,e){var i=this._tiles[t];i&&("loading"!==i.state&&(i.state=e),this._loadTile(i,this._tileLoaded.bind(this,i,t,e)))},i.prototype._tileLoaded=function(e,i,n,a){if(a)return e.state="errored",void(404!==a.status?this._source.fire(new t.ErrorEvent(a,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(i,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},i.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),i=0;i<e.length;i++){var n=e[i];if(t.neighboringTiles&&t.neighboringTiles[n]){var a=this.getTileByID(n);o(t,a),o(a,t)}}function o(t,e){t.needsHillshadePrepare=!0;var i=e.tileID.canonical.x-t.tileID.canonical.x,n=e.tileID.canonical.y-t.tileID.canonical.y,a=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===i&&0===n||Math.abs(n)>1||(Math.abs(i)>1&&(1===Math.abs(i+a)?i+=a:1===Math.abs(i-a)&&(i-=a)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,i,n),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},i.prototype.getTile=function(t){return this.getTileByID(t.key)},i.prototype.getTileByID=function(t){return this._tiles[t]},i.prototype._retainLoadedChildren=function(t,e,i,n){for(var a in this._tiles){var o=this._tiles[a];if(!(n[a]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>i)){for(var r=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(r=s)}for(var l=r;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){n[r.key]=r;break}}}},i.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var i=this._loadedParentTiles[t.key];return i&&i.tileID.overscaledZ>=e?i:null}for(var n=t.overscaledZ-1;n>=e;n--){var a=t.scaledTo(n),o=this._getLoadedTile(a);if(o)return o}},i.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},i.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,i=Math.ceil(t.height/this._source.tileSize)+1,n=Math.floor(e*i*5),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(a)},i.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var i={};for(var n in this._tiles){var a=this._tiles[n];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}for(var o in this._tiles=i,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var r in this._tiles)this._setTileReloadTimer(r,this._tiles[r])}},i.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var a;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(a=a.filter((function(t){return n._source.hasTile(t)})))):a=[];var o=e.coveringZoomLevel(this._source),r=Math.max(o-i.maxOverzooming,this._source.minzoom),s=Math.max(o+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(a,o);if(Yt(this._source.type)){for(var c={},u={},d=0,h=Object.keys(l);d<h.length;d+=1){var p=h[d],m=l[p],b=this._tiles[p];if(b&&!(b.fadeEndTime&&b.fadeEndTime<=t.browser.now())){var y=this.findLoadedParent(m,r);y&&(this._addTile(y.tileID),c[y.tileID.key]=y.tileID),u[p]=m}}for(var f in this._retainLoadedChildren(u,o,s,l),c)l[f]||(this._coveredTiles[f]=!0,l[f]=c[f])}for(var g in l)this._tiles[g].clearFadeHold();for(var I=0,v=t.keysDifference(this._tiles,l);I<v.length;I+=1){var x=v[I],Z=this._tiles[x];Z.hasSymbolBuckets&&!Z.holdingForFade()?Z.setHoldDuration(this.map._fadeDuration):Z.hasSymbolBuckets&&!Z.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},i.prototype._updateRetainedTiles=function(t,e){for(var n={},a={},o=Math.max(e-i.maxOverzooming,this._source.minzoom),r=Math.max(e+i.maxUnderzooming,this._source.minzoom),s={},l=0,c=t;l<c.length;l+=1){var u=c[l],d=this._addTile(u);n[u.key]=u,d.hasData()||e<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,e,r,n);for(var h=0,p=t;h<p.length;h+=1){var m=p[h],b=this._tiles[m.key];if(!b.hasData()){if(e+1>this._source.maxzoom){var y=m.children(this._source.maxzoom)[0],f=this.getTile(y);if(f&&f.hasData()){n[y.key]=y;continue}}else{var g=m.children(this._source.maxzoom);if(n[g[0].key]&&n[g[1].key]&&n[g[2].key]&&n[g[3].key])continue}for(var I=b.wasRequested(),v=m.overscaledZ-1;v>=o;--v){var x=m.scaledTo(v);if(a[x.key])break;if(a[x.key]=!0,!(b=this.getTile(x))&&I&&(b=this._addTile(x)),b&&(n[x.key]=x,I=b.wasRequested(),b.hasData()))break}}}return n},i.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],i=void 0,n=this._tiles[t].tileID;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){i=this._loadedParentTiles[n.key];break}e.push(n.key);var a=n.scaledTo(n.overscaledZ-1);if(i=this._getLoadedTile(a))break;n=a}for(var o=0,r=e;o<r.length;o+=1)this._loadedParentTiles[r[o]]=i}},i.prototype._addTile=function(e){var i=this._tiles[e.key];if(i)return i;(i=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,i),i.tileID=e,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,i)));var n=Boolean(i);return n||(i=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,e.key,i.state))),i?(i.uses++,this._tiles[e.key]=i,n||this._source.fire(new t.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(t,e){var i=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((function(){i._reloadTile(t,"expired"),delete i._timers[t]}),n))},i.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},i.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},i.prototype.tilesIn=function(e,i,n){var a=this,o=[],r=this.transform;if(!r)return o;for(var s=n?r.getCameraQueryGeometry(e):e,l=e.map((function(t){return r.pointCoordinate(t)})),c=s.map((function(t){return r.pointCoordinate(t)})),u=this.getIds(),d=1/0,h=1/0,p=-1/0,m=-1/0,b=0,y=c;b<y.length;b+=1){var f=y[b];d=Math.min(d,f.x),h=Math.min(h,f.y),p=Math.max(p,f.x),m=Math.max(m,f.y)}for(var g=function(e){var n=a._tiles[u[e]];if(!n.holdingForFade()){var s=n.tileID,b=Math.pow(2,r.zoom-n.tileID.overscaledZ),y=i*n.queryPadding*t.EXTENT/n.tileSize/b,f=[s.getTilePoint(new t.MercatorCoordinate(d,h)),s.getTilePoint(new t.MercatorCoordinate(p,m))];if(f[0].x-y<t.EXTENT&&f[0].y-y<t.EXTENT&&f[1].x+y>=0&&f[1].y+y>=0){var g=l.map((function(t){return s.getTilePoint(t)})),I=c.map((function(t){return s.getTilePoint(t)}));o.push({tile:n,tileID:s,queryGeometry:g,cameraQueryGeometry:I,scale:b})}}},I=0;I<u.length;I++)g(I);return o},i.prototype.getVisibleCoordinates=function(t){for(var e=this,i=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),n=0,a=i;n<a.length;n+=1){var o=a[n];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Yt(this._source.type))for(var e in this._tiles){var i=this._tiles[e];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=t.browser.now())return!0}return!1},i.prototype.setFeatureState=function(t,e,i){this._state.updateState(t=t||"_geojsonTileLayer",e,i)},i.prototype.removeFeatureState=function(t,e,i){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,i)},i.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},i.prototype.setDependencies=function(t,e,i){var n=this._tiles[t];n&&n.setDependencies(e,i)},i.prototype.reloadTilesForDependencies=function(t,e){for(var i in this._tiles)this._tiles[i].hasDependency(t,e)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(t,e)}))},i}(t.Evented);function Lt(t,e){var i=Math.abs(2*t.wrap)-+(t.wrap<0),n=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||n-i||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Yt(t){return"raster"===t||"image"===t||"video"===t}function zt(){return new t.window.Worker(Ka.workerUrl)}Bt.maxOverzooming=10,Bt.maxUnderzooming=3;var Rt="mapboxgl_preloaded_worker_pool",Ct=function(){this.active={}};Ct.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Ct.workerCount;)this.workers.push(new zt);return this.active[t]=!0,this.workers.slice()},Ct.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)},Ct.prototype.isPreloaded=function(){return!!this.active[Rt]},Ct.prototype.numActive=function(){return Object.keys(this.active).length};var Mt,Jt=Math.floor(t.browser.hardwareConcurrency/2);function Ht(){return Mt||(Mt=new Ct),Mt}function kt(e,i){var n={};for(var a in e)"ref"!==a&&(n[a]=e[a]);return t.refProperties.forEach((function(t){t in i&&(n[t]=i[t])})),n}function jt(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=kt(t[n],e[t[n].ref]));return t}Ct.workerCount=Math.max(Math.min(Jt,6),1);var Ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Nt(t,e,i){i.push({command:Ft.addSource,args:[t,e[t]]})}function Tt(t,e,i){e.push({command:Ft.removeSource,args:[t]}),i[t]=!0}function Ut(t,e,i,n){Tt(t,i,n),Nt(t,e,i)}function Et(e,i,n){var a;for(a in e[n])if(e[n].hasOwnProperty(a)&&"data"!==a&&!t.deepEqual(e[n][a],i[n][a]))return!1;for(a in i[n])if(i[n].hasOwnProperty(a)&&"data"!==a&&!t.deepEqual(e[n][a],i[n][a]))return!1;return!0}function At(e,i,n,a,o,r){var s;for(s in i=i||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||n.push({command:r,args:[a,s,i[s],o]}));for(s in i)i.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],i[s])||n.push({command:r,args:[a,s,i[s],o]}))}function Ot(t){return t.id}function Pt(t,e){return t[e.id]=e,t}var Kt=function(t,e){this.reset(t,e)};Kt.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var i=1,n=this._distances[i],a=e*this.paddedLength+this.padding;n<a&&i<this._distances.length;)n=this._distances[++i];var o=i-1,r=this._distances[o],s=n-r,l=s>0?(a-r)/s:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))};var Dt=function(t,e,i){var n=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/i),this.yCellCount=Math.ceil(e/i);for(var o=0;o<this.xCellCount*this.yCellCount;o++)n.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Qt(e,i,n,a,o){var r=t.create();return i?(t.scale(r,r,[1/o,1/o,1]),n||t.rotateZ(r,r,a.angle)):t.multiply(r,a.labelPlaneMatrix,e),r}function qt(e,i,n,a,o){if(i){var r=t.clone(e);return t.scale(r,r,[o,o,1]),n||t.rotateZ(r,r,-a.angle),r}return a.glCoordMatrix}function $t(e,i){var n=[e.x,e.y,0,1];ue(n,n,i);var a=n[3];return{point:new t.Point(n[0]/a,n[1]/a),signedDistanceFromCamera:a}}function te(t,e){return.5+t/e*.5}function ee(t,e){var i=t[0]/t[3],n=t[1]/t[3];return i>=-e[0]&&i<=e[0]&&n>=-e[1]&&n<=e[1]}function ie(e,i,n,a,o,r,s,l){var c=a?e.textSizeData:e.iconSizeData,u=t.evaluateSizeForZoom(c,n.transform.zoom),d=[256/n.width*2+1,256/n.height*2+1],h=a?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var p=e.lineVertexArray,m=a?e.text.placedSymbolArray:e.icon.placedSymbolArray,b=n.transform.width/n.transform.height,y=!1,f=0;f<m.length;f++){var g=m.get(f);if(g.hidden||g.writingMode===t.WritingMode.vertical&&!y)ce(g.numGlyphs,h);else{y=!1;var I=[g.anchorX,g.anchorY,0,1];if(t.transformMat4(I,I,i),ee(I,d)){var v=te(n.transform.cameraToCenterDistance,I[3]),x=t.evaluateSizeForFeature(c,u,g),Z=s?x/v:x*v,G=new t.Point(g.anchorX,g.anchorY),w=$t(G,o).point,W={},X=oe(g,Z,!1,l,i,o,r,e.glyphOffsetArray,p,h,w,G,W,b);y=X.useVertical,(X.notEnoughRoom||y||X.needsFlipping&&oe(g,Z,!0,l,i,o,r,e.glyphOffsetArray,p,h,w,G,W,b).notEnoughRoom)&&ce(g.numGlyphs,h)}else ce(g.numGlyphs,h)}}a?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function ne(t,e,i,n,a,o,r,s,l,c,u){var d=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,p=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),b=e.getoffsetX(d-1),y=se(t*m,i,n,a,o,r,s.segment,h,p,l,c,u);if(!y)return null;var f=se(t*b,i,n,a,o,r,s.segment,h,p,l,c,u);return f?{first:y,last:f}:null}function ae(e,i,n,a){return e===t.WritingMode.horizontal&&Math.abs(n.y-i.y)>Math.abs(n.x-i.x)*a?{useVertical:!0}:(e===t.WritingMode.vertical?i.y<n.y:i.x>n.x)?{needsFlipping:!0}:null}function oe(e,i,n,a,o,r,s,l,c,u,d,h,p,m){var b,y=i/24,f=e.lineOffsetX*y,g=e.lineOffsetY*y;if(e.numGlyphs>1){var I=e.glyphStartIndex+e.numGlyphs,v=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,Z=ne(y,l,f,g,n,d,h,e,c,r,p);if(!Z)return{notEnoughRoom:!0};var G=$t(Z.first.point,s).point,w=$t(Z.last.point,s).point;if(a&&!n){var W=ae(e.writingMode,G,w,m);if(W)return W}b=[Z.first];for(var X=e.glyphStartIndex+1;X<I-1;X++)b.push(se(y*l.getoffsetX(X),f,g,n,d,h,e.segment,v,x,c,r,p));b.push(Z.last)}else{if(a&&!n){var _=$t(h,o).point,V=e.lineStartIndex+e.segment+1,S=new t.Point(c.getx(V),c.gety(V)),B=$t(S,o),L=B.signedDistanceFromCamera>0?B.point:re(h,S,_,1,o),Y=ae(e.writingMode,_,L,m);if(Y)return Y}var z=se(y*l.getoffsetX(e.glyphStartIndex),f,g,n,d,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,r,p);if(!z)return{notEnoughRoom:!0};b=[z]}for(var R=0,C=b;R<C.length;R+=1){var M=C[R];t.addDynamicAttributes(u,M.point,M.angle)}return{}}function re(t,e,i,n,a){var o=$t(t.add(t.sub(e)._unit()),a).point,r=i.sub(o);return i.add(r._mult(n/r.mag()))}function se(e,i,n,a,o,r,s,l,c,u,d,h){var p=a?e-i:e+i,m=p>0?1:-1,b=0;a&&(m*=-1,b=Math.PI),m<0&&(b+=Math.PI);for(var y=m>0?l+s:l+s+1,f=o,g=o,I=0,v=0,x=Math.abs(p),Z=[];I+v<=x;){if((y+=m)<l||y>=c)return null;if(g=f,Z.push(f),void 0===(f=h[y])){var G=new t.Point(u.getx(y),u.gety(y)),w=$t(G,d);if(w.signedDistanceFromCamera>0)f=h[y]=w.point;else{var W=y-m;f=re(0===I?r:new t.Point(u.getx(W),u.gety(W)),G,g,x-I+1,d)}}I+=v,v=g.dist(f)}var X=(x-I)/v,_=f.sub(g),V=_.mult(X)._add(g);V._add(_._unit()._perp()._mult(n*m));var S=b+Math.atan2(f.y-g.y,f.x-g.x);return Z.push(V),{point:V,angle:S,path:Z}}Dt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Dt.prototype.insert=function(t,e,i,n,a){this._forEachCell(e,i,n,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(a)},Dt.prototype.insertCircle=function(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n)},Dt.prototype._insertBoxCell=function(t,e,i,n,a,o){this.boxCells[a].push(o)},Dt.prototype._insertCircleCell=function(t,e,i,n,a,o){this.circleCells[a].push(o)},Dt.prototype._query=function(t,e,i,n,a,o){if(i<0||t>this.width||n<0||e>this.height)return!a&&[];var r=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(a)return!0;for(var s=0;s<this.boxKeys.length;s++)r.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var c=this.circles[3*l],u=this.circles[3*l+1],d=this.circles[3*l+2];r.push({key:this.circleKeys[l],x1:c-d,y1:u-d,x2:c+d,y2:u+d})}return o?r.filter(o):r}return this._forEachCell(t,e,i,n,this._queryCell,r,{hitTest:a,seenUids:{box:{},circle:{}}},o),a?r.length>0:r},Dt.prototype._queryCircle=function(t,e,i,n,a){var o=t-i,r=t+i,s=e-i,l=e+i;if(r<0||o>this.width||l<0||s>this.height)return!n&&[];var c=[];return this._forEachCell(o,s,r,l,this._queryCellCircle,c,{hitTest:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}},a),n?c.length>0:c},Dt.prototype.query=function(t,e,i,n,a){return this._query(t,e,i,n,!1,a)},Dt.prototype.hitTest=function(t,e,i,n,a){return this._query(t,e,i,n,!0,a)},Dt.prototype.hitTestCircle=function(t,e,i,n){return this._queryCircle(t,e,i,!0,n)},Dt.prototype._queryCell=function(t,e,i,n,a,o,r,s){var l=r.seenUids,c=this.boxCells[a];if(null!==c)for(var u=this.bboxes,d=0,h=c;d<h.length;d+=1){var p=h[d];if(!l.box[p]){l.box[p]=!0;var m=4*p;if(t<=u[m+2]&&e<=u[m+3]&&i>=u[m+0]&&n>=u[m+1]&&(!s||s(this.boxKeys[p]))){if(r.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:u[m],y1:u[m+1],x2:u[m+2],y2:u[m+3]})}}}var b=this.circleCells[a];if(null!==b)for(var y=this.circles,f=0,g=b;f<g.length;f+=1){var I=g[f];if(!l.circle[I]){l.circle[I]=!0;var v=3*I;if(this._circleAndRectCollide(y[v],y[v+1],y[v+2],t,e,i,n)&&(!s||s(this.circleKeys[I]))){if(r.hitTest)return o.push(!0),!0;var x=y[v],Z=y[v+1],G=y[v+2];o.push({key:this.circleKeys[I],x1:x-G,y1:Z-G,x2:x+G,y2:Z+G})}}}},Dt.prototype._queryCellCircle=function(t,e,i,n,a,o,r,s){var l=r.circle,c=r.seenUids,u=this.boxCells[a];if(null!==u)for(var d=this.bboxes,h=0,p=u;h<p.length;h+=1){var m=p[h];if(!c.box[m]){c.box[m]=!0;var b=4*m;if(this._circleAndRectCollide(l.x,l.y,l.radius,d[b+0],d[b+1],d[b+2],d[b+3])&&(!s||s(this.boxKeys[m])))return o.push(!0),!0}}var y=this.circleCells[a];if(null!==y)for(var f=this.circles,g=0,I=y;g<I.length;g+=1){var v=I[g];if(!c.circle[v]){c.circle[v]=!0;var x=3*v;if(this._circlesCollide(f[x],f[x+1],f[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[v])))return o.push(!0),!0}}},Dt.prototype._forEachCell=function(t,e,i,n,a,o,r,s){for(var l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(i),d=this._convertToYCellCoord(n),h=l;h<=u;h++)for(var p=c;p<=d;p++)if(a.call(this,t,e,i,n,this.xCellCount*p+h,o,r,s))return},Dt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Dt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Dt.prototype._circlesCollide=function(t,e,i,n,a,o){var r=n-t,s=a-e,l=i+o;return l*l>r*r+s*s},Dt.prototype._circleAndRectCollide=function(t,e,i,n,a,o,r){var s=(o-n)/2,l=Math.abs(t-(n+s));if(l>s+i)return!1;var c=(r-a)/2,u=Math.abs(e-(a+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;var d=l-s,h=u-c;return d*d+h*h<=i*i};var le=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ce(t,e){for(var i=0;i<t;i++){var n=e.length;e.resize(n+4),e.float32.set(le,3*n)}}function ue(t,e,i){var n=e[0],a=e[1];return t[0]=i[0]*n+i[4]*a+i[12],t[1]=i[1]*n+i[5]*a+i[13],t[3]=i[3]*n+i[7]*a+i[15],t}var de=function(t,e,i){void 0===e&&(e=new Dt(t.width+200,t.height+200,25)),void 0===i&&(i=new Dt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function he(e,i,n){return i*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}de.prototype.placeCollisionBox=function(t,e,i,n,a){var o=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY),r=i*o.perspectiveRatio,s=t.x1*r+o.point.x,l=t.y1*r+o.point.y,c=t.x2*r+o.point.x,u=t.y2*r+o.point.y;return!this.isInsideGrid(s,l,c,u)||!e&&this.grid.hitTest(s,l,c,u,a)?{box:[],offscreen:!1}:{box:[s,l,c,u],offscreen:this.isOffscreen(s,l,c,u)}},de.prototype.placeCollisionCircles=function(e,i,n,a,o,r,s,l,c,u,d,h,p){var m=[],b=new t.Point(i.anchorX,i.anchorY),y=$t(b,r),f=te(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),g=(u?o/f:o*f)/t.ONE_EM,I=$t(b,s).point,v=ne(g,a,i.lineOffsetX*g,i.lineOffsetY*g,!1,I,b,i,n,s,{}),x=!1,Z=!1,G=!0;if(v){for(var w=.5*h*f+p,W=new t.Point(-100,-100),X=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),_=new Kt,V=v.first,S=v.last,B=[],L=V.path.length-1;L>=1;L--)B.push(V.path[L]);for(var Y=1;Y<S.path.length;Y++)B.push(S.path[Y]);var z=2.5*w;if(l){var R=B.map((function(t){return $t(t,l)}));B=R.some((function(t){return t.signedDistanceFromCamera<=0}))?[]:R.map((function(t){return t.point}))}var C=[];if(B.length>0){for(var M=B[0].clone(),J=B[0].clone(),H=1;H<B.length;H++)M.x=Math.min(M.x,B[H].x),M.y=Math.min(M.y,B[H].y),J.x=Math.max(J.x,B[H].x),J.y=Math.max(J.y,B[H].y);C=M.x>=W.x&&J.x<=X.x&&M.y>=W.y&&J.y<=X.y?[B]:J.x<W.x||M.x>X.x||J.y<W.y||M.y>X.y?[]:t.clipLine([B],W.x,W.y,X.x,X.y)}for(var k=0,j=C;k<j.length;k+=1){var F;_.reset(j[k],.25*w),F=_.length<=.5*w?1:Math.ceil(_.paddedLength/z)+1;for(var N=0;N<F;N++){var T=N/Math.max(F-1,1),U=_.lerp(T),E=U.x+100,A=U.y+100;m.push(E,A,w,0);var O=E-w,P=A-w,K=E+w,D=A+w;if(G=G&&this.isOffscreen(O,P,K,D),Z=Z||this.isInsideGrid(O,P,K,D),!e&&this.grid.hitTestCircle(E,A,w,d)&&(x=!0,!c))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!c&&x||!Z?[]:m,offscreen:G,collisionDetected:x}},de.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],n=1/0,a=1/0,o=-1/0,r=-1/0,s=0,l=e;s<l.length;s+=1){var c=l[s],u=new t.Point(c.x+100,c.y+100);n=Math.min(n,u.x),a=Math.min(a,u.y),o=Math.max(o,u.x),r=Math.max(r,u.y),i.push(u)}for(var d={},h={},p=0,m=this.grid.query(n,a,o,r).concat(this.ignoredGrid.query(n,a,o,r));p<m.length;p+=1){var b=m[p],y=b.key;if(void 0===d[y.bucketInstanceId]&&(d[y.bucketInstanceId]={}),!d[y.bucketInstanceId][y.featureIndex]){var f=[new t.Point(b.x1,b.y1),new t.Point(b.x2,b.y1),new t.Point(b.x2,b.y2),new t.Point(b.x1,b.y2)];t.polygonIntersectsPolygon(i,f)&&(d[y.bucketInstanceId][y.featureIndex]=!0,void 0===h[y.bucketInstanceId]&&(h[y.bucketInstanceId]=[]),h[y.bucketInstanceId].push(y.featureIndex))}}return h},de.prototype.insertCollisionBox=function(t,e,i,n,a){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:n,collisionGroupID:a},t[0],t[1],t[2],t[3])},de.prototype.insertCollisionCircles=function(t,e,i,n,a){for(var o=e?this.ignoredGrid:this.grid,r={bucketInstanceId:i,featureIndex:n,collisionGroupID:a},s=0;s<t.length;s+=4)o.insertCircle(r,t[s],t[s+1],t[s+2])},de.prototype.projectAndGetPerspectiveRatio=function(e,i,n){var a=[i,n,0,1];return ue(a,a,e),{point:new t.Point((a[0]/a[3]+1)/2*this.transform.width+100,(-a[1]/a[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5}},de.prototype.isOffscreen=function(t,e,i,n){return i<100||t>=this.screenRightBoundary||n<100||e>this.screenBottomBoundary},de.prototype.isInsideGrid=function(t,e,i,n){return i>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary},de.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var pe=function(t,e,i,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&i?1:0,this.placed=i};pe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var me=function(t,e,i,n,a){this.text=new pe(t?t.text:null,e,i,a),this.icon=new pe(t?t.icon:null,e,n,a)};me.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var be=function(t,e,i){this.text=t,this.icon=e,this.skipFade=i},ye=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},fe=function(t,e,i,n,a){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=i,this.bucketIndex=n,this.tileID=a},ge=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function Ie(e,i,n,a,o){var r=t.getAnchorAlignment(e),s=-(r.horizontalAlign-.5)*i,l=-(r.verticalAlign-.5)*n,c=t.evaluateVariableOffset(e,a);return new t.Point(s+c[0]*o,l+c[1]*o)}function ve(e,i,n,a,o,r){var s=e.x1,l=e.x2,c=e.y1,u=e.y2,d=e.anchorPointX,h=e.anchorPointY,p=new t.Point(i,n);return a&&p._rotate(o?r:-r),{x1:s+p.x,y1:c+p.y,x2:l+p.x,y2:u+p.y,anchorPointX:d,anchorPointY:h}}ge.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var xe=function(t,e,i,n){this.transform=t.clone(),this.collisionIndex=new de(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ge(i),this.collisionCircleArrays={},this.prevPlacement=n,n&&(n.prevPlacement=void 0),this.placedOrientations={}};function Ze(t,e,i,n,a){t.emplaceBack(e?1:0,i?1:0,n||0,a||0),t.emplaceBack(e?1:0,i?1:0,n||0,a||0),t.emplaceBack(e?1:0,i?1:0,n||0,a||0),t.emplaceBack(e?1:0,i?1:0,n||0,a||0)}xe.prototype.getBucketParts=function(e,i,n,a){var o=n.getBucket(i),r=n.latestFeatureIndex;if(o&&r&&i.id===o.layerIds[0]){var s=n.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),u=n.tileSize/t.EXTENT,d=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),h="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),m=he(n,1,this.transform.zoom),b=Qt(d,h,p,this.transform,m),y=null;if(h){var f=qt(d,h,p,this.transform,m);y=t.multiply([],this.transform.labelPlaneMatrix,f)}this.retainedQueryData[o.bucketInstanceId]=new fe(o.bucketInstanceId,r,o.sourceLayerIndex,o.index,n.tileID);var g={bucket:o,layout:l,posMatrix:d,textLabelPlaneMatrix:b,labelToScreenMatrix:y,scale:c,textPixelRatio:u,holdingForFade:n.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(a)for(var I=0,v=o.sortKeyRanges;I<v.length;I+=1){var x=v[I];e.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:g})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:g})}},xe.prototype.attemptAnchorPlacement=function(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m){var b,y=[d.textOffset0,d.textOffset1],f=Ie(t,i,n,y,a),g=this.collisionIndex.placeCollisionBox(ve(e,f.x,f.y,o,r,this.transform.angle),u,s,l,c.predicate);if(!m||0!==this.collisionIndex.placeCollisionBox(ve(m,f.x,f.y,o,r,this.transform.angle),u,s,l,c.predicate).box.length)return g.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID].text&&(b=this.prevPlacement.variableOffsets[d.crossTileID].anchor),this.variableOffsets[d.crossTileID]={textOffset:y,width:i,height:n,anchor:t,textBoxScale:a,prevAnchor:b},this.markUsedJustification(h,t,d,p),h.allowVerticalPlacement&&(this.markUsedOrientation(h,p,d),this.placedOrientations[d.crossTileID]=p),{shift:f,placedGlyphBoxes:g}):void 0},xe.prototype.placeLayerBucketPart=function(e,i,n){var a=this,o=e.parameters,r=o.bucket,s=o.layout,l=o.posMatrix,c=o.textLabelPlaneMatrix,u=o.labelToScreenMatrix,d=o.textPixelRatio,h=o.holdingForFade,p=o.collisionBoxArray,m=o.partiallyEvaluatedTextSize,b=o.collisionGroup,y=s.get("text-optional"),f=s.get("icon-optional"),g=s.get("text-allow-overlap"),I=s.get("icon-allow-overlap"),v="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),Z="none"!==s.get("icon-text-fit"),G="viewport-y"===s.get("symbol-z-order"),w=g&&(I||!r.hasIconData()||f),W=I&&(g||!r.hasTextData()||y);!r.collisionArrays&&p&&r.deserializeCollisionBoxes(p);var X=function(e,o){if(!i[e.crossTileID])if(h)a.placements[e.crossTileID]=new be(!1,!1,!1);else{var p,G=!1,X=!1,_=!0,V=null,S={box:null,offscreen:null},B={box:null,offscreen:null},L=null,Y=null,z=0,R=0,C=0;o.textFeatureIndex?z=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(z=e.featureIndex),o.verticalTextFeatureIndex&&(R=o.verticalTextFeatureIndex);var M=o.textBox;if(M){var J=function(i){var n=t.WritingMode.horizontal;if(r.allowVerticalPlacement&&!i&&a.prevPlacement){var o=a.prevPlacement.placedOrientations[e.crossTileID];o&&(a.placedOrientations[e.crossTileID]=o,a.markUsedOrientation(r,n=o,e))}return n},H=function(i,n){if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var a=0,s=r.writingModes;a<s.length&&(s[a]===t.WritingMode.vertical?(S=n(),B=S):S=i(),!(S&&S.box&&S.box.length));a+=1);else S=i()};if(s.get("text-variable-anchor")){var k=s.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[e.crossTileID]){var j=a.prevPlacement.variableOffsets[e.crossTileID];k.indexOf(j.anchor)>0&&(k=k.filter((function(t){return t!==j.anchor}))).unshift(j.anchor)}var F=function(t,i,n){for(var o=t.x2-t.x1,s=t.y2-t.y1,c=e.textBoxScale,u=Z&&!I?i:null,h={box:[],offscreen:!1},p=g?2*k.length:k.length,m=0;m<p;++m){var y=a.attemptAnchorPlacement(k[m%k.length],t,o,s,c,v,x,d,l,b,m>=k.length,e,r,n,u);if(y&&(h=y.placedGlyphBoxes)&&h.box&&h.box.length){G=!0,V=y.shift;break}}return h};H((function(){return F(M,o.iconBox,t.WritingMode.horizontal)}),(function(){var i=o.verticalTextBox;return r.allowVerticalPlacement&&!(S&&S.box&&S.box.length)&&e.numVerticalGlyphVertices>0&&i?F(i,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),S&&(G=S.box,_=S.offscreen);var N=J(S&&S.box);if(!G&&a.prevPlacement){var T=a.prevPlacement.variableOffsets[e.crossTileID];T&&(a.variableOffsets[e.crossTileID]=T,a.markUsedJustification(r,T.anchor,e,N))}}else{var U=function(t,i){var n=a.collisionIndex.placeCollisionBox(t,g,d,l,b.predicate);return n&&n.box&&n.box.length&&(a.markUsedOrientation(r,i,e),a.placedOrientations[e.crossTileID]=i),n};H((function(){return U(M,t.WritingMode.horizontal)}),(function(){var i=o.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&i?U(i,t.WritingMode.vertical):{box:null,offscreen:null}})),J(S&&S.box&&S.box.length)}}if(G=(p=S)&&p.box&&p.box.length>0,_=p&&p.offscreen,e.useRuntimeCollisionCircles){var E=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),A=t.evaluateSizeForFeature(r.textSizeData,m,E),O=s.get("text-padding");L=a.collisionIndex.placeCollisionCircles(g,E,r.lineVertexArray,r.glyphOffsetArray,A,l,c,u,n,x,b.predicate,e.collisionCircleDiameter,O),G=g||L.circles.length>0&&!L.collisionDetected,_=_&&L.offscreen}if(o.iconFeatureIndex&&(C=o.iconFeatureIndex),o.iconBox){var P=function(t){var e=Z&&V?ve(t,V.x,V.y,v,x,a.transform.angle):t;return a.collisionIndex.placeCollisionBox(e,I,d,l,b.predicate)};X=B&&B.box&&B.box.length&&o.verticalIconBox?(Y=P(o.verticalIconBox)).box.length>0:(Y=P(o.iconBox)).box.length>0,_=_&&Y.offscreen}var K=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,D=f||0===e.numIconVertices;if(K||D?D?K||(X=X&&G):G=X&&G:X=G=X&&G,G&&p&&p.box&&a.collisionIndex.insertCollisionBox(p.box,s.get("text-ignore-placement"),r.bucketInstanceId,B&&B.box&&R?R:z,b.ID),X&&Y&&a.collisionIndex.insertCollisionBox(Y.box,s.get("icon-ignore-placement"),r.bucketInstanceId,C,b.ID),L&&(G&&a.collisionIndex.insertCollisionCircles(L.circles,s.get("text-ignore-placement"),r.bucketInstanceId,z,b.ID),n)){var Q=r.bucketInstanceId,q=a.collisionCircleArrays[Q];void 0===q&&(q=a.collisionCircleArrays[Q]=new ye);for(var $=0;$<L.circles.length;$+=4)q.circles.push(L.circles[$+0]),q.circles.push(L.circles[$+1]),q.circles.push(L.circles[$+2]),q.circles.push(L.collisionDetected?1:0)}a.placements[e.crossTileID]=new be(G||w,X||W,_||r.justReloaded),i[e.crossTileID]=!0}};if(G)for(var _=r.getSortedSymbolIndexes(this.transform.angle),V=_.length-1;V>=0;--V){var S=_[V];X(r.symbolInstances.get(S),r.collisionArrays[S])}else for(var B=e.symbolInstanceStart;B<e.symbolInstanceEnd;B++)X(r.symbolInstances.get(B),r.collisionArrays[B]);if(n&&r.bucketInstanceId in this.collisionCircleArrays){var L=this.collisionCircleArrays[r.bucketInstanceId];t.invert(L.invProjMatrix,l),L.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1},xe.prototype.markUsedJustification=function(e,i,n,a){var o;o=a===t.WritingMode.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(i)];for(var r=0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];r<s.length;r+=1){var l=s[r];l>=0&&(e.text.placedSymbolArray.get(l).crossTileID=o>=0&&l!==o?0:n.crossTileID)}},xe.prototype.markUsedOrientation=function(e,i,n){for(var a=i===t.WritingMode.horizontal||i===t.WritingMode.horizontalOnly?i:0,o=i===t.WritingMode.vertical?i:0,r=0,s=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];r<s.length;r+=1)e.text.placedSymbolArray.get(s[r]).placedOrientation=a;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)},xe.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,i=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var n=e?e.symbolFadeChange(t):1,a=e?e.opacities:{},o=e?e.variableOffsets:{},r=e?e.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],c=a[s];c?(this.opacities[s]=new me(c,n,l.text,l.icon),i=i||l.text!==c.text.placed||l.icon!==c.icon.placed):(this.opacities[s]=new me(null,n,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var u in a){var d=a[u];if(!this.opacities[u]){var h=new me(d,n,!1,!1);h.isHidden()||(this.opacities[u]=h,i=i||d.text.placed||d.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var m in r)this.placedOrientations[m]||!this.opacities[m]||this.opacities[m].isHidden()||(this.placedOrientations[m]=r[m]);i?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},xe.prototype.updateLayerOpacities=function(t,e){for(var i={},n=0,a=e;n<a.length;n+=1){var o=a[n],r=o.getBucket(t);r&&o.latestFeatureIndex&&t.id===r.layerIds[0]&&this.updateBucketOpacities(r,i,o.collisionBoxArray)}},xe.prototype.updateBucketOpacities=function(e,i,n){var a=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,r=new me(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),l=o.get("icon-allow-overlap"),c=o.get("text-variable-anchor"),u="map"===o.get("text-rotation-alignment"),d="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),p=new me(null,0,s&&(l||!e.hasIconData()||o.get("icon-optional")),l&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);for(var m=function(t,e,i){for(var n=0;n<e/4;n++)t.opacityVertexArray.emplaceBack(i)},b=function(n){var o=e.symbolInstances.get(n),s=o.numHorizontalGlyphVertices,l=o.numVerticalGlyphVertices,b=o.crossTileID,y=a.opacities[b];i[b]?y=r:y||(a.opacities[b]=y=p),i[b]=!0;var f=o.numIconVertices>0,g=a.placedOrientations[o.crossTileID],I=g===t.WritingMode.vertical,v=g===t.WritingMode.horizontal||g===t.WritingMode.horizontalOnly;if(s>0||l>0){var x=Be(y.text);m(e.text,s,I?Le:x),m(e.text,l,v?Le:x);var Z=y.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=Z||I?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=Z||v?1:0);var G=a.variableOffsets[o.crossTileID];G&&a.markUsedJustification(e,G.anchor,o,g);var w=a.placedOrientations[o.crossTileID];w&&(a.markUsedJustification(e,"left",o,w),a.markUsedOrientation(e,w,o))}if(f){var W=Be(y.icon),X=!(h&&o.verticalPlacedIconSymbolIndex&&I);o.placedIconSymbolIndex>=0&&(m(e.icon,o.numIconVertices,X?W:Le),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=y.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,o.numVerticalIconVertices,X?Le:W),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var _=e.collisionArrays[n];if(_){var V=new t.Point(0,0);if(_.textBox||_.verticalTextBox){var S=!0;if(c){var B=a.variableOffsets[b];B?(V=Ie(B.anchor,B.width,B.height,B.textOffset,B.textBoxScale),u&&V._rotate(d?a.transform.angle:-a.transform.angle)):S=!1}_.textBox&&Ze(e.textCollisionBox.collisionVertexArray,y.text.placed,!S||I,V.x,V.y),_.verticalTextBox&&Ze(e.textCollisionBox.collisionVertexArray,y.text.placed,!S||v,V.x,V.y)}var L=Boolean(!v&&_.verticalIconBox);_.iconBox&&Ze(e.iconCollisionBox.collisionVertexArray,y.icon.placed,L,h?V.x:0,h?V.y:0),_.verticalIconBox&&Ze(e.iconCollisionBox.collisionVertexArray,y.icon.placed,!L,h?V.x:0,h?V.y:0)}}},y=0;y<e.symbolInstances.length;y++)b(y);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var f=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=f.invProjMatrix,e.placementViewportMatrix=f.viewportMatrix,e.collisionCircleArray=f.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},xe.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xe.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},xe.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},xe.prototype.stillRecent=function(t,e){var i=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*i>t},xe.prototype.setStale=function(){this.stale=!0};var Ge=Math.pow(2,25),we=Math.pow(2,24),We=Math.pow(2,17),Xe=Math.pow(2,16),_e=Math.pow(2,9),Ve=Math.pow(2,8),Se=Math.pow(2,1);function Be(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,i=Math.floor(127*t.opacity);return i*Ge+e*we+i*We+e*Xe+i*_e+e*Ve+i*Se+e}var Le=0,Ye=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ye.prototype.continuePlacement=function(t,e,i,n,a){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,n,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,a())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,a())return!0;return!1};var ze=function(t,e,i,n,a,o,r){this.placement=new xe(t,a,o,r),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._done=!1};ze.prototype.isDone=function(){return this._done},ze.prototype.continuePlacement=function(e,i,n){for(var a=this,o=t.browser.now(),r=function(){var e=t.browser.now()-o;return!a._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=i[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Ye(s)),this._inProgressLayer.continuePlacement(n[s.source],this.placement,this._showCollisionBoxes,s,r))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ze.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Re=512/t.EXTENT/2,Ce=function(t,e,i){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var n=0;n<e.length;n++){var a=e.get(n),o=a.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,t)})}};Ce.prototype.getScaledCoordinates=function(e,i){var n=Re/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*t.EXTENT+e.anchorX)*n),y:Math.floor((i.canonical.y*t.EXTENT+e.anchorY)*n)}},Ce.prototype.findMatches=function(t,e,i){for(var n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),a=0;a<t.length;a++){var o=t.get(a);if(!o.crossTileID){var r=this.indexedSymbolInstances[o.key];if(r)for(var s=this.getScaledCoordinates(o,e),l=0,c=r;l<c.length;l+=1){var u=c[l];if(Math.abs(u.coord.x-s.x)<=n&&Math.abs(u.coord.y-s.y)<=n&&!i[u.crossTileID]){i[u.crossTileID]=!0,o.crossTileID=u.crossTileID;break}}}}};var Me=function(){this.maxCrossTileID=0};Me.prototype.generate=function(){return++this.maxCrossTileID};var Je=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Je.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var i in this.indexes){var n=this.indexes[i],a={};for(var o in n){var r=n[o];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),a[r.tileID.key]=r}this.indexes[i]=a}this.lng=t},Je.prototype.addBucket=function(t,e,i){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var n=0;n<e.symbolInstances.length;n++)e.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var a=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var r=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in r){var l=r[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,a)}else{var c=r[t.scaledTo(Number(o)).key];c&&c.findMatches(e.symbolInstances,t,a)}}for(var u=0;u<e.symbolInstances.length;u++){var d=e.symbolInstances.get(u);d.crossTileID||(d.crossTileID=i.generate(),a[d.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ce(t,e.symbolInstances,e.bucketInstanceId),!0},Je.prototype.removeBucketCrossTileIDs=function(t,e){for(var i in e.indexedSymbolInstances)for(var n=0,a=e.indexedSymbolInstances[i];n<a.length;n+=1)delete this.usedCrossTileIDs[t][a[n].crossTileID]},Je.prototype.removeStaleBuckets=function(t){var e=!1;for(var i in this.indexes){var n=this.indexes[i];for(var a in n)t[n[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,n[a]),delete n[a],e=!0)}return e};var He=function(){this.layerIndexes={},this.crossTileIDs=new Me,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};He.prototype.addLayer=function(t,e,i){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Je);var a=!1,o={};n.handleWrapJump(i);for(var r=0,s=e;r<s.length;r+=1){var l=s[r],c=l.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,c,this.crossTileIDs)&&(a=!0),o[c.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(a=!0),a},He.prototype.pruneUnusedLayers=function(t){var e={};for(var i in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[i]||delete this.layerIndexes[i]};var ke=function(e,i){return t.emitValidationErrors(e,i&&i.filter((function(t){return"source.canvas"!==t.identifier})))},je=t.pick(Ft,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Fe=t.pick(Ft,["setCenter","setZoom","setBearing","setPitch"]),Ne=function(){var e={},i=t.styleSpec.$version;for(var n in t.styleSpec.$root){var a,o=t.styleSpec.$root[n];o.required&&null!=(a="version"===n?i:"array"===o.type?[]:{})&&(e[n]=a)}return e}(),Te=function(e){function i(n,a){var o=this;void 0===a&&(a={}),e.call(this),this.map=n,this.dispatcher=new w(Ht(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new I(n._requestManager,a.localIdeographFontFamily),this.lineAtlas=new G(256,512),this.crossTileSymbolIndex=new He,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var r=this;this._rtlTextPluginCallback=i.registerForPluginStateChange((function(e){r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,i){if(t.triggerPluginCompletionEvent(e),i&&i.every((function(t){return t})))for(var n in r.sourceCaches)r.sourceCaches[n].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var i=e.getSource();if(i&&i.vectorLayerIds)for(var n in o._layers){var a=o._layers[n];a.source===i.id&&o._validateLayer(a)}}}}))}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.loadURL=function(e,i){var n=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var a="boolean"==typeof i.validate?i.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,i.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,i){n._request=null,e?n.fire(new t.ErrorEvent(e)):i&&n._load(i,a)}))},i.prototype.loadJSON=function(e,i){var n=this;void 0===i&&(i={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){n._request=null,n._load(e,!1!==i.validate)}))},i.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ne,!1)},i.prototype._load=function(e,i){if(!i||!ke(this,t.validateStyle(e))){for(var n in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(n,e.sources[n],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=jt(this.stylesheet.layers);this._order=a.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,r=a;o<r.length;o+=1){var s=r[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Z(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},i.prototype._loadSprite=function(e){var i=this;this._spriteRequest=function(e,i,n){var a,o,r,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(i.transformRequest(i.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){l=null,r||(r=t,a=e,u())})),c=t.getImage(i.transformRequest(i.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){c=null,r||(r=t,o=e,u())}));function u(){if(r)n(r);else if(a&&o){var e=t.browser.getImageData(o),i={};for(var s in a){var l=a[s],c=l.width,u=l.height,d=l.x,h=l.y,p=l.sdf,m=l.pixelRatio,b=l.stretchX,y=l.stretchY,f=l.content,g=new t.RGBAImage({width:c,height:u});t.RGBAImage.copy(e,g,{x:d,y:h},{x:0,y:0},{width:c,height:u}),i[s]={data:g,pixelRatio:m,sdf:p,stretchX:b,stretchY:y,content:f}}n(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,(function(e,n){if(i._spriteRequest=null,e)i.fire(new t.ErrorEvent(e));else if(n)for(var a in n)i.imageManager.addImage(a,n[a]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new t.Event("data",{dataType:"style"}))}))},i.prototype._validateLayer=function(e){var i=this.sourceCaches[e.source];if(i){var n=e.sourceLayer;if(n){var a=i.getSource();("geojson"===a.type||a.vectorLayerIds&&-1===a.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+a.id+'" as specified by style layer "'+e.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(t){for(var e=[],i=0,n=t;i<n.length;i+=1){var a=this._layers[n[i]];"custom"!==a.type&&e.push(a.serialize())}return e},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(e){if(this._loaded){var i=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),a=Object.keys(this._removedLayers);for(var o in(n.length||a.length)&&this._updateWorkerLayers(n,a),this._updatedSources){var r=this._updatedSources[o];"reload"===r?this._reloadSource(o):"clear"===r&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var l={};for(var c in this.sourceCaches){var u=this.sourceCaches[c];l[c]=u.used,u.used=!1}for(var d=0,h=this._order;d<h.length;d+=1){var p=this._layers[h[d]];p.recalculate(e,this._availableImages),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}for(var m in l){var b=this.sourceCaches[m];l[m]!==b.used&&b.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(e),this.z=e.zoom,i&&this.fire(new t.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},i.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(e){var i=this;if(this._checkLoaded(),ke(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=jt(e.layers);var n=function(e,i){if(!e)return[{command:Ft.setStyle,args:[i]}];var n=[];try{if(!t.deepEqual(e.version,i.version))return[{command:Ft.setStyle,args:[i]}];t.deepEqual(e.center,i.center)||n.push({command:Ft.setCenter,args:[i.center]}),t.deepEqual(e.zoom,i.zoom)||n.push({command:Ft.setZoom,args:[i.zoom]}),t.deepEqual(e.bearing,i.bearing)||n.push({command:Ft.setBearing,args:[i.bearing]}),t.deepEqual(e.pitch,i.pitch)||n.push({command:Ft.setPitch,args:[i.pitch]}),t.deepEqual(e.sprite,i.sprite)||n.push({command:Ft.setSprite,args:[i.sprite]}),t.deepEqual(e.glyphs,i.glyphs)||n.push({command:Ft.setGlyphs,args:[i.glyphs]}),t.deepEqual(e.transition,i.transition)||n.push({command:Ft.setTransition,args:[i.transition]}),t.deepEqual(e.light,i.light)||n.push({command:Ft.setLight,args:[i.light]});var a={},o=[];!function(e,i,n,a){var o;for(o in i=i||{},e=e||{})e.hasOwnProperty(o)&&(i.hasOwnProperty(o)||Tt(o,n,a));for(o in i)i.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],i[o])||("geojson"===e[o].type&&"geojson"===i[o].type&&Et(e,i,o)?n.push({command:Ft.setGeoJSONSourceData,args:[o,i[o].data]}):Ut(o,i,n,a)):Nt(o,i,n))}(e.sources,i.sources,o,a);var r=[];e.layers&&e.layers.forEach((function(t){a[t.source]?n.push({command:Ft.removeLayer,args:[t.id]}):r.push(t)})),n=n.concat(o),function(e,i,n){i=i||[];var a,o,r,s,l,c,u,d=(e=e||[]).map(Ot),h=i.map(Ot),p=e.reduce(Pt,{}),m=i.reduce(Pt,{}),b=d.slice(),y=Object.create(null);for(a=0,o=0;a<d.length;a++)m.hasOwnProperty(r=d[a])?o++:(n.push({command:Ft.removeLayer,args:[r]}),b.splice(b.indexOf(r,o),1));for(a=0,o=0;a<h.length;a++)b[b.length-1-a]!==(r=h[h.length-1-a])&&(p.hasOwnProperty(r)?(n.push({command:Ft.removeLayer,args:[r]}),b.splice(b.lastIndexOf(r,b.length-o),1)):o++,n.push({command:Ft.addLayer,args:[m[r],c=b[b.length-a]]}),b.splice(b.length-a,0,r),y[r]=!0);for(a=0;a<h.length;a++)if(s=p[r=h[a]],l=m[r],!y[r]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(u in At(s.layout,l.layout,n,r,null,Ft.setLayoutProperty),At(s.paint,l.paint,n,r,null,Ft.setPaintProperty),t.deepEqual(s.filter,l.filter)||n.push({command:Ft.setFilter,args:[r,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||n.push({command:Ft.setLayerZoomRange,args:[r,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?At(s[u],l[u],n,r,u.slice(6),Ft.setPaintProperty):t.deepEqual(s[u],l[u])||n.push({command:Ft.setLayerProperty,args:[r,u,l[u]]}));for(u in l)l.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&"layout"!==u&&"paint"!==u&&"filter"!==u&&"metadata"!==u&&"minzoom"!==u&&"maxzoom"!==u&&(0===u.indexOf("paint.")?At(s[u],l[u],n,r,u.slice(6),Ft.setPaintProperty):t.deepEqual(s[u],l[u])||n.push({command:Ft.setLayerProperty,args:[r,u,l[u]]}))}else n.push({command:Ft.removeLayer,args:[r]}),c=b[b.lastIndexOf(r)+1],n.push({command:Ft.addLayer,args:[l,c]})}(r,i.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:Ft.setStyle,args:[i]}]}return n}(this.serialize(),e).filter((function(t){return!(t.command in Fe)}));if(0===n.length)return!1;var a=n.filter((function(t){return!(t.command in je)}));if(a.length>0)throw new Error("Unimplemented: "+a.map((function(t){return t.command})).join(", ")+".");return n.forEach((function(t){"setTransition"!==t.command&&i[t.command].apply(i,t.args)})),this.stylesheet=e,!0},i.prototype.addImage=function(e,i){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,i),this._afterImageUpdated(e)},i.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},i.prototype.getImage=function(t){return this.imageManager.getImage(t)},i.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},i.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(e,i,n){var a=this;if(void 0===n&&(n={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,i,null,n))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Bt(e,i,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:a.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+i+'" is using it.')));var n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},i.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},i.prototype.addLayer=function(e,i,n){void 0===n&&(n={}),this._checkLoaded();var a=e.id;if(this.getLayer(a))this.fire(new t.ErrorEvent(new Error('Layer with id "'+a+'" already exists on this map')));else{var o;if("custom"===e.type){if(ke(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(a,e.source),e=t.clone$1(e),e=t.extend(e,{source:a})),this._validate(t.validateStyle.layer,"layers."+a,e,{arrayIndex:-1},n))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:a}}),this._serializedLayers[o.id]=o.serialize()}var r=i?this._order.indexOf(i):this._order.length;if(i&&-1===r)this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(r,0,a),this._layerOrderChanged=!0,this._layers[a]=o,this._removedLayers[a]&&o.source&&"custom"!==o.type){var s=this._removedLayers[a];delete this._removedLayers[a],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},i.prototype.moveLayer=function(e,i){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==i){var n=this._order.indexOf(e);this._order.splice(n,1);var a=i?this._order.indexOf(i):this._order.length;i&&-1===a?this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(a,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(e){this._checkLoaded();var i=this._layers[e];if(i){i.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=i,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],i.onRemove&&i.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(t){return this._layers[t]},i.prototype.hasLayer=function(t){return t in this._layers},i.prototype.setLayerZoomRange=function(e,i,n){this._checkLoaded();var a=this.getLayer(e);a?a.minzoom===i&&a.maxzoom===n||(null!=i&&(a.minzoom=i),null!=n&&(a.maxzoom=n),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(e,i,n){void 0===n&&(n={}),this._checkLoaded();var a=this.getLayer(e);if(a){if(!t.deepEqual(a.filter,i))return null==i?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(t.validateStyle.filter,"layers."+a.id+".filter",i,null,n)||(a.filter=t.clone$1(i),this._updateLayer(a)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},i.prototype.setLayoutProperty=function(e,i,n,a){void 0===a&&(a={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(i),n)||(o.setLayoutProperty(i,n,a),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(e,i){var n=this.getLayer(e);if(n)return n.getLayoutProperty(i);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(e,i,n,a){void 0===a&&(a={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(i),n)||(o.setPaintProperty(i,n,a)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},i.prototype.setFeatureState=function(e,i){this._checkLoaded();var n=e.source,a=e.sourceLayer,o=this.sourceCaches[n];if(void 0!==o){var r=o.getSource().type;"geojson"===r&&a?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==r||a?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(a,e.id,i)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(e,i){this._checkLoaded();var n=e.source,a=this.sourceCaches[n];if(void 0!==a){var o=a.getSource().type,r="vector"===o?e.sourceLayer:void 0;"vector"!==o||r?i&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):a.removeFeatureState(r,e.id,i):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(e){this._checkLoaded();var i=e.source,n=e.sourceLayer,a=this.sourceCaches[i];if(void 0!==a){if("vector"!==a.getSource().type||n)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),a.getFeatureState(n,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},i.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,i=function(t){return"fill-extrusion"===e._layers[t].type},n={},a=[],o=this._order.length-1;o>=0;o--){var r=this._order[o];if(i(r)){n[r]=o;for(var s=0,l=t;s<l.length;s+=1){var c=l[s][r];if(c)for(var u=0,d=c;u<d.length;u+=1)a.push(d[u])}}}a.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var h=[],p=this._order.length-1;p>=0;p--){var m=this._order[p];if(i(m))for(var b=a.length-1;b>=0;b--){var y=a[b].feature;if(n[y.layer.id]<p)break;h.push(y),a.pop()}else for(var f=0,g=t;f<g.length;f+=1){var I=g[f][m];if(I)for(var v=0,x=I;v<x.length;v+=1)h.push(x[v].feature)}}return h},i.prototype.queryRenderedFeatures=function(e,i,n){i&&i.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var a={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,r=i.layers;o<r.length;o+=1){var s=r[o],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];a[l.source]=!0}}var c=[];for(var u in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!a[u]||c.push(J(this.sourceCaches[u],this._layers,this._serializedLayers,e,i,n));return this.placement&&c.push(function(t,e,i,n,a,o,r){for(var s={},l=o.queryRenderedSymbols(n),c=[],u=0,d=Object.keys(l).map(Number);u<d.length;u+=1)c.push(r[d[u]]);c.sort(H);for(var h=function(){var i=m[p],n=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],e,i.bucketIndex,i.sourceLayerIndex,a.filter,a.layers,a.availableImages,t);for(var o in n){var r=s[o]=s[o]||[],c=n[o];c.sort((function(t,e){var n=i.featureSortOrder;if(n){var a=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-a}return e.featureIndex-t.featureIndex}));for(var u=0,d=c;u<d.length;u+=1)r.push(d[u])}},p=0,m=c;p<m.length;p+=1)h();var b=function(e){s[e].forEach((function(n){var a=n.feature,o=i[t[e].source].getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=o}))};for(var y in s)b(y);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)},i.prototype.querySourceFeatures=function(e,i){i&&i.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var n=this.sourceCaches[e];return n?function(t,e){for(var i=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),n=[],a={},o=0;o<i.length;o++){var r=i[o],s=r.tileID.canonical.key;a[s]||(a[s]=!0,r.querySourceFeatures(n,e))}return n}(n,i):[]},i.prototype.addSourceType=function(t,e,n){return i.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(i.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(e,i){void 0===i&&(i={}),this._checkLoaded();var n=this.light.getLight(),a=!1;for(var o in e)if(!t.deepEqual(e[o],n[o])){a=!0;break}if(a){var r={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,i),this.light.updateTransitions(r)}},i.prototype._validate=function(e,i,n,a,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&ke(this,e.call(t.validateStyle,t.extend({key:i,style:this.serialize(),value:n,styleSpec:t.styleSpec},a)))},i.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},i.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},i.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},i.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},i.prototype._updatePlacement=function(e,i,n,a,o){void 0===o&&(o=!1);for(var r=!1,s=!1,l={},c=0,u=this._order;c<u.length;c+=1){var d=this._layers[u[c]];if("symbol"===d.type){if(!l[d.source]){var h=this.sourceCaches[d.source];l[d.source]=h.getRenderableIds(!0).map((function(t){return h.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var p=this.crossTileSymbolIndex.addLayer(d,l[d.source],e.center.lng);r=r||p}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===n)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new ze(e,this._order,o,i,n,a,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),r&&this.pauseablePlacement.placement.setStale()),s||r)for(var m=0,b=this._order;m<b.length;m+=1){var y=this._layers[b[m]];"symbol"===y.type&&this.placement.updateLayerOpacities(y,l[y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},i.prototype.getImages=function(t,e,i){this.imageManager.getImages(e.icons,i),this._updateTilesForChangedImages();var n=this.sourceCaches[e.source];n&&n.setDependencies(e.tileID.key,e.type,e.icons)},i.prototype.getGlyphs=function(t,e,i){this.glyphManager.getGlyphs(e.stacks,i)},i.prototype.getResource=function(e,i,n){return t.makeRequest(i,n)},i}(t.Evented);Te.getSourceType=function(t){return C[t]},Te.setSourceType=function(t,e){C[t]=e},Te.registerForPluginStateChange=t.registerForPluginStateChange;var Ue=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ee=fi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ae=fi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Oe=fi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Pe=fi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ke=fi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),De=fi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Qe=fi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),qe=fi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$e=fi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ti=fi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ei=fi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ii=fi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ni=fi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ai=fi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),oi=fi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ri=fi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),si=fi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),li=fi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ci=fi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ui=fi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),di=fi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),hi=fi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),pi=fi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),mi=fi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),bi=fi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),yi=fi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function fi(t,e){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=e.match(/attribute ([\w]+) ([\w]+)/g),a=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),r=o?o.concat(a):a,s={};return{fragmentSource:t=t.replace(i,(function(t,e,i,n,a){return s[a]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+i+" "+n+" "+a+";\n#else\nuniform "+i+" "+n+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n"})),vertexSource:e=e.replace(i,(function(t,e,i,n,a){var o="float"===n?"vec2":"vec4",r=a.match(/color/)?"color":o;return s[a]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+i+" "+o+" a_"+a+";\nvarying "+i+" "+n+" "+a+";\n#else\nuniform "+i+" "+n+" u_"+a+";\n#endif\n":"vec4"===r?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+r+"(a_"+a+", u_"+a+"_t);\n#else\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+i+" "+o+" a_"+a+";\n#else\nuniform "+i+" "+n+" u_"+a+";\n#endif\n":"vec4"===r?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+n+" "+a+" = a_"+a+";\n#else\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+n+" "+a+" = unpack_mix_"+r+"(a_"+a+", u_"+a+"_t);\n#else\n    "+i+" "+n+" "+a+" = u_"+a+";\n#endif\n"})),staticAttributes:n,staticUniforms:r}}var gi=Object.freeze({__proto__:null,prelude:Ee,background:Ae,backgroundPattern:Oe,circle:Pe,clippingMask:Ke,heatmap:De,heatmapTexture:Qe,collisionBox:qe,collisionCircle:$e,debug:ti,fill:ei,fillOutline:ii,fillOutlinePattern:ni,fillPattern:ai,fillExtrusion:oi,fillExtrusionPattern:ri,hillshadePrepare:si,hillshade:li,line:ci,lineGradient:ui,linePattern:di,lineSDF:hi,raster:pi,symbolIcon:mi,symbolSDF:bi,symbolTextAndIcon:yi}),Ii=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function vi(t){for(var e=[],i=0;i<t.length;i++)if(null!==t[i]){var n=t[i].split(" ");e.push(n.pop())}return e}Ii.prototype.bind=function(t,e,i,n,a,o,r,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==n.length,c=0;!l&&c<n.length;c++)this.boundPaintVertexBuffers[c]!==n[c]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===a&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===r&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),r&&r.bind(),a&&a.dynamicDraw&&a.bind(),s&&s.bind()):this.freshBind(e,i,n,a,o,r,s)},Ii.prototype.freshBind=function(t,e,i,n,a,o,r){var s,l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=n,this.boundVertexOffset=a,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=r;else{s=c.currentNumAttributes||0;for(var d=l;d<s;d++)u.disableVertexAttribArray(d)}e.enableAttributes(u,t);for(var h=0,p=i;h<p.length;h+=1)p[h].enableAttributes(u,t);o&&o.enableAttributes(u,t),r&&r.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,a);for(var m=0,b=i;m<b.length;m+=1){var y=b[m];y.bind(),y.setVertexAttribPointers(u,t,a)}o&&(o.bind(),o.setVertexAttribPointers(u,t,a)),n&&n.bind(),r&&(r.bind(),r.setVertexAttribPointers(u,t,a)),c.currentNumAttributes=l},Ii.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xi=function(t,e,i,n,a,o){var r=t.gl;this.program=r.createProgram();for(var s=vi(i.staticAttributes),l=n?n.getBinderAttributes():[],c=s.concat(l),u=i.staticUniforms?vi(i.staticUniforms):[],d=n?n.getBinderUniforms():[],h=[],p=0,m=u.concat(d);p<m.length;p+=1){var b=m[p];h.indexOf(b)<0&&h.push(b)}var y=n?n.defines():[];o&&y.push("#define OVERDRAW_INSPECTOR;");var f=y.concat(Ee.fragmentSource,i.fragmentSource).join("\n"),g=y.concat(Ee.vertexSource,i.vertexSource).join("\n"),I=r.createShader(r.FRAGMENT_SHADER);if(r.isContextLost())this.failedToCreate=!0;else{r.shaderSource(I,f),r.compileShader(I),r.attachShader(this.program,I);var v=r.createShader(r.VERTEX_SHADER);if(r.isContextLost())this.failedToCreate=!0;else{r.shaderSource(v,g),r.compileShader(v),r.attachShader(this.program,v),this.attributes={};var x={};this.numAttributes=c.length;for(var Z=0;Z<this.numAttributes;Z++)c[Z]&&(r.bindAttribLocation(this.program,Z,c[Z]),this.attributes[c[Z]]=Z);r.linkProgram(this.program),r.deleteShader(v),r.deleteShader(I);for(var G=0;G<h.length;G++){var w=h[G];if(w&&!x[w]){var W=r.getUniformLocation(this.program,w);W&&(x[w]=W)}}this.fixedUniforms=a(t,x),this.binderUniforms=n?n.getUniforms(t,x):[]}}};function Zi(t,e,i){var n=1/he(i,1,e.transform.tileZoom),a=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,e.transform.tileZoom)/a,r=o*(i.tileID.canonical.x+i.tileID.wrap*a),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[n,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[r>>16,s>>16],u_pixel_coord_lower:[65535&r,65535&s]}}xi.prototype.draw=function(t,e,i,n,a,o,r,s,l,c,u,d,h,p,m,b){var y,f=t.gl;if(!this.failedToCreate){for(var g in t.program.set(this.program),t.setDepthMode(i),t.setStencilMode(n),t.setColorMode(a),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[g].set(r[g]);p&&p.setUniforms(t,this.binderUniforms,d,{zoom:h});for(var I=(y={},y[f.LINES]=2,y[f.TRIANGLES]=3,y[f.LINE_STRIP]=1,y)[e],v=0,x=u.get();v<x.length;v+=1){var Z=x[v],G=Z.vaos||(Z.vaos={});(G[s]||(G[s]=new Ii)).bind(t,this,l,p?p.getPaintVertexBuffers():[],c,Z.vertexOffset,m,b),f.drawElements(e,Z.primitiveLength*I,f.UNSIGNED_SHORT,Z.primitiveOffset*I*2)}}};var Gi=function(e,i,n,a){var o=i.style.light,r=o.properties.get("position"),s=[r.x,r.y,r.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(l,-i.transform.angle),t.transformMat3(s,s,l);var c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+n,u_opacity:a}},wi=function(e,i,n,a,o,r,s){return t.extend(Gi(e,i,n,a),Zi(r,i,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},Wi=function(t){return{u_matrix:t}},Xi=function(e,i,n,a){return t.extend(Wi(e),Zi(n,i,a))},_i=function(t,e){return{u_matrix:t,u_world:e}},Vi=function(e,i,n,a,o){return t.extend(Xi(e,i,n,a),{u_world:o})},Si=function(e,i,n,a){var o,r,s=e.transform;if("map"===a.paint.get("circle-pitch-alignment")){var l=he(n,1,s.zoom);o=!0,r=[l,l]}else o=!1,r=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===a.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(i.posMatrix,n,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:r}},Bi=function(t,e,i){var n=he(i,1,e.zoom),a=Math.pow(2,e.zoom-i.tileID.overscaledZ),o=i.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[e.pixelsToGLUnits[0]/(n*a),e.pixelsToGLUnits[1]/(n*a)],u_overscale_factor:o}},Li=function(t,e,i){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},Yi=function(t,e,i){return void 0===i&&(i=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:i}},zi=function(t){return{u_matrix:t}},Ri=function(t,e,i,n){return{u_matrix:t,u_extrude_scale:he(e,1,i),u_intensity:n}},Ci=function(e,i,n){var a=e.transform;return{u_matrix:ji(e,i,n),u_ratio:1/he(i,1,a.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Mi=function(e,i,n,a){return t.extend(Ci(e,i,n),{u_image:0,u_image_height:a})},Ji=function(e,i,n,a){var o=e.transform,r=ki(i,o);return{u_matrix:ji(e,i,n),u_texsize:i.imageAtlasTexture.size,u_ratio:1/he(i,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[r,a.fromScale,a.toScale],u_fade:a.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Hi=function(e,i,n,a,o){var r=e.lineAtlas,s=ki(i,e.transform),l="round"===n.layout.get("line-cap"),c=r.getDash(a.from,l),u=r.getDash(a.to,l),d=c.width*o.fromScale,h=u.width*o.toScale;return t.extend(Ci(e,i,n),{u_patternscale_a:[s/d,-c.height/2],u_patternscale_b:[s/h,-u.height/2],u_sdfgamma:r.width/(256*Math.min(d,h)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:u.y,u_mix:o.t})};function ki(t,e){return 1/he(t,1,e.tileZoom)}function ji(t,e,i){return t.translatePosMatrix(e.tileID.posMatrix,e,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var Fi=function(t,e,i,n,a){return{u_matrix:t,u_tl_parent:e,u_scale_parent:i,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(r=a.paint.get("raster-saturation"),r>0?1-1/(1.001-r):-r),u_contrast_factor:(o=a.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Ni(a.paint.get("raster-hue-rotate"))};var o,r};function Ni(t){t*=Math.PI/180;var e=Math.sin(t),i=Math.cos(t);return[(2*i+1)/3,(-Math.sqrt(3)*e-i+1)/3,(Math.sqrt(3)*e-i+1)/3]}var Ti,Ui=function(t,e,i,n,a,o,r,s,l,c){var u=a.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:r,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:c,u_texture:0}},Ei=function(e,i,n,a,o,r,s,l,c,u,d){var h=o.transform;return t.extend(Ui(e,i,n,a,o,r,s,l,c,u),{u_gamma_scale:a?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+d})},Ai=function(e,i,n,a,o,r,s,l,c,u){return t.extend(Ei(e,i,n,a,o,r,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1})},Oi=function(t,e,i){return{u_matrix:t,u_opacity:e,u_color:i}},Pi=function(e,i,n,a,o,r){return t.extend(function(t,e,i,n){var a=i.imageManager.getPattern(t.from.toString()),o=i.imageManager.getPattern(t.to.toString()),r=i.imageManager.getPixelSize(),s=r.width,l=r.height,c=Math.pow(2,n.tileID.overscaledZ),u=n.tileSize*Math.pow(2,i.transform.tileZoom)/c,d=u*(n.tileID.canonical.x+n.tileID.wrap*c),h=u*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:a.tl,u_pattern_br_a:a.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:a.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/he(n,1,i.transform.tileZoom),u_pixel_coord_upper:[d>>16,h>>16],u_pixel_coord_lower:[65535&d,65535&h]}}(a,r,n,o),{u_matrix:e,u_opacity:i})},Ki={fillExtrusion:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fillExtrusionPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_lightpos:new t.Uniform3f(e,i.u_lightpos),u_lightintensity:new t.Uniform1f(e,i.u_lightintensity),u_lightcolor:new t.Uniform3f(e,i.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,i.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,i.u_height_factor),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade),u_opacity:new t.Uniform1f(e,i.u_opacity)}},fill:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},fillPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},fillOutline:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world)}},fillOutlinePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_texsize:new t.Uniform2f(e,i.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},circle:function(e,i){return{u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,i.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},collisionBox:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,i.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,i.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,i.u_overscale_factor)}},collisionCircle:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,i.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,i.u_viewport_size)}},debug:function(e,i){return{u_color:new t.UniformColor(e,i.u_color),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_overlay:new t.Uniform1i(e,i.u_overlay),u_overlay_scale:new t.Uniform1f(e,i.u_overlay_scale)}},clippingMask:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmap:function(e,i){return{u_extrude_scale:new t.Uniform1f(e,i.u_extrude_scale),u_intensity:new t.Uniform1f(e,i.u_intensity),u_matrix:new t.UniformMatrix4f(e,i.u_matrix)}},heatmapTexture:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_world:new t.Uniform2f(e,i.u_world),u_image:new t.Uniform1i(e,i.u_image),u_color_ramp:new t.Uniform1i(e,i.u_color_ramp),u_opacity:new t.Uniform1f(e,i.u_opacity)}},hillshade:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_latrange:new t.Uniform2f(e,i.u_latrange),u_light:new t.Uniform2f(e,i.u_light),u_shadow:new t.UniformColor(e,i.u_shadow),u_highlight:new t.UniformColor(e,i.u_highlight),u_accent:new t.UniformColor(e,i.u_accent)}},hillshadePrepare:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_image:new t.Uniform1i(e,i.u_image),u_dimension:new t.Uniform2f(e,i.u_dimension),u_zoom:new t.Uniform1f(e,i.u_zoom),u_unpack:new t.Uniform4f(e,i.u_unpack)}},line:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels)}},lineGradient:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_image:new t.Uniform1i(e,i.u_image),u_image_height:new t.Uniform1f(e,i.u_image_height)}},linePattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_texsize:new t.Uniform2f(e,i.u_texsize),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_image:new t.Uniform1i(e,i.u_image),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_scale:new t.Uniform3f(e,i.u_scale),u_fade:new t.Uniform1f(e,i.u_fade)}},lineSDF:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_ratio:new t.Uniform1f(e,i.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,i.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,i.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,i.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,i.u_sdfgamma),u_image:new t.Uniform1i(e,i.u_image),u_tex_y_a:new t.Uniform1f(e,i.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,i.u_tex_y_b),u_mix:new t.Uniform1f(e,i.u_mix)}},raster:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_tl_parent:new t.Uniform2f(e,i.u_tl_parent),u_scale_parent:new t.Uniform1f(e,i.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,i.u_buffer_scale),u_fade_t:new t.Uniform1f(e,i.u_fade_t),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image0:new t.Uniform1i(e,i.u_image0),u_image1:new t.Uniform1i(e,i.u_image1),u_brightness_low:new t.Uniform1f(e,i.u_brightness_low),u_brightness_high:new t.Uniform1f(e,i.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,i.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,i.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,i.u_spin_weights)}},symbolIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture)}},symbolSDF:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texture:new t.Uniform1i(e,i.u_texture),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},symbolTextAndIcon:function(e,i){return{u_is_size_zoom_constant:new t.Uniform1i(e,i.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,i.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,i.u_size_t),u_size:new t.Uniform1f(e,i.u_size),u_camera_to_center_distance:new t.Uniform1f(e,i.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,i.u_pitch),u_rotate_symbol:new t.Uniform1i(e,i.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,i.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,i.u_fade_change),u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,i.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,i.u_coord_matrix),u_is_text:new t.Uniform1i(e,i.u_is_text),u_pitch_with_map:new t.Uniform1i(e,i.u_pitch_with_map),u_texsize:new t.Uniform2f(e,i.u_texsize),u_texsize_icon:new t.Uniform2f(e,i.u_texsize_icon),u_texture:new t.Uniform1i(e,i.u_texture),u_texture_icon:new t.Uniform1i(e,i.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,i.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,i.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,i.u_is_halo)}},background:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_color:new t.UniformColor(e,i.u_color)}},backgroundPattern:function(e,i){return{u_matrix:new t.UniformMatrix4f(e,i.u_matrix),u_opacity:new t.Uniform1f(e,i.u_opacity),u_image:new t.Uniform1i(e,i.u_image),u_pattern_tl_a:new t.Uniform2f(e,i.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,i.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,i.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,i.u_pattern_br_b),u_texsize:new t.Uniform2f(e,i.u_texsize),u_mix:new t.Uniform1f(e,i.u_mix),u_pattern_size_a:new t.Uniform2f(e,i.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,i.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,i.u_scale_a),u_scale_b:new t.Uniform1f(e,i.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,i.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,i.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,i.u_tile_units_to_pixels)}}};function Di(e,i,n,a,o,r,s){for(var l=e.context,c=l.gl,u=e.useProgram("collisionBox"),d=[],h=0,p=0,m=0;m<a.length;m++){var b=a[m],y=i.getTile(b),f=y.getBucket(n);if(f){var g=b.posMatrix;0===o[0]&&0===o[1]||(g=e.translatePosMatrix(b.posMatrix,y,o,r));var I=s?f.textCollisionBox:f.iconCollisionBox,v=f.collisionCircleArray;if(v.length>0){var x=t.create(),Z=g;t.mul(x,f.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(x,x,f.placementViewportMatrix),d.push({circleArray:v,circleOffset:p,transform:Z,invTransform:x}),p=h+=v.length/4}I&&u.draw(l,c.LINES,Wt.disabled,Xt.disabled,e.colorModeForRenderPass(),Vt.disabled,Bi(g,e.transform,y),n.id,I.layoutVertexBuffer,I.indexBuffer,I.segments,null,e.transform.zoom,null,null,I.collisionVertexBuffer)}}if(s&&d.length){var G=e.useProgram("collisionCircle"),w=new t.StructArrayLayout2f1f2i16;w.resize(4*h),w._trim();for(var W=0,X=0,_=d;X<_.length;X+=1)for(var V=_[X],S=0;S<V.circleArray.length/4;S++){var B=4*S,L=V.circleArray[B+0],Y=V.circleArray[B+1],z=V.circleArray[B+2],R=V.circleArray[B+3];w.emplace(W++,L,Y,z,R,0),w.emplace(W++,L,Y,z,R,1),w.emplace(W++,L,Y,z,R,2),w.emplace(W++,L,Y,z,R,3)}(!Ti||Ti.length<2*h)&&(Ti=function(e){var i=2*e,n=new t.StructArrayLayout3ui6;n.resize(i),n._trim();for(var a=0;a<i;a++){var o=6*a;n.uint16[o+0]=4*a+0,n.uint16[o+1]=4*a+1,n.uint16[o+2]=4*a+2,n.uint16[o+3]=4*a+2,n.uint16[o+4]=4*a+3,n.uint16[o+5]=4*a+0}return n}(h));for(var C=l.createIndexBuffer(Ti,!0),M=l.createVertexBuffer(w,t.collisionCircleLayout.members,!0),J=0,H=d;J<H.length;J+=1){var k=H[J],j=Li(k.transform,k.invTransform,e.transform);G.draw(l,c.TRIANGLES,Wt.disabled,Xt.disabled,e.colorModeForRenderPass(),Vt.disabled,j,n.id,M,C,t.SegmentVector.simpleSegment(0,2*k.circleOffset,k.circleArray.length,k.circleArray.length/2),null,e.transform.zoom,null,null,null)}M.destroy(),C.destroy()}}var Qi=t.identity(new Float32Array(16));function qi(e,i,n,a,o,r){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*i,c=-(s.verticalAlign-.5)*n,u=t.evaluateVariableOffset(e,a);return new t.Point((l/o+u[0])*r,(c/o+u[1])*r)}function $i(e,i,n,a,o,r,s,l,c,u,d){var h=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,b={};p.clear();for(var y=0;y<h.length;y++){var f=h.get(y),g=f.hidden||!f.crossTileID||e.allowVerticalPlacement&&!f.placedOrientation?null:a[f.crossTileID];if(g){var I=new t.Point(f.anchorX,f.anchorY),v=$t(I,n?l:s),x=te(r.cameraToCenterDistance,v.signedDistanceFromCamera),Z=o.evaluateSizeForFeature(e.textSizeData,u,f)*x/t.ONE_EM;n&&(Z*=e.tilePixelRatio/c);for(var G=qi(g.anchor,g.width,g.height,g.textOffset,g.textBoxScale,Z),w=n?$t(I.add(G),s).point:v.point.add(i?G.rotate(-r.angle):G),W=e.allowVerticalPlacement&&f.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,X=0;X<f.numGlyphs;X++)t.addDynamicAttributes(p,w,W);d&&f.associatedIconIndex>=0&&(b[f.associatedIconIndex]={shiftedAnchor:w,angle:W})}else ce(f.numGlyphs,p)}if(d){m.clear();for(var _=e.icon.placedSymbolArray,V=0;V<_.length;V++){var S=_.get(V);if(S.hidden)ce(S.numGlyphs,m);else{var B=b[V];if(B)for(var L=0;L<S.numGlyphs;L++)t.addDynamicAttributes(m,B.shiftedAnchor,B.angle);else ce(S.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function tn(t,e,i){return i.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function en(e,i,n,a,o,r,s,l,c,u,d,h){for(var p=e.context,m=p.gl,b=e.transform,y="map"===l,f="map"===c,g=y&&"point"!==n.layout.get("symbol-placement"),I=y&&!f&&!g,v=void 0!==n.layout.get("symbol-sort-key").constantOr(1),x=!1,Z=e.depthModeForSublayer(0,Wt.ReadOnly),G=n.layout.get("text-variable-anchor"),w=[],W=0,X=a;W<X.length;W+=1){var _=X[W],V=i.getTile(_),S=V.getBucket(n);if(S){var B=o?S.text:S.icon;if(B&&B.segments.get().length){var L=B.programConfigurations.get(n.id),Y=o||S.sdfIcons,z=o?S.textSizeData:S.iconSizeData,R=f||0!==b.pitch,C=e.useProgram(tn(Y,o,S),L),M=t.evaluateSizeForZoom(z,b.zoom),J=void 0,H=[0,0],k=void 0,j=void 0,F=null,N=void 0;if(o)k=V.glyphAtlasTexture,j=m.LINEAR,J=V.glyphAtlasTexture.size,S.iconsInText&&(H=V.imageAtlasTexture.size,F=V.imageAtlasTexture,N=R||e.options.rotating||e.options.zooming||"composite"===z.kind||"camera"===z.kind?m.LINEAR:m.NEAREST);else{var T=1!==n.layout.get("icon-size").constantOr(0)||S.iconsNeedLinear;k=V.imageAtlasTexture,j=Y||e.options.rotating||e.options.zooming||T||R?m.LINEAR:m.NEAREST,J=V.imageAtlasTexture.size}var U=he(V,1,e.transform.zoom),E=Qt(_.posMatrix,f,y,e.transform,U),A=qt(_.posMatrix,f,y,e.transform,U),O=G&&S.hasTextData(),P="none"!==n.layout.get("icon-text-fit")&&O&&S.hasIconData();g&&ie(S,_.posMatrix,e,o,E,A,f,u);var K=e.translatePosMatrix(_.posMatrix,V,r,s),D=g||o&&G||P?Qi:E,Q=e.translatePosMatrix(A,V,r,s,!0),q=Y&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),$={program:C,buffers:B,uniformValues:Y?S.iconsInText?Ai(z.kind,M,I,f,e,K,D,Q,J,H):Ei(z.kind,M,I,f,e,K,D,Q,o,J,!0):Ui(z.kind,M,I,f,e,K,D,Q,o,J),atlasTexture:k,atlasTextureIcon:F,atlasInterpolation:j,atlasInterpolationIcon:N,isSDF:Y,hasHalo:q};if(v&&S.canOverlap){x=!0;for(var tt=0,et=B.segments.get();tt<et.length;tt+=1){var it=et[tt];w.push({segments:new t.SegmentVector([it]),sortKey:it.sortKey,state:$})}}else w.push({segments:B.segments,sortKey:0,state:$})}}}x&&w.sort((function(t,e){return t.sortKey-e.sortKey}));for(var nt=0,at=w;nt<at.length;nt+=1){var ot=at[nt],rt=ot.state;if(p.activeTexture.set(m.TEXTURE0),rt.atlasTexture.bind(rt.atlasInterpolation,m.CLAMP_TO_EDGE),rt.atlasTextureIcon&&(p.activeTexture.set(m.TEXTURE1),rt.atlasTextureIcon&&rt.atlasTextureIcon.bind(rt.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),rt.isSDF){var st=rt.uniformValues;rt.hasHalo&&(st.u_is_halo=1,nn(rt.buffers,ot.segments,n,e,rt.program,Z,d,h,st)),st.u_is_halo=0}nn(rt.buffers,ot.segments,n,e,rt.program,Z,d,h,rt.uniformValues)}}function nn(t,e,i,n,a,o,r,s,l){var c=n.context;a.draw(c,c.gl.TRIANGLES,o,r,s,Vt.disabled,l,i.id,t.layoutVertexBuffer,t.indexBuffer,e,i.paint,n.transform.zoom,t.programConfigurations.get(i.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function an(t,e,i,n,a,o,r){var s,l,c,u,d,h=t.context.gl,p=i.paint.get("fill-pattern"),m=p&&p.constantOr(1),b=i.getCrossfadeParameters();r?(l=m&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(l=m?"fillPattern":"fill",s=h.TRIANGLES);for(var y=0,f=n;y<f.length;y+=1){var g=f[y],I=e.getTile(g);if(!m||I.patternsLoaded()){var v=I.getBucket(i);if(v){var x=v.programConfigurations.get(i.id),Z=t.useProgram(l,x);m&&(t.context.activeTexture.set(h.TEXTURE0),I.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePaintBuffers(b));var G=p.constantOr(null);if(G&&I.imageAtlas){var w=I.imageAtlas,W=w.patternPositions[G.to.toString()],X=w.patternPositions[G.from.toString()];W&&X&&x.setConstantPatternPositions(W,X)}var _=t.translatePosMatrix(g.posMatrix,I,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(r){u=v.indexBuffer2,d=v.segments2;var V=[h.drawingBufferWidth,h.drawingBufferHeight];c="fillOutlinePattern"===l&&m?Vi(_,t,b,I,V):_i(_,V)}else u=v.indexBuffer,d=v.segments,c=m?Xi(_,t,b,I):Wi(_);Z.draw(t.context,s,a,t.stencilModeForClipping(g),o,Vt.disabled,c,i.id,v.layoutVertexBuffer,u,d,i.paint,t.transform.zoom,x)}}}}function on(t,e,i,n,a,o,r){for(var s=t.context,l=s.gl,c=i.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),d=i.getCrossfadeParameters(),h=i.paint.get("fill-extrusion-opacity"),p=0,m=n;p<m.length;p+=1){var b=m[p],y=e.getTile(b),f=y.getBucket(i);if(f){var g=f.programConfigurations.get(i.id),I=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",g);u&&(t.context.activeTexture.set(l.TEXTURE0),y.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePaintBuffers(d));var v=c.constantOr(null);if(v&&y.imageAtlas){var x=y.imageAtlas,Z=x.patternPositions[v.to.toString()],G=x.patternPositions[v.from.toString()];Z&&G&&g.setConstantPatternPositions(Z,G)}var w=t.translatePosMatrix(b.posMatrix,y,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),W=i.paint.get("fill-extrusion-vertical-gradient"),X=u?wi(w,t,W,h,b,d,y):Gi(w,t,W,h);I.draw(s,s.gl.TRIANGLES,a,o,r,Vt.backCCW,X,i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,i.paint,t.transform.zoom,g)}}}function rn(e,i,n,a,o,r){var s=e.context,l=s.gl,c=i.fbo;if(c){var u=e.useProgram("hillshade");s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get());var d=function(e,i,n){var a=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),r=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l,c,u,d=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(i.tileID.toUnwrapped(),d),u_image:0,u_latrange:(l=i.tileID,c=Math.pow(2,l.canonical.z),u=l.canonical.y,[new t.MercatorCoordinate(0,u/c).toLngLat().lat,new t.MercatorCoordinate(0,(u+1)/c).toLngLat().lat]),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:a,u_highlight:o,u_accent:r}}(e,i,n);u.draw(s,l.TRIANGLES,a,o,r,Vt.disabled,d,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function sn(e,i,n,a,o,r){var s=e.context,l=s.gl,c=i.dem;if(c&&c.data){var u=c.dim,d=c.stride,h=c.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||e.getTileTexture(d),i.demTexture){var p=i.demTexture;p.update(h,{premultiply:!1}),p.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else i.demTexture=new t.Texture(s,h,l.RGBA,{premultiply:!1}),i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var m=i.fbo;if(!m){var b=new t.Texture(s,{width:u,height:u,data:null},l.RGBA);b.bind(l.LINEAR,l.CLAMP_TO_EDGE),(m=i.fbo=s.createFramebuffer(u,u,!0)).colorAttachment.set(b.texture)}s.bindFramebuffer.set(m.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,a,o,r,Vt.disabled,function(e,i){var n=i.stride,a=t.create();return t.ortho(a,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(a,a,[0,-t.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:i.getUnpackVector()}}(i.tileID,c),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function ln(e,i,n,a,o){var r=a.paint.get("raster-fade-duration");if(r>0){var s=t.browser.now(),l=(s-e.timeAdded)/r,c=i?(s-i.timeAdded)/r:-1,u=n.getSource(),d=o.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-d)>Math.abs(e.tileID.overscaledZ-d),p=h&&e.refreshedUponExpiration?1:t.clamp(h?l:1-c,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),i?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var cn=new t.Color(1,0,0,1),un=new t.Color(0,1,0,1),dn=new t.Color(0,0,1,1),hn=new t.Color(1,0,1,1),pn=new t.Color(0,1,1,1);function mn(t,e,i,n){yn(t,0,e+i/2,t.transform.width,i,n)}function bn(t,e,i,n){yn(t,e-i/2,0,i,t.transform.height,n)}function yn(e,i,n,a,o,r){var s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*t.browser.devicePixelRatio,n*t.browser.devicePixelRatio,a*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:r}),l.disable(l.SCISSOR_TEST)}function fn(e,i,n){var a=e.context,o=a.gl,r=n.posMatrix,s=e.useProgram("debug"),l=Wt.disabled,c=Xt.disabled,u=e.colorModeForRenderPass();a.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(a,o.LINE_STRIP,l,c,u,Vt.disabled,Yi(r,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var d=i.getTileByID(n.key).latestRawTileData,h=Math.floor((d&&d.byteLength||0)/1024),p=i.getTile(n).tileSize,m=512/Math.min(p,512)*(n.overscaledZ/e.transform.zoom)*.5,b=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(b+=" => "+n.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var i=t.debugOverlayCanvas,n=t.context.gl,a=t.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,i.width,i.height),a.shadowColor="white",a.shadowBlur=2,a.lineWidth=1.5,a.strokeStyle="white",a.textBaseline="top",a.font="bold 36px Open Sans, sans-serif",a.fillText(e,5,5),a.strokeText(e,5,5),t.debugOverlayTexture.update(i),t.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,b+" "+h+"kb"),s.draw(a,o.TRIANGLES,l,c,_t.alphaBlended,Vt.disabled,Yi(r,t.Color.transparent,m),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var gn={symbol:function(e,i,n,a,o){if("translucent"===e.renderPass){var r=Xt.disabled,s=e.colorModeForRenderPass();n.layout.get("text-variable-anchor")&&function(e,i,n,a,o,r,s){for(var l=i.transform,c="map"===o,u="map"===r,d=0,h=e;d<h.length;d+=1){var p=h[d],m=a.getTile(p),b=m.getBucket(n);if(b&&b.text&&b.text.segments.get().length){var y=t.evaluateSizeForZoom(b.textSizeData,l.zoom),f=he(m,1,i.transform.zoom),g=Qt(p.posMatrix,u,c,i.transform,f),I="none"!==n.layout.get("icon-text-fit")&&b.hasIconData();if(y){var v=Math.pow(2,l.zoom-m.tileID.overscaledZ);$i(b,c,u,s,t.symbolSize,l,g,p.posMatrix,v,y,I)}}}}(a,e,n,i,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),o),0!==n.paint.get("icon-opacity").constantOr(1)&&en(e,i,n,a,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),r,s),0!==n.paint.get("text-opacity").constantOr(1)&&en(e,i,n,a,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),r,s),i.map.showCollisionBoxes&&(Di(e,i,n,a,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),!0),Di(e,i,n,a,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),!1))}},circle:function(e,i,n,a){if("translucent"===e.renderPass){var o=n.paint.get("circle-opacity"),r=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=void 0!==n.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==r.constantOr(1)&&0!==s.constantOr(1)){for(var c=e.context,u=c.gl,d=e.depthModeForSublayer(0,Wt.ReadOnly),h=Xt.disabled,p=e.colorModeForRenderPass(),m=[],b=0;b<a.length;b++){var y=a[b],f=i.getTile(y),g=f.getBucket(n);if(g){var I=g.programConfigurations.get(n.id),v={programConfiguration:I,program:e.useProgram("circle",I),layoutVertexBuffer:g.layoutVertexBuffer,indexBuffer:g.indexBuffer,uniformValues:Si(e,y,f,n)};if(l)for(var x=0,Z=g.segments.get();x<Z.length;x+=1){var G=Z[x];m.push({segments:new t.SegmentVector([G]),sortKey:G.sortKey,state:v})}else m.push({segments:g.segments,sortKey:0,state:v})}}l&&m.sort((function(t,e){return t.sortKey-e.sortKey}));for(var w=0,W=m;w<W.length;w+=1){var X=W[w],_=X.state;_.program.draw(c,u.TRIANGLES,d,h,p,Vt.disabled,_.uniformValues,n.id,_.layoutVertexBuffer,_.indexBuffer,X.segments,n.paint,e.transform.zoom,_.programConfiguration)}}}},heatmap:function(e,i,n,a){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,r=o.gl,s=Xt.disabled,l=new _t([r.ONE,r.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,i){var n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var a=i.heatmapFbo;if(a)n.bindTexture(n.TEXTURE_2D,a.colorAttachment.get()),t.bindFramebuffer.set(a.framebuffer);else{var o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),a=i.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,i,n){var a=t.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,e.width/4,e.height/4,0,a.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),n.colorAttachment.set(i)}(t,e,o,a)}}(o,e,n),o.clear({color:t.Color.transparent});for(var c=0;c<a.length;c++){var u=a[c];if(!i.hasRenderableParent(u)){var d=i.getTile(u),h=d.getBucket(n);if(h){var p=h.programConfigurations.get(n.id);e.useProgram("heatmap",p).draw(o,r.TRIANGLES,Wt.disabled,s,l,Vt.disabled,Ri(u.posMatrix,d,e.transform.zoom,n.paint.get("heatmap-intensity")),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,n.paint,e.transform.zoom,p)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,i){var n=e.context,a=n.gl,o=i.heatmapFbo;if(o){n.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(a.TEXTURE1);var r=i.colorRampTexture;r||(r=i.colorRampTexture=new t.Texture(n,i.colorRamp,a.RGBA)),r.bind(a.LINEAR,a.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,a.TRIANGLES,Wt.disabled,Xt.disabled,e.colorModeForRenderPass(),Vt.disabled,function(e,i,n,a){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var r=e.context.gl;return{u_matrix:o,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(e,i),i.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,i.paint,e.transform.zoom)}}(e,n))},line:function(e,i,n,a){if("translucent"===e.renderPass){var o=n.paint.get("line-opacity"),r=n.paint.get("line-width");if(0!==o.constantOr(1)&&0!==r.constantOr(1))for(var s=e.depthModeForSublayer(0,Wt.ReadOnly),l=e.colorModeForRenderPass(),c=n.paint.get("line-dasharray"),u=n.paint.get("line-pattern"),d=u.constantOr(1),h=n.paint.get("line-gradient"),p=n.getCrossfadeParameters(),m=d?"linePattern":c?"lineSDF":h?"lineGradient":"line",b=e.context,y=b.gl,f=!0,g=0,I=a;g<I.length;g+=1){var v=I[g],x=i.getTile(v);if(!d||x.patternsLoaded()){var Z=x.getBucket(n);if(Z){var G=Z.programConfigurations.get(n.id),w=e.context.program.get(),W=e.useProgram(m,G),X=f||W.program!==w,_=u.constantOr(null);if(_&&x.imageAtlas){var V=x.imageAtlas,S=V.patternPositions[_.to.toString()],B=V.patternPositions[_.from.toString()];S&&B&&G.setConstantPatternPositions(S,B)}var L=d?Ji(e,x,n,p):c?Hi(e,x,n,c,p):h?Mi(e,x,n,Z.lineClipsArray.length):Ci(e,x,n);if(d)b.activeTexture.set(y.TEXTURE0),x.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),G.updatePaintBuffers(p);else if(c&&(X||e.lineAtlas.dirty))b.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(b);else if(h){var Y=Z.gradients[n.id],z=Y.texture;if(n.gradientVersion!==Y.version){var R=256;if(n.stepInterpolant){var C=i.getSource().maxzoom,M=v.canonical.z===C?Math.ceil(1<<e.transform.maxZoom-v.canonical.z):1;R=t.clamp(t.nextPowerOfTwo(Z.maxLineLength/t.EXTENT*1024*M),256,b.maxTextureSize)}Y.gradient=t.renderColorRamp({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:Y.gradient||void 0,clips:Z.lineClipsArray}),Y.texture?Y.texture.update(Y.gradient):Y.texture=new t.Texture(b,Y.gradient,y.RGBA),Y.version=n.gradientVersion,z=Y.texture}b.activeTexture.set(y.TEXTURE0),z.bind(n.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}W.draw(b,y.TRIANGLES,s,e.stencilModeForClipping(v),l,Vt.disabled,L,n.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,n.paint,e.transform.zoom,G,Z.layoutVertexBuffer2),f=!1}}}}},fill:function(e,i,n,a){var o=n.paint.get("fill-color"),r=n.paint.get("fill-opacity");if(0!==r.constantOr(1)){var s=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===r.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){var u=e.depthModeForSublayer(1,"opaque"===e.renderPass?Wt.ReadWrite:Wt.ReadOnly);an(e,i,n,a,u,s,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){var d=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Wt.ReadOnly);an(e,i,n,a,d,s,!0)}}},"fill-extrusion":function(t,e,i,n){var a=i.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){var o=new Wt(t.context.gl.LEQUAL,Wt.ReadWrite,t.depthRangeFor3D);if(1!==a||i.paint.get("fill-extrusion-pattern").constantOr(1))on(t,e,i,n,o,Xt.disabled,_t.disabled),on(t,e,i,n,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var r=t.colorModeForRenderPass();on(t,e,i,n,o,Xt.disabled,r)}}},hillshade:function(t,e,i,n){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var a=t.context,o=t.depthModeForSublayer(0,Wt.ReadOnly),r=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(n):[{},n],l=s[0],c=0,u=s[1];c<u.length;c+=1){var d=u[c],h=e.getTile(d);h.needsHillshadePrepare&&"offscreen"===t.renderPass?sn(t,h,i,o,Xt.disabled,r):"translucent"===t.renderPass&&rn(t,h,i,o,l[d.overscaledZ],r)}a.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,i,n){if("translucent"===t.renderPass&&0!==i.paint.get("raster-opacity")&&n.length)for(var a=t.context,o=a.gl,r=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),c=r instanceof Y?[{},n]:t.stencilConfigForOverlap(n),u=c[0],d=c[1],h=d[d.length-1].overscaledZ,p=!t.options.moving,m=0,b=d;m<b.length;m+=1){var y=b[m],f=t.depthModeForSublayer(y.overscaledZ-h,1===i.paint.get("raster-opacity")?Wt.ReadWrite:Wt.ReadOnly,o.LESS),g=e.getTile(y),I=t.transform.calculatePosMatrix(y.toUnwrapped(),p);g.registerFadeDuration(i.paint.get("raster-fade-duration"));var v=e.findLoadedParent(y,0),x=ln(g,v,e,i,t.transform),Z=void 0,G=void 0,w="nearest"===i.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;a.activeTexture.set(o.TEXTURE0),g.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(o.TEXTURE1),v?(v.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),Z=Math.pow(2,v.tileID.overscaledZ-g.tileID.overscaledZ),G=[g.tileID.canonical.x*Z%1,g.tileID.canonical.y*Z%1]):g.texture.bind(w,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var W=Fi(I,G||[0,0],Z||1,x,i);r instanceof Y?s.draw(a,o.TRIANGLES,f,Xt.disabled,l,Vt.disabled,W,i.id,r.boundsBuffer,t.quadTriangleIndexBuffer,r.boundsSegments):s.draw(a,o.TRIANGLES,f,u[y.overscaledZ],l,Vt.disabled,W,i.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,i){var n=i.paint.get("background-color"),a=i.paint.get("background-opacity");if(0!==a){var o=t.context,r=o.gl,s=t.transform,l=s.tileSize,c=i.paint.get("background-pattern");if(!t.isPatternMissing(c)){var u=!c&&1===n.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===u){var d=Xt.disabled,h=t.depthModeForSublayer(0,"opaque"===u?Wt.ReadWrite:Wt.ReadOnly),p=t.colorModeForRenderPass(),m=t.useProgram(c?"backgroundPattern":"background"),b=s.coveringTiles({tileSize:l});c&&(o.activeTexture.set(r.TEXTURE0),t.imageManager.bind(t.context));for(var y=i.getCrossfadeParameters(),f=0,g=b;f<g.length;f+=1){var I=g[f],v=t.transform.calculatePosMatrix(I.toUnwrapped()),x=c?Pi(v,a,t,c,{tileID:I,tileSize:l},y):Oi(v,a,n);m.draw(o,r.TRIANGLES,h,d,p,Vt.disabled,x,i.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,i){for(var n=0;n<i.length;n++)fn(t,e,i[n])},custom:function(t,e,i){var n=t.context,a=i.implementation;if("offscreen"===t.renderPass){var o=a.prerender;o&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),o.call(a,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(Xt.disabled);var r="3d"===a.renderingMode?new Wt(t.context.gl.LEQUAL,Wt.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Wt.ReadOnly);n.setDepthMode(r),a.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}},In=function(t,e){this.context=new St(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Bt.maxUnderzooming+Bt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new He,this.gpuTimers={}};In.prototype.resize=function(e,i){if(this.width=e*t.browser.devicePixelRatio,this.height=i*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var n=0,a=this.style._order;n<a.length;n+=1)this.style._layers[a[n]].resize()},In.prototype.setup=function(){var e=this.context,i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(i,Ue.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,Ue.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var a=new t.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(t.EXTENT,0,t.EXTENT,0),a.emplaceBack(0,t.EXTENT,0,t.EXTENT),a.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(a,L.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ue.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout1ui2;r.emplaceBack(0),r.emplaceBack(1),r.emplaceBack(3),r.emplaceBack(2),r.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(r);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new Xt({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},In.prototype.clearStencil=function(){var e=this.context,i=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var n=t.create();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,i.TRIANGLES,Wt.disabled,this.stencilClearMode,_t.disabled,Vt.disabled,zi(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},In.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var i=this.context,n=i.gl;this.nextStencilID+e.length>256&&this.clearStencil(),i.setColorMode(_t.disabled),i.setDepthMode(Wt.disabled);var a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,r=e;o<r.length;o+=1){var s=r[o],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;a.draw(i,n.TRIANGLES,Wt.disabled,new Xt({func:n.ALWAYS,mask:0},l,255,n.KEEP,n.KEEP,n.REPLACE),_t.disabled,Vt.disabled,zi(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},In.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Xt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},In.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Xt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},In.prototype.stencilConfigForOverlap=function(t){var e,i=this.context.gl,n=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),a=n[n.length-1].overscaledZ,o=n[0].overscaledZ-a+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var r={},s=0;s<o;s++)r[s+a]=new Xt({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[r,n]}return[(e={},e[a]=Xt.disabled,e),n]},In.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new _t([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?_t.unblended:_t.alphaBlended},In.prototype.depthModeForSublayer=function(t,e,i){if(!this.opaquePassEnabledForLayer())return Wt.disabled;var n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Wt(i||this.context.gl.LEQUAL,e,[n,n])},In.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},In.prototype.render=function(e,i){var n=this;this.style=e,this.options=i,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var a=this.style._order,o=this.style.sourceCaches;for(var r in o){var s=o[r];s.used&&s.prepare(this.context)}var l,c,u={},d={},h={};for(var p in o){var m=o[p];u[p]=m.getVisibleCoordinates(),d[p]=u[p].slice().reverse(),h[p]=m.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var b=0;b<a.length;b++)if(this.style._layers[a[b]].is3D()){this.opaquePassCutoff=b;break}this.renderPass="offscreen";for(var y=0,f=a;y<f.length;y+=1){var g=this.style._layers[f[y]];if(g.hasOffscreenPass()&&!g.isHidden(this.transform.zoom)){var I=d[g.source];("custom"===g.type||I.length)&&this.renderLayer(this,o[g.source],g,I)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=a.length-1;this.currentLayer>=0;this.currentLayer--){var v=this.style._layers[a[this.currentLayer]],x=o[v.source],Z=u[v.source];this._renderTileClippingMasks(v,Z),this.renderLayer(this,x,v,Z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){var G=this.style._layers[a[this.currentLayer]],w=o[G.source],W=("symbol"===G.type?h:d)[G.source];this._renderTileClippingMasks(G,u[G.source]),this.renderLayer(this,w,G,W)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(n.transform.zoom)&&(t.source!==(c&&c.id)&&(c=n.style.sourceCaches[t.source]),(!l||l.getSource().maxzoom<c.getSource().maxzoom)&&(l=c))})),l&&gn.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;mn(t,t.transform.height-(e.top||0),3,cn),mn(t,e.bottom||0,3,un),bn(t,e.left||0,3,dn),bn(t,t.transform.width-(e.right||0),3,hn);var i=t.transform.centerPoint;!function(t,e,i,n){yn(t,e-1,i-10,2,20,n),yn(t,e-10,i-1,20,2,n)}(t,i.x,t.transform.height-i.y,pn)}(this),this.context.setDefault()},In.prototype.renderLayer=function(t,e,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||n.length)&&(this.id=i.id,this.gpuTimingStart(i),gn[i.type](t,e,i,n,this.style.placement.variableOffsets),this.gpuTimingEnd())},In.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,i=this.gpuTimers[t.id];i||(i=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),i.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,i.query)}},In.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},In.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},In.prototype.queryGpuTimers=function(t){var e={};for(var i in t){var n=t[i],a=this.context.extTimerQuery,o=a.getQueryObjectEXT(n.query,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(n.query),e[i]=o}return e},In.prototype.translatePosMatrix=function(e,i,n,a,o){if(!n[0]&&!n[1])return e;var r=o?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(r){var s=Math.sin(r),l=Math.cos(r);n=[n[0]*l-n[1]*s,n[0]*s+n[1]*l]}var c=[o?n[0]:he(i,n[0],this.transform.zoom),o?n[1]:he(i,n[1],this.transform.zoom),0],u=new Float32Array(16);return t.translate(u,e,c),u},In.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},In.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},In.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),i=this.imageManager.getPattern(t.to.toString());return!e||!i},In.prototype.useProgram=function(t,e){this.cache=this.cache||{};var i=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new xi(this.context,t,gi[t],e,Ki[t],this._showOverdrawInspector)),this.cache[i]},In.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},In.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},In.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},In.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var vn=function(t,e){this.points=t,this.planes=e};vn.fromInvProjectionMatrix=function(e,i,n){var a=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(i){return t.transformMat4([],i,e)})).map((function(e){return t.scale$1([],e,1/e[3]/i*a)})),r=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var i=t.sub([],o[e[0]],o[e[1]]),n=t.sub([],o[e[2]],o[e[1]]),a=t.normalize([],t.cross([],i,n)),r=-t.dot(a,o[e[1]]);return a.concat(r)}));return new vn(o,r)};var xn=function(e,i){this.min=e,this.max=i,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};xn.prototype.quadrant=function(e){for(var i=[e%2==0,e<2],n=t.clone$2(this.min),a=t.clone$2(this.max),o=0;o<i.length;o++)n[o]=i[o]?this.min[o]:this.center[o],a[o]=i[o]?this.center[o]:this.max[o];return a[2]=this.max[2],new xn(n,a)},xn.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},xn.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},xn.prototype.intersects=function(e){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],n=!0,a=0;a<e.planes.length;a++){for(var o=e.planes[a],r=0,s=0;s<i.length;s++)r+=t.dot$1(o,i[s])>=0;if(0===r)return 0;r!==i.length&&(n=!1)}if(n)return 2;for(var l=0;l<3;l++){for(var c=Number.MAX_VALUE,u=-Number.MAX_VALUE,d=0;d<e.points.length;d++){var h=e.points[d][l]-this.min[l];c=Math.min(c,h),u=Math.max(u,h)}if(u<0||c>this.max[l]-this.min[l])return 0}return 1};var Zn=function(t,e,i,n){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(i)||i<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=i,this.right=n};Zn.prototype.interpolate=function(e,i,n){return null!=i.top&&null!=e.top&&(this.top=t.number(e.top,i.top,n)),null!=i.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,i.bottom,n)),null!=i.left&&null!=e.left&&(this.left=t.number(e.left,i.left,n)),null!=i.right&&null!=e.right&&(this.right=t.number(e.right,i.right,n)),this},Zn.prototype.getCenter=function(e,i){var n=t.clamp((this.left+e-this.right)/2,0,e),a=t.clamp((this.top+i-this.bottom)/2,0,i);return new t.Point(n,a)},Zn.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},Zn.prototype.clone=function(){return new Zn(this.top,this.bottom,this.left,this.right)},Zn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Gn=function(e,i,n,a,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=i||22,this._minPitch=null==n?0:n,this._maxPitch=null==a?60:a,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zn,this._posMatrixCache={},this._alignedPosMatrixCache={}},wn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Gn.prototype.clone=function(){var t=new Gn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},wn.minZoom.get=function(){return this._minZoom},wn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},wn.maxZoom.get=function(){return this._maxZoom},wn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},wn.minPitch.get=function(){return this._minPitch},wn.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},wn.maxPitch.get=function(){return this._maxPitch},wn.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},wn.renderWorldCopies.get=function(){return this._renderWorldCopies},wn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},wn.worldSize.get=function(){return this.tileSize*this.scale},wn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},wn.size.get=function(){return new t.Point(this.width,this.height)},wn.bearing.get=function(){return-this.angle/Math.PI*180},wn.bearing.set=function(e){var i=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},wn.pitch.get=function(){return this._pitch/Math.PI*180},wn.pitch.set=function(e){var i=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},wn.fov.get=function(){return this._fov/Math.PI*180},wn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},wn.zoom.get=function(){return this._zoom},wn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},wn.center.get=function(){return this._center},wn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},wn.padding.get=function(){return this._edgeInsets.toJSON()},wn.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},wn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Gn.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},Gn.prototype.interpolatePadding=function(t,e,i){this._unmodified=!1,this._edgeInsets.interpolate(t,e,i),this._constrain(),this._calcMatrices()},Gn.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Gn.prototype.getVisibleUnwrappedCoordinates=function(e){var i=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new t.Point(0,0)),a=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),r=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(n.x,a.x,o.x,r.x)),l=Math.floor(Math.max(n.x,a.x,o.x,r.x)),c=s-1;c<=l+1;c++)0!==c&&i.push(new t.UnwrappedTileID(c,e));return i},Gn.prototype.coveringTiles=function(e){var i=this.coveringZoomLevel(e),n=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);var a=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,i),r=[o*a.x,o*a.y,0],s=vn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),l=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=i);var c=function(t){return{aabb:new xn([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},u=[],d=[],h=i,p=e.reparseOverscaled?n:i;if(this._renderWorldCopies)for(var m=1;m<=3;m++)u.push(c(-m)),u.push(c(m));for(u.push(c(0));u.length>0;){var b=u.pop(),y=b.x,f=b.y,g=b.fullyVisible;if(!g){var I=b.aabb.intersects(s);if(0===I)continue;g=2===I}var v=b.aabb.distanceX(r),x=b.aabb.distanceY(r),Z=Math.max(Math.abs(v),Math.abs(x));if(b.zoom===h||Z>3+(1<<h-b.zoom)-2&&b.zoom>=l)d.push({tileID:new t.OverscaledTileID(b.zoom===h?p:b.zoom,b.wrap,b.zoom,y,f),distanceSq:t.sqrLen([r[0]-.5-y,r[1]-.5-f])});else for(var G=0;G<4;G++){var w=(y<<1)+G%2,W=(f<<1)+(G>>1);u.push({aabb:b.aabb.quadrant(G),zoom:b.zoom+1,x:w,y:W,wrap:b.wrap,fullyVisible:g})}}return d.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},Gn.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},wn.unmodified.get=function(){return this._unmodified},Gn.prototype.zoomScale=function(t){return Math.pow(2,t)},Gn.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Gn.prototype.project=function(e){var i=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(i)*this.worldSize)},Gn.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},wn.point.get=function(){return this.project(this.center)},Gn.prototype.setLocationAtPoint=function(e,i){var n=this.pointCoordinate(i),a=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),r=new t.MercatorCoordinate(o.x-(n.x-a.x),o.y-(n.y-a.y));this.center=this.coordinateLocation(r),this._renderWorldCopies&&(this.center=this.center.wrap())},Gn.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Gn.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Gn.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Gn.prototype.coordinateLocation=function(t){return t.toLngLat()},Gn.prototype.pointCoordinate=function(e){var i=[e.x,e.y,0,1],n=[e.x,e.y,1,1];t.transformMat4(i,i,this.pixelMatrixInverse),t.transformMat4(n,n,this.pixelMatrixInverse);var a=i[3],o=n[3],r=i[1]/a,s=n[1]/o,l=i[2]/a,c=n[2]/o,u=l===c?0:(0-l)/(c-l);return new t.MercatorCoordinate(t.number(i[0]/a,n[0]/o,u)/this.worldSize,t.number(r,s,u)/this.worldSize)},Gn.prototype.coordinatePoint=function(e){var i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix),new t.Point(i[0]/i[3],i[1]/i[3])},Gn.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Gn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Gn.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Gn.prototype.calculatePosMatrix=function(e,i){void 0===i&&(i=!1);var n=e.key,a=i?this._alignedPosMatrixCache:this._posMatrixCache;if(a[n])return a[n];var o=e.canonical,r=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*r,o.y*r,0]),t.scale(l,l,[r/t.EXTENT,r/t.EXTENT,1]),t.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),a[n]=new Float32Array(l),a[n]},Gn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Gn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,i,n,a,o=-90,r=90,s=-180,l=180,c=this.size,u=this._unmodified;if(this.latRange){var d=this.latRange;o=t.mercatorYfromLat(d[1])*this.worldSize,e=(r=t.mercatorYfromLat(d[0])*this.worldSize)-o<c.y?c.y/(r-o):0}if(this.lngRange){var h=this.lngRange;s=t.mercatorXfromLng(h[0])*this.worldSize,i=(l=t.mercatorXfromLng(h[1])*this.worldSize)-s<c.x?c.x/(l-s):0}var p=this.point,m=Math.max(i||0,e||0);if(m)return this.center=this.unproject(new t.Point(i?(l+s)/2:p.x,e?(r+o)/2:p.y)),this.zoom+=this.scaleZoom(m),this._unmodified=u,void(this._constraining=!1);if(this.latRange){var b=p.y,y=c.y/2;b-y<o&&(a=o+y),b+y>r&&(a=r-y)}if(this.lngRange){var f=p.x,g=c.x/2;f-g<s&&(n=s+g),f+g>l&&(n=l-g)}void 0===n&&void 0===a||(this.center=this.unproject(new t.Point(void 0!==n?n:p.x,void 0!==a?a:p.y))),this._unmodified=u,this._constraining=!1}},Gn.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var i=Math.PI/2+this._pitch,n=this._fov*(.5+e.y/this.height),a=Math.sin(n)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-i-n,.01,Math.PI-.01)),o=this.point,r=o.x,s=o.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*a+this.cameraToCenterDistance),c=this.height/50,u=new Float64Array(16);t.perspective(u,this._fov,this.width/this.height,c,l),u[8]=2*-e.x/this.width,u[9]=2*e.y/this.height,t.scale(u,u,[1,-1,1]),t.translate(u,u,[0,0,-this.cameraToCenterDistance]),t.rotateX(u,u,this._pitch),t.rotateZ(u,u,this.angle),t.translate(u,u,[-r,-s,0]),this.mercatorMatrix=t.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),t.scale(u,u,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u,this.invProjMatrix=t.invert([],this.projMatrix);var d=this.width%2/2,h=this.height%2/2,p=Math.cos(this.angle),m=Math.sin(this.angle),b=r-Math.round(r)+p*d+m*h,y=s-Math.round(s)+p*h+m*d,f=new Float64Array(u);if(t.translate(f,f,[b>.5?b-1:b,y>.5?y-1:y,0]),this.alignedProjMatrix=f,u=t.create(),t.scale(u,u,[this.width/2,-this.height/2,1]),t.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=t.create(),t.scale(u,u,[1,-1,1]),t.translate(u,u,[-1,-1,0]),t.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Gn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),i=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},Gn.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},Gn.prototype.getCameraQueryGeometry=function(e){var i=this.getCameraPoint();if(1===e.length)return[e[0],i];for(var n=i.x,a=i.y,o=i.x,r=i.y,s=0,l=e;s<l.length;s+=1){var c=l[s];n=Math.min(n,c.x),a=Math.min(a,c.y),o=Math.max(o,c.x),r=Math.max(r,c.y)}return[new t.Point(n,a),new t.Point(o,a),new t.Point(o,r),new t.Point(n,r),new t.Point(n,a)]},Object.defineProperties(Gn.prototype,wn);var Wn=function(e){var i,n,a,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),n=!1,a=null,o=function(){a=null,n&&(i(),a=setTimeout(o,300),n=!1)},function(){return n=!0,a||o(),a})};Wn.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Wn.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Wn.prototype.getHashString=function(e){var i=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,a=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,a),r=Math.round(i.lng*o)/o,s=Math.round(i.lat*o)/o,l=this._map.getBearing(),c=this._map.getPitch(),u="";if(u+=e?"/"+r+"/"+s+"/"+n:n+"/"+s+"/"+r,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/"+Math.round(c)),this._hashName){var d=this._hashName,h=!1,p=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===d?(h=!0,e+"="+u):t})).filter((function(t){return t}));return h||p.push(d+"="+u),"#"+p.join("&")}return"#"+u},Wn.prototype._getCurrentHash=function(){var e,i=this,n=t.window.location.hash.replace("#","");return this._hashName?(n.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===i._hashName&&(e=t)})),(e&&e[1]||"").split("/")):n.split("/")},Wn.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Wn.prototype._updateHashUnthrottled=function(){var e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,e)}catch(t){}};var Xn={linearity:.3,easing:t.bezier(0,0,.3,1)},_n=t.extend({deceleration:2500,maxSpeed:1400},Xn),Vn=t.extend({deceleration:20,maxSpeed:1400},Xn),Sn=t.extend({deceleration:1e3,maxSpeed:360},Xn),Bn=t.extend({deceleration:1e3,maxSpeed:90},Xn),Ln=function(t){this._map=t,this.clear()};function Yn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function zn(e,i,n){var a=n.maxSpeed,o=n.linearity,r=n.deceleration,s=t.clamp(e*o/(i/1e3),-a,a),l=Math.abs(s)/(r*o);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}Ln.prototype.clear=function(){this._inertiaBuffer=[]},Ln.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Ln.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,i=t.browser.now();e.length>0&&i-e[0].time>160;)e.shift()},Ln.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},n=0,a=this._inertiaBuffer;n<a.length;n+=1){var o=a[n].settings;i.zoom+=o.zoomDelta||0,i.bearing+=o.bearingDelta||0,i.pitch+=o.pitchDelta||0,o.panDelta&&i.pan._add(o.panDelta),o.around&&(i.around=o.around),o.pinchAround&&(i.pinchAround=o.pinchAround)}var r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){var l=zn(i.pan.mag(),r,t.extend({},_n,e||{}));s.offset=i.pan.mult(l.amount/i.pan.mag()),s.center=this._map.transform.center,Yn(s,l)}if(i.zoom){var c=zn(i.zoom,r,Vn);s.zoom=this._map.transform.zoom+c.amount,Yn(s,c)}if(i.bearing){var u=zn(i.bearing,r,Sn);s.bearing=this._map.transform.bearing+t.clamp(u.amount,-179,179),Yn(s,u)}if(i.pitch){var d=zn(i.pitch,r,Bn);s.pitch=this._map.transform.pitch+d.amount,Yn(s,d)}if(s.zoom||s.bearing){var h=void 0===i.pinchAround?i.around:i.pinchAround;s.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var Rn=function(e){function n(n,a,o,r){void 0===r&&(r={});var s=i.mousePos(a.getCanvasContainer(),o),l=a.unproject(s);e.call(this,n,t.extend({point:s,lngLat:l,originalEvent:o},r)),this._defaultPrevented=!1,this.target=a}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var a={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,a),n}(t.Event),Cn=function(e){function n(n,a,o){var r="touchend"===n?o.changedTouches:o.touches,s=i.touchPos(a.getCanvasContainer(),r),l=s.map((function(t){return a.unproject(t)})),c=s.reduce((function(t,e,i,n){return t.add(e.div(n.length))}),new t.Point(0,0)),u=a.unproject(c);e.call(this,n,{points:s,point:c,lngLats:l,lngLat:u,originalEvent:o}),this._defaultPrevented=!1}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var a={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,a),n}(t.Event),Mn=function(t){function e(e,i,n){t.call(this,e,{originalEvent:n}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,i),e}(t.Event),Jn=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Jn.prototype.reset=function(){delete this._mousedownPos},Jn.prototype.wheel=function(t){return this._firePreventable(new Mn(t.type,this._map,t))},Jn.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new Rn(t.type,this._map,t))},Jn.prototype.mouseup=function(t){this._map.fire(new Rn(t.type,this._map,t))},Jn.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Rn(t.type,this._map,t))},Jn.prototype.dblclick=function(t){return this._firePreventable(new Rn(t.type,this._map,t))},Jn.prototype.mouseover=function(t){this._map.fire(new Rn(t.type,this._map,t))},Jn.prototype.mouseout=function(t){this._map.fire(new Rn(t.type,this._map,t))},Jn.prototype.touchstart=function(t){return this._firePreventable(new Cn(t.type,this._map,t))},Jn.prototype.touchmove=function(t){this._map.fire(new Cn(t.type,this._map,t))},Jn.prototype.touchend=function(t){this._map.fire(new Cn(t.type,this._map,t))},Jn.prototype.touchcancel=function(t){this._map.fire(new Cn(t.type,this._map,t))},Jn.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Jn.prototype.isEnabled=function(){return!0},Jn.prototype.isActive=function(){return!1},Jn.prototype.enable=function(){},Jn.prototype.disable=function(){};var Hn=function(t){this._map=t};Hn.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Hn.prototype.mousemove=function(t){this._map.fire(new Rn(t.type,this._map,t))},Hn.prototype.mousedown=function(){this._delayContextMenu=!0},Hn.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Hn.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Rn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Hn.prototype.isEnabled=function(){return!0},Hn.prototype.isActive=function(){return!1},Hn.prototype.enable=function(){},Hn.prototype.disable=function(){};var kn=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};function jn(t,e){for(var i={},n=0;n<t.length;n++)i[t[n].identifier]=e[n];return i}kn.prototype.isEnabled=function(){return!!this._enabled},kn.prototype.isActive=function(){return!!this._active},kn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},kn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},kn.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(i.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},kn.prototype.mousemoveWindow=function(t,e){if(this._active){var n=e;if(!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var a=this._startPos;this._lastPos=n,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var o=Math.min(a.x,n.x),r=Math.max(a.x,n.x),s=Math.min(a.y,n.y),l=Math.max(a.y,n.y);i.setTransform(this._box,"translate("+o+"px,"+s+"px)"),this._box.style.width=r-o+"px",this._box.style.height=l-s+"px"}}},kn.prototype.mouseupWindow=function(e,n){var a=this;if(this._active&&0===e.button){var o=this._startPos,r=n;if(this.reset(),i.suppressClick(),o.x!==r.x||o.y!==r.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(o,r,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},kn.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},kn.prototype.blur=function(){this.reset()},kn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},kn.prototype._fireEvent=function(e,i){return this._map.fire(new t.Event(e,{originalEvent:i}))};var Fn=function(t){this.reset(),this.numTouches=t.numTouches};Fn.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Fn.prototype.touchstart=function(e,i,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){for(var i=new t.Point(0,0),n=0,a=e;n<a.length;n+=1)i._add(a[n]);return i.div(e.length)}(i),this.touches=jn(n,i)))},Fn.prototype.touchmove=function(t,e,i){if(!this.aborted&&this.centroid){var n=jn(i,e);for(var a in this.touches){var o=n[a];(!o||o.dist(this.touches[a])>30)&&(this.aborted=!0)}}},Fn.prototype.touchend=function(t,e,i){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var n=!this.aborted&&this.centroid;if(this.reset(),n)return n}};var Nn=function(t){this.singleTap=new Fn(t),this.numTaps=t.numTaps,this.reset()};Nn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Nn.prototype.touchstart=function(t,e,i){this.singleTap.touchstart(t,e,i)},Nn.prototype.touchmove=function(t,e,i){this.singleTap.touchmove(t,e,i)},Nn.prototype.touchend=function(t,e,i){var n=this.singleTap.touchend(t,e,i);if(n){var a=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(n)<30;if(a&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}};var Tn=function(){this._zoomIn=new Nn({numTouches:1,numTaps:2}),this._zoomOut=new Nn({numTouches:2,numTaps:1}),this.reset()};Tn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Tn.prototype.touchstart=function(t,e,i){this._zoomIn.touchstart(t,e,i),this._zoomOut.touchstart(t,e,i)},Tn.prototype.touchmove=function(t,e,i){this._zoomIn.touchmove(t,e,i),this._zoomOut.touchmove(t,e,i)},Tn.prototype.touchend=function(t,e,i){var n=this,a=this._zoomIn.touchend(t,e,i),o=this._zoomOut.touchend(t,e,i);return a?(this._active=!0,t.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(a)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout((function(){return n.reset()}),0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},Tn.prototype.touchcancel=function(){this.reset()},Tn.prototype.enable=function(){this._enabled=!0},Tn.prototype.disable=function(){this._enabled=!1,this.reset()},Tn.prototype.isEnabled=function(){return this._enabled},Tn.prototype.isActive=function(){return this._active};var Un={0:1,2:2},En=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};En.prototype.blur=function(){this.reset()},En.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},En.prototype._correctButton=function(t,e){return!1},En.prototype._move=function(t,e){return{}},En.prototype.mousedown=function(t,e){if(!this._lastPoint){var n=i.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}},En.prototype.mousemoveWindow=function(t,e){var i=this._lastPoint;if(i)if(t.preventDefault(),function(t,e){var i=Un[e];return void 0===t.buttons||(t.buttons&i)!==i}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(i,e)},En.prototype.mouseupWindow=function(t){this._lastPoint&&i.mouseButton(t)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},En.prototype.enable=function(){this._enabled=!0},En.prototype.disable=function(){this._enabled=!1,this.reset()},En.prototype.isEnabled=function(){return this._enabled},En.prototype.isActive=function(){return this._active};var An=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,i){t.prototype.mousedown.call(this,e,i),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(En),On=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=.8*(e.x-t.x);if(i)return this._active=!0,{bearingDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(En),Pn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var i=-.5*(e.y-t.y);if(i)return this._active=!0,{pitchDelta:i}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(En),Kn=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};Kn.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},Kn.prototype.touchstart=function(t,e,i){return this._calculateTransform(t,e,i)},Kn.prototype.touchmove=function(t,e,i){if(this._active&&!(i.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,i)},Kn.prototype.touchend=function(t,e,i){this._calculateTransform(t,e,i),this._active&&i.length<this._minTouches&&this.reset()},Kn.prototype.touchcancel=function(){this.reset()},Kn.prototype._calculateTransform=function(e,i,n){n.length>0&&(this._active=!0);var a=jn(n,i),o=new t.Point(0,0),r=new t.Point(0,0),s=0;for(var l in a){var c=a[l],u=this._touches[l];u&&(o._add(c),r._add(c.sub(u)),s++,a[l]=c)}if(this._touches=a,!(s<this._minTouches)&&r.mag()){var d=r.div(s);if(this._sum._add(d),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:d}}},Kn.prototype.enable=function(){this._enabled=!0},Kn.prototype.disable=function(){this._enabled=!1,this.reset()},Kn.prototype.isEnabled=function(){return this._enabled},Kn.prototype.isActive=function(){return this._active};var Dn=function(){this.reset()};function Qn(t,e,i){for(var n=0;n<t.length;n++)if(t[n].identifier===i)return e[n]}function qn(t,e){return Math.log(t/e)/Math.LN2}Dn.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Dn.prototype._start=function(t){},Dn.prototype._move=function(t,e,i){return{}},Dn.prototype.touchstart=function(t,e,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([e[0],e[1]]))},Dn.prototype.touchmove=function(t,e,i){if(this._firstTwoTouches){t.preventDefault();var n=this._firstTwoTouches,a=n[1],o=Qn(i,e,n[0]),r=Qn(i,e,a);if(o&&r){var s=this._aroundCenter?null:o.add(r).div(2);return this._move([o,r],s,t)}}},Dn.prototype.touchend=function(t,e,n){if(this._firstTwoTouches){var a=this._firstTwoTouches,o=a[1],r=Qn(n,e,a[0]),s=Qn(n,e,o);r&&s||(this._active&&i.suppressClick(),this.reset())}},Dn.prototype.touchcancel=function(){this.reset()},Dn.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},Dn.prototype.disable=function(){this._enabled=!1,this.reset()},Dn.prototype.isEnabled=function(){return this._enabled},Dn.prototype.isActive=function(){return this._active};var $n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(qn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qn(this._distance,i),pinchAround:e}},e}(Dn);function ta(t,e){return 180*t.angleWith(e)/Math.PI}var ea=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var i=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ta(this._vector,i),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,i=ta(t,this._startVector);return Math.abs(i)<e},e}(Dn);function ia(t){return Math.abs(t.y)>Math.abs(t.x)}var na=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,ia(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,i){var n=t[0].sub(this._lastPoints[0]),a=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(n,a,i.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(n.y+a.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,i){if(void 0!==this._valid)return this._valid;var n=t.mag()>=2,a=e.mag()>=2;if(n||a){if(!n||!a)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return ia(t)&&ia(e)&&o}},e}(Dn),aa={panStep:100,bearingStep:15,pitchStep:10},oa=function(){var t=aa;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1};function ra(t){return t*(2-t)}oa.prototype.blur=function(){this.reset()},oa.prototype.reset=function(){this._active=!1},oa.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=0,n=0,a=0,o=0,r=0;switch(t.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?a=1:(t.preventDefault(),r=-1);break;case 40:t.shiftKey?a=-1:(t.preventDefault(),r=1);break;default:return}return this._rotationDisabled&&(n=0,a=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:ra,zoom:i?Math.round(l)+i*(t.shiftKey?2:1):l,bearing:s.getBearing()+n*e._bearingStep,pitch:s.getPitch()+a*e._pitchStep,offset:[-o*e._panStep,-r*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},oa.prototype.enable=function(){this._enabled=!0},oa.prototype.disable=function(){this._enabled=!1,this.reset()},oa.prototype.isEnabled=function(){return this._enabled},oa.prototype.isActive=function(){return this._active},oa.prototype.disableRotation=function(){this._rotationDisabled=!0},oa.prototype.enableRotation=function(){this._rotationDisabled=!1};var sa=function(e,i){this._map=e,this._el=e.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};sa.prototype.setZoomRate=function(t){this._defaultZoomRate=t},sa.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},sa.prototype.isEnabled=function(){return!!this._enabled},sa.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sa.prototype.isZooming=function(){return!!this._zooming},sa.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},sa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sa.prototype.wheel=function(e){if(this.isEnabled()){var i=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=t.browser.now(),a=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(a*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),e.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=e,this._delta-=i,this._active||this._start(e)),e.preventDefault()}},sa.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},sa.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var n=i.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sa.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==a&&(a=1/a);var o="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(o*a))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var r,s="number"==typeof this._targetZoom?this._targetZoom:i.zoom,l=this._startZoom,c=this._easing,u=!1;if("wheel"===this._type&&l&&c){var d=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=c(d);r=t.number(l,s,h),d<1?this._frameId||(this._frameId=!0):u=!0}else r=s,u=!0;return this._active=!0,u&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!u,zoomDelta:r-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sa.prototype._smoothOutEasing=function(e){var i=t.ease;if(this._prevEase){var n=this._prevEase,a=(t.browser.now()-n.start)/n.duration,o=n.easing(a+.01)-n.easing(a),r=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-r*r);i=t.bezier(r,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:i},i},sa.prototype.blur=function(){this.reset()},sa.prototype.reset=function(){this._active=!1};var la=function(t,e){this._clickZoom=t,this._tapZoom=e};la.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},la.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},la.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},la.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ca=function(){this.reset()};ca.prototype.reset=function(){this._active=!1},ca.prototype.blur=function(){this.reset()},ca.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(t.shiftKey?-1:1),around:i.unproject(e)},{originalEvent:t})}}},ca.prototype.enable=function(){this._enabled=!0},ca.prototype.disable=function(){this._enabled=!1,this.reset()},ca.prototype.isEnabled=function(){return this._enabled},ca.prototype.isActive=function(){return this._active};var ua=function(){this._tap=new Nn({numTouches:1,numTaps:1}),this.reset()};ua.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ua.prototype.touchstart=function(t,e,i){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=e[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(t,e,i))},ua.prototype.touchmove=function(t,e,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var n=e[0],a=n.y-this._swipePoint.y;return this._swipePoint=n,t.preventDefault(),this._active=!0,{zoomDelta:a/128}}}else this._tap.touchmove(t,e,i)},ua.prototype.touchend=function(t,e,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(t,e,i)&&(this._tapTime=t.timeStamp)},ua.prototype.touchcancel=function(){this.reset()},ua.prototype.enable=function(){this._enabled=!0},ua.prototype.disable=function(){this._enabled=!1,this.reset()},ua.prototype.isEnabled=function(){return this._enabled},ua.prototype.isActive=function(){return this._active};var da=function(t,e,i){this._el=t,this._mousePan=e,this._touchPan=i};da.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},da.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},da.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},da.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var ha=function(t,e,i){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=i};ha.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},ha.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},ha.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},ha.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var pa=function(t,e,i,n){this._el=t,this._touchZoom=e,this._touchRotate=i,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0};pa.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},pa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},pa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},pa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},pa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},pa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ma=function(t){return t.zoom||t.drag||t.pitch||t.rotate},ba=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event);function ya(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var fa=function(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ln(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[t.window,"blur",void 0]];for(var o=0,r=this._listeners;o<r.length;o+=1){var s=r[o],l=s[0];i.addEventListener(l,s[1],l===t.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};fa.prototype.destroy=function(){for(var e=0,n=this._listeners;e<n.length;e+=1){var a=n[e],o=a[0];i.removeEventListener(o,a[1],o===t.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},fa.prototype._addDefaultHandlers=function(t){var e=this._map,i=e.getCanvasContainer();this._add("mapEvent",new Jn(e,t));var n=e.boxZoom=new kn(e,t);this._add("boxZoom",n);var a=new Tn,o=new ca;e.doubleClickZoom=new la(o,a),this._add("tapZoom",a),this._add("clickZoom",o);var r=new ua;this._add("tapDragZoom",r);var s=e.touchPitch=new na;this._add("touchPitch",s);var l=new On(t),c=new Pn(t);e.dragRotate=new ha(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var u=new An(t),d=new Kn(t);e.dragPan=new da(i,u,d),this._add("mousePan",u),this._add("touchPan",d,["touchZoom","touchRotate"]);var h=new ea,p=new $n;e.touchZoomRotate=new pa(i,p,h,r),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);var m=e.scrollZoom=new sa(e,this);this._add("scrollZoom",m,["mousePan"]);var b=e.keyboard=new oa;this._add("keyboard",b),this._add("blockableMapEvent",new Hn(e));for(var y=0,f=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];y<f.length;y+=1){var g=f[y];t.interactive&&t[g]&&e[g].enable(t[g])}},fa.prototype._add=function(t,e,i){this._handlers.push({handlerName:t,handler:e,allowed:i}),this._handlersById[t]=e},fa.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,i=this._handlers;e<i.length;e+=1)i[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},fa.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},fa.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},fa.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},fa.prototype.isMoving=function(){return Boolean(ma(this._eventsInProgress))||this.isZooming()},fa.prototype._blockedByActive=function(t,e,i){for(var n in t)if(n!==i&&(!e||e.indexOf(n)<0))return!0;return!1},fa.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},fa.prototype._getMapTouches=function(t){for(var e=[],i=0,n=t;i<n.length;i+=1){var a=n[i];this._el.contains(a.target)&&e.push(a)}return e},fa.prototype.handleEvent=function(t,e){this._updatingCamera=!0;for(var n="renderFrame"===t.type?void 0:t,a={needsRenderFrame:!1},o={},r={},s=t.touches?this._getMapTouches(t.touches):void 0,l=s?i.touchPos(this._el,s):i.mousePos(this._el,t),c=0,u=this._handlers;c<u.length;c+=1){var d=u[c],h=d.handlerName,p=d.handler,m=d.allowed;if(p.isEnabled()){var b=void 0;this._blockedByActive(r,m,h)?p.reset():p[e||t.type]&&(b=p[e||t.type](t,l,s),this.mergeHandlerResult(a,o,b,h,n),b&&b.needsRenderFrame&&this._triggerRenderFrame()),(b||p.isActive())&&(r[h]=p)}}var y={};for(var f in this._previousActiveHandlers)r[f]||(y[f]=n);this._previousActiveHandlers=r,(Object.keys(y).length||ya(a))&&(this._changes.push([a,o,y]),this._triggerRenderFrame()),(Object.keys(r).length||ya(a))&&this._map._stop(!0),this._updatingCamera=!1;var g=a.cameraAnimation;g&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],g(this._map))},fa.prototype.mergeHandlerResult=function(e,i,n,a,o){if(n){t.extend(e,n);var r={handlerName:a,originalEvent:n.originalEvent||o};void 0!==n.zoomDelta&&(i.zoom=r),void 0!==n.panDelta&&(i.drag=r),void 0!==n.pitchDelta&&(i.pitch=r),void 0!==n.bearingDelta&&(i.rotate=r)}},fa.prototype._applyChanges=function(){for(var e={},i={},n={},a=0,o=this._changes;a<o.length;a+=1){var r=o[a],s=r[0],l=r[1],c=r[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(i,l),t.extend(n,c)}this._updateMapTransform(e,i,n),this._changes=[]},fa.prototype._updateMapTransform=function(t,e,i){var n=this._map,a=n.transform;if(!ya(t))return this._fireEvents(e,i,!0);var o=t.panDelta,r=t.zoomDelta,s=t.bearingDelta,l=t.pitchDelta,c=t.around,u=t.pinchAround;void 0!==u&&(c=u),n._stop(!0),c=c||n.transform.centerPoint;var d=a.pointLocation(o?c.sub(o):c);s&&(a.bearing+=s),l&&(a.pitch+=l),r&&(a.zoom+=r),a.setLocationAtPoint(d,c),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,i,!0)},fa.prototype._fireEvents=function(e,i,n){var a=this,o=ma(this._eventsInProgress),r=ma(e),s={};for(var l in e)this._eventsInProgress[l]||(s[l+"start"]=e[l].originalEvent),this._eventsInProgress[l]=e[l];for(var c in!o&&r&&this._fireEvent("movestart",r.originalEvent),s)this._fireEvent(c,s[c]);for(var u in r&&this._fireEvent("move",r.originalEvent),e)this._fireEvent(u,e[u].originalEvent);var d,h={};for(var p in this._eventsInProgress){var m=this._eventsInProgress[p],b=m.handlerName,y=m.originalEvent;this._handlersById[b].isActive()||(delete this._eventsInProgress[p],h[p+"end"]=d=i[b]||y)}for(var f in h)this._fireEvent(f,h[f]);var g=ma(this._eventsInProgress);if(n&&(o||r)&&!g){this._updatingCamera=!0;var I=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),v=function(t){return 0!==t&&-a._bearingSnap<t&&t<a._bearingSnap};I?(v(I.bearing||this._map.getBearing())&&(I.bearing=0),this._map.easeTo(I,{originalEvent:d})):(this._map.fire(new t.Event("moveend",{originalEvent:d})),v(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},fa.prototype._fireEvent=function(e,i){this._map.fire(new t.Event(e,i?{originalEvent:i}:{}))},fa.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(e){delete t._frameId,t.handleEvent(new ba("renderFrame",{timeStamp:e})),t._applyChanges()}))},fa.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var ga=function(e){function i(i,n){e.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(i.__proto__=e),(i.prototype=Object.create(e&&e.prototype)).constructor=i,i.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},i.prototype.panBy=function(e,i,n){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},i),n)},i.prototype.panTo=function(e,i,n){return this.easeTo(t.extend({center:e},i),n)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},i.prototype.zoomTo=function(e,i,n){return this.easeTo(t.extend({zoom:e},i),n)},i.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},i.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},i.prototype.rotateTo=function(e,i,n){return this.easeTo(t.extend({bearing:e},i),n)},i.prototype.resetNorth=function(e,i){return this.rotateTo(0,t.extend({duration:1e3},e),i),this},i.prototype.resetNorthPitch=function(e,i){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),i),this},i.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},i.prototype.cameraForBounds=function(e,i){e=t.LngLatBounds.convert(e);var n=i&&i.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),n,i)},i.prototype._cameraForBoxAndBearing=function(e,i,n,a){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(a=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding){var r=a.padding;a.padding={top:r,bottom:r,right:r,left:r}}a.padding=t.extend(o,a.padding);var s=this.transform,l=s.padding,c=s.project(t.LngLat.convert(e)),u=s.project(t.LngLat.convert(i)),d=c.rotate(-n*Math.PI/180),h=u.rotate(-n*Math.PI/180),p=new t.Point(Math.max(d.x,h.x),Math.max(d.y,h.y)),m=new t.Point(Math.min(d.x,h.x),Math.min(d.y,h.y)),b=p.sub(m),y=(s.width-(l.left+l.right+a.padding.left+a.padding.right))/b.x,f=(s.height-(l.top+l.bottom+a.padding.top+a.padding.bottom))/b.y;if(!(f<0||y<0)){var g=Math.min(s.scaleZoom(s.scale*Math.min(y,f)),a.maxZoom),I="number"==typeof a.offset.x?new t.Point(a.offset.x,a.offset.y):t.Point.convert(a.offset),v=new t.Point((a.padding.left-a.padding.right)/2,(a.padding.top-a.padding.bottom)/2).rotate(n*Math.PI/180),x=I.add(v).mult(s.scale/s.zoomScale(g));return{center:s.unproject(c.add(u).div(2).sub(x)),zoom:g,bearing:n}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(t,e,i){return this._fitInternal(this.cameraForBounds(t,e),e,i)},i.prototype.fitScreenCoordinates=function(e,i,n,a,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(i)),n,a),a,o)},i.prototype._fitInternal=function(e,i,n){return e?(delete(i=t.extend(e,i)).padding,i.linear?this.easeTo(i,n):this.flyTo(i,n)):this},i.prototype.jumpTo=function(e,i){this.stop();var n=this.transform,a=!1,o=!1,r=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(a=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(r=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this.fire(new t.Event("movestart",i)).fire(new t.Event("move",i)),a&&this.fire(new t.Event("zoomstart",i)).fire(new t.Event("zoom",i)).fire(new t.Event("zoomend",i)),o&&this.fire(new t.Event("rotatestart",i)).fire(new t.Event("rotate",i)).fire(new t.Event("rotateend",i)),r&&this.fire(new t.Event("pitchstart",i)).fire(new t.Event("pitch",i)).fire(new t.Event("pitchend",i)),this.fire(new t.Event("moveend",i))},i.prototype.easeTo=function(e,i){var n=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var a=this.transform,o=this.getZoom(),r=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="zoom"in e?+e.zoom:o,u="bearing"in e?this._normalizeBearing(e.bearing,r):r,d="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:a.padding,p=t.Point.convert(e.offset),m=a.centerPoint.add(p),b=a.pointLocation(m),y=t.LngLat.convert(e.center||b);this._normalizeCenter(y);var f,g,I=a.project(b),v=a.project(y).sub(I),x=a.zoomScale(c-o);e.around&&(f=t.LngLat.convert(e.around),g=a.locationPoint(f));var Z={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==o,this._rotating=this._rotating||r!==u,this._pitching=this._pitching||d!==s,this._padding=!a.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(i,e.noMoveStart,Z),this._ease((function(e){if(n._zooming&&(a.zoom=t.number(o,c,e)),n._rotating&&(a.bearing=t.number(r,u,e)),n._pitching&&(a.pitch=t.number(s,d,e)),n._padding&&(a.interpolatePadding(l,h,e),m=a.centerPoint.add(p)),f)a.setLocationAtPoint(f,g);else{var b=a.zoomScale(a.zoom-o),y=c>o?Math.min(2,x):Math.max(.5,x),Z=Math.pow(y,1-e),G=a.unproject(I.add(v.mult(e*Z)).mult(b));a.setLocationAtPoint(a.renderWorldCopies?G.wrap():G,m)}n._fireMoveEvents(i)}),(function(t){n._afterEase(i,t)}),e),this},i.prototype._prepareEase=function(e,i,n){void 0===n&&(n={}),this._moving=!0,i||n.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.Event("pitchstart",e))},i.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},i.prototype._afterEase=function(e,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var n=this._zooming,a=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),a&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},i.prototype.flyTo=function(e,i){var n=this;if(!e.essential&&t.browser.prefersReducedMotion){var a=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(a,i)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,r=this.getZoom(),s=this.getBearing(),l=this.getPitch(),c=this.getPadding(),u="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):r,d="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:l,p="padding"in e?e.padding:o.padding,m=o.zoomScale(u-r),b=t.Point.convert(e.offset),y=o.centerPoint.add(b),f=o.pointLocation(y),g=t.LngLat.convert(e.center||f);this._normalizeCenter(g);var I=o.project(f),v=o.project(g).sub(I),x=e.curve,Z=Math.max(o.width,o.height),G=Z/m,w=v.mag();if("minZoom"in e){var W=t.clamp(Math.min(e.minZoom,r,u),o.minZoom,o.maxZoom),X=Z/o.zoomScale(W-r);x=Math.sqrt(X/w*2)}var _=x*x;function V(t){var e=(G*G-Z*Z+(t?-1:1)*_*_*w*w)/(2*(t?G:Z)*_*w);return Math.log(Math.sqrt(e*e+1)-e)}function S(t){return(Math.exp(t)-Math.exp(-t))/2}function B(t){return(Math.exp(t)+Math.exp(-t))/2}var L=V(0),Y=function(t){return B(L)/B(L+x*t)},z=function(t){return Z*((B(L)*(S(e=L+x*t)/B(e))-S(L))/_)/w;var e},R=(V(1)-L)/x;if(Math.abs(w)<1e-6||!isFinite(R)){if(Math.abs(Z-G)<1e-6)return this.easeTo(e,i);var C=G<Z?-1:1;R=Math.abs(Math.log(G/Z))/x,z=function(){return 0},Y=function(t){return Math.exp(C*x*t)}}return e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==d,this._pitching=h!==l,this._padding=!o.isPaddingEqual(p),this._prepareEase(i,!1),this._ease((function(e){var a=e*R,m=1/Y(a);o.zoom=1===e?u:r+o.scaleZoom(m),n._rotating&&(o.bearing=t.number(s,d,e)),n._pitching&&(o.pitch=t.number(l,h,e)),n._padding&&(o.interpolatePadding(c,p,e),y=o.centerPoint.add(b));var f=1===e?g:o.unproject(I.add(v.mult(z(a))).mult(m));o.setLocationAtPoint(o.renderWorldCopies?f.wrap():f,y),n._fireMoveEvents(i)}),(function(){return n._afterEase(i)}),e),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,e)}if(!t){var n=this.handlers;n&&n.stop(!1)}return this},i.prototype._ease=function(e,i,n){!1===n.animate||0===n.duration?(e(1),i()):(this._easeStart=t.browser.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(e,i){e=t.wrap(e,-180,180);var n=Math.abs(e-i);return Math.abs(e-360-i)<n&&(e-=360),Math.abs(e+360-i)<n&&(e+=360),e},i.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var i=t.lng-e.center.lng;t.lng+=i>180?-360:i<-180?360:0}},i}(t.Evented),Ia=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ia.prototype.getDefaultPosition=function(){return"bottom-right"},Ia.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ia.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ia.prototype._setElementTitle=function(t,e){var i=this._map._getUIString("AttributionControl."+e);t.title=i,t.setAttribute("aria-label",i)},Ia.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ia.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var n=i.reduce((function(t,e,n){return e.value&&(t+=e.key+"="+e.value+(n<i.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+n+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}},Ia.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Ia.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var i=this._map.style.sourceCaches;for(var n in i){var a=i[n];if(a.used){var o=a.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var r=(t=t.filter((function(e,i){for(var n=i+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0}))).join(" | ");r!==this._attribHTML&&(this._attribHTML=r,t.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ia.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var va=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};va.prototype.onAdd=function(t){this._map=t,this._container=i.create("div","mapboxgl-ctrl");var e=i.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},va.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},va.prototype.getDefaultPosition=function(){return"bottom-left"},va.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},va.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},va.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var xa=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xa.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},xa.prototype.remove=function(t){for(var e=this._currentlyRunning,i=0,n=e?this._queue.concat(e):this._queue;i<n.length;i+=1){var a=n[i];if(a.id===t)return void(a.cancelled=!0)}},xa.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,n=e;i<n.length;i+=1){var a=n[i];if(!a.cancelled&&(a.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xa.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Za={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ga=t.window.HTMLImageElement,wa=t.window.HTMLElement,Wa=t.window.ImageBitmap,Xa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},_a=function(n){function a(e){var i=this;if(null!=(e=t.extend({},Xa,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var a=new Gn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(n.call(this,a,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new xa,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Za,e.locale),this._clickTolerance=e.clickTolerance,this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof wa))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new fa(this,e),this._hash=e.hash&&new Wn("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Ia({customAttribution:e.customAttribution})),this.addControl(new va,e.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){i.fire(new t.Event(e.dataType+"dataloading",e))}))}n&&(a.__proto__=n),(a.prototype=Object.create(n&&n.prototype)).constructor=a;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return a.prototype._getMapId=function(){return this._mapId},a.prototype.addControl=function(e,i){if(void 0===i&&(i=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=e.onAdd(this);this._controls.push(e);var a=this._controlPositions[i];return-1!==i.indexOf("bottom")?a.insertBefore(n,a.firstChild):a.appendChild(n),this},a.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(e);return i>-1&&this._controls.splice(i,1),e.onRemove(this),this},a.prototype.hasControl=function(t){return this._controls.indexOf(t)>-1},a.prototype.resize=function(e){var i=this._containerDimensions(),n=i[0],a=i[1];if(n===this.transform.width&&a===this.transform.height)return this;this._resizeCanvas(n,a),this.transform.resize(n,a),this.painter.resize(n,a);var o=!this._moving;return o&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},a.prototype.getBounds=function(){return this.transform.getBounds()},a.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},a.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},a.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},a.prototype.getMinZoom=function(){return this.transform.minZoom},a.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},a.prototype.getMaxZoom=function(){return this.transform.maxZoom},a.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},a.prototype.getMinPitch=function(){return this.transform.minPitch},a.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},a.prototype.getMaxPitch=function(){return this.transform.maxPitch},a.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},a.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},a.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},a.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},a.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},a.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},a.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},a.prototype._createDelegatedListener=function(t,e,i){var n,a=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:i,delegates:{mousemove:function(n){var r=a.getLayer(e)?a.queryRenderedFeatures(n.point,{layers:[e]}):[];r.length?o||(o=!0,i.call(a,new Rn(t,a,n.originalEvent,{features:r}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var r=!1;return{layer:e,listener:i,delegates:{mousemove:function(n){(a.getLayer(e)?a.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?r=!0:r&&(r=!1,i.call(a,new Rn(t,a,n.originalEvent)))},mouseout:function(e){r&&(r=!1,i.call(a,new Rn(t,a,e.originalEvent)))}}}}return{layer:e,listener:i,delegates:(n={},n[t]=function(t){var n=a.getLayer(e)?a.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,i.call(a,t),delete t.features)},n)}},a.prototype.on=function(t,e,i){if(void 0===i)return n.prototype.on.call(this,t,e);var a=this._createDelegatedListener(t,e,i);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a),a.delegates)this.on(o,a.delegates[o]);return this},a.prototype.once=function(t,e,i){if(void 0===i)return n.prototype.once.call(this,t,e);var a=this._createDelegatedListener(t,e,i);for(var o in a.delegates)this.once(o,a.delegates[o]);return this},a.prototype.off=function(t,e,i){var a=this;return void 0===i?n.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(n){for(var o=n[t],r=0;r<o.length;r++){var s=o[r];if(s.layer===e&&s.listener===i){for(var l in s.delegates)a.off(l,s.delegates[l]);return o.splice(r,1),a}}}(this._delegatedListeners),this)},a.prototype.queryRenderedFeatures=function(e,i){if(!this.style)return[];var n;if(void 0!==i||void 0===e||e instanceof t.Point||Array.isArray(e)||(i=e,e=void 0),i=i||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])n=[t.Point.convert(e)];else{var a=t.Point.convert(e[0]),o=t.Point.convert(e[1]);n=[a,new t.Point(o.x,a.y),o,new t.Point(a.x,o.y),a]}return this.style.queryRenderedFeatures(n,i,this.transform)},a.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},a.prototype.setStyle=function(e,i){return!1!==(i=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(e,i))},a.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},a.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Te(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},a.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Te(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},a.prototype._diffStyle=function(e,i){var n=this;if("string"==typeof e){var a=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(a,t.ResourceType.Style);t.getJSON(o,(function(e,a){e?n.fire(new t.ErrorEvent(e)):a&&n._updateDiff(a,i)}))}else"object"==typeof e&&this._updateDiff(e,i)},a.prototype._updateDiff=function(e,i){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch."),this._updateStyle(e,i)}},a.prototype.getStyle=function(){if(this.style)return this.style.serialize()},a.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},a.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},a.prototype.isSourceLoaded=function(e){var i=this.style&&this.style.sourceCaches[e];if(void 0!==i)return i.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},a.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var i=t[e]._tiles;for(var n in i){var a=i[n];if("loaded"!==a.state&&"errored"!==a.state)return!1}}return!0},a.prototype.addSourceType=function(t,e,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,i)},a.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},a.prototype.getSource=function(t){return this.style.getSource(t)},a.prototype.addImage=function(e,i,n){void 0===n&&(n={});var a=n.pixelRatio;void 0===a&&(a=1);var o=n.sdf;void 0===o&&(o=!1);var r=n.stretchX,s=n.stretchY,l=n.content;if(this._lazyInitEmptyStyle(),i instanceof Ga||Wa&&i instanceof Wa){var c=t.browser.getImageData(i);this.style.addImage(e,{data:new t.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:a,stretchX:r,stretchY:s,content:l,sdf:o,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var u=i;this.style.addImage(e,{data:new t.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:a,stretchX:r,stretchY:s,content:l,sdf:o,version:0,userImage:u}),u.onAdd&&u.onAdd(this,e)}},a.prototype.updateImage=function(e,i){var n=this.style.getImage(e);if(!n)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var a=i instanceof Ga||Wa&&i instanceof Wa?t.browser.getImageData(i):i,o=a.width,r=a.height,s=a.data;return void 0===o||void 0===r?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==n.data.width||r!==n.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(n.data.replace(s,!(i instanceof Ga||Wa&&i instanceof Wa)),void this.style.updateImage(e,n))},a.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},a.prototype.removeImage=function(t){this.style.removeImage(t)},a.prototype.loadImage=function(e,i){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),i)},a.prototype.listImages=function(){return this.style.listImages()},a.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},a.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},a.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},a.prototype.getLayer=function(t){return this.style.getLayer(t)},a.prototype.setLayerZoomRange=function(t,e,i){return this.style.setLayerZoomRange(t,e,i),this._update(!0)},a.prototype.setFilter=function(t,e,i){return void 0===i&&(i={}),this.style.setFilter(t,e,i),this._update(!0)},a.prototype.getFilter=function(t){return this.style.getFilter(t)},a.prototype.setPaintProperty=function(t,e,i,n){return void 0===n&&(n={}),this.style.setPaintProperty(t,e,i,n),this._update(!0)},a.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},a.prototype.setLayoutProperty=function(t,e,i,n){return void 0===n&&(n={}),this.style.setLayoutProperty(t,e,i,n),this._update(!0)},a.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},a.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},a.prototype.getLight=function(){return this.style.getLight()},a.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},a.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},a.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},a.prototype.getContainer=function(){return this._container},a.prototype.getCanvasContainer=function(){return this._canvasContainer},a.prototype.getCanvas=function(){return this._canvas},a.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},a.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},a.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=i.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var a=this._controlContainer=i.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=i.create("div","mapboxgl-ctrl-"+t,a)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},a.prototype._resizeCanvas=function(e,i){var n=t.browser.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*i,this._canvas.style.width=e+"px",this._canvas.style.height=i+"px"},a.prototype._setupPainter=function(){var i=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);n?(this.painter=new In(n,this.transform),t.webpSupported.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},a.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},a.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},a.prototype._onMapScroll=function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},a.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},a.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},a.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},a.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},a.prototype._render=function(e){var i,n=this,a=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),a=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var r=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=t.browser.now();this.style.zoomHistory.update(s,l);var c=new t.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),u=c.crossFadingFactor();1===u&&u===this._crossFadingFactor||(r=!0,this._crossFadingFactor=u),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||r)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var d=t.browser.now()-a;o.endQueryEXT(o.TIME_ELAPSED_EXT,i),setTimeout((function(){var e=o.getQueryObjectEXT(i,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(i),n.fire(new t.Event("gpu-timing-frame",{cpuTime:d,gpuTime:e}))}),50)}if(this.listens("gpu-timing-layer")){var h=this.painter.collectGpuTimers();setTimeout((function(){var e=n.painter.queryGpuTimers(h);n.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}var p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0),this}},a.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,i=this._controls;e<i.length;e+=1)i[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),Va(this._canvasContainer),Va(this._controlContainer),Va(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},a.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render(t)})))},a.prototype._onWindowOnline=function(){this._update()},a.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},a.prototype._setCacheLimits=function(e,i){t.setCacheLimits(e,i)},o.version.get=function(){return t.version},Object.defineProperties(a.prototype,o),a}(ga);function Va(t){t.parentNode&&t.parentNode.removeChild(t)}var Sa={showCompass:!0,showZoom:!0,visualizePitch:!1},Ba=function(e){var n=this;this.options=t.extend({},Sa,e),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return n._map.zoomIn({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return n._map.zoomOut({},{originalEvent:t})})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:t}):n._map.resetNorth({},{originalEvent:t})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ba.prototype._updateZoomButtons=function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),i=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())},Ba.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Ba.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new La(this._map,this._compass,this.options.visualizePitch)),this._container},Ba.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ba.prototype._createButton=function(t,e){var n=i.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n},Ba.prototype._setButtonTitle=function(t,e){var i=this._map._getUIString("NavigationControl."+e);t.title=i,t.setAttribute("aria-label",i)};var La=function(e,n,a){void 0===a&&(a=!1),this._clickTolerance=10,this.element=n,this.mouseRotate=new On({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,a&&(this.mousePitch=new Pn({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(n,"mousedown",this.mousedown),i.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(n,"touchmove",this.touchmove),i.addEventListener(n,"touchend",this.touchend),i.addEventListener(n,"touchcancel",this.reset)};function Ya(e,i,n){if(e=new t.LngLat(e.lng,e.lat),i){var a=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),r=n.locationPoint(e).distSqr(i);n.locationPoint(a).distSqr(i)<r?e=a:n.locationPoint(o).distSqr(i)<r&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}La.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),i.disableDrag()},La.prototype.move=function(t,e){var i=this.map,n=this.mouseRotate.mousemoveWindow(t,e);if(n&&n.bearingDelta&&i.setBearing(i.getBearing()+n.bearingDelta),this.mousePitch){var a=this.mousePitch.mousemoveWindow(t,e);a&&a.pitchDelta&&i.setPitch(i.getPitch()+a.pitchDelta)}},La.prototype.off=function(){var t=this.element;i.removeEventListener(t,"mousedown",this.mousedown),i.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(t,"touchmove",this.touchmove),i.removeEventListener(t,"touchend",this.touchend),i.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},La.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(t.window,"mousemove",this.mousemove),i.removeEventListener(t.window,"mouseup",this.mouseup)},La.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),i.mousePos(this.element,e)),i.addEventListener(t.window,"mousemove",this.mousemove),i.addEventListener(t.window,"mouseup",this.mouseup)},La.prototype.mousemove=function(t){this.move(t,i.mousePos(this.element,t))},La.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},La.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},La.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},La.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},La.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var za={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ra(t,e,i){var n=t.classList;for(var a in za)n.remove("mapboxgl-"+i+"-anchor-"+a);n.add("mapboxgl-"+i+"-anchor-"+e)}var Ca,Ma=function(e){function n(n,a){if(e.call(this),(n instanceof t.window.HTMLElement||a)&&(n=t.extend({element:n},a)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var o=i.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var r=i.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<u.length;c+=1){var d=u[c],h=i.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",d.rx),h.setAttributeNS(null,"ry",d.ry),l.appendChild(h)}var p=i.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(m);var b=i.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"fill","#000000");var y=i.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),b.appendChild(y);var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");var g=i.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var I=i.createNS("http://www.w3.org/2000/svg","circle");I.setAttributeNS(null,"fill","#000000"),I.setAttributeNS(null,"opacity","0.25"),I.setAttributeNS(null,"cx","5.5"),I.setAttributeNS(null,"cy","5.5"),I.setAttributeNS(null,"r","5.4999962");var v=i.createNS("http://www.w3.org/2000/svg","circle");v.setAttributeNS(null,"fill","#FFFFFF"),v.setAttributeNS(null,"cx","5.5"),v.setAttributeNS(null,"cy","5.5"),v.setAttributeNS(null,"r","5.4999962"),g.appendChild(I),g.appendChild(v),s.appendChild(l),s.appendChild(p),s.appendChild(b),s.appendChild(f),s.appendChild(g),o.appendChild(s),o.setAttributeNS(null,"height",41*this._scale+"px"),o.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(o),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),Ra(this._element,this._anchor,"marker"),this._popup=null}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},n.prototype._onKeyPress=function(t){var e=t.code,i=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==i&&13!==i||this.togglePopup()},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,i=this._element;this._popup&&(e===i||i.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ya(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),i.setTransform(this._element,za[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+n+" "+e)}},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},n.prototype._onMove=function(e){if(!this._isDragging){var i=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=i}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},n.prototype.getRotation=function(){return this._rotation},n.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},n.prototype.getRotationAlignment=function(){return this._rotationAlignment},n.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},n.prototype.getPitchAlignment=function(){return this._pitchAlignment},n}(t.Evented),Ja={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ha=0,ka=!1,ja=function(e){function n(i){e.call(this),this.options=t.extend({},Ja,i),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Ca?n(Ca):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){n(Ca="denied"!==t.state)})):n(Ca=!!t.window.navigator.geolocation),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ha=0,ka=!1},n.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),i=t.coords;return e&&(i.longitude<e.getWest()||i.longitude>e.getEast()||i.latitude<e.getSouth()||i.latitude>e.getNorth())},n.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},n.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},n.prototype._updateCamera=function(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,a=this._map.getBearing(),o=t.extend({bearing:a},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(n),o,{geolocateSource:!0})},n.prototype._updateMarker=function(e){if(e){var i=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},n.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),i=this._map.unproject([1,t]),n=e.distanceTo(i),a=Math.ceil(2*this._accuracy/n);this._circleElement.style.width=a+"px",this._circleElement.style.height=a+"px"},n.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},n.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&ka)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ma(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ma({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))}))},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ha--,ka=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ha>1?(e={maximumAge:6e5,timeout:0},ka=!0):(e=this.options.positionOptions,ka=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),Fa={maxWidth:100,unit:"metric"},Na=function(e){this.options=t.extend({},Fa,e),t.bindAll(["_onMove","setUnit"],this)};function Ta(t,e,i){var n=i&&i.maxWidth||100,a=t._container.clientHeight/2,o=t.unproject([0,a]),r=t.unproject([n,a]),s=o.distanceTo(r);if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?Ua(e,n,l/5280,t._getUIString("ScaleControl.Miles")):Ua(e,n,l,t._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Ua(e,n,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Ua(e,n,s/1e3,t._getUIString("ScaleControl.Kilometers")):Ua(e,n,s,t._getUIString("ScaleControl.Meters"))}function Ua(t,e,i,n){var a,o,r,s=(a=i,(o=Math.pow(10,(""+Math.floor(a)).length-1))*(r=(r=a/o)>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(r)));t.style.width=e*(s/i)+"px",t.innerHTML=s+"&nbsp;"+n}Na.prototype.getDefaultPosition=function(){return"bottom-left"},Na.prototype._onMove=function(){Ta(this._map,this._container,this.options)},Na.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Na.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Na.prototype.setUnit=function(t){this.options.unit=t,Ta(this._map,this._container,this.options)};var Ea=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ea.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ea.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ea.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Ea.prototype._setupUI=function(){var e=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ea.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Ea.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ea.prototype._isFullscreen=function(){return this._fullscreen},Ea.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ea.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Aa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Oa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Pa=function(e){function n(i){e.call(this),this.options=t.extend(Object.create(Aa),i),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},n.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},n.prototype.getElement=function(){return this._container},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var i,n=t.window.document.createDocumentFragment(),a=t.window.document.createElement("body");for(a.innerHTML=e;i=a.firstChild;)n.appendChild(i);return this.setDOMContent(n)},n.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},n.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},n.prototype.setDOMContent=function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this},n.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},n.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},n.prototype.setOffset=function(t){return this.options.offset=t,this._update(),this},n.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},n.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},n.prototype._onMouseUp=function(t){this._update(t.point)},n.prototype._onMouseMove=function(t){this._update(t.point)},n.prototype._onDrag=function(t){this._update(t.point)},n.prototype._update=function(e){var n=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return n._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ya(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var a=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,r=function e(i){if(i){if("number"==typeof i){var n=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new t.Point(0,0),top:new t.Point(0,i),"top-left":new t.Point(n,n),"top-right":new t.Point(-n,n),bottom:new t.Point(0,-i),"bottom-left":new t.Point(n,-n),"bottom-right":new t.Point(-n,-n),left:new t.Point(i,0),right:new t.Point(-i,0)}}if(i instanceof t.Point||Array.isArray(i)){var a=t.Point.convert(i);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:t.Point.convert(i.center||[0,0]),top:t.Point.convert(i.top||[0,0]),"top-left":t.Point.convert(i["top-left"]||[0,0]),"top-right":t.Point.convert(i["top-right"]||[0,0]),bottom:t.Point.convert(i.bottom||[0,0]),"bottom-left":t.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(i["bottom-right"]||[0,0]),left:t.Point.convert(i.left||[0,0]),right:t.Point.convert(i.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,l=this._container.offsetWidth,c=this._container.offsetHeight;s=a.y+r.bottom.y<c?["top"]:a.y>this._map.transform.height-c?["bottom"]:[],a.x<l/2?s.push("left"):a.x>this._map.transform.width-l/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var u=a.add(r[o]).round();i.setTransform(this._container,za[o]+" translate("+u.x+"px,"+u.y+"px)"),Ra(this._container,o,"popup")}},n.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(Oa);t&&t.focus()}},n.prototype._onClose=function(){this.remove()},n}(t.Evented),Ka={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:_a,NavigationControl:Ba,GeolocateControl:ja,AttributionControl:Ia,ScaleControl:Na,FullscreenControl:Ea,Popup:Pa,Marker:Ma,Style:Te,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){Ht().acquire(Rt)},clearPrewarmedResources:function(){var t=Mt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Rt),Mt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Ct.workerCount},set workerCount(t){Ct.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Ka})),i}()})),Tp=t({__proto__:null,default:Np},[Np]);return Cp}();
//# sourceMappingURL=bundle.js.map
